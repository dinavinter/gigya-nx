/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/accounts/Gigya.JS.Plugin.screenSet2/app/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../node_modules/lodash.isempty/index.js":
/*!***********************************************!*\
  !*** ../node_modules/lodash.isempty/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, module) {/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    funcTag = '[object Function]',
    genTag = '[object GeneratorFunction]',
    mapTag = '[object Map]',
    objectTag = '[object Object]',
    promiseTag = '[object Promise]',
    setTag = '[object Set]',
    weakMapTag = '[object WeakMap]';

var dataViewTag = '[object DataView]';

/**
 * Used to match `RegExp`
 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
 */
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

/** Used to detect host constructors (Safari). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Detect free variable `exports`. */
var freeExports =  true && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/**
 * Gets the value at `key` of `object`.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function getValue(object, key) {
  return object == null ? undefined : object[key];
}

/**
 * Checks if `value` is a host object in IE < 9.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
 */
function isHostObject(value) {
  // Many host objects are `Object` objects that can coerce to strings
  // despite having improperly defined `toString` methods.
  var result = false;
  if (value != null && typeof value.toString != 'function') {
    try {
      result = !!(value + '');
    } catch (e) {}
  }
  return result;
}

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to detect overreaching core-js shims. */
var coreJsData = root['__core-js_shared__'];

/** Used to detect methods masquerading as native. */
var maskSrcKey = (function() {
  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
  return uid ? ('Symbol(src)_1.' + uid) : '';
}());

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var objectToString = objectProto.toString;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/** Built-in value references. */
var Buffer = moduleExports ? root.Buffer : undefined,
    propertyIsEnumerable = objectProto.propertyIsEnumerable;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,
    nativeKeys = overArg(Object.keys, Object);

/* Built-in method references that are verified to be native. */
var DataView = getNative(root, 'DataView'),
    Map = getNative(root, 'Map'),
    Promise = getNative(root, 'Promise'),
    Set = getNative(root, 'Set'),
    WeakMap = getNative(root, 'WeakMap');

/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */
var nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');

/** Used to detect maps, sets, and weakmaps. */
var dataViewCtorString = toSource(DataView),
    mapCtorString = toSource(Map),
    promiseCtorString = toSource(Promise),
    setCtorString = toSource(Set),
    weakMapCtorString = toSource(WeakMap);

/**
 * The base implementation of `getTag`.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
function baseGetTag(value) {
  return objectToString.call(value);
}

/**
 * The base implementation of `_.isNative` without bad shim checks.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function,
 *  else `false`.
 */
function baseIsNative(value) {
  if (!isObject(value) || isMasked(value)) {
    return false;
  }
  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource(value));
}

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = getValue(object, key);
  return baseIsNative(value) ? value : undefined;
}

/**
 * Gets the `toStringTag` of `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
var getTag = baseGetTag;

// Fallback for data views, maps, sets, and weak maps in IE 11,
// for data views in Edge < 14, and promises in Node.js.
if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||
    (Map && getTag(new Map) != mapTag) ||
    (Promise && getTag(Promise.resolve()) != promiseTag) ||
    (Set && getTag(new Set) != setTag) ||
    (WeakMap && getTag(new WeakMap) != weakMapTag)) {
  getTag = function(value) {
    var result = objectToString.call(value),
        Ctor = result == objectTag ? value.constructor : undefined,
        ctorString = Ctor ? toSource(Ctor) : undefined;

    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString: return dataViewTag;
        case mapCtorString: return mapTag;
        case promiseCtorString: return promiseTag;
        case setCtorString: return setTag;
        case weakMapCtorString: return weakMapTag;
      }
    }
    return result;
  };
}

/**
 * Checks if `func` has its source masked.
 *
 * @private
 * @param {Function} func The function to check.
 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
 */
function isMasked(func) {
  return !!maskSrcKey && (maskSrcKey in func);
}

/**
 * Checks if `value` is likely a prototype object.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
 */
function isPrototype(value) {
  var Ctor = value && value.constructor,
      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;

  return value === proto;
}

/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to process.
 * @returns {string} Returns the source code.
 */
function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}
    try {
      return (func + '');
    } catch (e) {}
  }
  return '';
}

/**
 * Checks if `value` is likely an `arguments` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 *  else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
function isArguments(value) {
  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.
  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&
    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);
}

/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(document.body.children);
 * // => false
 *
 * _.isArray('abc');
 * // => false
 *
 * _.isArray(_.noop);
 * // => false
 */
var isArray = Array.isArray;

/**
 * Checks if `value` is array-like. A value is considered array-like if it's
 * not a function and has a `value.length` that's an integer greater than or
 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 * @example
 *
 * _.isArrayLike([1, 2, 3]);
 * // => true
 *
 * _.isArrayLike(document.body.children);
 * // => true
 *
 * _.isArrayLike('abc');
 * // => true
 *
 * _.isArrayLike(_.noop);
 * // => false
 */
function isArrayLike(value) {
  return value != null && isLength(value.length) && !isFunction(value);
}

/**
 * This method is like `_.isArrayLike` except that it also checks if `value`
 * is an object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array-like object,
 *  else `false`.
 * @example
 *
 * _.isArrayLikeObject([1, 2, 3]);
 * // => true
 *
 * _.isArrayLikeObject(document.body.children);
 * // => true
 *
 * _.isArrayLikeObject('abc');
 * // => false
 *
 * _.isArrayLikeObject(_.noop);
 * // => false
 */
function isArrayLikeObject(value) {
  return isObjectLike(value) && isArrayLike(value);
}

/**
 * Checks if `value` is a buffer.
 *
 * @static
 * @memberOf _
 * @since 4.3.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
 * @example
 *
 * _.isBuffer(new Buffer(2));
 * // => true
 *
 * _.isBuffer(new Uint8Array(2));
 * // => false
 */
var isBuffer = nativeIsBuffer || stubFalse;

/**
 * Checks if `value` is an empty object, collection, map, or set.
 *
 * Objects are considered empty if they have no own enumerable string keyed
 * properties.
 *
 * Array-like values such as `arguments` objects, arrays, buffers, strings, or
 * jQuery-like collections are considered empty if they have a `length` of `0`.
 * Similarly, maps and sets are considered empty if they have a `size` of `0`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is empty, else `false`.
 * @example
 *
 * _.isEmpty(null);
 * // => true
 *
 * _.isEmpty(true);
 * // => true
 *
 * _.isEmpty(1);
 * // => true
 *
 * _.isEmpty([1, 2, 3]);
 * // => false
 *
 * _.isEmpty({ 'a': 1 });
 * // => false
 */
function isEmpty(value) {
  if (isArrayLike(value) &&
      (isArray(value) || typeof value == 'string' ||
        typeof value.splice == 'function' || isBuffer(value) || isArguments(value))) {
    return !value.length;
  }
  var tag = getTag(value);
  if (tag == mapTag || tag == setTag) {
    return !value.size;
  }
  if (nonEnumShadows || isPrototype(value)) {
    return !nativeKeys(value).length;
  }
  for (var key in value) {
    if (hasOwnProperty.call(value, key)) {
      return false;
    }
  }
  return true;
}

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in Safari 8-9 which returns 'object' for typed array and other constructors.
  var tag = isObject(value) ? objectToString.call(value) : '';
  return tag == funcTag || tag == genTag;
}

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This method is loosely based on
 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 * @example
 *
 * _.isLength(3);
 * // => true
 *
 * _.isLength(Number.MIN_VALUE);
 * // => false
 *
 * _.isLength(Infinity);
 * // => false
 *
 * _.isLength('3');
 * // => false
 */
function isLength(value) {
  return typeof value == 'number' &&
    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

/**
 * This method returns `false`.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {boolean} Returns `false`.
 * @example
 *
 * _.times(2, _.stubFalse);
 * // => [false, false]
 */
function stubFalse() {
  return false;
}

module.exports = isEmpty;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "../node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../webpack/buildin/module.js */ "../node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "../node_modules/lodash.merge/index.js":
/*!*********************************************!*\
  !*** ../node_modules/lodash.merge/index.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, module) {/**
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE = 200;

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/** Used to detect hot functions by number of calls within a span of milliseconds. */
var HOT_COUNT = 800,
    HOT_SPAN = 16;

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    asyncTag = '[object AsyncFunction]',
    boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    funcTag = '[object Function]',
    genTag = '[object GeneratorFunction]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    nullTag = '[object Null]',
    objectTag = '[object Object]',
    proxyTag = '[object Proxy]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    undefinedTag = '[object Undefined]',
    weakMapTag = '[object WeakMap]';

var arrayBufferTag = '[object ArrayBuffer]',
    dataViewTag = '[object DataView]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';

/**
 * Used to match `RegExp`
 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
 */
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

/** Used to detect host constructors (Safari). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Used to detect unsigned integer values. */
var reIsUint = /^(?:0|[1-9]\d*)$/;

/** Used to identify `toStringTag` values of typed arrays. */
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =
typedArrayTags[errorTag] = typedArrayTags[funcTag] =
typedArrayTags[mapTag] = typedArrayTags[numberTag] =
typedArrayTags[objectTag] = typedArrayTags[regexpTag] =
typedArrayTags[setTag] = typedArrayTags[stringTag] =
typedArrayTags[weakMapTag] = false;

/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

/** Detect free variable `exports`. */
var freeExports =  true && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Detect free variable `process` from Node.js. */
var freeProcess = moduleExports && freeGlobal.process;

/** Used to access faster Node.js helpers. */
var nodeUtil = (function() {
  try {
    // Use `util.types` for Node.js 10+.
    var types = freeModule && freeModule.require && freeModule.require('util').types;

    if (types) {
      return types;
    }

    // Legacy `process.binding('util')` for Node.js < 10.
    return freeProcess && freeProcess.binding && freeProcess.binding('util');
  } catch (e) {}
}());

/* Node.js helper references. */
var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

/**
 * A faster alternative to `Function#apply`, this function invokes `func`
 * with the `this` binding of `thisArg` and the arguments of `args`.
 *
 * @private
 * @param {Function} func The function to invoke.
 * @param {*} thisArg The `this` binding of `func`.
 * @param {Array} args The arguments to invoke `func` with.
 * @returns {*} Returns the result of `func`.
 */
function apply(func, thisArg, args) {
  switch (args.length) {
    case 0: return func.call(thisArg);
    case 1: return func.call(thisArg, args[0]);
    case 2: return func.call(thisArg, args[0], args[1]);
    case 3: return func.call(thisArg, args[0], args[1], args[2]);
  }
  return func.apply(thisArg, args);
}

/**
 * The base implementation of `_.times` without support for iteratee shorthands
 * or max array length checks.
 *
 * @private
 * @param {number} n The number of times to invoke `iteratee`.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the array of results.
 */
function baseTimes(n, iteratee) {
  var index = -1,
      result = Array(n);

  while (++index < n) {
    result[index] = iteratee(index);
  }
  return result;
}

/**
 * The base implementation of `_.unary` without support for storing metadata.
 *
 * @private
 * @param {Function} func The function to cap arguments for.
 * @returns {Function} Returns the new capped function.
 */
function baseUnary(func) {
  return function(value) {
    return func(value);
  };
}

/**
 * Gets the value at `key` of `object`.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function getValue(object, key) {
  return object == null ? undefined : object[key];
}

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

/** Used for built-in method references. */
var arrayProto = Array.prototype,
    funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to detect overreaching core-js shims. */
var coreJsData = root['__core-js_shared__'];

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to detect methods masquerading as native. */
var maskSrcKey = (function() {
  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
  return uid ? ('Symbol(src)_1.' + uid) : '';
}());

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/** Used to infer the `Object` constructor. */
var objectCtorString = funcToString.call(Object);

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/** Built-in value references. */
var Buffer = moduleExports ? root.Buffer : undefined,
    Symbol = root.Symbol,
    Uint8Array = root.Uint8Array,
    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,
    getPrototype = overArg(Object.getPrototypeOf, Object),
    objectCreate = Object.create,
    propertyIsEnumerable = objectProto.propertyIsEnumerable,
    splice = arrayProto.splice,
    symToStringTag = Symbol ? Symbol.toStringTag : undefined;

var defineProperty = (function() {
  try {
    var func = getNative(Object, 'defineProperty');
    func({}, '', {});
    return func;
  } catch (e) {}
}());

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,
    nativeMax = Math.max,
    nativeNow = Date.now;

/* Built-in method references that are verified to be native. */
var Map = getNative(root, 'Map'),
    nativeCreate = getNative(Object, 'create');

/**
 * The base implementation of `_.create` without support for assigning
 * properties to the created object.
 *
 * @private
 * @param {Object} proto The object to inherit from.
 * @returns {Object} Returns the new object.
 */
var baseCreate = (function() {
  function object() {}
  return function(proto) {
    if (!isObject(proto)) {
      return {};
    }
    if (objectCreate) {
      return objectCreate(proto);
    }
    object.prototype = proto;
    var result = new object;
    object.prototype = undefined;
    return result;
  };
}());

/**
 * Creates a hash object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Hash(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

/**
 * Removes all key-value entries from the hash.
 *
 * @private
 * @name clear
 * @memberOf Hash
 */
function hashClear() {
  this.__data__ = nativeCreate ? nativeCreate(null) : {};
  this.size = 0;
}

/**
 * Removes `key` and its value from the hash.
 *
 * @private
 * @name delete
 * @memberOf Hash
 * @param {Object} hash The hash to modify.
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}

/**
 * Gets the hash value for `key`.
 *
 * @private
 * @name get
 * @memberOf Hash
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function hashGet(key) {
  var data = this.__data__;
  if (nativeCreate) {
    var result = data[key];
    return result === HASH_UNDEFINED ? undefined : result;
  }
  return hasOwnProperty.call(data, key) ? data[key] : undefined;
}

/**
 * Checks if a hash value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Hash
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function hashHas(key) {
  var data = this.__data__;
  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);
}

/**
 * Sets the hash `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Hash
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the hash instance.
 */
function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;
  return this;
}

// Add methods to `Hash`.
Hash.prototype.clear = hashClear;
Hash.prototype['delete'] = hashDelete;
Hash.prototype.get = hashGet;
Hash.prototype.has = hashHas;
Hash.prototype.set = hashSet;

/**
 * Creates an list cache object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function ListCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

/**
 * Removes all key-value entries from the list cache.
 *
 * @private
 * @name clear
 * @memberOf ListCache
 */
function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}

/**
 * Removes `key` and its value from the list cache.
 *
 * @private
 * @name delete
 * @memberOf ListCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function listCacheDelete(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}

/**
 * Gets the list cache value for `key`.
 *
 * @private
 * @name get
 * @memberOf ListCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function listCacheGet(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  return index < 0 ? undefined : data[index][1];
}

/**
 * Checks if a list cache value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf ListCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function listCacheHas(key) {
  return assocIndexOf(this.__data__, key) > -1;
}

/**
 * Sets the list cache `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf ListCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the list cache instance.
 */
function listCacheSet(key, value) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}

// Add methods to `ListCache`.
ListCache.prototype.clear = listCacheClear;
ListCache.prototype['delete'] = listCacheDelete;
ListCache.prototype.get = listCacheGet;
ListCache.prototype.has = listCacheHas;
ListCache.prototype.set = listCacheSet;

/**
 * Creates a map cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function MapCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

/**
 * Removes all key-value entries from the map.
 *
 * @private
 * @name clear
 * @memberOf MapCache
 */
function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    'hash': new Hash,
    'map': new (Map || ListCache),
    'string': new Hash
  };
}

/**
 * Removes `key` and its value from the map.
 *
 * @private
 * @name delete
 * @memberOf MapCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function mapCacheDelete(key) {
  var result = getMapData(this, key)['delete'](key);
  this.size -= result ? 1 : 0;
  return result;
}

/**
 * Gets the map value for `key`.
 *
 * @private
 * @name get
 * @memberOf MapCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function mapCacheGet(key) {
  return getMapData(this, key).get(key);
}

/**
 * Checks if a map value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf MapCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function mapCacheHas(key) {
  return getMapData(this, key).has(key);
}

/**
 * Sets the map `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf MapCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the map cache instance.
 */
function mapCacheSet(key, value) {
  var data = getMapData(this, key),
      size = data.size;

  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}

// Add methods to `MapCache`.
MapCache.prototype.clear = mapCacheClear;
MapCache.prototype['delete'] = mapCacheDelete;
MapCache.prototype.get = mapCacheGet;
MapCache.prototype.has = mapCacheHas;
MapCache.prototype.set = mapCacheSet;

/**
 * Creates a stack cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Stack(entries) {
  var data = this.__data__ = new ListCache(entries);
  this.size = data.size;
}

/**
 * Removes all key-value entries from the stack.
 *
 * @private
 * @name clear
 * @memberOf Stack
 */
function stackClear() {
  this.__data__ = new ListCache;
  this.size = 0;
}

/**
 * Removes `key` and its value from the stack.
 *
 * @private
 * @name delete
 * @memberOf Stack
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function stackDelete(key) {
  var data = this.__data__,
      result = data['delete'](key);

  this.size = data.size;
  return result;
}

/**
 * Gets the stack value for `key`.
 *
 * @private
 * @name get
 * @memberOf Stack
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function stackGet(key) {
  return this.__data__.get(key);
}

/**
 * Checks if a stack value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Stack
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function stackHas(key) {
  return this.__data__.has(key);
}

/**
 * Sets the stack `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Stack
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the stack cache instance.
 */
function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof ListCache) {
    var pairs = data.__data__;
    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new MapCache(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}

// Add methods to `Stack`.
Stack.prototype.clear = stackClear;
Stack.prototype['delete'] = stackDelete;
Stack.prototype.get = stackGet;
Stack.prototype.has = stackHas;
Stack.prototype.set = stackSet;

/**
 * Creates an array of the enumerable property names of the array-like `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @param {boolean} inherited Specify returning inherited property names.
 * @returns {Array} Returns the array of property names.
 */
function arrayLikeKeys(value, inherited) {
  var isArr = isArray(value),
      isArg = !isArr && isArguments(value),
      isBuff = !isArr && !isArg && isBuffer(value),
      isType = !isArr && !isArg && !isBuff && isTypedArray(value),
      skipIndexes = isArr || isArg || isBuff || isType,
      result = skipIndexes ? baseTimes(value.length, String) : [],
      length = result.length;

  for (var key in value) {
    if ((inherited || hasOwnProperty.call(value, key)) &&
        !(skipIndexes && (
           // Safari 9 has enumerable `arguments.length` in strict mode.
           key == 'length' ||
           // Node.js 0.10 has enumerable non-index properties on buffers.
           (isBuff && (key == 'offset' || key == 'parent')) ||
           // PhantomJS 2 has enumerable non-index properties on typed arrays.
           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||
           // Skip index properties.
           isIndex(key, length)
        ))) {
      result.push(key);
    }
  }
  return result;
}

/**
 * This function is like `assignValue` except that it doesn't assign
 * `undefined` values.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function assignMergeValue(object, key, value) {
  if ((value !== undefined && !eq(object[key], value)) ||
      (value === undefined && !(key in object))) {
    baseAssignValue(object, key, value);
  }
}

/**
 * Assigns `value` to `key` of `object` if the existing value is not equivalent
 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function assignValue(object, key, value) {
  var objValue = object[key];
  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||
      (value === undefined && !(key in object))) {
    baseAssignValue(object, key, value);
  }
}

/**
 * Gets the index at which the `key` is found in `array` of key-value pairs.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} key The key to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}

/**
 * The base implementation of `assignValue` and `assignMergeValue` without
 * value checks.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function baseAssignValue(object, key, value) {
  if (key == '__proto__' && defineProperty) {
    defineProperty(object, key, {
      'configurable': true,
      'enumerable': true,
      'value': value,
      'writable': true
    });
  } else {
    object[key] = value;
  }
}

/**
 * The base implementation of `baseForOwn` which iterates over `object`
 * properties returned by `keysFunc` and invokes `iteratee` for each property.
 * Iteratee functions may exit iteration early by explicitly returning `false`.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @returns {Object} Returns `object`.
 */
var baseFor = createBaseFor();

/**
 * The base implementation of `getTag` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

/**
 * The base implementation of `_.isArguments`.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 */
function baseIsArguments(value) {
  return isObjectLike(value) && baseGetTag(value) == argsTag;
}

/**
 * The base implementation of `_.isNative` without bad shim checks.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function,
 *  else `false`.
 */
function baseIsNative(value) {
  if (!isObject(value) || isMasked(value)) {
    return false;
  }
  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource(value));
}

/**
 * The base implementation of `_.isTypedArray` without Node.js optimizations.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 */
function baseIsTypedArray(value) {
  return isObjectLike(value) &&
    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
}

/**
 * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function baseKeysIn(object) {
  if (!isObject(object)) {
    return nativeKeysIn(object);
  }
  var isProto = isPrototype(object),
      result = [];

  for (var key in object) {
    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
      result.push(key);
    }
  }
  return result;
}

/**
 * The base implementation of `_.merge` without support for multiple sources.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {number} srcIndex The index of `source`.
 * @param {Function} [customizer] The function to customize merged values.
 * @param {Object} [stack] Tracks traversed source values and their merged
 *  counterparts.
 */
function baseMerge(object, source, srcIndex, customizer, stack) {
  if (object === source) {
    return;
  }
  baseFor(source, function(srcValue, key) {
    stack || (stack = new Stack);
    if (isObject(srcValue)) {
      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);
    }
    else {
      var newValue = customizer
        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)
        : undefined;

      if (newValue === undefined) {
        newValue = srcValue;
      }
      assignMergeValue(object, key, newValue);
    }
  }, keysIn);
}

/**
 * A specialized version of `baseMerge` for arrays and objects which performs
 * deep merges and tracks traversed objects enabling objects with circular
 * references to be merged.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {string} key The key of the value to merge.
 * @param {number} srcIndex The index of `source`.
 * @param {Function} mergeFunc The function to merge values.
 * @param {Function} [customizer] The function to customize assigned values.
 * @param {Object} [stack] Tracks traversed source values and their merged
 *  counterparts.
 */
function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {
  var objValue = safeGet(object, key),
      srcValue = safeGet(source, key),
      stacked = stack.get(srcValue);

  if (stacked) {
    assignMergeValue(object, key, stacked);
    return;
  }
  var newValue = customizer
    ? customizer(objValue, srcValue, (key + ''), object, source, stack)
    : undefined;

  var isCommon = newValue === undefined;

  if (isCommon) {
    var isArr = isArray(srcValue),
        isBuff = !isArr && isBuffer(srcValue),
        isTyped = !isArr && !isBuff && isTypedArray(srcValue);

    newValue = srcValue;
    if (isArr || isBuff || isTyped) {
      if (isArray(objValue)) {
        newValue = objValue;
      }
      else if (isArrayLikeObject(objValue)) {
        newValue = copyArray(objValue);
      }
      else if (isBuff) {
        isCommon = false;
        newValue = cloneBuffer(srcValue, true);
      }
      else if (isTyped) {
        isCommon = false;
        newValue = cloneTypedArray(srcValue, true);
      }
      else {
        newValue = [];
      }
    }
    else if (isPlainObject(srcValue) || isArguments(srcValue)) {
      newValue = objValue;
      if (isArguments(objValue)) {
        newValue = toPlainObject(objValue);
      }
      else if (!isObject(objValue) || isFunction(objValue)) {
        newValue = initCloneObject(srcValue);
      }
    }
    else {
      isCommon = false;
    }
  }
  if (isCommon) {
    // Recursively merge objects and arrays (susceptible to call stack limits).
    stack.set(srcValue, newValue);
    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
    stack['delete'](srcValue);
  }
  assignMergeValue(object, key, newValue);
}

/**
 * The base implementation of `_.rest` which doesn't validate or coerce arguments.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @returns {Function} Returns the new function.
 */
function baseRest(func, start) {
  return setToString(overRest(func, start, identity), func + '');
}

/**
 * The base implementation of `setToString` without support for hot loop shorting.
 *
 * @private
 * @param {Function} func The function to modify.
 * @param {Function} string The `toString` result.
 * @returns {Function} Returns `func`.
 */
var baseSetToString = !defineProperty ? identity : function(func, string) {
  return defineProperty(func, 'toString', {
    'configurable': true,
    'enumerable': false,
    'value': constant(string),
    'writable': true
  });
};

/**
 * Creates a clone of  `buffer`.
 *
 * @private
 * @param {Buffer} buffer The buffer to clone.
 * @param {boolean} [isDeep] Specify a deep clone.
 * @returns {Buffer} Returns the cloned buffer.
 */
function cloneBuffer(buffer, isDeep) {
  if (isDeep) {
    return buffer.slice();
  }
  var length = buffer.length,
      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);

  buffer.copy(result);
  return result;
}

/**
 * Creates a clone of `arrayBuffer`.
 *
 * @private
 * @param {ArrayBuffer} arrayBuffer The array buffer to clone.
 * @returns {ArrayBuffer} Returns the cloned array buffer.
 */
function cloneArrayBuffer(arrayBuffer) {
  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
  new Uint8Array(result).set(new Uint8Array(arrayBuffer));
  return result;
}

/**
 * Creates a clone of `typedArray`.
 *
 * @private
 * @param {Object} typedArray The typed array to clone.
 * @param {boolean} [isDeep] Specify a deep clone.
 * @returns {Object} Returns the cloned typed array.
 */
function cloneTypedArray(typedArray, isDeep) {
  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
}

/**
 * Copies the values of `source` to `array`.
 *
 * @private
 * @param {Array} source The array to copy values from.
 * @param {Array} [array=[]] The array to copy values to.
 * @returns {Array} Returns `array`.
 */
function copyArray(source, array) {
  var index = -1,
      length = source.length;

  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}

/**
 * Copies properties of `source` to `object`.
 *
 * @private
 * @param {Object} source The object to copy properties from.
 * @param {Array} props The property identifiers to copy.
 * @param {Object} [object={}] The object to copy properties to.
 * @param {Function} [customizer] The function to customize copied values.
 * @returns {Object} Returns `object`.
 */
function copyObject(source, props, object, customizer) {
  var isNew = !object;
  object || (object = {});

  var index = -1,
      length = props.length;

  while (++index < length) {
    var key = props[index];

    var newValue = customizer
      ? customizer(object[key], source[key], key, object, source)
      : undefined;

    if (newValue === undefined) {
      newValue = source[key];
    }
    if (isNew) {
      baseAssignValue(object, key, newValue);
    } else {
      assignValue(object, key, newValue);
    }
  }
  return object;
}

/**
 * Creates a function like `_.assign`.
 *
 * @private
 * @param {Function} assigner The function to assign values.
 * @returns {Function} Returns the new assigner function.
 */
function createAssigner(assigner) {
  return baseRest(function(object, sources) {
    var index = -1,
        length = sources.length,
        customizer = length > 1 ? sources[length - 1] : undefined,
        guard = length > 2 ? sources[2] : undefined;

    customizer = (assigner.length > 3 && typeof customizer == 'function')
      ? (length--, customizer)
      : undefined;

    if (guard && isIterateeCall(sources[0], sources[1], guard)) {
      customizer = length < 3 ? undefined : customizer;
      length = 1;
    }
    object = Object(object);
    while (++index < length) {
      var source = sources[index];
      if (source) {
        assigner(object, source, index, customizer);
      }
    }
    return object;
  });
}

/**
 * Creates a base function for methods like `_.forIn` and `_.forOwn`.
 *
 * @private
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseFor(fromRight) {
  return function(object, iteratee, keysFunc) {
    var index = -1,
        iterable = Object(object),
        props = keysFunc(object),
        length = props.length;

    while (length--) {
      var key = props[fromRight ? length : ++index];
      if (iteratee(iterable[key], key, iterable) === false) {
        break;
      }
    }
    return object;
  };
}

/**
 * Gets the data for `map`.
 *
 * @private
 * @param {Object} map The map to query.
 * @param {string} key The reference key.
 * @returns {*} Returns the map data.
 */
function getMapData(map, key) {
  var data = map.__data__;
  return isKeyable(key)
    ? data[typeof key == 'string' ? 'string' : 'hash']
    : data.map;
}

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = getValue(object, key);
  return baseIsNative(value) ? value : undefined;
}

/**
 * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw `toStringTag`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
      tag = value[symToStringTag];

  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}

/**
 * Initializes an object clone.
 *
 * @private
 * @param {Object} object The object to clone.
 * @returns {Object} Returns the initialized clone.
 */
function initCloneObject(object) {
  return (typeof object.constructor == 'function' && !isPrototype(object))
    ? baseCreate(getPrototype(object))
    : {};
}

/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */
function isIndex(value, length) {
  var type = typeof value;
  length = length == null ? MAX_SAFE_INTEGER : length;

  return !!length &&
    (type == 'number' ||
      (type != 'symbol' && reIsUint.test(value))) &&
        (value > -1 && value % 1 == 0 && value < length);
}

/**
 * Checks if the given arguments are from an iteratee call.
 *
 * @private
 * @param {*} value The potential iteratee value argument.
 * @param {*} index The potential iteratee index or key argument.
 * @param {*} object The potential iteratee object argument.
 * @returns {boolean} Returns `true` if the arguments are from an iteratee call,
 *  else `false`.
 */
function isIterateeCall(value, index, object) {
  if (!isObject(object)) {
    return false;
  }
  var type = typeof index;
  if (type == 'number'
        ? (isArrayLike(object) && isIndex(index, object.length))
        : (type == 'string' && index in object)
      ) {
    return eq(object[index], value);
  }
  return false;
}

/**
 * Checks if `value` is suitable for use as unique object key.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
 */
function isKeyable(value) {
  var type = typeof value;
  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
    ? (value !== '__proto__')
    : (value === null);
}

/**
 * Checks if `func` has its source masked.
 *
 * @private
 * @param {Function} func The function to check.
 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
 */
function isMasked(func) {
  return !!maskSrcKey && (maskSrcKey in func);
}

/**
 * Checks if `value` is likely a prototype object.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
 */
function isPrototype(value) {
  var Ctor = value && value.constructor,
      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;

  return value === proto;
}

/**
 * This function is like
 * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
 * except that it includes inherited enumerable properties.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function nativeKeysIn(object) {
  var result = [];
  if (object != null) {
    for (var key in Object(object)) {
      result.push(key);
    }
  }
  return result;
}

/**
 * Converts `value` to a string using `Object.prototype.toString`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

/**
 * A specialized version of `baseRest` which transforms the rest array.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @param {Function} transform The rest array transform.
 * @returns {Function} Returns the new function.
 */
function overRest(func, start, transform) {
  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);
  return function() {
    var args = arguments,
        index = -1,
        length = nativeMax(args.length - start, 0),
        array = Array(length);

    while (++index < length) {
      array[index] = args[start + index];
    }
    index = -1;
    var otherArgs = Array(start + 1);
    while (++index < start) {
      otherArgs[index] = args[index];
    }
    otherArgs[start] = transform(array);
    return apply(func, this, otherArgs);
  };
}

/**
 * Gets the value at `key`, unless `key` is "__proto__" or "constructor".
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function safeGet(object, key) {
  if (key === 'constructor' && typeof object[key] === 'function') {
    return;
  }

  if (key == '__proto__') {
    return;
  }

  return object[key];
}

/**
 * Sets the `toString` method of `func` to return `string`.
 *
 * @private
 * @param {Function} func The function to modify.
 * @param {Function} string The `toString` result.
 * @returns {Function} Returns `func`.
 */
var setToString = shortOut(baseSetToString);

/**
 * Creates a function that'll short out and invoke `identity` instead
 * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`
 * milliseconds.
 *
 * @private
 * @param {Function} func The function to restrict.
 * @returns {Function} Returns the new shortable function.
 */
function shortOut(func) {
  var count = 0,
      lastCalled = 0;

  return function() {
    var stamp = nativeNow(),
        remaining = HOT_SPAN - (stamp - lastCalled);

    lastCalled = stamp;
    if (remaining > 0) {
      if (++count >= HOT_COUNT) {
        return arguments[0];
      }
    } else {
      count = 0;
    }
    return func.apply(undefined, arguments);
  };
}

/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to convert.
 * @returns {string} Returns the source code.
 */
function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}
    try {
      return (func + '');
    } catch (e) {}
  }
  return '';
}

/**
 * Performs a
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * comparison between two values to determine if they are equivalent.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'a': 1 };
 * var other = { 'a': 1 };
 *
 * _.eq(object, object);
 * // => true
 *
 * _.eq(object, other);
 * // => false
 *
 * _.eq('a', 'a');
 * // => true
 *
 * _.eq('a', Object('a'));
 * // => false
 *
 * _.eq(NaN, NaN);
 * // => true
 */
function eq(value, other) {
  return value === other || (value !== value && other !== other);
}

/**
 * Checks if `value` is likely an `arguments` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 *  else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {
  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&
    !propertyIsEnumerable.call(value, 'callee');
};

/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(document.body.children);
 * // => false
 *
 * _.isArray('abc');
 * // => false
 *
 * _.isArray(_.noop);
 * // => false
 */
var isArray = Array.isArray;

/**
 * Checks if `value` is array-like. A value is considered array-like if it's
 * not a function and has a `value.length` that's an integer greater than or
 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 * @example
 *
 * _.isArrayLike([1, 2, 3]);
 * // => true
 *
 * _.isArrayLike(document.body.children);
 * // => true
 *
 * _.isArrayLike('abc');
 * // => true
 *
 * _.isArrayLike(_.noop);
 * // => false
 */
function isArrayLike(value) {
  return value != null && isLength(value.length) && !isFunction(value);
}

/**
 * This method is like `_.isArrayLike` except that it also checks if `value`
 * is an object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array-like object,
 *  else `false`.
 * @example
 *
 * _.isArrayLikeObject([1, 2, 3]);
 * // => true
 *
 * _.isArrayLikeObject(document.body.children);
 * // => true
 *
 * _.isArrayLikeObject('abc');
 * // => false
 *
 * _.isArrayLikeObject(_.noop);
 * // => false
 */
function isArrayLikeObject(value) {
  return isObjectLike(value) && isArrayLike(value);
}

/**
 * Checks if `value` is a buffer.
 *
 * @static
 * @memberOf _
 * @since 4.3.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
 * @example
 *
 * _.isBuffer(new Buffer(2));
 * // => true
 *
 * _.isBuffer(new Uint8Array(2));
 * // => false
 */
var isBuffer = nativeIsBuffer || stubFalse;

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  if (!isObject(value)) {
    return false;
  }
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in Safari 9 which returns 'object' for typed arrays and other constructors.
  var tag = baseGetTag(value);
  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
}

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This method is loosely based on
 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 * @example
 *
 * _.isLength(3);
 * // => true
 *
 * _.isLength(Number.MIN_VALUE);
 * // => false
 *
 * _.isLength(Infinity);
 * // => false
 *
 * _.isLength('3');
 * // => false
 */
function isLength(value) {
  return typeof value == 'number' &&
    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * @static
 * @memberOf _
 * @since 0.8.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {
    return false;
  }
  var proto = getPrototype(value);
  if (proto === null) {
    return true;
  }
  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
  return typeof Ctor == 'function' && Ctor instanceof Ctor &&
    funcToString.call(Ctor) == objectCtorString;
}

/**
 * Checks if `value` is classified as a typed array.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 * @example
 *
 * _.isTypedArray(new Uint8Array);
 * // => true
 *
 * _.isTypedArray([]);
 * // => false
 */
var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;

/**
 * Converts `value` to a plain object flattening inherited enumerable string
 * keyed properties of `value` to own properties of the plain object.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {Object} Returns the converted plain object.
 * @example
 *
 * function Foo() {
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.assign({ 'a': 1 }, new Foo);
 * // => { 'a': 1, 'b': 2 }
 *
 * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
 * // => { 'a': 1, 'b': 2, 'c': 3 }
 */
function toPlainObject(value) {
  return copyObject(value, keysIn(value));
}

/**
 * Creates an array of the own and inherited enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keysIn(new Foo);
 * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
 */
function keysIn(object) {
  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
}

/**
 * This method is like `_.assign` except that it recursively merges own and
 * inherited enumerable string keyed properties of source objects into the
 * destination object. Source properties that resolve to `undefined` are
 * skipped if a destination value exists. Array and plain object properties
 * are merged recursively. Other objects and value types are overridden by
 * assignment. Source objects are applied from left to right. Subsequent
 * sources overwrite property assignments of previous sources.
 *
 * **Note:** This method mutates `object`.
 *
 * @static
 * @memberOf _
 * @since 0.5.0
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @returns {Object} Returns `object`.
 * @example
 *
 * var object = {
 *   'a': [{ 'b': 2 }, { 'd': 4 }]
 * };
 *
 * var other = {
 *   'a': [{ 'c': 3 }, { 'e': 5 }]
 * };
 *
 * _.merge(object, other);
 * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }
 */
var merge = createAssigner(function(object, source, srcIndex) {
  baseMerge(object, source, srcIndex);
});

/**
 * Creates a function that returns `value`.
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Util
 * @param {*} value The value to return from the new function.
 * @returns {Function} Returns the new constant function.
 * @example
 *
 * var objects = _.times(2, _.constant({ 'a': 1 }));
 *
 * console.log(objects);
 * // => [{ 'a': 1 }, { 'a': 1 }]
 *
 * console.log(objects[0] === objects[1]);
 * // => true
 */
function constant(value) {
  return function() {
    return value;
  };
}

/**
 * This method returns the first argument it receives.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Util
 * @param {*} value Any value.
 * @returns {*} Returns `value`.
 * @example
 *
 * var object = { 'a': 1 };
 *
 * console.log(_.identity(object) === object);
 * // => true
 */
function identity(value) {
  return value;
}

/**
 * This method returns `false`.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {boolean} Returns `false`.
 * @example
 *
 * _.times(2, _.stubFalse);
 * // => [false, false]
 */
function stubFalse() {
  return false;
}

module.exports = merge;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "../node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../webpack/buildin/module.js */ "../node_modules/webpack/buildin/module.js")(module)))

/***/ }),

/***/ "../node_modules/tslib/tslib.es6.js":
/*!******************************************!*\
  !*** ../node_modules/tslib/tslib.es6.js ***!
  \******************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault, __classPrivateFieldGet, __classPrivateFieldSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__extends", function() { return __extends; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__assign", function() { return __assign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__rest", function() { return __rest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__decorate", function() { return __decorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__param", function() { return __param; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__metadata", function() { return __metadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__awaiter", function() { return __awaiter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__generator", function() { return __generator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__exportStar", function() { return __exportStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__values", function() { return __values; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__read", function() { return __read; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spread", function() { return __spread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArrays", function() { return __spreadArrays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__await", function() { return __await; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function() { return __asyncGenerator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function() { return __asyncDelegator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncValues", function() { return __asyncValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function() { return __makeTemplateObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importStar", function() { return __importStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importDefault", function() { return __importDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldGet", function() { return __classPrivateFieldGet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldSet", function() { return __classPrivateFieldSet; });
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = __webpack_provided_Object_dot_assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = gigya.Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __exportStar(m, exports) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}

function __values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new gigya.Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? gigya.Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new gigya.Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { gigya.Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result.default = mod;
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, privateMap) {
    if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to get private field on non-instance");
    }
    return privateMap.get(receiver);
}

function __classPrivateFieldSet(receiver, privateMap, value) {
    if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to set private field on non-instance");
    }
    privateMap.set(receiver, value);
    return value;
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "../node_modules/webpack/buildin/global.js":
/*!*************************************************!*\
  !*** ../node_modules/webpack/buildin/global.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "../node_modules/webpack/buildin/module.js":
/*!*************************************************!*\
  !*** ../node_modules/webpack/buildin/module.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(module) {
	if (!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ApiCountdownHelper.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ApiCountdownHelper.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var PhoneNumberWidget_1 = __webpack_require__(/*! ./Widgets/PhoneNumberWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneNumberWidget.ts");
var CONSTS = {
    disabledClass: 'gigya-disabled',
    resendCountDownAttr: 'data-countdown-label',
    hiddenClass: 'gigya-hidden'
};
var ApiCountdownHelper = /** @class */ (function () {
    function ApiCountdownHelper(el) {
        this.el = el;
    }
    ApiCountdownHelper.prototype.startCountdown = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.show();
                        return [4 /*yield*/, this.startResendCountDown(10)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    ApiCountdownHelper.prototype.startResendCountDown = function (counter) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, new gigya.Promise(function (resolve) {
                        _this.show();
                        _this.changeResendBlockedMessage(counter);
                        _this.intervalID = setInterval(function () {
                            if (counter === 1) {
                                clearInterval(_this.intervalID);
                                _this.hide();
                                _this.el.innerHTML = '';
                                resolve();
                            }
                            else {
                                counter -= 1;
                                _this.changeResendBlockedMessage(counter);
                            }
                        }, 1000);
                    })];
            });
        });
    };
    ApiCountdownHelper.prototype.changeResendBlockedMessage = function (count) {
        var countdownLabel = this.el.getAttribute(CONSTS.resendCountDownAttr) || '';
        this.el.innerHTML = countdownLabel === null || countdownLabel === void 0 ? void 0 : countdownLabel.replace(PhoneNumberWidget_1.PhoneNumberWidget_CONSTS.resendCountTemplate, count === null || count === void 0 ? void 0 : count.toString());
    };
    ApiCountdownHelper.prototype.show = function () {
        this.el.classList.remove(CONSTS.hiddenClass);
    };
    ApiCountdownHelper.prototype.hide = function () {
        this.el.classList.add(CONSTS.hiddenClass);
    };
    ApiCountdownHelper.prototype.destroy = function () {
        if (this.intervalID) {
            clearInterval(this.intervalID);
        }
    };
    return ApiCountdownHelper;
}());
exports.ApiCountdownHelper = ApiCountdownHelper;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ApiLinkHelper.ts":
/*!**********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ApiLinkHelper.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var PhoneNumberWidget_1 = __webpack_require__(/*! ./Widgets/PhoneNumberWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneNumberWidget.ts");
var CONSTS = {
    disabledClass: 'gigya-disabled',
    resendCountDownAttr: 'data-countdown-label'
};
var ApiLinkHelper = /** @class */ (function () {
    function ApiLinkHelper(el, callApi) {
        var _this = this;
        var _a;
        this.el = el;
        this.callApi = callApi;
        this.onClick = function () {
            _this.callApi();
            _this.temporarilyDisable();
        };
        this.originalText = (_a = this.el) === null || _a === void 0 ? void 0 : _a.innerHTML;
    }
    ApiLinkHelper.prototype.init = function () {
        this.temporarilyDisable();
    };
    ApiLinkHelper.prototype.destroy = function () {
        if (this.resendTimeoutId) {
            clearTimeout(this.resendTimeoutId);
        }
        window.gigya.utils.DOM.removeEventListener(this.el, 'click', this.onClick);
    };
    ApiLinkHelper.prototype.temporarilyDisable = function () {
        this.disable();
        this.startResendCountDown(10);
    };
    ApiLinkHelper.prototype.startResendCountDown = function (count) {
        var _this = this;
        if (count) {
            this.changeResendBlockedMessage(count);
            this.resendTimeoutId = setTimeout(function () { return _this.startResendCountDown(count - 1); }, 1000);
        }
        else {
            this.enableResendCode();
        }
    };
    ApiLinkHelper.prototype.enableResendCode = function () {
        this.el.innerHTML = this.originalText;
        this.enable();
    };
    ApiLinkHelper.prototype.disable = function () {
        this.el.setAttribute('disabled', 'disabled');
        window.gigya.utils.DOM.addClassToElement(this.el, CONSTS.disabledClass);
        window.gigya.utils.DOM.removeEventListener(this.el, 'click', this.onClick);
    };
    ApiLinkHelper.prototype.changeResendBlockedMessage = function (count) {
        var countdownLabel = this.el.getAttribute(CONSTS.resendCountDownAttr) || '';
        this.el.innerHTML = countdownLabel === null || countdownLabel === void 0 ? void 0 : countdownLabel.replace(PhoneNumberWidget_1.PhoneNumberWidget_CONSTS.resendCountTemplate, count === null || count === void 0 ? void 0 : count.toString());
    };
    ApiLinkHelper.prototype.enable = function () {
        this.el.removeAttribute('disabled');
        window.gigya.utils.DOM.removeClassFromElement(this.el, CONSTS.disabledClass);
        window.gigya.utils.DOM.addEventListener(this.el, 'click', this.onClick);
    };
    return ApiLinkHelper;
}());
exports.ApiLinkHelper = ApiLinkHelper;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseAuthMethodWidget.ts":
/*!*****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseAuthMethodWidget.ts ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ./BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ./Widgets/TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
var BindingWidget_1 = __webpack_require__(/*! ./Widgets/BindingWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var ErrorDisplayElement_1 = __webpack_require__(/*! ./ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
var expandableWidget_1 = __webpack_require__(/*! ./utils/expandableWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/expandableWidget.ts");
exports.AuthMethod_CONSTS = {
    authMethod: 'data-auth-method',
    isExpandedAttr: 'data-card-expanded',
    containerClass: 'gigya-container',
    containerEnabledClass: 'gigya-container-enabled',
    deps: [TranslatedWidget_1.TranslatedWidget, BindingWidget_1.BindingWidget, ErrorDisplayElement_1.ErrorDisplayElement]
};
utils_1.DeepFreeze(exports.AuthMethod_CONSTS);
var authMethods = {};
// TODO: implement IExpandable widget and use methods to expand/collapse from parent
var BaseAuthMethodWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseAuthMethodWidget, _super);
    function BaseAuthMethodWidget(_form, el, resetCSS) {
        var _this = _super.call(this, _form, el, resetCSS) || this;
        _this._form = _form;
        _this.isInitialized = false;
        _this.originalTabIndex = null;
        return _this;
    }
    BaseAuthMethodWidget.prototype.addWidgetToForm = function () {
        if (!authMethods[this._form.ID]) {
            authMethods[this._form.ID] = [];
        }
        authMethods[this._form.ID].push(this);
    };
    BaseAuthMethodWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            this.addButtonHandler(this.submitButton, function () { return _this.submit(); }, 'submit');
            this.addDomEventListener(this.toggleElement, 'click', function () { return _this.onClick(); });
            this.addDomEventListener(this.formField.instanceElement, 'change', function () { return _this.hideWidgetErrors(); });
            this.addWidgetToForm();
        }
    };
    BaseAuthMethodWidget.prototype.expand = function () {
        this.collapseOtherAuthMethodWidgets();
        this.isExpanded = true;
        this.focusInput();
        this.removeFromTabOrder();
    };
    BaseAuthMethodWidget.prototype.collapse = function () {
        this.isExpanded = false;
        this.addToTabOrder();
    };
    BaseAuthMethodWidget.prototype.onClick = function () {
        this.expand();
    };
    BaseAuthMethodWidget.prototype.submit = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                this._screenSet.data.shouldConnectAccounts = true;
                this._form.submit({
                    submitApiParams: this.submitApiParams,
                    customSubmitApi: this.submitApi,
                    onAfterSubmitCallback: function (response) {
                        if (response.errorCode != GSErrors_1.GSErrors.OK) {
                            _this.displayErrorMessage(response);
                        }
                    }
                });
                return [2 /*return*/];
            });
        });
    };
    BaseAuthMethodWidget.prototype.displayErrorMessage = function (response) {
        var text = this.getErrorTextFromResponse(response);
        this.renderWidgetError(response.errorCode, text);
    };
    BaseAuthMethodWidget.prototype.renderWidgetError = function (errorCode, errorMessage) {
        var _a;
        (_a = this._form._errorDisplayElements[this.fieldName]) === null || _a === void 0 ? void 0 : _a.forEach(function (errorElement) {
            errorElement.showError({
                errorMessage: errorMessage, errorCode: errorCode
            });
        });
    };
    BaseAuthMethodWidget.prototype.hideWidgetErrors = function () {
        var _a;
        (_a = this._form._errorDisplayElements[this.fieldName]) === null || _a === void 0 ? void 0 : _a.forEach(function (errorElement) {
            errorElement.hideError();
        });
    };
    BaseAuthMethodWidget.prototype.getErrorKeyFromResponse = function (response) {
        var errorCode = Number(response.errorCode);
        if (errorCode === GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE && response.errorDetails) {
            if (utils_1.endsWith(response.errorDetails, 'Token has been revoked')) {
                return 'otp_code_expired';
            }
            if (utils_1.endsWith(response.errorDetails, 'code')) {
                return 'please_enter_a_valid_code';
            }
        }
        return this._form.getErrorKey(response);
    };
    BaseAuthMethodWidget.prototype.addToTabOrder = function () {
        var _a;
        if (this.originalTabIndex !== null) {
            (_a = this.toggleElement) === null || _a === void 0 ? void 0 : _a.setAttribute('tabindex', this.originalTabIndex);
        }
    };
    BaseAuthMethodWidget.prototype.removeFromTabOrder = function () {
        this.originalTabIndex = this.toggleElement.getAttribute('tabindex');
        this.toggleElement.removeAttribute('tabindex');
    };
    BaseAuthMethodWidget.prototype.focusInput = function () {
        var _this = this;
        setTimeout(function () { var _a, _b; return (_b = (_a = _this.formField) === null || _a === void 0 ? void 0 : _a.instanceElement) === null || _b === void 0 ? void 0 : _b.focus(); });
    };
    BaseAuthMethodWidget.prototype.collapseOtherAuthMethodWidgets = function () {
        var _this = this;
        authMethods[this._form.ID].forEach(function (authMethod) { return authMethod !== _this && authMethod.collapse(); });
    };
    Object.defineProperty(BaseAuthMethodWidget.prototype, "isExpanded", {
        set: function (expanded) {
            expandableWidget_1.changeExpandedState(this.instanceElement, exports.AuthMethod_CONSTS.isExpandedAttr, expanded);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseAuthMethodWidget.prototype, "submitButton", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector('.gigya-input-submit');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseAuthMethodWidget.prototype, "toggleElement", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector('.gigya-card-header');
        },
        enumerable: true,
        configurable: true
    });
    BaseAuthMethodWidget.prototype.getField = function (fieldName) {
        return this._form.getField(fieldName);
    };
    Object.defineProperty(BaseAuthMethodWidget.prototype, "formField", {
        get: function () {
            return this.getField(this.fieldName);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseAuthMethodWidget.prototype, "dataProvider", {
        get: function () {
            return this._form.dataProvider;
        },
        enumerable: true,
        configurable: true
    });
    return BaseAuthMethodWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.BaseAuthMethodWidget = BaseAuthMethodWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts":
/*!*****************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var apiBootstrap_1 = __webpack_require__(/*! src/core/Gigya.Js/app/apiBootstrap */ "./src/core/Gigya.Js/app/apiBootstrap.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var Errors_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseServerWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var PasswordInputs_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts");
var Consent_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var FlagService_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
var ConsentData_1 = __webpack_require__(/*! ./ConsentData */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ConsentData.ts");
var FormDataProvider_1 = __webpack_require__(/*! ./DataProviders/FormDataProvider */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/FormDataProvider.ts");
exports.Form_CONSTS = {
    originalSuccessScreen: 'data-original-success-screen',
    successScreen: 'data-on-success-screen',
    autoSkipScreen: 'data-on-auto-skip-screen',
    autoSkipFlag: 'data-auto-skip',
    screenSetSkippedScreen: 'data-on-screenset-skipped-screen',
    formErrorClass: 'gigya-form-error',
    defaultCheckedAttribute: 'data-checked',
};
exports.CUSTOM_VALIDATION_TIMEOUT_WARNING = 10000;
utils_1.DeepFreeze(exports.Form_CONSTS);
var NOT_IMPLEMENTED = 'Not implemented';
var BaseForm = /** @class */ (function (_super) {
    tslib_1.__extends(BaseForm, _super);
    function BaseForm(_screen, elForm, gigyaClass) {
        var _this = _super.call(this, elForm, _screen) || this;
        _this._screen = _screen;
        _this.gigyaClass = gigyaClass;
        _this.settings = {
            supportConsentData: false
        };
        // Form inputs
        _this.dataToServer = new Array();
        _this._dynamicInputs = new Array();
        _this._inputs = new Array();
        _this._errorDisplayElements = {};
        _this._widgets = new Array();
        _this._submitButtons = new Array();
        _this._passwordInputs = new Array();
        _this._passwordRetypes = new Array();
        _this._secretQuestions = new Array();
        _this._autoSkipContainers = new Array();
        _this._serverWidgets = new Array();
        _this.filters = new Array();
        _this.isPopulated = false;
        _this.dataStore = _this._screenSet.data;
        _this.behaviorContext = null;
        _this.bindID = _this.publishID ? _this.ID : gigyaClass;
        _this.originalSuccessScreen = elForm.getAttribute(exports.Form_CONSTS.successScreen);
        _this.successScreen = _this._screenSet.chooseNextScreen(_this.originalSuccessScreen);
        _this.autoSkip = elForm.getAttribute(exports.Form_CONSTS.autoSkipFlag) == 'true';
        _this.autoSkipScreen = elForm.getAttribute(exports.Form_CONSTS.autoSkipScreen) || _this.successScreen;
        _this.screenSetSkippedScreen = elForm.getAttribute(exports.Form_CONSTS.screenSetSkippedScreen) || _this.successScreen;
        _this.registerFormInputs();
        _this.registerBoundedErrorElements();
        _this._widgets = BaseFormWidget_1.BaseFormWidget.registerWidgets(_this);
        _this.submitHandler = function (event) {
            window.gigya.utils.DOM.disableDefaultEventHandling(event);
            _this.submit();
        };
        _this.addEventListener('submit', _this.submitHandler);
        _this.fieldChangedHandler = function (event) {
            _this.evaluateConditionalAttributes();
        };
        return _this;
    }
    Object.defineProperty(BaseForm.prototype, "dataProvider", {
        //#region Form library
        get: function () {
            return new FormDataProvider_1.FormDataProvider(this);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseForm.prototype, "submitButtonClicked", {
        get: function () {
            return this._submitButtonClicked;
        },
        enumerable: true,
        configurable: true
    });
    BaseForm.addFormToLibrary = function (form) {
        BaseForm.FormsLibrary[form.CONSTS.gigyaClass] = form;
    };
    BaseForm.registerForms = function (parent) {
        var forms = new Array();
        utils_1.ForEachProp(BaseForm.FormsLibrary, function (formType, gigyaClass) {
            var elements = parent.templateElement.querySelectorAll("form." + gigyaClass);
            utils_1.ForEach(elements, function (el) {
                // #43904 - Ensure form is never submitted, even in case of initialization error.
                // This works by modifying the HTML attribute of the instance element before initialization.
                // When the element is cloned into an instance, all submissions will be cancelled by default.
                el.setAttribute('onsubmit', 'return false;');
                el.setAttribute('method', 'post');
                forms.push(new formType(parent, el, gigyaClass));
            });
        });
        return forms;
    };
    BaseForm.prototype.registerFormInputs = function () {
        this._inputs = FormInput_1.FormInput.registerFormInputs(this.templateElement.elements, this);
        if (this._passwordInputs.length > 0)
            this._validatedPassword = this._passwordInputs[0];
    };
    BaseForm.prototype.addDataField = function (field) {
        this.dataToServer.push(field);
    };
    BaseForm.prototype.addDynamicWidgets = function (rootEl) {
        var _this = this;
        var newWidgets = BaseFormWidget_1.BaseFormWidget.registerDynamicWidgets(this, rootEl);
        utils_1.ForEach(newWidgets, function (w) { return w.linkInstanceElement(_this.instanceElement); });
        this._widgets = this._widgets.concat(newWidgets);
        return newWidgets;
    };
    BaseForm.prototype.removeDynamicWidgets = function (widgetsToRemove) {
        if (!this._widgets || !this._widgets.length)
            return;
        this._widgets = this._widgets.filter(function (w) { return widgetsToRemove.indexOf(w) < 0; });
        widgetsToRemove.forEach(function (widget) {
            widget.unlinkInstanceElement();
            widget.unlinkTemplate();
        });
    };
    BaseForm.prototype.isFormBoundedElement = function (boundedElement) {
        if (boundedElement.boundedTo === this.bindID)
            return true;
        var el = boundedElement.instanceElement || boundedElement.templateElement;
        var thisEl = this.instanceElement || this.templateElement;
        while (el && el !== thisEl && el !== document.documentElement)
            el = el.parentElement;
        return el === thisEl;
    };
    BaseForm.prototype.linkAndPopulateInputElements = function (items) {
        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
            var item = items_1[_i];
            item.linkInstanceElement(this.instanceElement);
        }
        this.prePopulate();
    };
    BaseForm.prototype.linkAndPopulateWidgetElements = function (items) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _i, items_2, item;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _i = 0, items_2 = items;
                        _a.label = 1;
                    case 1:
                        if (!(_i < items_2.length)) return [3 /*break*/, 4];
                        item = items_2[_i];
                        return [4 /*yield*/, item.linkInstanceElement(this.instanceElement)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3:
                        _i++;
                        return [3 /*break*/, 1];
                    case 4:
                        this.prePopulate();
                        return [2 /*return*/];
                }
            });
        });
    };
    // TODO: remove when newFormLinkInstanceElement cleanup
    BaseForm.prototype.linkAndPopulateElements = function (items) {
        var _this = this;
        var linkItem = function (i) { return i.linkInstanceElement(_this.instanceElement); };
        utils_1.ForEach(items, linkItem);
        this.prePopulate();
    };
    BaseForm.prototype.ignoredFields = function () {
        return {
            'g-recaptcha-response': true,
            'fc-token': true,
            'passkey': true,
        };
    };
    BaseForm.prototype.registerBoundedErrorElements = function () {
        var _this = this;
        // Find all error display elements on the screen in this form.
        var formBoundedElements = new Array();
        this._errorDisplayElements = {};
        utils_1.ForEachProp(this._screen._errorDisplayElements, function (boundedElements) {
            utils_1.ForEach(boundedElements, function (boundedElement) {
                if (_this.isFormBoundedElement(boundedElement)) {
                    formBoundedElements.push(boundedElement);
                }
            });
        });
        // Loop through each error element on this form.
        utils_1.ForEach(formBoundedElements, function (boundedElement) {
            boundedElement._form = _this;
            // Unless bound to this form, normalize field name (for example, "birthYear" becomes "profile.birthYear").
            var boundedTo = boundedElement.boundedTo === _this.bindID ? _this.bindID : _this.getNormalizedFieldName(boundedElement.boundedTo);
            // Add to list of elements bound to specific ID.
            var boundedList = _this._errorDisplayElements[boundedTo];
            if (!boundedList) {
                boundedList = _this._errorDisplayElements[boundedTo] = [];
            }
            boundedList.push(boundedElement);
        });
    };
    BaseForm.prototype.unlinkTemplate = function () {
        this.removeEventListener('submit', this.submitHandler);
        var unlinkItem = function (i) { return i.unlinkTemplate(); };
        utils_1.ForEach(this._widgets, unlinkItem);
        utils_1.ForEach(this._inputs, unlinkItem);
        _super.prototype.unlinkTemplate.call(this);
    };
    // TODO: remove newLinkInstanceElement and take to code from there to this function when newFormLinkInstanceElement cleanup
    BaseForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.supportConsentData) {
                            this.setConsentData();
                        }
                        if (!FlagService_1.FlagService.newFormLinkInstanceElement) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.newLinkInstanceElement(parent)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        this.legacyLinkInstanceElement(parent);
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    // TODO: when newFormLinkInstanceElement cleanup move code to linkInstanceElement and remove
    BaseForm.prototype.newLinkInstanceElement = function (parent) {
        var _a;
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        if (!this.instanceElement) return [3 /*break*/, 2];
                        this.linkAndPopulateInputElements(this._inputs);
                        return [4 /*yield*/, this.linkAndPopulateWidgetElements(this._widgets)];
                    case 1:
                        _b.sent();
                        // Add event listener after link to instance elements.
                        this.addEventListener('fieldChanged', this.fieldChangedHandler);
                        _b.label = 2;
                    case 2:
                        (_a = this.behaviorContext) === null || _a === void 0 ? void 0 : _a.startMonitoring();
                        return [2 /*return*/];
                }
            });
        });
    };
    // TODO: remove when newFormLinkInstanceElement cleanup
    BaseForm.prototype.legacyLinkInstanceElement = function (parent) {
        var _a;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            this.linkAndPopulateElements(this._inputs);
            this.linkAndPopulateElements(this._widgets);
            // Add event listener after link to instance elements.
            this.addEventListener('fieldChanged', this.fieldChangedHandler);
        }
        (_a = this.behaviorContext) === null || _a === void 0 ? void 0 : _a.startMonitoring();
    };
    BaseForm.prototype.getLoginProviders = function () {
        return LoginModes_1.LoginModes.standard.getLoginProviders(this._screenSet.data.apiData, this._screenSet.params, this._screenSet.data.regToken);
    };
    BaseForm.prototype.unlinkInstanceElement = function () {
        var _a;
        // The event listener needs to be removed so that it can't be triggered when instance elements don't exist.
        this.removeEventListener('fieldChanged', this.fieldChangedHandler);
        this.clearDynamicFields(this._dynamicInputs);
        this._dynamicInputs = [];
        if (this.instanceElement) {
            var unlinkItem = function (i) { return i.unlinkInstanceElement(); };
            utils_1.ForEach(this._widgets, unlinkItem);
            utils_1.ForEach(this._inputs, unlinkItem);
        }
        (_a = this.behaviorContext) === null || _a === void 0 ? void 0 : _a.stopMonitoring();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    //#region pre-populate form
    BaseForm.prototype.prePopulateDataFrom = function () {
        return [];
    };
    BaseForm.prototype.prePopulateData = function () {
        var apiData = this._screenSet.getApiData();
        var apiDataForForm = [{}];
        var overriddenData = [];
        utils_1.ForEach(this.prePopulateDataFrom(), function (field) {
            var extractedField = window.gigya.utils.object.getPropertyBySerializedName(apiData, field, false);
            apiDataForForm.push(extractedField);
            if ((field === 'getAccountInfo.preferences' || field === 'getAccountInfo.subscriptions')
                && extractedField && typeof extractedField === 'object') {
                Object.keys(extractedField).forEach(function (key) {
                    if (apiData[key]) {
                        overriddenData.push({ key: key, field: field });
                    }
                });
            }
        });
        if (overriddenData.length) {
            window.gigya.logger.report('pre-populate data overriddden fields', window.gigya.utils.object.merge(overriddenData), false);
        }
        return window.gigya.utils.object.merge(apiDataForForm);
    };
    BaseForm.prototype.getErrorKey = function (response) {
        var errorCode = Number(response.errorCode);
        switch (errorCode) {
            case GSErrors_1.GSErrors.UNAUTHORIZED_USER:
                return 'unauthorized_user';
            case GSErrors_1.GSErrors.PERMISSION_DENIED:
                return 'permission_denied';
            case GSErrors_1.GSErrors.ACCOUNT_TEMPORARILY_LOCKED_OUT:
                return 'account_temporarily_locked_out';
            case GSErrors_1.GSErrors.ACCOUNT_DISABLED:
                return 'account_is_disabled';
            case GSErrors_1.GSErrors.LOGIN_FAILED_CAPTCHA_REQUIRED:
            case GSErrors_1.GSErrors.LOGIN_FAILED_WRONG_CAPTCHA:
                return 'login_captcha_error';
            case GSErrors_1.GSErrors.REQUEST_FAILED_CAPTCHA_REQUIRED:
                return 'request_captcha_error';
            case GSErrors_1.GSErrors.LOGIN_IDENTIFIER_EXISTS:
                return 'login_identifier_exists';
            case GSErrors_1.GSErrors.UNIQUE_IDENTIFIER_EXISTS:
                return 'unique_identifier_exists';
            case GSErrors_1.GSErrors.UNDERAGE_USER:
                return 'sorry_we_are_not_able_to_process_your_registration'; //COPPA
            case GSErrors_1.GSErrors.INVALID_LOGINID:
                return 'invalid_login_or_password';
            case GSErrors_1.GSErrors.LOGINID_DOES_NOT_EXIST:
                return 'there_is_no_user_with_that_username_or_email';
            case GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE: // invalid parameter value
            case GSErrors_1.GSErrors.DUPLICATE_NONCE:
                return 'there_are_errors_in_your_form_please_try_again';
            case GSErrors_1.GSErrors.OLD_PASSWORD_USED:
                return 'old_password_cannot_be_the_same_as_new_password';
            case GSErrors_1.GSErrors.NETWORK_ERROR:
                return 'network_error';
            case GSErrors_1.GSErrors.VALIDATION_ERROR: // Validation_error
                var captchaError = response.validationErrors.filter(function (err) { return err.errorCode === GSErrors_1.GSErrors.CAPTCHA_VERIFICATION_FAILED; })[0];
                return captchaError ? 'register_captcha_error' : 'there_are_errors_in_your_form_please_try_again';
            case GSErrors_1.GSErrors.FORBIDDEN:
                return 'forbidden_error';
            case GSErrors_1.GSErrors.FREQUENCY_LIMIT_REACHED:
                return 'code_frequency_limit_reached';
            case GSErrors_1.GSErrors.ACCOUNT_PENDING_REGISTRATION:
                return 'account_pending_registration';
            case GSErrors_1.GSErrors.OK:
            default:
                // Nothing to do for the error message here
                return '';
        }
    };
    // Pre-populate form data from server or default values.
    BaseForm.prototype.prePopulate = function () {
        var _this = this;
        var populateData = tslib_1.__assign(tslib_1.__assign({}, this.prePopulateData()), this.beforeLoadData);
        this.updateDynamicFields();
        var updateField = function (field) {
            var fieldName = field.getName(true);
            if (fieldName && fieldName !== 'password') {
                var dataValue = null;
                var arrayRootField = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayRootAttribute);
                if (!arrayRootField) {
                    dataValue = window.gigya.utils.object.getPropertyBySerializedName(populateData, fieldName, false);
                }
                else {
                    if (!field.arrayKeyField || !field.arrayKeyValue) {
                        _this.warn('Field not populated because data-array-root provided without data-array-key-field and data-array-key-value', fieldName);
                    }
                    else {
                        var arrayRoot = window.gigya.utils.object.getPropertyBySerializedName(populateData, arrayRootField, false);
                        if (arrayRoot && arrayRoot.constructor === Array && arrayRoot.length) {
                            // Find element.
                            for (var _i = 0, arrayRoot_1 = arrayRoot; _i < arrayRoot_1.length; _i++) {
                                var o = arrayRoot_1[_i];
                                var arrayKeyFieldValue = window.gigya.utils.object.getPropertyBySerializedName(o, field.arrayKeyField, false);
                                if (field.arrayKeyValue === String(arrayKeyFieldValue)) {
                                    dataValue = window.gigya.utils.object.getPropertyBySerializedName(o, fieldName.substr(arrayRootField.length + 1), false);
                                    break;
                                }
                            }
                        }
                    }
                }
                if (dataValue !== null) {
                    field.prePopulate(dataValue);
                }
                else if (field.type === 'checkbox') {
                    var checkboxInstanceElement = field.instanceElement;
                    var defaultCheckedCondition = field.instanceElement.getAttribute(exports.Form_CONSTS.defaultCheckedAttribute);
                    if (defaultCheckedCondition) {
                        checkboxInstanceElement.checked = Boolean(field.evaluateExpression({ condition: defaultCheckedCondition }));
                    }
                    // Set default value to checked property.
                    // This is necessary to trigger conditionals that rely on the checkbox's value.
                    field.setValue(checkboxInstanceElement.checked);
                }
            }
        };
        utils_1.ForEach(this._inputs, updateField);
        utils_1.ForEach(this._dynamicInputs, updateField);
        this.isPopulated = true;
    };
    BaseForm.prototype.getExtraProfileFields = function (missingOnly) {
        var _this = this;
        var alreadyHandledFields = {};
        return this.dataToServer
            .map(function (field) { return field.normalizedFieldName; })
            .concat(this._widgets.reduce(function (res, widget) { return res.concat(widget.getFieldsNames()); }, [])) // get also fieldNames from widgets that may not be filled in dataToServer
            .filter(function (n) { return utils_1.firstPart(n, '.') === _this.profileObjectName(); }) // make sure it is in profile namespace
            .map(function (n) { return utils_1.firstPart(n.replace(_this.profileObjectName() + '.', ''), '.'); }) // get the property name itself
            .reduce(function (fieldNames, fn) {
            if (alreadyHandledFields[fn])
                return fieldNames;
            alreadyHandledFields[fn] = true;
            var profile = _this._screenSet.getProfile();
            if (!missingOnly || !profile || !profile[fn]) {
                fieldNames.push(fn);
            }
            return fieldNames;
        }, []);
    };
    BaseForm.prototype.getNeededData = function (formContext) {
        var neededData = {};
        // Fetch password complexity for the password widget and validation if password field exists on screen.
        var isPasswordPoliciesNeeded = utils_1.Some(this.dataToServer, this.isPasswordPolicyNeededForField);
        if (isPasswordPoliciesNeeded) {
            neededData['getPolicies'] = {
                params: {
                    sections: 'passwordComplexity',
                },
                cache: true,
            };
        }
        if (this.supportConsentData) {
            neededData['getSchema'] = {
                params: {},
            };
            neededData['getSiteConsentDetails'] = {
                params: {},
                shouldExecute: function () {
                    if (!ConsentData_1.hasConsentLicense()) {
                        return gigya.Promise.resolve(false);
                    }
                    return apiBootstrap_1.getConsentStatus()
                        .then(function (res) {
                        var _a;
                        var isMigrated = Boolean((_a = res === null || res === void 0 ? void 0 : res.consentStatus) === null || _a === void 0 ? void 0 : _a.isMigrated);
                        window.gigya._.config.consent.isMigrated = isMigrated;
                        return isMigrated;
                    })
                        .catch(function (e) {
                        window.gigya.logger.error('exception when getting consent status', { e: e });
                        return false;
                    });
                }
            };
        }
        return neededData;
    };
    BaseForm.prototype.setBeforeLoadData = function (eventData) {
        this.beforeLoadData = eventData;
    };
    BaseForm.prototype.isPasswordPolicyNeededForField = function (field) {
        return field instanceof PasswordInputs_1.BasePasswordInput && (field.isPasswordSchemaValidated() || field.isPasswordStrengthWidgetBound());
    };
    //#endregion
    //#region Dynamic fields
    // explicitly add dynamic inputs, more efficient
    BaseForm.prototype.addDynamicInputs = function (rootEl) {
        var _this = this;
        var inputsElements = rootEl.querySelectorAll('input,select,fieldset');
        var inputs = FormInput_1.FormInput.registerFormInputs(inputsElements, this);
        inputs.forEach(function (input) {
            TemplateElement_1.TemplateElement.prepareTemplateInstanceElement(input.templateElement, false);
            input.linkInstanceElement(_this.instanceElement);
        });
        this._inputs = this._inputs.concat(inputs);
        return inputs;
    };
    BaseForm.prototype.removeDynamicInputs = function (inputsToRemove) {
        var _this = this;
        this._inputs = this._inputs.filter(function (i) { return inputsToRemove.indexOf(i) < 0; });
        inputsToRemove.forEach(function (input) {
            var dataIndex = window.gigya.utils.array.indexOf(_this.dataToServer, input);
            if (dataIndex !== -1) {
                _this.dataToServer.splice(dataIndex, 1);
            }
            input.unlinkInstanceElement();
            input.unlinkTemplate();
        });
    };
    BaseForm.prototype.clearDynamicFields = function (dynamics) {
        var _this = this;
        utils_1.ForEach(dynamics, function (old) {
            old.unlinkInstanceElement();
            old.unlinkTemplate();
            var dataIndex = window.gigya.utils.array.indexOf(_this.dataToServer, old);
            if (dataIndex !== -1)
                _this.dataToServer.splice(dataIndex, 1);
        });
    };
    BaseForm.prototype.isDynamicFieldObsolete = function (dynamicElement) {
        var parent = dynamicElement.templateElement.parentElement;
        while (parent && parent !== this.instanceElement && parent !== document.documentElement)
            parent = parent.parentElement;
        return parent !== this.instanceElement;
    };
    BaseForm.prototype.isDynamicFieldToAdd = function (el) {
        var _this = this;
        var ignoredFields = this.ignoredFields();
        var instanceOfArray = el[TemplateElement_1.TemplateElement_CONSTS.instanceOfArray];
        if (instanceOfArray && utils_1.Some(instanceOfArray, function (instance) { return instance instanceof FormInput_1.FormInput && instance._form === _this; }))
            return false;
        var name = el.getAttribute('name');
        if (ignoredFields[name])
            return false;
        return true;
    };
    BaseForm.prototype.updateDynamicFields = function () {
        var _this = this;
        var oldDynamicInputs = new Array();
        var validDynamicInputs = new Array();
        // separate valid from invalid existing dynamics
        utils_1.ForEach(this._dynamicInputs, function (existingDynamicInput) {
            if (_this.isDynamicFieldObsolete(existingDynamicInput))
                oldDynamicInputs.push(existingDynamicInput);
            else
                validDynamicInputs.push(existingDynamicInput);
        });
        // remove invalid dynamics
        this.clearDynamicFields(oldDynamicInputs);
        // add new dynamics
        var newDynamics = new Array();
        // find new dynamic elements
        utils_1.ForEach(this.instanceElement.elements, function (el) {
            if (_this.isDynamicFieldToAdd(el))
                newDynamics.push(el);
        });
        // create instances for new dynamics
        var newDynamicInputs = FormInput_1.FormInput.registerFormInputs(newDynamics, this);
        utils_1.ForEach(newDynamicInputs, function (newDynamicInput) {
            TemplateElement_1.TemplateElement.prepareTemplateInstanceElement(newDynamicInput.templateElement, false);
            newDynamicInput.linkInstanceElement(_this.instanceElement);
            newDynamicInput.dynamicField = true;
            validDynamicInputs.push(newDynamicInput);
        });
        // store new dynamics list
        this._dynamicInputs = validDynamicInputs;
    };
    //#endregion
    //#region validation
    BaseForm.prototype.requiredFields = function () {
        return this.specialFields();
    };
    BaseForm.prototype.onInputChange = function (input, setByScript) {
        var _this = this;
        if (setByScript) {
            window.gigya.utils.DOM.dispatch(this.instanceElement, 'fieldChanged');
            return this.afterInputChange({
                field: input,
                errorCode: GSErrors_1.GSErrors.OK,
                setByScript: setByScript,
            });
        }
        else {
            var value = input.getValue();
            input.validate(function (validationInfo) {
                var _a, _b;
                var fieldChangeEvent = {
                    eventName: 'fieldChanged',
                    screen: (_a = _this._screen) === null || _a === void 0 ? void 0 : _a.requestedScreen,
                    form: _this.bindID,
                    field: input.fieldName,
                    isValid: !validationInfo.errorCode,
                    errMsg: validationInfo.errorCode,
                    value: value,
                };
                if ((_b = _this._screen) === null || _b === void 0 ? void 0 : _b.isScreenVariant) {
                    fieldChangeEvent.abTesting = _this._screen.abTestingData;
                }
                _this._screen.dispatchEvent('fieldChanged', fieldChangeEvent);
                window.gigya.utils.DOM.dispatch(_this.instanceElement, 'fieldChanged');
                _this.afterInputChange(validationInfo);
            });
        }
    };
    BaseForm.prototype.afterInputChange = function (validationInfo) {
        var shouldClearPasswordRetypes = (this._screen.requestedScreen === 'gigya-register-screen' && validationInfo.field.fieldName === 'password') || validationInfo.field.fieldName === 'newPassword';
        if (shouldClearPasswordRetypes) {
            utils_1.ForEach(this._passwordRetypes, function (p) {
                p.setValue('', validationInfo.setByScript);
            });
        }
        var errorInfo = {
            field: validationInfo.field,
            errorCode: validationInfo.errorCode,
            errorType: validationInfo.errorType,
            isWarn: validationInfo.isWarning
        };
        this.renderFieldError(errorInfo, true);
    };
    BaseForm.prototype.isPasswordSchemaValidated = function () {
        return this.schemaValidated();
    };
    BaseForm.prototype.schemaValidated = function () {
        return false;
    };
    BaseForm.prototype.getFieldSchema = function (field) {
        var schema = this.getSchemaOf(field.fieldNamespace || 'profile');
        return schema && schema[field.fieldBaseName];
    };
    BaseForm.prototype.getSchemaOf = function (schemaName) {
        var apiData = this._screenSet.getApiData();
        var schemaRoot = this.getSchemaRoot(schemaName);
        return apiData.getSchema && apiData.getSchema[schemaRoot] && apiData.getSchema[schemaRoot].fields;
    };
    BaseForm.prototype.getSchemaRoot = function (namespace) {
        switch (namespace) {
            case 'data':
                return 'dataSchema';
            case 'profile':
                return 'profileSchema';
            case 'subscriptions':
                return 'subscriptionsSchema';
            case 'preferences':
                return 'preferencesSchema';
            case 'organization':
                return 'organizationSchema';
            case 'requester':
                return 'requesterSchema';
        }
    };
    BaseForm.prototype.renderFieldError = function (errorInfo, isBoundToField, customErrMsg, errorTypeToRender) {
        var field = errorInfo.field ? errorInfo.field : this.getField(errorInfo.fieldName, errorInfo.fieldArrayKeyValue, true);
        errorInfo.errorMessage = customErrMsg || this._screen.getErrorMessage(errorInfo.errorCode, isBoundToField, field);
        var arBoundElements = this._errorDisplayElements[field === null || field === void 0 ? void 0 : field.normalizedFieldName] || [];
        if (errorTypeToRender !== undefined) {
            arBoundElements = arBoundElements.filter(function (el) { return el.getErrorType() === errorTypeToRender; });
        }
        var skipValidityUpdate = errorTypeToRender && arBoundElements.length === 0;
        // display error on bounded error elements
        if (isBoundToField) {
            if (!skipValidityUpdate) {
                this.setFieldValidity(field, errorInfo);
            }
            // Dealing with gigya-error-msg and gigya-error-display within the same form as the input.
            utils_1.ForEach(arBoundElements, function (elBound) {
                // Do not consider the field bound if it's a different array element.
                var fieldArrayKeyValue = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute);
                if (fieldArrayKeyValue && fieldArrayKeyValue !== elBound.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute)) {
                    return;
                }
                if ((errorInfo === null || errorInfo === void 0 ? void 0 : errorInfo.errorMessage) && elBound.isErrorCodeAllowed(errorInfo.errorCode)) {
                    elBound.showError(errorInfo);
                }
                else {
                    elBound.hideError();
                }
            });
        }
        return errorInfo.errorCode !== GSErrors_1.GSErrors.Data_Pending;
    };
    BaseForm.prototype.setFieldValidity = function (field, errorInfo) {
        var fieldValidity;
        switch (errorInfo.errorCode) {
            case 0:
                fieldValidity = FormInput_1.ValidityStates.valid;
                break;
            case GSErrors_1.GSErrors.Data_Pending:
                fieldValidity = FormInput_1.ValidityStates.pending;
                break;
            default:
                fieldValidity = FormInput_1.ValidityStates.error;
                break;
        }
        // Display error on the field itself.
        field.setValidityState(fieldValidity);
    };
    BaseForm.prototype.showCustomFormError = function (errMsg) {
        var errorInfo = {
            errorMessage: errMsg,
            errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
            errorType: Errors_1.ErrorType.custom
        };
        this.showErrors([errorInfo], true); // isServerError = true (force the display of the error message)
        window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.Form_CONSTS.formErrorClass);
    };
    BaseForm.prototype.createFormEvent = function (eventName, eventData) {
        var _a, _b;
        var event = __webpack_provided_Object_dot_assign({
            eventName: eventName,
            data: this._screenSet.getSchemaData(),
            profile: this._screenSet.getProfile(),
            subscriptions: this._screenSet.getSubScriptions(),
            communications: this._screenSet.getCommunications(),
            preferences: this._screenSet.getPreferences(),
            form: this.bindID,
            screen: (_a = this._screen) === null || _a === void 0 ? void 0 : _a.requestedScreen,
        }, eventData);
        if ((_b = this._screen) === null || _b === void 0 ? void 0 : _b.isScreenVariant) {
            event.abTesting = this._screen.abTestingData;
        }
        return event;
    };
    BaseForm.prototype.onAfterValidation = function (errors) {
        var validationErrors = errors.reduce(function (acc, errInfo) {
            acc[errInfo.fieldName] = {
                errorMessage: errInfo.errorMessage,
                errorCode: errInfo.errorCode
            };
            return acc;
        }, {});
        var afterValidationEvent = this.createFormEvent('afterValidation', {
            formData: this.getFlatFormData(true, false),
            validationErrors: validationErrors,
            formErrors: validationErrors // todo: backward compatibility - need to be announced and removed
        });
        this._screen.dispatchEvent(afterValidationEvent.eventName, afterValidationEvent);
    };
    BaseForm.prototype.displayErrors = function (errors) {
        var _this = this;
        utils_1.ForEach(errors, function (errorInfo) {
            if (errorInfo.fieldName === 'form') {
                _this.showCustomFormError(errorInfo.errorMessage);
            }
            else {
                errorInfo.handled = _this.renderFieldError(errorInfo, true, errorInfo.errorMessage);
            }
        });
        this.showErrors(errors, false);
    };
    BaseForm.prototype.getValidationErrors = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var customValidationErrors;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getCustomValidationErrors()];
                    case 1:
                        customValidationErrors = _a.sent();
                        if ((customValidationErrors === null || customValidationErrors === void 0 ? void 0 : customValidationErrors.length) > 0) {
                            return [2 /*return*/, customValidationErrors];
                        }
                        return [2 /*return*/, this.getStandardValidationErrors()];
                }
            });
        });
    };
    BaseForm.prototype.getCustomValidationErrors = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var customErrorMessages;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getBeforeValidationEventResult()];
                    case 1:
                        customErrorMessages = _a.sent();
                        if (!customErrorMessages || typeof (customErrorMessages) !== 'object') {
                            return [2 /*return*/, []];
                        }
                        return [2 /*return*/, Object.keys(customErrorMessages)
                                .filter(function (fieldName) { return _this.isValidCustomErrorFieldName(fieldName); })
                                .map(function (fieldName) {
                                return fieldName === 'form' ? {
                                    fieldName: fieldName,
                                    errorMessage: customErrorMessages['form']
                                } :
                                    _this.getErrorInfo({
                                        field: _this.getField(fieldName),
                                        errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
                                        errorType: Errors_1.ErrorType.custom
                                    }, customErrorMessages[fieldName]);
                            })];
                }
            });
        });
    };
    BaseForm.prototype.isValidCustomErrorFieldName = function (fieldName) {
        return fieldName === 'form' || Boolean(this.getField(fieldName));
    };
    BaseForm.prototype.getStandardValidationErrors = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var formData, validations, widgetValidations;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        formData = this.getFlatFormData(true, true);
                        return [4 /*yield*/, gigya.Promise.all(this.dataToServer.map(function (field) { return field.validateAsync(formData); }))];
                    case 1:
                        validations = _a.sent();
                        return [4 /*yield*/, gigya.Promise.all(this._widgets.map(function (widget) { return widget.validateAsync(formData); }))];
                    case 2:
                        widgetValidations = _a.sent();
                        return [2 /*return*/, tslib_1.__spreadArrays(validations, widgetValidations).map(function (validationInfo) { return _this.getErrorInfo(validationInfo); })
                                .filter(function (errorInfo) { return errorInfo != null; })];
                }
            });
        });
    };
    BaseForm.prototype.getErrorInfo = function (validationInfo, errorMessage) {
        var _a, _b;
        if ((validationInfo === null || validationInfo === void 0 ? void 0 : validationInfo.errorCode) !== GSErrors_1.GSErrors.OK && ((_b = (_a = validationInfo.field) === null || _a === void 0 ? void 0 : _a.fieldName) === null || _b === void 0 ? void 0 : _b.length) > 0) {
            return {
                fieldName: validationInfo.field.fieldName,
                fieldArrayKeyValue: validationInfo.field.arrayKeyValue,
                errorCode: validationInfo.errorCode,
                errorType: validationInfo.errorType,
                errorMessage: errorMessage || this._screen.getErrorMessage(validationInfo.errorCode, true, validationInfo.field)
            };
        }
        if ((validationInfo === null || validationInfo === void 0 ? void 0 : validationInfo.errorCode) !== GSErrors_1.GSErrors.OK && validationInfo.widget) {
            return {
                errorCode: validationInfo.errorCode,
                errorType: validationInfo.errorType,
                errorMessage: errorMessage
            };
        }
        return null;
    };
    BaseForm.prototype.getBeforeValidationEventResult = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var beforeValidationEvent, _customValidationTimeout, validationResult, ex_1;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        beforeValidationEvent = this.createFormEvent('beforeValidation', {
                            formData: this.getFlatFormData(true, false)
                        });
                        _customValidationTimeout = setTimeout(function () {
                            console.warn("[Gigya]: custom validation did not resolve after more than " + exports.CUSTOM_VALIDATION_TIMEOUT_WARNING + " seconds");
                        }, exports.CUSTOM_VALIDATION_TIMEOUT_WARNING);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, 4, 5]);
                        return [4 /*yield*/, this._screen.dispatchEvent(beforeValidationEvent.eventName, beforeValidationEvent)];
                    case 2:
                        validationResult = _a.sent();
                        if (!validationResult || typeof (validationResult) !== 'object') {
                            return [2 /*return*/, null];
                        }
                        return [2 /*return*/, this.normalizeArrayFieldNames(validationResult)];
                    case 3:
                        ex_1 = _a.sent();
                        console.warn("[Gigya]: custom validation threw an error", ex_1);
                        return [2 /*return*/, null];
                    case 4:
                        clearTimeout(_customValidationTimeout);
                        return [7 /*endfinally*/];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    // For arrays fields we need to support both kind of mapped field "data.arrayRoot[0].field" and "data.arrayRoot.0.field".
    // That's why we unflatten array first, and flatten it again with both options
    BaseForm.prototype.normalizeArrayFieldNames = function (dataObj) {
        var errorMessages = window.gigya.utils.object.unflatten(dataObj);
        return __webpack_provided_Object_dot_assign(window.gigya.utils.object.flatten(errorMessages, true), window.gigya.utils.object.flatten(errorMessages));
    };
    BaseForm.prototype.showErrors = function (arErrors, isServerError) {
        this._screen.showErrors(this, arErrors, isServerError);
    };
    BaseForm.prototype.isRequiredField = function (fieldName) {
        var fieldNamespace = utils_1.firstPart(fieldName, '.');
        var schemaName = fieldNamespace == 'data' ? 'dataSchema' : 'profileSchema';
        if (fieldNamespace == 'data' || fieldNamespace == 'profile') {
            fieldName = fieldName.substring(fieldNamespace.length + 1);
        }
        var requiredFields = this.requiredFields();
        if (requiredFields[fieldName]) {
            return true;
        }
        var apiData = this._screenSet.getApiData(); // TODO shouldn't this be dependant on is schemaValidated?
        if (apiData.getSchema && apiData.getSchema[schemaName] && apiData.getSchema[schemaName].fields) {
            var schema = apiData.getSchema[schemaName].fields[fieldName];
            if (schema && schema.required) {
                return true;
            }
        }
        return false;
    };
    //#endregion
    BaseForm.prototype.canAutoSkip = function (formContext) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var validationErrors;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.autoSkip || utils_1.Some(this._autoSkipContainers, function (c) { return !c.canAutoSkip(); }))
                            return [2 /*return*/, false];
                        return [4 /*yield*/, this.getValidationErrors()];
                    case 1:
                        validationErrors = _a.sent();
                        return [2 /*return*/, (validationErrors === null || validationErrors === void 0 ? void 0 : validationErrors.length) === 0];
                }
            });
        });
    };
    //#region form data
    BaseForm.prototype.getNormalizedFieldName = function (fieldName) {
        if (!fieldName) {
            return fieldName;
        }
        // If special field or local field, use as-is.
        var specialFields = this.specialFields();
        if (specialFields[fieldName] || fieldName.indexOf('local.') === 0) {
            return fieldName;
        }
        // Get data and profile namespace.
        var profileNamespace = this.profileObjectName();
        var dataNamespace = this.dataObjectName();
        var subscriptionNamespace = this.subscriptionObjectName();
        var communicationsNamespace = this.communicationsObjectName();
        var preferencesNamespace = this.preferencesObjectName();
        var organizationNamespace = this.organizationObjectName();
        var requesterNamespace = this.requesterObjectName();
        // Default to profile namespace if not provided and not special field.
        var nameParts = fieldName.split('.');
        var ns = nameParts.length > 1 ? nameParts.shift() : profileNamespace;
        // Change "profile.data.field" to "data.field".
        if (ns === profileNamespace && nameParts.length > 1 && nameParts[0] === dataNamespace) {
            ns = nameParts.shift();
        }
        // Default to profile namespace if unknown namespace was provided.
        if ([dataNamespace, profileNamespace, subscriptionNamespace, communicationsNamespace,
            preferencesNamespace, organizationNamespace, requesterNamespace].indexOf(ns) == -1) {
            ns = profileNamespace;
        }
        // Push namespace back onto array of strings.
        if (ns) {
            nameParts.unshift(ns);
        }
        // Return string.
        var normalizedFieldName = nameParts.join('.');
        return normalizedFieldName;
    };
    BaseForm.prototype.getField = function (fieldName, arrayKeyValue, visibleOnly) {
        if (visibleOnly === void 0) { visibleOnly = false; }
        var result;
        fieldName = this.getNormalizedFieldName(fieldName);
        utils_1.Some(this.dataToServer, function (field) {
            if (visibleOnly && field.isInHiddenContainer()) {
                return false;
            }
            if (field.normalizedFieldName === fieldName) {
                if (!arrayKeyValue || arrayKeyValue === field.arrayKeyValue) {
                    result = field;
                    return true;
                }
            }
            return false;
        });
        return result;
    };
    BaseForm.prototype.isSpecialField = function (field) {
        return !!this.specialFields()[field.fieldName];
    };
    BaseForm.prototype.getFormData = function (ignoreHiddenContainers, normalizeFields, replaceEmptyStringWithNull) {
        var _this = this;
        if (replaceEmptyStringWithNull === void 0) { replaceEmptyStringWithNull = false; }
        var oData = {};
        // Get existing account for array merging.
        var accountInfo = this._screenSet.getApiData().getAccountInfo || {};
        var trackCreatedObjKeys = {};
        var isVisibleField = {};
        // Create form data.
        utils_1.ForEach(this.dataToServer, function (field) {
            var _a;
            if ((!field.disabled() || _this.isSpecialField(field)) && (!ignoreHiddenContainers || !field.isInHiddenContainer())) {
                var fieldKey = field.getName(normalizeFields, true);
                var currentValue = window.gigya.utils.object.getPropertyBySerializedName(accountInfo, fieldKey, false);
                var arrayRootField = field.getArrayRoot(true);
                var fieldValue = field.getValue(field.instanceElement, currentValue || oData[fieldKey]);
                if (fieldValue) {
                    // currently we do not support the field's original data-type.
                    fieldValue = window.gigya.utils.object.parseToObject(fieldValue.toString()) || fieldValue;
                }
                // Typical path for non-array fields.
                if (!arrayRootField) {
                    if (fieldValue != null) {
                        // This is used when gathering parameters to send to the server. do not convert empty array to null.
                        if (replaceEmptyStringWithNull && String(fieldValue) === '' && fieldValue.constructor !== Array) {
                            fieldValue = null;
                        }
                        var isVisible = !field.isInHiddenContainer();
                        if (isVisible || !isVisibleField[fieldKey]) {
                            isVisibleField[fieldKey] = isVisible;
                            oData[fieldKey] = fieldValue;
                        }
                    }
                }
                else {
                    // Array root is provided, switch to array mode. Verify all required attributes are provided.
                    var arrayKeyField = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyFieldAttribute);
                    var arrayKeyValue = field.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute);
                    if (!arrayKeyField || !arrayKeyValue) {
                        _this.warn('Field ignored because data-array-root provided without data-array-key-field and data-array-key-value', fieldKey);
                        return;
                    }
                    if (!oData[arrayRootField] || oData[arrayRootField].constructor !== Array) {
                        var arr = void 0;
                        if (accountInfo) {
                            arr = window.gigya.utils.object.clone(window.gigya.utils.object.getPropertyBySerializedName(accountInfo, arrayRootField, false), false);
                        }
                        if (!arr || arr.constructor !== Array) {
                            arr = [];
                        }
                        oData[arrayRootField] = arr;
                    }
                    var arrayRoot = oData[arrayRootField];
                    // Find or create object inside of array.
                    var obj = void 0;
                    for (var i = 0; i < arrayRoot.length; i++) {
                        var o = arrayRoot[i];
                        if (o[arrayKeyField] && String(o[arrayKeyField]) === arrayKeyValue) {
                            // If object was found from server, remove object from array root and re-create.
                            // The merge logic replaces entire objects but keeps the other elements in the array.
                            if (!trackCreatedObjKeys[arrayRootField] || window.gigya.utils.array.indexOf(trackCreatedObjKeys[arrayRootField], arrayKeyValue) === -1) {
                                arrayRoot.splice(i, 1);
                            }
                            else {
                                obj = o;
                            }
                            break;
                        }
                    }
                    // Create new object or append key to existing object only if a field value is present.
                    // This is what allows an object to be deleted from the array.
                    if (fieldValue) {
                        if (!obj) {
                            obj = (_a = {},
                                _a[arrayKeyField] = arrayKeyValue,
                                _a);
                            arrayRoot.push(obj);
                            if (!trackCreatedObjKeys[arrayRootField]) {
                                trackCreatedObjKeys[arrayRootField] = [];
                            }
                            trackCreatedObjKeys[arrayRootField].push(arrayKeyValue);
                        }
                        // Add value to object.
                        var subKey = fieldKey.substr(arrayRootField.length + 1);
                        obj[subKey] = fieldValue;
                    }
                }
            }
        });
        oData = this.postProcessFormData(oData);
        // The form data may be a mix of flattened and unflattened data. Ensure it is unflattened.
        oData = window.gigya.utils.object.unflatten(oData);
        // Filter the data.
        utils_1.ForEach(this.filters, function (wid) {
            oData = wid.filterOutWidgetsToSend(oData);
        });
        return oData;
    };
    BaseForm.prototype.postProcessFormData = function (oData) {
        var res = window.gigya.utils.object.clone(oData);
        res = Consent_1.postProcessForm(res, this.getSchemaOf(Consent_1.namespace));
        return res;
    };
    BaseForm.prototype.getFlatFormData = function (ignoreHiddenContainers, normalizeFields, replaceEmptyStringWithNull) {
        if (replaceEmptyStringWithNull === void 0) { replaceEmptyStringWithNull = false; }
        return window.gigya.utils.object.flatten(this.getFormData(ignoreHiddenContainers, normalizeFields, replaceEmptyStringWithNull));
    };
    BaseForm.prototype.specialFields = function () {
        return {};
    };
    BaseForm.prototype.subscriptionObjectName = function () {
        return 'subscriptions';
    };
    BaseForm.prototype.communicationsObjectName = function () {
        return 'communications';
    };
    BaseForm.prototype.dataObjectName = function () {
        return 'data';
    };
    BaseForm.prototype.profileObjectName = function () {
        return 'profile';
    };
    BaseForm.prototype.preferencesObjectName = function () {
        return 'preferences';
    };
    BaseForm.prototype.organizationObjectName = function () {
        return 'organization';
    };
    BaseForm.prototype.requesterObjectName = function () {
        return 'requester';
    };
    BaseForm.prototype.queryStringToSubmitParamMap = function () {
        return {};
    };
    BaseForm.prototype.defaultSubmitParams = function () {
        var qsParams = this.queryStringToSubmitParamMap();
        var ret = {};
        Object.keys(qsParams).forEach(function (p) {
            var submitParam = qsParams[p];
            var value = window.gigya.utils.URL.getParamValueFromURL(p, location.search, undefined);
            if (value) {
                ret[submitParam] = value;
            }
        });
        return ret;
    };
    //#endregion
    //#region submit
    BaseForm.prototype.submitApi = function () {
        throw new Error(NOT_IMPLEMENTED);
    };
    BaseForm.prototype._getSubmitApiParams = function (params) {
        return window.gigya.utils.object.removeUndefined(params);
    };
    BaseForm.prototype.performSubmit = function (formData, _a) {
        var _this = this;
        var _b = _a === void 0 ? {} : _a, customSubmitApi = _b.customSubmitApi, onAfterSubmitCallback = _b.onAfterSubmitCallback, submitApiParams = _b.submitApiParams;
        this.onBeforeSubmit(formData);
        var submitApi = customSubmitApi || this.submitApi();
        var extraEventData = this._screenSet.data.extraEventData;
        if (this._rememberMe) {
            extraEventData.rememberMe = Boolean(this._rememberMe.getValue());
        }
        var remember = extraEventData.rememberMe;
        // Make sure to use the latest regtoken/aToken if it was set by a child screenset
        if (this._screenSet.data.regToken) {
            this._screenSet.params.regToken = this._screenSet.data.regToken;
        }
        if (this._screenSet.data.aToken) {
            this._screenSet.params.aToken = this._screenSet.data.aToken;
        }
        var apiParams = this._getSubmitApiParams(window.gigya.utils.object.clone(this._screenSet.params, true));
        this._submitButtons.forEach(function (b) { return b.disable(); });
        this._screen.dimScreen();
        var options = {
            dontHandleScreenSet: true,
            callback: function (response) {
                if (onAfterSubmitCallback) {
                    onAfterSubmitCallback(response);
                }
                _this.onAfterSubmit(response);
            },
            remember: remember,
            sessionExpiration: remember && this._screenSet.params.rememberSessionExpiration
                ? this._screenSet.params.rememberSessionExpiration
                : this._screen._screenSet.params.sessionExpiration,
        };
        submitApi(apiParams, formData, options, submitApiParams || this.defaultSubmitParams());
    };
    BaseForm.prototype.onBeforeSubmit = function (formData) { };
    BaseForm.prototype.runFormValidation = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var validationErrors;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this._screenSet.dimScreenSet();
                        return [4 /*yield*/, this.getValidationErrors()];
                    case 1:
                        validationErrors = _a.sent();
                        this.onAfterValidation(validationErrors);
                        this._screenSet.undimScreenSet();
                        if ((validationErrors === null || validationErrors === void 0 ? void 0 : validationErrors.length) > 0) {
                            this.displayErrors(validationErrors);
                            return [2 /*return*/, false];
                        }
                        return [2 /*return*/, true];
                }
            });
        });
    };
    BaseForm.prototype.submit = function (params) {
        var _a, _b;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _c, formDataForServer_1, flatFormDataForEvent, _d, _e, event, eventResult, submitEvent, submitResult, captchaData, e_1, errorInfo;
            var _this = this;
            return tslib_1.__generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        this._submitButtonClicked = true;
                        this.updateDynamicFields();
                        _c = this.shouldWaitForServerResponse();
                        if (_c) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.runFormValidation()];
                    case 1:
                        _c = !(_f.sent());
                        _f.label = 2;
                    case 2:
                        if (_c) {
                            return [2 /*return*/];
                        }
                        _f.label = 3;
                    case 3:
                        _f.trys.push([3, 8, , 9]);
                        formDataForServer_1 = this.getFormData(true, true, true);
                        flatFormDataForEvent = this.getFlatFormData(true, false);
                        if (typeof flatFormDataForEvent['password'] !== 'undefined') {
                            delete flatFormDataForEvent['password']; // meaningless in terms of security but less shocking for clients :)
                        }
                        if (!formDataForServer_1['identifier']) return [3 /*break*/, 5];
                        _e = (_d = this._screenSet).establishAToken;
                        return [4 /*yield*/, this.createAToken(formDataForServer_1['identifier'])];
                    case 4:
                        _e.apply(_d, [_f.sent()]);
                        _f.label = 5;
                    case 5:
                        event = this.createFormEvent('beforeSubmit', {
                            formData: flatFormDataForEvent
                        });
                        eventResult = this._screen.dispatchEvent('beforeSubmit', event);
                        if (!(eventResult !== false)) return [3 /*break*/, 7];
                        submitEvent = {
                            eventName: 'submit',
                            screen: (_a = this._screen) === null || _a === void 0 ? void 0 : _a.requestedScreen,
                            form: this.bindID,
                            accountInfo: {
                                profile: this._screenSet.getProfile(),
                                data: this._screenSet.getSchemaData(),
                                preferences: this._screenSet.getPreferences(),
                                subscriptions: this._screenSet.getSubScriptions(),
                                communications: this._screenSet.getCommunications(),
                            },
                            formModel: formDataForServer_1,
                        };
                        if ((_b = this._screen) === null || _b === void 0 ? void 0 : _b.isScreenVariant) {
                            submitEvent.abTesting = this._screen.abTestingData;
                        }
                        submitResult = this._screen.dispatchEvent('submit', submitEvent);
                        return [4 /*yield*/, this._screen.getCaptchaData()];
                    case 6:
                        captchaData = _f.sent();
                        if (captchaData) {
                            if (typeof captchaData.token === 'string')
                                formDataForServer_1['captchaToken'] = captchaData.token;
                            if (typeof captchaData.type === 'string')
                                formDataForServer_1['captchaType'] = captchaData.type;
                        }
                        if (this.behaviorContext) {
                            this.behaviorContext.onSubmit();
                            formDataForServer_1['riskContext'] = this.behaviorContext.riskContext;
                            this.behaviorContext.reset();
                        }
                        if (submitResult && typeof submitResult.then === 'function') {
                            submitResult.then(function (x) { return _this.performSubmit(window.gigya.utils.object.merge([formDataForServer_1, x]), params); });
                        }
                        else {
                            this.performSubmit(window.gigya.utils.object.merge([formDataForServer_1, submitResult]), params);
                        }
                        _f.label = 7;
                    case 7: return [3 /*break*/, 9];
                    case 8:
                        e_1 = _f.sent();
                        // all other exceptions gets swallowed, also if it happened for example inside form's onAfterSubmit method (!)
                        window.gigya.logger.error('exception when submitting a form', { e: e_1, form: this.gigyaClass });
                        if (e_1 && e_1.message === 'captchaNeeded') {
                            errorInfo = {
                                errorMessage: this._screenSet.getText('login_captcha_error'),
                                errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
                                errorFlags: e_1.message,
                            };
                            this.showErrors([errorInfo], true);
                        }
                        return [3 /*break*/, 9];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    BaseForm.prototype.createAToken = function (identifier) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, new gigya.Promise(function (resolve) {
                        var _a;
                        window.gigya.accounts.identifier.createToken({
                            identifierType: (_a = _this.getField('identifier')) === null || _a === void 0 ? void 0 : _a.getMetadata()[FormInput_1.FormInput_CONSTS.identifierType],
                            identifier: identifier,
                            callback: function (response) {
                                if (response.errorCode == GSErrors_1.GSErrors.OK) {
                                    return resolve(response['aToken']);
                                }
                                else {
                                    window.gigya.logger.warn('Identifier Create token request filed', response === null || response === void 0 ? void 0 : response.message);
                                    resolve();
                                }
                            }
                        });
                    })];
            });
        });
    };
    //#region - code to be removed: the following code block should be removed when the old photo upload widget will not be supported along with BaseServerWidget
    BaseForm.prototype.shouldWaitForServerResponse = function () {
        if (this.isWaitingForServerResponse)
            return true;
        return this.isWaitingForServerWidget() || this.isWaitingForServerField();
    };
    BaseForm.prototype.isWaitingForServerWidget = function () {
        var _this = this;
        for (var _i = 0, _a = this._serverWidgets; _i < _a.length; _i++) {
            var widget = _a[_i];
            if (widget.serverState === BaseServerWidget_1.ServerStates.InProgress) {
                this.isWaitingForServerResponse = true;
                widget.runOnServerDone(function () { return _this.submitAfterServerResponse(); });
                return true;
            }
        }
    };
    BaseForm.prototype.isWaitingForServerField = function () {
        var _this = this;
        for (var _i = 0, _a = this.dataToServer; _i < _a.length; _i++) {
            var field = _a[_i];
            if (this.isPending(field)) {
                this.isWaitingForServerResponse = true;
                field.runOnServerDone(function () { return _this.submitAfterServerResponse(); });
                return true;
            }
        }
    };
    BaseForm.prototype.submitAfterServerResponse = function () {
        this.isWaitingForServerResponse = false;
        this.submit();
    };
    BaseForm.prototype.isPending = function (field) {
        return field.getValidityState() === FormInput_1.ValidityStates.pending;
    };
    //#endregion
    //#endregion
    BaseForm.prototype.onAfterSubmit = function (response) {
        this._screen.undimScreen();
        this._submitButtons.forEach(function (b) { return b.enable(); });
        if (response.errorCode == GSErrors_1.GSErrors.OK) {
            window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, exports.Form_CONSTS.formErrorClass);
        }
        else {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.Form_CONSTS.formErrorClass);
        }
        this._screenSet.onScreenResponse(response, this);
    };
    BaseForm.prototype.evaluateConditionalAttributes = function () {
        var _this = this;
        if (!this.hasConditionalAttributes()) {
            return;
        }
        window.gigya.logger.group("form conditional attributes evaluation").endWhen(function () {
            _super.prototype.evaluateConditionalAttributes.call(_this);
            utils_1.ForEach(_this._dynamicInputs, function (dynamicInput) {
                dynamicInput.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._widgets, function (widget) {
                widget.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._inputs, function (input) {
                input.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._passwordInputs, function (passwordInput) {
                passwordInput.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._passwordRetypes, function (passwordRetype) {
                passwordRetype.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._secretQuestions, function (sec) {
                sec.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._autoSkipContainers, function (auto) {
                auto.evaluateConditionalAttributes();
            });
            utils_1.ForEach(_this._serverWidgets, function (serv) {
                serv.evaluateConditionalAttributes();
            });
            if (_this._rememberMe) {
                _this._rememberMe.evaluateConditionalAttributes();
            }
        });
        this.originalSuccessScreen = this.instanceElement.getAttribute(exports.Form_CONSTS.successScreen);
        this.successScreen = this._screenSet.chooseNextScreen(this.originalSuccessScreen);
        this.autoSkip = this.instanceElement.getAttribute(exports.Form_CONSTS.autoSkipFlag) == 'true';
        this.autoSkipScreen = this.instanceElement.getAttribute(exports.Form_CONSTS.autoSkipScreen) || this.successScreen;
        this.screenSetSkippedScreen = this.instanceElement.getAttribute(exports.Form_CONSTS.screenSetSkippedScreen) || this.successScreen;
    };
    BaseForm.prototype.hasConditionalAttributes = function () {
        if (_super.prototype.hasConditionalAttributes.call(this))
            return true;
        var children = [].concat(this._widgets, this._inputs, this._dynamicInputs, this._passwordInputs, this._passwordRetypes, this._secretQuestions, this._autoSkipContainers, this._serverWidgets);
        return window.gigya.utils.array.some(children, function (child) { return child.hasConditionalAttributes(); });
    };
    BaseForm.prototype.resetLastConditionalValues = function () {
        _super.prototype.resetLastConditionalValues.call(this);
        utils_1.ForEach(this._dynamicInputs, function (dynamicInput) {
            dynamicInput.resetLastConditionalValues();
        });
        utils_1.ForEach(this._widgets, function (widget) {
            widget.resetLastConditionalValues();
        });
        utils_1.ForEach(this._inputs, function (input) {
            input.resetLastConditionalValues();
        });
        utils_1.ForEach(this._passwordInputs, function (passwordInput) {
            passwordInput.resetLastConditionalValues();
        });
        utils_1.ForEach(this._passwordRetypes, function (passwordRetype) {
            passwordRetype.resetLastConditionalValues();
        });
        utils_1.ForEach(this._secretQuestions, function (sec) {
            sec.resetLastConditionalValues();
        });
        utils_1.ForEach(this._autoSkipContainers, function (auto) {
            auto.resetLastConditionalValues();
        });
        utils_1.ForEach(this._serverWidgets, function (serv) {
            serv.resetLastConditionalValues();
        });
    };
    Object.defineProperty(BaseForm.prototype, "supportConsentData", {
        get: function () {
            var _a;
            return (_a = this.settings) === null || _a === void 0 ? void 0 : _a.supportConsentData;
        },
        enumerable: true,
        configurable: true
    });
    BaseForm.prototype.setConsentData = function () {
        var apiData = this._screenSet.getApiData();
        if (this._screenSet.data) {
            this._screenSet.data.consentStatements = ConsentData_1.getConsentDataForScreenSet(apiData, this._screenSet.lang) || {};
        }
    };
    BaseForm.FormsLibrary = {};
    return BaseForm;
}(TemplateElement_1.TemplateElement));
exports.BaseForm = BaseForm;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts":
/*!***********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var displayNameAttribute = 'data-display-name';
var BaseFormWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseFormWidget, _super);
    function BaseFormWidget(_form, el, resetCSS) {
        var _this = _super.call(this, el, _form, _form._screen, resetCSS) || this;
        _this._form = _form;
        return _this;
    }
    BaseFormWidget.addWidgetToLibrary = function (widget) {
        BaseFormWidget.FormWidgetsLibrary[widget.CONSTS.selector] = widget;
    };
    BaseFormWidget.registerWidgets = function (parent) {
        return BaseWidget_1.BaseWidget.registerTypedWidgets(parent.templateElement, BaseFormWidget.FormWidgetsLibrary, function (type, el) { return new type(parent, el); });
    };
    BaseFormWidget.registerDynamicWidgets = function (parent, rootEl) {
        return BaseWidget_1.BaseWidget.registerTypedWidgets(rootEl, BaseFormWidget.FormWidgetsLibrary, function (type, el) { return new type(parent, el); });
    };
    BaseFormWidget.prototype.getFieldsNames = function () {
        return [];
    };
    BaseFormWidget.prototype.update = function () { };
    BaseFormWidget.prototype.validateAsync = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, gigya.Promise.resolve({
                        errorCode: GSErrors_1.GSErrors.OK,
                        widget: this
                    })];
            });
        });
    };
    BaseFormWidget.prototype.getErrorText = function (errorKey, fieldName) {
        return this._screenSet.getText(errorKey, '%fieldname', fieldName);
    };
    Object.defineProperty(BaseFormWidget.prototype, "displayName", {
        get: function () {
            return this.instanceElement.getAttribute(displayNameAttribute);
        },
        enumerable: true,
        configurable: true
    });
    BaseFormWidget.prototype.getErrorTextFromResponse = function (response, fieldName) {
        if ((response === null || response === void 0 ? void 0 : response.errorCode) === GSErrors_1.GSErrors.Extension_Point_Custom_Error) {
            return response.errorDetails || response.errorMessage;
        }
        var errorKey = this.getErrorKeyFromResponse(response);
        if (errorKey) {
            return this.getErrorText(errorKey, fieldName);
        }
        return response.errorMessage;
    };
    BaseFormWidget.prototype.getErrorKeyFromResponse = function (response) {
        return null;
    };
    Object.defineProperty(BaseFormWidget.prototype, "dataProvider", {
        get: function () {
            return this._form.dataProvider;
        },
        enumerable: true,
        configurable: true
    });
    BaseFormWidget.prototype.validateChildField = function (formField) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var validationInfo;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(formField && this._form)) return [3 /*break*/, 2];
                        return [4 /*yield*/, formField.validateAsync()];
                    case 1:
                        validationInfo = _a.sent();
                        this._form.renderFieldError({
                            errorCode: validationInfo.errorCode,
                            field: formField,
                        }, true);
                        return [2 /*return*/, validationInfo.errorCode === 0];
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    BaseFormWidget.FormWidgetsLibrary = {};
    return BaseFormWidget;
}(BaseWidget_1.BaseWidget));
exports.BaseFormWidget = BaseFormWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseOtpAuthMethodWidget.ts":
/*!********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseOtpAuthMethodWidget.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseAuthMethodWidget_1 = __webpack_require__(/*! ./BaseAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseAuthMethodWidget.ts");
var accounts = window.gigya.accounts;
var link_accounts_1 = __webpack_require__(/*! ./Constants/link-accounts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Constants/link-accounts.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var ApiLinkHelper_1 = __webpack_require__(/*! ./ApiLinkHelper */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ApiLinkHelper.ts");
var promise_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/promise */ "./src/core/Gigya.Js/app/Utils/promise.ts");
exports.CONSTS = {
    inputSelector: '.gigya-input-text',
    resendButtonSelector: '.gigya-otp-resend-button',
    fieldNameAttr: 'name'
};
var BaseOtpAuthMethodWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseOtpAuthMethodWidget, _super);
    function BaseOtpAuthMethodWidget() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BaseOtpAuthMethodWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        this.initApiLink = new ApiLinkHelper_1.ApiLinkHelper(this.resendCodeElement, function () { return _this.callInitApi(); });
        this.collapse();
    };
    BaseOtpAuthMethodWidget.prototype.unlinkInstanceElement = function () {
        var _a;
        _super.prototype.unlinkInstanceElement.call(this);
        (_a = this.initApiLink) === null || _a === void 0 ? void 0 : _a.destroy();
    };
    Object.defineProperty(BaseOtpAuthMethodWidget.prototype, "submitApi", {
        get: function () {
            return accounts.otp.login;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseOtpAuthMethodWidget.prototype, "initApi", {
        get: function () {
            return accounts.otp.sendCode;
        },
        enumerable: true,
        configurable: true
    });
    BaseOtpAuthMethodWidget.prototype.onClick = function () {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _super.prototype.onClick.call(this);
                        if (!(this.initApi && !this.isInitialized)) return [3 /*break*/, 2];
                        (_a = this.initApiLink) === null || _a === void 0 ? void 0 : _a.init();
                        return [4 /*yield*/, this.callInitApi()];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    BaseOtpAuthMethodWidget.prototype.callInitApi = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var response;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, promise_1.promisify(this.initApi, this.initApiParams)];
                    case 1:
                        response = _a.sent();
                        this.handleInitApiResponse(response);
                        return [2 /*return*/, response];
                }
            });
        });
    };
    BaseOtpAuthMethodWidget.prototype.handleInitApiResponse = function (response) {
        this.isInitialized = true;
        if (Number(response === null || response === void 0 ? void 0 : response.errorCode) != GSErrors_1.GSErrors.OK) {
            this.displayErrorMessage(response);
            return;
        }
        if (response === null || response === void 0 ? void 0 : response.vToken) {
            this.vToken = response['vToken'];
        }
        else {
            this.displayErrorMessage(response);
        }
    };
    Object.defineProperty(BaseOtpAuthMethodWidget.prototype, "submitApiParams", {
        get: function () {
            return window.gigya.utils.object.merge([
                this.dataProvider.defaultSubmitParams,
                {
                    include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues(link_accounts_1.LINK_ACCOUNTS_DEFAULT_INCLUDE_PARAM, this.dataProvider.includeParams),
                    suppressLoginEvent: true,
                    code: this.code,
                    vToken: this.vToken
                }
            ]);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseOtpAuthMethodWidget.prototype, "codeFieldElement", {
        get: function () {
            return this.instanceElement.querySelector(exports.CONSTS.inputSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseOtpAuthMethodWidget.prototype, "codeFieldName", {
        get: function () {
            var _a;
            return (_a = this.codeFieldElement) === null || _a === void 0 ? void 0 : _a.getAttribute(exports.CONSTS.fieldNameAttr);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseOtpAuthMethodWidget.prototype, "code", {
        get: function () {
            var _a;
            if (!this.codeFieldName) {
                return null;
            }
            return (_a = this._form.getField(this.codeFieldName)) === null || _a === void 0 ? void 0 : _a.getValue();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseOtpAuthMethodWidget.prototype, "resendCodeElement", {
        get: function () {
            return this.instanceElement.querySelector(exports.CONSTS.resendButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    return BaseOtpAuthMethodWidget;
}(BaseAuthMethodWidget_1.BaseAuthMethodWidget));
exports.BaseOtpAuthMethodWidget = BaseOtpAuthMethodWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseScreenWidget, _super);
    function BaseScreenWidget(_screen, el, resetCSS) {
        var _this = _super.call(this, el, _screen, _screen, resetCSS) || this;
        _this._childWidgets = [];
        return _this;
    }
    BaseScreenWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.unlinkWidgets();
        this.unlinkChildElements();
    };
    BaseScreenWidget.prototype.unlinkWidgets = function () {
        utils_1.ForEach(this._childWidgets, function (widget) {
            widget.unlinkInstanceElement();
        });
        this._childWidgets = [];
    };
    BaseScreenWidget.prototype.linkWidgets = function () {
        var _this = this;
        // Widgets that render html inside them, must register internal widgets
        if (!this._screen || !this._screen.instanceElement)
            return;
        this._childWidgets =
            BaseScreenWidget.registerDynamicWidgets(this._screen, this.instanceElement)
                .filter(function (childWidget) { return !_this.deps || !_this.deps.some(function (dep) { return childWidget instanceof dep; }); });
        utils_1.ForEach(this._childWidgets, function (widget) {
            widget.linkInstanceElement(_this._screen.instanceElement);
        });
    };
    BaseScreenWidget.addWidgetToLibrary = function (widget) {
        BaseScreenWidget.ScreenWidgetsLibrary[widget.CONSTS.selector] = widget;
    };
    BaseScreenWidget.registerWidgets = function (parent) {
        return BaseWidget_1.BaseWidget.registerTypedWidgets(parent.templateElement, BaseScreenWidget.ScreenWidgetsLibrary, function (type, el) { return new type(parent, el); });
    };
    BaseScreenWidget.registerDynamicWidgets = function (parent, rootEl) {
        return BaseWidget_1.BaseWidget.registerTypedWidgets(rootEl, BaseScreenWidget.ScreenWidgetsLibrary, function (type, el) { return new type(parent, el); });
    };
    BaseScreenWidget.ScreenWidgetsLibrary = {};
    return BaseScreenWidget;
}(BaseWidget_1.BaseWidget));
exports.BaseScreenWidget = BaseScreenWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ServerStates;
(function (ServerStates) {
    ServerStates[ServerStates["NotStarted"] = 0] = "NotStarted";
    ServerStates[ServerStates["InProgress"] = 1] = "InProgress";
    ServerStates[ServerStates["Done"] = 2] = "Done";
    ServerStates[ServerStates["Error"] = 3] = "Error";
})(ServerStates = exports.ServerStates || (exports.ServerStates = {}));
utils_1.DeepFreeze(ServerStates);
var BaseServerWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseServerWidget, _super);
    function BaseServerWidget(form, el, resetCSS) {
        var _this = _super.call(this, form, el, resetCSS) || this;
        _this.nextServerQueryId = 0;
        _this.serverState = ServerStates.NotStarted;
        _this.callbacks = new Array();
        form._serverWidgets.push(_this);
        return _this;
    }
    BaseServerWidget.prototype.startServerQuery = function () {
        this.serverState = ServerStates.InProgress;
        return ++this.nextServerQueryId;
    };
    BaseServerWidget.prototype.onServerQueryEnd = function (serverQueryId, newState, data) {
        if (serverQueryId === this.nextServerQueryId)
            this.serverQueryDone(newState, data);
        else
            this.warn('Ignoring server response #' + serverQueryId);
    };
    BaseServerWidget.prototype.serverQueryDone = function (newState, data) {
        var _this = this;
        this.serverState = newState;
        utils_1.ForEach(this.callbacks, function (callback) { return callback(newState, _this); });
        this.callbacks = new Array();
    };
    BaseServerWidget.prototype.runOnServerDone = function (callback) {
        if (this.serverState !== ServerStates.InProgress)
            callback(this.serverState, this);
        else
            this.callbacks.push(callback);
    };
    return BaseServerWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.BaseServerWidget = BaseServerWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseServerWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts");
var NOT_IMPLEMENTED = 'Not Implemented';
exports.BaseUploadWidget_CONSTS = {
    setDimentionsDelay: 500,
    uploadCheckInterval: 500,
    uploading: 'data-upload-status',
    uploadForm: 'screenSetUploadForm',
};
utils_1.DeepFreeze(exports.BaseUploadWidget_CONSTS);
var nextGeneratedId = 0;
var BaseUploadWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseUploadWidget, _super);
    function BaseUploadWidget(form, el, resetCSS) {
        var _this = _super.call(this, form, el, resetCSS) || this;
        var uploadId = nextGeneratedId++;
        _this._uploadIframeID = _this._screenSet.params.containerID + '_upload' + uploadId + '_target';
        _this.formDivID = _this._screenSet.params.containerID + '_upload' + uploadId + '_form';
        _this.listenOnIframe = function () {
            var iframeStateName = _this.uploadIframe.getAttribute(exports.BaseUploadWidget_CONSTS.uploading);
            var iframeState = BaseServerWidget_1.ServerStates[iframeStateName];
            if (iframeState !== _this.serverState)
                _this.onServerQueryEnd(_this._lastQueryId, iframeState);
        };
        _this.fileInputChanged = function () { return _this.onFileInputChange(); };
        return _this;
    }
    BaseUploadWidget.prototype.onFileInputChange = function () {
        this.startServerQuery();
    };
    BaseUploadWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            // add upload iframe
            this.uploadIframe = document.createElement('iframe');
            this.uploadIframe.style.display = 'none';
            this.uploadIframe.id = this._uploadIframeID;
            this.uploadIframe.setAttribute('name', this._uploadIframeID);
            this.uploadIframe.setAttribute(exports.BaseUploadWidget_CONSTS.uploading, BaseServerWidget_1.ServerStates[BaseServerWidget_1.ServerStates.NotStarted]);
            this.uploadIframe.setAttribute('onload', "this.setAttribute('" + exports.BaseUploadWidget_CONSTS.uploading + "','" + BaseServerWidget_1.ServerStates[BaseServerWidget_1.ServerStates.Done] + "')");
            this.instanceElement.appendChild(this.uploadIframe);
            // place form for the user to interfact with
            this._formDiv = document.createElement('div');
            this._formDiv.id = this.formDivID;
            this._formDiv.className = 'gigya-attach-file-upload-form';
            this._formDiv.innerHTML = this.getFormHtml();
            this._formDiv.style.zIndex = '' + window.gigya.utils.DOM.getNextZIndex();
            this.instanceElement.appendChild(this._formDiv);
            // set dimentions
            window.setTimeout(function () { return _this.setFormDimentions(); }, exports.BaseUploadWidget_CONSTS.setDimentionsDelay);
            this._uploadForm = this.getFormElement();
            this.fileInput = this._uploadForm.elements['_profilePhoto'];
            window.gigya.utils.DOM.addClassToElement(this.fileInput, 'gigya-attach-file-upload-file-input'); // TODO Change uses css for ie patch instead of style
            window.gigya.utils.DOM.addEventListener(this.fileInput, 'change', this.fileInputChanged);
        }
    };
    BaseUploadWidget.prototype.getFormHtml = function () {
        throw new Error(NOT_IMPLEMENTED);
    };
    BaseUploadWidget.prototype.getFormElement = function () {
        throw new Error(NOT_IMPLEMENTED);
    };
    BaseUploadWidget.prototype.getFileElement = function () {
        throw new Error(NOT_IMPLEMENTED);
    };
    BaseUploadWidget.prototype.setFormDimentions = function () {
        // TODO behavior change: uses timeout rather than interval
        if (this.instanceElement) {
            if (this.instanceElement.offsetHeight != 0) {
                this._formDiv.style.height = this.instanceElement.offsetHeight + 'px';
                this._formDiv.style.width = this.instanceElement.offsetWidth + 'px';
            }
        }
    };
    BaseUploadWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement) {
            if (this.uploadCheckInterval)
                this.onServerQueryEnd(this._lastQueryId, BaseServerWidget_1.ServerStates.Error);
            window.gigya.utils.DOM.removeEventListener(this.fileInput, 'change', this.onFileInputChange);
            this.fileInput = null;
            this._uploadForm = null;
            this._formDiv.parentElement.removeChild(this._formDiv);
            this._formDiv = null;
            this.instanceElement.removeChild(this.uploadIframe);
            this.uploadIframe = null;
        }
        _super.prototype.unlinkInstanceElement.call(this);
    };
    BaseUploadWidget.prototype.stopUploadCheck = function () {
        if (this.uploadCheckInterval) {
            window.clearInterval(this.uploadCheckInterval);
            this.uploadCheckInterval = 0;
        }
    };
    BaseUploadWidget.prototype.serverQueryDone = function (newState) {
        this.stopUploadCheck();
        _super.prototype.serverQueryDone.call(this, newState);
    };
    BaseUploadWidget.prototype.submitUploadForm = function () {
        this._uploadForm.submit();
    };
    BaseUploadWidget.prototype.startServerQuery = function () {
        this._lastQueryId = _super.prototype.startServerQuery.call(this);
        this.uploadIframe.setAttribute(exports.BaseUploadWidget_CONSTS.uploading, BaseServerWidget_1.ServerStates[this.serverState]);
        if (!this.uploadCheckInterval)
            this.uploadCheckInterval = window.setInterval(this.listenOnIframe, exports.BaseUploadWidget_CONSTS.uploadCheckInterval);
        this.submitUploadForm();
        return this._lastQueryId;
    };
    BaseUploadWidget.prototype.getServerParameters = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var params, webAdapter, _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        params = window.gigya.utils.object.extractProperties(this._screenSet.params, {}, 'APIKey|cid|oauth_token|login_token|source|sourceData|regToken');
                        params.authMode = params['oauth_token'] ? 'token' : 'cookie';
                        webAdapter = window.gigya._.apiAdapters.web;
                        if (!webAdapter) return [3 /*break*/, 2];
                        // TODO: remove casting
                        params.login_token = window.gigya._.apiAdapters.web.tokenStore.get(params['APIKey']);
                        _a = params;
                        return [4 /*yield*/, window.gigya._.apiAdapter.getGmidTicket()];
                    case 1:
                        _a.gmidTicket = _b.sent();
                        _b.label = 2;
                    case 2:
                        if (!params.APIKey)
                            params.APIKey = window.gigya.thisScript.APIKey;
                        if (this._screenSet.data.regToken)
                            params.regToken = this._screenSet.data.regToken;
                        return [2 /*return*/, params];
                }
            });
        });
    };
    return BaseUploadWidget;
}(BaseServerWidget_1.BaseServerWidget));
exports.BaseUploadWidget = BaseUploadWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts":
/*!*******************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FlagService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ScreenConsts_1 = __webpack_require__(/*! ./ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
var BaseWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseWidget, _super);
    function BaseWidget(el, parent, _screen, resetCss) {
        if (resetCss === void 0) { resetCss = true; }
        var _this = _super.call(this, el, parent) || this;
        _this._screen = _screen;
        _this.params = {};
        _this.renderWidgetUI = false;
        _this.evaluationCache = {};
        _this._otherElements = [];
        _this.eventListeners = new Map();
        _this.params = _this.getElementParams(el);
        if (resetCss)
            window.gigya.utils.DOM.addClassToElement(el, 'gigya-reset');
        return _this;
    }
    BaseWidget.registerTypedWidgets = function (parentElement, widgetLibrary, factory) {
        var widgets = new Array();
        utils_1.ForEachProp(widgetLibrary, function (type, gigyaClass) {
            var elements = parentElement.querySelectorAll(type.CONSTS.selector);
            utils_1.ForEach(elements, function (el) {
                widgets.push(factory(type, el));
            });
        });
        return widgets;
    };
    //#endregion
    BaseWidget.prototype.getElementParams = function (el) {
        var _this = this;
        var params = {};
        var self = this;
        utils_1.ForEach(el.querySelectorAll('param'), function (param) {
            params[param.name] = param.value;
            var widgetExpressions;
            try {
                widgetExpressions = utils_1.getConditionalAttributeExpressions(param, true);
            }
            catch (e) {
                _this.warn('Error in param conditionals, conditionals ignored');
                widgetExpressions = [];
            }
            if (widgetExpressions.length > 0) {
                self.conditionalExpressions = self.conditionalExpressions.concat(widgetExpressions);
            }
        });
        return params;
    };
    BaseWidget.prototype.evaluateConditionalAttributes = function () {
        if (!this.widgetParams) {
            // first time the widget is loaded.
            this.widgetParams = this.params;
            this.renderWidgetUI = true;
        }
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.renderWidgetUI) {
            this.renderWidget();
        }
    };
    BaseWidget.prototype.evaluate = function (text) {
        var _this = this;
        if (text === void 0) { text = ''; }
        var matches = text === null || text === void 0 ? void 0 : text.match(/{{(.*?)}}/g);
        if (!(matches === null || matches === void 0 ? void 0 : matches.length))
            return text;
        return matches.reduce(function (finalStr, m) {
            var val = _this.evaluateExpression({ ignoreError: true, condition: m });
            if (val) {
                if (FlagService_1.FlagService.sanitizeEvaluatedValue && typeof val === 'string' && utils_1.isDOMXSS(val)) {
                    val = window.gigya.utils.sanitize.sanitizeHTML(val);
                }
                _this.evaluationCache[m] = val;
            }
            return finalStr.replace(m, val === undefined ? (_this.evaluationCache[m] === undefined ? '' : _this.evaluationCache[m]) : val);
        }, text);
    };
    BaseWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.clearDomEventListeners();
    };
    // overrides 'executeConditionalResult' in TemplateElement
    BaseWidget.prototype.executeConditionalResult = function (evaluationResult, conditionalAtt, element) {
        if (!conditionalAtt.isWidgetParamTag) {
            return _super.prototype.executeConditionalResult.call(this, evaluationResult, conditionalAtt, element);
        }
        else {
            if (evaluationResult === '' && conditionalAtt.defaultValue) {
                evaluationResult = conditionalAtt.defaultValue;
            }
            if (!evaluationResult && !conditionalAtt.defaultValue) {
                conditionalAtt.lastAttributeValue = evaluationResult;
                // First check that the param is inside the widget params so
                // I can set the 'reRenderWidget' flag.
                if (this.widgetParams[conditionalAtt.attributeName]) {
                    delete this.widgetParams[conditionalAtt.attributeName];
                    this.renderWidgetUI = true;
                }
            }
            else if (evaluationResult !== conditionalAtt.lastAttributeValue) {
                conditionalAtt.lastAttributeValue = evaluationResult;
                this.widgetParams[conditionalAtt.attributeName] = evaluationResult;
                this.renderWidgetUI = true;
            }
            return evaluationResult;
        }
    };
    BaseWidget.prototype.renderWidget = function () {
        //virtual method - implemented only by widgets who are 'pluginWidgets'
    };
    BaseWidget.prototype.addDomEventListener = function (el, eventName, handler, key) {
        key = key || "event_" + this.eventListeners.size;
        if (this.eventListeners.get(key)) {
            return;
        }
        this.eventListeners.set(key, {
            el: el, eventName: eventName, handler: handler
        });
        window.gigya.utils.DOM.addEventListener(el, eventName, handler);
    };
    BaseWidget.prototype.addButtonHandler = function (el, handler, key) {
        if (!el || !handler)
            return;
        key = key || "event_" + this.eventListeners.size;
        this.addDomEventListener(el, 'click', handler, key + "_click");
        this.addDomEventListener(el, 'keydown', function (event) {
            if (event.code === 'Space' || event.code === 'Enter') {
                handler();
            }
        }, key + "_keydown");
    };
    BaseWidget.prototype.submitOnEnter = function (listenEl, submitElement) {
        var buttonEl = submitElement || listenEl;
        this.addDomEventListener(listenEl, 'keyup', function (event) {
            if (event.key === 'Enter') {
                buttonEl.click();
            }
        });
    };
    BaseWidget.prototype.removeButtonHandler = function (key) {
        this.removeDomEventListener(key + "_click");
        this.removeDomEventListener(key + "_keydown");
    };
    BaseWidget.prototype.removeDomEventListener = function (key) {
        var listener = this.eventListeners.get(key);
        if (listener) {
            window.gigya.utils.DOM.removeEventListener(listener.el, listener.eventName, listener.handler);
            this.eventListeners.delete(key);
        }
    };
    BaseWidget.prototype.clearDomEventListeners = function () {
        var _this = this;
        this.eventListeners.forEach(function (value, key) { return _this.removeDomEventListener(key); });
    };
    BaseWidget.prototype.prepareOtherElements = function () {
        // These elements are evaluated because they have an ID.
        var otherElements = utils_1.getElementsByHavingAttribute(this.instanceElement, '*', 'id');
        // These elements are evaluated because they have conditional attributes.
        var attributePrefixes = [ScreenConsts_1.Screen_CONSTS.conditionalAttributePrefix, ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix];
        var conditionalElements = utils_1.getElementsByHavingAttributePrefix(this.instanceElement, attributePrefixes, ['param']);
        // Combine and de-dup arrays.
        for (var _i = 0, conditionalElements_1 = conditionalElements; _i < conditionalElements_1.length; _i++) {
            var conditionalElement = conditionalElements_1[_i];
            if (window.gigya.utils.array.indexOf(otherElements, conditionalElement) === -1) {
                otherElements.push(conditionalElement);
            }
        }
        // Add TemplateElement to other elements.
        for (var _a = 0, otherElements_1 = otherElements; _a < otherElements_1.length; _a++) {
            var el = otherElements_1[_a];
            this._otherElements.push(new TemplateElement_1.TemplateElement(el, this));
        }
    };
    BaseWidget.prototype.linkOtherElements = function () {
        var _this = this;
        this.prepareOtherElements();
        this._otherElements.forEach(function (element) {
            element.linkInstanceElement(_this.instanceElement);
            element.evaluateConditionalAttributes();
        });
    };
    BaseWidget.prototype.unlinkChildElements = function () {
        this._otherElements.forEach(function (element) { return element.unlinkInstanceElement(); });
    };
    return BaseWidget;
}(TemplateElement_1.TemplateElement));
exports.BaseWidget = BaseWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BehaviorTracking.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/BehaviorTracking.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var LocalInfo_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LocalInfo */ "./src/core/Gigya.Js/app/LocalInfo.ts");
var BehaviorTrackingContext = /** @class */ (function () {
    function BehaviorTrackingContext(document) {
        var _this = this;
        if (document === void 0) { document = window.gigya._.WindowProvider.document(); }
        this.document = document;
        this.startTime = 0;
        this.focusCount = 0;
        this.clickCount = 0;
        this.submitCount = 0;
        this.mouseMovement = [0, 0, 0, 0];
        this.scrolls = [];
        this.increaseFocusCount = function () { return _this.focusCount++; };
        this.increaseClickCount = function () { return _this.clickCount++; };
        this.trackMouseMovement = function () {
            var previousClientX = 0;
            var previousClientY = 0;
            return function (event) {
                if (previousClientX !== null) {
                    var movementX = previousClientX - event.clientX;
                    var movementY = previousClientY - event.clientY;
                    if (movementX > 0)
                        _this.mouseMovement[3]++; // left
                    if (movementX < 0)
                        _this.mouseMovement[1]++; // right
                    if (movementY > 0)
                        _this.mouseMovement[0]++; // top
                    if (movementY < 0)
                        _this.mouseMovement[2]++; // bottom
                }
                previousClientX = event.clientX;
                previousClientY = event.clientY;
            };
        };
        this.trackScrolling = function () {
            var timer, start, end, distance, timeElapsed;
            end = 0;
            return function (_) {
                if (!start) {
                    start = end;
                    timeElapsed = Date.now();
                }
                clearTimeout(timer);
                timer = setTimeout(function () {
                    end = window.scrollY;
                    distance = end - start;
                    if (distance !== 0) {
                        var velocity = distance / (Date.now() - timeElapsed);
                        var res = -distance + "|" + Math.abs(velocity).toFixed(3);
                        _this.scrolls.push(res);
                        if (_this.scrolls.length > 10) {
                            _this.scrolls.shift();
                        }
                    }
                    start = distance = timeElapsed = null;
                }, 60);
            };
        };
    }
    Object.defineProperty(BehaviorTrackingContext.prototype, "riskContext", {
        get: function () {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            return {
                b0: Date.now() - this.startTime,
                b1: this.mouseMovement,
                b2: this.focusCount,
                b3: this.scrolls,
                b4: this.clickCount,
                b5: this.submitCount,
                b6: (_a = this.clientFeatures) === null || _a === void 0 ? void 0 : _a.userAgent,
                b7: (_b = this.clientFeatures) === null || _b === void 0 ? void 0 : _b.plugins,
                b8: (_c = this.clientFeatures) === null || _c === void 0 ? void 0 : _c.localTime,
                b9: (_d = this.clientFeatures) === null || _d === void 0 ? void 0 : _d.timezoneOffset,
                b10: (_e = this.clientFeatures) === null || _e === void 0 ? void 0 : _e.permissionStatus,
                b11: (_f = this.clientFeatures) === null || _f === void 0 ? void 0 : _f.webdriver,
                b12: (_g = this.clientFeatures) === null || _g === void 0 ? void 0 : _g.batteryInfo,
                b13: (_h = this.clientFeatures) === null || _h === void 0 ? void 0 : _h.features
            };
        },
        enumerable: true,
        configurable: true
    });
    BehaviorTrackingContext.prototype.addFields = function (fields) {
        this.fieldsToTrack = fields;
    };
    BehaviorTrackingContext.prototype.startMonitoring = function () {
        var _this = this;
        var _a, _b, _c;
        // Clear all registered event
        BehaviorTrackingContext.removeAllEvents();
        // Register new events
        this.startTime = Date.now();
        BehaviorTrackingContext.registerEvent((_a = this.document) === null || _a === void 0 ? void 0 : _a.body, 'click', this.increaseClickCount);
        BehaviorTrackingContext.registerEvent((_b = this.document) === null || _b === void 0 ? void 0 : _b.body, 'mousemove', this.trackMouseMovement());
        BehaviorTrackingContext.registerEvent(this.document, 'scroll', this.trackScrolling());
        (_c = this.fieldsToTrack) === null || _c === void 0 ? void 0 : _c.forEach(function (field) {
            BehaviorTrackingContext.registerEvent(field === null || field === void 0 ? void 0 : field.instanceElement, 'focus', _this.increaseFocusCount);
            BehaviorTrackingContext.registerEvent(field === null || field === void 0 ? void 0 : field.instanceElement, 'blur', _this.increaseFocusCount);
        });
        this.clientFeatures = new LocalInfo_1.ClientFeature();
    };
    BehaviorTrackingContext.prototype.stopMonitoring = function () {
        BehaviorTrackingContext.removeAllEvents();
    };
    BehaviorTrackingContext.prototype.reset = function () {
        this.startTime = Date.now();
        this.focusCount = 0;
        this.clickCount = 0;
    };
    //#region events
    BehaviorTrackingContext.prototype.onSubmit = function () {
        this.submitCount++;
    };
    //#endregion
    BehaviorTrackingContext.removeAllEvents = function () {
        for (var _i = 0, _a = BehaviorTrackingContext.registeredEvents; _i < _a.length; _i++) {
            var _b = _a[_i], element = _b.element, eventType = _b.eventType, handler = _b.handler;
            window.gigya.utils.DOM.removeEventListener(element, eventType, handler);
        }
        BehaviorTrackingContext.registeredEvents = [];
    };
    BehaviorTrackingContext.registerEvent = function (element, eventType, handler) {
        BehaviorTrackingContext.registeredEvents.push({ element: element, eventType: eventType, handler: handler });
        window.gigya.utils.DOM.addEventListener(element, eventType, handler);
    };
    BehaviorTrackingContext.registeredEvents = [];
    return BehaviorTrackingContext;
}());
exports.BehaviorTrackingContext = BehaviorTrackingContext;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha.ts":
/*!****************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/CardListFormWidget.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/CardListFormWidget.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var CardListWidget_1 = __webpack_require__(/*! ./Widgets/CardListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListWidget.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ./BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var CardListFormWidget = /** @class */ (function (_super) {
    tslib_1.__extends(CardListFormWidget, _super);
    function CardListFormWidget(_form, el, _domUtils) {
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        var _this = _super.call(this, _form, el, false) || this;
        _this._domUtils = _domUtils;
        _this.formWidgets = [];
        _this.createItemTemplate(el);
        return _this;
    }
    Object.defineProperty(CardListFormWidget.prototype, "emptyItemElem", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(CardListWidget_1.CardList_CONSTS.emptyListItemSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListFormWidget.prototype, "itemTemplate", {
        get: function () {
            var _a, _b;
            return (_b = (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector('template')) === null || _b === void 0 ? void 0 : _b.innerHTML;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListFormWidget.prototype, "cardListElem", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(CardListWidget_1.CardList_CONSTS.listSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListFormWidget.prototype, "items", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelectorAll(CardListWidget_1.CardList_CONSTS.cardSelector);
        },
        enumerable: true,
        configurable: true
    });
    CardListFormWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        return [4 /*yield*/, this.reloadList()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CardListFormWidget.prototype.createItemTemplate = function (el) {
        if (!el.querySelector('template')) {
            var item = el.querySelector(CardListWidget_1.CardList_CONSTS.cardSelector);
            var templateElem = document.createElement('template');
            templateElem.content.append(item === null || item === void 0 ? void 0 : item.cloneNode(true));
            el.append(templateElem);
            item.remove();
        }
    };
    CardListFormWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this._form.removeDynamicWidgets(this.formWidgets);
    };
    CardListFormWidget.prototype.reloadList = function () {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var items, i, card;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this._screen.dimScreen();
                        return [4 /*yield*/, this.reloadData()];
                    case 1:
                        items = _b.sent();
                        this.clearList();
                        if (items === null || items === void 0 ? void 0 : items.length) {
                            (_a = this.emptyItemElem) === null || _a === void 0 ? void 0 : _a.classList.remove(CardListWidget_1.CardList_CONSTS.emptyListItemActiveClass);
                            for (i = 0; i < items.length; i++) {
                                card = this._domUtils.createElementFromTemplate(this.itemTemplate);
                                card.setAttribute(CardListWidget_1.CardList_CONSTS.indexAttribute, i.toString());
                                card.setAttribute(CardListWidget_1.CardList_CONSTS.idAttribute, items[i][this.itemId]);
                                this.cardListElem.append(card);
                            }
                            this.formWidgets = this._form.addDynamicWidgets(this.instanceElement);
                        }
                        this._screen.undimScreen();
                        return [2 /*return*/];
                }
            });
        });
    };
    CardListFormWidget.prototype.clearList = function () {
        var _a;
        this.cardListElem
            .querySelectorAll(CardListWidget_1.CardList_CONSTS.cardSelector)
            .forEach(function (elem) { return elem.remove(); });
        (_a = this.emptyItemElem) === null || _a === void 0 ? void 0 : _a.classList.add(CardListWidget_1.CardList_CONSTS.emptyListItemActiveClass);
    };
    CardListFormWidget.prototype.showList = function () {
        if (this.instanceElement) {
            this.instanceElement.style.display = 'block';
        }
    };
    return CardListFormWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.CardListFormWidget = CardListFormWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts":
/*!****************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.consentFieldName = 'isConsentGranted';
exports.namespace = 'preferences';
function postProcessForm(formData, preferencesSchema) {
    var displayedPreferences = getDisplayedPreferences(formData, preferencesSchema);
    if (displayedPreferences) {
        formData = window.gigya.utils.object.merge([formData, { displayedPreferences: displayedPreferences }]);
    }
    return formData;
}
exports.postProcessForm = postProcessForm;
function getDisplayedPreferences(formData, preferencesSchema) {
    if (!formData)
        return undefined;
    if (!preferencesSchema) {
        // gigya.logger.error(`form has preferences - but it doesn't exist in schema`);
        return undefined;
    }
    var consents = Object.keys(formData)
        .filter(isConsentField)
        .map(toConsentName);
    if (!consents.length)
        return undefined;
    return consents.reduce(function (res, curr) {
        var consent = preferencesSchema[curr];
        if (!consent) {
            window.gigya.logger.warn("form input bound to " + exports.namespace + "." + curr + " but it doesn't exist on schema");
        }
        else {
            res[curr] = {
                docVersion: consent.currentDocVersion,
                docDate: consent.currentDocDate,
            };
        }
        return res;
    }, {});
}
function isConsentField(fieldName) {
    // todo: after ie11 deprecation, replace with startsWith & endsWith.
    return fieldName.indexOf(exports.namespace + ".") == 0 && fieldName.substr(fieldName.length - exports.consentFieldName.length, fieldName.length) === exports.consentFieldName;
}
function toConsentName(consentFieldName) {
    // removing preferences namespace and isConsentGranted
    var fieldParts = consentFieldName.split('.');
    return fieldParts.slice(1, fieldParts.length - 1).join('.');
}


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ConsentData.ts":
/*!********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ConsentData.ts ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var Consent_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
function getConsentDataForScreenSet(apiData, lang) {
    var _a, _b;
    var getSiteConsentDetails = apiData === null || apiData === void 0 ? void 0 : apiData.getSiteConsentDetails;
    if ((getSiteConsentDetails === null || getSiteConsentDetails === void 0 ? void 0 : getSiteConsentDetails.errorCode) === GSErrors_1.GSErrors.OK && (getSiteConsentDetails === null || getSiteConsentDetails === void 0 ? void 0 : getSiteConsentDetails.siteConsentDetails)) {
        return getConsentDataForCurrentLanguage(getSiteConsentDetails === null || getSiteConsentDetails === void 0 ? void 0 : getSiteConsentDetails.siteConsentDetails, lang);
    }
    var legacyConsentData = (_b = (_a = apiData.getSchema) === null || _a === void 0 ? void 0 : _a.preferencesSchema) === null || _b === void 0 ? void 0 : _b.fields;
    if (!legacyConsentData) {
        return null;
    }
    return getConsentDataForCurrentLanguage(legacyConsentData, lang);
}
exports.getConsentDataForScreenSet = getConsentDataForScreenSet;
function isConsentMigrated() {
    var _a, _b;
    return (_b = (_a = window.gigya._.config.consent) === null || _a === void 0 ? void 0 : _a.isMigrated) !== null && _b !== void 0 ? _b : false;
}
exports.isConsentMigrated = isConsentMigrated;
function hasConsentLicense() {
    var _a, _b;
    return (_b = (_a = window.gigya._.config.consent) === null || _a === void 0 ? void 0 : _a.hasLicense) !== null && _b !== void 0 ? _b : false;
}
exports.hasConsentLicense = hasConsentLicense;
/**
 * @description determines when consent type is not terms or privacy
 */
function isConsentTypeOther(fieldName) {
    if (!isConsentField(fieldName)) {
        return false;
    }
    var fieldNameParts = fieldName.split('.');
    var consentType = fieldNameParts[1];
    if (consentType === 'privacy' || consentType === 'terms') {
        return false;
    }
    return true;
}
exports.isConsentTypeOther = isConsentTypeOther;
function isConsentField(fieldName) {
    if (tooShortName(fieldName)) {
        return false;
    }
    return fieldName.startsWith(Consent_1.namespace) && fieldName.endsWith(Consent_1.consentFieldName);
}
exports.isConsentField = isConsentField;
var CONSENT_FIELD_MINIMUM_LENGTH = 3;
function tooShortName(fieldName) {
    var _a;
    var fieldNameParts = (_a = fieldName === null || fieldName === void 0 ? void 0 : fieldName.split('.')) !== null && _a !== void 0 ? _a : [];
    if (fieldNameParts.length < CONSENT_FIELD_MINIMUM_LENGTH) {
        return true;
    }
}
function getConsentDataForCurrentLanguage(consentMap, lang) {
    return Object.keys(consentMap).reduce(function (statements, key) {
        var consent = consentMap[key];
        var defaultLang = consent.defaultLang;
        var legalStatements = consent.legalStatements;
        statements[key] = (legalStatements === null || legalStatements === void 0 ? void 0 : legalStatements[lang]) || (legalStatements === null || legalStatements === void 0 ? void 0 : legalStatements[defaultLang]) || {};
        return statements;
    }, {});
}


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Constants/link-accounts.ts":
/*!********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Constants/link-accounts.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.LINK_ACCOUNTS_DEFAULT_INCLUDE_PARAM = 'profile,data,subscriptions,preferences';


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Constants/magic-link.ts":
/*!*****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Constants/magic-link.ts ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = __webpack_require__(/*! src/accounts/constants */ "./src/accounts/constants.ts");
exports.MAGIC_LINK_UNACCEPTABLE_PARAMS_REGEX = new RegExp(constants_1.GIGYA_INTERNAL_PARAM_PREFIX + "|" + constants_1.GIGYA_INTERNAL_PARAMS);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/FormDataProvider.ts":
/*!***************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/FormDataProvider.ts ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var FormDataProvider = /** @class */ (function () {
    function FormDataProvider(form) {
        this._form = form;
    }
    Object.defineProperty(FormDataProvider.prototype, "defaultSubmitParams", {
        get: function () {
            return this._form.defaultSubmitParams();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormDataProvider.prototype, "hasProviderSessionInfo", {
        get: function () {
            return this._form._screenSet.hasProviderSessionInfo;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormDataProvider.prototype, "includeParams", {
        get: function () {
            return this._form._screenSet.params.include;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormDataProvider.prototype, "lang", {
        get: function () {
            var _a, _b;
            return (_b = (_a = this._form._screenSet) === null || _a === void 0 ? void 0 : _a.params) === null || _b === void 0 ? void 0 : _b.lang;
        },
        enumerable: true,
        configurable: true
    });
    return FormDataProvider;
}());
exports.FormDataProvider = FormDataProvider;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/IFormDataProvider.ts":
/*!****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/IFormDataProvider.ts ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/ILoginDataProvider.ts":
/*!*****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/ILoginDataProvider.ts ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/LinkAccountsDataProvider.ts":
/*!***********************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/LinkAccountsDataProvider.ts ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormDataProvider_1 = __webpack_require__(/*! ./FormDataProvider */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/FormDataProvider.ts");
var linkAccountsHelper_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper */ "./src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts");
var link_accounts_1 = __webpack_require__(/*! ../Constants/link-accounts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Constants/link-accounts.ts");
var LoginModes_1 = __webpack_require__(/*! ../LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var LinkAccountsDataProvider = /** @class */ (function (_super) {
    tslib_1.__extends(LinkAccountsDataProvider, _super);
    function LinkAccountsDataProvider() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(LinkAccountsDataProvider.prototype, "loginID", {
        get: function () {
            return linkAccountsHelper_1.getLoginId(this.conflictingAccount);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LinkAccountsDataProvider.prototype, "phone", {
        get: function () {
            return linkAccountsHelper_1.getPhone(this.conflictingAccount);
        },
        enumerable: true,
        configurable: true
    });
    LinkAccountsDataProvider.prototype.getPasswordLoginParams = function (password) {
        var loginParams = {
            loginID: this.loginID,
            include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues(link_accounts_1.LINK_ACCOUNTS_DEFAULT_INCLUDE_PARAM, this.includeParams)
        };
        if (password) {
            loginParams['password'] = password;
        }
        if (this.hasProviderSessionInfo) {
            return tslib_1.__assign(tslib_1.__assign({}, loginParams), { suppressLoginEvent: true, regToken: null });
        }
        return tslib_1.__assign(tslib_1.__assign({}, loginParams), { loginMode: LoginModes_1.LoginModes.link.name });
    };
    Object.defineProperty(LinkAccountsDataProvider.prototype, "conflictingAccount", {
        get: function () {
            var _a;
            var apiData = this._form._screenSet.getApiData();
            return (_a = apiData === null || apiData === void 0 ? void 0 : apiData.getConflictingAccount) === null || _a === void 0 ? void 0 : _a.conflictingAccount;
        },
        enumerable: true,
        configurable: true
    });
    return LinkAccountsDataProvider;
}(FormDataProvider_1.FormDataProvider));
exports.LinkAccountsDataProvider = LinkAccountsDataProvider;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/index.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/index.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! ./FormDataProvider */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/FormDataProvider.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./IFormDataProvider */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/IFormDataProvider.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./ILoginDataProvider */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/ILoginDataProvider.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./LinkAccountsDataProvider */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/LinkAccountsDataProvider.ts"), exports);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts":
/*!**************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function warn(screensetID, msg) {
    // TODO: this probably should use some general debug warn method or in the base plugin
    if (typeof console == 'object' && console.warn)
        console.warn('Gigya Screenset (' + screensetID + ') - ' + msg);
}
exports.warn = warn;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var Errors_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var FormInput_1 = __webpack_require__(/*! ./Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var ErrorElementPolicies = {
    'gigya-error-display': {
        showError: function (el, errorMessage) {
            if (!el)
                return;
            el.classList.add('gigya-error-display-active');
        },
        hideError: function (el) {
            if (!el)
                return;
            el.classList.remove('gigya-error-display-active');
        },
    },
    'gigya-error-msg': {
        showError: function (el, errorMessage) {
            if (!el)
                return;
            el.classList.add('gigya-error-msg-active');
            el.setAttribute('role', 'alert');
            el.innerHTML = errorMessage;
        },
        hideError: function (el) {
            if (!el)
                return;
            el.classList.remove('gigya-error-msg-active');
            el.removeAttribute('role');
            el.innerHTML = '';
        },
    },
};
utils_1.DeepFreeze(ErrorElementPolicies);
var ErrorScopes;
(function (ErrorScopes) {
    ErrorScopes[ErrorScopes["boundObjectError"] = 0] = "boundObjectError";
    ErrorScopes[ErrorScopes["firstError"] = 1] = "firstError";
    ErrorScopes[ErrorScopes["anyError"] = 2] = "anyError";
    ErrorScopes[ErrorScopes["allErrors"] = 3] = "allErrors";
    ErrorScopes[ErrorScopes["bound-object-error"] = 0] = "bound-object-error";
    ErrorScopes[ErrorScopes["first-error"] = 1] = "first-error";
    ErrorScopes[ErrorScopes["any-error"] = 2] = "any-error";
    ErrorScopes[ErrorScopes["all-errors"] = 3] = "all-errors";
})(ErrorScopes = exports.ErrorScopes || (exports.ErrorScopes = {}));
utils_1.DeepFreeze(ErrorScopes);
exports.ErrorDisplayElement_CONSTS = {
    gigyaClasses: ['gigya-error-display', 'gigya-error-msg'],
    boundedTo: 'data-bound-to',
    errorCodes: 'data-error-codes',
    scope: 'data-scope',
    flags: 'data-error-flags',
    errorClassPrefix: 'gigya-error-code-',
    errorType: 'gigya-error-type-',
};
utils_1.DeepFreeze(exports.ErrorDisplayElement_CONSTS);
var ErrorDisplayElement = /** @class */ (function (_super) {
    tslib_1.__extends(ErrorDisplayElement, _super);
    function ErrorDisplayElement(el, _screen) {
        var _this = _super.call(this, el, _screen) || this;
        _this._screen = _screen;
        _this.boundedTo = el.getAttribute(exports.ErrorDisplayElement_CONSTS.boundedTo);
        _this.scope = ErrorScopes[el.getAttribute(exports.ErrorDisplayElement_CONSTS.scope)] || ErrorScopes.boundObjectError;
        var errorCodes = el.getAttribute(exports.ErrorDisplayElement_CONSTS.errorCodes);
        if (errorCodes)
            _this.allowedErrorCodes = utils_1.Map(errorCodes.split(','), function (code) { return parseInt(code); });
        else
            _this.allowedErrorCodes = [];
        var flags = el.getAttribute(exports.ErrorDisplayElement_CONSTS.flags);
        if (flags)
            _this.allowedFlags = flags.split(',');
        else
            _this.allowedFlags = [];
        for (var className in ErrorElementPolicies) {
            if (window.gigya.utils.DOM.isElementClass(el, className)) {
                _this.policy = ErrorElementPolicies[className];
                break;
            }
        }
        _this.policy.hideError(el); // clear error as initial appearance
        // WCAG: Set role=alert and aria-atomic so that screen readers will automatically read updated error text.
        // See: https://www.w3.org/TR/WCAG20-TECHS/ARIA19.html
        el.setAttribute('aria-atomic', 'true');
        return _this;
    }
    ErrorDisplayElement.prototype.isErrorCodeAllowed = function (errorCode, flags) {
        var _this = this;
        if (flags === void 0) { flags = null; }
        var allowedCode = (this.allowedErrorCodes.length === 0 && errorCode !== GSErrors_1.GSErrors.Data_Pending) || window.gigya.utils.array.indexOf(this.allowedErrorCodes, errorCode) !== -1;
        var allowedFlag = this.allowedFlags.length === 0; // Allow all flags if flags are not specified
        if (this.allowedFlags.length && flags) {
            var arFlags = flags.split(',');
            allowedFlag = utils_1.Some(arFlags, function (flag) {
                if (window.gigya.utils.array.indexOf(_this.allowedFlags, flag) !== -1) {
                    allowedFlag = true;
                    return true;
                }
                return false;
            });
        }
        return allowedCode && allowedFlag;
    };
    ErrorDisplayElement.prototype.showError = function (error) {
        this.setLastError(error);
        this.policy.showError(this.instanceElement, error.errorMessage);
        this._screenSet.centerModal();
    };
    ErrorDisplayElement.prototype.hideError = function () {
        this.policy.hideError(this.instanceElement);
        this.removeLastError();
    };
    ErrorDisplayElement.prototype.setLastError = function (error) {
        var _this = this;
        this.removeLastError();
        this.lastError = error;
        if (this.instanceElement) {
            var classes = [
                exports.ErrorDisplayElement_CONSTS.errorClassPrefix + error.errorCode,
                error.errorType && "" + exports.ErrorDisplayElement_CONSTS.errorType + Errors_1.ErrorType[error.errorType],
                error.isWarn && FormInput_1.FormInput_CONSTS.warnClass,
            ];
            classes.forEach(function (c) { return c && window.gigya.utils.DOM.addClassToElement(_this.instanceElement, c); });
            this._screenSet.centerModal();
        }
    };
    ErrorDisplayElement.prototype.removeLastError = function () {
        var _this = this;
        if (this.lastError) {
            if (this.instanceElement) {
                var classes = [
                    exports.ErrorDisplayElement_CONSTS.errorClassPrefix + this.lastError.errorCode,
                    this.lastError.errorType && "" + exports.ErrorDisplayElement_CONSTS.errorType + Errors_1.ErrorType[this.lastError.errorType],
                    this.lastError.isWarn && FormInput_1.FormInput_CONSTS.warnClass,
                ];
                classes.forEach(function (c) { return c && window.gigya.utils.DOM.removeClassFromElement(_this.instanceElement, c); });
                this._screenSet.centerModal();
            }
            this.lastError = null;
        }
    };
    ErrorDisplayElement.prototype.getErrorType = function () {
        var _a;
        return (_a = this.lastError) === null || _a === void 0 ? void 0 : _a.errorType;
    };
    ErrorDisplayElement.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.boundedTo = this.instanceElement.getAttribute(exports.ErrorDisplayElement_CONSTS.boundedTo);
        var errorCodes = this.instanceElement.getAttribute(exports.ErrorDisplayElement_CONSTS.errorCodes);
        if (errorCodes)
            this.allowedErrorCodes = utils_1.Map(errorCodes.split(','), function (code) { return parseInt(code); });
        else
            this.allowedErrorCodes = [];
        this.scope = ErrorScopes[this.instanceElement.getAttribute(exports.ErrorDisplayElement_CONSTS.scope)] || ErrorScopes.boundObjectError;
        var flags = this.instanceElement.getAttribute(exports.ErrorDisplayElement_CONSTS.flags);
        if (flags)
            this.allowedFlags = flags.split(',');
        else
            this.allowedFlags = [];
    };
    return ErrorDisplayElement;
}(TemplateElement_1.TemplateElement));
exports.ErrorDisplayElement = ErrorDisplayElement;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts":
/*!***************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var _this = this;
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ScreenOptions_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var ErrorType;
(function (ErrorType) {
    ErrorType[ErrorType["client"] = 0] = "client";
    ErrorType[ErrorType["custom"] = 1] = "custom";
    ErrorType[ErrorType["server"] = 2] = "server";
})(ErrorType = exports.ErrorType || (exports.ErrorType = {}));
exports.PendingErrorAttributes = {};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNTS_LINKED] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.accountsLinkedScreen,
    nextScreen: function (form) { return form._screen.accountsLinkedScreen || '_finish'; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_REGISTRATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingRegistrationScreen,
    nextScreen: function (form) {
        var apiData = form._screenSet.getApiData();
        delete apiData.getSchema; // cleaning cached schema
        return form._screen.pendingRegistrationScreen;
    },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.LOGIN_IDENTIFIER_EXISTS] = exports.PendingErrorAttributes[GSErrors_1.GSErrors.OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.existingLoginIdentifierScreen,
    nextScreen: function (form) {
        return form._screenSet.data.regToken && form._screen.existingLoginIdentifierScreen;
    },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.existingLoginIdentifierScreen,
    nextScreen: function (form) {
        var _a;
        var screenData = form._screenSet.data;
        return screenData.regToken && ((_a = form._screenSet) === null || _a === void 0 ? void 0 : _a.providerSessionInfo) && form._screen.existingLoginIdentifierScreen;
    },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_VERIFICATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingVerificationScreen,
    nextScreen: function (form) { return form._screen.pendingVerificationScreen; },
    resetFinalizeNeededState: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_MISSING_LOGINID] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.missingLoginIdScreen,
    nextScreen: function (form) { return form._screen.missingLoginIdScreen; },
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.PENDING_PASSWORD_CHANGE] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingPasswordChangeScreen,
    nextScreen: function (form) { return form._screen.pendingPasswordChangeScreen; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_TFA_VERIFICATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingTfaVerificationScreen,
    nextScreen: function (form) { return form._screen.pendingTfaVerificationScreen; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_TFA_REGISTRATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingTfaRegistrationScreen,
    nextScreen: function (form) { return form._screen.pendingTfaRegistrationScreen; },
    requiresFinalize: true,
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.ACCOUNT_PENDING_RECENT_LOGIN] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingReAuthenticationScreen,
    nextScreen: function (form) { return form._screen.pendingReAuthenticationScreen; },
};
exports.PendingErrorAttributes[GSErrors_1.GSErrors.PENDING_CODE_VERIFICATION] = {
    name: ScreenOptions_1.ScreenOptions_CONSTS.pendingCodeVerificationScreen,
    requiresFinalize: true,
    nextScreen: function (form) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!!window.gigya.utils.toggles.isOn('preventSendingCodeVerification')) return [3 /*break*/, 2];
                    return [4 /*yield*/, sendVerificationCode(form)];
                case 1:
                    _a.sent();
                    _a.label = 2;
                case 2: return [2 /*return*/, form._screen.pendingCodeVerificationScreen];
            }
        });
    }); }
};
function sendVerificationCode(form) {
    var _a, _b;
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var formData, apiData, accountInfo;
        return tslib_1.__generator(this, function (_c) {
            switch (_c.label) {
                case 0:
                    formData = form.getFormData && form.getFormData();
                    apiData = form._screenSet.getApiData();
                    accountInfo = apiData.getAccountInfo = apiData.getAccountInfo || {};
                    if (!(!accountInfo.email && !(accountInfo.profile && accountInfo.profile.email))) return [3 /*break*/, 2];
                    return [4 /*yield*/, new gigya.Promise(function (r) { return form._screenSet.updateAccountInfo(r); })];
                case 1:
                    accountInfo = _c.sent();
                    _c.label = 2;
                case 2:
                    if (((_b = (_a = accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.emails) === null || _a === void 0 ? void 0 : _a.unverified) === null || _b === void 0 ? void 0 : _b.indexOf(formData === null || formData === void 0 ? void 0 : formData.loginID)) >= 0) {
                        accountInfo.email = formData.loginID;
                    }
                    else {
                        accountInfo.email = accountInfo.email || (accountInfo.profile && accountInfo.profile.email);
                    }
                    window.gigya.accounts.otp.sendCode({
                        lang: form._screenSet.params.communicationLang,
                        regToken: form._screenSet.data.regToken,
                        email: accountInfo.email,
                        ignoreApiQueue: true,
                        callback: function (res) {
                            if (res.errorCode == GSErrors_1.GSErrors.OK) {
                                form._screenSet.data.otpData.vToken = res.vToken;
                            }
                        }
                    });
                    return [2 /*return*/];
            }
        });
    });
}
utils_1.DeepFreeze(exports.PendingErrorAttributes);
function notImplementerAbstract() {
    throw new Error('NOT IMPLEMENTED');
}
exports.notImplementerAbstract = notImplementerAbstract;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var SwitchScreenWidget_1 = __webpack_require__(/*! ../SwitchScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget.ts");
var getAttribute = window.gigya._.plugins.utils.DOM.getAttribute;
exports.AuthMethodsForm_CONSTS = {
    gigyaClass: 'gigya-auth-methods-form',
    authMethodSelector: '[data-auth-method]',
    authMethod: 'data-auth-method'
};
utils_1.DeepFreeze(exports.AuthMethodsForm_CONSTS);
var AuthMethodsForm = /** @class */ (function (_super) {
    tslib_1.__extends(AuthMethodsForm, _super);
    function AuthMethodsForm() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._authMethodToScreenMap = {};
        return _this;
    }
    AuthMethodsForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        this.instanceElement.querySelectorAll(exports.AuthMethodsForm_CONSTS.authMethodSelector)
                            .forEach(function (el) {
                            var methods = _this.getAuthMethods().methods;
                            if (!window.gigya.utils.array.includes(methods, getAttribute(el, exports.AuthMethodsForm_CONSTS.authMethod))) {
                                window.gigya.utils.DOM.removeElement(el.parentElement);
                            }
                            _this._authMethodToScreenMap[getAttribute(el, exports.AuthMethodsForm_CONSTS.authMethod)] = getAttribute(el, SwitchScreenWidget_1.SwitchScreen_CONSTS.switchScreen);
                        });
                        this.autoSkipScreen = this.getDefaultAuthScreen();
                        return [2 /*return*/];
                }
            });
        });
    };
    AuthMethodsForm.prototype.canAutoSkip = function (formContext) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a, methods, preferredMethod, hasPasskey, canSkipToDefaultAuthMethod, _b;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.getAuthMethods(), methods = _a.methods, preferredMethod = _a.preferredMethod;
                        hasPasskey = methods.some(function (x) { return x.startsWith('passkey'); });
                        canSkipToDefaultAuthMethod = methods.length <= 1 || (preferredMethod && !formContext.explicitSwitchScreen);
                        _b = !hasPasskey && canSkipToDefaultAuthMethod;
                        if (!_b) return [3 /*break*/, 2];
                        return [4 /*yield*/, _super.prototype.canAutoSkip.call(this, formContext)];
                    case 1:
                        _b = (_c.sent());
                        _c.label = 2;
                    case 2: return [2 /*return*/, _b];
                }
            });
        });
    };
    AuthMethodsForm.prototype.getDefaultAuthScreen = function () {
        var _a = this.getAuthMethods(), methods = _a.methods, preferredMethod = _a.preferredMethod;
        if (!methods || !methods.length) {
            window.gigya.logger.warn('could not find default auth method');
            return '_finish';
        }
        if (methods.length === 1) {
            return this._authMethodToScreenMap[methods[0]];
        }
        if (preferredMethod && this._authMethodToScreenMap[preferredMethod]) {
            return this._authMethodToScreenMap[preferredMethod];
        }
        return null;
    };
    AuthMethodsForm.prototype.getAuthMethods = function () {
        var apiData = this._screenSet.getApiData();
        var methods = tslib_1.__spreadArrays(((apiData === null || apiData === void 0 ? void 0 : apiData.authMethods) || []));
        return {
            methods: methods,
            preferredMethod: this.getPreferredMethod(methods, apiData === null || apiData === void 0 ? void 0 : apiData.identifier)
        };
    };
    AuthMethodsForm.prototype.getPreferredMethod = function (methods, identifier) {
        var preferredMethod = window.gigya.accounts.auth.getPreferredLoginMethod(identifier);
        if (window.gigya.utils.array.includes(methods, preferredMethod))
            return preferredMethod;
        if (window.gigya.utils.array.containsOnly(methods, ['password', 'push'])) {
            return 'push';
        }
        return null;
    };
    AuthMethodsForm.CONSTS = exports.AuthMethodsForm_CONSTS;
    return AuthMethodsForm;
}(BaseForm_1.BaseForm));
exports.AuthMethodsForm = AuthMethodsForm;
BaseForm_1.BaseForm.addFormToLibrary(AuthMethodsForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/BaseLoginForm.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/BaseLoginForm.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var BaseLoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(BaseLoginForm, _super);
    function BaseLoginForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    BaseLoginForm.prototype.submitApi = function () {
        return window.gigya.accounts.login;
    };
    BaseLoginForm.prototype.getErrorKey = function (response) {
        var errorCode = Number(response.errorCode);
        if (errorCode === GSErrors_1.GSErrors.OLD_PASSWORD_USED) {
            return 'old_password_used';
        }
        return _super.prototype.getErrorKey.call(this, response);
    };
    return BaseLoginForm;
}(BaseForm_1.BaseForm));
exports.BaseLoginForm = BaseLoginForm;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ChangeOrganizationContextForm.ts":
/*!********************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ChangeOrganizationContextForm.ts ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var Errors_1 = __webpack_require__(/*! ../Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.ChangeOrganizationContextFormConsts = {
    gigyaClass: 'gigya-change-organization-context-form',
};
utils_1.DeepFreeze(exports.ChangeOrganizationContextFormConsts);
var ChangeOrganizationContextForm = /** @class */ (function (_super) {
    tslib_1.__extends(ChangeOrganizationContextForm, _super);
    function ChangeOrganizationContextForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ChangeOrganizationContextForm.prototype.submitApi = function () {
        return window.gigya.accounts.b2b.setOrganizationContext;
    };
    ChangeOrganizationContextForm.prototype.getCustomValidationErrors = function () {
        var _a, _b;
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var errors, bpid;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, _super.prototype.getCustomValidationErrors.call(this)];
                    case 1:
                        errors = _c.sent();
                        bpid = (_b = (_a = this._screenSet.data) === null || _a === void 0 ? void 0 : _a.apiData) === null || _b === void 0 ? void 0 : _b.selectedBpid;
                        if (!bpid) {
                            if (!errors)
                                errors = [];
                            errors.push({
                                fieldName: null,
                                fieldArrayKeyValue: null,
                                errorCode: GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR,
                                errorType: Errors_1.ErrorType.client,
                                errorMessage: this._screen.getErrorMessage(GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR, false, null)
                            });
                        }
                        return [2 /*return*/, errors];
                }
            });
        });
    };
    ChangeOrganizationContextForm.prototype.performSubmit = function (oParams) {
        var bpid = this._screenSet.data.apiData.selectedBpid;
        return _super.prototype.performSubmit.call(this, tslib_1.__assign(tslib_1.__assign({}, oParams), { bpid: bpid }));
    };
    ChangeOrganizationContextForm.CONSTS = exports.ChangeOrganizationContextFormConsts;
    return ChangeOrganizationContextForm;
}(BaseForm_1.BaseForm));
exports.ChangeOrganizationContextForm = ChangeOrganizationContextForm;
BaseForm_1.BaseForm.addFormToLibrary(ChangeOrganizationContextForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/CustomForm.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/CustomForm.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.CustomForm_CONSTS = {
    gigyaClass: 'gigya-custom-form',
};
var CustomForm = /** @class */ (function (_super) {
    tslib_1.__extends(CustomForm, _super);
    function CustomForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    CustomForm.CONSTS = exports.CustomForm_CONSTS;
    return CustomForm;
}(BaseForm_1.BaseForm));
exports.CustomForm = CustomForm;
BaseForm_1.BaseForm.addFormToLibrary(CustomForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/DeviceCodeForm.ts":
/*!*****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/DeviceCodeForm.ts ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var RegisterDeviceRequestParam;
(function (RegisterDeviceRequestParam) {
    RegisterDeviceRequestParam["UserCode"] = "user_code";
})(RegisterDeviceRequestParam = exports.RegisterDeviceRequestParam || (exports.RegisterDeviceRequestParam = {}));
var RegisterDeviceFormParam;
(function (RegisterDeviceFormParam) {
    RegisterDeviceFormParam["UserCode"] = "userCode";
})(RegisterDeviceFormParam = exports.RegisterDeviceFormParam || (exports.RegisterDeviceFormParam = {}));
exports.DeviceCodeForm_CONSTS = {
    gigyaClass: 'gigya-device-code-form',
};
utils_1.DeepFreeze(exports.DeviceCodeForm_CONSTS);
var DeviceCodeForm = /** @class */ (function (_super) {
    tslib_1.__extends(DeviceCodeForm, _super);
    function DeviceCodeForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    DeviceCodeForm.prototype.specialFields = function () {
        var _a;
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            (_a = {},
                _a[RegisterDeviceFormParam.UserCode] = true,
                _a),
        ]);
    };
    DeviceCodeForm.prototype.prePopulateData = function () {
        var _a;
        var _b;
        return _a = {},
            _a[RegisterDeviceFormParam.UserCode] = (_b = this.getUserCodeFromURL()) !== null && _b !== void 0 ? _b : '',
            _a;
    };
    DeviceCodeForm.prototype.submitApi = function () {
        return window.gigya.fidm.oidc.op.deviceContinue;
    };
    DeviceCodeForm.prototype.performSubmit = function (formData) {
        var _a;
        var requestParams = (_a = {},
            _a[RegisterDeviceRequestParam.UserCode] = formData[RegisterDeviceFormParam.UserCode],
            _a);
        return _super.prototype.performSubmit.call(this, requestParams);
    };
    DeviceCodeForm.prototype.getErrorKey = function (response) {
        var errorCode = Number(response.errorCode);
        if (errorCode === GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE) {
            return 'device_code_incorrect';
        }
        return _super.prototype.getErrorKey.call(this, response);
    };
    DeviceCodeForm.prototype.getUserCodeFromURL = function () {
        var params = window.gigya.utils.URL.getParamsFromURL(document.location.href);
        return params[RegisterDeviceRequestParam.UserCode];
    };
    DeviceCodeForm.CONSTS = exports.DeviceCodeForm_CONSTS;
    return DeviceCodeForm;
}(BaseForm_1.BaseForm));
exports.DeviceCodeForm = DeviceCodeForm;
BaseForm_1.BaseForm.addFormToLibrary(DeviceCodeForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/EmailCodeAuthMethodForm.ts":
/*!**************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/EmailCodeAuthMethodForm.ts ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var OtpVerificationBaseForm_1 = __webpack_require__(/*! ./OtpVerificationBaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts");
var FlagService_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
exports.EmaiLCodeAuthMethodForm_CONSTS = {
    gigyaClass: 'gigya-email-code-auth-method-form',
    authMethod: 'emailOtp'
};
utils_1.DeepFreeze(exports.EmaiLCodeAuthMethodForm_CONSTS);
var EmailCodeAuthMethodForm = /** @class */ (function (_super) {
    tslib_1.__extends(EmailCodeAuthMethodForm, _super);
    function EmailCodeAuthMethodForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    EmailCodeAuthMethodForm.prototype.linkInstanceElement = function (parent) {
        var _a, _b;
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var apiData, lang;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _c.sent();
                        apiData = this._screenSet.getApiData();
                        lang = FlagService_1.FlagService.sendLangForEmailOTP ? (_b = (_a = this._screenSet) === null || _a === void 0 ? void 0 : _a.params) === null || _b === void 0 ? void 0 : _b.lang : null;
                        if (apiData === null || apiData === void 0 ? void 0 : apiData.identifier) {
                            this.sendEmailOTP(apiData === null || apiData === void 0 ? void 0 : apiData.identifier, lang);
                        }
                        window.gigya.accounts.auth.setPreferredLoginMethod(exports.EmaiLCodeAuthMethodForm_CONSTS.authMethod, apiData === null || apiData === void 0 ? void 0 : apiData.identifier);
                        return [2 /*return*/];
                }
            });
        });
    };
    EmailCodeAuthMethodForm.prototype.submitApi = function () {
        return window.gigya.accounts.auth.otp.email.login;
    };
    EmailCodeAuthMethodForm.prototype.sendEmailOTP = function (identifier, lang) {
        var _this = this;
        window.gigya.accounts.auth.otp.email.sendCode({
            email: identifier,
            lang: lang,
            callback: function (res) { return _this.onCodeSent(res); }
        });
    };
    EmailCodeAuthMethodForm.CONSTS = exports.EmaiLCodeAuthMethodForm_CONSTS;
    return EmailCodeAuthMethodForm;
}(OtpVerificationBaseForm_1.OtpVerificationBaseForm));
exports.EmailCodeAuthMethodForm = EmailCodeAuthMethodForm;
BaseForm_1.BaseForm.addFormToLibrary(EmailCodeAuthMethodForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts":
/*!*******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var BaseLoginForm_1 = __webpack_require__(/*! ./BaseLoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/BaseLoginForm.ts");
var promise_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/promise */ "./src/core/Gigya.Js/app/Utils/promise.ts");
var linkAccountsHelper_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper */ "./src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts");
var LinkAccountsDataProvider_1 = __webpack_require__(/*! ../DataProviders/LinkAccountsDataProvider */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/LinkAccountsDataProvider.ts");
exports.LinkAccountsForm_CONSTS = {
    gigyaClass: 'gigya-link-accounts-form'
};
utils_1.DeepFreeze(exports.LinkAccountsForm_CONSTS);
var LinkAccountsForm = /** @class */ (function (_super) {
    tslib_1.__extends(LinkAccountsForm, _super);
    function LinkAccountsForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    LinkAccountsForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        this.setScreenSetData();
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(LinkAccountsForm.prototype, "dataProvider", {
        get: function () {
            return new LinkAccountsDataProvider_1.LinkAccountsDataProvider(this);
        },
        enumerable: true,
        configurable: true
    });
    LinkAccountsForm.prototype.prePopulateData = function () {
        var populateData = _super.prototype.prePopulateData.call(this);
        if (this.loginId) {
            populateData.loginID = this.loginId;
        }
        return populateData;
    };
    LinkAccountsForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                loginID: true,
                password: true,
                sitePassword: true,
                emailCode: true,
                phoneCode: true
            }
        ]);
    };
    LinkAccountsForm.prototype.getNeededData = function () {
        var neededData = _super.prototype.getNeededData.call(this);
        if (this._screenSet.data.regToken) {
            neededData = window.gigya.utils.object.merge([
                neededData,
                {
                    getConflictingAccount: {
                        params: {
                            regToken: this._screenSet.data.regToken
                        },
                    }
                }
            ]);
        }
        return neededData;
    };
    LinkAccountsForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            this.dataProvider.getPasswordLoginParams(),
        ]);
    };
    LinkAccountsForm.prototype.getLoginProviders = function () {
        return LoginModes_1.LoginModes.link.getLoginProviders(this._screenSet.data.apiData, this._screenSet.params, this._screenSet.data.regToken);
    };
    LinkAccountsForm.prototype.onBeforeSkipped = function () {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var response;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this._screenSet.data.shouldConnectAccounts = false;
                        if (!this._screenSet.hasProviderSessionInfo) return [3 /*break*/, 3];
                        window.gigya.utils.queue.hold('new-account', 'API');
                        return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.notifySocialLogin, {
                                ignoreApiQueue: true,
                                ignoreInterruptions: true,
                                loginMode: LoginModes_1.LoginModes.standard.name,
                                providerSessions: linkAccountsHelper_1.extractProviderSessions((_a = this._screenSet) === null || _a === void 0 ? void 0 : _a.providerSessionInfo),
                                sessionExpiration: this._screenSet.params.sessionExpiration
                            })];
                    case 1:
                        response = _b.sent();
                        return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.finalizeRegistration, {
                                ignoreApiQueue: true,
                                regToken: response['regToken'],
                                allowAccountsLinking: true,
                                sessionExpiration: this._screenSet.params.sessionExpiration
                            })];
                    case 2:
                        _b.sent();
                        this._screenSet.data.finalizeRegistrationNeeded = false;
                        window.gigya.utils.queue.release('new-account', 'API');
                        _b.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    LinkAccountsForm.prototype.onBeforeSubmit = function () {
        this._screenSet.data.shouldConnectAccounts = true;
    };
    LinkAccountsForm.prototype.onSkipped = function () {
        this._screenSet.data.extraEventData.allowAccountsLinking = true;
    };
    LinkAccountsForm.prototype.setScreenSetData = function () {
        this.setOtpIdentifierData({
            email: linkAccountsHelper_1.getLoginId(this.conflictingAccount),
            phone: linkAccountsHelper_1.getObfuscatedPhone(this.conflictingAccount)
        });
        if (this._screenSet.hasProviderSessionInfo) {
            this._screenSet.data.finalizeRegistrationNeeded = false;
        }
    };
    Object.defineProperty(LinkAccountsForm.prototype, "conflictingAccount", {
        get: function () {
            var _a;
            var apiData = this._screenSet.getApiData();
            return (_a = apiData === null || apiData === void 0 ? void 0 : apiData.getConflictingAccount) === null || _a === void 0 ? void 0 : _a.conflictingAccount;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LinkAccountsForm.prototype, "loginId", {
        get: function () {
            return linkAccountsHelper_1.getLoginId(this.conflictingAccount);
        },
        enumerable: true,
        configurable: true
    });
    LinkAccountsForm.prototype.setOtpIdentifierData = function (data) {
        var _a;
        if ((_a = this._screenSet.data) === null || _a === void 0 ? void 0 : _a.authMethodData) {
            this._screenSet.data.authMethodData.identifiers = data;
        }
    };
    LinkAccountsForm.CONSTS = exports.LinkAccountsForm_CONSTS;
    return LinkAccountsForm;
}(BaseLoginForm_1.BaseLoginForm));
exports.LinkAccountsForm = LinkAccountsForm;
BaseForm_1.BaseForm.addFormToLibrary(LinkAccountsForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts":
/*!************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var BaseLoginForm_1 = __webpack_require__(/*! ./BaseLoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/BaseLoginForm.ts");
var BehaviorTracking_1 = __webpack_require__(/*! ../BehaviorTracking */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BehaviorTracking.ts");
exports.LoginForm_CONSTS = {
    gigyaClass: 'gigya-login-form',
};
utils_1.DeepFreeze(exports.LoginForm_CONSTS);
var LoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(LoginForm, _super);
    function LoginForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    LoginForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                loginID: true,
                password: true,
                captchaText: true,
                captchaToken: true,
                identifier: true
            }
        ]);
    };
    LoginForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.behaviorContext = new BehaviorTracking_1.BehaviorTrackingContext();
                        this.behaviorContext.addFields(['loginID', 'password'].map(function (field) { return _this.getField(field); }));
                        return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    LoginForm.prototype._getSubmitApiParams = function (params) {
        params = LoginModes_1.LoginModes.standard.filterParams(params);
        return _super.prototype._getSubmitApiParams.call(this, params);
    };
    LoginForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            {
                loginMode: LoginModes_1.LoginModes.standard.name,
                include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,emails,subscriptions,preferences', this._screenSet.params.include)
            }
        ]);
    };
    LoginForm.CONSTS = exports.LoginForm_CONSTS;
    return LoginForm;
}(BaseLoginForm_1.BaseLoginForm));
exports.LoginForm = LoginForm;
BaseForm_1.BaseForm.addFormToLibrary(LoginForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/MagicLinkAuthMethodForm.ts":
/*!**************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/MagicLinkAuthMethodForm.ts ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var constants_1 = __webpack_require__(/*! ./../../../constants */ "./src/accounts/constants.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var magic_link_1 = __webpack_require__(/*! ../Constants/magic-link */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Constants/magic-link.ts");
exports.MagicLinkMethodForm_CONSTS = {
    gigyaClass: 'gigya-magic-link-auth-method-form',
    authMethod: 'magicLink'
};
utils_1.DeepFreeze(exports.MagicLinkMethodForm_CONSTS);
var MagicLinkAuthMethodForm = /** @class */ (function (_super) {
    tslib_1.__extends(MagicLinkAuthMethodForm, _super);
    function MagicLinkAuthMethodForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MagicLinkAuthMethodForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var apiData;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        apiData = this._screenSet.getApiData();
                        if (apiData === null || apiData === void 0 ? void 0 : apiData.identifier) {
                            this.sendMagicLink(apiData === null || apiData === void 0 ? void 0 : apiData.identifier);
                        }
                        window.gigya.accounts.auth.setPreferredLoginMethod(exports.MagicLinkMethodForm_CONSTS.authMethod, apiData === null || apiData === void 0 ? void 0 : apiData.identifier);
                        return [2 /*return*/];
                }
            });
        });
    };
    MagicLinkAuthMethodForm.prototype.sendMagicLink = function (identifier) {
        var _this = this;
        var _a, _b;
        var requestParam = {
            lang: (_b = (_a = this._screenSet) === null || _a === void 0 ? void 0 : _a.params) === null || _b === void 0 ? void 0 : _b.lang,
            email: identifier,
            callback: function (res) { return _this.displayMagicLinkErrors(res); }
        };
        requestParam['context'] = this.getContextObject();
        window.gigya.accounts.auth.magiclink.email.send(requestParam);
    };
    MagicLinkAuthMethodForm.prototype.displayMagicLinkErrors = function (response) {
        if (Number(response === null || response === void 0 ? void 0 : response.errorCode) !== GSErrors_1.GSErrors.OK) {
            this._screenSet.displayServerErrors(response, this);
        }
    };
    MagicLinkAuthMethodForm.prototype.getContextObject = function () {
        var lang = this._screenSet.params.lang;
        var context = window.gigya.utils.object.merge([
            { lang: lang },
            this._screenSet.params.context,
            window.gigya.utils.URL.getContextParamsFromUrl({ url: document.location.href, unacceptableParams: magic_link_1.MAGIC_LINK_UNACCEPTABLE_PARAMS_REGEX })
        ]);
        return window.gigya.utils.object.addPrefixToProperties(context, constants_1.GIGYA_PARAM_PREFIX);
    };
    MagicLinkAuthMethodForm.CONSTS = exports.MagicLinkMethodForm_CONSTS;
    return MagicLinkAuthMethodForm;
}(BaseForm_1.BaseForm));
exports.MagicLinkAuthMethodForm = MagicLinkAuthMethodForm;
BaseForm_1.BaseForm.addFormToLibrary(MagicLinkAuthMethodForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.NewsletterSignup_CONSTS = {
    gigyaClass: 'gigya-subscribe-with-email-form',
};
utils_1.DeepFreeze(exports.NewsletterSignup_CONSTS);
var NewsletterSignupForm = /** @class */ (function (_super) {
    tslib_1.__extends(NewsletterSignupForm, _super);
    function NewsletterSignupForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.settings = {
            supportConsentData: true
        };
        return _this;
    }
    NewsletterSignupForm.prototype.prePopulateDataFrom = function () {
        return ['getAccountInfo', 'getAccountInfo.profile'];
    };
    NewsletterSignupForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getSchema: {
                    params: {},
                },
                getAccountInfo: {
                    params: {
                        include: 'emails,profile,data,subscriptions,preferences',
                        includeCommunications: 'all',
                    },
                },
            },
        ]);
    };
    NewsletterSignupForm.prototype.performSubmit = function (oParams) {
        var _this = this;
        var regTok = this._screenSet.params.regToken || this._screenSet.data.regToken;
        if (this._screenSet.getApiData().getAccountInfo.status === 'OK' || regTok) {
            oParams = this.setSubscriptions(oParams, regTok);
            _super.prototype.performSubmit.call(this, oParams);
        }
        else {
            window.gigya.accounts.initRegistration({
                isLite: true,
                callback: function (res) {
                    if (res.regToken) {
                        oParams = _this.setSubscriptions(oParams, res.regToken);
                    }
                    _super.prototype.performSubmit.call(_this, oParams);
                },
            });
        }
    };
    NewsletterSignupForm.prototype.setSubscriptions = function (oParams, regToken) {
        if (regToken) {
            oParams['regToken'] = regToken;
            // this should store the regToken for future screens in the same screen set...
            this._screenSet.params.regToken = regToken;
            this._screenSet.data.regToken = regToken;
        }
        return oParams;
    };
    NewsletterSignupForm.prototype.submitApi = function () {
        return window.gigya.accounts.setAccountInfo;
    };
    NewsletterSignupForm.prototype.onAfterSubmit = function (response) {
        if (response.errorCode == GSErrors_1.GSErrors.OK) {
            var formData = this.getFormData(true, false);
            if (formData.email) {
                if (!formData.profile)
                    formData.profile = {};
                formData.profile.email = formData.email;
                delete formData.email;
            }
            this._screenSet.onAccountInfo(formData);
        }
        _super.prototype.onAfterSubmit.call(this, response);
    };
    NewsletterSignupForm.prototype.requiredFields = function () {
        var requiredFields = _super.prototype.requiredFields.call(this);
        requiredFields['email'] = true;
        return requiredFields;
    };
    NewsletterSignupForm.prototype.schemaValidated = function () {
        return true;
    };
    NewsletterSignupForm.CONSTS = exports.NewsletterSignup_CONSTS;
    return NewsletterSignupForm;
}(BaseForm_1.BaseForm));
exports.NewsletterSignupForm = NewsletterSignupForm;
BaseForm_1.BaseForm.addFormToLibrary(NewsletterSignupForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OneAccountSubscriptionForm.ts":
/*!*****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OneAccountSubscriptionForm.ts ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.OneAccountSubscription_CONSTS = {
    gigyaClass: 'gigya-subscribe-one-account-form',
    authorization_details_locations: 'accounts/update',
    authorization_details_type: 'guest:signup',
    authorization_details_grant_type: 'gigya.com/identifier'
};
utils_1.DeepFreeze(exports.OneAccountSubscription_CONSTS);
var OneAccountSubscriptionForm = /** @class */ (function (_super) {
    tslib_1.__extends(OneAccountSubscriptionForm, _super);
    function OneAccountSubscriptionForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.settings = {
            supportConsentData: true
        };
        return _this;
    }
    OneAccountSubscriptionForm.prototype.prePopulateDataFrom = function () {
        return ['getAccountInfo', 'getAccountInfo.profile'];
    };
    OneAccountSubscriptionForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getSchema: {
                    params: {},
                },
                getAccountInfo: {
                    params: {
                        include: 'emails,profile,data,subscriptions,preferences',
                        includeCommunications: 'all',
                    },
                },
            },
        ]);
    };
    OneAccountSubscriptionForm.prototype.performSubmit = function (oParams) {
        var _this = this;
        var regTok = this._screenSet.params.regToken || this._screenSet.data.regToken;
        if (this._screenSet.getApiData().getAccountInfo.status === 'OK' || regTok) {
            oParams = this.setSubscriptions(oParams, regTok);
            _super.prototype.performSubmit.call(this, oParams);
        }
        else {
            var formData = this.getFormData(true, false, true);
            if (formData && formData.profile) {
                window.gigya.accounts.identity.authorize({
                    authorization_details: [
                        {
                            account: {
                                profile: tslib_1.__assign(tslib_1.__assign({}, formData.profile), { email: this.getValueOrNull(formData.email) }),
                                subscriptions: formData.subscriptions ? tslib_1.__assign({}, formData.subscriptions) : undefined,
                                data: formData.data ? tslib_1.__assign({}, formData.data) : undefined,
                            },
                            locations: [
                                exports.OneAccountSubscription_CONSTS.authorization_details_locations
                            ],
                            type: exports.OneAccountSubscription_CONSTS.authorization_details_type
                        }
                    ],
                    grant_type: exports.OneAccountSubscription_CONSTS.authorization_details_grant_type,
                    callback: function (res) {
                        if (res.access_token) {
                            window.gigya._.apiAdapters.web.tokenStore.setBearerToken(res.access_token);
                            oParams = _this.setSubscriptions(oParams, res.access_token);
                        }
                        _super.prototype.performSubmit.call(_this, oParams);
                    },
                });
            }
        }
    };
    OneAccountSubscriptionForm.prototype.setSubscriptions = function (oParams, regToken) {
        if (regToken) {
            oParams['regToken'] = regToken;
            // this should store the regToken for future screens in the same screen set...
            this._screenSet.params.regToken = regToken;
            this._screenSet.data.regToken = regToken;
        }
        return oParams;
    };
    OneAccountSubscriptionForm.prototype.submitApi = function () {
        return window.gigya.accounts.setAccountInfo;
    };
    OneAccountSubscriptionForm.prototype.onAfterSubmit = function (response) {
        if (response.errorCode == GSErrors_1.GSErrors.OK) {
            var formData = this.getFormData(true, false);
            if (formData.email) {
                if (!formData.profile)
                    formData.profile = {};
                formData.profile.email = formData.email;
                formData.profile.firstName = this.getValueOrNull(formData.firstName);
                formData.profile.lastName = this.getValueOrNull(formData.lastName);
                delete formData.email;
                delete formData.firstName;
                delete formData.lastName;
            }
            this._screenSet.onAccountInfo(formData);
        }
        window.gigya._.apiAdapters.web.tokenStore.removeBearerToken();
        _super.prototype.onAfterSubmit.call(this, response);
    };
    OneAccountSubscriptionForm.prototype.requiredFields = function () {
        var requiredFields = _super.prototype.requiredFields.call(this);
        requiredFields['email'] = true;
        requiredFields['firstaName'] = true;
        return requiredFields;
    };
    OneAccountSubscriptionForm.prototype.schemaValidated = function () {
        return true;
    };
    OneAccountSubscriptionForm.prototype.getValueOrNull = function (value) {
        return value !== '' ? value : null;
    };
    OneAccountSubscriptionForm.CONSTS = exports.OneAccountSubscription_CONSTS;
    return OneAccountSubscriptionForm;
}(BaseForm_1.BaseForm));
exports.OneAccountSubscriptionForm = OneAccountSubscriptionForm;
BaseForm_1.BaseForm.addFormToLibrary(OneAccountSubscriptionForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm.ts":
/*!*******************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm.ts ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.OrgRegisterForm_CONSTS = {
    gigyaClass: 'gigya-org-register-form',
};
utils_1.DeepFreeze(exports.OrgRegisterForm_CONSTS);
var OrgRegisterForm = /** @class */ (function (_super) {
    tslib_1.__extends(OrgRegisterForm, _super);
    function OrgRegisterForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.settings = {
            supportConsentData: true
        };
        return _this;
    }
    // merges the "organizationSchema" and "requesterSchema" fields
    // from the getOrganizationSchema response
    // into the "general" schema (getSchema response)
    OrgRegisterForm.prototype.mergeOrgSchemaIntoMainSchema = function (mainSchema, orgSchema) {
        return window.gigya.utils.object.merge([mainSchema, {
                organizationSchema: orgSchema.organizationSchema,
                requesterSchema: orgSchema.requesterSchema
            }], true);
    };
    OrgRegisterForm.prototype.prePopulateDataFrom = function () {
        return ['getOrganizationSchema'];
    };
    OrgRegisterForm.prototype.getNeededData = function () {
        var _this = this;
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getOrganizationSchema: {
                    params: {},
                    responseHandler: function (orgSchema) {
                        var mainSchema = _this._screenSet.getApiData().getSchema;
                        if (mainSchema)
                            _this._screenSet.getApiData().getSchema = _this.mergeOrgSchemaIntoMainSchema(mainSchema, orgSchema);
                        return orgSchema; // return getOrgSchemaResponse
                    },
                },
                getSchema: {
                    params: {},
                    responseHandler: function (mainSchema) {
                        var orgSchema = _this._screenSet.getApiData().getOrganizationSchema;
                        return _this.mergeOrgSchemaIntoMainSchema(mainSchema, orgSchema || {}); // return the merged schema
                    }
                }
            },
        ]);
    };
    OrgRegisterForm.prototype.schemaValidated = function () {
        return true;
    };
    OrgRegisterForm.prototype.submitApi = function () {
        return window.gigya.accounts.b2b.registerOrganization;
    };
    OrgRegisterForm.CONSTS = exports.OrgRegisterForm_CONSTS;
    return OrgRegisterForm;
}(BaseForm_1.BaseForm));
exports.OrgRegisterForm = OrgRegisterForm;
BaseForm_1.BaseForm.addFormToLibrary(OrgRegisterForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var OtpVerificationBaseForm_1 = __webpack_require__(/*! ./OtpVerificationBaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts");
exports.OtpLoginForm_CONSTS = {
    gigyaClass: 'gigya-otp-login-form',
};
utils_1.DeepFreeze(exports.OtpLoginForm_CONSTS);
var OtpLoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpLoginForm, _super);
    function OtpLoginForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OtpLoginForm.prototype.submitApi = function () {
        return window.gigya.accounts.otp.login;
    };
    OtpLoginForm.prototype.performSubmit = function (oParams) {
        this._screenSet.data.finalizeRegistrationNeeded = true;
        return _super.prototype.performSubmit.call(this, oParams);
    };
    OtpLoginForm.CONSTS = exports.OtpLoginForm_CONSTS;
    return OtpLoginForm;
}(OtpVerificationBaseForm_1.OtpVerificationBaseForm));
exports.OtpLoginForm = OtpLoginForm;
BaseForm_1.BaseForm.addFormToLibrary(OtpLoginForm);
// region mobile-login backward compatibility
// for old screen sets that uses 'gigya-mobile-verification-form'
exports.MobileLoginVerificationForm_CONSTS = {
    gigyaClass: 'gigya-mobile-verification-form',
};
utils_1.DeepFreeze(exports.MobileLoginVerificationForm_CONSTS);
var MobileLoginVerificationForm = /** @class */ (function (_super) {
    tslib_1.__extends(MobileLoginVerificationForm, _super);
    function MobileLoginVerificationForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MobileLoginVerificationForm.CONSTS = exports.MobileLoginVerificationForm_CONSTS;
    return MobileLoginVerificationForm;
}(OtpLoginForm));
exports.MobileLoginVerificationForm = MobileLoginVerificationForm;
BaseForm_1.BaseForm.addFormToLibrary(MobileLoginVerificationForm);
// endregion


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.OtpSendCodeForm_CONSTS = {
    gigyaClass: 'gigya-otp-send-code-form',
};
utils_1.DeepFreeze(exports.OtpSendCodeForm_CONSTS);
var OtpSendCodeForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpSendCodeForm, _super);
    function OtpSendCodeForm() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.settings = {
            supportConsentData: true
        };
        return _this;
    }
    OtpSendCodeForm.prototype.submitApi = function () {
        return window.gigya.accounts.otp.sendCode;
    };
    OtpSendCodeForm.prototype.prePopulateDataFrom = function () {
        return ['getAccountInfo'];
    };
    OtpSendCodeForm.prototype.onAfterSubmit = function (response) {
        this._screenSet.data.otpData.vToken = response['vToken'];
        _super.prototype.onAfterSubmit.call(this, response);
    };
    OtpSendCodeForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                phoneNumber: true,
                email: true
            },
        ]);
    };
    OtpSendCodeForm.prototype.performSubmit = function (oParams) {
        this._saveSpecialFieldsInCache();
        _super.prototype.performSubmit.call(this, oParams);
    };
    OtpSendCodeForm.prototype._saveSpecialFieldsInCache = function () {
        var _this = this;
        var formData = this.getFormData(true, true, true);
        this._screenSet.getApiData().getAccountInfo = this._screenSet.getApiData().getAccountInfo || {};
        var specialFields = this.specialFields();
        Object.keys(specialFields)
            .filter(function (specialField) { return Boolean(specialFields[specialField]); })
            .forEach(function (specialField) {
            var _a;
            __webpack_provided_Object_dot_assign(_this._screenSet.getApiData().getAccountInfo, (_a = {}, _a[specialField] = formData[specialField], _a));
        });
    };
    OtpSendCodeForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            { lang: this._screenSet.params.communicationLang }
        ]);
    };
    OtpSendCodeForm.prototype.schemaValidated = function () {
        return true;
    };
    OtpSendCodeForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getSchema: {
                    params: {},
                }
            },
        ]);
    };
    OtpSendCodeForm.CONSTS = exports.OtpSendCodeForm_CONSTS;
    return OtpSendCodeForm;
}(BaseForm_1.BaseForm));
exports.OtpSendCodeForm = OtpSendCodeForm;
BaseForm_1.BaseForm.addFormToLibrary(OtpSendCodeForm);
// region mobile-login backward compatibility
// for old screen sets that uses 'gigya-mobile-verification-form'
exports.MobileLoginForm_CONSTS = {
    gigyaClass: 'gigya-mobile-login-form',
};
utils_1.DeepFreeze(exports.MobileLoginForm_CONSTS);
var MobileLoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(MobileLoginForm, _super);
    function MobileLoginForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    MobileLoginForm.CONSTS = exports.MobileLoginForm_CONSTS;
    return MobileLoginForm;
}(OtpSendCodeForm));
exports.MobileLoginForm = MobileLoginForm;
BaseForm_1.BaseForm.addFormToLibrary(MobileLoginForm);
// endregion

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var OtpVerificationBaseForm_1 = __webpack_require__(/*! ./OtpVerificationBaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts");
exports.OtpUpdateForm_CONSTS = {
    gigyaClass: 'gigya-otp-update-form',
};
utils_1.DeepFreeze(exports.OtpUpdateForm_CONSTS);
var OtpUpdateForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpUpdateForm, _super);
    function OtpUpdateForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OtpUpdateForm.prototype.submitApi = function () {
        return window.gigya.accounts.otp.update;
    };
    OtpUpdateForm.prototype.performSubmit = function (oParams) {
        this._screenSet.data.finalizeRegistrationNeeded = true;
        return _super.prototype.performSubmit.call(this, oParams);
    };
    OtpUpdateForm.CONSTS = exports.OtpUpdateForm_CONSTS;
    return OtpUpdateForm;
}(OtpVerificationBaseForm_1.OtpVerificationBaseForm));
exports.OtpUpdateForm = OtpUpdateForm;
BaseForm_1.BaseForm.addFormToLibrary(OtpUpdateForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts":
/*!**************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var OtpVerificationBaseForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpVerificationBaseForm, _super);
    function OtpVerificationBaseForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OtpVerificationBaseForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                code: true
            },
        ]);
    };
    OtpVerificationBaseForm.prototype.getErrorKey = function (response) {
        var errorCode = Number(response.errorCode);
        if (errorCode === GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE && response.errorDetails) {
            if (utils_1.endsWith(response.errorDetails, 'Token has been revoked')) {
                return 'otp_code_expired';
            }
            if (utils_1.endsWith(response.errorDetails, 'phoneNumber already exists')) {
                return 'phone_number_exists';
            }
            if (utils_1.endsWith(response.errorDetails, 'code')) {
                return 'please_enter_a_valid_code';
            }
        }
        return _super.prototype.getErrorKey.call(this, response);
    };
    OtpVerificationBaseForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            { vToken: this._screenSet.data.otpData.vToken }
        ]);
    };
    OtpVerificationBaseForm.prototype.onCodeSent = function (response) {
        if (Number(response === null || response === void 0 ? void 0 : response.errorCode) !== GSErrors_1.GSErrors.OK) {
            this._screenSet.displayServerErrors(response, this);
            return;
        }
        if (response === null || response === void 0 ? void 0 : response.vToken) {
            this._screenSet.data.otpData.vToken = response['vToken'];
            return;
        }
        this._screenSet.displayServerErrors({
            errorCode: GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE
        }, this);
    };
    return OtpVerificationBaseForm;
}(BaseForm_1.BaseForm));
exports.OtpVerificationBaseForm = OtpVerificationBaseForm;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerifyForm.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerifyForm.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var OtpVerificationBaseForm_1 = __webpack_require__(/*! ./OtpVerificationBaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerificationBaseForm.ts");
exports.OtpVerifyForm_CONSTS = {
    gigyaClass: 'gigya-otp-verify-form',
};
utils_1.DeepFreeze(exports.OtpVerifyForm_CONSTS);
var OtpVerifyForm = /** @class */ (function (_super) {
    tslib_1.__extends(OtpVerifyForm, _super);
    function OtpVerifyForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    OtpVerifyForm.prototype.submitApi = function () {
        return window.gigya.accounts.auth.otp.authenticate;
    };
    OtpVerifyForm.prototype.onAfterSubmit = function (response) {
        this._screenSet.data.otpData.accessToken = response['access_token'];
        _super.prototype.onAfterSubmit.call(this, response);
    };
    OtpVerifyForm.CONSTS = exports.OtpVerifyForm_CONSTS;
    return OtpVerifyForm;
}(OtpVerificationBaseForm_1.OtpVerificationBaseForm));
exports.OtpVerifyForm = OtpVerifyForm;
BaseForm_1.BaseForm.addFormToLibrary(OtpVerifyForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm.ts":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm.ts ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var LoginForm_1 = __webpack_require__(/*! ./LoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.PasswordAuthMethodForm_CONSTS = {
    gigyaClass: 'gigya-password-auth-method-form',
    authMethod: 'password'
};
utils_1.DeepFreeze(exports.PasswordAuthMethodForm_CONSTS);
var PasswordAuthMethodForm = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordAuthMethodForm, _super);
    function PasswordAuthMethodForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordAuthMethodForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var apiData;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        apiData = this._screenSet.getApiData();
                        window.gigya.accounts.auth.setPreferredLoginMethod(exports.PasswordAuthMethodForm_CONSTS.authMethod, apiData === null || apiData === void 0 ? void 0 : apiData.identifier);
                        return [2 /*return*/];
                }
            });
        });
    };
    PasswordAuthMethodForm.prototype.submitApi = function () {
        var _this = this;
        return function (params, formData, options, defaultParams) {
            var _a, _b, _c, _d;
            var apiData = _this._screenSet.getApiData();
            if ((_b = (_a = _this._screenSet) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.aToken) {
                formData = window.gigya.utils.object.merge([formData, {
                        aToken: (_d = (_c = _this._screenSet) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.aToken,
                        password: formData.password
                    }]);
            }
            else {
                formData = window.gigya.utils.object.merge([formData, {
                        loginID: (apiData === null || apiData === void 0 ? void 0 : apiData.loginID) || (apiData === null || apiData === void 0 ? void 0 : apiData.identifier),
                        password: formData.password
                    }]);
            }
            window.gigya.accounts.login(params, formData, options, defaultParams);
        };
    };
    PasswordAuthMethodForm.CONSTS = exports.PasswordAuthMethodForm_CONSTS;
    return PasswordAuthMethodForm;
}(LoginForm_1.LoginForm));
exports.PasswordAuthMethodForm = PasswordAuthMethodForm;
BaseForm_1.BaseForm.addFormToLibrary(PasswordAuthMethodForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessForm.ts":
/*!*******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessForm.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var PasswordlessForm = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordlessForm, _super);
    function PasswordlessForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordlessForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                loginID: true,
                identifier: true
            }
        ]);
    };
    PasswordlessForm.prototype.submitApi = function () {
        var _this = this;
        return function (params, formData, options, defaultParams) {
            var _a, _b;
            _this.saveInApiData({
                identifier: (formData === null || formData === void 0 ? void 0 : formData.loginID) || (formData === null || formData === void 0 ? void 0 : formData.identifier),
                loginID: formData === null || formData === void 0 ? void 0 : formData.loginID,
            });
            window.gigya.accounts.auth.getMethods({
                aToken: (_b = (_a = _this._screenSet) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.aToken,
                identifier: (formData === null || formData === void 0 ? void 0 : formData.loginID) || (formData === null || formData === void 0 ? void 0 : formData.identifier),
                callback: options.callback
            });
        };
    };
    PasswordlessForm.prototype.getErrorKey = function (response) {
        return response.errorCode === GSErrors_1.GSErrors.NOT_FOUND
            ? 'invalid_login_identifier'
            : _super.prototype.getErrorKey.call(this, response);
    };
    PasswordlessForm.prototype.onAfterSubmit = function (response) {
        this.saveInApiData({ authMethods: response.methods });
        _super.prototype.onAfterSubmit.call(this, response);
    };
    PasswordlessForm.prototype.saveInApiData = function (obj) {
        var apiData = this._screenSet.getApiData() || {};
        __webpack_provided_Object_dot_assign(apiData, obj);
    };
    return PasswordlessForm;
}(BaseForm_1.BaseForm));
exports.PasswordlessForm = PasswordlessForm;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm.ts":
/*!************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm.ts ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var PasswordlessForm_1 = __webpack_require__(/*! ./PasswordlessForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessForm.ts");
exports.PasswordlessLoginForm_CONSTS = {
    gigyaClass: 'gigya-passwordless-login-form',
};
utils_1.DeepFreeze(exports.PasswordlessLoginForm_CONSTS);
var PasswordlessLoginForm = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordlessLoginForm, _super);
    function PasswordlessLoginForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordlessLoginForm.CONSTS = exports.PasswordlessLoginForm_CONSTS;
    return PasswordlessLoginForm;
}(PasswordlessForm_1.PasswordlessForm));
exports.PasswordlessLoginForm = PasswordlessLoginForm;
BaseForm_1.BaseForm.addFormToLibrary(PasswordlessLoginForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessRegisterForm.ts":
/*!***************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessRegisterForm.ts ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var PasswordlessForm_1 = __webpack_require__(/*! ./PasswordlessForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessForm.ts");
exports.PasswordlessRegisterForm_CONSTS = {
    gigyaClass: 'gigya-passwordless-register-form',
};
utils_1.DeepFreeze(exports.PasswordlessRegisterForm_CONSTS);
var PasswordlessRegisterForm = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordlessRegisterForm, _super);
    function PasswordlessRegisterForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasswordlessRegisterForm.CONSTS = exports.PasswordlessRegisterForm_CONSTS;
    return PasswordlessRegisterForm;
}(PasswordlessForm_1.PasswordlessForm));
exports.PasswordlessRegisterForm = PasswordlessRegisterForm;
BaseForm_1.BaseForm.addFormToLibrary(PasswordlessRegisterForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts":
/*!**************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var GSErrors = window.gigya.GSErrors;
exports.ProfileForm_CONSTS = {
    gigyaClass: 'gigya-profile-form',
    specialFields: {
        username: true,
        oldPassword: true,
        password: true,
        newPassword: true,
        passwordRetype: true,
        secretQuestion: true,
        secretAnswer: true,
        addLoginEmails: true,
        removeLoginEmails: true,
        phoneNumber: true
    },
};
utils_1.DeepFreeze(exports.ProfileForm_CONSTS);
var ProfileForm = /** @class */ (function (_super) {
    tslib_1.__extends(ProfileForm, _super);
    function ProfileForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.requiredProfileFields = ['samlData', 'locale'];
        _this.settings = {
            supportConsentData: true
        };
        return _this;
    }
    ProfileForm.prototype.prePopulateDataFrom = function () {
        if (window.gigya.utils.toggles.isOn('mappedFieldsNoConflicts')) {
            return ['getAccountInfo', 'getAccountInfo.profile', 'getAccountInfo.loginIDs'];
        }
        return ['getAccountInfo', 'getAccountInfo.profile', 'getAccountInfo.subscriptions', 'getAccountInfo.loginIDs', 'getAccountInfo.preferences'];
    };
    ProfileForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getSchema: {
                    params: {},
                },
                getAccountInfo: {
                    params: {
                        include: 'loginIDs,emails,profile,data,subscriptions,preferences',
                        includeCommunications: 'all'
                    },
                },
                getProviders: {
                    params: {
                        sections: 'activeProviders',
                    },
                },
            },
        ]);
    };
    ProfileForm.prototype.schemaValidated = function () {
        return true;
    };
    ProfileForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([_super.prototype.specialFields.call(this), exports.ProfileForm_CONSTS.specialFields]);
    };
    ProfileForm.prototype.getLoginProviders = function () {
        return LoginModes_1.LoginModes.reAuth.getLoginProviders(this._screenSet.data.apiData, this._screenSet.params, this._screenSet.data.regToken);
    };
    ProfileForm.prototype.submitApi = function () {
        return window.gigya.accounts.setAccountInfo;
    };
    ProfileForm.prototype.defaultSubmitParams = function () {
        var _a;
        var conflictHandling = this._screenSet.params.conflictHandling
            || LoginModes_1.ConflictHandling[this._screenSet.data.regToken ? LoginModes_1.ConflictHandling.saveProfileAndFail : LoginModes_1.ConflictHandling.fail];
        var lang = (_a = this._screenSet.params.lang) !== null && _a !== void 0 ? _a : null;
        if (window.gigya.utils.toggles.isOn('useFullLangCode')) {
            if (lang !== this._screenSet.getLangForScreenSet()) {
                window.gigya.logger.report('useFullLangCode usage with different language', {
                    paramLang: lang,
                    screenSetLang: this._screenSet.getLangForScreenSet()
                });
            }
            lang = this._screenSet.getLangForScreenSet();
        }
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            {
                conflictHandling: conflictHandling,
                lang: lang
            },
        ]);
    };
    ProfileForm.prototype.getErrorKey = function (response) {
        var errorCode = Number(response.errorCode);
        if (errorCode === GSErrors.INVALID_PARAMETER_VALUE && response.validationErrors) {
            var isSubscriptionError = response.validationErrors.find(function (error) { return error.fieldName.startsWith('communication'); });
            if (isSubscriptionError) {
                return 'subscription_missing_dependson_fields';
            }
        }
        return _super.prototype.getErrorKey.call(this, response);
    };
    ProfileForm.prototype.isPasswordSchemaValidated = function () {
        return false;
    };
    ProfileForm.prototype.getExtraProfileFields = function (missingOnly) {
        var missingFields = _super.prototype.getExtraProfileFields.call(this, missingOnly);
        this.requiredProfileFields.forEach(function (field) {
            if (window.gigya.utils.array.indexOf(missingFields, field) === -1) {
                missingFields.push(field);
            }
        });
        return missingFields;
    };
    ProfileForm.CONSTS = exports.ProfileForm_CONSTS;
    return ProfileForm;
}(BaseForm_1.BaseForm));
exports.ProfileForm = ProfileForm;
BaseForm_1.BaseForm.addFormToLibrary(ProfileForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProgressionForm.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProgressionForm.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var RegisterForm_1 = __webpack_require__(/*! ./RegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts");
exports.ProgressionForm_CONSTS = {
    gigyaClass: 'gigya-lite-account-progression-form',
};
utils_1.DeepFreeze(exports.ProgressionForm_CONSTS);
var ProgressionForm = /** @class */ (function (_super) {
    tslib_1.__extends(ProgressionForm, _super);
    function ProgressionForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.initApiName = "initProgression";
        return _this;
    }
    ProgressionForm.prototype.defaultSubmitParams = function () {
        var _a;
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            { email: (_a = this._screenSet.getApiData().initProgression) === null || _a === void 0 ? void 0 : _a.email }
        ]);
    };
    ProgressionForm.CONSTS = exports.ProgressionForm_CONSTS;
    return ProgressionForm;
}(RegisterForm_1.RegisterForm));
exports.ProgressionForm = ProgressionForm;
BaseForm_1.BaseForm.addFormToLibrary(ProgressionForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm.ts":
/*!*********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm.ts ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.PushAuthMethodForm_CONSTS = {
    gigyaClass: 'gigya-push-auth-method-form',
    authMethod: 'push'
};
utils_1.DeepFreeze(exports.PushAuthMethodForm_CONSTS);
var PushAuthMethodForm = /** @class */ (function (_super) {
    tslib_1.__extends(PushAuthMethodForm, _super);
    function PushAuthMethodForm() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._pollingStartTime = 0;
        _this._pollingLimit = _this._screenSet.params['isVerifiedPollingLimit'] || 1000 * 60 * 2; // default 2 min
        _this._pollingInterval = _this._screenSet.params['isVerifiedPollingInterval'] || 1000 * 3; // default 3 sec
        return _this;
    }
    PushAuthMethodForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var apiData;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        this.startPushVerificationFlow();
                        apiData = this._screenSet.getApiData();
                        window.gigya.accounts.auth.setPreferredLoginMethod(exports.PushAuthMethodForm_CONSTS.authMethod, apiData === null || apiData === void 0 ? void 0 : apiData.identifier);
                        return [2 /*return*/];
                }
            });
        });
    };
    PushAuthMethodForm.prototype.unlinkInstanceElement = function () {
        this.stopPolling();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    PushAuthMethodForm.prototype.startPushVerificationFlow = function () {
        var _this = this;
        var apiData = this._screenSet.getApiData();
        window.gigya.accounts.auth.push.sendVerification({
            identifier: apiData === null || apiData === void 0 ? void 0 : apiData.identifier,
            callback: function (res) { return _this.onSendVerificationResponse(res); }
        });
        this.startPolling();
    };
    PushAuthMethodForm.prototype.submitApi = function () {
        var _this = this;
        return function (params, data, options, defaultParams) {
            window.gigya.accounts.auth.login({
                accessToken: _this._accessToken,
                callback: options.callback
            });
        };
    };
    PushAuthMethodForm.prototype.stopPolling = function () {
        this._pollingStartTime = 0;
        clearTimeout(this._timeoutId);
    };
    PushAuthMethodForm.prototype.onSendVerificationResponse = function (res) {
        if (res.errorCode == 0 && res.vToken) {
            this.dataStore.pushData.vToken = res.vToken;
        }
        else {
            window.gigya.logger.error('gigya.accounts.auth.push.sendVerification failed', { res: res });
        }
    };
    PushAuthMethodForm.prototype.checkIsVerified = function () {
        var _this = this;
        // vToken may change in the data-store by the form's controls ("resend" button)
        var vToken = this.dataStore.pushData.vToken;
        if (vToken) {
            window.gigya.accounts.auth.push.isVerified({ vToken: vToken, callback: function (res) { return _this.onIsVerifiedResponse(res); } });
        }
        else {
            this.onIsVerifiedResponse({ errorCode: GSErrors_1.GSErrors.OK });
        }
    };
    ;
    PushAuthMethodForm.prototype.onPushVerified = function (accessToken) {
        this._accessToken = accessToken;
        this.stopPolling();
        this.submit(); // automatically submits the form so it'll send the accounts.auth.login request
    };
    PushAuthMethodForm.prototype.onIsVerifiedResponse = function (res) {
        var _this = this;
        // success
        if (res.accessToken)
            return this.onPushVerified(res.accessToken);
        // error
        if (res.errorCode != GSErrors_1.GSErrors.OK)
            window.gigya.logger.error('gigya.accounts.auth.push.isVerified failed', { res: res });
        // keep polling
        this._timeoutId = window.setTimeout(function () {
            if (_this.shouldContinuePolling())
                _this.checkIsVerified();
        }, this._pollingInterval);
    };
    PushAuthMethodForm.prototype.shouldContinuePolling = function () {
        var now = window.gigya.utils.date.now();
        return (now - this._pollingStartTime) < this._pollingLimit; // polling limit not reached
    };
    PushAuthMethodForm.prototype.startPolling = function () {
        this._pollingStartTime = window.gigya.utils.date.now();
        this.checkIsVerified();
    };
    PushAuthMethodForm.CONSTS = exports.PushAuthMethodForm_CONSTS;
    return PushAuthMethodForm;
}(BaseForm_1.BaseForm));
exports.PushAuthMethodForm = PushAuthMethodForm;
BaseForm_1.BaseForm.addFormToLibrary(PushAuthMethodForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
exports.ReauthenticationForm_CONSTS = {
    gigyaClass: 'gigya-reauthentication-form',
};
utils_1.DeepFreeze(exports.ReauthenticationForm_CONSTS);
var ReauthenticationForm = /** @class */ (function (_super) {
    tslib_1.__extends(ReauthenticationForm, _super);
    function ReauthenticationForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.settings = {
            supportConsentData: true
        };
        return _this;
    }
    ReauthenticationForm.prototype.prePopulateData = function () {
        var populateData = _super.prototype.prePopulateData.call(this);
        var apiData = this._screenSet.getApiData();
        var loginIDs = apiData && apiData.getAccountInfo && apiData.getAccountInfo.loginIDs;
        if (loginIDs)
            populateData.loginID = loginIDs.username || (loginIDs.emails && loginIDs.emails[0]);
        return populateData;
    };
    ReauthenticationForm.prototype.submitApi = function () {
        return window.gigya.accounts.login;
    };
    ReauthenticationForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getSchema: {
                    params: {},
                },
                getAccountInfo: {
                    params: {
                        include: 'identities-active,loginIDs',
                    },
                    cache: false,
                },
            },
        ]);
    };
    ReauthenticationForm.prototype.getLoginProviders = function () {
        return LoginModes_1.LoginModes.reAuth.getLoginProviders(this._screenSet.data.apiData, this._screenSet.params, this._screenSet.data.regToken);
    };
    ReauthenticationForm.prototype.defaultSubmitParams = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            {
                loginMode: LoginModes_1.LoginModes.reAuth.name,
                loginID: 'no-one',
            },
        ]);
    };
    ReauthenticationForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                password: true,
                captchaText: true,
                captchaToken: true,
                loginID: true,
            },
        ]);
    };
    ReauthenticationForm.CONSTS = exports.ReauthenticationForm_CONSTS;
    return ReauthenticationForm;
}(BaseForm_1.BaseForm));
exports.ReauthenticationForm = ReauthenticationForm;
BaseForm_1.BaseForm.addFormToLibrary(ReauthenticationForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.RegisterForm_CONSTS = {
    gigyaClass: 'gigya-register-form',
};
utils_1.DeepFreeze(exports.RegisterForm_CONSTS);
var RegisterForm = /** @class */ (function (_super) {
    tslib_1.__extends(RegisterForm, _super);
    function RegisterForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.initApiName = 'initRegistration';
        _this.settings = {
            supportConsentData: true
        };
        return _this;
    }
    RegisterForm.prototype.requiredFields = function () {
        var requiredFields = _super.prototype.requiredFields.call(this);
        requiredFields = window.gigya.utils.object.merge([requiredFields, this.specialFields()]);
        requiredFields['username'] = requiredFields['email'] = true;
        return requiredFields;
    };
    RegisterForm.prototype.prePopulateDataFrom = function () {
        return ['getAccountInfo', 'getAccountInfo.profile', 'getAccountInfo.loginIDs'];
    };
    RegisterForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        // In the case when the user returns to the registration page without completing the "Complete registration" flow,
                        // the "Complete registration" flow still active and because of it "onAfterSubmit" event does not fire.
                        // Since we don't interesting in "Complete registration" flow anymore we need to cancel it, to get "onAfterSubmit" event
                        if (this.isFinalizeRegistrationFlowActive()) {
                            this.abortFinalizeRegistrationFlow();
                        }
                        return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    RegisterForm.prototype.getNeededData = function () {
        var _a;
        var _this = this;
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            (_a = {},
                _a[this.initApiName] = {
                    cache: false,
                    params: {},
                    responseHandler: function (res) {
                        window.gigya.logger.info("clearing account info from screenset cache");
                        var apiData = _this._screenSet.getApiData();
                        delete apiData.getAccountInfo;
                        return res; // pass result on to the screenSet
                    },
                },
                _a),
            {
                getSchema: {
                    params: {},
                },
            }
        ]);
    };
    RegisterForm.prototype.schemaValidated = function () {
        return true;
    };
    RegisterForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                username: true,
                email: true,
                password: true,
                passwordRetype: true,
                secretQuestion: true,
                secretAnswer: true,
                captchaText: true,
                captchaToken: true,
                regSource: true,
                siteUID: true,
            },
        ]);
    };
    RegisterForm.prototype.performSubmit = function (oParams) {
        if (!this._screenSet.doesScreenHaveForms(this.successScreen)) {
            oParams.finalizeRegistration = true;
        }
        else {
            this._screenSet.data.finalizeRegistrationNeeded = true;
        }
        return _super.prototype.performSubmit.call(this, oParams);
    };
    RegisterForm.prototype.submitApi = function () {
        return window.gigya.accounts.register;
    };
    RegisterForm.prototype.queryStringToSubmitParamMap = function () {
        return {
            gig_email: 'email',
        };
    };
    RegisterForm.prototype.defaultSubmitParams = function () {
        // initial accounts.register submit params
        var registerFormSubmitParams = {
            include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,emails,loginIDs,subscriptions,preferences', this._screenSet.params.include),
        };
        // use full lang-code is opted-in
        if (window.gigya.utils.toggles.isOn('useFullLangCodeInRegistration') || window.gigya.utils.toggles.isOn('useFullLangCode')) {
            var screenSetLang = this._screenSet.getLangForScreenSet();
            if (this._screenSet.params.lang !== screenSetLang) {
                window.gigya.logger.report('useFullLangCode usage with different language', {
                    paramLang: this._screenSet.params.lang,
                    screenSetLang: screenSetLang
                });
            }
            registerFormSubmitParams.lang = screenSetLang;
        }
        return window.gigya.utils.object.merge([
            _super.prototype.defaultSubmitParams.call(this),
            registerFormSubmitParams
        ]);
    };
    RegisterForm.prototype.isFinalizeRegistrationFlowActive = function () {
        var _a, _b;
        return (_b = (_a = this._screenSet) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.finalizeRegistrationNeeded;
    };
    RegisterForm.prototype.abortFinalizeRegistrationFlow = function () {
        this._screenSet.data.finalizeRegistrationNeeded = false;
    };
    RegisterForm.CONSTS = exports.RegisterForm_CONSTS;
    return RegisterForm;
}(BaseForm_1.BaseForm));
exports.RegisterForm = RegisterForm;
BaseForm_1.BaseForm.addFormToLibrary(RegisterForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm.ts":
/*!*****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm.ts ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.ResendVerificationCodeForm_CONSTS = {
    gigyaClass: 'gigya-resend-verification-code-form',
};
utils_1.DeepFreeze(exports.ResendVerificationCodeForm_CONSTS);
var ResendVerificationCodeForm = /** @class */ (function (_super) {
    tslib_1.__extends(ResendVerificationCodeForm, _super);
    function ResendVerificationCodeForm(screen, elForm, gigyaClass) {
        return _super.call(this, screen, elForm, gigyaClass) || this;
    }
    ResendVerificationCodeForm.prototype.getNeededData = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.getNeededData.call(this),
            {
                getAccountInfo: {
                    params: {
                        include: 'emails',
                    },
                },
            },
        ]);
    };
    ResendVerificationCodeForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                email: true,
            },
        ]);
    };
    ResendVerificationCodeForm.prototype.submitApi = function () {
        return window.gigya.accounts.resendVerificationCode;
    };
    ResendVerificationCodeForm.CONSTS = exports.ResendVerificationCodeForm_CONSTS;
    return ResendVerificationCodeForm;
}(BaseForm_1.BaseForm));
exports.ResendVerificationCodeForm = ResendVerificationCodeForm;
BaseForm_1.BaseForm.addFormToLibrary(ResendVerificationCodeForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm.ts":
/*!********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var arrayUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/array */ "./src/core/Gigya.Js/app/Utils/array.ts");
exports.ResetPasswordForm_CONSTS = {
    gigyaClass: 'gigya-reset-password-form'
};
utils_1.DeepFreeze(exports.ResetPasswordForm_CONSTS);
var ResetPasswordForm = /** @class */ (function (_super) {
    tslib_1.__extends(ResetPasswordForm, _super);
    function ResetPasswordForm(screen, elForm, gigyaClass) {
        var _this = _super.call(this, screen, elForm, gigyaClass) || this;
        _this.filters.push({
            filterOutWidgetsToSend: function (formData) {
                if (formData['securityFields'] && formData['securityFields']['passwordRetype'])
                    delete formData['securityFields']['passwordRetype'];
                return formData;
            }
        });
        return _this;
    }
    ResetPasswordForm.prototype.specialFields = function () {
        return window.gigya.utils.object.merge([
            _super.prototype.specialFields.call(this),
            {
                loginID: true,
                newPassword: true,
                email: true,
                secretAnswer: true
            }
        ]);
    };
    ResetPasswordForm.prototype.getErrorKey = function (response) {
        if (response.errorCode === GSErrors_1.GSErrors.INVALID_TOKEN) {
            return 'invalid_password_reset_token';
        }
        return _super.prototype.getErrorKey.call(this, response);
    };
    ResetPasswordForm.prototype.schemaValidated = function () {
        // Necessary to show error message for password complexity.
        // PasswordInputs.ts will not generate password complexity error callback if schemaValidated returns false.
        return !!this.getField('newPassword');
    };
    ResetPasswordForm.prototype.profileObjectName = function () {
        return 'securityFields';
    };
    ResetPasswordForm.prototype.submitApi = function () {
        return window.gigya.accounts.resetPassword;
    };
    ResetPasswordForm.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        this._screenSet.data.finalizeRegistrationNeeded = false;
                        return [2 /*return*/];
                }
            });
        });
    };
    ResetPasswordForm.prototype.prePopulateData = function () {
        var populateData = _super.prototype.prePopulateData.call(this);
        populateData.loginID = this._screenSet.getConflictingAccount() ? this.getConflictingAccountLoginId() : this.getLoginId();
        return populateData;
    };
    ResetPasswordForm.prototype.defaultSubmitParams = function () {
        var params = _super.prototype.defaultSubmitParams.call(this);
        // Check for password field in form. Return default submit params if password field is not present in form.
        // In the future, we may divide into separate forms.
        if (!this.getField('newPassword')) {
            return params;
        }
        // Password field is in form, so we care about the password reset token.
        if (this.passwordResetToken) {
            params.passwordResetToken = this.passwordResetToken;
        }
        return params;
    };
    ResetPasswordForm.prototype.getLoginId = function () {
        var _a, _b, _c;
        var loginIDs = this._screenSet.getLoginIds();
        if (!loginIDs) {
            return null;
        }
        var profileEmail = (_a = this._screenSet.getProfile()) === null || _a === void 0 ? void 0 : _a.email;
        return (_c = (_b = loginIDs.username) !== null && _b !== void 0 ? _b : arrayUtils.first(loginIDs.emails, function (e) { return e === profileEmail; })) !== null && _c !== void 0 ? _c : loginIDs.emails[0];
    };
    ResetPasswordForm.prototype.getConflictingAccountLoginId = function () {
        var _a;
        var conflictingAccount = this._screenSet.getConflictingAccount();
        return conflictingAccount.loginID || ((_a = conflictingAccount.emails) === null || _a === void 0 ? void 0 : _a[0]);
    };
    Object.defineProperty(ResetPasswordForm.prototype, "passwordResetToken", {
        get: function () {
            var _a, _b, _c, _d, _e;
            return ((_b = (_a = this._screenSet) === null || _a === void 0 ? void 0 : _a.params) === null || _b === void 0 ? void 0 : _b.passwordResetToken) || ((_e = (_d = (_c = this._screenSet) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.otpData) === null || _e === void 0 ? void 0 : _e.accessToken) ||
                window.gigya.utils.URL.getParamValueFromURL('pwrt', window.location.search, undefined);
        },
        enumerable: true,
        configurable: true
    });
    ResetPasswordForm.CONSTS = exports.ResetPasswordForm_CONSTS;
    return ResetPasswordForm;
}(BaseForm_1.BaseForm));
exports.ResetPasswordForm = ResetPasswordForm;
BaseForm_1.BaseForm.addFormToLibrary(ResetPasswordForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/TfaForm.ts":
/*!**********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/TfaForm.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var CustomForm_1 = __webpack_require__(/*! ./CustomForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/CustomForm.ts");
exports.TfaForm_CONSTS = {
    gigyaClass: 'gigya-tfa-form',
};
var TfaForm = /** @class */ (function (_super) {
    tslib_1.__extends(TfaForm, _super);
    function TfaForm() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TfaForm.CONSTS = exports.TfaForm_CONSTS;
    return TfaForm;
}(CustomForm_1.CustomForm));
exports.TfaForm = TfaForm;
BaseForm_1.BaseForm.addFormToLibrary(TfaForm);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/index.ts":
/*!********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/index.ts ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
exports.LinkAccountsForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts");
exports.LoginForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts");
exports.PasswordlessLoginForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm.ts");
exports.PasswordlessRegisterForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessRegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessRegisterForm.ts");
exports.AuthMethodsForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm.ts");
exports.PasswordAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm.ts");
exports.PushAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm.ts");
exports.MagicLinkAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/MagicLinkAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/MagicLinkAuthMethodForm.ts");
exports.EmailCodeAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/EmailCodeAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/EmailCodeAuthMethodForm.ts");
exports.NewsletterSignupForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts");
exports.ProfileForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts");
exports.ReAuthenticationForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm.ts");
exports.RegisterForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts");
exports.ProgressionForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProgressionForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProgressionForm.ts");
exports.ResendVerificationCodeForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm.ts");
exports.ResetPasswordForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm.ts");
exports.OrgRegisterForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm.ts");
exports.OtpSendCodeForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm.ts");
exports.OtpUpdateForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm.ts");
exports.OtpVerifyForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerifyForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerifyForm.ts");
exports.OtpLoginForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm.ts");
exports.DeviceCodeForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/DeviceCodeForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/DeviceCodeForm.ts");
exports.CustomForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/CustomForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/CustomForm.ts");
exports.TfaForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/TfaForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/TfaForm.ts");
exports.OneAccountSubscriptionForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OneAccountSubscriptionForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OneAccountSubscriptionForm.ts");


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/GroupVariantProvider.ts":
/*!*****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/GroupVariantProvider.ts ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! ./utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var _isEmpty = __webpack_require__(/*! lodash.isempty */ "../node_modules/lodash.isempty/index.js");
var SiteData_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/Services/SiteData */ "./src/core/Gigya.Js/app/Services/SiteData.ts");
function getGroupVariant(screens, screenSetId, isGroupActive, groupId) {
    var groupScreens = {};
    var originalGroupScreen;
    // Extract all screens associated with the groupId
    utils_1.ForEachProp(screens, function (screen) {
        if (screen.variantGroupId === groupId && screen.variantPercentage) {
            groupScreens[screen.ID] = { weight: screen.variantPercentage, testId: screen.abTestId };
            if (screen.isOriginalVariant) {
                originalGroupScreen = screen;
            }
        }
    });
    // If there are no screen return
    if (_isEmpty(groupScreens))
        return;
    if (!isGroupActive) {
        return originalGroupScreen;
    }
    // If variant exist in the user preferences return the screen
    var testId = Object.values(groupScreens)[0].testId;
    var screenVariant = SiteData_1.siteData === null || SiteData_1.siteData === void 0 ? void 0 : SiteData_1.siteData.getScreenVariant(screenSetId, groupId, testId);
    if (screenVariant && groupScreens[screenVariant]) {
        return screens[screenVariant];
    }
    // Evaluate new variant and save it in the user preferences
    var variantScreenId = evaluateNewVariant(groupScreens);
    SiteData_1.siteData === null || SiteData_1.siteData === void 0 ? void 0 : SiteData_1.siteData.setScreenVariant(screenSetId, groupId, testId, variantScreenId);
    return screens[variantScreenId];
}
exports.getGroupVariant = getGroupVariant;
function evaluateNewVariant(groupScreens) {
    var _a, _b;
    var total = Object.keys(groupScreens).reduce(function (acc, screen) { var _a; return acc + ((_a = groupScreens[screen]) === null || _a === void 0 ? void 0 : _a.weight); }, 0);
    var random = Math.random();
    var currentValue = 0;
    for (var screen in groupScreens) {
        if (currentValue < random && random < (currentValue + ((_a = groupScreens[screen]) === null || _a === void 0 ? void 0 : _a.weight) / total)) {
            return screen;
        }
        currentValue += ((_b = groupScreens[screen]) === null || _b === void 0 ? void 0 : _b.weight) / total;
    }
}
exports.evaluateNewVariant = evaluateNewVariant;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts":
/*!*******************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts ***!
  \*******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var ApiLinkWidget_1 = __webpack_require__(/*! ../../Widgets/ApiLinkWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts");
var BaseApiHandler = /** @class */ (function () {
    function BaseApiHandler(screen, _serverApi) {
        this.screen = screen;
        this._serverApi = _serverApi;
    }
    BaseApiHandler.prototype.send = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var reqParams, captchaData;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        reqParams = __webpack_provided_Object_dot_assign({}, this.screen._screenSet.data.params || {}, this.getRequestParams());
                        return [4 /*yield*/, this.screen.getCaptchaData()];
                    case 1:
                        captchaData = _a.sent();
                        if (captchaData) {
                            reqParams['captchaType'] = captchaData.type;
                            reqParams['captchaToken'] = captchaData.token;
                        }
                        return [2 /*return*/, new gigya.Promise(function (resolve, reject) {
                                reqParams['callback'] = function (response) {
                                    _this.handleResponse(response);
                                    resolve(response);
                                };
                                try {
                                    _this._serverApi.run(reqParams);
                                }
                                catch (e) {
                                    reject(e);
                                }
                            })];
                }
            });
        });
    };
    Object.defineProperty(BaseApiHandler.prototype, "methodName", {
        get: function () {
            return this._serverApi.methodName;
        },
        enumerable: true,
        configurable: true
    });
    BaseApiHandler.getHandler = function (methodName, screen, serverApis) {
        var handler = this._handlers[methodName] || this._defaultHandler;
        if (handler) {
            var serverApi = serverApis.filter(function (api) { return api.methodName === methodName; })[0];
            if (!serverApi) {
                window.gigya.logger.warn("[" + ApiLinkWidget_1.ApiLink_CONSTS.attributeName + "]: unable to create api link for: \"" + methodName + "\", the method is not supported");
                return null;
            }
            return new handler(screen, serverApi);
        }
        return null;
    };
    BaseApiHandler.addHandler = function (methodName, handler) {
        if (this._handlers[methodName]) {
            throw new Error("Can't re-register api link handler, " + methodName + " handler already exist");
        }
        this._handlers[methodName] = handler;
    };
    BaseApiHandler.addDefaultHandler = function (handler) {
        if (this._defaultHandler) {
            window.gigya.logger.error("Can't register default API handler, one is already registered");
            return;
        }
        this._defaultHandler = handler;
    };
    BaseApiHandler._handlers = {};
    return BaseApiHandler;
}());
exports.BaseApiHandler = BaseApiHandler;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendMagicLinkHandler.ts":
/*!*************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendMagicLinkHandler.ts ***!
  \*************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var constants_1 = __webpack_require__(/*! src/accounts/constants */ "./src/accounts/constants.ts");
var magic_link_1 = __webpack_require__(/*! ../../Constants/magic-link */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Constants/magic-link.ts");
var BaseApiHandler_1 = __webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts");
var SendMagicLinkHandler = /** @class */ (function (_super) {
    tslib_1.__extends(SendMagicLinkHandler, _super);
    function SendMagicLinkHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SendMagicLinkHandler.prototype.getRequestParams = function () {
        var apiData = this.screen._screenSet.getApiData() || {};
        var params = {
            email: apiData === null || apiData === void 0 ? void 0 : apiData.identifier
        };
        params['context'] = this.getContextObject();
        return params;
    };
    SendMagicLinkHandler.prototype.getContextObject = function () {
        var lang = this.screen._screenSet.params.lang;
        var context = window.gigya.utils.object.merge([
            { lang: lang },
            this.screen._screenSet.params.context,
            window.gigya.utils.URL.getContextParamsFromUrl({ url: document.location.href, unacceptableParams: magic_link_1.MAGIC_LINK_UNACCEPTABLE_PARAMS_REGEX })
        ]);
        return window.gigya.utils.object.addPrefixToProperties(context, constants_1.GIGYA_PARAM_PREFIX);
    };
    SendMagicLinkHandler.prototype.handleResponse = function (response) { };
    return SendMagicLinkHandler;
}(BaseApiHandler_1.BaseApiHandler));
exports.SendMagicLinkHandler = SendMagicLinkHandler;
BaseApiHandler_1.BaseApiHandler.addHandler('accounts.auth.magiclink.email.send', SendMagicLinkHandler);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendOtpCodeHandler.ts":
/*!***********************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendOtpCodeHandler.ts ***!
  \***********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseApiHandler_1 = __webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts");
var SendOtpCodeHandler = /** @class */ (function (_super) {
    tslib_1.__extends(SendOtpCodeHandler, _super);
    function SendOtpCodeHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SendOtpCodeHandler.prototype.getRequestParams = function () {
        var _a;
        var apiData = this.screen._screenSet.getApiData();
        var accountInfo = (apiData === null || apiData === void 0 ? void 0 : apiData.getAccountInfo) || {};
        accountInfo.email = (apiData === null || apiData === void 0 ? void 0 : apiData.identifier) || (accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.email) || ((_a = accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.profile) === null || _a === void 0 ? void 0 : _a.email);
        var reqParams = {};
        if (accountInfo.phoneNumber) {
            reqParams['phoneNumber'] = accountInfo.phoneNumber;
        }
        else if (accountInfo.email) {
            reqParams['email'] = accountInfo.email;
        }
        return reqParams;
    };
    SendOtpCodeHandler.prototype.handleResponse = function (response) {
        // Only override vToken when it is received in the response
        if (response && response['vToken'])
            this.screen._screenSet.data.otpData.vToken = response['vToken'];
    };
    return SendOtpCodeHandler;
}(BaseApiHandler_1.BaseApiHandler));
exports.SendOtpCodeHandler = SendOtpCodeHandler;
BaseApiHandler_1.BaseApiHandler.addHandler('accounts.otp.sendCode', SendOtpCodeHandler);
BaseApiHandler_1.BaseApiHandler.addHandler('accounts.auth.otp.email.sendCode', SendOtpCodeHandler);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendVerificationHandler.ts":
/*!****************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendVerificationHandler.ts ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseApiHandler_1 = __webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts");
var SendVerificationHandler = /** @class */ (function (_super) {
    tslib_1.__extends(SendVerificationHandler, _super);
    function SendVerificationHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    SendVerificationHandler.prototype.getRequestParams = function () {
        var apiData = this.screen._screenSet.getApiData() || {};
        return { identifier: apiData === null || apiData === void 0 ? void 0 : apiData.identifier };
    };
    SendVerificationHandler.prototype.handleResponse = function (response) {
        if (response.errorCode == 0 && response.vToken) {
            this.screen._screenSet.data.pushData.vToken = response.vToken;
        }
        else {
            window.gigya.logger.error('gigya.accounts.auth.push.sendVerification failed');
        }
    };
    return SendVerificationHandler;
}(BaseApiHandler_1.BaseApiHandler));
exports.SendVerificationHandler = SendVerificationHandler;
BaseApiHandler_1.BaseApiHandler.addHandler('accounts.auth.push.sendVerification', SendVerificationHandler);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/StandardHandler.ts":
/*!********************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/StandardHandler.ts ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseApiHandler_1 = __webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts");
var StandardApiHandler = /** @class */ (function (_super) {
    tslib_1.__extends(StandardApiHandler, _super);
    function StandardApiHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    StandardApiHandler.prototype.getRequestParams = function () {
        return {};
    };
    StandardApiHandler.prototype.handleResponse = function (response) { };
    return StandardApiHandler;
}(BaseApiHandler_1.BaseApiHandler));
exports.StandardApiHandler = StandardApiHandler;
BaseApiHandler_1.BaseApiHandler.addDefaultHandler(StandardApiHandler);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/index.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/index.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! ./BaseApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/BaseApiHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./StandardHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/StandardHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./SendOtpCodeHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendOtpCodeHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./SendVerificationHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendVerificationHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./SendMagicLinkHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/SendMagicLinkHandler.ts"), exports);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts":
/*!***************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var CaptchaProvider;
(function (CaptchaProvider) {
    CaptchaProvider["GOOGLE"] = "Google";
    CaptchaProvider["FUNCAPTCHA"] = "FunCaptcha";
})(CaptchaProvider = exports.CaptchaProvider || (exports.CaptchaProvider = {}));
exports.CaptchaHandlers = {};
var CaptchaMode;
(function (CaptchaMode) {
    CaptchaMode["visible"] = "visible";
    CaptchaMode["invisible"] = "invisible";
})(CaptchaMode = exports.CaptchaMode || (exports.CaptchaMode = {}));
var nextCaptchaID = 0;
var BaseCaptchaHandler = /** @class */ (function () {
    function BaseCaptchaHandler(params) {
        if (params === void 0) { params = {}; }
        this.params = params;
        this._ID = "gig_captcha_" + ++nextCaptchaID;
    }
    BaseCaptchaHandler.prototype.init = function (hostElement) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var e_1;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.siteKey) {
                            window.gigya.logger.warn('Missing captcha configuration');
                            return [2 /*return*/, false];
                        }
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, this.loadProvider()];
                    case 2:
                        _a.sent();
                        this.render(hostElement);
                        return [2 /*return*/, true];
                    case 3:
                        e_1 = _a.sent();
                        window.gigya.logger.warn(e_1.message || e_1);
                        return [2 /*return*/, false];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    BaseCaptchaHandler.prototype.getID = function () {
        return this._ID;
    };
    BaseCaptchaHandler.prototype.getToken = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.captchaToken;
                        if (_a) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.lazyExecuteOrFail()];
                    case 1:
                        _a = (_b.sent());
                        _b.label = 2;
                    case 2: return [2 /*return*/, _a];
                }
            });
        });
    };
    BaseCaptchaHandler.prototype.getType = function () {
        return this.captchaType;
    };
    BaseCaptchaHandler.prototype.reset = function () {
        this.captchaToken = null;
    };
    Object.defineProperty(BaseCaptchaHandler.prototype, "siteKey", {
        get: function () {
            return this.isInvisible ? this.invisibleSiteKey : this.visibleSiteKey;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseCaptchaHandler.prototype, "isInvisible", {
        get: function () {
            return this.params.mode === CaptchaMode.invisible;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BaseCaptchaHandler.prototype, "callbackID", {
        get: function () {
            return "gig_" + this.provider + "_onLoad";
        },
        enumerable: true,
        configurable: true
    });
    return BaseCaptchaHandler;
}());
exports.BaseCaptchaHandler = BaseCaptchaHandler;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler.ts":
/*!**************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler.ts ***!
  \**************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseCaptchaHandler_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts");
var global = window;
var funCaptchaLoad;
var FunCaptchaHandler = /** @class */ (function (_super) {
    tslib_1.__extends(FunCaptchaHandler, _super);
    function FunCaptchaHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FunCaptchaHandler.prototype.render = function (hostElement) {
        var _this = this;
        this.challengeExecutor = new gigya.Promise(function (resolve) {
            var callback = function () {
                var tokenInput = hostElement.querySelector('[name="fc-token"]');
                _this.captchaToken = tokenInput && tokenInput.value;
                resolve(_this.captchaToken);
            };
            var id = _this.getID() + "_" + Date.now();
            hostElement.innerHTML = "<div id=\"" + id + "\"></div>";
            _this.challengeRef = new FunCaptcha({
                public_key: _this.siteKey,
                language: _this.params.lang,
                target_html: id,
                callback: callback,
            });
        });
    };
    FunCaptchaHandler.prototype.reset = function () {
        if (typeof FunCaptcha != 'undefined' && this.challengeRef && this.captchaToken) {
            this.challengeRef.refresh_session();
        }
        _super.prototype.reset.call(this);
    };
    FunCaptchaHandler.prototype.loadProvider = function () {
        var _this = this;
        if (typeof FunCaptcha !== 'undefined')
            return;
        else if (!funCaptchaLoad) {
            funCaptchaLoad = new gigya.Promise(function (resolve, reject) {
                global[_this.callbackID] = function () {
                    delete global[_this.callbackID];
                    typeof FunCaptcha !== 'undefined' ? resolve() : reject("error while trying to load FunCaptcha");
                };
                window.gigya.utils.script.load(_this.providerURL, reject);
            });
        }
        return funCaptchaLoad;
    };
    FunCaptchaHandler.prototype.lazyExecuteOrFail = function () {
        // FunCaptcha don't have lazy execution as - for example - google's invisible captcha
        throw new Error('captchaNeeded');
    };
    Object.defineProperty(FunCaptchaHandler.prototype, "provider", {
        get: function () {
            return BaseCaptchaHandler_1.CaptchaProvider.FUNCAPTCHA;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FunCaptchaHandler.prototype, "captchaType", {
        get: function () {
            return "FunCaptcha";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FunCaptchaHandler.prototype, "providerURL", {
        get: function () {
            return "//funcaptcha.com/fc/api/?onload=" + this.callbackID;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FunCaptchaHandler.prototype, "invisibleSiteKey", {
        get: function () {
            return window.gigya.partnerSettings.funCaptcha && window.gigya.partnerSettings.funCaptcha.siteKey;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FunCaptchaHandler.prototype, "visibleSiteKey", {
        get: function () {
            return window.gigya.partnerSettings.funCaptcha && window.gigya.partnerSettings.funCaptcha.siteKey;
        },
        enumerable: true,
        configurable: true
    });
    return FunCaptchaHandler;
}(BaseCaptchaHandler_1.BaseCaptchaHandler));
exports.FunCaptchaHandler = FunCaptchaHandler;
BaseCaptchaHandler_1.CaptchaHandlers[BaseCaptchaHandler_1.CaptchaProvider.FUNCAPTCHA] = FunCaptchaHandler;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler.ts":
/*!*****************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler.ts ***!
  \*****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseCaptchaHandler_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts");
var uniqueGoogleLocaleCodes = {
    br: 'bg',
    he: 'iw',
    'es-mx': 'es-419',
    tl: 'fil',
};
var GoogleCaptchaHandler = /** @class */ (function (_super) {
    tslib_1.__extends(GoogleCaptchaHandler, _super);
    function GoogleCaptchaHandler() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    GoogleCaptchaHandler.prototype.render = function (hostElement) {
        var _this = this;
        var callback = function (token) {
            _this.captchaToken = token;
            _this._challengeResolver(token);
        };
        var recaptchaParams = {
            sitekey: this.siteKey,
            callback: callback,
            type: this.params['type'],
            theme: this.params['theme'],
            size: this.params['size'],
            lang: this._lang,
            'expired-callback': function () {
                _this.reset();
            }
        };
        if (this.isInvisible) {
            recaptchaParams.badge = this.params['badge'];
            recaptchaParams.size = 'invisible';
        }
        var id = this.getID() + "_" + Date.now();
        hostElement.innerHTML = "<div id=\"" + id + "\"></div>";
        this._createChallengeExecutor();
        this.challengeRef = window.gigya.utils.recaptcha.getInstance({
            isEnterprise: this.isEnterprise
        }).render(id, recaptchaParams);
    };
    GoogleCaptchaHandler.prototype.reset = function () {
        var params = {
            isEnterprise: this.isEnterprise
        };
        var instance = window.gigya.utils.recaptcha.getInstance(params);
        if (typeof (instance) !== 'undefined' && typeof this.challengeRef !== 'undefined') {
            instance.reset(this.challengeRef);
            this._createChallengeExecutor();
        }
        _super.prototype.reset.call(this);
    };
    GoogleCaptchaHandler.prototype.loadProvider = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, window.gigya.utils.recaptcha.load({
                            siteKey: this.captchaEnterpriseKey || this.captchaV3Key || this.siteKey,
                            type: this.LoadingCaptchaType,
                            callbackID: this.callbackID,
                            lang: this._lang,
                            isEnterprise: this.isEnterprise
                        })];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    GoogleCaptchaHandler.prototype.lazyExecuteOrFail = function () {
        if (this.isInvisible) {
            window.gigya.utils.recaptcha.getInstance({
                isEnterprise: this.isEnterprise
            }).execute(this.challengeRef);
            return this.challengeExecutor;
        }
        throw new Error('captchaNeeded');
    };
    Object.defineProperty(GoogleCaptchaHandler.prototype, "provider", {
        get: function () {
            return BaseCaptchaHandler_1.CaptchaProvider.GOOGLE;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "captchaType", {
        get: function () {
            return this.isInvisible ? 'invisible' : "reCaptchaV2";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "LoadingCaptchaType", {
        get: function () {
            if (this.captchaEnterpriseKey) {
                return GoogleCaptchaHandler.CAPTCHA_ENTERPRISE_TYPE;
            }
            if (this.captchaV3Key) {
                return GoogleCaptchaHandler.CAPTCHA_V3_TYPE;
            }
            return this.captchaType;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "providerURL", {
        get: function () {
            return "//" + this._domain + "/recaptcha/api.js?" + this.loadQueryParams;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "loadQueryParams", {
        get: function () {
            if (this.captchaV3Key) {
                return "render=" + this.captchaV3Key;
            }
            return "render=explicit&onload=" + this.callbackID + "&hl=" + this._lang;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "isEnterprise", {
        get: function () {
            return !!this.captchaEnterpriseKey;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "invisibleSiteKey", {
        get: function () {
            var _a, _b;
            return (_b = (_a = window.gigya.partnerSettings.invisibleRecaptcha) === null || _a === void 0 ? void 0 : _a.siteKey) === null || _b === void 0 ? void 0 : _b.trim();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "visibleSiteKey", {
        get: function () {
            var _a, _b;
            return (_b = (_a = window.gigya.partnerSettings.recaptchaV2) === null || _a === void 0 ? void 0 : _a.siteKey) === null || _b === void 0 ? void 0 : _b.trim();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "captchaV3Key", {
        get: function () {
            var _a, _b;
            return (_b = (_a = window.gigya.partnerSettings.recaptchaV3) === null || _a === void 0 ? void 0 : _a.siteKey) === null || _b === void 0 ? void 0 : _b.trim();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "captchaEnterpriseKey", {
        get: function () {
            var _a, _b, _c;
            return (_c = (_b = (_a = window.gigya.partnerSettings) === null || _a === void 0 ? void 0 : _a.recaptchaEnterprise) === null || _b === void 0 ? void 0 : _b.siteKey) === null || _c === void 0 ? void 0 : _c.trim();
        },
        enumerable: true,
        configurable: true
    });
    GoogleCaptchaHandler.prototype._createChallengeExecutor = function () {
        var _this = this;
        this.challengeExecutor = new gigya.Promise(function (resolve) {
            _this._challengeResolver = resolve;
        });
    };
    Object.defineProperty(GoogleCaptchaHandler.prototype, "_domain", {
        get: function () {
            var isCNDataCenter = window.gigya.dataCenter.toLowerCase().indexOf('cn1') === 0;
            return this.params['googleCaptchaDomain'] || (isCNDataCenter ? GoogleCaptchaHandler.RECAPTCHA_DOMAIN : GoogleCaptchaHandler.GOOGLE_DOMAIN);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GoogleCaptchaHandler.prototype, "_lang", {
        get: function () {
            return uniqueGoogleLocaleCodes[this.params.lang] || this.params.lang;
        },
        enumerable: true,
        configurable: true
    });
    GoogleCaptchaHandler.RECAPTCHA_DOMAIN = 'www.recaptcha.net';
    GoogleCaptchaHandler.GOOGLE_DOMAIN = 'www.google.com';
    GoogleCaptchaHandler.CAPTCHA_ENTERPRISE_TYPE = 'reCaptchaEnterpriseScore';
    GoogleCaptchaHandler.CAPTCHA_V3_TYPE = 'reCaptchaV3';
    return GoogleCaptchaHandler;
}(BaseCaptchaHandler_1.BaseCaptchaHandler));
exports.GoogleCaptchaHandler = GoogleCaptchaHandler;
BaseCaptchaHandler_1.CaptchaHandlers[BaseCaptchaHandler_1.CaptchaProvider.GOOGLE] = GoogleCaptchaHandler;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/index.ts":
/*!***********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/index.ts ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! ./ApiHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/ApiHandler/index.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./CaptchaHandler/FunCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./CaptchaHandler/GoogleCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler.ts"), exports);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/AddressInput.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/AddressInput.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var Errors_1 = __webpack_require__(/*! ../Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var typeahead_input_1 = __webpack_require__(/*! ../typeahead/typeahead-input */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/typeahead/typeahead-input.ts");
var geo_location_1 = __webpack_require__(/*! ../typeahead/geo-location */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/typeahead/geo-location.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var AddressInputConsts = {
    gigyaAddressInputAttr: "typeahead",
    allowTypeAheadLocation: "typeahead-location",
    defaultCountrySchemaField: "typeahead-country-schema"
};
var AddressInput = /** @class */ (function (_super) {
    tslib_1.__extends(AddressInput, _super);
    function AddressInput(context) {
        var _this = _super.call(this, context) || this;
        _this.currentSuggestions = [];
        _this.geolocation = new geo_location_1.GeoLocation();
        _this.minCharactersBeforeServer = 3;
        context.element.setAttribute("autocomplete", "off");
        return _this;
    }
    AddressInput.FORM_TYPE_CRITERIA = function (context) {
        return context.element.getAttribute(AddressInputConsts.gigyaAddressInputAttr) === 'true';
    };
    AddressInput.prototype.allowGeolocation = function () {
        var _a;
        return ((_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(AddressInputConsts.allowTypeAheadLocation)) === 'true';
    };
    AddressInput.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        var _a;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (!this.isSubTypAddress) {
            this.geolocation = null;
            //how to deactivate typeahead
        }
        this.init(this.instanceElement, function () { return _this._form.onInputChange(_this, false); }, {
            minimumCharacters: this.minCharactersBeforeServer,
            afterSelectCallback: this.onAfterSelectCallback.bind(this)
        });
        if (this.allowGeolocation()) {
            (_a = this.geolocation) === null || _a === void 0 ? void 0 : _a.init();
        }
    };
    Object.defineProperty(AddressInput.prototype, "isSubTypAddress", {
        get: function () {
            var schemaField = this._form.getFieldSchema(this);
            return (schemaField === null || schemaField === void 0 ? void 0 : schemaField.subType) === "address";
        },
        enumerable: true,
        configurable: true
    });
    AddressInput.prototype.onAfterSelectCallback = function () {
        if (this.isSelectedAddress(this.fieldValue)) {
            var address = this.findAddress(this.fieldValue);
            this.selectedAddress(address);
        }
    };
    AddressInput.prototype.prePopulate = function (value) {
        _super.prototype.prePopulate.call(this, value);
        if (this.isSubTypAddress) {
            this.fetchSuggestions(value);
        }
    };
    AddressInput.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.removeListeners();
    };
    AddressInput.prototype.onFieldChange = function (setByScript) {
        if (!!this.fieldValue && this.fieldValue !== this.previousValue
            && !this.isSelectedAddress(this.fieldValue)) {
            this.previousValue = undefined;
            this.isAddressChanged = true;
            if (this.isSubTypAddress) {
                this.fetchSuggestions(this.getValue(), true);
            }
        }
        _super.prototype.onFieldChange.call(this, setByScript);
    };
    Object.defineProperty(AddressInput.prototype, "fieldValue", {
        get: function () {
            var _a;
            return (_a = this.getValue()) !== null && _a !== void 0 ? _a : "";
        },
        enumerable: true,
        configurable: true
    });
    AddressInput.prototype.findAddress = function (fieldValue) {
        var _a;
        return (_a = this.currentSuggestions) === null || _a === void 0 ? void 0 : _a.find(function (entry) { return entry.address === fieldValue; });
    };
    AddressInput.prototype.fetchSuggestions = function (fieldValue, showLoading) {
        var _this = this;
        if (showLoading === void 0) { showLoading = false; }
        if (!this.instanceElement || (fieldValue === null || fieldValue === void 0 ? void 0 : fieldValue.length) < this.minCharactersBeforeServer) {
            return;
        }
        this.startServerQuery();
        if (showLoading)
            this.setLoading(true);
        this.clearServerError();
        this.instanceElement.removeAttribute(FormInput_1.FormInput_CONSTS.serverValidation);
        var country = this.getDefaultLocationParam();
        var geoLocation = this.getCoordinates();
        window.gigya.accounts.address.suggestions.get({
            address: fieldValue,
            country: country,
            longitude: geoLocation === null || geoLocation === void 0 ? void 0 : geoLocation.longitude,
            latitude: geoLocation === null || geoLocation === void 0 ? void 0 : geoLocation.latitude,
            callback: function (res) { return _this.serverQueryDone(res, fieldValue, _this.handleServerDataError); },
        });
    };
    AddressInput.prototype.getCoordinates = function () {
        var _a;
        if (this.allowGeolocation()) {
            return (_a = this.geolocation) === null || _a === void 0 ? void 0 : _a.getPosition();
        }
        return null;
    };
    AddressInput.prototype.getDefaultLocationParam = function () {
        var _a, _b;
        var schemaField = this.instanceElement.getAttribute(AddressInputConsts.defaultCountrySchemaField);
        var accountInfo = this._form._screenSet.data.apiData["getAccountInfo"];
        if (schemaField) {
            var field = this._form.dataToServer.find(function (field) { var _a; return ((_a = field.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute('name')) === schemaField; });
            var fieldValue = field ? field.getValue() : '';
            if (fieldValue && typeof fieldValue === 'string' && utils_1.isDOMXSS(fieldValue)) {
                fieldValue = window.gigya.utils.sanitize.sanitizeHTML(fieldValue);
            }
            return fieldValue;
        }
        return (_b = (_a = accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.profile) === null || _a === void 0 ? void 0 : _a.country) !== null && _b !== void 0 ? _b : "";
    };
    AddressInput.prototype.selectedAddress = function (selectedAddress) {
        var _this = this;
        selectedAddress &&
            selectedAddress.id &&
            this.isSubTypAddress &&
            window.gigya.accounts.address.suggestions.get({
                address: selectedAddress.address,
                suggestionreply: [selectedAddress.id],
                callback: function (res) {
                    return _this.handleServerDataError({
                        errorCode: res.errorCode,
                        field: _this,
                        errorType: Errors_1.ErrorType.server,
                    });
                },
            });
    };
    //Server response handling
    AddressInput.prototype.serverQueryDone = function (res, checkedValue, callback) {
        var _a;
        // response is no longer relevant due to screen going out of view
        if (!this.instanceElement) {
            return;
        }
        // response is no longer relevant due to value change
        if (this.getValue() !== checkedValue) {
            return;
        }
        var errorCode = res.errorCode;
        var errorMessage = "";
        var noDataMessage = "";
        switch (errorCode) {
            case GSErrors_1.GSErrors.OK:
                if (!((_a = res.suggestions) === null || _a === void 0 ? void 0 : _a.length)) {
                    errorMessage = this._screenSet.getText("dqm_selection_error");
                    noDataMessage = "no_dqm_results_found";
                }
                break;
            case GSErrors_1.GSErrors.UNAUTHORIZED_ACCESS_ERROR:
                errorMessage = this._screenSet.getText("missing_dqm_credentials");
                noDataMessage = "dqm_general_error";
                break;
            default:
                errorMessage = this._screenSet.getText("dqm_general_error");
                noDataMessage = errorMessage;
                break;
        }
        this.currentSuggestions = res.suggestions || [];
        var isWarning = !this.currentSuggestions.length;
        this.setOptions(this.currentSuggestions.map(function (e) { return e.address; }));
        this.onServerEnd(errorCode);
        callback({
            errorCode: errorCode,
            field: this,
            errorMessage: this._screenSet.getText(errorMessage),
            errorType: Errors_1.ErrorType.server,
            isWarning: isWarning,
        });
    };
    AddressInput.prototype.handleServerDataError = function (validationInfo) {
        var errorInfo = {
            field: validationInfo.field,
            errorCode: validationInfo.errorCode,
            errorType: validationInfo.errorType,
            customMessage: validationInfo.errorMessage,
            isWarn: validationInfo.isWarning,
        };
        if (errorInfo.errorCode !== GSErrors_1.GSErrors.OK) {
            window.gigya.logger.warn("Response failed for fetch suggestion", errorInfo);
        }
    };
    // Validations
    AddressInput.prototype.isSelectedAddress = function (fieldValue) {
        return !!this.findAddress(fieldValue);
    };
    AddressInput.prototype.serverValidated = function () {
        return false;
    };
    AddressInput.prototype.validateValue = function (formData, fieldValue, callback) {
        this.clearServerError();
        if (!this.shouldValidate(fieldValue)) {
            this._validityState = FormInput_1.ValidityStates._undefined;
            return callback({ errorCode: GSErrors_1.GSErrors.OK, field: this });
        }
        if (this.shouldValidateWithWarning(fieldValue)) {
            this.showWarning();
            this._validityState = FormInput_1.ValidityStates.error;
            return callback({
                errorCode: GSErrors_1.GSErrors.INVALID_TYPE_VALIDATION_ERROR,
                field: this,
                errorType: Errors_1.ErrorType.server,
                isWarning: true,
            });
        }
        if (this.shouldValidateWithErrors() && !this.isSelectedAddress(fieldValue)) {
            this._validityState = FormInput_1.ValidityStates.error;
            return callback({
                errorCode: GSErrors_1.GSErrors.INVALID_TYPE_VALIDATION_ERROR,
                field: this,
                errorType: Errors_1.ErrorType.server,
            });
        }
        return _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    AddressInput.prototype.getAddressValidityState = function (validityState) {
        // field is empty or less than minimum characters
        if (validityState === FormInput_1.ValidityStates.valid && !this.isSelectedAddress(this.fieldValue)) {
            return FormInput_1.ValidityStates._undefined;
        }
        // field is populated with selected address
        if (this.isSelectedAddress(this.getValue())) {
            return FormInput_1.ValidityStates.valid;
        }
        // field not populated with selected address and submit button was pressed
        if (!this.isSelectedAddress(this.fieldValue) && this._form.submitButtonClicked) {
            return FormInput_1.ValidityStates.error;
        }
        return validityState;
    };
    AddressInput.prototype.setValidityState = function (validityState, fromServer) {
        if (fromServer === void 0) { fromServer = false; }
        validityState = this.getAddressValidityState(validityState);
        _super.prototype.setValidityState.call(this, validityState, fromServer);
    };
    //when click on submit should show error
    AddressInput.prototype.shouldValidateWithErrors = function () {
        return this._form.submitButtonClicked && (this.isDirty() || this.required());
    };
    // when clickoutside should show warning
    AddressInput.prototype.shouldValidateWithWarning = function (fieldValue) {
        return this.isDirty() && !this.isSelectedAddress(fieldValue) && this.clickedOutside && !this._form.submitButtonClicked;
    };
    AddressInput.prototype.isDirty = function () {
        var _a;
        return this.isAddressChanged && !!((_a = String(this.fieldValue)) === null || _a === void 0 ? void 0 : _a.length);
    };
    AddressInput.prototype.shouldValidate = function (fieldValue) {
        return this.isSubTypAddress && (this.shouldValidateWithErrors() || this.shouldValidateWithWarning(fieldValue));
    };
    return AddressInput;
}(typeahead_input_1.TypeaheadInput));
exports.AddressInput = AddressInput;
FormInput_1.FormInput.addInputToLibrary(AddressInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var ButtonInput = /** @class */ (function (_super) {
    tslib_1.__extends(ButtonInput, _super);
    function ButtonInput(context) {
        var _this = _super.call(this, context, false) || this;
        _this._form._submitButtons.push(_this);
        return _this;
    }
    ButtonInput.FORM_TYPE_CRITERIA = function (context) {
        return context.type === 'submit' || context.type === 'reset' || context.type === 'button' || context.element.nodeName.toLowerCase() === 'button';
    };
    ButtonInput.prototype.setValue = function () {
        return; // our form should never set value to buttons
    };
    ButtonInput.prototype.disable = function () {
        this.instanceElement && this.instanceElement.setAttribute('disabled', 'true');
    };
    ButtonInput.prototype.enable = function () {
        this.instanceElement && this.instanceElement.removeAttribute('disabled');
    };
    return ButtonInput;
}(FormInput_1.FormInput));
exports.ButtonInput = ButtonInput;
FormInput_1.FormInput.addInputToLibrary(ButtonInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts":
/*!*****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var ConsentData_1 = __webpack_require__(/*! ../ConsentData */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ConsentData.ts");
exports.CheckboxInput_CONSTS = {
    errorClass: 'gigya-terms-error',
    validClass: 'gigya-terms-valid',
    dataValueInArray: 'data-value-in-array',
};
var CheckboxInput = /** @class */ (function (_super) {
    tslib_1.__extends(CheckboxInput, _super);
    function CheckboxInput(context) {
        return _super.call(this, context) || this;
    }
    CheckboxInput.FORM_TYPE_CRITERIA = function (context) {
        return context.type === 'checkbox';
    };
    CheckboxInput.prototype.required = function () {
        // See #44030.
        if (/^(.+\.)?terms$/.test(this.fieldName)) {
            return _super.prototype.required.call(this);
        }
        if (this.isClientRequired()) {
            return true;
        }
        if (ConsentData_1.isConsentField(this.fieldName) &&
            ConsentData_1.isConsentTypeOther(this.fieldName) &&
            ConsentData_1.isConsentMigrated()) {
            if (this.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.required)) {
                return true;
            }
        }
        return false;
    };
    CheckboxInput.prototype.isClientRequired = function () {
        var _a;
        return ((_a = this.schemaFormat) === null || _a === void 0 ? void 0 : _a.toLowerCase()) == 'true';
    };
    CheckboxInput.prototype._isValueEmpty = function (value) {
        return !value; // override default handling of checkboxes
    };
    CheckboxInput.prototype.validateValue = function (formData, fieldValue, callback) {
        if (this.required() && !fieldValue) {
            return callback({
                errorCode: GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR,
                field: this,
            });
        }
        _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    CheckboxInput.prototype._showValidityOnInput = function () {
        this.setValitidyClass(this.instanceElement.parentElement, this._validityState, exports.CheckboxInput_CONSTS.validClass, exports.CheckboxInput_CONSTS.errorClass);
    };
    CheckboxInput.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.setValitidyClass(this.instanceElement.parentElement, this._validityState, exports.CheckboxInput_CONSTS.validClass, exports.CheckboxInput_CONSTS.errorClass);
    };
    CheckboxInput.prototype.prePopulate = function (value) {
        var el = this.instanceElement;
        var dataValueInArray = el.getAttribute(exports.CheckboxInput_CONSTS.dataValueInArray);
        if (!dataValueInArray)
            _super.prototype.prePopulate.call(this, value);
        else if (value instanceof Array) {
            var pos = value.indexOf(dataValueInArray);
            _super.prototype.prePopulate.call(this, pos >= 0);
        }
        else {
            //todo : warn about illegal value (undefiend, null..)
            _super.prototype.prePopulate.call(this, false);
        }
    };
    CheckboxInput.prototype.setValue = function (dataValue, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        // Set new value directly on the DOM.
        var el = this.instanceElement;
        el.checked = dataValue && dataValue !== 'false'; // Boolean can be saved as "true" or "false" (string).
        // Trigger change.
        this.onFieldChange(setByScript);
    };
    CheckboxInput.prototype.getValue = function (el, currentValue) {
        if (el === void 0) { el = this.instanceElement; }
        var value = el.checked;
        var arrayItemValue = el.getAttribute(exports.CheckboxInput_CONSTS.dataValueInArray);
        if (arrayItemValue) {
            if (!currentValue)
                currentValue = [];
            var pos = currentValue.indexOf(arrayItemValue);
            if (el.checked && pos < 0) {
                currentValue.push(arrayItemValue);
            }
            else if (!el.checked && pos >= 0) {
                currentValue.splice(pos, 1);
            }
            value = currentValue;
        }
        return value;
    };
    return CheckboxInput;
}(FormInput_1.FormInput));
exports.CheckboxInput = CheckboxInput;
FormInput_1.FormInput.addInputToLibrary(CheckboxInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CommunicationCheckboxInput.ts":
/*!******************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CommunicationCheckboxInput.ts ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var CheckboxInput_1 = __webpack_require__(/*! ./CheckboxInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts");
var CommunicationWidget_1 = __webpack_require__(/*! ../Widgets/CommunicationWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CommunicationWidget.ts");
var BaseForm_1 = __webpack_require__(/*! ../BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var CommunicationCheckboxInput = /** @class */ (function (_super) {
    tslib_1.__extends(CommunicationCheckboxInput, _super);
    function CommunicationCheckboxInput() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CommunicationCheckboxInput.FORM_TYPE_CRITERIA = function (context) {
        var _a;
        return (_a = context === null || context === void 0 ? void 0 : context.fieldName) === null || _a === void 0 ? void 0 : _a.startsWith(CommunicationWidget_1.CommunicationWidget_CONSTS.communicationsPrefix);
    };
    CommunicationCheckboxInput.prototype.setValue = function (dataValue, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        var el = this.instanceElement;
        el.checked = this.isChecked(dataValue, el);
        this.onFieldChange(setByScript);
    };
    CommunicationCheckboxInput.prototype.getValue = function (el, currentValue) {
        if (el === void 0) { el = this.instanceElement; }
        return {
            channel: el === null || el === void 0 ? void 0 : el.getAttribute(CommunicationWidget_1.CommunicationWidget_CONSTS.channel),
            status: this.evaluateStatus(el),
            topic: el === null || el === void 0 ? void 0 : el.getAttribute(CommunicationWidget_1.CommunicationWidget_CONSTS.topic),
        };
    };
    CommunicationCheckboxInput.prototype.evaluateStatus = function (el) {
        var checked = el.checked;
        var previousStatus = el === null || el === void 0 ? void 0 : el.getAttribute(CommunicationWidget_1.CommunicationWidget_CONSTS.status);
        this.sendLoggerReport(previousStatus);
        if (checked) {
            return CommunicationWidget_1.Channel_Status.optIn;
        }
        if (this.isChannelStatusOptIn(previousStatus) && !checked) {
            return CommunicationWidget_1.Channel_Status.optOut;
        }
        return CommunicationWidget_1.Channel_Status.noticed;
    };
    CommunicationCheckboxInput.prototype.sendLoggerReport = function (previousStatus) {
        if (previousStatus === CommunicationWidget_1.Channel_Status.OptIn || previousStatus === CommunicationWidget_1.Channel_Status.OptOut) {
            window.gigya.logger.report('Received communication status uppercase', previousStatus);
        }
    };
    CommunicationCheckboxInput.prototype.isChannelStatusOptIn = function (status) {
        return status && (status === CommunicationWidget_1.Channel_Status.optIn || status === CommunicationWidget_1.Channel_Status.OptIn);
    };
    CommunicationCheckboxInput.prototype.isChecked = function (dataValue, el) {
        var status = this.getCommunicationWidgetAttribute(dataValue, 'status');
        return this.isChannelStatusOptIn(status) ||
            ((el === null || el === void 0 ? void 0 : el.hasAttribute(BaseForm_1.Form_CONSTS.defaultCheckedAttribute)) && !status);
    };
    CommunicationCheckboxInput.prototype.getCommunicationWidgetAttribute = function (obj, key) {
        return obj[key] || obj[this.capitalize(key)];
    };
    CommunicationCheckboxInput.prototype.capitalize = function (str) {
        var _a;
        return ((_a = str === null || str === void 0 ? void 0 : str.charAt(0)) === null || _a === void 0 ? void 0 : _a.toUpperCase()) + (str === null || str === void 0 ? void 0 : str.slice(1));
    };
    return CommunicationCheckboxInput;
}(CheckboxInput_1.CheckboxInput));
exports.CommunicationCheckboxInput = CommunicationCheckboxInput;
FormInput_1.FormInput.addInputToLibrary(CommunicationCheckboxInput, FormInput_1.FormInputPriorities.Important);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput.ts":
/*!**************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var LoginForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var EmailInput = /** @class */ (function (_super) {
    tslib_1.__extends(EmailInput, _super);
    function EmailInput(context) {
        return _super.call(this, context) || this;
    }
    EmailInput.FORM_TYPE_CRITERIA = function (context) {
        return !(context.form instanceof LoginForm_1.LoginForm) && (context.fieldName === 'email' || context.type === 'email');
    };
    EmailInput.prototype.validateValue = function (formData, fieldValue, callback) {
        if (fieldValue && !window.gigya.pluginUtils.validation.isValidEmailLoginID(fieldValue))
            return callback({
                errorCode: GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE,
                field: this,
            });
        return _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    return EmailInput;
}(FormInput_1.FormInput));
exports.EmailInput = EmailInput;
FormInput_1.FormInput.addInputToLibrary(EmailInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var Consent_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts");
var ArrayManagerWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts");
var Errors_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var SchemaTypeConverter_1 = __webpack_require__(/*! ../SchemaTypeConverter */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/SchemaTypeConverter.ts");
var PasskeyService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Passkey/PasskeyService */ "./src/core/Gigya.Js/app/Passkey/PasskeyService.ts");
var ValidityStates;
(function (ValidityStates) {
    ValidityStates[ValidityStates["_undefined"] = 0] = "_undefined";
    ValidityStates[ValidityStates["valid"] = 1] = "valid";
    ValidityStates[ValidityStates["error"] = 2] = "error";
    ValidityStates[ValidityStates["pending"] = 3] = "pending";
})(ValidityStates = exports.ValidityStates || (exports.ValidityStates = {}));
utils_1.DeepFreeze(ValidityStates);
exports.fieldsNameData = {
    loginID: { autoFillName: 'username', paramName: 'loginID' },
    passwordRetype: { autoFillName: '', paramName: '' },
};
utils_1.DeepFreeze(exports.fieldsNameData);
var fieldsDisplayNames = {
    loginID: 'username',
    secretQuestion: 'secret question',
    secretAnswer: 'secret answer',
};
utils_1.DeepFreeze(fieldsDisplayNames);
var WriteAccessModes;
(function (WriteAccessModes) {
    WriteAccessModes[WriteAccessModes["clientModify"] = 0] = "clientModify";
    WriteAccessModes[WriteAccessModes["clientCreate"] = 1] = "clientCreate";
})(WriteAccessModes = exports.WriteAccessModes || (exports.WriteAccessModes = {}));
exports.FormInput_CONSTS = {
    fieldName: 'data-gigya-name',
    displayName: 'data-display-name',
    captcha: 'gigya-captcha',
    allowEmpty: 'data-allow-empty',
    required: 'data-required',
    originalValue: 'data-original-value',
    serverValidation: 'data-invalid-error-code',
    showValidCheckmark: 'show-valid-checkmark',
    showCheckmarkClass: 'gigya-show-checkmark',
    errorClass: 'gigya-error',
    warnClass: 'gigya-warn',
    validClass: 'gigya-valid',
    pendingClass: 'gigya-pending',
    emptyClass: 'gigya-empty',
    placeholderAttribute: 'data-gigya-placeholder',
    arrayRootAttribute: 'data-array-root',
    arrayKeyFieldAttribute: 'data-array-key-field',
    arrayKeyValueAttribute: 'data-array-key-value',
    identifierType: 'data-identifier-type'
};
utils_1.DeepFreeze(exports.FormInput_CONSTS);
var FormInputsLibrary = {};
var FormInputPriorities;
(function (FormInputPriorities) {
    FormInputPriorities[FormInputPriorities["_start"] = 0] = "_start";
    FormInputPriorities[FormInputPriorities["Important"] = 1] = "Important";
    FormInputPriorities[FormInputPriorities["Normal"] = 2] = "Normal";
    FormInputPriorities[FormInputPriorities["Fallback"] = 3] = "Fallback";
    FormInputPriorities[FormInputPriorities["_end"] = 4] = "_end";
})(FormInputPriorities = exports.FormInputPriorities || (exports.FormInputPriorities = {}));
var FormInput = /** @class */ (function (_super) {
    tslib_1.__extends(FormInput, _super);
    //#endregion
    function FormInput(context, isDataField, keypressValidationDelay) {
        if (isDataField === void 0) { isDataField = true; }
        if (keypressValidationDelay === void 0) { keypressValidationDelay = 1000; }
        var _this = _super.call(this, context.element, context.form) || this;
        _this.isDataField = isDataField;
        _this.dynamicField = false;
        _this.isCaptcha = false;
        _this._validityState = ValidityStates._undefined;
        _this._showValidityMarker = {};
        _this.isCurrnetValuePlaceholderText = true;
        _this.isCtrlKeyUp = false;
        _this.KEY_CODE_DELETE = 46;
        _this.KEY_CODE_BACKSPACE = 8;
        _this.KEYCODE_LETTER_X = 88;
        _this.previousValue = null;
        _this.intervalID = 0;
        _this.valueConverter = SchemaTypeConverter_1.schemaTypeToConverter('string');
        _this.validityStateListeners = new Array();
        _this._form = context.form;
        _this.type = context.type;
        _this._screen = _this._form._screen;
        _this.update(context.element, context.fieldName, isDataField);
        if (_this.showValidCheckmark(_this.templateElement)) {
            _this._showValidityMarker[ValidityStates.valid] = _this._showValidityMarker[ValidityStates.pending] = true;
        }
        // Ensure the onFieldChanged event isn't fired for every keypress.
        _this.onFieldChangeDebounced = window.gigya.utils.functions.debounce(function () { return _this.onFieldChange(); }, _this._screenSet.params['debounceDelay'] || keypressValidationDelay);
        return _this;
    }
    FormInput.prototype.hasPreviousValue = function () {
        return !!this.previousValue;
    };
    FormInput.prototype.setValidityMarker = function (key, val) {
        this._showValidityMarker[key] = val;
    };
    Object.defineProperty(FormInput.prototype, "arrayKeyField", {
        get: function () {
            return this.instanceElement.getAttribute(exports.FormInput_CONSTS.arrayKeyFieldAttribute);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormInput.prototype, "arrayKeyValue", {
        get: function () {
            return this.instanceElement.getAttribute(exports.FormInput_CONSTS.arrayKeyValueAttribute);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormInput.prototype, "schemaFormat", {
        get: function () {
            var _a, _b;
            return (_b = (_a = this._schema) === null || _a === void 0 ? void 0 : _a.format) === null || _b === void 0 ? void 0 : _b.toString();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormInput.prototype, "autocomplete", {
        get: function () {
            return this.instanceElement.getAttribute('autocomplete');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FormInput.prototype, "isSchemaValid", {
        get: function () {
            var _this = this;
            return !utils_1.Some(this.schemaChecks, function (c) { return c(_this.getValue()) !== GSErrors_1.GSErrors.OK; });
        },
        enumerable: true,
        configurable: true
    });
    //#region formInput library
    FormInput.addInputToLibrary = function (type, priority) {
        if (priority === void 0) { priority = FormInputPriorities.Normal; }
        var inputList = FormInputsLibrary[priority] || [];
        inputList.push(type);
        FormInputsLibrary[priority] = inputList;
    };
    FormInput.inputLibraryByPriority = function () {
        var lib = new Array();
        for (var priority = FormInputPriorities._start; priority <= FormInputPriorities._end; ++priority) {
            var priorityList = FormInputsLibrary[priority];
            if (priorityList)
                lib = lib.concat(priorityList);
        }
        return lib;
    };
    FormInput.registerFormInputs = function (elements, parent) {
        var inputs = new Array();
        var lib = FormInput.inputLibraryByPriority();
        var ignoredFields = parent.ignoredFields();
        utils_1.ForEach(elements, function (el) {
            var type;
            var fieldName = el.getAttribute(exports.FormInput_CONSTS.fieldName) || el.getAttribute('name');
            // ignore fields that are on the form ignore list
            if (ignoredFields[fieldName]) {
                return;
            }
            // ignore fields that are part of a fieldset (in case of composition of inputs the fieldset will represent its inputs as a whole)
            if (window.gigya.utils.DOM.isBelongToGigyaFieldset(el)) {
                return;
            }
            var context = {
                form: parent,
                fieldName: fieldName,
                element: el,
                type: el.getAttribute('type'),
                params: parent._screenSet.params,
            };
            utils_1.Some(lib, function (t) {
                var match = t.FORM_TYPE_CRITERIA(context);
                if (match)
                    type = t;
                return match;
            });
            if (type)
                inputs.push(new type(context));
        });
        return inputs;
    };
    FormInput.FORM_TYPE_CRITERIA = function (context) {
        return true;
    };
    FormInput.prototype.onKeyUp = function (e) {
        // Ignore tab, ctrl, windows key, escape, caps lock, etc.
        if (e.keyCode !== 9 &&
            e.keyCode !== 13 &&
            e.keyCode !== 16 &&
            e.keyCode !== 17 &&
            e.keyCode !== 91 &&
            e.keyCode !== 92 &&
            e.keyCode !== 20 &&
            e.keyCode !== 27) {
            this.onFieldChangeDebounced();
        }
    };
    /**
     * Called when an element's value MAY have changed.
     */
    FormInput.prototype.onFieldChange = function (setByScript) {
        if (setByScript === void 0) { setByScript = false; }
        // May be called after a small delay, ensure the element still exists.
        // Specifically check to ensure the screen-set container still exists to handle the case where container is killed with the escape key.
        if (!this.instanceElement || !this._screenSet.container) {
            return;
        }
        // Avoid triggering twice when a user finishes typing (triggering keydown) and then leaves the field (triggering change).
        // Exempt radio type because each individual element is unique instance, so it can't track state. Regardless, it's not necessary.
        var value = this.getValue();
        if (this.previousValue === value && this.type !== 'radio') {
            return;
        }
        this.previousValue = value;
        // Triggered when field is changed:
        this.updateCssClasses();
        this._form.onInputChange(this, setByScript);
    };
    FormInput.prototype.updateCssClasses = function () {
        if (this.isEmpty()) {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.FormInput_CONSTS.emptyClass);
        }
        else {
            window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, exports.FormInput_CONSTS.emptyClass);
        }
    };
    FormInput.prototype.update = function (element, fieldName, isDataField) {
        var _this = this;
        if (element === void 0) { element = this.instanceElement; }
        if (fieldName === void 0) { fieldName = this.instanceElement.getAttribute('name'); }
        this.fieldName = fieldName;
        this.normalizedFieldName = this._form.getNormalizedFieldName(this.fieldName);
        if (this.normalizedFieldName) {
            // calculate field name parts
            var fieldNameParts = this.normalizedFieldName.split('.');
            if (fieldNameParts.length > 1) {
                this.fieldNamespace = fieldNameParts.shift();
            }
            // when binding to the consent's grant field, we need to treat the base name as the consent itself (schema validations mainly)
            if (this.fieldNamespace == Consent_1.namespace && fieldNameParts[fieldNameParts.length - 1] == Consent_1.consentFieldName) {
                fieldNameParts.pop();
            }
            this.fieldBaseName = fieldNameParts.join('.').replace(ArrayManagerWidget_1.ArrayManager_CONST.indexMatcher, '');
            // Keep name saved for future screenset instances
            if (this.fieldName !== element.getAttribute(exports.FormInput_CONSTS.fieldName)) {
                element.setAttribute(exports.FormInput_CONSTS.fieldName, this.fieldName);
            }
        }
        var fieldData = exports.fieldsNameData[this.fieldBaseName];
        this.paramName = fieldData ? fieldData.paramName : this.normalizedFieldName;
        if (fieldData && fieldData.autoFillName) {
            element.setAttribute('name', fieldData.autoFillName);
        }
        if (isDataField && this.normalizedFieldName) {
            this._form.addDataField(this);
            // save the original value
            element.setAttribute(exports.FormInput_CONSTS.originalValue, String(this.getValue(element)));
            this.keyUpHandler = function (e) { return _this.onKeyUp(e); };
            this.addEventListener('keyup', this.keyUpHandler);
            this.changeHandler = function () { return _this.onFieldChange(); };
            this.addEventListener('change', this.changeHandler);
        }
        this.updateDisplayName(element);
    };
    FormInput.prototype.updateDisplayName = function (element) {
        if (element === void 0) { element = this.templateElement; }
        this.displayName = element.getAttribute(exports.FormInput_CONSTS.displayName) || this.fieldBaseName;
    };
    FormInput.prototype.getArrayRoot = function (flatten) {
        if (flatten === void 0) { flatten = false; }
        var arrayRoot = this.instanceElement ? this.instanceElement.getAttribute(exports.FormInput_CONSTS.arrayRootAttribute) : '';
        if (arrayRoot && flatten) {
            arrayRoot = arrayRoot.replace(ArrayManagerWidget_1.ArrayManager_CONST.indexMatcher, '.$1');
        }
        return arrayRoot;
    };
    FormInput.prototype.getName = function (isNormalized, flatten) {
        if (flatten === void 0) { flatten = false; }
        var name = !isNormalized ? this.fieldName : this.normalizedFieldName;
        return flatten ? name.replace(ArrayManagerWidget_1.ArrayManager_CONST.indexMatcher, '.$1') : name;
    };
    FormInput.prototype.isEmpty = function (value) {
        if (value === void 0) { value = this.getValue(); }
        return this._isValueEmpty(value);
    };
    FormInput.prototype._isValueEmpty = function (value) {
        return !value || value === false;
    };
    FormInput.prototype.allowEmpty = function () {
        return Boolean(this.instanceElement && this.instanceElement.getAttribute(exports.FormInput_CONSTS.allowEmpty)); // hasAttribute is not supported in IE9
    };
    FormInput.prototype.getTruncatedValue = function (val) {
        return window.gigya.utils.stringUtils.trim(String(val));
    };
    FormInput.prototype.validate = function (callback, formData) {
        if (formData === void 0) { formData = this._form.getFlatFormData(false, true); }
        if (this.isInHiddenContainer()) {
            return callback({
                errorCode: GSErrors_1.GSErrors.OK,
                field: this
            });
        }
        this.validateValue(formData, this.getValidateValue(formData), callback);
    };
    FormInput.prototype.validateAsync = function (formData) {
        if (formData === void 0) { formData = this._form.getFlatFormData(false, true); }
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, new gigya.Promise(function (resolve) {
                        _this.validate(function (validationInfo) { return resolve(validationInfo); }, formData);
                    })];
            });
        });
    };
    FormInput.prototype.getValidateValue = function (formData) {
        return this.getValue();
    };
    FormInput.prototype.clearServerError = function () {
        this.instanceElement.removeAttribute(exports.FormInput_CONSTS.serverValidation);
    };
    FormInput.prototype.getServerError = function () {
        var code = this.instanceElement.getAttribute(exports.FormInput_CONSTS.serverValidation);
        if (code)
            return parseInt(code);
        return GSErrors_1.GSErrors.OK;
    };
    FormInput.prototype.setServerError = function (errorCode) {
        var validityState = errorCode == GSErrors_1.GSErrors.OK ? ValidityStates.valid : ValidityStates.error;
        this.instanceElement.setAttribute(exports.FormInput_CONSTS.serverValidation, errorCode + '');
        this.setValidityState(validityState, true);
    };
    FormInput.prototype.validateValue = function (formData, fieldValue, callback) {
        var fieldIsEmpty = fieldValue == null || this.getTruncatedValue(fieldValue) === '';
        if (this.required() && fieldIsEmpty)
            return callback({
                errorCode: GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR,
                field: this,
                errorType: Errors_1.ErrorType.server
            });
        // schema validation
        if (this._schema) {
            var schemaError = GSErrors_1.GSErrors.OK;
            utils_1.Some(this.schemaChecks, function (check) {
                schemaError = check(fieldValue);
                return schemaError != GSErrors_1.GSErrors.OK;
            });
            if (schemaError !== GSErrors_1.GSErrors.OK)
                return callback({
                    errorCode: schemaError,
                    field: this,
                    errorType: Errors_1.ErrorType.server
                });
        }
        // Server validation
        if (this.instanceElement) {
            var serverCode = this.instanceElement.getAttribute(exports.FormInput_CONSTS.serverValidation); // hasAttribute is not supported in IE9
            if (serverCode) {
                // serverValidation already returned
                var serverValidationErrorCode = this.getServerError();
                if (serverValidationErrorCode != GSErrors_1.GSErrors.OK)
                    return callback({
                        errorCode: serverValidationErrorCode,
                        field: this,
                        errorType: Errors_1.ErrorType.server
                    });
            }
            else {
                // initiate server validation
                if (this.serverValidated())
                    return this.startServerValidation(fieldValue, callback);
            }
        }
        return callback({
            errorCode: GSErrors_1.GSErrors.OK,
            field: this
        });
    };
    FormInput.prototype.serverValidated = function () {
        return false;
    };
    FormInput.prototype.startServerValidation = function (fieldValue, callback) {
        Errors_1.notImplementerAbstract();
    };
    FormInput.prototype.required = function () {
        // Schema requires this field.
        if (this._schemaRequired) {
            return true;
        }
        // Form requires this field.
        if (!this.allowEmpty() && this._form.requiredFields()[this.fieldName]) {
            return true;
        }
        // Field is required on this screen.
        if (this.instanceElement.getAttribute(exports.FormInput_CONSTS.required)) {
            return true;
        }
        return false;
    };
    //#endregion
    //#region show error
    FormInput.prototype.showValidCheckmark = function (element) {
        if (element === void 0) { element = this.instanceElement; }
        return (Boolean(element.getAttribute(exports.FormInput_CONSTS.showValidCheckmark)) && // ie9 has no hasAttribute
            !window.gigya.utils.validation.isExplicitFalse(element.getAttribute(exports.FormInput_CONSTS.showValidCheckmark)));
    };
    FormInput.prototype.addValidityStateListener = function (listener) {
        if (listener)
            this.validityStateListeners.push(listener);
    };
    FormInput.prototype.removeValidityStateListener = function (listener) {
        if (listener)
            this.validityStateListeners.splice(window.gigya.utils.array.indexOf(this.validityStateListeners, listener), 1);
    };
    FormInput.prototype.triggerValidityStateChange = function (validityState, fromServer) {
        var _this = this;
        utils_1.ForEach(this.validityStateListeners, function (listener) { return listener(validityState, fromServer, _this); });
    };
    FormInput.prototype.getValidityState = function () {
        return this._validityState;
    };
    FormInput.prototype.setValidityState = function (validityState, fromServer) {
        if (fromServer === void 0) { fromServer = false; }
        if (validityState !== this._validityState) {
            this._validityState = validityState;
            this._showValidityOnInput();
            this.triggerValidityStateChange(this._validityState, fromServer);
        }
    };
    FormInput.prototype._showValidityOnInput = function (element, validityState, allowValidityMarker) {
        if (element === void 0) { element = this.instanceElement; }
        if (validityState === void 0) { validityState = this._validityState; }
        if (allowValidityMarker === void 0) { allowValidityMarker = true; }
        this.setValitidyClass(element, validityState);
        if (this._showValidityMarker[validityState] && allowValidityMarker)
            window.gigya.utils.DOM.addClassToElement(element, exports.FormInput_CONSTS.showCheckmarkClass);
        else
            window.gigya.utils.DOM.removeClassFromElement(element, exports.FormInput_CONSTS.showCheckmarkClass);
    };
    FormInput.prototype.setValitidyClass = function (element, validityState, validClass, errorClass, pendingClass) {
        if (validClass === void 0) { validClass = exports.FormInput_CONSTS.validClass; }
        if (errorClass === void 0) { errorClass = exports.FormInput_CONSTS.errorClass; }
        if (pendingClass === void 0) { pendingClass = exports.FormInput_CONSTS.pendingClass; }
        if (!element)
            return;
        var currentClass;
        switch (validityState) {
            case ValidityStates.valid:
                currentClass = validClass;
                break;
            case ValidityStates.error:
                currentClass = errorClass;
                break;
            case ValidityStates.pending:
                currentClass = pendingClass;
                break;
        }
        this.setElementValidationClass(element, currentClass, validClass, errorClass, pendingClass);
        if (this.placeHolderElement) {
            this.setElementValidationClass(this.placeHolderElement, currentClass, validClass, errorClass, pendingClass);
        }
    };
    FormInput.prototype.setElementValidationClass = function (element, validationClass, validClass, errorClass, pendingClass) {
        if (validClass === void 0) { validClass = exports.FormInput_CONSTS.validClass; }
        if (errorClass === void 0) { errorClass = exports.FormInput_CONSTS.errorClass; }
        if (pendingClass === void 0) { pendingClass = exports.FormInput_CONSTS.pendingClass; }
        window.gigya.utils.DOM.removeClassFromElement(element, validClass);
        window.gigya.utils.DOM.removeClassFromElement(element, errorClass);
        window.gigya.utils.DOM.removeClassFromElement(element, pendingClass);
        if (validationClass) {
            window.gigya.utils.DOM.addClassToElement(element, validationClass);
        }
        if (validationClass === errorClass) {
            // Validation failed.
            element.setAttribute('aria-invalid', 'true');
        }
        else {
            // No errors detected.
            element.setAttribute('aria-invalid', 'false');
        }
    };
    //#endregion
    FormInput.prototype.unlinkTemplate = function () {
        if (this.changeHandler) {
            this.removeEventListener('change', this.changeHandler);
        }
        if (this.keyUpHandler) {
            this.removeEventListener('keydown', this.keyUpHandler);
        }
        _super.prototype.unlinkTemplate.call(this);
    };
    FormInput.prototype.linkInstanceElement = function (parent) {
        var _a;
        _super.prototype.linkInstanceElement.call(this, parent);
        this._schemaWriteAccessMode = WriteAccessModes.clientModify;
        this._schemaRequired = false;
        if (this.instanceElement) {
            if (this._form.schemaValidated()) {
                this._schema = this._form.getFieldSchema(this);
                if (this._schema) {
                    this.valueConverter = SchemaTypeConverter_1.schemaTypeToConverter(this._schema.type);
                    this.schemaChecks = new Array();
                    if (this._schema.type) {
                        var typeCheck = SchemaTypeChecks[this._schema.type];
                        if (typeCheck)
                            this.schemaChecks.push(typeCheck);
                    }
                    // currently we support only regex format checks - will change.
                    if ((_a = this.schemaFormat) === null || _a === void 0 ? void 0 : _a.match(formatPattern)) {
                        this.schemaChecks.push(schemaFormatCheck(this.schemaFormat));
                    }
                    this._schemaRequired = this._schema.required || utils_1.Some(this.schemaChecks, function (check) { return check('') != GSErrors_1.GSErrors.OK; }); // schema define this field as required // schema checks do not pass if there is no value
                    this._schemaWriteAccessMode = WriteAccessModes[this._schema.writeAccess] || WriteAccessModes.clientModify;
                }
            }
            this.setPlaceholderValue();
            this.setAriaRequired();
            this.wcagEvaluation();
            this.initPasskeyAutoComplete(true);
            // Set input's default value as previous value.
            // prePopulate will override this if a value exists.
            this.previousValue = this.getValue();
        }
    };
    FormInput.prototype.initPasskeyAutoComplete = function (abort) {
        if (abort === void 0) { abort = false; }
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var shouldReinit, _b, result, err_1;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        shouldReinit = true;
                        _b = ((_a = this.autocomplete) === null || _a === void 0 ? void 0 : _a.indexOf('webauthn')) >= 0;
                        if (!_b) return [3 /*break*/, 2];
                        return [4 /*yield*/, PasskeyService_1.default.isConditionalMediationAvailable()];
                    case 1:
                        _b = (_c.sent());
                        _c.label = 2;
                    case 2:
                        if (!(_b && (window.gigya.localInfo.isChrome || window.gigya.localInfo.isIOSChrome))) return [3 /*break*/, 7];
                        _c.label = 3;
                    case 3:
                        _c.trys.push([3, 5, , 6]);
                        return [4 /*yield*/, PasskeyService_1.default.authenticate({
                                mediation: 'conditional',
                                abortCurrentCeremony: abort,
                                dontHandleScreenSet: false,
                                sessionExpiration: this._screenSet.params.sessionExpiration
                            })];
                    case 4:
                        result = _c.sent();
                        this._screenSet.onScreenResponse(tslib_1.__assign({}, result), this._form);
                        return [3 /*break*/, 6];
                    case 5:
                        err_1 = _c.sent();
                        switch (err_1.errorCode) {
                            case GSErrors_1.GSErrors.PASSKEY_ABORTED:
                                break;
                            case GSErrors_1.GSErrors.NOT_SUPPORTED:
                            case GSErrors_1.GSErrors.INVALID_SITE_CONFIGURATION_ERROR:
                                shouldReinit = false;
                            default:
                                err_1.errorMessage = this._screenSet.getErrorMessageNew(err_1.errorCode);
                                this._screenSet.onScreenResponse(err_1, this._form);
                        }
                        return [3 /*break*/, 6];
                    case 6:
                        if (shouldReinit && this.instanceElement && document.body.contains(this.instanceElement)) {
                            this.initPasskeyAutoComplete();
                        }
                        _c.label = 7;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    FormInput.prototype.wcagEvaluation = function () {
        var _a, _b;
        var hasMultipleInputs = ((_b = (_a = this.instanceElement.parentElement) === null || _a === void 0 ? void 0 : _a.querySelectorAll(this.instanceElement.tagName)) === null || _b === void 0 ? void 0 : _b.length) > 1;
        if (this.type != 'submit' && !hasMultipleInputs) {
            this.fixLabel();
        }
    };
    FormInput.prototype.fixLabel = function () {
        var _a;
        var label = (_a = this.instanceElement.parentElement) === null || _a === void 0 ? void 0 : _a.querySelector('label');
        if (label && label.htmlFor !== this.ID) {
            label.htmlFor = this.ID;
        }
        if (this.ID === 'gigya-textbox-code') {
            this.instanceElement.setAttribute('aria-label', 'Code');
        }
    };
    /**
     * Used for browsers that do not support native placeholders.
     */
    FormInput.prototype.createPlaceholderElement = function (elName, elType) {
        if (elName === 'input' && elType !== 'checkbox' && elType !== 'radio') {
            this.placeHolderElement = window.gigya.utils.DOM.createElement('input', '');
        }
        else if (elName === 'textarea') {
            this.placeHolderElement = window.gigya.utils.DOM.createElement('textarea', '');
        }
        if (window.gigya.localInfo.isIE8) {
            this.placeHolderElement.style.width = this.instanceElement['currentStyle'].width;
        }
        else {
            this.placeHolderElement.style.width = window.getComputedStyle(this.instanceElement).width;
        }
        if (elName === 'input' || elName === 'textarea') {
            this.placeHolderElement['screenSetInstanceOf'] = [this];
            this.placeHolderElement.setAttribute('value', this.placeholderAttributeValue);
            this.placeHolderElement.setAttribute('style', window.gigya._.plugins.utils.DOM.getAttribute(this.instanceElement, 'style'));
            this.placeHolderElement.setAttribute('class', window.gigya._.plugins.utils.DOM.getAttribute(this.instanceElement, 'class') + ' gigya-placeholder');
            this.instanceElement.parentNode.insertBefore(this.placeHolderElement, this.instanceElement);
            // the following line is for vertically aligning the text inside the element
            window.gigya.pluginUtils.DOM.hideElement(this.instanceElement);
        }
        // Attach events.
        if (elName === 'textarea' || (elName === 'input' && elType !== 'checkbox' && elType !== 'radio')) {
            this.placeHolderElement['attachEvent']('onkeydown', this.onPlaceholderKeyDown);
            //this.placeHolderElement.attachEvent('onselectstart', this.onTextSelectionStart);
            this.addEventListener('keydown', this.onKeyDownForPlaceholder);
            this.addEventListener('blur', this.onBlurForPlaceholder);
            this.placeHolderElement['attachEvent']('oncontextmenu', this.onContextMenuOpened);
            this.placeHolderElement['attachEvent']('onfocus', this.onPlaceholderFocused);
            //this.addEventListener('select', this.onTextSelected);
            this.addEventListener('keyup', this.onKeyUpForPlaceholder);
            this.togglePlaceholderStateView(true);
        }
        // WCAG: Hide placeholder input from screen readers.
        this.placeHolderElement.setAttribute('aria-hidden', 'true');
    };
    FormInput.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement) {
            this._schemaRequired = false;
            this.schemaChecks = this._schema = null;
            this.setValue('');
            this.setValidityState(ValidityStates._undefined);
        }
        PasskeyService_1.default.abortCurrentCeremony();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    FormInput.prototype.getValue = function (el, currentValue) {
        if (el === void 0) { el = this.instanceElement; }
        var _a;
        if (el.value === undefined)
            return '';
        var val = window.gigya.utils.stringUtils.trim(el.value);
        if (val && ((_a = this._schema) === null || _a === void 0 ? void 0 : _a.encryptedNonSearchable)) {
            try {
                val = this.valueConverter(val);
            }
            catch (_b) {
                window.gigya.logger.warn("failed to convert value to schema type", { value: val });
            }
        }
        return val;
    };
    FormInput.prototype.prePopulate = function (value) {
        this.previousValue = value;
        // Hidden fields are not pre-populated because it may overwrite a static value.
        if (this.type !== 'hidden') {
            this.setValue(value);
        }
        if (this._schemaWriteAccessMode === WriteAccessModes.clientCreate && !this.isEmpty(value)) {
            this.instanceElement.setAttribute('disabled', 'disabled');
        }
    };
    FormInput.prototype.disabled = function () {
        return Boolean(this.instanceElement && this.instanceElement.getAttribute('disabled'));
    };
    FormInput.prototype.setValue = function (dataValue, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        // Set new value directly on the DOM.
        var el = this.instanceElement;
        if (el.value !== dataValue) {
            el.value = String(dataValue);
        }
        // Trigger change.
        this.onFieldChange(setByScript);
    };
    Object.defineProperty(FormInput.prototype, "placeholderAttributeValue", {
        get: function () {
            var placeholderText = this.instanceElement.getAttribute(exports.FormInput_CONSTS.placeholderAttribute);
            if (placeholderText) {
                return placeholderText + (this.required() ? ' *' : '');
            }
            return '';
        },
        enumerable: true,
        configurable: true
    });
    FormInput.prototype.isHidden = function () {
        return utils_1.isHidden(this.instanceElement);
    };
    FormInput.prototype.isInHiddenContainer = function () {
        return utils_1.isFieldInHiddenContainer(this.instanceElement);
    };
    FormInput.prototype.evaluateConditionalAttributes = function () {
        var _this = this;
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.updateDisplayName(this.instanceElement || this.templateElement);
        if (this.showValidCheckmark(this.templateElement)) {
            this._showValidityMarker[ValidityStates.valid] = this._showValidityMarker[ValidityStates.pending] = true;
            this._showValidityOnInput();
        }
        if (this.getValidityState() === ValidityStates.error) {
            this.validate(function (validationInfo) {
                var errorInfo = {
                    field: validationInfo.field,
                    errorCode: validationInfo.errorCode,
                    errorType: validationInfo.errorType
                };
                _this._form.renderFieldError(errorInfo, true, undefined, Errors_1.ErrorType.server);
            });
        }
    };
    FormInput.prototype.executeConditionalResult = function (evaluationResult, conditionalAtt, element) {
        // Grab the last attribute value before it's set to the new value.
        var lastAttributeValue = conditionalAtt.lastAttributeValue;
        // Set new attributes in the DOM.
        evaluationResult = _super.prototype.executeConditionalResult.call(this, evaluationResult, conditionalAtt, element);
        // Only interested in changes.
        if (evaluationResult === lastAttributeValue) {
            return lastAttributeValue;
        }
        if (conditionalAtt.attributeName === exports.FormInput_CONSTS.required) {
            // The field may have been marked as required in the UI and triggered an error.
            // Triggering the field change event will clear the error if it was caused by the required status.
            if (this.getValidityState() === ValidityStates.error) {
                this.onFieldChange();
            }
            // WCAG compliance.
            this.setAriaRequired();
        }
        // Placeholder value updated via conditional attribute.
        this.setPlaceholderValue();
        return evaluationResult;
    };
    FormInput.prototype.setAriaRequired = function () {
        // #69533
        if (this.type === 'submit' || this.type === 'button' || this.type === 'gigya-phone-number-input') {
            return;
        }
        this.instanceElement.setAttribute('aria-required', this.required() ? 'true' : 'false');
    };
    FormInput.prototype.setPlaceholderValue = function () {
        if (this.placeholderAttributeValue) {
            var elementName = this.instanceElement.tagName.toLowerCase();
            var elementType = this.instanceElement.getAttribute('type');
            if (window.gigya.localInfo.isIE8 || window.gigya.localInfo.isIE9) {
                if (!this.placeHolderElement) {
                    this.createPlaceholderElement(elementName, elementType);
                }
                else {
                    window.gigya._.plugins.utils.DOM.setAttribute(this.placeHolderElement, 'value', this.placeholderAttributeValue);
                }
            }
            else {
                if ((elementName === 'input' && elementType !== 'checkbox' && elementType !== 'radio') || elementName === 'textarea') {
                    this.instanceElement.setAttribute('placeholder', this.placeholderAttributeValue);
                }
            }
        }
    };
    FormInput.prototype.onKeyUpForPlaceholder = function (e) {
        var input = e.srcElement['screenSetInstanceOf'][0];
        if (input.isCtrlKeyUp) {
            var keycode = e.keyCode;
            if (keycode === this.KEYCODE_LETTER_X) {
                // x character, backspace or delete
                input.togglePlaceholderStateView(true);
            }
        }
    };
    FormInput.prototype.onBlurForPlaceholder = function (event) {
        var el = event.srcElement;
        var currentValue = el['value'];
        var input = event.srcElement['screenSetInstanceOf'][0];
        if (!currentValue) {
            input.togglePlaceholderStateView(true);
        }
    };
    // this handler is for suppressing the text selection on the placeholder
    //public onTextSelectionStart(e)
    //{
    //    var input = e.srcElement['screenSetInstanceOf'][0] as FormInput;
    //    if (input.isCurrnetValuePlaceholderText) {
    //        event.returnValue = false;
    //    }
    //}
    FormInput.prototype.onContextMenuOpened = function (e) {
        event.returnValue = false;
    };
    FormInput.prototype.onPlaceholderFocused = function (e) {
        var element = e.srcElement;
        var input = element['screenSetInstanceOf'][0];
        input.togglePlaceholderStateView(false, e);
        event.cancelBubble = true;
        if (input._screenSet._placeholderIntervalID === -1) {
            input.togglePlaceholderStateView(false, e);
            input._screenSet._placeholderIntervalID = setInterval(function () {
                if (input._screenSet._placeholderIntervalID === -1) {
                    input.togglePlaceholderStateView(false, e);
                }
                else {
                    clearInterval(input._screenSet._placeholderIntervalID);
                }
            }, 100);
        }
    };
    //this handler is for cases where the user selects the text inside the element (in order to delete part of it)
    //public onTextSelected() {
    //    var el = event.srcElement as HTMLElement;
    //    var input = event.srcElement['screenSetInstanceOf'][0] as FormInput;
    //    input.isTextSelected = true;
    //}
    FormInput.prototype.onPlaceholderKeyDown = function (e) {
        var keycode = e.keyCode;
        var isEnteredValueDisplayable = utils_1.isKeyCodeDisplayable(keycode);
        var element = e.srcElement;
        var input = element['screenSetInstanceOf'][0];
        if (isEnteredValueDisplayable) {
            // hide the placeholder element and show the actual element
            input.togglePlaceholderStateView(false);
        }
        else if (keycode === input.KEY_CODE_BACKSPACE || keycode === input.KEY_CODE_DELETE) {
            event.returnValue = false;
        }
    };
    FormInput.prototype.onKeyDownForPlaceholder = function (e) {
        var keycode = e.keyCode;
        var isEnteredValueDisplayable = utils_1.isKeyCodeDisplayable(keycode);
        var input = e.srcElement['screenSetInstanceOf'][0];
        var lastValue = input.instanceElement.getAttribute('value');
        if (!isEnteredValueDisplayable && input.isCurrnetValuePlaceholderText && keycode == input.KEY_CODE_BACKSPACE) {
            event.returnValue = false;
        }
        else if (lastValue && lastValue.length == 1 && keycode == input.KEY_CODE_BACKSPACE) {
            // @ts-ignore
            e.srcElement.setAttribute('value', '');
            event.returnValue = false;
        }
        else if (input.isTextSelected && (keycode == input.KEY_CODE_DELETE || keycode == input.KEY_CODE_BACKSPACE)) {
            input.isTextSelected = false;
            input.togglePlaceholderStateView(true, event);
        }
        else if (e.ctrlKey) {
            input.isCtrlKeyUp = true;
        }
        else if (isEnteredValueDisplayable && input.isCurrnetValuePlaceholderText) {
            input.togglePlaceholderStateView(false);
        }
        else if (input.isCurrnetValuePlaceholderText && keycode == input.KEY_CODE_DELETE) {
            event.returnValue = false;
        }
    };
    FormInput.prototype.togglePlaceholderStateView = function (showPlaceholder, e) {
        var _this = this;
        if (e === void 0) { e = null; }
        // e: MSEventObj
        if (showPlaceholder) {
            if (e) {
                //this is to handle the select event where the text is erased and the placeholder value isn't set
                e.returnValue = false;
            }
            window.gigya.pluginUtils.DOM.showElement(this.placeHolderElement);
            window.gigya.pluginUtils.DOM.hideElement(this.instanceElement);
            window.gigya._.plugins.utils.DOM.setAttribute(this.instanceElement, 'value', '');
            if (!this.placeHolderElement) {
                setTimeout(function () {
                    _this.placeHolderElement.focus();
                }, 1000);
            }
        }
        else {
            window.gigya.pluginUtils.DOM.hideElement(this.placeHolderElement);
            window.gigya.pluginUtils.DOM.showElement(this.instanceElement);
            window.gigya._.plugins.utils.DOM.setAttribute(this.placeHolderElement, 'value', this.placeholderAttributeValue);
            this.instanceElement.focus();
        }
        this.isCurrnetValuePlaceholderText = showPlaceholder;
        this.isCtrlKeyUp = false;
        this.isTextSelected = false;
    };
    FormInput.prototype.getLoggerName = function () {
        return this.fieldName || _super.prototype.getLoggerName.call(this);
    };
    FormInput.prototype.getArrayKeyField = function () {
        return this.instanceElement.getAttribute(exports.FormInput_CONSTS.arrayKeyFieldAttribute);
    };
    FormInput.prototype.getArrayKeyValue = function () {
        return this.instanceElement.getAttribute(exports.FormInput_CONSTS.arrayKeyValueAttribute);
    };
    FormInput.prototype.getStoredInArrayValue = function () {
        var item = this.getStoredInArrayItem();
        var fieldName = this.getStoredInArrayFieldName();
        return item === null || item === void 0 ? void 0 : item[fieldName];
    };
    FormInput.prototype.getStoredInArrayFieldName = function () {
        var _a;
        return (_a = this.fieldName.split('.')) === null || _a === void 0 ? void 0 : _a.pop();
    };
    FormInput.prototype.getStoredInArrayItem = function () {
        var arrayKeyValue = this.getArrayKeyValue();
        var arrayKeyField = this.getArrayKeyField();
        var arrayData = this.getParentArray();
        return window.gigya.utils.array.first(arrayData, function (obj) { return obj[arrayKeyField] === arrayKeyValue; });
    };
    FormInput.prototype.getParentArray = function () {
        var nestedFormData = this._form.getFormData(false, true);
        var arrayRoot = this.getArrayRoot(true);
        return window.gigya.utils.object.getPropertyBySerializedName(nestedFormData, arrayRoot, true);
    };
    FormInput.prototype.runOnServerDone = function (callback) {
        Errors_1.notImplementerAbstract();
    };
    return FormInput;
}(TemplateElement_1.TemplateElement));
exports.FormInput = FormInput;
function integerCheck(fieldValue) {
    if (fieldValue && isNaN(parseInt(fieldValue)))
        return GSErrors_1.GSErrors.VALIDATION_ERROR;
    return GSErrors_1.GSErrors.OK;
}
function floatCheck(fieldValue) {
    if (fieldValue && isNaN(parseFloat(fieldValue)))
        return GSErrors_1.GSErrors.VALIDATION_ERROR;
    return GSErrors_1.GSErrors.OK;
}
function booleanCheck(fieldValue) {
    if (fieldValue == null)
        return GSErrors_1.GSErrors.VALIDATION_ERROR;
    return GSErrors_1.GSErrors.OK;
}
function dateCheck(fieldValue) {
    if (fieldValue) {
        var dateResult = window.gigya.global.date.getISODate(fieldValue); // Format is always ISO
        if (!dateResult)
            return GSErrors_1.GSErrors.VALIDATION_ERROR;
    }
    return GSErrors_1.GSErrors.OK;
}
var SchemaTypeChecks = {
    integer: integerCheck,
    long: integerCheck,
    float: floatCheck,
    boolean: booleanCheck,
    date: dateCheck,
};
utils_1.DeepFreeze(SchemaTypeChecks);
var formatPattern = /(.*?)\(['"](.*?)['"]\)$/;
function schemaFormatCheck(format) {
    var arFormat = format.match(formatPattern);
    if (arFormat) {
        var formatType = arFormat[1];
        var formatValue = arFormat[2];
        if (formatType && formatValue) {
            if (formatType === 'regex') {
                try {
                    // this regex = /^\/?(.*?)(?:\/((?:[dgimsuy](?!.*\1))*)?)?$/ is finding if a given value is one of the following format
                    // {regex_expression} or /{regex_expression}/ or /{regex_expression}/{flags}
                    var regexParts = formatValue.match(/^\/?(.*?)(?:\/((?:[dgimsuy](?!.*\1))*)?)?$/);
                    var regexExp = regexParts[1];
                    var regexFlags = regexParts[2];
                    var regexFormat_1 = new RegExp(regexExp, regexFlags);
                    regexFormat_1.test(''); // Run regex to make sure that regex will crush if necesary during schema load
                    return function (fieldValue) {
                        if (fieldValue) {
                            if (regexFormat_1.global) {
                                regexFormat_1.lastIndex = 0;
                            }
                            var test = regexFormat_1.test(fieldValue);
                            if (!test)
                                return GSErrors_1.GSErrors.VALIDATION_ERROR;
                        }
                        return GSErrors_1.GSErrors.OK;
                    };
                }
                catch (e) {
                    throw new Error('Unsupported regEx pattern: ' + e);
                }
            }
        }
    }
    throw new Error('Unsupported format: ' + format);
}
FormInput.addInputToLibrary(FormInput, FormInputPriorities.Fallback);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var RegisterForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var Errors_1 = __webpack_require__(/*! ../Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var ServerFormInput_1 = __webpack_require__(/*! ./ServerFormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ServerFormInput.ts");
var LoginIdInput = /** @class */ (function (_super) {
    tslib_1.__extends(LoginIdInput, _super);
    function LoginIdInput(context) {
        var _this = _super.call(this, context) || this;
        _this.isServerValidationEnabled = true;
        _this._serverValidateAvaliability = _this.showValidCheckmark(context.element);
        _this.loginIdMustBeEmail = context.fieldName === 'email';
        return _this;
    }
    LoginIdInput.FORM_TYPE_CRITERIA = function (context) {
        return context.form instanceof RegisterForm_1.RegisterForm && (context.fieldName === 'email' || context.fieldName === 'username');
    };
    LoginIdInput.prototype.showDataPending = function () {
        if (this.instanceElement) {
            this._form.renderFieldError({ field: this, errorCode: GSErrors_1.GSErrors.Data_Pending }, true);
        }
    };
    LoginIdInput.prototype.onKeyUp = function (e) {
        if (this.getValue() !== this.previousValue) {
            // Force all events to be fired because we've touched the field error status.
            this.previousValue = undefined;
            this.lastCheck = undefined;
            this.startServerQuery();
            this.showDataPending();
        }
        _super.prototype.onKeyUp.call(this, e);
    };
    LoginIdInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        var email = this.getEmailFromQueryParams();
        if (email) {
            this.prePopulate(email);
            this.instanceElement.setAttribute('disabled', 'disabled');
        }
    };
    LoginIdInput.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.lastCheck = null;
    };
    LoginIdInput.prototype.serverValidated = function () {
        return this._serverValidateAvaliability;
    };
    LoginIdInput.prototype.startServerValidation = function (fieldValue, callback) {
        var _this = this;
        if (!this.instanceElement) {
            return;
        }
        if (fieldValue === this.lastCheck) {
            // Nothing has changed since last check, no need to query the server again
            return;
        }
        this.showDataPending();
        this.lastCheck = fieldValue;
        this.clearServerError();
        this.instanceElement.removeAttribute(FormInput_1.FormInput_CONSTS.serverValidation);
        this.setValidityState(FormInput_1.ValidityStates.pending);
        if (this.isServerValidationEnabled === false) {
            // We've already tried to use the server-side validation and discovered that it's disabled.
            // Save API calls and don't try again.
            callback({
                errorCode: GSErrors_1.GSErrors.OK,
                field: this
            });
        }
        else {
            window.gigya.accounts.isAvailableLoginID({
                loginID: fieldValue,
                callback: function (res) { return _this.serverQueryDone(res, fieldValue, callback); },
            });
        }
    };
    LoginIdInput.prototype.serverQueryDone = function (res, checkedValue, callback) {
        // response is no longer relevant due to screen going out of view
        if (!this.instanceElement) {
            return;
        }
        // response is no longer relevant due to value change
        if (this.getValue() !== checkedValue) {
            return;
        }
        var errorCode = res.errorCode;
        switch (errorCode) {
            case GSErrors_1.GSErrors.OK:
                if (!window.gigya.utils.validation.isExplicitTrue(res.isAvailable)) {
                    errorCode = GSErrors_1.GSErrors.UNIQUE_IDENTIFIER_EXISTS;
                }
                break;
            // Console Site Settings has "Protect against login identifier harvesting" option.
            // This causes error code 403026 to be returned for all isAvailableLoginID calls.
            // This shouldn't show any error to the client, so transform to an "OK" response.
            case GSErrors_1.GSErrors.UNAUTHORIZED_ACCESS_ERROR:
                this.isServerValidationEnabled = false;
                errorCode = GSErrors_1.GSErrors.OK;
                break;
        }
        this.setServerError(errorCode);
        this.onServerEnd(errorCode);
        this._form.onInputChange(this, false); // triggers revalidation
        callback({
            errorCode: errorCode,
            field: this,
            errorType: Errors_1.ErrorType.server
        });
    };
    LoginIdInput.prototype.validateValue = function (formData, fieldValue, callback) {
        if (this.isServerValidationEnabled &&
            fieldValue !== this.lastCheck) {
            this.clearServerError();
        }
        if (fieldValue) {
            if (this.loginIdMustBeEmail &&
                (!this.schemaFormat) && // continue to hard coded email validation only if schema lacks format
                !window.gigya.pluginUtils.validation.isValidEmailLoginID(fieldValue)) {
                return callback({
                    errorCode: 400006 /* INVALID_PARAMETER_VALUE */,
                    field: this,
                    errorType: Errors_1.ErrorType.client
                });
            }
        }
        return _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    LoginIdInput.prototype.getEmailFromQueryParams = function () {
        return window.gigya.utils.URL.getParamValueFromURL('gig_email', window.location.search, undefined);
    };
    return LoginIdInput;
}(ServerFormInput_1.ServerFormInput));
exports.LoginIdInput = LoginIdInput;
FormInput_1.FormInput.addInputToLibrary(LoginIdInput, FormInput_1.FormInputPriorities.Important);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var PasswordStrengthWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var ScreenConsts_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.BasePasswordInput_CONSTS = {
    showPasswordStrength: 'show-password-strength',
};
utils_1.DeepFreeze(exports.BasePasswordInput_CONSTS);
var BasePasswordInput = /** @class */ (function (_super) {
    tslib_1.__extends(BasePasswordInput, _super);
    function BasePasswordInput(context) {
        var _this = _super.call(this, context) || this;
        _this.showPasswordStrengthConditionalExists = false;
        _this.showPasswordStrengthAttribute = '';
        utils_1.ForEach(_this.conditionalExpressions, function (el) {
            if (el.attributeName == exports.BasePasswordInput_CONSTS.showPasswordStrength) {
                _this.showPasswordStrengthConditionalExists = true;
                _this.showPasswordStrengthConditional = el;
            }
        });
        _this.showPasswordStrengthAttribute = window.gigya._.plugins.utils.DOM.getAttribute(_this.templateElement, exports.BasePasswordInput_CONSTS.showPasswordStrength);
        if (_this.showPasswordStrengthAttribute != null && _this.showPasswordStrengthAttribute.length) {
            _this.passwordStrengthOrientation = PasswordStrengthWidget_1.BubbleOrientations[_this.showPasswordStrengthAttribute];
            if (typeof _this.passwordStrengthOrientation === 'undefined')
                _this.passwordStrengthOrientation = _this._screenSet.isModal ? PasswordStrengthWidget_1.BubbleOrientations.left : PasswordStrengthWidget_1.BubbleOrientations.up;
            _this.showPasswordStrength =
                (typeof _this.passwordStrengthOrientation !== 'undefined' && _this.passwordStrengthOrientation != PasswordStrengthWidget_1.BubbleOrientations.none) ||
                    _this.showPasswordStrengthConditionalExists;
        }
        else {
            _this.showPasswordStrength = false;
        }
        return _this;
    }
    BasePasswordInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.showPasswordStrength) {
            var bubbleHtml = '';
            if (this.showPasswordStrengthAttribute &&
                typeof this.passwordStrengthOrientation !== 'undefined' &&
                this.passwordStrengthOrientation !== PasswordStrengthWidget_1.BubbleOrientations.none) {
                bubbleHtml = window.gigya.utils.templates.fill(this._screenSet.getTemplates().inlinedPasswordStrength, {
                    orientation: PasswordStrengthWidget_1.BubbleOrientations[this.passwordStrengthOrientation],
                });
            }
            else {
                bubbleHtml = window.gigya.utils.templates.fill(this._screenSet.getTemplates().inlinedPasswordStrength, {
                    orientation: PasswordStrengthWidget_1.BubbleOrientations[PasswordStrengthWidget_1.BubbleOrientations.none],
                });
            }
            this.instanceElement.insertAdjacentHTML('afterend', bubbleHtml);
            var bubbleElement = (this.instanceElement.nextElementSibling
                ? this.instanceElement.nextElementSibling
                : this.instanceElement.nextSibling); // IE8 compatability
            this.passwordStrengthWidget = new PasswordStrengthWidget_1.PasswordStrengthWidget(this._form, bubbleElement);
            if (this.showPasswordStrengthConditionalExists) {
                this.passwordStrengthWidget.templateElement.setAttribute(ScreenConsts_1.Screen_CONSTS.conditionalAttributePrefix + 'data-bubble-orientation', this.showPasswordStrengthConditional.condition);
                var conditional = {
                    attributeName: 'data-bubble-orientation',
                    condition: this.showPasswordStrengthConditional.condition,
                    defaultValue: this.showPasswordStrengthConditional.defaultValue,
                    lastAttributeValue: this.showPasswordStrengthConditional.defaultValue,
                    isWidgetParamTag: false,
                };
                this.passwordStrengthWidget.conditionalExpressions.push(conditional);
            }
            this.passwordStrengthWidget._passwordField = this; // bind to this password field
            TemplateElement_1.TemplateElement.prepareTemplateInstanceElement(bubbleElement, false);
            this.passwordStrengthWidget.linkInstanceElement(bubbleElement.parentElement);
        }
    };
    BasePasswordInput.prototype.unlinkInstanceElement = function () {
        if (this.showPasswordStrength) {
            this.passwordStrengthWidget.unlinkInstanceElement();
            this.passwordStrengthWidget.unlinkTemplate();
            this.passwordStrengthWidget = null;
        }
        _super.prototype.unlinkInstanceElement.call(this);
    };
    BasePasswordInput.prototype.getTruncatedValue = function (val) {
        return String(val);
    };
    BasePasswordInput.prototype.validateValue = function (formData, fieldValue, callback) {
        var _this = this;
        _super.prototype.validateValue.call(this, formData, fieldValue, function (validationInfo) {
            if (validationInfo.errorCode !== GSErrors_1.GSErrors.OK)
                return callback(validationInfo);
            if (_this.isPasswordSchemaValidated()) {
                var apiData = _this._screenSet.getApiData();
                if (apiData.getPolicies && apiData.getPolicies.passwordComplexity && _this.shouldValidatePasswordComplexity(fieldValue)) {
                    var oComplexity = apiData.getPolicies.passwordComplexity || {};
                    var oPassStrength = PasswordStrengthWidget_1.getPasswordStrengthData(fieldValue);
                    if (!PasswordStrengthWidget_1.isPasswordStrengthValid(fieldValue, oPassStrength, oComplexity))
                        return callback({
                            errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
                            field: _this,
                        });
                }
            }
            callback(validationInfo);
        });
    };
    BasePasswordInput.prototype.getValue = function (el, currentValue) {
        if (el === void 0) { el = this.instanceElement; }
        return el.value === undefined ? '' : el.value;
    };
    BasePasswordInput.prototype.isPasswordSchemaValidated = function () {
        return this._form.isPasswordSchemaValidated();
    };
    BasePasswordInput.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.passwordStrengthWidget) {
            this.passwordStrengthWidget.evaluateConditionalAttributes();
        }
    };
    BasePasswordInput.prototype.isPasswordStrengthWidgetBound = function () {
        return this.showPasswordStrength;
    };
    BasePasswordInput.prototype.shouldValidatePasswordComplexity = function (fieldValue) {
        return this.required() || !this.isEmpty(fieldValue);
    };
    return BasePasswordInput;
}(FormInput_1.FormInput));
exports.BasePasswordInput = BasePasswordInput;
var PasswordInput = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordInput, _super);
    function PasswordInput(context) {
        var _this = _super.call(this, context) || this;
        _this._form._passwordInputs.push(_this);
        return _this;
    }
    PasswordInput.FORM_TYPE_CRITERIA = function (context) {
        return context.fieldName === 'password';
    };
    PasswordInput.prototype.isPasswordSchemaValidated = function () {
        return _super.prototype.isPasswordSchemaValidated.call(this);
    };
    return PasswordInput;
}(BasePasswordInput));
exports.PasswordInput = PasswordInput;
FormInput_1.FormInput.addInputToLibrary(PasswordInput);
var NewPasswordInput = /** @class */ (function (_super) {
    tslib_1.__extends(NewPasswordInput, _super);
    function NewPasswordInput(context) {
        var _this = _super.call(this, context) || this;
        _this._form._passwordInputs.unshift(_this);
        return _this;
    }
    NewPasswordInput.FORM_TYPE_CRITERIA = function (context) {
        return context.fieldName === 'newPassword';
    };
    NewPasswordInput.prototype.isPasswordSchemaValidated = function () {
        return true;
    };
    return NewPasswordInput;
}(BasePasswordInput));
exports.NewPasswordInput = NewPasswordInput;
FormInput_1.FormInput.addInputToLibrary(NewPasswordInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput.ts":
/*!********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! ./FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var FlagService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
var extendedRegex = /^\+?[1-9]{1,4}?(\(\d{1,3}?\))?[- ]?\d{1,4}([- ]?\d{1,4}[- ]?\d{1,9})?$/;
var noSpecialSymbolsRegex = /^\+?[1-9]\d{1,14}$/;
exports.gigyaPhoneNumberInput = 'gigya-phone-number-input';
exports.PhoneInput_Attributes = {
    countryCodesSelection: 'data-country-codes-selection',
    countryCodes: 'data-country-codes'
};
var CountryCodeSelection;
(function (CountryCodeSelection) {
    CountryCodeSelection["All"] = "all";
    CountryCodeSelection["Specific"] = "specific";
})(CountryCodeSelection = exports.CountryCodeSelection || (exports.CountryCodeSelection = {}));
var PhoneNumberInput = /** @class */ (function (_super) {
    tslib_1.__extends(PhoneNumberInput, _super);
    function PhoneNumberInput() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.countryCodesDataStructure = {};
        _this.countryCodesList = [];
        _this.onCountryCodeSelected = function (setByScript) {
            _this.countryCodeSelectHadChanged = true;
            var selectedValue = _this.countryCodeSelect.value;
            if (selectedValue === '0') // the default value - it represents no value
                return;
            _this.countryCodeSelect.options[0].value = selectedValue;
            _this.countryCodeSelect.options[0].text = selectedValue;
            _this.countryCodeSelect.selectedIndex = 0;
            // Trigger change.
            _this.onFieldChange(setByScript);
        };
        _this.onSubscriberNumberChanged = function () {
            _this.subscriberNumberHadChanged = true;
        };
        return _this;
    }
    PhoneNumberInput.prototype.hasCountryCodeSelectChanged = function () {
        return this.countryCodeSelectHadChanged;
    };
    PhoneNumberInput.prototype.hasSubscriberNumberChanged = function () {
        return this.subscriberNumberHadChanged;
    };
    PhoneNumberInput.FORM_TYPE_CRITERIA = function (context) {
        return context.element instanceof HTMLFieldSetElement
            && context.type === exports.gigyaPhoneNumberInput;
    };
    PhoneNumberInput.prototype.setPlaceholderValue = function () {
        if (this.subscriberNumber) {
            this.subscriberNumber.setAttribute('placeholder', this.placeholderAttributeValue);
        }
    };
    PhoneNumberInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.isSpecificCountryCodes) {
            this.filterCountryCodes();
        }
        this.countryCodeSelect = this.instanceElement.querySelector('select');
        this.subscriberNumber = this.instanceElement.querySelector('input');
        if (!this.countryCodeSelect || !this.subscriberNumber) {
            window.gigya.logger.warn("Phone Number Input: missing country select or mobile phone text box");
            return;
        }
        this.setCountryCodeSelectAriaLabel();
        this.generateCountryCodesDataStructure();
        this.setupChangeEventHandler();
    };
    PhoneNumberInput.prototype._showValidityOnInput = function (element) {
        if (element === void 0) { element = this.instanceElement; }
        if (!this.shouldValidate())
            return;
        var countryCodeValidityState = this.getCountryCodeValidityState();
        _super.prototype._showValidityOnInput.call(this, this.countryCodeSelect, countryCodeValidityState, false);
        if (countryCodeValidityState === FormInput_1.ValidityStates.error) {
            this.countryCodeSelect.blur();
        }
        var subscriberNumberValidityState = this.getSubscriberNumberValidityState();
        var allowValidityMarker = (countryCodeValidityState === FormInput_1.ValidityStates.valid && subscriberNumberValidityState === FormInput_1.ValidityStates.valid);
        _super.prototype._showValidityOnInput.call(this, this.subscriberNumber, subscriberNumberValidityState, allowValidityMarker);
    };
    PhoneNumberInput.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.removeChangeEventHandler();
    };
    PhoneNumberInput.prototype.setValidityState = function (validityState, fromServer) {
        if (fromServer === void 0) { fromServer = false; }
        if (this.countryCodeSelect.value !== this.countryCodeSelectPreviousValue
            || this.subscriberNumber.value !== this.subscriberNumberPreviousValue) {
            this.countryCodeSelectPreviousValue = this.countryCodeSelect.value;
            this.subscriberNumberPreviousValue = this.subscriberNumber.value;
            this._validityState = FormInput_1.ValidityStates._undefined;
        }
        _super.prototype.setValidityState.call(this, validityState, fromServer);
    };
    PhoneNumberInput.prototype.validateValue = function (formData, fieldValue, callback) {
        var _this = this;
        if (!this.shouldValidate())
            return callback({ errorCode: GSErrors_1.GSErrors.OK, field: this });
        if (!this.countryCodeSelect.value || this.countryCodeSelect.value === '0' || !this.subscriberNumber.value)
            fieldValue = '';
        return _super.prototype.validateValue.call(this, formData, fieldValue, function (validationInfo) {
            if (validationInfo.errorCode !== GSErrors_1.GSErrors.OK || _this.schemaFormat)
                return callback(validationInfo); // basic validation failed
            var errorCode = _this.regExMatchingForE164.test(fieldValue) ?
                GSErrors_1.GSErrors.OK : // valid phone number in e.164 format
                GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE;
            return callback({
                errorCode: errorCode, field: _this,
            });
        });
    };
    PhoneNumberInput.prototype.getValue = function (el, currentValue) {
        if (el === void 0) { el = this.instanceElement; }
        if (!this.countryCodeSelect || !this.subscriberNumber)
            return '';
        var countryCode = this.countryCodeSelect.value === '0' ? "" : this.countryCodeSelect.value;
        var subscriberNumber = this.subscriberNumber.value.replace(/\s/gm, ''); // removes any whitespace character
        if (countryCode !== '+39') { // Italy (phone must start with 0)
            subscriberNumber = subscriberNumber.replace(/^0+/, '');
        }
        return "" + countryCode + subscriberNumber;
    };
    PhoneNumberInput.prototype.setValue = function (phoneNumber, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        if (!this.countryCodeSelect || !this.subscriberNumber) {
            return;
        }
        if (this.getValue() !== phoneNumber) {
            var countryCode = this.getCountryCode(phoneNumber);
            var subscriberNumber = this.getSubscriberNumber(phoneNumber, countryCode);
            this.countryCodeSelect.value = countryCode;
            this.subscriberNumber.value = subscriberNumber;
            this.onCountryCodeSelected(setByScript);
        }
    };
    PhoneNumberInput.prototype.markAsDirty = function () {
        this.countryCodeSelectHadChanged = true;
        this.subscriberNumberHadChanged = true;
    };
    PhoneNumberInput.prototype.markAsPristine = function () {
        this.countryCodeSelectHadChanged = false;
        this.subscriberNumberHadChanged = false;
    };
    PhoneNumberInput.prototype.shouldValidate = function () {
        if (this.schemaFormat) {
            return true;
        }
        if (this.required() && (this._form.submitButtonClicked || this.areBothInputsDirty())) {
            return true;
        }
        return this.hasPreviousValue() && this._form.submitButtonClicked && this.isDirty();
    };
    PhoneNumberInput.prototype.focus = function () {
        var _a;
        (_a = this.countryCodeSelect) === null || _a === void 0 ? void 0 : _a.focus();
    };
    PhoneNumberInput.prototype.getConditionalExpression = function (el) {
        return tslib_1.__spreadArrays(_super.prototype.getConditionalExpression.call(this, el), utils_1.getConditionalAttributeExpressions(this.subscriberNumber), utils_1.getConditionalAttributeExpressions(this.countryCodeSelect));
    };
    PhoneNumberInput.prototype.generateCountryCodesDataStructure = function () {
        var _this = this;
        var _a;
        // get all option with value attr except the one with value "0"
        var countryCodeOptions = (_a = this.countryCodeSelect) === null || _a === void 0 ? void 0 : _a.querySelectorAll('option[value]:not([value="0"])');
        countryCodeOptions === null || countryCodeOptions === void 0 ? void 0 : countryCodeOptions.forEach(function (countryCodeOption) {
            var ds = _this.countryCodesDataStructure;
            for (var _i = 0, _a = countryCodeOption.value; _i < _a.length; _i++) {
                var digit = _a[_i];
                if (!ds[digit]) {
                    ds[digit] = {};
                }
                ds = ds[digit];
            }
        });
        this.countryCodesList = Array.prototype.slice.call(countryCodeOptions)
            .map(function (option) { return option.value; });
    };
    PhoneNumberInput.prototype.filterCountryCodes = function () {
        if (!this.specificCountryCodes.length) {
            return;
        }
        var specificCountryCodes = ['0'].concat(this.specificCountryCodes); //  add default value and split the specific country codes
        this.instanceElement.querySelector('optgroup').remove(); // Remove the first options group
        for (var _i = 0, _a = this.countryCodesOptions; _i < _a.length; _i++) {
            var countryCodesOption = _a[_i];
            if (countryCodesOption.value && specificCountryCodes.indexOf(countryCodesOption.value) === -1) {
                countryCodesOption.remove();
            }
        }
    };
    Object.defineProperty(PhoneNumberInput.prototype, "isSpecificCountryCodes", {
        get: function () {
            var _a;
            return ((_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(exports.PhoneInput_Attributes.countryCodesSelection)) === CountryCodeSelection.Specific;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberInput.prototype, "specificCountryCodes", {
        get: function () {
            var _a;
            var specificCountryCodes = (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(exports.PhoneInput_Attributes.countryCodes);
            return specificCountryCodes.length ? specificCountryCodes === null || specificCountryCodes === void 0 ? void 0 : specificCountryCodes.split(',') : [];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberInput.prototype, "countryCodesOptions", {
        get: function () {
            var _a, _b;
            return Array.from(((_b = (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector('select')) === null || _b === void 0 ? void 0 : _b.options) || []);
        },
        enumerable: true,
        configurable: true
    });
    PhoneNumberInput.prototype.getCountryCode = function (phoneNumber) {
        var res = "";
        var temp = "";
        var ds = this.countryCodesDataStructure;
        for (var _i = 0, phoneNumber_1 = phoneNumber; _i < phoneNumber_1.length; _i++) {
            var digit = phoneNumber_1[_i];
            if (!ds[digit]) {
                break;
            }
            temp = "" + temp + digit;
            if (this.countryCodesList.includes(temp)) {
                res = temp;
            }
            ds = ds[digit];
        }
        return res;
    };
    PhoneNumberInput.prototype.getSubscriberNumber = function (phoneNumber, countryCode) {
        countryCode = countryCode.replace('\+', '\\+');
        var regExp = new RegExp("^" + countryCode);
        return phoneNumber.replace(regExp, '');
    };
    PhoneNumberInput.prototype.setupChangeEventHandler = function () {
        this.countryCodeSelect.addEventListener('change', this.onCountryCodeSelected);
        this.subscriberNumber.addEventListener('input', this.onSubscriberNumberChanged);
    };
    PhoneNumberInput.prototype.removeChangeEventHandler = function () {
        this.countryCodeSelect.removeEventListener('change', this.onCountryCodeSelected);
        this.subscriberNumber.removeEventListener('input', this.onSubscriberNumberChanged);
    };
    PhoneNumberInput.prototype.getCountryCodeValidityState = function () {
        if (this._validityState === FormInput_1.ValidityStates._undefined) {
            return FormInput_1.ValidityStates._undefined;
        }
        return (!this.countryCodeSelect.value || this.countryCodeSelect.value === '0')
            ? FormInput_1.ValidityStates.error
            : FormInput_1.ValidityStates.valid;
    };
    PhoneNumberInput.prototype.getSubscriberNumberValidityState = function () {
        if (this._validityState === FormInput_1.ValidityStates._undefined) {
            return FormInput_1.ValidityStates._undefined;
        }
        if (!this.subscriberNumber.value || this.getCountryCodeValidityState() !== FormInput_1.ValidityStates.valid) {
            return FormInput_1.ValidityStates.error;
        }
        if (this.schemaFormat) {
            return this.isSchemaValid ?
                FormInput_1.ValidityStates.valid :
                FormInput_1.ValidityStates.error;
        }
        return this.regExMatchingForE164.test(this.getValue()) ?
            FormInput_1.ValidityStates.valid :
            FormInput_1.ValidityStates.error;
    };
    PhoneNumberInput.prototype.areBothInputsDirty = function () {
        return this.hasCountryCodeSelectChanged() && this.hasSubscriberNumberChanged();
    };
    PhoneNumberInput.prototype.isDirty = function () {
        return this.hasCountryCodeSelectChanged() || this.hasSubscriberNumberChanged();
    };
    PhoneNumberInput.prototype.setCountryCodeSelectAriaLabel = function () {
        var _a, _b;
        var label = (_a = this.countryCodeSelect) === null || _a === void 0 ? void 0 : _a.querySelector('[value="0"]');
        (_b = this.countryCodeSelect) === null || _b === void 0 ? void 0 : _b.setAttribute('aria-label', label === null || label === void 0 ? void 0 : label.innerText);
    };
    Object.defineProperty(PhoneNumberInput.prototype, "regExMatchingForE164", {
        get: function () {
            return FlagService_1.FlagService.useExtendedPhoneNumberRegex ? extendedRegex : noSpecialSymbolsRegex;
        },
        enumerable: true,
        configurable: true
    });
    return PhoneNumberInput;
}(FormInput_1.FormInput));
exports.PhoneNumberInput = PhoneNumberInput;
FormInput_1.FormInput.addInputToLibrary(PhoneNumberInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput.ts":
/*!**************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var DOM_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/Utils/DOM */ "./src/core/Gigya.Js/app/Utils/DOM.ts");
var ScreenConsts_1 = __webpack_require__(/*! ../ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
exports.RadioInput_CONSTS = {
    wrapperSelector: '.gigya-composite-control-multi-choice',
    displayNameExpressionAttr: ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix + ":" + FormInput_1.FormInput_CONSTS.displayName
};
var RadioInput = /** @class */ (function (_super) {
    tslib_1.__extends(RadioInput, _super);
    function RadioInput(context) {
        return _super.call(this, context) || this;
    }
    RadioInput.FORM_TYPE_CRITERIA = function (context) {
        return context.type === 'radio';
    };
    // getValue only returns value of current single radio button.
    // To validate radio group, we need to get value of the selected button - value the field mapped to radio group currently has
    RadioInput.prototype.getValidateValue = function (formData) {
        var arrayKeyValue = this.getArrayKeyValue();
        var arrayKeyField = this.getArrayKeyField();
        if (arrayKeyValue && arrayKeyField) {
            return this.getStoredInArrayValue();
        }
        return formData[this.getName(false, true)];
    };
    RadioInput.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this._schema = undefined; // disable schema checks for radio buttons
        this.groupRadioButtonArrayFields();
        this.addDisplayName();
    };
    RadioInput.prototype.setValue = function (dataValue, setByScript) {
        if (setByScript === void 0) { setByScript = true; }
        // Set new value directly on the DOM.
        var el = this.instanceElement;
        el.checked = dataValue.toString() === el.value;
        // Trigger change.
        this.onFieldChange(setByScript);
    };
    RadioInput.prototype.getValue = function (el) {
        if (el === void 0) { el = this.instanceElement; }
        var value = _super.prototype.getValue.call(this, el);
        return el.checked ? value : null;
    };
    RadioInput.prototype.groupRadioButtonArrayFields = function () {
        if (this.instanceElement) {
            // #44366 - Group radio buttons by schema field name and array key field.
            var name = this.instanceElement.getAttribute('name');
            var arrayKeyValue = this.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute);
            if (name && arrayKeyValue) {
                this.instanceElement.setAttribute('name', name + "[" + arrayKeyValue + "]");
            }
        }
    };
    RadioInput.prototype.addDisplayName = function () {
        if (this.instanceElement) {
            var radioWrapper = DOM_1.getClosestElement(this.instanceElement, exports.RadioInput_CONSTS.wrapperSelector);
            var firstRadioInput = radioWrapper === null || radioWrapper === void 0 ? void 0 : radioWrapper.querySelector('input');
            var displayName = firstRadioInput === null || firstRadioInput === void 0 ? void 0 : firstRadioInput.getAttribute(exports.RadioInput_CONSTS.displayNameExpressionAttr);
            if (displayName) {
                this.instanceElement.setAttribute(exports.RadioInput_CONSTS.displayNameExpressionAttr, displayName);
            }
        }
    };
    return RadioInput;
}(FormInput_1.FormInput));
exports.RadioInput = RadioInput;
FormInput_1.FormInput.addInputToLibrary(RadioInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var CheckboxInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var RememeberInput = /** @class */ (function (_super) {
    tslib_1.__extends(RememeberInput, _super);
    function RememeberInput(context) {
        var _this = _super.call(this, context) || this;
        _this._form._rememberMe = _this;
        return _this;
    }
    RememeberInput.FORM_TYPE_CRITERIA = function (context) {
        return context.fieldName === 'remember';
    };
    return RememeberInput;
}(CheckboxInput_1.CheckboxInput));
exports.RememeberInput = RememeberInput;
FormInput_1.FormInput.addInputToLibrary(RememeberInput, FormInput_1.FormInputPriorities.Important);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var RetypePasswordInput = /** @class */ (function (_super) {
    tslib_1.__extends(RetypePasswordInput, _super);
    function RetypePasswordInput(context) {
        var _this = _super.call(this, context) || this;
        _this._form._passwordRetypes.push(_this);
        return _this;
    }
    RetypePasswordInput.FORM_TYPE_CRITERIA = function (context) {
        return context.fieldName === 'passwordRetype';
    };
    RetypePasswordInput.prototype.validateValue = function (formData, fieldValue, callback) {
        if (this._form._validatedPassword) {
            var passwordValue = this._form._validatedPassword.getValue();
            if (passwordValue !== '' && passwordValue !== fieldValue)
                return callback({
                    field: this,
                    errorCode: GSErrors_1.GSErrors.VALIDATION_ERROR,
                });
        }
        _super.prototype.validateValue.call(this, formData, fieldValue, callback);
    };
    return RetypePasswordInput;
}(FormInput_1.FormInput));
exports.RetypePasswordInput = RetypePasswordInput;
FormInput_1.FormInput.addInputToLibrary(RetypePasswordInput);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ServerFormInput.ts":
/*!*******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ServerFormInput.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var FormInput_1 = __webpack_require__(/*! ./FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var GSErrors = window.gigya.GSErrors;
var ServerFieldStates;
(function (ServerFieldStates) {
    ServerFieldStates[ServerFieldStates["NotStarted"] = 0] = "NotStarted";
    ServerFieldStates[ServerFieldStates["InProgress"] = 1] = "InProgress";
    ServerFieldStates[ServerFieldStates["Done"] = 2] = "Done";
    ServerFieldStates[ServerFieldStates["Error"] = 3] = "Error";
})(ServerFieldStates = exports.ServerFieldStates || (exports.ServerFieldStates = {}));
var ServerFormInput = /** @class */ (function (_super) {
    tslib_1.__extends(ServerFormInput, _super);
    function ServerFormInput(context) {
        var _this = _super.call(this, context) || this;
        _this.serverState = ServerFieldStates.NotStarted;
        _this.callbacks = new Array();
        return _this;
    }
    ServerFormInput.prototype.startServerQuery = function () {
        this.serverState = ServerFieldStates.InProgress;
    };
    ServerFormInput.prototype.onServerEnd = function (errorCode) {
        var _this = this;
        this.serverState = errorCode == GSErrors.OK ? ServerFieldStates.Done : ServerFieldStates.Error;
        if (this.callbacks.length) {
            utils_1.ForEach(this.callbacks, function (callback) { return callback(_this.serverState, _this); });
            this.callbacks = new Array();
        }
    };
    ServerFormInput.prototype.runOnServerDone = function (callback) {
        if (this.serverState !== ServerFieldStates.InProgress)
            callback(this.serverState, this);
        else
            this.callbacks.push(callback);
    };
    return ServerFormInput;
}(FormInput_1.FormInput));
exports.ServerFormInput = ServerFormInput;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/index.ts":
/*!*********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/index.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.PasswordInputs = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts");
exports.ButtonInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput.ts");
exports.CheckboxInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts");
exports.CommunicationCheckboxInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CommunicationCheckboxInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CommunicationCheckboxInput.ts");
exports.EmailInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput.ts");
exports.FormInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
exports.AddressInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/AddressInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/AddressInput.ts");
exports.LoginIdInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput.ts");
exports.PhoneNumberInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput.ts");
exports.RadioInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput.ts");
exports.RememberInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput.ts");
exports.RetypePasswordInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput.ts");


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts":
/*!*******************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ConflictHandling;
(function (ConflictHandling) {
    ConflictHandling[ConflictHandling["fail"] = 0] = "fail";
    ConflictHandling[ConflictHandling["saveProfileAndFail"] = 1] = "saveProfileAndFail";
})(ConflictHandling = exports.ConflictHandling || (exports.ConflictHandling = {}));
exports.LoginModes = {
    connect: {
        name: 'connect'
    },
    standard: {
        name: 'standard',
        getLoginProviders: function (apiData, params, regToken) {
            var enabledProviders = params['enabledProviders'];
            if (typeof enabledProviders !== 'string')
                return null;
            return enabledProviders.toLowerCase();
        },
        filterParams: function (params) {
            delete params.regToken;
            delete params.instanceID;
            delete params.getInstance;
            return params;
        },
    },
    reAuth: {
        name: 'reAuth',
        getLoginProviders: function (apiData, params, regToken) {
            var currentProviders = apiData.getAccountInfo && apiData.getAccountInfo.socialProviders;
            var identities = apiData.getAccountInfo && apiData.getAccountInfo.identities;
            if (!currentProviders)
                return null;
            currentProviders = currentProviders.toLowerCase();
            var providers = currentProviders.split(',');
            if (identities) {
                // remove identities that are allowLogin false
                utils_1.ForEach(identities, function (identity) {
                    if (!identity.allowsLogin) {
                        var idx = providers.indexOf(identity.provider.toLowerCase());
                        if (idx > -1)
                            providers.splice(idx, 1);
                    }
                });
            }
            return providers.join(',');
        },
        filterParams: function (params) {
            delete params.instanceID;
            delete params.getInstance;
            return params;
        },
    },
    link: {
        name: 'link',
        getLoginProviders: function (apiData, params, regToken) {
            var _a, _b, _c, _d;
            if (!regToken)
                return null;
            return (_d = (_c = (_b = (_a = apiData === null || apiData === void 0 ? void 0 : apiData.getConflictingAccount) === null || _a === void 0 ? void 0 : _a.conflictingAccount) === null || _b === void 0 ? void 0 : _b.loginProviders) === null || _c === void 0 ? void 0 : _c.join(',')) === null || _d === void 0 ? void 0 : _d.toLowerCase();
        },
        filterParams: function (params) {
            delete params.instanceID;
            delete params.getInstance;
            return params;
        },
    },
};
utils_1.DeepFreeze(exports.LoginModes);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/SchemaTypeConverter.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/SchemaTypeConverter.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var stringConverter = function (value) { return window.gigya.utils.stringUtils.trim(value); };
var numberConverter = function (value) { return parseInt(value, 10); };
var floatConverter = function (value) { return parseFloat(value); };
var booleanConverter = function (value) { return String(value) === 'true'; };
var schemaTypeConverterMapping = {
    'string': stringConverter,
    'basic-string': stringConverter,
    'encrypted-string': stringConverter,
    'text': stringConverter,
    'date': stringConverter,
    'integer': numberConverter,
    'long': numberConverter,
    'float': floatConverter,
    'boolean': booleanConverter,
};
exports.schemaTypeToConverter = function (schemaType) {
    return schemaTypeConverterMapping[schemaType] || stringConverter;
};


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts":
/*!***************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var ScreenOptions_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ErrorDisplayElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var ScreenConsts_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
var PluginStyles_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/PluginStyles */ "./src/core/Gigya.Js.Plugin/app/PluginStyles.ts");
var Screen = /** @class */ (function (_super) {
    tslib_1.__extends(Screen, _super);
    function Screen(_screenSet, templateElement) {
        var _this = _super.call(this, templateElement, _screenSet) || this;
        _this._screenSet = _screenSet;
        _this.templateElement = templateElement;
        _this._errorDisplayElements = {};
        _this._profilePhotos = new Array();
        _this._captchas = new Array();
        _this._others = new Array();
        if (!_this.ID)
            _this.warn('screen is missing an id');
        if (/[^-_0-9a-zA-Z]/.test(_this.ID))
            _this.warn('screen id contains special characters that may contain special meaning');
        ScreenOptions_1.ScreenOptions.call(_this, templateElement, _screenSet.screenOptions);
        _this.prepareBoundedToFormElements();
        _this._forms = BaseForm_1.BaseForm.registerForms(_this);
        _this._widgets = BaseScreenWidget_1.BaseScreenWidget.registerWidgets(_this);
        // handling of normal DOM elements that use gigya logic
        // Another check if the group is active from the screenset plugin
        _this.prepareOtherElements();
        _this.setCssClass();
        // replacing all "for" attribute from the screen template
        utils_1.replaceAttribute(_this.templateElement, 'for', TemplateElement_1.TemplateElement_CONSTS.elementFor);
        return _this;
    }
    Screen.prototype.prepareBoundedToFormElements = function () {
        var _this = this;
        var boundedElements = new Array();
        Screen.utils.ForEach(ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.gigyaClasses, function (gigyaClass) {
            boundedElements = boundedElements.concat(Array.prototype.slice.call(_this.templateElement.querySelectorAll("." + gigyaClass)));
        });
        Screen.utils.ForEach(boundedElements, function (el) {
            var boundedElement = new ErrorDisplayElement_1.ErrorDisplayElement(el, _this);
            var boundedList = _this._errorDisplayElements[boundedElement.boundedTo];
            if (!boundedList)
                boundedList = _this._errorDisplayElements[boundedElement.boundedTo] = [];
            boundedList.push(boundedElement);
        });
    };
    Object.defineProperty(Screen.prototype, "variantGroupId", {
        get: function () {
            var _a;
            return (_a = this.templateElement) === null || _a === void 0 ? void 0 : _a.getAttribute(ScreenConsts_1.Screen_CONSTS.dataVariantGroup);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Screen.prototype, "abTestId", {
        get: function () {
            var _a;
            return (_a = this.templateElement) === null || _a === void 0 ? void 0 : _a.getAttribute(ScreenConsts_1.Screen_CONSTS.dataVariantTestId);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Screen.prototype, "abTestingData", {
        get: function () {
            return {
                testId: this.abTestId,
                variantId: this.ID,
                requestedScreenId: this.requestedScreenId
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Screen.prototype, "variantPercentage", {
        get: function () {
            var _a;
            var variantPercentage = parseInt((_a = this.templateElement) === null || _a === void 0 ? void 0 : _a.getAttribute(ScreenConsts_1.Screen_CONSTS.dataVariantPercentage));
            if (!isNaN(variantPercentage)) {
                return variantPercentage;
            }
            return 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Screen.prototype, "isOriginalVariant", {
        get: function () {
            var _a;
            return (_a = this.templateElement) === null || _a === void 0 ? void 0 : _a.hasAttribute(ScreenConsts_1.Screen_CONSTS.dataVariantOriginalScreen);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Screen.prototype, "isScreenVariant", {
        get: function () {
            return this.requestedScreen !== this.ID;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Screen.prototype, "requestedScreen", {
        get: function () {
            return this.requestedScreenId || this.ID;
        },
        enumerable: true,
        configurable: true
    });
    Screen.prototype.addSpecificErrorBinds = function (boundedElements) {
        var _this = this;
        if (boundedElements === void 0) { boundedElements = []; }
        var boundedErrorElements = [];
        Screen.utils.ForEach(boundedElements, function (el) {
            var boundedElement = new ErrorDisplayElement_1.ErrorDisplayElement(el, _this);
            _this._errorDisplayElements[boundedElement.boundedTo] = (_this._errorDisplayElements[boundedElement.boundedTo] || []).concat([boundedElement]);
            boundedErrorElements.push(boundedElement);
        });
        boundedErrorElements.forEach(function (el) { return el.linkInstanceElement(_this.instanceElement); });
        return boundedErrorElements;
    };
    Screen.prototype.removeSpecificErrorBinds = function (boundedErrors) {
        var _this = this;
        if (boundedErrors === void 0) { boundedErrors = []; }
        Screen.utils.ForEach(boundedErrors, function (errorDisplay) {
            delete _this._errorDisplayElements[errorDisplay.boundedTo];
            errorDisplay.unlinkInstanceElement();
        });
    };
    Screen.prototype.addDynamicWidgets = function (rootEl, params) {
        var _this = this;
        if (params === void 0) { params = {}; }
        var newWidgets = BaseScreenWidget_1.BaseScreenWidget.registerDynamicWidgets(this, rootEl);
        if (params === null || params === void 0 ? void 0 : params.exclude) {
            newWidgets = newWidgets
                .filter(function (w) { var _a; return !((_a = params === null || params === void 0 ? void 0 : params.exclude) === null || _a === void 0 ? void 0 : _a.some(function (t) { return w instanceof t; })); });
        }
        Screen.utils.ForEach(newWidgets, function (w) { return w.linkInstanceElement(_this.instanceElement); });
        this._widgets = this._widgets.concat(newWidgets);
        return newWidgets;
    };
    Screen.prototype.addDynamicWidgetsByType = function (rootEl, widgetTypes) {
        var _this = this;
        var newWidgets = BaseScreenWidget_1.BaseScreenWidget.registerDynamicWidgets(this, rootEl);
        newWidgets = newWidgets
            .filter(function (w) { return widgetTypes === null || widgetTypes === void 0 ? void 0 : widgetTypes.some(function (t) { return w instanceof t; }); });
        newWidgets.forEach(function (w) { return w.linkInstanceElement(_this.instanceElement); });
        this._widgets = this._widgets.concat(newWidgets);
        return newWidgets;
    };
    Screen.prototype.removeDynamicWidgets = function (widgetsToRemove) {
        if (!this._widgets || !this._widgets.length)
            return;
        this._widgets = this._widgets.filter(function (w) { return widgetsToRemove.indexOf(w) < 0; });
        widgetsToRemove.forEach(function (widget) {
            widget.unlinkInstanceElement();
            widget.unlinkTemplate();
        });
    };
    Screen.prototype.prepareOtherElements = function () {
        // These elements are evaluated because they have an ID.
        var otherElements = Screen.utils.getElementsByHavingAttribute(this.templateElement, '*', 'id');
        // These elements are evaluated because they have conditional attributes.
        var attributePrefixes = [ScreenConsts_1.Screen_CONSTS.conditionalAttributePrefix, ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix];
        var conditionalElements = Screen.utils.getElementsByHavingAttributePrefix(this.templateElement, attributePrefixes, ['param']);
        // Combine and de-dup arrays.
        for (var _i = 0, conditionalElements_1 = conditionalElements; _i < conditionalElements_1.length; _i++) {
            var conditionalElement = conditionalElements_1[_i];
            if (window.gigya.utils.array.indexOf(otherElements, conditionalElement) === -1) {
                otherElements.push(conditionalElement);
            }
        }
        // Add TemplateElement to other elements.
        for (var _a = 0, otherElements_1 = otherElements; _a < otherElements_1.length; _a++) {
            var el = otherElements_1[_a];
            if (!TemplateElement_1.TemplateElement.isTemplateInstance(el)) {
                this._others.push(new TemplateElement_1.TemplateElement(el, this));
            }
        }
    };
    Screen.prototype.overrideTemplateCaption = function (caption) {
        // override caption attributes and remove the caption expression, NOTICE: this mean that it will no longer be evaluated
        this.instanceElement.removeAttribute(ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix + ":" + ScreenOptions_1.ScreenOptions_CONSTS.caption);
        this.instanceElement.setAttribute(ScreenOptions_1.ScreenOptions_CONSTS.caption, caption);
        this.caption = caption;
    };
    Screen.prototype.haveForms = function () {
        return this._forms.length || this._hasTfa;
    };
    Screen.prototype.getFormByElement = function (element) {
        var _a;
        for (var _i = 0, _b = this._forms; _i < _b.length; _i++) {
            var form = _b[_i];
            if ((_a = form.instanceElement) === null || _a === void 0 ? void 0 : _a.contains(element)) {
                return form;
            }
        }
    };
    Screen.prototype.setCssClass = function () {
        this.cssClass = this.templateElement.getAttribute(ScreenConsts_1.Screen_CONSTS.cssClass);
    };
    Screen.prototype.unlinkTemplate = function () {
        var unlinkItem = function (i) { return i.unlinkTemplate(); };
        Screen.utils.ForEach(this._forms, unlinkItem);
        Screen.utils.ForEachProp(this._errorDisplayElements, function (boundedElements) {
            Screen.utils.ForEach(boundedElements, unlinkItem);
        });
        Screen.utils.ForEach(this._others, unlinkItem);
        Screen.utils.ForEach(this._widgets, unlinkItem);
        _super.prototype.unlinkTemplate.call(this);
    };
    Screen.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var linkItem, _i, _a, widget, _b, _c, others, _d, _e, _f, errorDisplayElement, _g, _h, boundedElement, _j, _k, form;
            var _this = this;
            return tslib_1.__generator(this, function (_l) {
                switch (_l.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        if (!this.instanceElement) return [3 /*break*/, 18];
                        linkItem = function (i) { return i.linkInstanceElement(_this.instanceElement); };
                        _i = 0, _a = this._widgets;
                        _l.label = 1;
                    case 1:
                        if (!(_i < _a.length)) return [3 /*break*/, 4];
                        widget = _a[_i];
                        return [4 /*yield*/, linkItem(widget)];
                    case 2:
                        _l.sent();
                        _l.label = 3;
                    case 3:
                        _i++;
                        return [3 /*break*/, 1];
                    case 4:
                        _b = 0, _c = this._others;
                        _l.label = 5;
                    case 5:
                        if (!(_b < _c.length)) return [3 /*break*/, 8];
                        others = _c[_b];
                        return [4 /*yield*/, linkItem(others)];
                    case 6:
                        _l.sent();
                        _l.label = 7;
                    case 7:
                        _b++;
                        return [3 /*break*/, 5];
                    case 8:
                        _d = [];
                        for (_e in this._errorDisplayElements)
                            _d.push(_e);
                        _f = 0;
                        _l.label = 9;
                    case 9:
                        if (!(_f < _d.length)) return [3 /*break*/, 14];
                        errorDisplayElement = _d[_f];
                        _g = 0, _h = this._errorDisplayElements[errorDisplayElement];
                        _l.label = 10;
                    case 10:
                        if (!(_g < _h.length)) return [3 /*break*/, 13];
                        boundedElement = _h[_g];
                        return [4 /*yield*/, linkItem(boundedElement)];
                    case 11:
                        _l.sent();
                        _l.label = 12;
                    case 12:
                        _g++;
                        return [3 /*break*/, 10];
                    case 13:
                        _f++;
                        return [3 /*break*/, 9];
                    case 14:
                        _j = 0, _k = this._forms;
                        _l.label = 15;
                    case 15:
                        if (!(_j < _k.length)) return [3 /*break*/, 18];
                        form = _k[_j];
                        return [4 /*yield*/, linkItem(form)];
                    case 16:
                        _l.sent();
                        _l.label = 17;
                    case 17:
                        _j++;
                        return [3 /*break*/, 15];
                    case 18:
                        if (window.gigya.localInfo.isIE9 || window.gigya.localInfo.isIE8) {
                            Screen.utils.ForEach(this._forms, function (form) {
                                form.filters.push({
                                    filterOutWidgetsToSend: function (dataToFilter) {
                                        if (dataToFilter.profile) {
                                            delete dataToFilter.profile._profilePhoto;
                                        }
                                        return dataToFilter;
                                    },
                                });
                            });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    Screen.prototype.legacyLinkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            var linkItem = function (i) { return i.linkInstanceElement(_this.instanceElement); };
            Screen.utils.ForEach(this._widgets, linkItem);
            Screen.utils.ForEach(this._others, linkItem);
            Screen.utils.ForEachProp(this._errorDisplayElements, function (boundedElements) {
                Screen.utils.ForEach(boundedElements, linkItem);
            });
            Screen.utils.ForEach(this._forms, linkItem);
        }
        if (window.gigya.localInfo.isIE9 || window.gigya.localInfo.isIE8) {
            Screen.utils.ForEach(this._forms, function (form) {
                form.filters.push({
                    filterOutWidgetsToSend: function (dataToFilter) {
                        if (dataToFilter.profile) {
                            delete dataToFilter.profile._profilePhoto;
                        }
                        return dataToFilter;
                    },
                });
            });
        }
    };
    Screen.prototype.placeContentInElement = function (instanceElement) {
        Screen.utils.ForEach(this.templateElement.attributes, function (a) { return instanceElement.setAttribute(a.name, a.value); });
        instanceElement.innerHTML = this.templateElement.innerHTML;
        utils_1.replaceAttribute(instanceElement, TemplateElement_1.TemplateElement_CONSTS.elementFor, 'for');
    };
    Screen.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement) {
            var unlinkItem = function (i) { return i.unlinkInstanceElement(); };
            Screen.utils.ForEach(this._forms, unlinkItem);
            Screen.utils.ForEachProp(this._errorDisplayElements, function (boundedElements) {
                Screen.utils.ForEach(boundedElements, unlinkItem);
            });
            Screen.utils.ForEach(this._others, unlinkItem);
            Screen.utils.ForEach(this._widgets, unlinkItem);
        }
        _super.prototype.unlinkInstanceElement.call(this);
    };
    Screen.prototype.getErrorMessage = function (errorCode, isBoundToField, field) {
        return this._screenSet.getErrorMessage(errorCode, isBoundToField, field === null || field === void 0 ? void 0 : field.fieldName, field === null || field === void 0 ? void 0 : field.displayName);
    };
    Screen.prototype.dispatchEvent = function (eventName, event) {
        return this._screenSet.dispatchPluginEvent(eventName, event);
    };
    // TODO: make async stack
    Screen.prototype.performAutoSkip = function (formContext) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var forms, result, canSkipAllForms;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this._forms.length) {
                            return [2 /*return*/, null];
                        }
                        forms = [];
                        Screen.utils.ForEach(this._forms, function (form) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
                            return tslib_1.__generator(this, function (_a) {
                                forms.push(form);
                                return [2 /*return*/];
                            });
                        }); });
                        return [4 /*yield*/, gigya.Promise.all(forms.map(function (form) { return form.canAutoSkip(formContext); }))];
                    case 1:
                        result = _a.sent();
                        canSkipAllForms = result.every(function (canSkipForm) {
                            return canSkipForm === true;
                        });
                        return [2 /*return*/, canSkipAllForms ? this._forms[0] : null];
                }
            });
        });
    };
    Screen.prototype.hideErrors = function () {
        var _this = this;
        this._forms.map(function (f) {
            return (_this._errorDisplayElements[f.bindID] || []).forEach(function (elBound) {
                return elBound.hideError();
            });
        });
    };
    Screen.prototype.showErrors = function (form, arErrors, isServerError) {
        var _this = this;
        var arBoundElements = this._errorDisplayElements[form.bindID] || [];
        Screen.utils.ForEach(arBoundElements, function (elBound) {
            if (!isServerError && elBound.scope !== ErrorDisplayElement_1.ErrorScopes.firstError && elBound.scope !== ErrorDisplayElement_1.ErrorScopes.anyError && elBound.scope !== ErrorDisplayElement_1.ErrorScopes.allErrors)
                return;
            var firstError;
            var arErrorMessages = new Array();
            var shouldDisplay = false;
            Screen.utils.ForEach(arErrors, function (error) {
                if (elBound.isErrorCodeAllowed(error.errorCode, error.errorFlags)) {
                    error.handled = true;
                    var errorMessage = error.customMessage || error.errorMessage;
                    if (!firstError)
                        firstError = error.errorCode;
                    if (!errorMessage) {
                        var field = form.getField(error.fieldName);
                        if (field)
                            errorMessage = _this._screenSet.getErrorMessage(error.errorCode, false, field.fieldName, field.displayName);
                    }
                    if (errorMessage) {
                        shouldDisplay = true;
                        arErrorMessages.push(errorMessage);
                    }
                }
            });
            if (shouldDisplay) {
                var errorMsg;
                if (elBound.scope === ErrorDisplayElement_1.ErrorScopes.firstError || isServerError) {
                    errorMsg = arErrorMessages[0];
                }
                else {
                    errorMsg = '<ul><li>' + arErrorMessages.join('</li><li>') + '</li></ul>';
                }
                elBound.showError({
                    errorCode: firstError,
                    errorMessage: errorMsg,
                });
            }
            else {
                elBound.hideError();
            }
        });
        if (Screen.utils.Some(arErrors, function (error) { return !error.handled; })) {
            form.warn('Missing error-msg or error-display for form');
        }
    };
    Screen.prototype.dimScreen = function () {
        return this._screenSet.dimScreenSet();
    };
    Screen.prototype.undimScreen = function () {
        return this._screenSet.undimScreenSet();
    };
    Screen.prototype.setProfilePhoto = function (thumbnailUrl) {
        Screen.utils.ForEach(this._profilePhotos, function (pPhoto) { return pPhoto.setThumbnailUrl(thumbnailUrl); });
    };
    Screen.prototype.getExtraProfileFields = function (missingOnly) {
        var missingFields = new Array();
        Screen.utils.ForEach(this._forms, function (f) { return (missingFields = missingFields.concat(f.getExtraProfileFields(missingOnly))); });
        return missingFields;
    };
    Screen.prototype.getNeededData = function (formContext) {
        var neededData = {};
        Screen.utils.ForEach(this._forms, function (f) {
            var formNeededData = f.getNeededData(formContext);
            Screen.utils.ForEachProp(formNeededData, function (val, name) { return (neededData[name] = val); });
        });
        return neededData;
    };
    /// Override TemplateElement's hasConditionalAttributes
    Screen.prototype.hasConditionalAttributes = function () {
        if (_super.prototype.hasConditionalAttributes.call(this))
            return true;
        var children = [].concat(this._forms, this._widgets, this._captchas, this._profilePhotos, this._others);
        window.gigya.utils.array.forEachProp(this._errorDisplayElements, function (templateElements) { return children.concat(templateElements); });
        return window.gigya.utils.array.some(children, function (child) { return child.hasConditionalAttributes(); });
    };
    Screen.prototype.evaluateConditionalAttributes = function () {
        var _this = this;
        if (!this.hasConditionalAttributes()) {
            return;
        }
        window.gigya.logger.group("screen conditional attributes evaluation").endWhen(function () {
            var lastDataWidthAttributeValue = _this.width;
            var lastDataHeightAttributeValue = _this.height;
            _super.prototype.evaluateConditionalAttributes.call(_this);
            ScreenOptions_1.ScreenOptions.call(_this, _this.instanceElement, _this._screenSet.screenOptions);
            // Assign the 'data-' attributes of the screen.
            // Note: the screen's 'data-' attributes will override CSS properties and will take precedence
            // in case the current data-width is 'auto', no width value will be set to the 'Screen' element.
            var currentDataWidthAttributeValue = _this.width;
            var currentDataHeightAttributeValue = _this.height;
            // The following line is for a scenario that conditional attributes were evaluated on the screen level
            // and there's a chance that the modal also needs to be resized accordingly
            var screenDimensions = _this.getScreenDimensionsWithUnitType();
            if (lastDataWidthAttributeValue != currentDataWidthAttributeValue || lastDataHeightAttributeValue != currentDataHeightAttributeValue) {
                _this._screenSet.resizeModal({ width: screenDimensions.width, height: screenDimensions.height });
            }
            var captionWidth = _this.instanceElement ? _this.instanceElement.offsetWidth + 'px' : '';
            _this._screenSet.setCaption(_this.caption, captionWidth);
            Screen.utils.ForEach(_this._forms, function (form) {
                form.evaluateConditionalAttributes();
            });
            Screen.utils.ForEachProp(_this._errorDisplayElements, function (boundedElements) {
                Screen.utils.ForEach(boundedElements, function (boundedElement) {
                    boundedElement.evaluateConditionalAttributes();
                });
            });
            Screen.utils.ForEach(_this._others, function (oth) {
                oth.evaluateConditionalAttributes();
            });
            Screen.utils.ForEach(_this._widgets, function (widget) {
                widget.evaluateConditionalAttributes();
            });
        });
    };
    Screen.prototype.resetLastConditionalValues = function () {
        window.gigya.logger.debug("resetting conditional values");
        _super.prototype.resetLastConditionalValues.call(this);
        Screen.utils.ForEach(this._forms, function (form) {
            form.resetLastConditionalValues();
        });
        Screen.utils.ForEachProp(this._errorDisplayElements, function (boundedElements) {
            Screen.utils.ForEach(boundedElements, function (boundedElement) {
                boundedElement.resetLastConditionalValues();
            });
        });
        Screen.utils.ForEach(this._others, function (oth) {
            oth.resetLastConditionalValues();
        });
        Screen.utils.ForEach(this._widgets, function (widget) {
            widget.resetLastConditionalValues();
        });
    };
    Screen.prototype.setBeforeLoadData = function (eventData) {
        this._forms.forEach(function (form) { return form.setBeforeLoadData(eventData); });
    };
    Screen.prototype.getCaptchaData = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var captcha, _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        captcha = this._captchas.filter(function (captcha) { return Boolean(captcha) && !captcha.isHidden(); })[0];
                        if (!captcha) {
                            return [2 /*return*/, gigya.Promise.resolve()];
                        }
                        _a = {};
                        return [4 /*yield*/, captcha.getToken()];
                    case 1: return [2 /*return*/, (_a.token = _b.sent(),
                            _a.type = captcha.getType(),
                            _a)];
                }
            });
        });
    };
    Screen.prototype.getScreenDimensionsWithUnitType = function () {
        var isLegacy = this._screenSet.getPluginStyle() == PluginStyles_1.PluginStyle.legacy;
        var widthVal;
        if (this.width) {
            var widthUnits;
            widthUnits = Screen.utils.getUnitMeasurementType(this.width);
            if (widthUnits !== utils_1.UnitMeasurementType.auto && (!isLegacy || widthUnits != utils_1.UnitMeasurementType.percentage)) {
                widthVal = parseFloat(this.width) + widthUnits;
            }
        }
        var heightVal;
        if (this.height) {
            var heightUnits;
            heightUnits = Screen.utils.getUnitMeasurementType(this.height);
            if (heightUnits !== utils_1.UnitMeasurementType.auto && (!isLegacy || heightUnits != utils_1.UnitMeasurementType.percentage)) {
                heightVal = parseFloat(this.height) + heightUnits;
            }
        }
        return { width: widthVal, height: heightVal };
    };
    // Overridable dependencies ///
    Screen.utils = {
        ForEach: utils_1.ForEach,
        getElementsByHavingAttribute: utils_1.getElementsByHavingAttribute,
        getElementsByHavingAttributePrefix: utils_1.getElementsByHavingAttributePrefix,
        ForEachProp: utils_1.ForEachProp,
        Some: utils_1.Some,
        getUnitMeasurementType: utils_1.getUnitMeasurementType,
    };
    return Screen;
}(TemplateElement_1.TemplateElement));
exports.Screen = Screen;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts":
/*!*********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.Screen_CONSTS = {
    gigyaClass: 'gigya-screen',
    conditionalAttributePrefix: 'gigya-conditional',
    expressionAttributePrefix: 'gigya-expression',
    cssClass: 'data-css-class',
    dataVariantPercentage: 'data-variant-percentage',
    dataVariantGroup: 'data-variant-group',
    dataVariantOriginalScreen: 'data-variant-original-screen',
    dataVariantTestId: 'data-variant-test-id',
};


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts":
/*!**********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
exports.ScreenOptions_CONSTS = {
    accountsLinkedScreen: 'data-on-accounts-linked-screen',
    pendingTfaRegistrationScreen: 'data-on-pending-tfa-registration-screen',
    pendingTfaVerificationScreen: 'data-on-pending-tfa-verification-screen',
    pendingRegistrationScreen: 'data-on-pending-registration-screen',
    existingLoginIdentifierScreen: 'data-on-existing-login-identifier-screen',
    pendingVerificationScreen: 'data-on-pending-verification-screen',
    pendingCodeVerificationScreen: 'data-on-pending-email-verification-code',
    missingLoginIdScreen: 'data-on-missing-loginid-screen',
    pendingPasswordChangeScreen: 'data-on-pending-password-change-screen',
    pendingReAuthenticationScreen: 'data-on-pending-recent-login-screen',
    width: 'data-width',
    height: 'data-height',
    caption: 'data-caption',
};
utils_1.DeepFreeze(exports.ScreenOptions_CONSTS);
var ScreenOptions = /** @class */ (function () {
    function ScreenOptions(el, parent) {
        parent = parent || {};
        this.accountsLinkedScreen = el.getAttribute(exports.ScreenOptions_CONSTS.accountsLinkedScreen) || parent.accountsLinkedScreen;
        this.pendingTfaRegistrationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingTfaRegistrationScreen) || parent.pendingTfaRegistrationScreen;
        this.pendingTfaVerificationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingTfaVerificationScreen) || parent.pendingTfaVerificationScreen;
        this.pendingRegistrationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingRegistrationScreen) || parent.pendingRegistrationScreen;
        this.existingLoginIdentifierScreen = el.getAttribute(exports.ScreenOptions_CONSTS.existingLoginIdentifierScreen) || parent.existingLoginIdentifierScreen;
        this.pendingVerificationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingVerificationScreen) || parent.pendingVerificationScreen;
        this.pendingCodeVerificationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingCodeVerificationScreen) || parent.pendingCodeVerificationScreen;
        this.missingLoginIdScreen = el.getAttribute(exports.ScreenOptions_CONSTS.missingLoginIdScreen) || parent.missingLoginIdScreen;
        this.pendingPasswordChangeScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingPasswordChangeScreen) || parent.pendingPasswordChangeScreen;
        this.pendingReAuthenticationScreen = el.getAttribute(exports.ScreenOptions_CONSTS.pendingReAuthenticationScreen) || parent.pendingReAuthenticationScreen;
        this.width = el.getAttribute(exports.ScreenOptions_CONSTS.width) || parent.width;
        this.height = el.getAttribute(exports.ScreenOptions_CONSTS.height) || parent.height;
        this.caption = el.getAttribute(exports.ScreenOptions_CONSTS.caption) || parent.caption;
    }
    return ScreenOptions;
}());
exports.ScreenOptions = ScreenOptions;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts":
/*!**********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var ScreenSetData = /** @class */ (function () {
    function ScreenSetData(params) {
        this.params = params;
        this.apiData = {}; // Each form can have its own server API data
        this.lastSubmittedFormResponse = {};
        this.finalizeRegistrationNeeded = false;
        this.neededData = {};
        this.extraEventData = {};
        this.otpData = {};
        this.pushData = {};
        this.authMethodData = {
            identifiers: {}
        };
        this.shouldConnectAccounts = false;
        this.tfaProviders = {
            activeProviders: []
        };
        this.regToken = params.regToken;
        this.finalizeRegistrationNeeded = params.finalizeRegistration;
    }
    return ScreenSetData;
}());
exports.ScreenSetData = ScreenSetData;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts":
/*!************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var ScreenSetData_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts");
var CloseReasons_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/CloseReasons */ "./src/core/Gigya.Js.Plugin/app/CloseReasons.ts");
var Screen_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var Errors_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var ScreenOptions_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
var IBaseObjectConfig_1 = __webpack_require__(/*! src/core/Gigya.Js/app/BaseObject/IBaseObjectConfig */ "./src/core/Gigya.Js/app/BaseObject/IBaseObjectConfig.ts");
var PluginStyles_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/PluginStyles */ "./src/core/Gigya.Js.Plugin/app/PluginStyles.ts");
var NewsletterSignupForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts");
var ScreenConsts_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
var constants_1 = __webpack_require__(/*! src/accounts/constants */ "./src/accounts/constants.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var LoginModes_1 = __webpack_require__(/*! ./LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var GroupVariantProvider = __webpack_require__(/*! ./GroupVariantProvider */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/GroupVariantProvider.ts");
var FlagService_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
var linkAccountsHelper_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper */ "./src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts");
var validationUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/validation */ "./src/core/Gigya.Js/app/Utils/validation.ts");
var ScreenSetPlugin_CONSTS = {
    namespace: 'accounts',
    pluginName: 'screenSet',
    showScreenSetName: 'showScreenSet',
    switchScreenName: 'switchScreen',
    hideScreenSetName: 'hideScreenSet',
    stayOnScreen: '_stay',
};
utils_1.DeepFreeze(ScreenSetPlugin_CONSTS);
utils_1.DeepFreeze(CloseReasons_1.CloseReasons);
exports.EndFlowScreens = {
    _skip: CloseReasons_1.CloseReasons.skip,
    _finish: CloseReasons_1.CloseReasons.finished,
    _cancel: CloseReasons_1.CloseReasons.cancel,
};
utils_1.DeepFreeze(exports.EndFlowScreens);
exports.ScreenSet_CONSTS = {
    gigyaClass: 'gigya-screen-set',
    mobileDialogClass: 'gigya-screen-dialog-mobile',
    webDialogClass: 'gigya-screen-dialog',
    contentClass: 'gigya-screen-dialog-content',
    topElementClass: 'gigya-screen-dialog-top',
    calculateSizeClass: 'gigya-calculate-size',
    gigyaHidden: 'gigya-hidden',
    startScreen: 'data-start-screen',
    isResponsive: 'data-responsive',
    dialogStyle: 'data-dialog-style',
    dataActiveGroups: 'data-active-groups',
};
utils_1.DeepFreeze(exports.ScreenSet_CONSTS);
var ScreenSetPlugin = /** @class */ (function (_super) {
    tslib_1.__extends(ScreenSetPlugin, _super);
    function ScreenSetPlugin() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._addedCSS = false;
        _this._screens = {};
        _this._random = Math.random();
        _this._placeholderIntervalID = -1;
        _this.onUserStateChange = function (res) { return _this.onAccountInfo(res); };
        // ITemplateElementParent implementation
        _this._screenSet = _this;
        return _this;
    }
    ScreenSetPlugin.prototype.getConfig = function () {
        return {
            requiredParams: ['screenSet'],
            defaultParams: { screenSet: '' },
            defaultModalParams: {
                screenSet: '',
            },
            defaultDeviceType: IBaseObjectConfig_1.DeviceTypes.auto,
            hasMobileUI: true,
            allowModal: true,
            disableModalContainerInit: true,
            defaultDialogStyle: PluginStyles_1.PluginStyle.legacy,
            supportsResponsive: true,
            enableSizePolling: true,
            enableViewportPolling: true,
        };
    };
    ScreenSetPlugin.injectionInfo = function () {
        return {
            name: 'screenSet',
            namespace: 'accounts',
            methodName: 'showScreenSet',
            jsName: 'gigya.services.accounts.plugins.screenSet',
            publicMethods: {
                hideScreenSet: { instanceMethod: 'cancel', argNames: [] },
                switchScreen: { instanceMethod: 'switchScreen', argNames: ['screen'] },
            },
        };
    };
    ScreenSetPlugin.prototype.dispatchPluginEvent = function (eventName, eventObj) {
        if (eventObj === void 0) { eventObj = {}; }
        eventObj['screenSetID'] = this._ID;
        return _super.prototype.dispatchPluginEvent.call(this, eventName, eventObj);
    };
    //#region static methods
    // TODO: will have a support structure in BasePlugin that will find the instance
    ScreenSetPlugin._calculateInstanceId = function (p) {
        var containerID = p.containerID || '';
        return p.screenSet + '_' + containerID;
    };
    //#endregion
    ScreenSetPlugin.prototype.init = function (callback) {
        var _this = this;
        var gigParams = window.gigya.utils.object.extractProperties(window.gigya.utils.URL.getGigParamsFromURL({ url: document.location.href, removePrefix: true }), null, 'lang|regToken');
        if (gigParams['lang']) {
            this.params._explicitLang = true;
        }
        __webpack_provided_Object_dot_assign(this.params, gigParams);
        this.loadTemplate(function (success, translations, serverParams) {
            var _a;
            if (!success) {
                window.gigya.logger.error('failed loading screenset template');
            }
            else {
                window.gigya.logger.info('screenset template loaded');
                utils_1.IETemplateElementPolyfill();
                // Re-create parameters using server-loaded params.
                if (serverParams) {
                    // Merge the explicit params on top of the server-provided params to create a new set of explicit params.
                    _this.explicitParams = window.gigya.utils.object.merge([serverParams, _this.explicitParams], false);
                    // Create a new set of params by merging with global conf.
                    _this.params = window.gigya.utils.object.merge([_this.params, window.gigya.thisScript.globalConf, _this.explicitParams], false);
                }
                // Normalizing translation and customLang keys before merging
                // Merge translations from parameters to support translations being overridden on the client-side.
                _this._originalCustomLang = tslib_1.__assign({}, window.gigya.utils.object.normalizeObjectKeysToLowerCase(_this.params.customLang) || {});
                _this.params.customLang = __webpack_provided_Object_dot_assign(window.gigya.utils.object.normalizeObjectKeysToLowerCase(_this.params.parentTranslations || {}), window.gigya.utils.object.normalizeObjectKeysToLowerCase(translations || {}), _this._originalCustomLang);
            }
            if (_this.params.parentData) {
                _this._isChild = true;
                _this.data = _this.params.parentData;
                _this.params.rootContainerId = (_a = _this.params.parentData.params) === null || _a === void 0 ? void 0 : _a.rootContainerId;
                delete _this.params.parentData; // remove to prevent circular refrences inside params
            }
            else {
                _this._isChild = false;
                _this.data = new ScreenSetData_1.ScreenSetData(_this.params);
                _this.params.regToken = _this.data.regToken;
                _this.params.rootContainerId = _this.containerID;
            }
            _this.params.isChild = _this._isChild; // make the is child accessible to event listeners
            _this.params.communicationLang = _this._screenSet.params.communicationLangByScreenSet !== false ? _this._screenSet.params.lang : null;
            // parent screenSet should listen to global login/out events
            if (!_this._isChild) {
                _this.registerGlobalEvents();
            }
            if (!_this.params.regSource) {
                _this.params.regSource = utils_1.firstPart(utils_1.firstPart(document.location.href, '?'), '#');
            }
            _this._instanceId = ScreenSetPlugin._calculateInstanceId(_this.params);
            if (success) {
                _this.initContainer();
                _this.initScreens();
            }
            else {
                _this.dispatchErrorFromResponse(translations); // second argument is used as error response in case of failure
                if (_this.container) {
                    _this.container.innerText = 'An error has occurred. Please try again later.';
                }
            }
            callback(success);
        });
    };
    /**
     * There are two ways to provide a screen-set template.
     * 1. Place the screen-set template element on the page with the screen-set ID. In this case, it is assumed CSS and JS are provided.
     * 2. Load screen-set from Gigya servers, which includes CSS and extra JS parameters. After load, the screen-set is cached in a DOM element.
     */
    ScreenSetPlugin.prototype.loadTemplate = function (callback) {
        var _this = this;
        // Check to see if we've already loaded the template.
        if (this.templateElement) {
            callback(true);
            return;
        }
        // Set screen-set ID.
        var screenSetID = (this._ID = this.isMobileUI && this.params.mobileScreenSet ? this.params.mobileScreenSet : this.params.screenSet);
        // Find (create if needed) screen-set template container on the page.
        var screenSetTemplateContainerID = "__gigyaScreenSet_" + screenSetID;
        var screenSetTemplateContainer = document.getElementById(screenSetTemplateContainerID);
        if (!screenSetTemplateContainer) {
            // Check for site-provided screen-set template element on the page. Use instead of loading from Gigya servers.
            // No JavaScript is loaded in this case because the screen-set was provided by the site.
            this.templateElement = document.getElementById(screenSetID);
            // #52641 - Ensure local screen-set template is not loaded from inside a Gigya-created screen-set template container.
            if (this.templateElement &&
                this.templateElement.parentElement &&
                this.templateElement.parentElement.id &&
                this.templateElement.parentElement.id.indexOf('__gigyaScreenSet_') === 0) {
                this.templateElement = undefined;
            }
            if (this.templateElement) {
                callback(true);
                return;
            }
            screenSetTemplateContainer = document.createElement('div');
            screenSetTemplateContainer.id = screenSetTemplateContainerID;
            screenSetTemplateContainer.style.display = 'none';
            window.gigya.utils.DOM.prependToBody(screenSetTemplateContainer);
        }
        var lang = this.getLangForScreenSet();
        // Look within the template for cached screen-set element.
        // It may have been populated by a previous call.
        var screenSetEl = screenSetTemplateContainer.querySelector("div." + exports.ScreenSet_CONSTS.gigyaClass);
        if (screenSetEl) {
            this.templateElement = screenSetEl;
            if (!ScreenSetPlugin.CACHE[screenSetID]) {
                ScreenSetPlugin.CACHE[screenSetID] = {
                    javascript: undefined,
                    translations: {},
                };
            }
            var javascript_1 = ScreenSetPlugin.CACHE[screenSetID].javascript
                ? window.gigya.utils.JSON.deserialize(ScreenSetPlugin.CACHE[screenSetID].javascript)
                : undefined;
            // First, check to see if we've cached translations from the server in the language requested.
            // (don't fallback to root/default lang when trying to get translations from cache)
            var cachedTranslations = window.gigya.pluginUtils.lang.getTranslationsFromContainer(ScreenSetPlugin.CACHE[screenSetID], lang, false);
            if (cachedTranslations) {
                callback(true, cachedTranslations.translations, javascript_1);
            }
            else {
                // We need to fetch translations for this language from the server.
                // This is a rare case that's hit only when the user already loaded the screen-set in one language and now it's being rendered in a different language.
                window.gigya.accounts.getScreenSets(this.params, {
                    lang: lang,
                    include: 'translations',
                    screenSetIDs: screenSetID,
                    callback: this.prepareCallback(function (res) {
                        if (res.errorCode != 0 || !res.screenSets || !res.screenSets.length) {
                            callback(false, res);
                            return;
                        }
                        // Cache translations from server.
                        var oScreenSet = res.screenSets[0];
                        var _a = window.gigya.pluginUtils.lang.getTranslationsFromContainer(oScreenSet, lang) || {}, langKey = _a.langKey, translations = _a.translations;
                        // saving the translations in cache with {{lang}} as the key,
                        // even if the translations are fallback from root/default lang
                        // to enable loading the same screen-set with a different missing lang/variation
                        ScreenSetPlugin.CACHE[screenSetID].translations[langKey] = translations;
                        callback(true, translations, javascript_1);
                    }),
                });
            }
        }
        else {
            // Load screen-set from server.
            // NOTE: This can be triggered twice if 2 screen-sets load at the same time.
            var currentTime_1 = Date.now();
            window.gigya.accounts.getScreenSets(this.params, {
                lang: lang,
                include: 'html,css,javascript,translations',
                screenSetIDs: screenSetID,
                callback: this.prepareCallback(function (res) {
                    var _a;
                    window.gigya.logger.report('getScreenSets response time', {
                        responseTime: Date.now() - currentTime_1
                    });
                    if (res.errorCode != 0 || !res.screenSets || !res.screenSets.length || !res.screenSets[0].html) {
                        callback(false, res);
                        return;
                    }
                    var serverParams = undefined;
                    var oScreenSet = res.screenSets[0];
                    var _b = window.gigya.pluginUtils.lang.getTranslationsFromContainer(oScreenSet, lang) || {}, langKey = _b.langKey, translations = _b.translations;
                    if (langKey && langKey !== _this.params.lang) {
                        console.warn("missing translation for " + lang + ", fallback to " + langKey);
                    }
                    _this.params.lang = langKey || _this.params.lang;
                    ScreenSetPlugin.CACHE[screenSetID] = {
                        javascript: oScreenSet.javascript,
                        translations: (_a = {},
                            _a[langKey] = translations,
                            _a),
                    };
                    // Check to be sure the screen-set DOM wasn't already created while waiting for response.
                    // It is vital we don't re-render it or IE11 will break. See #47181.
                    if (!screenSetTemplateContainer.innerHTML) {
                        screenSetTemplateContainer.innerHTML = oScreenSet.html;
                    }
                    // For compatibility, storing this for injection AFTER modalDialog's css.
                    _this._loadedScreensetCss = oScreenSet.css;
                    // Set template element.
                    _this.templateElement = screenSetTemplateContainer.querySelector('div');
                    // If JavaScript is present, also store as an attribute on the template container for future screen-set calls.
                    if (oScreenSet.javascript) {
                        serverParams = window.gigya.utils.JSON.deserialize(oScreenSet.javascript);
                    }
                    callback(true, translations, serverParams);
                }),
            });
        }
    };
    ScreenSetPlugin.prototype.injectScreenSetCSS = function () {
        if (!this._addedCSS) {
            if (this._style != PluginStyles_1.PluginStyle.none) {
                var css = window.gigya.utils.templates.fill(this.getCss().defaultCSS, { imgBase: this._imgBase });
                window.gigya._.plugins.utils.css.addCss(css, this.params.cssPrefix, false);
            }
            if (this._loadedScreensetCss) {
                this.fixColorContrastIfNeeded();
                window.gigya._.plugins.utils.css.addCss(this._loadedScreensetCss);
                delete this._loadedScreensetCss;
            }
            this._addedCSS = true;
        }
    };
    ScreenSetPlugin.prototype.fixColorContrastIfNeeded = function () {
        if (FlagService_1.FlagService.wcagContrastFix) {
            var colorsOldToNewMap_1 = {
                'e76468': 'ce4635',
                '1d87ff': '0070f0',
                '0068de': '0056b8',
                '87b9ea': '2378CD',
                'b6bdc5': '6E7781',
            };
            var regex = new RegExp("" + Object.keys(colorsOldToNewMap_1).join('|'), 'gmi');
            this._loadedScreensetCss = this._loadedScreensetCss.replace(regex, function (match) { return (colorsOldToNewMap_1[match === null || match === void 0 ? void 0 : match.toLowerCase()] || match); });
        }
    };
    /// Override from BasePlugin.
    ScreenSetPlugin.prototype.initContainer = function () {
        // BasePlugin's initContainer method is invoked in its sync run process,
        // but here we want to initialize the container [in page or modal] only after the template async load is completed [needed for getPluginStyle method].
        if (this.templateElement) {
            var isModalLegacy = this.isModal && this.getPluginStyle() == PluginStyles_1.PluginStyle.legacy;
            // pre-init container
            this.config.defaultModalParams.dimDialogBackground = !isModalLegacy;
            _super.prototype.initContainer.call(this);
            // post-init container
            if (isModalLegacy) {
                this.config.enableViewportPolling = false;
                this._modalDialog.getModalDialogContainer().setAttribute('gigid', this.config.methodName);
            }
        }
        // Basic sync in-page initializing. --legacy
        else if (!this.isModal) {
            window.gigya.utils.DOM.setSize(this.container, this.params.width, this.params.height, false);
            if (this.params.responsive)
                this.container.style.width = 'auto';
            this._loadingIndicator = new window.gigya._.plugins.LoadDimmer(this.container);
        }
    };
    ScreenSetPlugin.prototype.initScreens = function () {
        var _this = this;
        this.isResponsive = this.templateElement.getAttribute(exports.ScreenSet_CONSTS.isResponsive) == 'true';
        this.screenOptions = new ScreenOptions_1.ScreenOptions(this.templateElement);
        window.gigya.logger.info("screenset screens:", this.screenOptions);
        this.injectScreenSetCSS();
        if (!this._isChild) {
            // Child screenSet does not need to listen, parent already listens
            this.addGlobalEventHandler('onLogin', function () {
                _this.data.finalizeRegistrationNeeded = false;
            });
        }
        this.prepareScreenSetContainer();
        this.prepareScreens();
        this._startScreen =
            this.params.startScreen || // parameters
                this.templateElement.getAttribute(ScreenSetPlugin.CONSTS.startScreen) || // screen set definition
                this._startScreen; // first screen that was set when screens where parsed
        if (this.isMobileUI && this.isModal) {
            window.scrollTo(0, 0);
        }
        if (this.params.initialResponse) {
            if (!this.params.initialResponse.operation && this.params.initialMethod) {
                this.params.initialResponse.operation = "/" + this.params.initialMethod;
            }
            this.onScreenResponse(this.params.initialResponse, {
                ID: this._ID,
                bindID: this._ID,
                _screen: this._screens[this._startScreen],
                _screenSet: this,
            });
        }
        else {
            this.switchScreen(this._startScreen, this.params.formContext);
        }
    };
    /// Overriding BasePlugin's
    ScreenSetPlugin.prototype.getPluginStyle = function () {
        /// priority: params > screenset template attr > config
        /// if template hasn't loaded yet - return undefined style.
        return (PluginStyles_1.PluginStyle[this.params.dialogStyle] ||
            (this.templateElement && (PluginStyles_1.PluginStyle[this.templateElement.getAttribute(exports.ScreenSet_CONSTS.dialogStyle)] || this.getConfig().defaultDialogStyle)) ||
            PluginStyles_1.PluginStyle._undefined);
    };
    ScreenSetPlugin.prototype.prepareScreenSetContainer = function () {
        var containerID = this.containerID;
        var template;
        if (this.isModal) {
            template = this.getTemplates().screenSet_dialog;
        }
        else {
            template = this.getTemplates().screenSet;
        }
        var innerContainerID = containerID + '_content';
        var childContainerID = containerID + '_child';
        this.container.insertAdjacentHTML('beforeend', window.gigya.utils.templates.fill(template, {
            innerContainerID: innerContainerID,
            childContainerID: childContainerID,
        }));
        /// TODO: for ie8 support, need to be async in order to get elements that were added by the above.
        if (!this._captionElement) {
            var captionElementId = this.getCaptionElementId(innerContainerID, this._isChild, this.params.rootContainerId);
            this._captionElement = document.getElementById(captionElementId);
        }
        this._elContainer = document.getElementById(innerContainerID);
        if (this.isModal && this._style == PluginStyles_1.PluginStyle.legacy)
            window.gigya.utils.DOM.addClassToElement(this._elContainer, exports.ScreenSet_CONSTS.contentClass);
        // Add class with current locale.
        // This is used by CSS in the default screen-sets for RTL languages.
        window.gigya.utils.DOM.addClassToElement(this._elContainer, "gigya-locale-" + window.gigya.thisScript.lang.langCode);
        this._elChildContainer = document.getElementById(childContainerID);
    };
    ScreenSetPlugin.prototype.getCaptionElementId = function (innerContainerID, isChild, rootContainerId) {
        var captionId;
        var innerCaptionId = innerContainerID + '_caption';
        // Child screen-set takes over parent's caption.
        if (isChild) {
            if (document.getElementById(innerCaptionId))
                document.getElementById(innerCaptionId).style.display = 'none';
            captionId = rootContainerId + '_content_caption';
        }
        else {
            captionId = innerCaptionId;
        }
        return captionId;
    };
    ScreenSetPlugin.prototype.getApiData = function () {
        return this.data.apiData;
    };
    ScreenSetPlugin.prototype.getProfile = function () {
        var apiData = this.getApiData();
        var profile = apiData && apiData.getAccountInfo && apiData.getAccountInfo.profile;
        return profile || {};
    };
    ScreenSetPlugin.prototype.getLoginIds = function () {
        var _a, _b;
        return (_b = (_a = this.getApiData()) === null || _a === void 0 ? void 0 : _a.getAccountInfo) === null || _b === void 0 ? void 0 : _b.loginIDs;
    };
    ScreenSetPlugin.prototype.getConflictingAccount = function () {
        var _a, _b;
        return (_b = (_a = this.getApiData()) === null || _a === void 0 ? void 0 : _a.getConflictingAccount) === null || _b === void 0 ? void 0 : _b.conflictingAccount;
    };
    Object.defineProperty(ScreenSetPlugin.prototype, "providerSessionInfo", {
        get: function () {
            var _a, _b, _c, _d;
            return (_d = (((_a = this.data) === null || _a === void 0 ? void 0 : _a.providerSessionInfo) || ((_c = (_b = this.data) === null || _b === void 0 ? void 0 : _b.params) === null || _c === void 0 ? void 0 : _c.providerSessionInfo))) !== null && _d !== void 0 ? _d : {};
        },
        enumerable: true,
        configurable: true
    });
    ScreenSetPlugin.prototype.getSchemaData = function () {
        var apiData = this.getApiData();
        var data = apiData && apiData.getAccountInfo && apiData.getAccountInfo.data;
        return data || {};
    };
    ScreenSetPlugin.prototype.getSubScriptions = function () {
        var apiData = this.getApiData();
        var subscriptions = apiData && apiData.getAccountInfo && apiData.getAccountInfo.subscriptions;
        return subscriptions || {};
    };
    ScreenSetPlugin.prototype.getCommunications = function () {
        var _a, _b;
        return ((_b = (_a = this.getApiData()) === null || _a === void 0 ? void 0 : _a.getAccountInfo) === null || _b === void 0 ? void 0 : _b.communications) || {};
    };
    ScreenSetPlugin.prototype.getPreferences = function () {
        var apiData = this.getApiData();
        var preferences = apiData && apiData.getAccountInfo && apiData.getAccountInfo.preferences;
        return preferences || {};
    };
    ScreenSetPlugin.prototype.removeRegToken = function () {
        this.data.regToken = this.params.regToken = null;
    };
    ScreenSetPlugin.prototype.establishRegToken = function (regToken) {
        this.params.regToken = this.data.regToken = regToken;
    };
    ScreenSetPlugin.prototype.establishAToken = function (aToken) {
        this.params.aToken = this.data.aToken = aToken;
    };
    // TODO perhaps the form could also be the widget that originated the screenSet request (like anchor widget or the TFA widget)
    ScreenSetPlugin.prototype.onScreenResponse = function (response, form, afterFinalizeRegistration) {
        var _a, _b, _c, _d, _e;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var nextScreen, neededData, originalAfterSubmitHandler, fnOnInfoUpdated_1, _f, _g, apiData, _h, errorForm;
            var _this = this;
            return tslib_1.__generator(this, function (_j) {
                switch (_j.label) {
                    case 0:
                        if (!form)
                            form = {};
                        this.data.lastSubmittedFormID = form.ID;
                        this.data.lastSubmittedFormResponse = response;
                        nextScreen = form.successScreen;
                        if (response.response)
                            response = response.response;
                        neededData = ((_a = this._currentScreen) === null || _a === void 0 ? void 0 : _a.getNeededData(response)) || {};
                        if (response.autoSkip)
                            // autoSkip is being set on the canAutoSkip and sent back here in a dummy response
                            nextScreen = form.autoSkipScreen;
                        if (CloseReasons_1.CloseReasons[response.childScreenSetCloseReason] === CloseReasons_1.CloseReasons.skip)
                            nextScreen = form.screenSetSkippedScreen;
                        if (nextScreen === '_finish') {
                            // Resetting 'nextScreen' to be undefined in order to prevent side effects such as 'onAfterSubmit' event being fired twice (#69819)
                            // This is because UI-Builder inconsistently sets the next-screen value to '_finish'/undefined
                            nextScreen = undefined;
                        }
                        if (response.regToken) {
                            this.establishRegToken(response.regToken);
                        }
                        if (response.providerSessionInfo) {
                            this.data.providerSessionInfo = response.providerSessionInfo;
                        }
                        if (linkAccountsHelper_1.hasProviderSessionForLinkAccountsInParamsAfterRedirect(response)) {
                            this.data.providerSessionInfoAfterRedirect = linkAccountsHelper_1.getProviderSessionForLinkAccountsAfterRedirect(response);
                        }
                        this.onAccountInfo(response); //will update the profile/data cache from the response
                        if (!(afterFinalizeRegistration || (this.data.lastSubmittedFormID && (nextScreen || !this.endFlowIsPending())))) return [3 /*break*/, 10];
                        originalAfterSubmitHandler = this.params.onAfterSubmit;
                        fnOnInfoUpdated_1 = function (response) {
                            var _a, _b;
                            var submitResponse = _this.unwrapResponse(response);
                            var afterSubmitEvent = {
                                eventName: 'afterSubmit',
                                screen: (_a = form._screen) === null || _a === void 0 ? void 0 : _a.requestedScreen,
                                form: form.bindID,
                                profile: _this.getProfile(),
                                data: _this.getSchemaData(),
                                preferences: _this.getPreferences(),
                                subscriptions: _this.getSubScriptions(),
                                communications: _this.getCommunications(),
                                response: submitResponse,
                            };
                            if ((_b = form._screen) === null || _b === void 0 ? void 0 : _b.isScreenVariant) {
                                afterSubmitEvent.abTesting = form._screen.abTestingData;
                            }
                            if (!_this.params.onAfterSubmit)
                                _this.params.onAfterSubmit = originalAfterSubmitHandler;
                            _this.dispatchPluginEvent(afterSubmitEvent.eventName, afterSubmitEvent);
                        };
                        if (!(form instanceof NewsletterSignupForm_1.NewsletterSignupForm)) return [3 /*break*/, 1];
                        fnOnInfoUpdated_1(response);
                        return [3 /*break*/, 10];
                    case 1:
                        if (!(response.operation === '/accounts.setAccountInfo' && response.errorCode == GSErrors_1.GSErrors.OK && (!response.profile || !response.data))) return [3 /*break*/, 5];
                        if (!(FlagService_1.FlagService.updateAccountInfoAsync === true)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.updateAccountInfoAsync(function (accountInfoResponse) { return fnOnInfoUpdated_1(accountInfoResponse); }, (_c = (_b = neededData === null || neededData === void 0 ? void 0 : neededData.getAccountInfo) === null || _b === void 0 ? void 0 : _b.params) === null || _c === void 0 ? void 0 : _c.include)];
                    case 2:
                        _f = _j.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        _f = this.updateAccountInfo(function (accountInfoResponse) { return fnOnInfoUpdated_1(accountInfoResponse); }, (_e = (_d = neededData === null || neededData === void 0 ? void 0 : neededData.getAccountInfo) === null || _d === void 0 ? void 0 : _d.params) === null || _e === void 0 ? void 0 : _e.include);
                        _j.label = 4;
                    case 4:
                        _f;
                        return [3 /*break*/, 10];
                    case 5:
                        if (!(this.isAccountInfoRequired(response.operation) &&
                            (!this.getApiData().getAccountInfo || !this.getApiData().getAccountInfo.profile || !this.getApiData().getAccountInfo.data))) return [3 /*break*/, 9];
                        if (!(FlagService_1.FlagService.updateAccountInfoAsync === true)) return [3 /*break*/, 7];
                        return [4 /*yield*/, this.updateAccountInfoAsync(function (accountInfoResponse) { return fnOnInfoUpdated_1(response); })];
                    case 6:
                        _g = _j.sent();
                        return [3 /*break*/, 8];
                    case 7:
                        _g = this.updateAccountInfoAsync(function (accountInfoResponse) { return fnOnInfoUpdated_1(response); });
                        _j.label = 8;
                    case 8:
                        _g;
                        return [3 /*break*/, 10];
                    case 9:
                        fnOnInfoUpdated_1(response);
                        _j.label = 10;
                    case 10:
                        if (!(response.errorCode == GSErrors_1.GSErrors.OK)) return [3 /*break*/, 15];
                        if (!!this.endFlowIsPending()) return [3 /*break*/, 14];
                        if (!this.isLinkAccountsV2InProgress) return [3 /*break*/, 12];
                        return [4 /*yield*/, this.connectAccounts(response, form, this.providerSessionInfo)];
                    case 11:
                        _j.sent();
                        return [3 /*break*/, 14];
                    case 12:
                        if (!this.shouldFinalizeLinkAccountsV2AfterRedirect) return [3 /*break*/, 14];
                        return [4 /*yield*/, this.connectAccounts(response, form, this.data.providerSessionInfoAfterRedirect)];
                    case 13:
                        _j.sent();
                        _j.label = 14;
                    case 14:
                        apiData = this.getApiData();
                        if (response.operation == '/accounts.register' && apiData.initRegistration) {
                            // a successful call to accounts.register revokes the previous initRegistration response so that a new regToken will be generated for other register forms
                            window.gigya.logger.info("clearing screenset initRegistration cache (regToken)");
                            delete apiData.initRegistration;
                        }
                        this._currentScreen && this._currentScreen.hideErrors();
                        if (nextScreen && (!this._currentScreen || nextScreen != this._currentScreen.ID)) {
                            this.switchScreen(nextScreen, response, form);
                        }
                        else if (!nextScreen) {
                            window.gigya.logger.info("no next screen so...");
                            this.params.remember = this.data.extraEventData.rememberMe;
                            this.endFlow(response, form, CloseReasons_1.CloseReasons.finished);
                        }
                        return [3 /*break*/, 18];
                    case 15:
                        _h = Errors_1.PendingErrorAttributes[response.errorCode];
                        if (!_h) return [3 /*break*/, 17];
                        return [4 /*yield*/, this.handlePendingErrors(response, form)];
                    case 16:
                        _h = (_j.sent());
                        _j.label = 17;
                    case 17:
                        // Response indicate an error
                        if (_h) {
                            return [2 /*return*/];
                        }
                        errorForm = form instanceof BaseForm_1.BaseForm ? form : form.getErrorDisplayForm ? form.getErrorDisplayForm() : undefined;
                        if (errorForm) {
                            this.displayServerErrors(response, errorForm);
                        }
                        _j.label = 18;
                    case 18: return [2 /*return*/];
                }
            });
        });
    };
    ScreenSetPlugin.prototype.connectAccounts = function (response, form, providerSessionInfo) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var connectAccountsRes;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, linkAccountsHelper_1.connectAccounts(providerSessionInfo, {
                            sessionExpiration: this.params.sessionExpiration
                        })];
                    case 1:
                        connectAccountsRes = _a.sent();
                        if (connectAccountsRes['errorCode'] == GSErrors_1.GSErrors.OK) {
                            this.onConnectAccountsComplete();
                            this.dispatchLoginEventFromResponse(response);
                        }
                        return [4 /*yield*/, this.onScreenResponse(connectAccountsRes, form)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    ScreenSetPlugin.prototype.dispatchLoginEventFromResponse = function (response) {
        var loginEvent = {
            eventName: 'login,accounts.login',
            provider: response['loginProvider'],
            loginMode: LoginModes_1.LoginModes.link.name,
            remember: validationUtils.isExplicitTrue(this.data.extraEventData.rememberMe)
        };
        window.gigya.utils.object.extractProperties(response, loginEvent, 'newUser|signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|signKeysUIDSignature|dataCenter|id_token|password|');
        this.dispatchGlobalEvent(loginEvent);
    };
    ScreenSetPlugin.prototype.isAccountInfoRequired = function (method) {
        return ([
            // method that DON'T require account info
            '/accounts.resetPassword',
            '/accounts.resendVerificationCode',
            '/accounts.tfa.initTFA',
        ].indexOf(method) == -1);
    };
    ScreenSetPlugin.prototype.unwrapResponse = function (response) {
        var submitResponse;
        if (response.event && response.event.response) {
            // unwrap social login response
            submitResponse = response.event.response;
        }
        else {
            submitResponse = response;
        }
        return window.gigya.utils.object.clone(submitResponse);
    };
    /// TODO: move to BasePlugin?
    ScreenSetPlugin.prototype.displayServerErrors = function (response, form) {
        var _this = this;
        if (response.secretQuestion) {
            utils_1.ForEach(form._secretQuestions, function (secretQuestionWidget) { return secretQuestionWidget.setQuestion(response.secretQuestion); });
        }
        else {
            // TODO why else - can't an error be indicated along with the need for secret question? (validation error for example)
            var errorKey = form.getErrorKey(response);
            if (errorKey) {
                response.errorMessage = this.getText(errorKey);
            }
            var errorDetails;
            switch (response.errorDetailsCode // TODO Why this is not dependant on a specific main error code?
            ) {
                case GSErrors_1.GSErrorDetails.Same_password:
                    errorDetails = this.getText('old_password_cannot_be_the_same_as_new_password');
                    break;
                case GSErrors_1.GSErrorDetails.Invalid_password:
                    errorDetails = this.getText('wrong_password');
                    break;
            }
            switch (response.errorCode) {
                case GSErrors_1.GSErrors.Extension_Point_Custom_Error:
                    errorDetails = response.errorDetails || response.errorMessage;
                    break;
            }
            var eventResult = this.error(response.errorMessage, response.errorCode, {
                screen: form._screen.ID,
                form: form.ID,
                response: window.gigya.utils.object.clone(this.data.lastSubmittedFormResponse),
            });
            var nextScreen = this.screenParts(eventResult === null || eventResult === void 0 ? void 0 : eventResult.nextScreen);
            if ((eventResult === null || eventResult === void 0 ? void 0 : eventResult.nextScreen) && nextScreen.screenId !== form._screen.ID) {
                this.switchScreen(eventResult.nextScreen);
                return;
            }
            // error when no screen is loaded - prerequisites where not met
            if (!this._currentScreen) {
                this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.error]);
                return;
            }
            window.gigya.logger.info("reloading captchas");
            utils_1.ForEach(this._currentScreen._captchas, function (c) { return c.reload(); });
            var serverError = {
                errorCode: response.errorCode,
                errorMessage: response.customMessage || errorDetails || response.errorMessage,
                errorFlags: response.errorFlags,
            };
            var arFormErrors = new Array();
            if (response.validationErrors) {
                window.gigya.logger.group("screenset validation errors").endWhen(function () {
                    utils_1.ForEach(response.validationErrors, function (error, i) {
                        var field = form.getField(error.fieldName);
                        if (!field) {
                            var fieldNamespace = utils_1.firstPart(error.fieldName, '.');
                            if (fieldNamespace === 'profile')
                                field = form.getField(error.fieldName.replace('profile.', ''));
                        }
                        if (field) {
                            if (i === 0 && field.instanceElement)
                                // first validation error
                                field.instanceElement.focus();
                            var validationError = window.gigya.utils.object.clone(error); // TODO remove the clone
                            arFormErrors.push(validationError);
                            if (form.renderFieldError(error, true, error.customMessage))
                                error.handled = true;
                        }
                        else {
                            // server reported error with no matching field
                            if (error.fieldName === 'captchaText') {
                                _this.warn('Captcha is required but captcha widget is missing from the submitted form');
                            }
                            else {
                                _this.warn(error.fieldName + ' is mandatory/invalid but its field is missing from the submitted form');
                            }
                        }
                    });
                });
            }
            arFormErrors.push(serverError);
            form.showErrors([serverError], true);
            form.showErrors(arFormErrors, false);
        }
    };
    ScreenSetPlugin.prototype.hideError = function () {
        this._currentScreen.hideErrors();
    };
    ScreenSetPlugin.prototype.prepareScreens = function () {
        var _this = this;
        var screenElements = this.templateElement.querySelectorAll("." + ScreenConsts_1.Screen_CONSTS.gigyaClass);
        var firstScreen = true;
        utils_1.ForEach(screenElements, function (screenElement, i) {
            var _a;
            var screen = new Screen_1.Screen(_this, screenElement);
            _this._screens[screen.ID] = screen;
            if (firstScreen) {
                firstScreen = false;
                _this._startScreen = (_a = screen === null || screen === void 0 ? void 0 : screen.variantGroupId) !== null && _a !== void 0 ? _a : screen.ID;
            }
        });
    };
    //called when modal dialog is close to unlink widgets in screen
    ScreenSetPlugin.prototype.close = function () {
        this.cancel();
    };
    ScreenSetPlugin.prototype.cancel = function () {
        this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.canceled], null, true);
    };
    ScreenSetPlugin.prototype.hide = function (reason, response, alwaysClearContainer) {
        var _a, _b;
        this.undimScreenSet();
        var abTesting = ((_a = this._currentScreen) === null || _a === void 0 ? void 0 : _a.isScreenVariant) && ((_b = this._currentScreen) === null || _b === void 0 ? void 0 : _b.abTestingData);
        if (this.isModal && this._currentScreen) {
            this._currentScreen.unlinkInstanceElement();
            this._currentScreen = null;
        }
        if (alwaysClearContainer && this.container) {
            this.container.innerHTML = '';
        }
        _super.prototype.close.call(this, reason, window.gigya.utils.object.removeUndefined({
            user: response && response.user,
            isFlowFinalized: !this._isChild,
            abTesting: abTesting
        }));
    };
    ScreenSetPlugin.prototype.dispose = function () {
        if (this._isDisposed) {
            return;
        }
        this._disposeChildScreenSet();
        utils_1.ForEachProp(this._screens, function (s) { return s.unlinkTemplate(); });
        if (!this._child) {
            this.unregisterGlobalEvents();
        }
        _super.prototype.dispose.call(this);
    };
    ScreenSetPlugin.prototype._disposeChildScreenSet = function () {
        if (this._child) {
            this._child.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.canceledByParent]);
            this._child.dispose();
            this._child = null;
        }
    };
    ScreenSetPlugin.prototype.registerGlobalEvents = function () {
        this.addGlobalEventHandlers({
            onLogin: this.onUserStateChange,
            onLogout: this.onUserStateChange,
        });
    };
    ScreenSetPlugin.prototype.unregisterGlobalEvents = function () {
        this.removeGlobalEventHandlers({
            onLogin: this.onUserStateChange,
            onLogout: this.onUserStateChange,
        });
    };
    /// TODO: move to BasePlugin?
    ScreenSetPlugin.prototype.getErrorMessage = function (errorCode, isBoundToField, fieldName, fieldDisplayName) {
        if (errorCode == GSErrors_1.GSErrors.OK)
            return '';
        switch (errorCode) {
            case GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR:
                return this.getRequiredValueValidationErrorMessage(isBoundToField, fieldDisplayName);
            case GSErrors_1.GSErrors.UNIQUE_IDENTIFIER_EXISTS:
                return this.getUniqueIdentifierValidationErrorMessage(fieldName);
            case GSErrors_1.GSErrors.NETWORK_ERROR:
                return this.getText('network_error');
            case GSErrors_1.GSErrors.INVALID_TYPE_VALIDATION_ERROR:
                return this.getText('dqm_selection_error');
            case GSErrors_1.GSErrors.VALIDATION_ERROR:
            default:
                return this.getValidationErrorMessage(fieldName, fieldDisplayName);
        }
    };
    ScreenSetPlugin.prototype.getErrorMessageNew = function (errorCode) {
        switch (errorCode) {
            case GSErrors_1.GSErrors.NOT_SUPPORTED:
                return this.getText('not_supported');
            case GSErrors_1.GSErrors.PASSKEY_AUTHENTICATOR_REGISTERED:
                return this.getText('passkey_authenticator_already_registered');
            case GSErrors_1.GSErrors.OPERATION_CANCELED:
                return this.getText('operation_canceled');
            case GSErrors_1.GSErrors.INVALID_SITE_CONFIGURATION_ERROR:
                return this.getText('invalid_site_configuration');
            case GSErrors_1.GSErrors.PASSKEY_ERROR:
                return this.getText('passkey_authenticator_error');
            case GSErrors_1.GSErrors.UNAUTHORIZED_USER:
                return this.getText('unauthorized_user');
            case GSErrors_1.GSErrors.ACCOUNT_DISABLED:
                return this.getText('account_is_disabled');
            case GSErrors_1.GSErrors.PERMISSION_DENIED:
                return this.getText('permission_denied');
            case GSErrors_1.GSErrors.ACCOUNT_TEMPORARILY_LOCKED_OUT:
                return this.getText('account_temporarily_locked_out');
            case GSErrors_1.GSErrors.LOGIN_FAILED_CAPTCHA_REQUIRED:
            case GSErrors_1.GSErrors.LOGIN_FAILED_WRONG_CAPTCHA:
                return this.getText('login_captcha_error');
            case GSErrors_1.GSErrors.REQUEST_FAILED_CAPTCHA_REQUIRED:
                return this.getText('request_captcha_error');
            case GSErrors_1.GSErrors.LOGIN_IDENTIFIER_EXISTS:
                return this.getText('login_identifier_exists');
            case GSErrors_1.GSErrors.UNIQUE_IDENTIFIER_EXISTS:
                return this.getText('unique_identifier_exists');
            case GSErrors_1.GSErrors.UNDERAGE_USER:
                return this.getText('sorry_we_are_not_able_to_process_your_registration'); //COPPA
            case GSErrors_1.GSErrors.INVALID_LOGINID:
                return this.getText('invalid_login_or_password');
            case GSErrors_1.GSErrors.LOGINID_DOES_NOT_EXIST:
                return this.getText('there_is_no_user_with_that_username_or_email');
            case GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE: // invalid parameter value
            case GSErrors_1.GSErrors.DUPLICATE_NONCE:
                return this.getText('there_are_errors_in_your_form_please_try_again');
            case GSErrors_1.GSErrors.OLD_PASSWORD_USED:
                return this.getText('old_password_cannot_be_the_same_as_new_password');
            case GSErrors_1.GSErrors.NETWORK_ERROR:
                return this.getText('network_error');
            case GSErrors_1.GSErrors.FORBIDDEN:
                return this.getText('forbidden_error');
            case GSErrors_1.GSErrors.FREQUENCY_LIMIT_REACHED:
                return this.getText('code_frequency_limit_reached');
            case GSErrors_1.GSErrors.ACCOUNT_PENDING_REGISTRATION:
                return this.getText('account_pending_registration');
            case GSErrors_1.GSErrors.OK:
                return '';
            default:
                return this.getText('general_error');
        }
    };
    ScreenSetPlugin.prototype.getRequiredValueValidationErrorMessage = function (isBoundToField, fieldDisplayName) {
        if (isBoundToField) {
            // #49968 - Replace %fieldname even though the defaults don't use it to support %fieldname in customLang.
            return this.getText('this_field_is_required', '%fieldname', fieldDisplayName);
        }
        return this.getText('please_enter_fieldname', '%fieldname', fieldDisplayName);
    };
    ScreenSetPlugin.prototype.getUniqueIdentifierValidationErrorMessage = function (fieldName) {
        switch (fieldName) {
            case 'username':
                return this.getText('username_already_exists');
            case 'email':
                return this.getText('email_already_exists');
        }
        return '';
    };
    ScreenSetPlugin.prototype.getValidationErrorMessage = function (fieldName, fieldDisplayName) {
        switch (fieldName) {
            case 'email':
                return this.getText('email_address_is_invalid');
            case 'password':
            case 'newPassword':
                return this.getText('password_does_not_meet_complexity_requirements');
            case 'passwordRetype':
                return this.getText('passwords_do_not_match');
            case 'loginID':
                return this.getText('invalid_login_or_password');
            default:
                return this.getText('invalid_fieldname', '%fieldname', fieldDisplayName);
        }
    };
    // TODO: Remove when updateAccountInfoAsync will be released and updateAccountInfoAsync flag deleted
    ScreenSetPlugin.prototype.updateAccountInfo = function (fnCallback, include) {
        var _this = this;
        if (include === void 0) { include = 'profile,data'; }
        window.gigya.accounts.getAccountInfo(this.params, {
            include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues(this.params.include, include),
            callback: function (response) {
                _this.onAccountInfo(response);
                fnCallback(response);
            },
        });
    };
    ScreenSetPlugin.prototype.updateAccountInfoAsync = function (fnCallback, include) {
        if (include === void 0) { include = 'profile,data'; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, new gigya.Promise(function (resolve) {
                        window.gigya.accounts.getAccountInfo(_this.params, {
                            include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues(_this.params.include, include),
                            callback: function (response) {
                                _this.onAccountInfo(response);
                                fnCallback(response);
                                resolve(response);
                            },
                        });
                    })];
            });
        });
    };
    ScreenSetPlugin.prototype.onAccountInfo = function (response) {
        var accountInfo = response.accountInfo || response;
        var apiData = this.getApiData();
        if (!apiData.getAccountInfo) {
            apiData.getAccountInfo = {};
        }
        utils_1.ForEach(['profile', 'data', 'preferences', 'subscriptions', 'emails', 'loginIDs'], function (prop) {
            if (accountInfo[prop]) {
                apiData.getAccountInfo[prop] = window.gigya.utils.object.merge([apiData.getAccountInfo[prop] || {}, accountInfo[prop]]);
                window.gigya.logger.info("screenset accountInfo." + prop + " cache updated:", apiData.getAccountInfo[prop]);
            }
        });
        // Ensure any conditions that rely on account info are updated.
        if (this._currentScreen) {
            this._currentScreen.evaluateConditionalAttributes();
        }
    };
    ScreenSetPlugin.prototype.isRequestParamValuesMatch = function (cachedValue, expectedValue) {
        if (typeof expectedValue !== 'string') {
            return expectedValue === cachedValue;
        }
        var lookInObj = cachedValue.split(',').reduce(function (previousValue, currentValue) {
            var _a;
            return __webpack_provided_Object_dot_assign(previousValue, (_a = {}, _a[currentValue] = currentValue, _a));
        }, {});
        expectedValue.split(',').forEach(function (x) {
            if (!lookInObj.hasOwnProperty(x) || lookInObj[x] !== x)
                return false;
        });
        return true;
    };
    ScreenSetPlugin.prototype.hasRequiredApiData = function (methodName, params) {
        if (params === void 0) { params = {}; }
        var _a;
        var cachedResponse = this.data.apiData[methodName];
        if (!cachedResponse) {
            return false;
        }
        for (var key in params) {
            if (!((_a = cachedResponse.requestParams) === null || _a === void 0 ? void 0 : _a.hasOwnProperty(key)) // key doesn't exists in request params
                || !this.isRequestParamValuesMatch(cachedResponse.requestParams[key], params[key])) { // values does not match
                return false;
            }
        }
        return true;
    };
    ScreenSetPlugin.prototype.onApiData = function (response, formContext, prevForm) {
        window.gigya.logger.debug("updating screenset cache of " + response.operation);
        var apiData = this.getApiData();
        var apiMethodKey = this.getApiMethodFromFullNamespace(response.operation);
        if (response.operation.indexOf('getProviders') > -1) {
            apiData[apiMethodKey] = __webpack_provided_Object_dot_assign(response, { activeProviders: this.getEditableTfaProvider(response.activeProviders) });
        }
        else {
            if (apiMethodKey) {
                apiData[apiMethodKey] = response;
            }
        }
        if (response.regToken) {
            window.gigya.logger.info("updating screenset regToken");
            this.establishRegToken(response.regToken);
        }
        var gotAllNeededData = true;
        for (var methodName in this.data.neededData) {
            if (this.data.neededData.hasOwnProperty(methodName) &&
                !this.hasRequiredApiData(methodName, this.data.neededData[methodName].params)) {
                gotAllNeededData = false;
                break;
            }
        }
        if (gotAllNeededData) {
            window.gigya.logger.info("got all required data");
            this.loadNextScreen(formContext, prevForm);
        }
    };
    ScreenSetPlugin.prototype.chooseNextScreen = function (nextScreenValue) {
        if (!nextScreenValue)
            return;
        var possibleScreens = nextScreenValue.split(',');
        // Weighted screen possibilities
        var weightSum = 0;
        var weightedParts = [];
        utils_1.ForEach(possibleScreens, function (screen) {
            var parts = screen.split(':');
            var weight = parts.length > 1 ? parseInt(parts[1]) : 1;
            weightSum += weight;
            weightedParts.push({
                screen: parts[0],
                weight: weight,
            });
        });
        var random = this._random * weightSum;
        var selectedScreen;
        utils_1.Some(weightedParts, function (w) {
            random -= w.weight;
            if (random > 0)
                return false;
            selectedScreen = w.screen;
            return true;
        });
        return selectedScreen;
    };
    ScreenSetPlugin.prototype.getEditableTfaProvider = function (activeProviders) {
        if (activeProviders === void 0) { activeProviders = []; }
        var editableProviders = [];
        for (var i = 0; i < activeProviders.length - 0; i++) {
            var isEditable = this.isTfaProviderEditable(activeProviders[i].name);
            if (isEditable) {
                editableProviders.push(activeProviders[i].name);
            }
        }
        return editableProviders;
    };
    ScreenSetPlugin.prototype.isTfaProviderEditable = function (providerToCheck) {
        // go over the list of editable providers
        return constants_1.EditableTfaProvidersTypes[providerToCheck] != undefined;
    };
    ScreenSetPlugin.prototype.getApiMethodFromFullNamespace = function (operation) {
        var apiUrlSegments = operation.split('.');
        return apiUrlSegments[apiUrlSegments.length - 1];
    };
    ScreenSetPlugin.prototype.switchToChildScreenSet = function (screenSetName, screenID, form) {
        var _this = this;
        window.gigya.logger.info("opening child screenset: " + screenSetName + "/" + screenID);
        var hideChildHandler = function (e) {
            _this.params.regToken = _this.data.regToken;
            switch (CloseReasons_1.CloseReasons[e.reason]) {
                case CloseReasons_1.CloseReasons.canceledByParent:
                    break;
                case CloseReasons_1.CloseReasons.error:
                case CloseReasons_1.CloseReasons.canceled:
                    _this.hide(e.reason);
                    break;
                case CloseReasons_1.CloseReasons.pendingError:
                    _this.onScreenResponse(_this.data.lastSubmittedFormResponse, form, false);
                    break;
                case CloseReasons_1.CloseReasons.finished:
                case CloseReasons_1.CloseReasons.skip:
                case CloseReasons_1.CloseReasons.missing:
                default:
                    // Any arbitrary reason will be treated as finished flow
                    _this._disposeChildScreenSet();
                    _this.onScreenResponse({
                        errorCode: GSErrors_1.GSErrors.OK,
                        childScreenSetCloseReason: e.reason,
                        user: e.user,
                    }, form, false);
                    break;
            }
        };
        var onError = function (e) {
            if (_this.params.onError)
                _this.params.onError(e);
            _this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.error]);
        };
        var childParams = {
            screenSet: screenSetName,
            lang: this.getLangForScreenSet(),
            customLang: this._originalCustomLang,
            parentTranslations: this.params.customLang,
            width: this.params.width,
            height: this.params.height,
            context: this.params.context,
            cid: this.params.cid,
            regSource: this.params.regSource,
            regToken: this.params.regToken,
            onError: this.params.onError,
            onBeforeSubmit: this.params.onBeforeSubmit,
            onAfterSubmit: this.params.onAfterSubmit,
            onSubmit: this.params.onSubmit,
            onBeforeScreenLoad: this.params.onBeforeScreenLoad,
            onAfterScreenLoad: this.params.onAfterScreenLoad,
            onAfterValidation: this.params.onAfterValidation,
            onBeforeValidation: this.params.onBeforeValidation,
            onFieldChanged: this.params.onFieldChanged,
            ignoreApiQueue: this.params.ignoreApiQueue,
            onHide: hideChildHandler,
            parentData: this.data,
            getInstance: function (child) {
                _this._child = child;
            },
            _allowMultipleInstances: true,
            sessionExpiration: this.params.sessionExpiration
        };
        if (screenID)
            childParams.startScreen = screenID;
        this.hideScreenSetContainer();
        if (this.isModal) {
            childParams.newModal = true;
        }
        else {
            childParams.containerID = this._elChildContainer.id;
        }
        window.gigya[ScreenSetPlugin_CONSTS.namespace][ScreenSetPlugin_CONSTS.showScreenSetName](childParams);
        return true;
    };
    // Returns whether screen was switched
    ScreenSetPlugin.prototype.switchScreen = function (screenID, response, oForm) {
        var _a = this.screenParts(screenID), screenId = _a.screenId, screenSetName = _a.screenSetName;
        // if you request the same screen set - just work within the current screenSet
        if (screenSetName === this.params.screenSet) {
            screenSetName = null;
            if (!screenId) {
                this.warn('Attempt to open screen-set "' + screenSetName + '" from within the same screen-set, without specifying screen to move to.');
                return false;
            }
        }
        if (screenSetName)
            return this.switchToChildScreenSet(screenSetName, screenId, oForm);
        return this.switchToLocalScreen(screenId, response, oForm);
    };
    ScreenSetPlugin.prototype.switchToLocalScreen = function (screenID, response, oForm) {
        var _this = this;
        if (exports.EndFlowScreens[screenID]) {
            this.endFlow(response, oForm, exports.EndFlowScreens[screenID]);
            return true;
        }
        if (screenID === ScreenSetPlugin_CONSTS.stayOnScreen) {
            return true;
        }
        if (!FlagService_1.FlagService.skipSameScreenCheckOnSwitch) {
            if (this._currentScreen && this._currentScreen.ID === screenID) {
                return false;
            }
        }
        window.gigya.logger.info("switching to screen: " + screenID);
        this._nextScreen = this._screens[screenID] || GroupVariantProvider.getGroupVariant(this._screens, this._ID, this.isActiveGroup(screenID), screenID);
        if (!this._nextScreen) {
            this.warn('Missing screen "' + screenID + '"');
            this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.missing]);
            return false;
        }
        else {
            this._nextScreen.requestedScreenId = screenID;
        }
        if (this.data.finalizeRegistrationNeeded && !this._nextScreen.haveForms()) {
            // TODO: Why not allow a screen that contains only an ad and screen links?
            this.endFlow(response, oForm, CloseReasons_1.CloseReasons.finished);
        }
        if (!this._currentScreen)
            this.setNextScreenSize(); // draw an empty screen with a progress
        var shouldWaitForData = false;
        var extraProfileFields = this._nextScreen.getExtraProfileFields(false).join(',');
        var formContext = response;
        this.data.neededData = this._nextScreen.getNeededData(formContext);
        var apiData = this.getApiData();
        var callback = this.prepareCallback(function (res) { return _this.onApiData(res, formContext, oForm); });
        window.gigya.logger.info("required data for the screen:", this.data.neededData);
        utils_1.ForEachProp(this.data.neededData, function (methodInfo, methodName) {
            var disableCache = window.gigya.utils.validation.isExplicitFalse(methodInfo.cache);
            if (disableCache && apiData)
                delete apiData[methodName];
            if (!apiData[methodName] || (methodName === 'getAccountInfo' && extraProfileFields !== '')) {
                if (apiData[methodName])
                    delete apiData[methodName];
                _this.dimScreenSet();
                shouldWaitForData = true;
                var extraParams_1 = { callback: callback };
                if (methodInfo.responseHandler)
                    // If method has a specific response handler, go through it before passing the data to the screenSet
                    extraParams_1.callback = function (res) { return _this.onApiData(methodInfo.responseHandler(res), formContext, oForm); };
                if (methodName === 'getAccountInfo') {
                    if (extraProfileFields) {
                        extraParams_1['extraProfileFields'] = extraProfileFields;
                    }
                }
                var method_1 = window.gigya.utils.object.expressionHelper(window.gigya.accounts).getField(methodName)
                    || window.gigya.socialize[methodName] || window.gigya.accounts.tfa[methodName] || window.gigya.accounts.b2b[methodName];
                var methodParams_1 = window.gigya.utils.object.removeUndefined(methodInfo.params);
                if (methodParams_1 && methodParams_1['include'] && _this.params) {
                    methodParams_1['include'] =
                        window.gigya.utils.stringUtils.mergeCommaSeparatedValues(methodParams_1['include'], _this.params['include']);
                }
                if (methodInfo.shouldExecute) {
                    methodInfo.shouldExecute().then(function (shouldExecute) {
                        if (shouldExecute) {
                            method_1(_this.params, methodParams_1, extraParams_1);
                        }
                        else {
                            // Since the method should not be executed and the onApiData callback will not occur after the response,
                            // we need to remove this method from the needed data.
                            _this.removeFromNeededData(_this.data.neededData, methodName);
                            // and call onApiData manually with an empty method name to continue the flow
                            _this.onApiData({ operation: '' }, formContext, oForm);
                        }
                    });
                }
                else {
                    method_1(_this.params, methodParams_1, extraParams_1);
                }
            }
        });
        if (shouldWaitForData) {
            window.gigya.logger.info("waiting for required data");
        }
        else {
            this.loadNextScreen(formContext, oForm);
        }
        return true;
    };
    ScreenSetPlugin.prototype.shouldClose = function () {
        return this.isModal;
    };
    ScreenSetPlugin.prototype.loadNextScreen = function (formContext, prevForm) {
        var _a, _b, _c, _d, _e;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var screenID, logger, beforeLoadEvent, eventResult, nextScreen, actualScreenId, tempElContainer;
            var _this = this;
            return tslib_1.__generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        screenID = this._nextScreen.ID;
                        logger = window.gigya.logger.group("loading screen " + screenID);
                        beforeLoadEvent = window.gigya.utils.object.removeUndefined({
                            eventName: 'beforeScreenLoad',
                            currentScreen: (_a = this._currentScreen) === null || _a === void 0 ? void 0 : _a.requestedScreen,
                            form: this.data.lastSubmittedFormID,
                            response: window.gigya.utils.object.clone(this.data.lastSubmittedFormResponse),
                            profile: this.getProfile(),
                            data: this.getSchemaData(),
                            subscriptions: this.getSubScriptions(),
                            communications: this.getCommunications(),
                            preferences: this.getPreferences(),
                            nextScreen: (_b = this._nextScreen) === null || _b === void 0 ? void 0 : _b.requestedScreen,
                            schema: this.getApiData().getSchema,
                        });
                        if ((_c = this._nextScreen) === null || _c === void 0 ? void 0 : _c.isScreenVariant)
                            beforeLoadEvent.abTesting = (_d = this._nextScreen) === null || _d === void 0 ? void 0 : _d.abTestingData;
                        eventResult = this.dispatchPluginEvent(beforeLoadEvent.eventName, beforeLoadEvent);
                        this.undimScreenSet();
                        if (!eventResult)
                            return [2 /*return*/];
                        if (typeof eventResult === 'object') {
                            // populate the current screen with the event data for population
                            this._nextScreen.setBeforeLoadData(eventResult);
                        }
                        nextScreen = this.screenParts(eventResult === null || eventResult === void 0 ? void 0 : eventResult.nextScreen);
                        actualScreenId = ((_e = this._nextScreen) === null || _e === void 0 ? void 0 : _e.isScreenVariant) ? this._nextScreen.variantGroupId : screenID;
                        if ((eventResult === null || eventResult === void 0 ? void 0 : eventResult.nextScreen) && (nextScreen === null || nextScreen === void 0 ? void 0 : nextScreen.screenId) !== actualScreenId) {
                            this.switchScreen(eventResult.nextScreen);
                            return [2 /*return*/];
                        }
                        this.setNextScreenSize(this._nextScreen);
                        this._elContainer.innerHTML = '';
                        if (this._currentScreen) {
                            window.gigya.logger.debug("unlinking current screen: " + this._currentScreen.ID);
                            this._currentScreen.unlinkInstanceElement();
                            this._currentScreen = null;
                        }
                        return [4 /*yield*/, this.prepareNextScreen()];
                    case 1:
                        tempElContainer = _f.sent();
                        this._nextScreen.performAutoSkip(formContext).then(function (skippedForm) {
                            var _a, _b;
                            if (skippedForm && skippedForm == prevForm) {
                                window.gigya.logger.warn("Unable to proceed to next screen: missing required data for submission'");
                            }
                            if (skippedForm && skippedForm != prevForm) {
                                _this._nextScreen.undimScreen();
                                _this._nextScreen.unlinkInstanceElement();
                                var response = { errorCode: GSErrors_1.GSErrors.OK, autoSkip: true };
                                _this._screenSet.onScreenResponse(response, skippedForm); // Behaves as if the first form was submitted (if there is one)
                                return;
                            }
                            tempElContainer.style.display = '';
                            tempElContainer.style.visibility = '';
                            if (_this._elContainer && _this._elContainer.parentNode) {
                                _this._elContainer.parentNode.removeChild(_this._elContainer);
                            }
                            _this.container.appendChild(tempElContainer);
                            _this._elContainer = tempElContainer;
                            _this._currentScreen = _this._nextScreen;
                            _this._nextScreen = null;
                            _this._currentScreen.resetLastConditionalValues();
                            _this._currentScreen.evaluateConditionalAttributes();
                            var screenWidth = _this._currentScreen.instanceElement ? _this._currentScreen.instanceElement.offsetWidth + 'px' : '';
                            _this.setCaption(_this._currentScreen.caption, screenWidth);
                            _this.showScreenSetContainer();
                            var afterLoadEvent = window.gigya.utils.object.removeUndefined({
                                eventName: 'afterScreenLoad',
                                currentScreen: (_a = _this._currentScreen) === null || _a === void 0 ? void 0 : _a.requestedScreen,
                                form: _this.data.lastSubmittedFormID,
                                response: window.gigya.utils.object.clone(_this.data.lastSubmittedFormResponse),
                                profile: _this.getProfile(),
                                preferences: _this._screenSet.getPreferences(),
                                data: _this.getSchemaData(),
                            });
                            if ((_b = _this._currentScreen) === null || _b === void 0 ? void 0 : _b.isScreenVariant) {
                                afterLoadEvent.abTesting = _this._currentScreen.abTestingData;
                            }
                            _this.dispatchPluginEvent(afterLoadEvent.eventName, afterLoadEvent);
                            logger.end();
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(ScreenSetPlugin.prototype, "activeGroups", {
        get: function () {
            var _a, _b;
            return ((_b = (_a = this.templateElement) === null || _a === void 0 ? void 0 : _a.getAttribute(exports.ScreenSet_CONSTS.dataActiveGroups)) === null || _b === void 0 ? void 0 : _b.split(',')) || [];
        },
        enumerable: true,
        configurable: true
    });
    ScreenSetPlugin.prototype.isActiveGroup = function (groupId) {
        var _a;
        return (_a = this.activeGroups) === null || _a === void 0 ? void 0 : _a.includes(groupId);
    };
    ScreenSetPlugin.prototype.prepareNextScreen = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var elScreen, elContainer, err_1;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        window.gigya.logger.info("preparing next screen: " + this._nextScreen.ID);
                        elScreen = document.createElement('div'), elContainer = document.createElement('div');
                        utils_1.ForEach(this._elContainer.attributes, function (a) { return elContainer.setAttribute(a.name, a.value); });
                        elContainer.style.visibility = 'hidden';
                        elContainer.appendChild(elScreen);
                        document.body.appendChild(elContainer);
                        this._nextScreen.placeContentInElement(elScreen);
                        TemplateElement_1.TemplateElement.prepareTemplateInstances(elContainer);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, this._nextScreen.linkInstanceElement(elContainer)];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        err_1 = _a.sent();
                        window.gigya.logger.error("Error while preparing next screen", err_1);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/, elContainer];
                }
            });
        });
    };
    ScreenSetPlugin.prototype.setCaption = function (caption, width) {
        // Do not attempt to set caption if there is no element.
        // Do not attempt to set caption if we are not in a modal and there is a child screen-set (child will control caption).
        if (!this._captionElement || (!this.isModal && this._child) || this.isContainerContentHidden()) {
            return;
        }
        if (!caption) {
            // TODO why this behavior? why if it is empty and on mobile to set content with hidden style?
            if (!this.isModal)
                this._captionElement.style.display = 'none';
        }
        else {
            this._captionElement.style.display = '';
        }
        this._captionElement.innerHTML = caption || '&nbsp;';
        if (!this.isModal && !this.isMobileUI && width !== undefined) {
            this._captionElement.style.width = width;
        }
    };
    ScreenSetPlugin.prototype.setNextScreenSize = function (nextScreen) {
        this._elContainer.style.display = '';
        var w;
        var h;
        if (nextScreen) {
            w = nextScreen.width;
            h = nextScreen.height;
            if (!w || !h) {
                var elTempScreen = document.createElement('div');
                nextScreen.placeContentInElement(elTempScreen);
                window.gigya.utils.DOM.addClassToElement(elTempScreen, exports.ScreenSet_CONSTS.calculateSizeClass);
                window.gigya.utils.DOM.setSize(elTempScreen, w, h);
                this.container.appendChild(elTempScreen);
                var bnp = window.gigya.global.getBordersAndPaddings(elTempScreen);
                if (!w)
                    w = String(elTempScreen.offsetWidth + Math.ceil(bnp.w) + 30);
                if (!h)
                    h = String(elTempScreen.offsetHeight + 1);
                elTempScreen.parentNode.removeChild(elTempScreen);
            }
        }
        if (w) {
            if (!this.isMobileUI && (this.isModal || !this.isResponsive)) {
                // do not set width in % units for legacy.
                if (this.getPluginStyle() != PluginStyles_1.PluginStyle.legacy || utils_1.getUnitMeasurementType(w) != utils_1.UnitMeasurementType.percentage) {
                    window.gigya.utils.DOM.setSize(this._elContainer, w, undefined);
                }
            }
            else {
                var maxWidth = w == 'auto' ? 'none' : '' + (('' + w).indexOf('%') > 0 ? w : w + 'px');
                this._elContainer.style.maxWidth = maxWidth;
                if (window.gigya.localInfo.isIE7 || window.gigya.localInfo.isIE8 || (window.gigya.localInfo.isIE && window.gigya.localInfo.quirksMode))
                    this._elContainer.style['_width'] = maxWidth; // Fix for old IE that does not recognize maxWidth
            }
        }
        if (this.isModal && !this.isMobileUI) {
            //if (h) {
            //    this._elContainer.style.minHeight = h + 'px';
            //    if (gigya.localInfo.isIE7 || gigya.localInfo.isIE8 || (gigya.localInfo.isIE && gigya.localInfo.quirksMode))
            //        this._elContainer.style['_height'] = h + 'px'; // Workaround for old IE that does not support minHeight
            //}
        }
    };
    ScreenSetPlugin.prototype.shouldFinalizeFlow = function (reason) {
        return !this._isChild && this.endFlowIsPending() && reason !== CloseReasons_1.CloseReasons.cancel;
    };
    ScreenSetPlugin.prototype.doesScreenHaveForms = function (screenId) {
        return screenId && this._screens[screenId] && this._screens[screenId].haveForms();
    };
    ScreenSetPlugin.prototype.dimScreenSet = function () {
        this._loadingIndicator && this._loadingIndicator.show();
    };
    ScreenSetPlugin.prototype.undimScreenSet = function () {
        this._loadingIndicator && this._loadingIndicator.hide();
    };
    ScreenSetPlugin.prototype.handlePendingErrors = function (response, oForm) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var errorInfo, nextScreen;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        errorInfo = Errors_1.PendingErrorAttributes[response.errorCode] || {};
                        window.gigya.logger.info("screenset routing error code " + response.errorCode + " --> " + errorInfo.name);
                        if (!errorInfo.nextScreen) return [3 /*break*/, 2];
                        return [4 /*yield*/, errorInfo.nextScreen(oForm)];
                    case 1:
                        nextScreen = _a.sent();
                        _a.label = 2;
                    case 2:
                        if (nextScreen) {
                            if (errorInfo.requiresFinalize) {
                                this.data.finalizeRegistrationNeeded = true;
                            }
                            else if (errorInfo.resetFinalizeNeededState) {
                                this.data.finalizeRegistrationNeeded = false;
                            }
                            // TODO add a warning that the pending screen does not have a form and can not deal with the pending issue
                            return [2 /*return*/, this.switchScreen(nextScreen, response, oForm)];
                        }
                        else {
                            if (this._isChild) {
                                // allow parent to handle pending error
                                this.hide(CloseReasons_1.CloseReasons[CloseReasons_1.CloseReasons.pendingError], response);
                                // this is the parent
                            }
                            else
                                window.gigya.logger.warn("Missing ScreenSet attribute " + errorInfo.name + " for pending error: " + response.errorCode);
                            return [2 /*return*/, false];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    ScreenSetPlugin.prototype.endFlowIsPending = function () {
        return this.data.finalizeRegistrationNeeded && this.data.regToken;
    };
    ScreenSetPlugin.prototype.endFlow = function (res, oForm, reason) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var regToken_1, finalizeRegistrationParams;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        window.gigya.logger.info("ending screenset flow");
                        if (!(reason === CloseReasons_1.CloseReasons.skip)) return [3 /*break*/, 2];
                        if (!(oForm && oForm.onBeforeSkipped)) return [3 /*break*/, 2];
                        return [4 /*yield*/, oForm.onBeforeSkipped()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (reason === CloseReasons_1.CloseReasons.skip) {
                            if (oForm && oForm.onSkipped) {
                                oForm.onSkipped(res);
                            }
                        }
                        if (this.shouldFinalizeFlow(reason)) {
                            if (typeof this.data.extraEventData.allowAccountsLinking !== 'undefined') {
                                this.params.allowAccountsLinking = this.data.extraEventData.allowAccountsLinking;
                            }
                            regToken_1 = this.data.regToken || this.params.regToken;
                            this.removeRegToken();
                            this.dimScreenSet();
                            window.gigya.logger.info("screenset finalizing registration");
                            finalizeRegistrationParams = {
                                include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,emails,subscriptions,preferences', this._screenSet.params.include),
                                dontHandleScreenSet: true,
                                regToken: regToken_1,
                                callback: function (response) {
                                    _this.undimScreenSet();
                                    if (response.errorCode == 0) {
                                        window.gigya.logger.info("registration finalized - clearing cache");
                                        _this.data.finalizeRegistrationNeeded = false;
                                        _this.data.apiData = {};
                                    }
                                    else {
                                        window.gigya.logger.info("registration failed finalizing - re-using existing regToken");
                                        _this.data.regToken = _this.params.regToken = regToken_1;
                                    }
                                    _this.onScreenResponse(response, oForm, true);
                                },
                            };
                            if (this.isLinkAccountsV2InProgress || this.shouldFinalizeLinkAccountsV2AfterRedirect) {
                                finalizeRegistrationParams['suppressLoginEvent'] = true;
                            }
                            window.gigya.accounts.finalizeRegistration(this.params, finalizeRegistrationParams);
                        }
                        else {
                            this.hide(CloseReasons_1.CloseReasons[reason], res);
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    // BasePlugin Override
    ScreenSetPlugin.prototype.resizeModal = function (size) {
        // TODO not sure we need this at all
        if (this.getPluginStyle() !== PluginStyles_1.PluginStyle.legacy) {
            if (size.height)
                this._elContainer.style.height = size.height;
            if (size.width)
                this._elContainer.style.width = size.width;
        }
        else {
            /* legacy adjustments */
            if (utils_1.getUnitMeasurementType(size.width) == utils_1.UnitMeasurementType.percentage) {
                delete size.width;
                this._elContainer.style.width = '';
            }
            if (utils_1.getUnitMeasurementType(size.height) == utils_1.UnitMeasurementType.percentage) {
                delete size.height;
                this._elContainer.style.height = '';
            }
        }
        _super.prototype.resizeModal.call(this, size);
    };
    ScreenSetPlugin.prototype.resizePlugin = function (old, curr) {
        this.onViewportSizeChanged();
    };
    ScreenSetPlugin.prototype.onViewportSizeChanged = function (oldViewportSize, currentViewportSize) {
        if (this._currentScreen) {
            this._currentScreen.evaluateConditionalAttributes();
        }
    };
    ScreenSetPlugin.prototype.showScreenSetContainer = function () {
        if (this._modalDialog) {
            window.gigya.utils.DOM.removeClassFromElement(this._modalDialog.getModalDialogContainer(), exports.ScreenSet_CONSTS.gigyaHidden);
            this._modalDialog.showAll();
        }
        else {
            // in place screen-set
            window.gigya.utils.DOM.removeClassFromElement(this._elContainer, exports.ScreenSet_CONSTS.gigyaHidden);
            window.gigya.utils.DOM.addClassToElement(this._elChildContainer, exports.ScreenSet_CONSTS.gigyaHidden);
        }
    };
    ScreenSetPlugin.prototype.hideScreenSetContainer = function () {
        if (this._modalDialog) {
            this._modalDialog.hideAll();
            window.gigya.utils.DOM.addClassToElement(this._modalDialog.getModalDialogContainer(), exports.ScreenSet_CONSTS.gigyaHidden);
        }
        else {
            // in place screen-set
            window.gigya.utils.DOM.addClassToElement(this._elContainer, exports.ScreenSet_CONSTS.gigyaHidden);
            window.gigya.utils.DOM.removeClassFromElement(this._elChildContainer, exports.ScreenSet_CONSTS.gigyaHidden);
        }
    };
    ScreenSetPlugin.prototype.getLangForScreenSet = function () {
        var _a, _b, _c;
        return this.params._explicitLang
            ? (_c = (_b = (_a = this.params.lang) === null || _a === void 0 ? void 0 : _a.split(/(?:,|\s)+/g)) === null || _b === void 0 ? void 0 : _b.filter(Boolean)) === null || _c === void 0 ? void 0 : _c.join(',') : window.gigya.thisScript.lang.originalLang; // otherwise, use the original (full) lang from globalConf
    };
    ScreenSetPlugin.prototype.isContainerContentHidden = function () {
        return window.gigya.utils.DOM.isElementClass(this._elContainer, exports.ScreenSet_CONSTS.gigyaHidden);
    };
    ScreenSetPlugin.prototype.screenParts = function (screenID) {
        if (screenID === void 0) { screenID = ''; }
        var screenParts = screenID === null || screenID === void 0 ? void 0 : screenID.split('/');
        var screenSetName;
        if ((screenParts === null || screenParts === void 0 ? void 0 : screenParts.length) > 1) {
            screenSetName = screenParts.shift();
        }
        var screenId = screenParts === null || screenParts === void 0 ? void 0 : screenParts.join('/');
        return { screenId: screenId, screenSetName: screenSetName };
    };
    Object.defineProperty(ScreenSetPlugin.prototype, "regToken", {
        get: function () {
            var _a, _b;
            return ((_a = this.data) === null || _a === void 0 ? void 0 : _a.regToken) || ((_b = this.params) === null || _b === void 0 ? void 0 : _b.regToken);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ScreenSetPlugin.prototype, "hasProviderSessionInfo", {
        get: function () {
            return Object.keys(this.providerSessionInfo || {}).length > 0;
        },
        enumerable: true,
        configurable: true
    });
    ScreenSetPlugin.prototype.onConnectAccountsComplete = function () {
        if (this.data) {
            this.data.providerSessionInfo = null;
            this.data.shouldConnectAccounts = false;
            this.data.providerSessionInfoAfterRedirect = null;
        }
    };
    Object.defineProperty(ScreenSetPlugin.prototype, "isLinkAccountsV2InProgress", {
        get: function () {
            var _a;
            return this.hasProviderSessionInfo && ((_a = this.data) === null || _a === void 0 ? void 0 : _a.shouldConnectAccounts);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ScreenSetPlugin.prototype, "shouldFinalizeLinkAccountsV2AfterRedirect", {
        get: function () {
            var _a;
            return Boolean((_a = this.data) === null || _a === void 0 ? void 0 : _a.providerSessionInfoAfterRedirect);
        },
        enumerable: true,
        configurable: true
    });
    ScreenSetPlugin.prototype.removeFromNeededData = function (data, methodName) {
        delete data[methodName];
    };
    /**
     * Used to cache reference to JavaScript and translations downloaded for each screen-set.
     *
     * The object reference is placed on the gigya object directly to avoid being cleared when this file is reloaded by a site switching languages.
     */
    ScreenSetPlugin.CACHE = (window.gigya['__screenSetPluginCache'] = window.gigya['__screenSetPluginCache'] || {});
    ScreenSetPlugin.CONSTS = exports.ScreenSet_CONSTS;
    return ScreenSetPlugin;
}(window.gigya._.plugins.BasePlugin));
exports.ScreenSetPlugin = ScreenSetPlugin;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.passwordStrength = __webpack_require__(/*! ./templates/passwordStrength.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength.html");
exports.passwordStrength_strengthMeter = __webpack_require__(/*! ./templates/passwordStrength_strengthMeter.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_strengthMeter.html");
exports.passwordStrength_minimumRequirements = __webpack_require__(/*! ./templates/passwordStrength_minimumRequirements.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_minimumRequirements.html");
exports.screenSet_dialog = __webpack_require__(/*! ./templates/screenSet_dialog.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet_dialog.html");
exports.screenSet = __webpack_require__(/*! ./templates/screenSet.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet.html");
exports.photoUpload_ui = __webpack_require__(/*! ./templates/photoUpload_ui.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_ui.html");
exports.photoUpload_form = __webpack_require__(/*! ./templates/photoUpload_form.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_form.html");
exports.inlinedPasswordStrength = __webpack_require__(/*! ./templates/inlinedPasswordStrength.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/inlinedPasswordStrength.html");
exports.consent = __webpack_require__(/*! ./templates/consent.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/consent.html");
exports.communicationCheckbox = __webpack_require__(/*! ./templates/communicationCheckbox.html */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/communicationCheckbox.html");


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! ./BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.SwitchScreen_CONSTS = {
    selector: '[data-switch-screen]',
    switchScreen: 'data-switch-screen',
    successScreen: 'data-on-success-screen',
    screenSetSkippedScreen: 'data-on-screenset-skipped-screen',
};
utils_1.DeepFreeze(exports.SwitchScreen_CONSTS);
var SwitchScreenWidget = /** @class */ (function (_super) {
    tslib_1.__extends(SwitchScreenWidget, _super);
    function SwitchScreenWidget(_screen, el) {
        var _this = _super.call(this, _screen, el, false) || this;
        _this._screen = _screen;
        // No definition of what should be the id in case that no ID is published.
        _this.bindID = _this.ID;
        return _this;
    }
    SwitchScreenWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        this.updateAttributes();
        this.clickHandler = function (event) {
            var form = _this._screen.getFormByElement(_this.instanceElement);
            var formContext = {
                errorCode: GSErrors_1.GSErrors.OK,
                explicitSwitchScreen: true
            };
            _this._screenSet.switchScreen(_this.switchScreen, formContext, form);
        };
        this.addEventListener('click', this.clickHandler);
    };
    SwitchScreenWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.removeEventListener('click', this.clickHandler);
    };
    SwitchScreenWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.updateAttributes();
    };
    SwitchScreenWidget.prototype.updateAttributes = function () {
        var _a, _b, _c;
        if (!this.instanceElement)
            return;
        this.instanceElement.removeAttribute('target');
        this.switchScreen = this.instanceElement.getAttribute(exports.SwitchScreen_CONSTS.switchScreen);
        if (((_b = (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.nodeName) === null || _b === void 0 ? void 0 : _b.toLocaleLowerCase()) === 'a' && !((_c = this.instanceElement) === null || _c === void 0 ? void 0 : _c.querySelector('input[type=button]'))) {
            this.setAccessibilityAttributes();
        }
        else {
            this.removeAccessibilityAttributes();
        }
    };
    SwitchScreenWidget.prototype.removeAccessibilityAttributes = function () {
        this.instanceElement.removeAttribute('role');
        this.instanceElement.removeAttribute('title');
        this.instanceElement.removeAttribute('tabindex');
    };
    SwitchScreenWidget.prototype.setAccessibilityAttributes = function () {
        var _a;
        var tabIndex = this.instanceElement.getAttribute('tabindex');
        if (!tabIndex) {
            this.instanceElement.setAttribute('tabindex', '0');
        }
        (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.setAttribute('href', 'javascript:void(0)');
        this.instanceElement.setAttribute('role', 'button');
        this.instanceElement.setAttribute('title', this.instanceElement.innerText);
    };
    SwitchScreenWidget.CONSTS = exports.SwitchScreen_CONSTS;
    return SwitchScreenWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.SwitchScreenWidget = SwitchScreenWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(SwitchScreenWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts":
/*!************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var Debug_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts");
var ElementRoles;
(function (ElementRoles) {
    ElementRoles[ElementRoles["_undefined"] = 0] = "_undefined";
    ElementRoles[ElementRoles["template"] = 1] = "template";
    ElementRoles[ElementRoles["instance"] = 2] = "instance";
})(ElementRoles = exports.ElementRoles || (exports.ElementRoles = {}));
var generatedIdNumber = 0;
exports.TemplateElement_CONSTS = {
    elementId: 'data-screenset-element-id',
    elementFor: 'data-screenset-element-for',
    publishElementId: 'data-screenset-element-id-publish',
    templateForArray: 'screenSetTemplateFor',
    instanceOfArray: 'screenSetInstanceOf',
    screenSetRoles: 'data-screenset-roles',
};
utils_1.DeepFreeze(exports.TemplateElement_CONSTS);
var conditionalFunction = new Function('screenset', 'passkeys', 'viewport', 'formData', 'profile', 'data', 'subscriptions', 'communications', 'preferences', 'accountInfo', 'tfaProviders', 'authMethods', 'conflictingAccount', 'consentStatements', 'identifier', 'schema', '_account', 'value', 'return eval(value);');
var TemplateElement = /** @class */ (function () {
    function TemplateElement(templateElement, _parent) {
        this.templateElement = templateElement;
        this._parent = _parent;
        this.eventHandlers = {};
        this.conditionalExpressions = new Array();
        this._screenSet = _parent._screenSet;
        if (TemplateElement.isTemplateInstance(this.templateElement)) {
            // Creating multiple TemplateElement instances on the same element
            this.ID = this.templateElement.getAttribute(exports.TemplateElement_CONSTS.elementId) || '';
            this.publishID = this.templateElement.getAttribute(exports.TemplateElement_CONSTS.publishElementId) === 'true';
        }
        else {
            // Creating the first TemplateElement instance for this element
            this.ID = this.templateElement.id || '';
            if (this.ID !== '') {
                this.publishID = true;
                this.templateElement.removeAttribute('id'); // eliminate the id from the template to make sure that id only exists on the running instance of the element
            }
            else {
                var generatedNumber = ++generatedIdNumber + '_' + new Date().getTime(); // make sure every ID is as unique as possible
                this.ID = '__gig_template_element_' + generatedNumber;
                this.publishID = false;
            }
            this.templateElement.setAttribute(exports.TemplateElement_CONSTS.elementId, this.ID);
            this.templateElement.setAttribute(exports.TemplateElement_CONSTS.publishElementId, String(this.publishID));
        }
        this.ID = this.ID.trim();
        // mark role on the element
        var currentRoles = TemplateElement.getRoles(this.templateElement);
        currentRoles.push(ElementRoles.template);
        TemplateElement.setRoles(this.templateElement, currentRoles);
        // link JS object to template element
        var templateFor = templateElement[exports.TemplateElement_CONSTS.templateForArray];
        if (!templateFor) {
            templateFor = new Array();
            templateElement[exports.TemplateElement_CONSTS.templateForArray] = templateFor;
        }
        this.conditionalExpressions = this.getConditionalExpression(this.templateElement);
        templateFor.push(this);
    }
    TemplateElement.prototype.unlinkTemplate = function () {
        // remove instance link
        var templateFor = this.templateElement[exports.TemplateElement_CONSTS.templateForArray];
        if (templateFor) {
            var i = utils_1.LastIndexOf(templateFor, this);
            templateFor.splice(i, 1);
        }
        // remove role
        var currentRoles = TemplateElement.getRoles(this.templateElement);
        var lastRole = currentRoles.pop();
        if (lastRole === ElementRoles.template)
            TemplateElement.setRoles(this.templateElement, currentRoles);
        else
            this.warn('unlinkTemplate without matching role');
    };
    TemplateElement.prototype.getConditionalExpression = function (el) {
        var conditionalExpressions = [];
        try {
            conditionalExpressions = utils_1.getConditionalAttributeExpressions(el);
        }
        catch (e) {
            this.warn('Error parsing conditional expressions.');
        }
        return conditionalExpressions;
    };
    TemplateElement.getRoles = function (element) {
        var roleNames = (element.getAttribute(exports.TemplateElement_CONSTS.screenSetRoles) || '').split(',');
        if (roleNames[0] === '')
            roleNames.pop();
        return utils_1.Map(roleNames, function (roleName) { return ElementRoles[roleName] || ElementRoles._undefined; });
    };
    TemplateElement.setRoles = function (element, roles) {
        var rolesNames = utils_1.Map(roles, function (role) { return ElementRoles[role]; });
        element.setAttribute(exports.TemplateElement_CONSTS.screenSetRoles, rolesNames.join(','));
    };
    TemplateElement.prototype.warn = function (msg, id) {
        this._parent.warn(msg, id ? this.ID + '.' + id : this.ID);
    };
    // Assumes that prepareTemplateInstance was called on the template instance before this call
    TemplateElement.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        var instanceElements = window.gigya.utils.DOM.getElementsByAttribute(parent, '*', exports.TemplateElement_CONSTS.elementId, this.ID);
        if (!instanceElements || !instanceElements.length || !instanceElements[0]) {
            this.warn('Failed to find the instance element to link to');
            return;
        }
        this.instanceElement = instanceElements[0];
        // mark roles
        var currentRoles = TemplateElement.getRoles(this.instanceElement);
        currentRoles.push(ElementRoles.instance);
        TemplateElement.setRoles(this.instanceElement, currentRoles);
        // link JS object to instance element
        var instanceOf = this.instanceElement[exports.TemplateElement_CONSTS.instanceOfArray];
        if (!instanceOf) {
            instanceOf = new Array();
            this.instanceElement[exports.TemplateElement_CONSTS.instanceOfArray] = instanceOf;
        }
        // register event listeners
        utils_1.ForEachProp(this.eventHandlers, function (handlers, eventName) {
            return utils_1.ForEach(handlers, function (handler) { return window.gigya.utils.DOM.addEventListener(_this.instanceElement, eventName, handler); });
        });
        instanceOf.push(this);
        this.initFromInstanceElement();
    };
    TemplateElement.prototype.unlinkInstanceElement = function () {
        var _this = this;
        if (this.instanceElement) {
            // unregister event listeners
            utils_1.ForEachProp(this.eventHandlers, function (handlers, eventName) {
                return utils_1.ForEach(handlers, function (handler) { return window.gigya.utils.DOM.removeEventListener(_this.instanceElement, eventName, handler); });
            });
            // remove role
            var currentRoles = TemplateElement.getRoles(this.instanceElement);
            var lastRole = currentRoles.pop();
            if (lastRole === ElementRoles.instance)
                TemplateElement.setRoles(this.instanceElement, currentRoles);
            else
                this.warn('unlinkInstanceElement without matching role');
            // remove link to JS object from instance element
            var instanceOf = this.instanceElement[exports.TemplateElement_CONSTS.instanceOfArray];
            if (instanceOf)
                instanceOf.splice(window.gigya.utils.array.indexOf(instanceOf, this), 1);
            this.instanceElement = null;
        }
    };
    TemplateElement.isTemplateInstance = function (el) {
        return el.getAttribute(exports.TemplateElement_CONSTS.elementId);
    };
    TemplateElement.prepareTemplateInstanceElement = function (element, removeTemplateRole) {
        var ID = element.getAttribute(exports.TemplateElement_CONSTS.elementId);
        var publishId = element.getAttribute(exports.TemplateElement_CONSTS.publishElementId) === 'true';
        if (!ID) {
            Debug_1.warn('', 'Failed to find elementId'); // TODO perhaps message should include more information
            return;
        }
        if (publishId)
            element.setAttribute('id', ID);
        // remove the template role
        if (removeTemplateRole) {
            var roles = TemplateElement.getRoles(element);
            if (roles.pop() === ElementRoles.template)
                TemplateElement.setRoles(element, roles);
        }
    };
    TemplateElement.prepareTemplateInstances = function (templateRoot) {
        var els = templateRoot.querySelectorAll("*[" + exports.TemplateElement_CONSTS.elementId + "]");
        utils_1.ForEach(els, function (e) { return TemplateElement.prepareTemplateInstanceElement(e, true); });
    };
    //#region events
    TemplateElement.prototype.addEventListener = function (eventName, handler) {
        var handlers = this.eventHandlers[eventName];
        if (!handlers) {
            handlers = new Array();
            this.eventHandlers[eventName] = handlers;
        }
        handlers.push(handler);
        if (this.instanceElement)
            window.gigya.utils.DOM.addEventListener(this.instanceElement, eventName, handler);
    };
    TemplateElement.prototype.removeEventListener = function (eventName, handler) {
        if (this.instanceElement)
            window.gigya.utils.DOM.removeEventListener(this.instanceElement, eventName, handler);
        var handlers = this.eventHandlers[eventName];
        if (handlers) {
            var i = utils_1.LastIndexOf(handlers, handler);
            if (i > -1)
                handlers.splice(i, 1);
        }
    };
    TemplateElement.prototype.getLoggerName = function () {
        return '';
    };
    // Evaluate conditional attribute
    TemplateElement.prototype.evaluateConditionalAttributes = function () {
        var _this = this;
        this.conditionalExpressions = this.getConditionalExpression(this.instanceElement);
        if (!this.hasConditionalAttributes()) {
            return;
        }
        window.gigya.logger.group(("conditional expressions for " + (this.constructor['name'] || this.ID) + " " + this.getLoggerName()).trim()).endWhen(function () {
            window.gigya.logger.info('template element:', _this);
            utils_1.ForEach(_this.conditionalExpressions, function (conditionalAtt) {
                var evaluationResult = _this.evaluateExpression(conditionalAtt);
                _this.executeConditionalResult(evaluationResult, conditionalAtt, _this.instanceElement);
            });
        });
        this.initFromInstanceElement();
    };
    TemplateElement.prototype.initFromInstanceElement = function () {
        /// Virtual method to be overriden by derived class.
    };
    TemplateElement.prototype.hasConditionalAttributes = function () {
        return this.conditionalExpressions && this.conditionalExpressions.length > 0;
    };
    TemplateElement.prototype.evaluateExpression = function (conditionalExpression) {
        var expressionData = this.getExpressionData();
        window.gigya.logger.debug("evaluating:", { conditionalExpression: conditionalExpression, expressionData: expressionData });
        try {
            return conditionalFunction(expressionData.screenset, expressionData.passkeys, expressionData.viewport, expressionData.formData, expressionData.profile, expressionData.data, expressionData.subscriptions, expressionData.communications, expressionData.preferences, expressionData.accountInfo, expressionData.tfaProviders, expressionData.authMethods, expressionData.conflictingAccount, expressionData.consentStatements, expressionData.identifier, expressionData.schema, window.gigya.utils.object.expressionHelper(expressionData), conditionalExpression.condition);
        }
        catch (e) {
            if (!conditionalExpression.ignoreError) {
                window.gigya.logger.warn("Screenset exception in conditional expression!", {
                    condition: conditionalExpression.condition,
                    e: e,
                });
            }
            return conditionalExpression.defaultValue;
        }
    };
    TemplateElement.prototype.getExpressionData = function () {
        var _a, _b, _c, _d;
        var apiData = this._screenSet.getApiData();
        var viewportSize = window.gigya.utils.viewport.getInnerSize();
        var viewportOuterSize = window.gigya.utils.viewport.getOuterSize();
        var expressionData = {
            // Form data contains special field values (like loginID) and local fields.
            formData: {},
            // This reflects the account info response (for logged in user) with the form data merged on top of it.
            // User is not logged in, start with blank account info.
            profile: {},
            data: {},
            preferences: {},
            subscriptions: {},
            communications: {},
            authMethods: apiData.authMethods || [],
            // api data
            schema: apiData.getSchema || {},
            accountInfo: apiData.getAccountInfo || {},
            tfaProviders: this.getProviders(),
            conflictingAccount: apiData.getConflictingAccount || {},
            consentStatements: ((_a = this._screenSet.data) === null || _a === void 0 ? void 0 : _a.consentStatements) || {},
            identifier: ((_c = (_b = this._screenSet.data) === null || _b === void 0 ? void 0 : _b.authMethodData) === null || _c === void 0 ? void 0 : _c.identifiers) || {},
            passkeys: ((_d = this._screenSet.data) === null || _d === void 0 ? void 0 : _d.passkeys) || [],
            // Prepare screenset object.
            // Translations are made available specifically for attributes that need to be localized, such as the placeholder attribute.
            screenset: {
                width: this._screenSet.container.offsetWidth,
                height: this._screenSet.container.offsetHeight,
                translations: this._screenSet.params.customLang || {},
                lang: this._screenSet.lang,
                isModal: this._screenSet.isModal,
                isMobile: this._screenSet.isMobileUI,
            },
            viewport: {
                width: viewportSize.w,
                height: viewportSize.h,
                outerWidth: viewportOuterSize.w,
                outerHeight: viewportOuterSize.h,
                orientation: window.gigya.utils.viewport.getOrientation(),
            },
        };
        // First, attempt to get the account info. The user may not be logged in.
        if (apiData.getAccountInfo) {
            // Set merged data to account info.
            expressionData = window.gigya.utils.object.clone(window.gigya.utils.object.extractProperties(apiData.getAccountInfo, expressionData, 'profile|data|preferences|subscriptions|authMethods'), true);
        }
        // Populate form data if element is within form. Otherwise, profile/data fields are populated by API data.
        // Parent is typically either form or screen element.
        if ( /*this._parent instanceof BaseForm && */this._parent['isPopulated']) {
            // Generate flat form data in the same way it's generated for other events.
            expressionData.formData = this._parent.getFlatFormData(true, false);
            // Deep merge form data on top of account info API data.
            var formData = this._parent.getFormData(false, false);
            expressionData = window.gigya.utils.object.merge([expressionData, formData], true);
        }
        return expressionData;
    };
    TemplateElement.prototype.executeConditionalResult = function (evaluationResult, conditionalAtt, element) {
        evaluationResult = window.gigya.utils.validation.isExplicitFalse(evaluationResult) ? evaluationResult : evaluationResult || conditionalAtt.defaultValue;
        if (evaluationResult === conditionalAtt.lastAttributeValue) {
            window.gigya.logger.info("attribute '" + conditionalAtt.attributeName + "' remained the same: " + evaluationResult);
        }
        else {
            window.gigya.logger.info("attribute '" + conditionalAtt.attributeName + "' changed: " + JSON.stringify(conditionalAtt.lastAttributeValue) + " => " + JSON.stringify(evaluationResult));
            conditionalAtt.lastAttributeValue = evaluationResult;
            if (conditionalAtt.attributeName === 'class' && this.cssClass) {
                evaluationResult = ((evaluationResult || '') + " " + this.cssClass).trim();
            }
            if (!evaluationResult && // value is falsy and
                (!window.gigya.utils.validation.isExplicitFalse(evaluationResult) || // it's not explicit false (i.e null, undefined, '')
                    window.gigya.utils.DOM.isHTMLBooleanAttribute(conditionalAtt.attributeName))) {
                // or it's an html boolean attribute (false value requires to fully remove it)
                window.gigya._.plugins.utils.DOM.setAttribute(element, conditionalAtt.attributeName, null);
            }
            else {
                var attrVal = typeof evaluationResult == 'object' ? JSON.stringify(evaluationResult) : evaluationResult;
                window.gigya._.plugins.utils.DOM.setAttribute(element, conditionalAtt.attributeName, attrVal);
            }
        }
        return evaluationResult;
    };
    TemplateElement.prototype.resetLastConditionalValues = function () {
        utils_1.ForEach(this.conditionalExpressions, function (conditionalAtt) {
            conditionalAtt.lastAttributeValue = '';
        });
    };
    TemplateElement.prototype.getMetadata = function () {
        return Array.from(this.instanceElement.attributes, function (_a) {
            var _b;
            var name = _a.name, value = _a.value;
            return (_b = {}, _b[name] = value, _b);
        })
            .reduce(function (acc, attribute) {
            return __webpack_provided_Object_dot_assign(acc, attribute);
        }, {});
    };
    TemplateElement.prototype.getProviders = function () {
        var _a, _b, _c, _d;
        var apiData = this._screenSet.getApiData();
        if ((_c = (_b = (_a = this._screenSet.data) === null || _a === void 0 ? void 0 : _a.tfaProviders) === null || _b === void 0 ? void 0 : _b.activeProviders) === null || _c === void 0 ? void 0 : _c.length) {
            return (_d = this._screenSet.data) === null || _d === void 0 ? void 0 : _d.tfaProviders;
        }
        return apiData.getProviders || {};
    };
    return TemplateElement;
}());
exports.TemplateElement = TemplateElement;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates.ts":
/*!******************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates.ts ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var ScreenSetResources_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts");
var TemplatesCache = /** @class */ (function () {
    function TemplatesCache() {
        this._map = {};
    }
    TemplatesCache.prototype.get = function (key) {
        return this._map[key];
    };
    TemplatesCache.prototype.set = function (key, value) {
        // TODO: value need to support both string and string array perhaps with templates this is not needed anymore
        this._map[key] = value instanceof Array ? value.join('') : value;
    };
    return TemplatesCache;
}());
exports.TemplatesCache = TemplatesCache;
function createDefaultTemplates() {
    var templates = new TemplatesCache();
    templates.set('passwordStrength', ScreenSetResources_1.passwordStrength);
    templates.set('passwordStrength-strengthMeter', ScreenSetResources_1.passwordStrength_strengthMeter);
    templates.set('passwordStrength-minimumRequirements', ScreenSetResources_1.passwordStrength_minimumRequirements);
    templates.set('screenSet-dialog', ScreenSetResources_1.screenSet_dialog);
    templates.set('screenSet', ScreenSetResources_1.screenSet);
    templates.set('photoUpload_ui', ScreenSetResources_1.photoUpload_ui);
    templates.set('photoUpload_form', ScreenSetResources_1.photoUpload_form);
    templates.set('inlinedPasswordStrength', ScreenSetResources_1.inlinedPasswordStrength);
    templates.set('consent', ScreenSetResources_1.consent);
    templates.set('communicationCheckBox', ScreenSetResources_1.communicationCheckbox);
    return templates;
}
exports.createDefaultTemplates = createDefaultTemplates;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseScreenWidget_1 = __webpack_require__(/*! ../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var Handlers_1 = __webpack_require__(/*! ../Handlers */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/index.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ./TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.ApiLink_CONSTS = {
    selector: '[data-gigya-api-link]',
    attributeName: 'data-gigya-api-link',
    disableTimeoutInSeconds: 'data-disable-timeout',
    disableOnRender: 'data-disable-on-render',
    disabledClass: 'gigya-disabled',
    deps: [TranslatedWidget_1.TranslatedWidget] //deps doesn't do anything, only make sure TranslatedWidget is registered before this one (by importing it)
};
var ApiLinkWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ApiLinkWidget, _super);
    function ApiLinkWidget(_screen, el, _apiList, _domUtils, _config) {
        if (_apiList === void 0) { _apiList = window.gigya._.arApiList; }
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        if (_config === void 0) { _config = { defaultDisableTimeout: 10 }; }
        var _this = _super.call(this, _screen, el, false) || this;
        _this._apiList = _apiList;
        _this._domUtils = _domUtils;
        _this._config = _config;
        _this._clickHandler = function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {
            var res, hostForm;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this._disable();
                        return [4 /*yield*/, this._apiHandler.send()];
                    case 1:
                        res = _a.sent();
                        hostForm = this._screen.getFormByElement(this.instanceElement);
                        if (!hostForm)
                            return [2 /*return*/];
                        if ((res === null || res === void 0 ? void 0 : res.errorCode) === GSErrors_1.GSErrors.OK) {
                            this._screenSet.hideError();
                        }
                        else {
                            this._screenSet.displayServerErrors(res, hostForm);
                            // enabled the link for errors other then frequency and forbidden
                            if ((res === null || res === void 0 ? void 0 : res.errorCode) !== GSErrors_1.GSErrors.FREQUENCY_LIMIT_REACHED && (res === null || res === void 0 ? void 0 : res.errorCode) !== GSErrors_1.GSErrors.FORBIDDEN) {
                                clearTimeout(this._disableTimeout);
                                this._enable();
                            }
                        }
                        return [2 /*return*/];
                }
            });
        }); };
        return _this;
    }
    ApiLinkWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this._apiHandler = this._getApiHandler();
        if (!this._apiHandler)
            return;
        this._setDisableTimeout();
        this._addClickHandler();
        this._disabledOnRender();
    };
    ApiLinkWidget.prototype.unlinkInstanceElement = function () {
        this._removeClickHandler();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    ApiLinkWidget.prototype._getApiHandler = function () {
        var methodName = this.instanceElement.getAttribute(exports.ApiLink_CONSTS.attributeName);
        if (!methodName) {
            window.gigya.logger.warn("[" + exports.ApiLink_CONSTS.attributeName + "]: missing api method name");
            return null;
        }
        var serverApis = this._apiList.filter(function (api) { return api instanceof window.gigya._.ServerApi; });
        return Handlers_1.BaseApiHandler.getHandler(methodName, this._screen, serverApis);
    };
    ApiLinkWidget.prototype._addClickHandler = function () {
        this._domUtils.addEventListener(this.instanceElement, 'click', this._clickHandler);
    };
    ApiLinkWidget.prototype._removeClickHandler = function () {
        this._domUtils.removeEventListener(this.instanceElement, 'click', this._clickHandler);
    };
    ApiLinkWidget.prototype._setDisableTimeout = function () {
        var disableTimeout = this.instanceElement.getAttribute(exports.ApiLink_CONSTS.disableTimeoutInSeconds);
        if (!disableTimeout || isNaN(Number(disableTimeout))) {
            disableTimeout = String(this._config.defaultDisableTimeout);
        }
        this._disableTime = Number(disableTimeout) * 1000;
    };
    ApiLinkWidget.prototype._disable = function () {
        var _this = this;
        var _a;
        this._removeClickHandler();
        this._domUtils.addClassToElement(this.instanceElement, exports.ApiLink_CONSTS.disabledClass);
        (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.setAttribute('disabled', 'true');
        this._disableTimeout = setTimeout(function () {
            _this._enable();
        }, this._disableTime);
    };
    ApiLinkWidget.prototype._enable = function () {
        var _a;
        this._addClickHandler();
        this._domUtils.removeClassFromElement(this.instanceElement, exports.ApiLink_CONSTS.disabledClass);
        (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.removeAttribute('disabled');
    };
    ApiLinkWidget.prototype._disabledOnRender = function () {
        var shouldDisable = this.instanceElement.getAttribute(exports.ApiLink_CONSTS.disableOnRender);
        if (shouldDisable && shouldDisable !== 'false') {
            this._disable();
        }
    };
    ApiLinkWidget.CONSTS = exports.ApiLink_CONSTS;
    return ApiLinkWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.ApiLinkWidget = ApiLinkWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(ApiLinkWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var errorBindingHelper_1 = __webpack_require__(/*! ../errorBindingHelper */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/errorBindingHelper.ts");
exports.ArrayManager_CONST = {
    selector: '.gigya-composite-control-array-widget',
    containerSelector: '.gigya-array-manager',
    formElSelector: 'input,select, fieldset, .gigya-array-manager',
    addButtonSelector: 'button.gigya-array-add-btn',
    removeButtonSelector: 'button.gigya-array-remove-btn',
    itemWrapperClass: 'gigya-array-template',
    inputsWrapperClass: 'inputs-wrapper',
    buttonsWrapperClass: 'buttons-wrapper',
    templateItemAttr: 'data-array-template-id',
    arrayManagerRootAttr: 'data-array-manager-root',
    deleteDisabledClass: 'disable-delete',
    indexMatcher: /\[([0-9]+)]/g,
};
utils_1.DeepFreeze(exports.ArrayManager_CONST);
var _idGenerator = 0;
var ArrayManagerItem = /** @class */ (function () {
    function ArrayManagerItem(arrayManager, _index) {
        this.arrayManager = arrayManager;
        this._index = _index;
        this._container = document.createElement('div');
        this._inputsWrapper = document.createElement('div');
        this._buttonsWrapper = document.createElement('div');
        this.onDispose = [];
        this.screenWidgets = [];
        this.formInputs = [];
        this.formWidgets = [];
        this.boundedErrors = [];
        this._form = arrayManager._form;
        this._screen = arrayManager._screen;
        this._uniqueItemID = "array-template-" + Date.now() + "-" + _index;
        this._buttonsWrapper.id = this._uniqueItemID + "_" + exports.ArrayManager_CONST.buttonsWrapperClass;
        window.gigya.utils.DOM.addClassToElement(this._buttonsWrapper, exports.ArrayManager_CONST.buttonsWrapperClass);
        window.gigya.utils.DOM.addClassToElement(this._inputsWrapper, exports.ArrayManager_CONST.inputsWrapperClass);
        this._inputsWrapper.appendChild(arrayManager.createInputsWrapper());
        var removeButton = arrayManager.attachRemoveButton(this);
        this._buttonsWrapper.appendChild(removeButton);
        this._container.appendChild(this._inputsWrapper);
        this._container.appendChild(this._buttonsWrapper);
        window.gigya.utils.DOM.addClassToElement(this._container, exports.ArrayManager_CONST.itemWrapperClass);
        this._container.setAttribute(exports.ArrayManager_CONST.templateItemAttr, this._uniqueItemID);
        // map old ids to the new ids, we have to do this since each id must always map to the same new id
        var idsMap = this._getAllElements()
            .filter(function (el) { return Boolean(el.id); })
            .reduce(function (obj, el) {
            obj[el.id] = el.id + "_" + ++_idGenerator;
            return obj;
        }, {});
        // replace any occurrence of the id with the newly generated id
        window.gigya.utils.DOM.manipulateAttributes(this._getAllElements(), new RegExp(Object.keys(idsMap).join('|'), 'g'), function (id) { return idsMap[id]; });
        this._indexNameBindings();
    }
    ArrayManagerItem.prototype.getID = function () {
        return this._uniqueItemID;
    };
    ArrayManagerItem.prototype.getIndex = function () {
        return this._index;
    };
    ArrayManagerItem.prototype.setIndex = function (index) {
        this._index = index;
        this.update();
    };
    ArrayManagerItem.prototype.attachAddButton = function (addButton) {
        this._buttonsWrapper.insertBefore(addButton, this._buttonsWrapper.firstChild);
    };
    ArrayManagerItem.prototype.linkInstance = function () {
        this._linkToScreen();
        this._linkToForm();
    };
    ArrayManagerItem.prototype.getContainer = function () {
        return this._container;
    };
    ArrayManagerItem.prototype.dispose = function () {
        this.onDispose.forEach(function (cb) { return cb(); });
        this._unlinkScreen();
        this._unlinkForm();
        if (this._container.parentNode) {
            this._container.parentNode.removeChild(this._container);
        }
    };
    ArrayManagerItem.prototype.update = function () {
        this._indexNameBindings();
        this._screen.removeSpecificErrorBinds(this.boundedErrors);
        this.boundedErrors = this._screen.addSpecificErrorBinds(errorBindingHelper_1.getErrorBindings(this._inputsWrapper));
        this._form.registerBoundedErrorElements();
        this.formInputs.forEach(function (i) { return i.update(); });
        this.formWidgets.forEach(function (w) { return w.update(); });
    };
    ArrayManagerItem.prototype._getAllElements = function () {
        return Array.prototype.slice.call(this._inputsWrapper.querySelectorAll('*'));
    };
    ArrayManagerItem.prototype._indexNameBindings = function () {
        var _this = this;
        var namesToMap = this.arrayManager.getFieldsNames().concat(this.arrayManager.getStoreAsArrayRoots());
        var rootName = this.arrayManager.getRootName();
        var baseRootName = rootName.replace(exports.ArrayManager_CONST.indexMatcher, '');
        // match any occurrence of any binding, with or without index clause.
        // an example of the output: "ancestorRoot(index)?.root(index)?.fieldName1|ancestorRoot(index)?.root(index)?.fieldName2"
        var bindingMatcher = namesToMap
            .filter(function (name) { return Boolean(name); })
            .map(function (name) {
            return rootName.replace(exports.ArrayManager_CONST.indexMatcher, '(?:\\[[0-9]+])?') + // convert any existing index in "rootName" to be optional match
                '(?:\\[[0-9]+])?' + // optional current index
                name.substr(baseRootName.length);
        }) // actual field name
            .join('|');
        // add current index to each field name
        window.gigya.utils.DOM.manipulateAttributes(this._getAllElements(), new RegExp(bindingMatcher, 'g'), function (match) { return addIndex(match, rootName, _this._index); }, function (attr) { return /^name|^data-|^gigya/i.test(attr.name); });
    };
    ArrayManagerItem.prototype._linkToScreen = function () {
        this.screenWidgets = this._screen.addDynamicWidgets(this._container);
        this.boundedErrors = this._screen.addSpecificErrorBinds(errorBindingHelper_1.getErrorBindings(this._inputsWrapper));
    };
    ArrayManagerItem.prototype._unlinkScreen = function () {
        this._screen.removeDynamicWidgets(this.screenWidgets);
    };
    ArrayManagerItem.prototype._linkToForm = function () {
        this.formInputs = this._form.addDynamicInputs(this._inputsWrapper);
        this._form.registerBoundedErrorElements();
        this.formWidgets = this._form.addDynamicWidgets(this._inputsWrapper);
    };
    ArrayManagerItem.prototype._unlinkForm = function () {
        this._form.removeDynamicWidgets(this.formWidgets);
        this._form.registerBoundedErrorElements();
        this._form.removeDynamicInputs(this.formInputs);
    };
    return ArrayManagerItem;
}());
exports.ArrayManagerItem = ArrayManagerItem;
var ArrayManagerWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ArrayManagerWidget, _super);
    function ArrayManagerWidget(_form, el) {
        var _this = _super.call(this, _form, el, false) || this;
        _this.onDispose = new Array();
        _this._items = [];
        var templates = _this.templateElement.querySelectorAll('template');
        _this._inputsTemplate = templates[0];
        _this._buttonsTemplate = templates[1];
        if (!_this._inputsTemplate && console && console.warn)
            console.warn('gigya: Array Manager is provided with invalid template');
        _this._minimumItems = Number(_this.params['minimum']) || 1;
        _this._fieldsNames = _this.getFieldsNamesNormalized();
        _this._storeAsArrayRoots = Array.prototype.slice
            .call(_this._inputsTemplate.content.querySelectorAll("[" + FormInput_1.FormInput_CONSTS.arrayRootAttribute + "]"))
            .map(function (i) { return i.getAttribute(FormInput_1.FormInput_CONSTS.arrayRootAttribute); });
        return _this;
    }
    ArrayManagerWidget.prototype.getFieldsNamesNormalized = function () {
        var _this = this;
        return Array.prototype.slice
            .call(this._inputsTemplate.content.querySelectorAll(exports.ArrayManager_CONST.formElSelector))
            .filter(function (el) { return !_this.filterElements(el); })
            .map(function (i) { return _this._form.getNormalizedFieldName(i.getAttribute('name')); });
    };
    ArrayManagerWidget.prototype.filterElements = function (element) {
        var ignorePhoneInputSelectors = [
            'select.gigya-country-code-select',
            'input.gigya-input-text.gigya-subscriber-phone-number-input',
            'fieldset.gigya-fieldset.gigya-phone-number-verification',
            'input.gigya-input-text.gigya-phone-number-verification-code',
            'fieldset.gigya-fieldset.gigya-phone-number-verified',
            'gigya-input-text.gigya-subscriber-phone-number-input'
        ];
        return !!ignorePhoneInputSelectors.find(function (selector) { return element.matches(selector); });
    };
    ArrayManagerWidget.prototype.createInputsWrapper = function () {
        return document.importNode(this._inputsTemplate.content, true);
    };
    ArrayManagerWidget.prototype.attachRemoveButton = function (item) {
        var _this = this;
        var listener = function () { return _this.removeItem(item.getID()); }, button = this._getButton('remove', listener);
        item.onDispose.push(function () { return button.removeEventListener('click', listener); });
        return button;
    };
    ArrayManagerWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        this._arrayContainer = this.instanceElement.querySelector(exports.ArrayManager_CONST.containerSelector);
        var addListener = function () { return _this.addItem(); };
        this._addButton = this._getButton('add', addListener);
        this.onDispose.push(function () { return _this._addButton.removeEventListener('click', addListener); });
        this._arrayRootName = this._arrayContainer.getAttribute('name');
        //Arrange pre-populate data fields
        var populateData = this._form.prePopulateData(), arrayRoot = window.gigya.utils.object.getPropertyBySerializedName(populateData, this._arrayRootName, false);
        var len = this._minimumItems;
        if (arrayRoot && arrayRoot instanceof Array) {
            len = Math.max(this._minimumItems, arrayRoot.length);
        }
        for (var i = 0; i < len; i++) {
            this.addItem();
        }
    };
    ArrayManagerWidget.prototype.unlinkInstanceElement = function () {
        var _this = this;
        this._items.forEach(function (item) {
            _this._screen.removeSpecificErrorBinds(item.boundedErrors);
            _this._form.registerBoundedErrorElements();
            item.dispose();
        });
        this._items = [];
        this.onDispose.forEach(function (cb) { return cb(); });
        _super.prototype.unlinkInstanceElement.call(this);
    };
    ArrayManagerWidget.prototype.addItem = function () {
        var item = new ArrayManagerItem(this, this._items.length);
        this._arrayContainer.appendChild(item.getContainer());
        item.attachAddButton(this._addButton);
        item.linkInstance();
        this._items.push(item);
        this._applyCurrentState();
    };
    ArrayManagerWidget.prototype.removeItem = function (itemID) {
        var removeIndex = -1, itemToRemove = null;
        utils_1.Some(this._items, function (item, i) {
            if (item.getID() === itemID) {
                removeIndex = i;
                itemToRemove = item;
                return true;
            }
            return false;
        });
        if (!itemToRemove)
            return;
        this._screen.removeSpecificErrorBinds(itemToRemove.boundedErrors);
        this._form.registerBoundedErrorElements();
        this._items.splice(removeIndex, 1);
        this._reindexItems(removeIndex);
        itemToRemove.dispose();
        if (this._items.length > 0) {
            this._items[this._items.length - 1].attachAddButton(this._addButton);
        }
        this._applyCurrentState();
    };
    ArrayManagerWidget.prototype.getFieldsNames = function () {
        return this._fieldsNames;
    };
    ArrayManagerWidget.prototype.getStoreAsArrayRoots = function () {
        return this._storeAsArrayRoots;
    };
    ArrayManagerWidget.prototype._reindexItems = function (startIndex) {
        for (var i = startIndex; i < this._items.length; ++i) {
            this._items[i].setIndex(i);
        }
    };
    ArrayManagerWidget.prototype._applyCurrentState = function () {
        if (this._items.length <= this._minimumItems) {
            window.gigya.utils.DOM.addClassToElement(this._arrayContainer, exports.ArrayManager_CONST.deleteDisabledClass);
        }
        else {
            window.gigya.utils.DOM.removeClassFromElement(this._arrayContainer, exports.ArrayManager_CONST.deleteDisabledClass);
        }
        this._screenSet.centerModal();
    };
    ArrayManagerWidget.prototype.getRootName = function () {
        return this._arrayRootName;
    };
    ArrayManagerWidget.prototype.update = function () {
        this._arrayRootName = this._arrayContainer.getAttribute('name');
        this._items.forEach(function (item) { return item.update(); });
    };
    ArrayManagerWidget.prototype._getButton = function (type, listener) {
        var btn = document.importNode(this._buttonsTemplate.content.querySelectorAll(exports.ArrayManager_CONST[type + "ButtonSelector"])[0], true);
        if (listener) {
            btn.addEventListener('click', listener);
        }
        return btn;
    };
    ArrayManagerWidget.CONSTS = exports.ArrayManager_CONST;
    return ArrayManagerWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.ArrayManagerWidget = ArrayManagerWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(ArrayManagerWidget);
function addIndex(original, arrayRoot, index) {
    if (!original || !arrayRoot)
        return '';
    original = original.replace(exports.ArrayManager_CONST.indexMatcher, '');
    var baseArrayRoot = arrayRoot.replace(exports.ArrayManager_CONST.indexMatcher, '');
    return arrayRoot + "[" + index + "]." + original.substr(baseArrayRoot.length + 1);
}
exports.addIndex = addIndex;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ./TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
exports.Binding_CONSTS = {
    selector: '*[data-binding]',
    dataBindingAttribute: 'data-binding',
};
utils_1.DeepFreeze(exports.Binding_CONSTS);
var BindingWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BindingWidget, _super);
    function BindingWidget(_screen, el) {
        var _this = 
        // Turn resetCSS off.
        _super.call(this, _screen, el, false) || this;
        _this.deps = [TranslatedWidget_1.TranslatedWidget];
        return _this;
    }
    BindingWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.supportInterpolation = this.templateElement.getAttribute(BindingWidget.CONSTS.dataBindingAttribute) == 'true';
        this.originalString = this.instanceElement.innerHTML;
        this.lastValue = null;
        this.updateValue();
    };
    BindingWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.updateValue();
    };
    BindingWidget.prototype.getBindingKey = function () {
        return this.originalString;
    };
    /**
     * Get Value from apiData
     */
    BindingWidget.prototype.getValue = function () {
        var text = this.getBindingKey();
        return this.supportInterpolation ? this.evaluate(text) : text;
    };
    /**
     * Set bounded text.
     */
    BindingWidget.prototype.updateValue = function () {
        var value = this.getValue();
        if ((value !== undefined && value !== null) && this.lastValue !== value) {
            this.unlinkWidgets();
            this.lastValue = value;
            this.instanceElement.innerHTML = this.lastValue;
            this.linkWidgets();
        }
    };
    BindingWidget.CONSTS = exports.Binding_CONSTS;
    return BindingWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.BindingWidget = BindingWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(BindingWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseCaptchaHandler_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts");
var RegisterForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
exports.CaptchaWidget_CONSTS = {
    selector: 'div.gigya-captcha'
};
var CaptchaWidget = /** @class */ (function (_super) {
    tslib_1.__extends(CaptchaWidget, _super);
    function CaptchaWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        _this._index = form._screen._captchas.length;
        form._screen._captchas.push(_this);
        var handlerConfig = window.gigya.utils.object.merge([
            _this.params,
            {
                lang: _this._screenSet.params['lang'],
                mode: _this.captchaMode(form),
            },
        ]);
        var activeHandler = BaseCaptchaHandler_1.CaptchaHandlers[window.gigya.partnerSettings.captchaProvider];
        if (activeHandler && typeof activeHandler === 'function') {
            _this._captchaHandler = new activeHandler(handlerConfig);
        }
        else {
            throw new Error("[Gigya]: unsupported captcha provider");
        }
        return _this;
    }
    CaptchaWidget.prototype.captchaMode = function (form) {
        var _a;
        if ((_a = this.params) === null || _a === void 0 ? void 0 : _a.mode) {
            return BaseCaptchaHandler_1.CaptchaMode[this.params.mode];
        }
        return form instanceof RegisterForm_1.RegisterForm ? BaseCaptchaHandler_1.CaptchaMode.invisible : BaseCaptchaHandler_1.CaptchaMode.visible;
    };
    CaptchaWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var initResponse;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        return [4 /*yield*/, this._captchaHandler.init(this.instanceElement)];
                    case 1:
                        initResponse = _a.sent();
                        if (!initResponse) {
                            this.unlinkInstanceElement();
                            this._form._screen._captchas.splice(this._index, 1);
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    CaptchaWidget.prototype.isHidden = function () {
        return utils_1.isHidden(this.instanceElement);
    };
    CaptchaWidget.prototype.reload = function () {
        this._captchaHandler.reset();
    };
    CaptchaWidget.prototype.getToken = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, this._captchaHandler.getToken()];
            });
        });
    };
    CaptchaWidget.prototype.getType = function () {
        return this._captchaHandler.getType();
    };
    CaptchaWidget.CONSTS = exports.CaptchaWidget_CONSTS;
    return CaptchaWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.CaptchaWidget = CaptchaWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(CaptchaWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListItemWidget.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListItemWidget.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var CardListWidget_1 = __webpack_require__(/*! ./CardListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListWidget.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BindingWidget_1 = __webpack_require__(/*! ./BindingWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts");
var errorBindingHelper_1 = __webpack_require__(/*! ../errorBindingHelper */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/errorBindingHelper.ts");
exports.CardListItem_CONSTS = {
    dataPathAttribute: 'data-screen-set-data-path',
    bindingPrefixAttribute: 'data-binding-prefix',
};
var CardListItemWidget = /** @class */ (function (_super) {
    tslib_1.__extends(CardListItemWidget, _super);
    function CardListItemWidget(_form, el, resetCSS) {
        var _this = _super.call(this, _form, el, resetCSS) || this;
        _this._form = _form;
        _this.screenDynamicWidgets = [];
        _this.formWidgets = [];
        _this.formInputs = [];
        return _this;
    }
    Object.defineProperty(CardListItemWidget.prototype, "bindingPrefix", {
        get: function () {
            var _a;
            return ((_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(exports.CardListItem_CONSTS.bindingPrefixAttribute)) || this.dataPath;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListItemWidget.prototype, "dataPath", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(exports.CardListItem_CONSTS.dataPathAttribute);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListItemWidget.prototype, "indexStr", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(CardListWidget_1.CardList_CONSTS.indexAttribute);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListItemWidget.prototype, "indexInt", {
        get: function () {
            return parseInt(this.indexStr, 10);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListItemWidget.prototype, "elementId", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(CardListWidget_1.CardList_CONSTS.idAttribute);
        },
        enumerable: true,
        configurable: true
    });
    CardListItemWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.registerScreenElements();
        this.registerFormElements();
        this.linkOtherElements();
    };
    CardListItemWidget.prototype.registerFormElements = function () {
        this.updateFormElementsWithCardIndex();
        this.formWidgets = this._form.addDynamicWidgets(this.instanceElement);
        this.formInputs = this._form.addDynamicInputs(this.instanceElement);
        this.addDynamicErrorBindings();
    };
    CardListItemWidget.prototype.registerScreenElements = function () {
        // We want to add card index to some of the interpolations, for example tfa.phoneNumber -> tfa[i].phoneNumber
        // For that we need to perform following steps:
        // Add widgets, including Translation widget, but not perform interpolation (binding) yet
        this.screenDynamicWidgets = this._screen.addDynamicWidgets(this.instanceElement, { exclude: [BindingWidget_1.BindingWidget] });
        // Update bindings: add index and whatever else we need
        this.updateCardBindings(this.instanceElement);
        // Add only binding widget, to perform interpolation
        var screenWidgets = this._screen.addDynamicWidgetsByType(this.instanceElement, [BindingWidget_1.BindingWidget]);
        this.screenDynamicWidgets = tslib_1.__spreadArrays(this.screenDynamicWidgets, screenWidgets);
    };
    CardListItemWidget.prototype.updateCardBindings = function (el) {
        if (!this.bindingPrefix || !this.dataPath) {
            return;
        }
        var prefix = this.bindingPrefix;
        var dataPath = this.dataPath;
        var cardIndex = this.indexStr;
        el.innerHTML = el.innerHTML.replace(new RegExp("{{" + prefix + ".(.+?)}}", 'g'), "{{" + dataPath + "[" + cardIndex + "].$1}}");
    };
    CardListItemWidget.prototype.addDynamicErrorBindings = function () {
        var errorBindings = errorBindingHelper_1.getErrorBindings(this.instanceElement);
        if (errorBindings) {
            this._screen.addSpecificErrorBinds(errorBindings);
            this._form.registerBoundedErrorElements();
        }
    };
    CardListItemWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.unlinkDynamicWidgets();
    };
    CardListItemWidget.prototype.unlinkDynamicWidgets = function () {
        this._screen.removeDynamicWidgets(this.screenDynamicWidgets);
        this._form.removeDynamicWidgets(this.formWidgets);
        this._form.registerBoundedErrorElements();
        this._form.removeDynamicInputs(this.formInputs);
    };
    CardListItemWidget.prototype.updateFormElementsWithCardIndex = function () { };
    return CardListItemWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.CardListItemWidget = CardListItemWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListWidget.ts":
/*!*******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListWidget.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseScreenWidget_1 = __webpack_require__(/*! ../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
exports.CardList_CONSTS = {
    listSelector: 'ul.gigya-card-list',
    cardSelector: 'li.gigya-card',
    emptyListItemSelector: '.gigya-empty-list',
    emptyListItemActiveClass: 'gigya-empty-list-active',
    indexAttribute: 'data-card-element-index',
    idAttribute: 'data-card-element-id'
};
var CardListWidget = /** @class */ (function (_super) {
    tslib_1.__extends(CardListWidget, _super);
    function CardListWidget(_screen, el, _domUtils) {
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        var _this = _super.call(this, _screen, el, false) || this;
        _this._domUtils = _domUtils;
        _this.createItemTemplate(el);
        return _this;
    }
    Object.defineProperty(CardListWidget.prototype, "emptyItemElem", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.CardList_CONSTS.emptyListItemSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListWidget.prototype, "itemTemplate", {
        get: function () {
            var _a, _b;
            return (_b = (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector('template')) === null || _b === void 0 ? void 0 : _b.innerHTML;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListWidget.prototype, "cardListElem", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.CardList_CONSTS.listSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CardListWidget.prototype, "items", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelectorAll(exports.CardList_CONSTS.cardSelector);
        },
        enumerable: true,
        configurable: true
    });
    CardListWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        return [4 /*yield*/, this.reloadList()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    CardListWidget.prototype.createItemTemplate = function (el) {
        if (!el.querySelector('template')) {
            var item = el.querySelector(exports.CardList_CONSTS.cardSelector);
            var templateElem = document.createElement('template');
            templateElem.content.append(item === null || item === void 0 ? void 0 : item.cloneNode(true));
            el.append(templateElem);
            item.remove();
        }
    };
    CardListWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.unlinkWidgets();
    };
    CardListWidget.prototype.reloadList = function () {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var items, i, card;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this._screen.dimScreen();
                        return [4 /*yield*/, this.reloadData()];
                    case 1:
                        items = _b.sent();
                        this.clearList();
                        if (items === null || items === void 0 ? void 0 : items.length) {
                            (_a = this.emptyItemElem) === null || _a === void 0 ? void 0 : _a.classList.remove(exports.CardList_CONSTS.emptyListItemActiveClass);
                            for (i = 0; i < items.length; i++) {
                                card = this._domUtils.createElementFromTemplate(this.itemTemplate);
                                card.setAttribute(exports.CardList_CONSTS.indexAttribute, i.toString());
                                card.setAttribute(exports.CardList_CONSTS.idAttribute, items[i][this.itemId]);
                                this.cardListElem.append(card);
                            }
                            this.linkWidgets();
                            this.linkOtherElements();
                        }
                        this._screen.undimScreen();
                        return [2 /*return*/];
                }
            });
        });
    };
    CardListWidget.prototype.clearList = function () {
        var _a;
        this.cardListElem
            .querySelectorAll(exports.CardList_CONSTS.cardSelector)
            .forEach(function (elem) { return elem.remove(); });
        (_a = this.emptyItemElem) === null || _a === void 0 ? void 0 : _a.classList.add(exports.CardList_CONSTS.emptyListItemActiveClass);
    };
    CardListWidget.prototype.showList = function () {
        if (this.instanceElement) {
            this.instanceElement.style.display = 'block';
        }
    };
    return CardListWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.CardListWidget = CardListWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CommunicationWidget.ts":
/*!************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CommunicationWidget.ts ***!
  \************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var Channel_Status;
(function (Channel_Status) {
    Channel_Status["noticed"] = "noticed";
    Channel_Status["OptIn"] = "OptIn";
    Channel_Status["optIn"] = "optIn";
    Channel_Status["OptOut"] = "OptOut";
    Channel_Status["optOut"] = "optOut";
})(Channel_Status = exports.Channel_Status || (exports.Channel_Status = {}));
exports.CommunicationWidget_CONSTS = {
    selector: 'div.gigya-communication',
    channel: 'data-communication-channel',
    topic: 'data-communication-topic',
    status: 'data-communication-status',
    subscriptionName: 'name',
    communicationsPrefix: 'communications.',
    subscriptionType: 'data-subscription-type',
    subscriptionTopic: 'data-subscription-topic',
    communicationChannel: 'data-subscription-channel'
};
utils_1.DeepFreeze(exports.CommunicationWidget_CONSTS);
var CommunicationWidget = /** @class */ (function (_super) {
    tslib_1.__extends(CommunicationWidget, _super);
    function CommunicationWidget() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CommunicationWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            this.createElement();
            this.renderWidget();
        }
    };
    CommunicationWidget.prototype.createElement = function () {
        var text = this.instanceElement.getAttribute('data-label');
        this.communicationData = this.getCommunicationData();
        var checkedByDefault = this.templateElement.hasAttribute(BaseForm_1.Form_CONSTS.defaultCheckedAttribute);
        this.instanceElement.innerHTML = window.gigya.utils.templates.fill(this._screenSet.getTemplates().communicationCheckbox, {
            topic: this.communicationData.topic,
            channel: this.communicationData.channel,
            status: this.communicationData.status,
            gigyaName: "" + CommunicationWidget.CONSTS.communicationsPrefix + this.communicationData.communicationKey,
            label: this.evaluate(text),
            checked: checkedByDefault ? BaseForm_1.Form_CONSTS.defaultCheckedAttribute : '',
        });
    };
    CommunicationWidget.prototype.getCommunicationData = function () {
        var _a, _b;
        var accountInfo = (_b = (_a = this._screenSet) === null || _a === void 0 ? void 0 : _a.getApiData()) === null || _b === void 0 ? void 0 : _b.getAccountInfo;
        var channel = this.getCommunicationChannel();
        var topic = this.instanceElement.getAttribute(CommunicationWidget.CONSTS.subscriptionTopic);
        var communicationKey = topic + "_" + channel;
        var status = this.getCommunicationStatus(accountInfo, communicationKey);
        return { channel: channel, topic: topic, status: status, communicationKey: communicationKey };
    };
    CommunicationWidget.prototype.getCommunicationStatus = function (accountInfo, communicationKey) {
        var _a, _b, _c, _d;
        return ((_b = (_a = accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.communications) === null || _a === void 0 ? void 0 : _a[communicationKey]) === null || _b === void 0 ? void 0 : _b.status) || ((_d = (_c = accountInfo === null || accountInfo === void 0 ? void 0 : accountInfo.communications) === null || _c === void 0 ? void 0 : _c[communicationKey]) === null || _d === void 0 ? void 0 : _d.Status);
    };
    CommunicationWidget.prototype.getCommunicationChannel = function () {
        var _a;
        // Support fallback for subscription type
        return (_a = this.instanceElement.getAttribute(CommunicationWidget.CONSTS.communicationChannel)) !== null && _a !== void 0 ? _a : this.instanceElement.getAttribute(CommunicationWidget.CONSTS.subscriptionType);
    };
    CommunicationWidget.prototype.renderWidget = function () {
        _super.prototype.renderWidget.call(this);
        if (this.instanceElement) {
            var text = this.instanceElement.getAttribute('data-label');
            var label = this.instanceElement.querySelector('label');
            if (label)
                label.innerHTML = this.evaluate(text);
        }
    };
    CommunicationWidget.CONSTS = exports.CommunicationWidget_CONSTS;
    return CommunicationWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.CommunicationWidget = CommunicationWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(CommunicationWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.Consent_CONSTS = {
    selector: 'div.gigya-consent',
    titleAttr: 'data-label',
    approvedOnLabelAttr: 'data-approved-on-label',
    versionAttr: 'data-version',
    versionLabelAttr: 'data-version-title-label',
    localeLabelAttr: 'data-locale-label',
};
var TEMPLATE_ID_OLD_VERSION = 'v1';
utils_1.DeepFreeze(exports.Consent_CONSTS);
var ConsentWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ConsentWidget, _super);
    function ConsentWidget(_form, el) {
        // Turn resetCSS off.
        return _super.call(this, _form, el, false) || this;
    }
    ConsentWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.loadWidget();
    };
    ConsentWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.loadWidget();
    };
    ConsentWidget.prototype.loadWidget = function () {
        var _a;
        var accountInfo = this._screenSet.getApiData().getAccountInfo;
        var termName = this.instanceElement.getAttribute('name');
        var consent = window.gigya.utils.object.expressionHelper(accountInfo).getField(termName);
        if (consent && consent.isConsentGranted === true) {
            var docId = consent.docDate ? this.formatTime(consent.docDate) : consent.docVersion;
            var lastConsentModified = this.formatTime(consent.lastConsentModified);
            var labelText = this.instanceElement.getAttribute(exports.Consent_CONSTS.titleAttr);
            var approvedOnLabel = this.instanceElement.getAttribute(exports.Consent_CONSTS.approvedOnLabelAttr) || 'Approved on';
            var widgetVersion = this.instanceElement.getAttribute(exports.Consent_CONSTS.versionAttr);
            var locale = (_a = window.gigya.utils.object.expressionHelper(consent)) === null || _a === void 0 ? void 0 : _a.getField('lang');
            var localeLabel = this.instanceElement.getAttribute(exports.Consent_CONSTS.localeLabelAttr) || 'Locale:';
            var versionLabel = this.instanceElement.getAttribute(exports.Consent_CONSTS.versionLabelAttr) || 'Version:';
            var template = this.getTemplate(widgetVersion);
            this.instanceElement.innerHTML = window.gigya.utils.templates.fill(template, {
                label: this.evaluate(labelText),
                docId: docId,
                approvedOnLabel: this.evaluate(approvedOnLabel),
                approved: lastConsentModified,
                locale: locale,
                localeLabel: this.evaluate(localeLabel),
                versionLabel: this.evaluate(versionLabel),
            });
        }
    };
    ConsentWidget.prototype.getTemplate = function (widgetVersion) {
        var _a;
        var parser = new DOMParser();
        var templateId = widgetVersion ? "v" + widgetVersion : TEMPLATE_ID_OLD_VERSION;
        var templates = this._screenSet.getTemplates().consent;
        var document = parser.parseFromString(templates, 'text/html');
        var template = (_a = document.querySelector("[data-id=\"" + templateId + "\"]")) !== null && _a !== void 0 ? _a : document.querySelector("[data-id=\"" + TEMPLATE_ID_OLD_VERSION + "\"]");
        return template.outerHTML;
    };
    ConsentWidget.prototype.formatTime = function (dateString) {
        var date = Date.parse(dateString); // returns NaN if it can't parse
        return isNaN(date) ? '' : new Date(date).toLocaleDateString();
    };
    ConsentWidget.CONSTS = exports.Consent_CONSTS;
    return ConsentWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.ConsentWidget = ConsentWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(ConsentWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget.ts":
/*!********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget.ts ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var visbleWhenHelper_1 = __webpack_require__(/*! ../visbleWhenHelper */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/visbleWhenHelper.ts");
exports.ContainerWidget_CONSTS = {
    selector: 'div.gigya-container',
    activeClass: 'gigya-container-enabled',
    emptyFields: 'data-empty-fields',
    loginIdentities: 'data-login-idenities',
    conditionAttr: 'data-condition',
    onRenderAttr: 'data-on-render',
};
utils_1.DeepFreeze(exports.ContainerWidget_CONSTS);
var ContainerWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ContainerWidget, _super);
    function ContainerWidget(_form, el) {
        var _this = _super.call(this, _form, el, false) || this;
        _this.onElementChange = function () { return _this.refresh(); };
        _this.name = el.getAttribute('name');
        _this.emptyFields = el.getAttribute(exports.ContainerWidget_CONSTS.emptyFields);
        if (_this.emptyFields)
            _form._autoSkipContainers.push(_this);
        _this.update(el);
        return _this;
    }
    ContainerWidget.prototype.update = function (el) {
        if (el === void 0) { el = this.instanceElement; }
        this.renderingConditions = registeredConditions(el, conditionSets.rendering);
        this.validationConditions = registeredConditions(el, conditionSets.validation);
    };
    ContainerWidget.prototype.canAutoSkip = function () {
        return !dataEmptyFields(this.emptyFields, this);
    };
    ContainerWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        var shouldDisplay = this.testRendering();
        this.originalRenderingStatus = this.conditionStatus = shouldDisplay;
        if (this.originalRenderingStatus) {
            this.onElementChange();
        }
    };
    ContainerWidget.prototype.refresh = function () {
        var shouldDisplay = (this.validationPassed = this.testValidations());
        this.conditionStatus = this.originalRenderingStatus && shouldDisplay;
        if (this.conditionStatus) {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, exports.ContainerWidget_CONSTS.activeClass);
        }
        else {
            window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, exports.ContainerWidget_CONSTS.activeClass);
        }
    };
    ContainerWidget.prototype.testRendering = function () {
        return this.testContainer(this.renderingConditions);
    };
    ContainerWidget.prototype.testValidations = function () {
        return this.testContainer(this.validationConditions);
    };
    ContainerWidget.prototype.testContainer = function (conditions) {
        var _this = this;
        // Testing if there's an empty required field in the container (stronger than all tests except those that override it)
        var fields = {
            hasRequiredEmptyFields: this.containsEmptyRequiredFields(),
        };
        var filterResults = utils_1.Every(conditions, function (cond) { return cond(_this, fields); });
        return fields.hasRequiredEmptyFields || filterResults;
    };
    ContainerWidget.prototype.containsEmptyRequiredFields = function () {
        var _this = this;
        if (!this._form.isPopulated)
            return false;
        var fields = utils_1.getElementsByHavingAttribute(this.instanceElement, '*', FormInput_1.FormInput_CONSTS.fieldName);
        var containsRequired = utils_1.Some(fields, function (field) {
            var fieldName = field.getAttribute(FormInput_1.FormInput_CONSTS.fieldName);
            if (fieldName) {
                var isRequired = _this._form.isRequiredField(fieldName);
                if (isRequired && !field.value)
                    return true;
            }
            return false;
        });
        return containsRequired;
    };
    ContainerWidget.prototype.evaluateConditionalAttributes = function () {
        this.update(this.instanceElement);
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.emptyFields = this.instanceElement.getAttribute(exports.ContainerWidget_CONSTS.emptyFields);
        if (this.originalRenderingStatus) {
            this.onElementChange();
        }
    };
    ContainerWidget.prototype.hasConditionalAttributes = function () {
        return true;
    };
    ContainerWidget.CONSTS = exports.ContainerWidget_CONSTS;
    return ContainerWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.ContainerWidget = ContainerWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(ContainerWidget);
function registeredConditions(el, conditionSet) {
    function bindCondition(value, condition, oneTime) {
        if (oneTime === void 0) { oneTime = false; }
        return function (container, fields) { return condition(value, container, oneTime); };
    }
    function bindOverriteFieldsCondition(value, condition) {
        return function (container, fields) {
            var result = condition(value, container);
            if (!result)
                fields.hasRequiredEmptyFields = false;
            return result;
        };
    }
    var selectedConditions = new Array();
    utils_1.ForEachProp(conditionSet, function (condition, attr) {
        if (el.getAttribute(attr)) {
            var value = el.getAttribute(attr);
            var oneTimeCondition = false;
            if (value && el.getAttribute(ContainerWidget.CONSTS.onRenderAttr) == 'true') {
                oneTimeCondition = true;
            }
            if (condition['overwriteFields'])
                selectedConditions.push(bindOverriteFieldsCondition(value, condition));
            else
                selectedConditions.push(bindCondition(value, condition, oneTimeCondition));
        }
    });
    return selectedConditions;
}
function dataDomains(value) {
    var allowedDomains = value.split(',');
    return utils_1.Some(allowedDomains, function (domain) { return window.gigya.pluginUtils.domain.isInDomain(domain); });
}
function dataApikeys(value) {
    var apikeys = value.split(',');
    return window.gigya.utils.array.indexOf(apikeys, window.gigya.thisScript.APIKey) != -1;
}
function dataProb(value, container) {
    // Show container based on probability
    return container._screenSet._random <= parseFloat(value);
}
function dataAfterDate(value) {
    var timeValue = window.gigya.global.date.getISODate(value); // Partner place date in ISO format
    return new Date().getTime() > timeValue.getTime();
}
function dataBeforeDate(value) {
    var timeValue = window.gigya.global.date.getISODate(value); // Partner place date in ISO format
    return new Date().getTime() <= timeValue.getTime();
}
function dataEmptyFields(value, container) {
    // TODO perhaps get the field instances from the form
    var checkEmptyFields = new Array();
    if (value === '*') {
        // all fields
        var inputs = utils_1.getElementsByHavingAttribute(container.instanceElement, '*', FormInput_1.FormInput_CONSTS.fieldName);
        utils_1.ForEach(inputs, function (i) {
            var name = i.getAttribute(FormInput_1.FormInput_CONSTS.fieldName);
            if (name)
                checkEmptyFields.push(i);
        });
    }
    else {
        // named fields
        utils_1.ForEach(value.split(','), function (fieldName) {
            var field = window.gigya.utils.DOM.getElementsByAttribute(container.instanceElement, '*', FormInput_1.FormInput_CONSTS.fieldName, fieldName)[0];
            checkEmptyFields.push(field);
        });
    }
    return utils_1.Some(checkEmptyFields, function (field) { return !field.value; });
}
loginIdentities['overwriteFields'] = true;
dataAuthMethod['overwriteFields'] = true;
function loginIdentities(value, container) {
    var widgetSiteIdentities = value.split(',');
    var availableLoginProviders = getAvailableLoginProviders(container);
    return visbleWhenHelper_1.showIdentityAccordingToExistingLoginProviders(widgetSiteIdentities, availableLoginProviders);
}
function dataAuthMethod(value, container) {
    var availableLoginProviders = getAvailableLoginProviders(container);
    return visbleWhenHelper_1.showAuthMethodAccordingToExistingLoginProviders(value, availableLoginProviders);
}
function getAvailableLoginProviders(container) {
    var loginProvidersList = container._form.getLoginProviders();
    return typeof (loginProvidersList) === 'string' ? loginProvidersList.split(',') : [];
}
function dataCondition(value, container, oneTime) {
    if (oneTime === void 0) { oneTime = false; }
    if (oneTime && container.validationPassed) {
        return true;
    }
    return Boolean(container.evaluateExpression({ condition: value }));
}
var conditionSets = {
    rendering: {
        'data-domains': dataDomains,
        'data-apikeys': dataApikeys,
        'data-prob': dataProb,
        'data-after-date': dataAfterDate,
        'data-before-date': dataBeforeDate,
        'data-empty-fields': dataEmptyFields,
        'data-login-identities': loginIdentities,
        'data-auth-method-render': dataAuthMethod
    },
    validation: {
        'data-condition': dataCondition
    },
};


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/EmailOtpAuthMethodWidget.ts":
/*!*****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/EmailOtpAuthMethodWidget.ts ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseAuthMethodWidget_1 = __webpack_require__(/*! ../BaseAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseAuthMethodWidget.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseOtpAuthMethodWidget_1 = __webpack_require__(/*! ../BaseOtpAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseOtpAuthMethodWidget.ts");
exports.EmailOtpAuthMethodOtpWidget_CONSTS = tslib_1.__assign(tslib_1.__assign({}, BaseAuthMethodWidget_1.AuthMethod_CONSTS), { selector: '.gigya-link-accounts-form .gigya-auth-method[data-auth-method="emailOtp"]' });
utils_1.DeepFreeze(exports.EmailOtpAuthMethodOtpWidget_CONSTS);
var EmailOtpAuthMethodWidget = /** @class */ (function (_super) {
    tslib_1.__extends(EmailOtpAuthMethodWidget, _super);
    function EmailOtpAuthMethodWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.fieldName = 'emailCode';
        return _this;
    }
    Object.defineProperty(EmailOtpAuthMethodWidget.prototype, "initApiParams", {
        get: function () {
            return {
                lang: this.dataProvider.lang,
                email: this.dataProvider.loginID,
                regToken: null
            };
        },
        enumerable: true,
        configurable: true
    });
    EmailOtpAuthMethodWidget.CONSTS = exports.EmailOtpAuthMethodOtpWidget_CONSTS;
    return EmailOtpAuthMethodWidget;
}(BaseOtpAuthMethodWidget_1.BaseOtpAuthMethodWidget));
exports.EmailOtpAuthMethodWidget = EmailOtpAuthMethodWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(EmailOtpAuthMethodWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget.ts":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget.ts ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ScreenSetPlugin_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts");
exports.Image_CONSTS = {
    selector: 'div.gigya-image',
    srcAttribute: 'data-src',
    widthAttribute: 'data-width',
    heightAttribute: 'data-height',
    backgroundSizeAttribute: 'data-background-size',
};
utils_1.DeepFreeze(exports.Image_CONSTS);
var ImageWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ImageWidget, _super);
    function ImageWidget(_form, el) {
        // Turn resetCSS off.
        return _super.call(this, _form, el, false) || this;
    }
    ImageWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.setBackgroundImage();
    };
    ImageWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        // Handle case where attributes are updated via conditional attr.
        this.setBackgroundImage();
    };
    /**
     * Set background image and handle HTTPS proxying.
     */
    ImageWidget.prototype.setBackgroundImage = function () {
        var el = this.instanceElement;
        // Get attributes from elements.
        var src = el.getAttribute(ImageWidget.CONSTS.srcAttribute);
        var width = el.getAttribute(ImageWidget.CONSTS.widthAttribute);
        var height = el.getAttribute(ImageWidget.CONSTS.heightAttribute);
        var backgroundSize = el.getAttribute(ImageWidget.CONSTS.backgroundSizeAttribute);
        // Hide element if no src provided.
        if (!src) {
            window.gigya.utils.DOM.addClassToElement(this.instanceElement, ScreenSetPlugin_1.ScreenSet_CONSTS.gigyaHidden);
            return;
        }
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, ScreenSetPlugin_1.ScreenSet_CONSTS.gigyaHidden);
        // Set width and height.
        if (width) {
            el.style.width = this.getSize(width);
        }
        if (height) {
            el.style.height = this.getSize(height);
        }
        // Set default background size if none set.
        if (!backgroundSize) {
            el.setAttribute(ImageWidget.CONSTS.backgroundSizeAttribute, 'fit');
        }
        // Since this is processed on every conditional expression, we don't want to re-calculate secure photo URLs every time.
        // The CDN rotates and we'll get a new URL each time, leading to the image being reloaded.
        if (this.prevSrc !== src) {
            this.prevSrc = src;
            // Avoid both HTTPS and embedded images.
            if (window.gigya.localInfo.protocol === 'https' && src.indexOf('http://') === 0) {
                src = window.gigya.global.getPhotoURL(src);
            }
            // Set background image.
            el.style.backgroundImage = "url(\"" + src + "\")";
        }
    };
    /**
     * Translate width/height to CSS-ready value.
     */
    ImageWidget.prototype.getSize = function (size) {
        var sizeNumber = Number(size);
        if (isNaN(sizeNumber)) {
            // Size included dimension already.
            return size;
        }
        else {
            // Just a number was passed. Add "px" to it.
            return size + 'px';
        }
    };
    ImageWidget.CONSTS = exports.Image_CONSTS;
    return ImageWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.ImageWidget = ImageWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(ImageWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget.ts":
/*!****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget.ts ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
exports.LoginAvailabilityWidget_CONSTS = {
    selector: 'div.gigya-loginID-availability',
    boundTo: 'data-bound-to',
};
utils_1.DeepFreeze(exports.LoginAvailabilityWidget_CONSTS);
var LoginAvailabilityWidget = /** @class */ (function (_super) {
    tslib_1.__extends(LoginAvailabilityWidget, _super);
    function LoginAvailabilityWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        _this.init(form, el);
        return _this;
    }
    LoginAvailabilityWidget.prototype.init = function (form, el) {
        var _this = this;
        this.loginIdStateListener = function (state) { return _this.onLoginIdStateChange(state, true); };
        this.originalDisplay = el.style.display;
        this.reset(el);
    };
    LoginAvailabilityWidget.prototype.reset = function (el) {
        this.boundedField =
            this._form.getField(el.getAttribute(LoginAvailabilityWidget.CONSTS.boundTo)) ||
                this._form.getField('loginID') ||
                this._form.getField('username') ||
                this._form.getField('email');
        if (this.boundedField) {
            this.boundedField['_serverValidateAvaliability'] = true; // trigger the server validation of the loginId
            this.boundedField.addValidityStateListener(this.loginIdStateListener);
        }
        else {
            this.warn(exports.LoginAvailabilityWidget_CONSTS.selector + ' is missing a field to bound to');
        }
    };
    LoginAvailabilityWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.boundedField)
            this.onLoginIdStateChange(this.boundedField.getValidityState(), false);
    };
    LoginAvailabilityWidget.prototype.unlinkTemplate = function () {
        if (this.boundedField)
            this.boundedField.removeValidityStateListener(this.loginIdStateListener);
        _super.prototype.unlinkTemplate.call(this);
    };
    LoginAvailabilityWidget.prototype.onLoginIdStateChange = function (state, fromServer) {
        if (!fromServer)
            // treat local validations as no relevant to widget
            state = FormInput_1.ValidityStates._undefined;
        if (!this.instanceElement)
            return;
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, 'gigya-loginID-availability-progress');
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, 'gigya-loginID-availability-not-available');
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, 'gigya-loginID-availability-available');
        switch (state) {
            case FormInput_1.ValidityStates.valid:
                this.instanceElement.style.display = this.originalDisplay;
                this.instanceElement.innerHTML = this._screenSet.getText('available');
                window.gigya.utils.DOM.addClassToElement(this.instanceElement, 'gigya-loginID-availability-available');
                break;
            case FormInput_1.ValidityStates.error:
                this.instanceElement.style.display = this.originalDisplay;
                this.instanceElement.innerHTML = this._screenSet.getText('not_available');
                window.gigya.utils.DOM.addClassToElement(this.instanceElement, 'gigya-loginID-availability-not-available');
                break;
            case FormInput_1.ValidityStates.pending:
                this.instanceElement.style.display = this.originalDisplay;
                this.instanceElement.innerHTML = this._screenSet.getText('checking');
                window.gigya.utils.DOM.addClassToElement(this.instanceElement, 'gigya-loginID-availability-progress');
                break;
            default:
                this.instanceElement.innerHTML = '';
                this.instanceElement.style.display = 'none';
                break;
        }
    };
    LoginAvailabilityWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        /// if [for some reason] this widget need to support conditional attrs...
        // this.reset(this.instanceElement);
    };
    LoginAvailabilityWidget.CONSTS = exports.LoginAvailabilityWidget_CONSTS;
    return LoginAvailabilityWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.LoginAvailabilityWidget = LoginAvailabilityWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(LoginAvailabilityWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget.ts":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget.ts ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var nextGeneratedContainerId = 0;
exports.MyPhotoWidget_CONSTS = {
    selector: 'div.gigya-myPhoto',
};
utils_1.DeepFreeze(exports.MyPhotoWidget_CONSTS);
var MyPhotoWidget = /** @class */ (function (_super) {
    tslib_1.__extends(MyPhotoWidget, _super);
    function MyPhotoWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _this.containerId = _this._screenSet.containerID + '_myPhoto_' + nextGeneratedContainerId++;
        return _this;
    }
    MyPhotoWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            if (this.instanceElement)
                this.instanceElement.innerHTML = '<div id="' + this.containerId + '"></div>';
            if (!this.params['containerID']) {
                this.widgetParams = this.params;
                this.renderWidget();
            }
        }
    };
    MyPhotoWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement)
            this.instanceElement.innerHTML = ''; // To make sure no ID conflicts will be generated
        if (this._instance)
            this._instance.dispose();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    MyPhotoWidget.prototype.renderWidget = function () {
        var _this = this;
        //re-render the plugin with the new new conditional values.
        window.gigya.accounts.showMyPhotoUI(this.widgetParams, {
            containerID: this.containerId,
            lang: this._screenSet.lang,
            customLang: this._screenSet.params.customLang,
            regToken: this._screenSet.params['regToken'],
            getInstance: function (instance) {
                _this._instance = instance;
            },
            onLoad: function () {
                _this._screenSet.centerModal();
            },
        });
        this.renderWidgetUI = false;
    };
    MyPhotoWidget.CONSTS = exports.MyPhotoWidget_CONSTS;
    return MyPhotoWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.MyPhotoWidget = MyPhotoWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(MyPhotoWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/OrganizationContextWidget.ts":
/*!******************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/OrganizationContextWidget.ts ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var GSErrors = window.gigya.GSErrors;
var ChangeOrganizationContextForm_1 = __webpack_require__(/*! ../Forms/ChangeOrganizationContextForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ChangeOrganizationContextForm.ts");
var promise_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/promise */ "./src/core/Gigya.Js/app/Utils/promise.ts");
exports.OrganizationContextConsts = {
    selector: '.gigya-organization-context-widget',
    dropdownSelector: '.gigya-organization-context-dropdown',
    buttonSelector: '.gigya-organization-context-control-link-button',
    errorDisplayClass: '.gigya-error-display',
    errorMessageClass: '.gigya-error-msg',
    errorActiveClass: 'gigya-error-display-active',
    disabledClass: 'gigya-disabled',
    noDataAvailableMessage: 'no_data_available'
};
var UserOrganizationRelationshipStatus;
(function (UserOrganizationRelationshipStatus) {
    UserOrganizationRelationshipStatus["active"] = "active";
})(UserOrganizationRelationshipStatus || (UserOrganizationRelationshipStatus = {}));
utils_1.DeepFreeze(exports.OrganizationContextConsts);
var OrganizationContextWidget = /** @class */ (function (_super) {
    tslib_1.__extends(OrganizationContextWidget, _super);
    function OrganizationContextWidget(_form, el, _domUtils) {
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        var _this = 
        // Turn resetCSS off.
        _super.call(this, _form, el, false) || this;
        _this._domUtils = _domUtils;
        return _this;
    }
    OrganizationContextWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a, groupsResponse, organizationResponse, e_1, errorMessage;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, 4, 5]);
                        this._screen.dimScreen();
                        this.selectElem = this.instanceElement.querySelector(exports.OrganizationContextConsts.dropdownSelector);
                        this.buttonElem = this.instanceElement.querySelector(exports.OrganizationContextConsts.buttonSelector);
                        this.errorDisplayElem = this.instanceElement.querySelector(exports.OrganizationContextConsts.errorDisplayClass);
                        this.errorMessageElem = this.errorDisplayElem.querySelector(exports.OrganizationContextConsts.errorMessageClass);
                        this.errorMessageElem.classList.add('gigya-error-msg-active');
                        if (!this.isOrganizationContextForm()) {
                            this.addButtonHandler(this.buttonElem, this.onClickHandler.bind(this));
                        }
                        if (this.selectElem == null)
                            return [2 /*return*/];
                        this.addDomEventListener(this.selectElem, "change", this.onSelectChangedHandler.bind(this));
                        return [4 /*yield*/, gigya.Promise.all([
                                this.getUserOrganizations(),
                                this.getOrganizationContext()
                            ])];
                    case 2:
                        _a = _b.sent(), groupsResponse = _a[0], organizationResponse = _a[1];
                        this.initOrganizationSelect(groupsResponse, organizationResponse);
                        return [3 /*break*/, 5];
                    case 3:
                        e_1 = _b.sent();
                        errorMessage = this._screenSet.getErrorMessageNew(e_1.errorCode);
                        this.showMessage("error", errorMessage);
                        // remove template option in case of error
                        this.clearOrganizationSelect();
                        this._screen.dispatchEvent('error', tslib_1.__assign(tslib_1.__assign({}, e_1), { errorMessage: errorMessage }));
                        return [3 /*break*/, 5];
                    case 4:
                        this._screen.undimScreen();
                        return [7 /*endfinally*/];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    OrganizationContextWidget.prototype.getOrganizationContext = function () {
        return promise_1.promisify(window.gigya.accounts.b2b.getOrganizationContext);
    };
    OrganizationContextWidget.prototype.setOrganizationContext = function (bpid, callback) {
        window.gigya.accounts.b2b.setOrganizationContext({
            callback: function (response) { return callback(response); },
            bpid: bpid
        });
    };
    OrganizationContextWidget.prototype.getUserOrganizations = function () {
        return promise_1.promisify(window.gigya.accounts.getAccountInfo, {
            include: "groups"
        });
    };
    OrganizationContextWidget.prototype.clearOrganizationSelect = function () {
        this.selectElem.options.length = 0;
    };
    OrganizationContextWidget.prototype.initOrganizationSelect = function (groupsResponse, organizationContextResponse) {
        var _this = this;
        var selectOptionTemplate = this.selectElem.options[0].text;
        var organizations;
        if (groupsResponse.errorCode === GSErrors.OK) {
            organizations = this.getActiveOrganizations(groupsResponse["groups"]);
            if (organizations.length == 0) {
                this.selectElem.options[0].text = this._screenSet.getText(exports.OrganizationContextConsts.noDataAvailableMessage);
                this.disableWidget();
                return;
            }
        }
        else {
            var errorMessage = this._screenSet.getErrorMessageNew(groupsResponse.errorCode);
            this.showMessage('error', errorMessage);
            // remove template option in case of error
            this.clearOrganizationSelect();
            return;
        }
        if (organizationContextResponse.errorCode === GSErrors.OK) {
            this.organizationContextBpid = organizationContextResponse.bpid;
        }
        else {
            var errorMessage = this._screenSet.getErrorMessageNew(organizationContextResponse.errorCode);
            this.showMessage('error', errorMessage);
        }
        var hasSelected = false;
        organizations
            .map(function (org) {
            var option = document.createElement('option');
            option.value = org.bpid;
            option.text = _this.fillTemplate(selectOptionTemplate, {
                name: org.orgName,
                bpid: org.bpid,
                id: org.orgId
            });
            if (_this.organizationContextBpid == org.bpid) {
                option.selected = true;
                _this._screenSet.data.apiData.selectedBpid = _this.organizationContextBpid;
                hasSelected = true;
            }
            return option;
        })
            .forEach(function (option) {
            _this.selectElem.add(option);
        });
        if (hasSelected) {
            // remove first option with text pattern in case when we have selected value
            this.selectElem.options.remove(0);
        }
        else {
            // no selected value, remove text pattern from the first option
            this.selectElem.options[0].text = "";
        }
    };
    OrganizationContextWidget.prototype.getActiveOrganizations = function (groups) {
        if (groups && groups.organizations) {
            return groups.organizations.filter(function (org) { return !org.status || org.status === UserOrganizationRelationshipStatus.active; });
        }
        return [];
    };
    OrganizationContextWidget.prototype.isOrganizationContextForm = function () {
        return this._form instanceof ChangeOrganizationContextForm_1.ChangeOrganizationContextForm;
    };
    OrganizationContextWidget.prototype.fillTemplate = function (template, obj) {
        var content = template.replace(/{{organization[.](.*?)}}/g, function (match, p1) { return obj[p1] || ""; });
        return content;
    };
    OrganizationContextWidget.prototype.onClickHandler = function () {
        var _this = this;
        this.hideMessage();
        if (!this._screenSet.data.apiData.selectedBpid)
            return;
        if (this._screenSet.data.apiData.selectedBpid != this.organizationContextBpid) {
            this.preSaveContext();
            this.setOrganizationContext(this._screenSet.data.apiData.selectedBpid, function (response) {
                if (response.errorCode === GSErrors.OK) {
                    _this.organizationContextBpid = _this._screenSet.data.apiData.selectedBpid;
                }
                else {
                    var errorMessage = _this._screenSet.getErrorMessageNew(response.errorCode);
                    _this.showMessage("error", errorMessage);
                }
                _this.postSaveContext();
            });
        }
    };
    OrganizationContextWidget.prototype.disableWidget = function () {
        this.selectElem.disabled = true;
        this.selectElem.classList.add(exports.OrganizationContextConsts.disabledClass);
        if (this.buttonElem) {
            this.buttonElem.disabled = true;
            this.buttonElem.classList.add(exports.OrganizationContextConsts.disabledClass);
        }
    };
    OrganizationContextWidget.prototype.enableWidget = function () {
        this.selectElem.disabled = false;
        this.selectElem.classList.remove(exports.OrganizationContextConsts.disabledClass);
        if (this.buttonElem) {
            this.buttonElem.disabled = false;
            this.buttonElem.classList.remove(exports.OrganizationContextConsts.disabledClass);
        }
    };
    OrganizationContextWidget.prototype.preSaveContext = function () {
        this.disableWidget();
        this._screen.dimScreen();
    };
    OrganizationContextWidget.prototype.postSaveContext = function () {
        this.enableWidget();
        this._screen.undimScreen();
    };
    OrganizationContextWidget.prototype.onSelectChangedHandler = function () {
        this._screenSet.data.apiData.selectedBpid = this.selectElem.value;
        this.hideMessage();
        this.publishSelectValueChanged(this.selectElem.value);
    };
    OrganizationContextWidget.prototype.publishSelectValueChanged = function (value) {
        var _a;
        var fieldChangeEvent = {
            eventName: 'fieldChanged',
            screen: (_a = this._screen) === null || _a === void 0 ? void 0 : _a.requestedScreen,
            form: this._form.bindID,
            field: 'bpid',
            isValid: true,
            errMsg: null,
            value: this.selectElem.value,
        };
        this._screen.dispatchEvent('fieldChanged', fieldChangeEvent);
        window.gigya.utils.DOM.dispatch(this.selectElem, 'fieldChanged');
    };
    OrganizationContextWidget.prototype.showMessage = function (type, message) {
        this.errorDisplayElem.classList.add(exports.OrganizationContextConsts.errorActiveClass);
        this.errorDisplayElem.classList.add(type);
        this.errorMessageElem.innerText = message;
    };
    OrganizationContextWidget.prototype.hideMessage = function () {
        this.errorDisplayElem.classList.remove(exports.OrganizationContextConsts.errorActiveClass);
        this.errorDisplayElem.classList.remove('success');
        this.errorDisplayElem.classList.remove('error');
    };
    OrganizationContextWidget.CONSTS = exports.OrganizationContextConsts;
    return OrganizationContextWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.OrganizationContextWidget = OrganizationContextWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(OrganizationContextWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyBaseWidget.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyBaseWidget.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var PasskeyService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Passkey/PasskeyService */ "./src/core/Gigya.Js/app/Passkey/PasskeyService.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! ../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
exports.Passkey_CONSTS = {
    selector: '.gigya-passKey-widget',
    errorDisplayClass: '.gigya-error-display',
    errorMessageClass: '.gigya-error-msg',
    errorActiveClass: 'gigya-error-display-active',
};
utils_1.DeepFreeze(exports.Passkey_CONSTS);
var PasskeyBaseWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PasskeyBaseWidget, _super);
    function PasskeyBaseWidget(_screen, el, _domUtils) {
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        var _this = _super.call(this, _screen, el, false) || this;
        _this._domUtils = _domUtils;
        _this.onClickHandler = function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                this.onClick();
                return [2 /*return*/];
            });
        }); };
        return _this;
    }
    Object.defineProperty(PasskeyBaseWidget.prototype, "hostForm", {
        get: function () {
            return this._screen.getFormByElement(this.instanceElement) || null;
        },
        enumerable: true,
        configurable: true
    });
    PasskeyBaseWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.buttonElem = this.instanceElement.querySelector('button');
        this.errorDisplayElem = this.instanceElement.querySelector(exports.Passkey_CONSTS.errorDisplayClass);
        this.errorMessageElem = this.errorDisplayElem.querySelector(exports.Passkey_CONSTS.errorMessageClass);
        this.errorMessageElem.classList.add('gigya-error-msg-active');
        if (PasskeyService_1.default.isSupported()) {
            this._addClickHandler();
        }
        else {
            this.buttonElem.setAttribute('disabled', 'true');
        }
    };
    PasskeyBaseWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this._removeClickHandler();
    };
    PasskeyBaseWidget.prototype.onClick = function () {
        this.hideMessage();
    };
    PasskeyBaseWidget.prototype.showMessage = function (type, message) {
        this.errorDisplayElem.classList.add(exports.Passkey_CONSTS.errorActiveClass);
        this.errorDisplayElem.classList.add(type);
        this.errorMessageElem.innerText = message;
    };
    PasskeyBaseWidget.prototype.hideMessage = function () {
        this.errorDisplayElem.classList.remove(exports.Passkey_CONSTS.errorActiveClass);
        this.errorDisplayElem.classList.remove('success');
        this.errorDisplayElem.classList.remove('error');
    };
    PasskeyBaseWidget.prototype._addClickHandler = function () {
        this._domUtils.addEventListener(this.buttonElem, 'click', this.onClickHandler);
    };
    PasskeyBaseWidget.prototype._removeClickHandler = function () {
        this._domUtils.removeEventListener(this.buttonElem, 'click', this.onClickHandler);
    };
    return PasskeyBaseWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.PasskeyBaseWidget = PasskeyBaseWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyLoginWidget.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyLoginWidget.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var PasskeyBaseWidget_1 = __webpack_require__(/*! ./PasskeyBaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyBaseWidget.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! ../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var PasskeyService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Passkey/PasskeyService */ "./src/core/Gigya.Js/app/Passkey/PasskeyService.ts");
var GSErrors = window.gigya.GSErrors;
var LinkAccountsForm_1 = __webpack_require__(/*! ../Forms/LinkAccountsForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts");
exports.PasskeyLogin_CONSTS = {
    selector: '.gigya-composite-control-passkey-login-widget',
};
utils_1.DeepFreeze(exports.PasskeyLogin_CONSTS);
var PasskeyLoginWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PasskeyLoginWidget, _super);
    function PasskeyLoginWidget() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PasskeyLoginWidget.prototype.onClick = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var response, e_1, errorMessage;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _super.prototype.onClick.call(this);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, 4, 5]);
                        this._screen.dimScreen();
                        if (this.hostForm.bindID === LinkAccountsForm_1.LinkAccountsForm_CONSTS.gigyaClass) {
                            this._screenSet.data.shouldConnectAccounts = true;
                        }
                        return [4 /*yield*/, PasskeyService_1.default.authenticate({
                                abortCurrentCeremony: true,
                                dontHandleScreenSet: false,
                                sessionExpiration: this._screenSet.params['sessionExpiration']
                            })];
                    case 2:
                        response = _a.sent();
                        this._screenSet.onScreenResponse(response, this.hostForm);
                        if (response.errorCode !== GSErrors.OK) {
                            response.errorMessage = this._screenSet.getErrorMessageNew(response.errorCode);
                            this.showMessage('error', response.errorMessage);
                        }
                        return [3 /*break*/, 5];
                    case 3:
                        e_1 = _a.sent();
                        errorMessage = this._screenSet.getErrorMessageNew(e_1.errorCode);
                        this.showMessage('error', errorMessage);
                        this._screen.dispatchEvent('error', tslib_1.__assign(tslib_1.__assign({}, e_1), { errorMessage: errorMessage }));
                        return [3 /*break*/, 5];
                    case 4:
                        this._screen.undimScreen();
                        return [7 /*endfinally*/];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    PasskeyLoginWidget.CONSTS = exports.PasskeyLogin_CONSTS;
    return PasskeyLoginWidget;
}(PasskeyBaseWidget_1.PasskeyBaseWidget));
exports.PasskeyLoginWidget = PasskeyLoginWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(PasskeyLoginWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyCardWidget.ts":
/*!*************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyCardWidget.ts ***!
  \*************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseScreenWidget_1 = __webpack_require__(/*! ../../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ../TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
var CardListWidget_1 = __webpack_require__(/*! ../CardListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListWidget.ts");
var PasskeyService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Passkey/PasskeyService */ "./src/core/Gigya.Js/app/Passkey/PasskeyService.ts");
var GSErrors = window.gigya.GSErrors;
exports.PasskeyCard_CONSTS = {
    selector: 'li.gigya-passkey-card',
    deleteButtonSelector: '.gigya-remove-passkey-icon',
    newCardClass: 'gigya-card-new',
    deps: [TranslatedWidget_1.TranslatedWidget]
};
var PasskeyCardWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PasskeyCardWidget, _super);
    function PasskeyCardWidget(_screen, el, _domUtils) {
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        var _this = _super.call(this, _screen, el, false) || this;
        _this._domUtils = _domUtils;
        _this.deletePasskey = function (e) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
            var response, hostForm;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        e.preventDefault();
                        this._screen.dimScreen();
                        return [4 /*yield*/, PasskeyService_1.default.removePasskey(this.elementId, this._screenSet.regToken)];
                    case 1:
                        response = _a.sent();
                        if (response.errorCode !== GSErrors.OK) {
                            hostForm = this._screen.getFormByElement(this.instanceElement);
                            if (!hostForm)
                                return [2 /*return*/];
                            this._screenSet.onScreenResponse(response, this);
                            this._screenSet.displayServerErrors(response, hostForm);
                        }
                        this._screen.undimScreen();
                        return [2 /*return*/];
                }
            });
        }); };
        _this.bindID = _this.ID || exports.PasskeyCard_CONSTS.selector;
        return _this;
    }
    Object.defineProperty(PasskeyCardWidget.prototype, "index", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(CardListWidget_1.CardList_CONSTS.indexAttribute);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PasskeyCardWidget.prototype, "elementId", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.getAttribute(CardListWidget_1.CardList_CONSTS.idAttribute);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PasskeyCardWidget.prototype, "deleteButton", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.PasskeyCard_CONSTS.deleteButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    PasskeyCardWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var content, matches, elemIndex;
            return tslib_1.__generator(this, function (_a) {
                _super.prototype.linkInstanceElement.call(this, parent);
                content = this.instanceElement.innerHTML;
                matches = content.match(/{{(.*?)}}/g);
                elemIndex = this.index;
                content = matches.reduce(function (str, m) {
                    var value = m.replace(/passkeys./g, "passkeys[" + elemIndex + "].");
                    return str.replace(m, value);
                }, content);
                this.instanceElement.innerHTML = content;
                if (this.isNewCard()) {
                    this.instanceElement.classList.add(exports.PasskeyCard_CONSTS.newCardClass);
                }
                else {
                    this.instanceElement.classList.remove(exports.PasskeyCard_CONSTS.newCardClass);
                }
                this.addEventHandlers();
                return [2 /*return*/];
            });
        });
    };
    PasskeyCardWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.removeEventHandlers();
    };
    PasskeyCardWidget.prototype.isNewCard = function () {
        var passkey = this._screenSet.data.passkeys[this.index];
        return !passkey.lastLogin;
    };
    PasskeyCardWidget.prototype.addEventHandlers = function () {
        this._domUtils.addEventListener(this.deleteButton, 'click', this.deletePasskey);
    };
    PasskeyCardWidget.prototype.removeEventHandlers = function () {
        this._domUtils.removeEventListener(this.deleteButton, 'click', this.deletePasskey);
    };
    PasskeyCardWidget.CONSTS = exports.PasskeyCard_CONSTS;
    return PasskeyCardWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.PasskeyCardWidget = PasskeyCardWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(PasskeyCardWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyManagerWidget.ts":
/*!****************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyManagerWidget.ts ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var CardListWidget_1 = __webpack_require__(/*! ../CardListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListWidget.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! ../../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var GSErrors = window.gigya.GSErrors;
var PasskeyService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Passkey/PasskeyService */ "./src/core/Gigya.Js/app/Passkey/PasskeyService.ts");
exports.PasskeyManager_CONSTS = {
    selector: '.gigya-composite-control-passkey-manager-widget'
};
var PasskeyManagerWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PasskeyManagerWidget, _super);
    function PasskeyManagerWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.itemId = 'id';
        _this.refreshList = function () {
            _this.reloadList();
        };
        _this.credentialMapper = function (cred) {
            cred.DeviceName = cred.DeviceName || cred.Platform + " / " + cred.Browser;
            return Object.keys(cred).reduce(function (c, key) {
                var _a;
                var camelCaseKey = key.charAt(0).toLowerCase() + key.slice(1);
                return tslib_1.__assign(tslib_1.__assign({}, c), (_a = {}, _a[camelCaseKey] = _this.getValue(key, cred[key]), _a));
            }, {});
        };
        return _this;
    }
    PasskeyManagerWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        this.addEventHandlers();
                        return [2 /*return*/];
                }
            });
        });
    };
    PasskeyManagerWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.removeEventHandlers();
    };
    PasskeyManagerWidget.prototype.reloadData = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var response, data, hostForm, _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, PasskeyService_1.default.getPasskeys(this._screenSet.regToken)];
                    case 1:
                        response = _b.sent();
                        if (response.errorCode === GSErrors.OK) {
                            data = response.credentials.map(this.credentialMapper);
                            this._screenSet.data.passkeys = data;
                            return [2 /*return*/, data];
                        }
                        else {
                            hostForm = this._screen.getFormByElement(this.instanceElement);
                            this._screenSet.onScreenResponse(response, hostForm);
                            return [2 /*return*/, []];
                        }
                        return [3 /*break*/, 3];
                    case 2:
                        _a = _b.sent();
                        return [2 /*return*/, []];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    PasskeyManagerWidget.prototype.addEventHandlers = function () {
        PasskeyService_1.default.on('passkeyRemoved', this.refreshList);
        PasskeyService_1.default.on('passkeyAdded', this.refreshList);
    };
    PasskeyManagerWidget.prototype.removeEventHandlers = function () {
        PasskeyService_1.default.remove('passkeyAdded', this.refreshList);
        PasskeyService_1.default.remove('passkeyRemoved', this.refreshList);
    };
    PasskeyManagerWidget.prototype.getValue = function (key, value) {
        if (key === 'LastLogin' || key === 'RegistrationDate') {
            // convert c# ticks to utc timestamp
            var TICKS_AT_EPOCH = 621355968000000000;
            var TICKS_PER_MILLISECOND = 10000;
            var intValue = parseInt(value, 10);
            return new Date(Math.ceil((intValue - TICKS_AT_EPOCH) / TICKS_PER_MILLISECOND))
                .toLocaleDateString(undefined, {
                weekday: 'short',
                day: 'numeric',
                year: 'numeric',
                month: 'short'
            });
        }
        return value;
    };
    PasskeyManagerWidget.CONSTS = exports.PasskeyManager_CONSTS;
    return PasskeyManagerWidget;
}(CardListWidget_1.CardListWidget));
exports.PasskeyManagerWidget = PasskeyManagerWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(PasskeyManagerWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyRegisterWidget.ts":
/*!**************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyRegisterWidget.ts ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var PasskeyBaseWidget_1 = __webpack_require__(/*! ./PasskeyBaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyBaseWidget.ts");
var utils_1 = __webpack_require__(/*! ../utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! ../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var PasskeyService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Passkey/PasskeyService */ "./src/core/Gigya.Js/app/Passkey/PasskeyService.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.PasskeyRegister_CONSTS = {
    selector: '.gigya-composite-control-passkey-register-widget',
    behaviorAttr: 'data-passkey-behavior'
};
exports.PasskeyRegisterMode = {
    Connect: 'connect',
    Submit: 'submit'
};
utils_1.DeepFreeze(exports.PasskeyRegister_CONSTS);
var PasskeyRegisterWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PasskeyRegisterWidget, _super);
    function PasskeyRegisterWidget() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(PasskeyRegisterWidget.prototype, "behavior", {
        get: function () {
            return this.instanceElement.getAttribute(exports.PasskeyRegister_CONSTS.behaviorAttr) || exports.PasskeyRegisterMode.Connect;
        },
        enumerable: true,
        configurable: true
    });
    PasskeyRegisterWidget.prototype.onClick = function () {
        var _a, _b, _c, _d;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _e, lang, regSource, context, cid, sessionExpiration, source, response, hostForm, message, e_1, errorMessage;
            return tslib_1.__generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        _super.prototype.onClick.call(this);
                        _f.label = 1;
                    case 1:
                        _f.trys.push([1, 5, 6, 7]);
                        this._screen.dimScreen();
                        _e = this._screenSet.params, lang = _e.lang, regSource = _e.regSource, context = _e.context, cid = _e.cid, sessionExpiration = _e.sessionExpiration, source = _e.source;
                        return [4 /*yield*/, PasskeyService_1.default.registerPasskey({
                                regToken: (_b = (_a = this._screenSet) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b.regToken,
                                aToken: (_d = (_c = this._screenSet) === null || _c === void 0 ? void 0 : _c.data) === null || _d === void 0 ? void 0 : _d.aToken,
                                lang: lang, regSource: regSource, context: context, cid: cid, sessionExpiration: sessionExpiration, source: source
                            }, true)];
                    case 2:
                        response = _f.sent();
                        if (!(this.behavior === exports.PasskeyRegisterMode.Submit)) return [3 /*break*/, 4];
                        hostForm = this._screen.getFormByElement(this.instanceElement);
                        return [4 /*yield*/, this._screenSet.onScreenResponse(response, hostForm)];
                    case 3:
                        _f.sent();
                        _f.label = 4;
                    case 4:
                        if (response.errorCode === GSErrors_1.GSErrors.OK) {
                            message = this._screenSet.getText('passkey_register_success');
                            this.showMessage('success', message);
                        }
                        else {
                            response.errorMessage = this._screenSet.getText(response.errorCode);
                            this.showMessage('error', response.errorMessage);
                        }
                        return [3 /*break*/, 7];
                    case 5:
                        e_1 = _f.sent();
                        errorMessage = this._screenSet.getErrorMessageNew(e_1.errorCode);
                        this.showMessage('error', errorMessage);
                        this._screen.dispatchEvent('error', tslib_1.__assign(tslib_1.__assign({}, e_1), { errorMessage: errorMessage }));
                        return [3 /*break*/, 7];
                    case 6:
                        this._screen.undimScreen();
                        return [7 /*endfinally*/];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    PasskeyRegisterWidget.CONSTS = exports.PasskeyRegister_CONSTS;
    return PasskeyRegisterWidget;
}(PasskeyBaseWidget_1.PasskeyBaseWidget));
exports.PasskeyRegisterWidget = PasskeyRegisterWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(PasskeyRegisterWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordAuthMethodWidget.ts":
/*!*****************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordAuthMethodWidget.ts ***!
  \*****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseAuthMethodWidget_1 = __webpack_require__(/*! ../BaseAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseAuthMethodWidget.ts");
var accounts = window.gigya.accounts;
var BaseFormWidget_1 = __webpack_require__(/*! ../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.AuthMethodPassword_CONSTS = tslib_1.__assign(tslib_1.__assign({}, BaseAuthMethodWidget_1.AuthMethod_CONSTS), { selector: '.gigya-link-accounts-form .gigya-auth-method[data-auth-method="site"]' });
utils_1.DeepFreeze(exports.AuthMethodPassword_CONSTS);
var PasswordAuthMethodWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordAuthMethodWidget, _super);
    function PasswordAuthMethodWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.fieldName = 'sitePassword';
        return _this;
    }
    PasswordAuthMethodWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.expand();
    };
    Object.defineProperty(PasswordAuthMethodWidget.prototype, "submitApi", {
        get: function () {
            return accounts.login;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PasswordAuthMethodWidget.prototype, "submitApiParams", {
        get: function () {
            return window.gigya.utils.object.merge([
                this.dataProvider.defaultSubmitParams,
                this.dataProvider.getPasswordLoginParams(this.passwordValue),
            ]);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PasswordAuthMethodWidget.prototype, "passwordValue", {
        get: function () {
            var _a;
            return (_a = this.formField) === null || _a === void 0 ? void 0 : _a.getValue();
        },
        enumerable: true,
        configurable: true
    });
    PasswordAuthMethodWidget.CONSTS = exports.AuthMethodPassword_CONSTS;
    return PasswordAuthMethodWidget;
}(BaseAuthMethodWidget_1.BaseAuthMethodWidget));
exports.PasswordAuthMethodWidget = PasswordAuthMethodWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(PasswordAuthMethodWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts":
/*!***************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts ***!
  \***************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.DisplayModes = {
    policy: {
        hasMinimumRequirements: true,
        hasStrengthMeter: false,
        getTemplate: function (templates) {
            return templates.passwordStrength_minimumRequirements;
        },
    },
    meter: {
        hasMinimumRequirements: false,
        hasStrengthMeter: true,
        getTemplate: function (templates) {
            return templates.passwordStrength_strengthMeter;
        },
    },
    combined: {
        hasMinimumRequirements: true,
        hasStrengthMeter: true,
        getTemplate: function (templates) {
            return templates.passwordStrength_strengthMeter + templates.passwordStrength_minimumRequirements;
        },
    },
};
var BubbleOrientations;
(function (BubbleOrientations) {
    BubbleOrientations[BubbleOrientations["right"] = 0] = "right";
    BubbleOrientations[BubbleOrientations["left"] = 1] = "left";
    BubbleOrientations[BubbleOrientations["up"] = 2] = "up";
    BubbleOrientations[BubbleOrientations["down"] = 3] = "down";
    BubbleOrientations[BubbleOrientations["none"] = 4] = "none";
})(BubbleOrientations = exports.BubbleOrientations || (exports.BubbleOrientations = {}));
utils_1.DeepFreeze(BubbleOrientations);
exports.PasswordStrengthWidget_CONSTS = {
    selector: 'div.gigya-password-strength',
    bubbleClass: 'gigya-password-strength-bubble',
    mobileClass: 'mobile-bubble',
    desktopClass: 'desktop-bubble',
    displayMode: 'data-display-mode',
    bubble: 'data-on-focus-bubble',
    bubbleOrientation: 'data-bubble-orientation',
};
utils_1.DeepFreeze(exports.PasswordStrengthWidget_CONSTS);
var PasswordStrengthWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordStrengthWidget, _super);
    function PasswordStrengthWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        _this.bubbleLastTop = '';
        _this.originalClass = el.className;
        _this.originalStyle = el.getAttribute('style');
        _this.originalDisplay = el.style.display;
        el.style.display = 'none';
        // Automatically bound to the form password field
        _this._passwordField = form.getField('newPassword') || form.getField('password');
        if (!_this._passwordField) {
            _this.warn(exports.PasswordStrengthWidget_CONSTS.selector + "'s form is missing password field to bound to");
            return _this;
        }
        _this.getText = function (t) { return _this._screenSet.getText(t); };
        _this.displayMode = exports.DisplayModes[el.getAttribute(exports.PasswordStrengthWidget_CONSTS.displayMode)] || exports.DisplayModes['combined'];
        _this.template = window.gigya.utils.templates.fill(_this._screenSet.getTemplates().passwordStrength, {
            content: _this.displayMode.getTemplate(_this._screenSet.getTemplates()),
        });
        _this.isBubble = Boolean(el.getAttribute(exports.PasswordStrengthWidget_CONSTS.bubble));
        if (_this.isBubble) {
            _this.bubbleOrientation = BubbleOrientations[el.getAttribute(exports.PasswordStrengthWidget_CONSTS.bubbleOrientation)];
            if (typeof _this.bubbleOrientation === 'undefined')
                _this.bubbleOrientation = _this._screenSet.isModal ? BubbleOrientations.left : BubbleOrientations.up;
            _this.bubbleID = _this._screenSet.params.containerID + '_bubble';
            _this.onBlur = function () { return _this.hideBubble(); };
            _this.onFocus = function () { return _this.updateBubbleDisplay(); };
            _this.onScroll = function () {
                var balloonDiv = window.gigya.global['divGMBalloon'];
                if (balloonDiv && balloonDiv.style.top == _this.bubbleLastTop)
                    _this.refreshBubble();
            };
        }
        _this.fnKeyUp = function () { return _this.updateBubbleDisplay(); };
        _this._passwordField.addEventListener('keyup', _this.fnKeyUp);
        if (_this.isBubble) {
            _this._passwordField.addEventListener('focus', _this.onFocus);
            _this._passwordField.addEventListener('blur', _this.onBlur);
            window.gigya.utils.DOM.addEventListener(document, 'scroll', _this.onScroll);
        }
        _this._screenSet.onRefreshExternalComponentsEvent().add(function () {
            _this.refreshBubble();
        });
        return _this;
    }
    PasswordStrengthWidget.prototype.isPasswordInputEmpty = function () {
        return !Boolean(this._passwordField.getValue());
    };
    PasswordStrengthWidget.prototype.unlinkTemplate = function () {
        window.gigya.utils.DOM.removeEventListener(document, 'scroll', this.onScroll);
        if (this._passwordField) {
            if (this.isBubble) {
                this._passwordField.removeEventListener('blur', this.onBlur);
                this._passwordField.removeEventListener('focus', this.onFocus);
            }
            this.hideBubble();
            this._passwordField.removeEventListener('keyup', this.fnKeyUp);
        }
        _super.prototype.unlinkTemplate.call(this);
    };
    PasswordStrengthWidget.prototype.showBubble = function () {
        this.instanceElement.style.display = '';
        var bubbleW = this.instanceElement.offsetWidth || 250;
        this.instanceElement.style.display = 'none';
        var bubbleClasses = exports.PasswordStrengthWidget_CONSTS.bubbleClass +
            ' ' +
            (this._screenSet.isMobileUI ? exports.PasswordStrengthWidget_CONSTS.mobileClass : exports.PasswordStrengthWidget_CONSTS.desktopClass);
        var styleCalculator = document.createElement('div');
        styleCalculator.setAttribute('style', this.instanceElement.getAttribute('style'));
        if (styleCalculator.style.display === 'none')
            styleCalculator.style.display = '';
        var bubbleHTML = '<div id="' +
            this.bubbleID +
            '_content" class="' +
            this.instanceElement.className +
            '" style="' +
            styleCalculator.getAttribute('style') +
            '">' +
            this.getPasswordBubbleContent() +
            '</div>';
        window.gigya.global.putGMBalloonNextTo(this._passwordField.instanceElement, bubbleHTML, null, bubbleW, null, true, this.bubbleID, true, this.getBubbleOrientations(), bubbleClasses);
        this.isBubbleVisible = true;
        this.bubbleLastTop = window.gigya.global['divGMBalloon'].style.top;
    };
    PasswordStrengthWidget.prototype.getBubbleOrientations = function () {
        var orientations = [BubbleOrientations[this.bubbleOrientation]];
        var first = orientations[0];
        var up = BubbleOrientations[BubbleOrientations.up];
        var down = BubbleOrientations[BubbleOrientations.down];
        // add or set up orientation
        if (typeof first === 'undefined')
            first = up;
        else if (first !== up)
            orientations.push(up);
        // add down orientation
        if (first !== down)
            orientations.push(down);
        return orientations;
    };
    PasswordStrengthWidget.prototype.hideBubble = function () {
        window.gigya.global.removeGMBalloon();
        this.isBubbleVisible = false;
    };
    PasswordStrengthWidget.prototype.getPasswordBubbleContent = function () {
        var item = {
            TEXT: this.getText,
        };
        var oPassStrength = getPasswordStrengthData(String(this._passwordField.getValue()));
        var apiData = this._screenSet.getApiData();
        var oComplexity = apiData.getPolicies ? apiData.getPolicies.passwordComplexity : null;
        if (!oComplexity)
            oComplexity = {};
        oComplexity.minLength = oComplexity.minLength || 0;
        oComplexity.minCharGroups = oComplexity.minCharGroups || 0;
        if (this.displayMode.hasStrengthMeter) {
            var score = 0;
            var scoreTextID = 'too_weak';
            if (isPasswordStrengthValid(String(this._passwordField.getValue()), oPassStrength, oComplexity)) {
                scoreTextID = 'weak';
                if (oPassStrength.length > 4)
                    score += 40;
                if (oPassStrength.length > 5)
                    score += 21; // combines score = 61
                if (oPassStrength.length > 7)
                    score += 18; // combines score = 79
                if (oPassStrength.charGroups > 1)
                    score += 21;
                if (oPassStrength.charGroups > 2)
                    score += 17; // combines score += 38
                if (oPassStrength.charGroups > 3)
                    score += 23; // combines score += 61
                if (score > 60)
                    scoreTextID = 'fair';
                if (score > 80)
                    scoreTextID = 'strong';
                if (score > 100)
                    scoreTextID = 'very_strong';
            }
            item.score = score;
            item.scoreClass = 'gigya-passwordStrength-' + scoreTextID;
            item.scoreText = this._screenSet.getText(scoreTextID);
            item.barIndicatorClass = 'gigya-passwordStrength-bar-' + scoreTextID;
        }
        if (this.displayMode.hasMinimumRequirements) {
            var arRequirements = [];
            if (oComplexity.minLength > 0) {
                var minLengthText = this._screenSet.getText('num_characters_total', '%num', oComplexity.minLength);
                if (minLengthText)
                    arRequirements.push(minLengthText);
            }
            if (oComplexity.minCharGroups > 0) {
                var minCharGroupsText = this._screenSet.getText('num_of_the_following_groups', '%num', oComplexity.minCharGroups);
                if (minCharGroupsText)
                    arRequirements.push(minCharGroupsText);
            }
            item.requirements = '';
            if (arRequirements.length > 0) {
                var lastReq = arRequirements.pop();
                item.requirements = this._screenSet.getText('password_must_contain_at_least') + ' ';
                if (arRequirements.length > 0)
                    item.requirements += arRequirements.join(', ') + ' ' + this._screenSet.getText('and') + ' ';
                item.requirements += lastReq;
            }
            item.requirements = window.gigya.pluginUtils.text.fixTextWidows(item.requirements);
        }
        return window.gigya.utils.templates.fill(this.template, item);
    };
    PasswordStrengthWidget.prototype.updateBubbleDisplay = function () {
        if (!this.isBubbleVisible && !this.isPasswordInputEmpty()) {
            this.showBubble();
        }
        else if (this.isBubbleVisible && !this.isPasswordInputEmpty()) {
            this.updateBubbleContent();
        }
        else {
            this.hideBubble();
        }
    };
    PasswordStrengthWidget.prototype.updateBubbleContent = function () {
        var html = this.getPasswordBubbleContent();
        if (this.isBubble) {
            document.getElementById(this.bubbleID + '_content').innerHTML = html;
        }
        else {
            // inline display
            this.instanceElement.innerHTML = html;
            this.instanceElement.style.display = this.originalDisplay;
        }
    };
    PasswordStrengthWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.isBubble) {
            this.bubbleOrientation = BubbleOrientations[this.instanceElement.getAttribute(exports.PasswordStrengthWidget_CONSTS.bubbleOrientation)];
            if (typeof this.bubbleOrientation === 'undefined')
                this.bubbleOrientation = this._screenSet.isModal ? BubbleOrientations.left : BubbleOrientations.up;
        }
    };
    PasswordStrengthWidget.prototype.refreshBubble = function () {
        if (this.isBubbleVisible) {
            this.showBubble();
        }
    };
    PasswordStrengthWidget.CONSTS = exports.PasswordStrengthWidget_CONSTS;
    return PasswordStrengthWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.PasswordStrengthWidget = PasswordStrengthWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(PasswordStrengthWidget);
function passwordStrengthMatchToNumber(match) {
    if (match && match.length)
        return match.length;
    return 0;
}
function getPasswordStrengthData(pass) {
    if (!pass)
        pass = '';
    var oResult = {
        lower: passwordStrengthMatchToNumber(pass.match(/[a-z]/g)),
        upper: passwordStrengthMatchToNumber(pass.match(/[A-Z]/g)),
        digits: passwordStrengthMatchToNumber(pass.match(/\d/g)),
        specialChars: passwordStrengthMatchToNumber(pass.match(/[^\dA-Za-z]/g)),
        length: pass.length,
        charGroups: 0,
    };
    if (oResult.lower)
        oResult.charGroups++;
    if (oResult.upper)
        oResult.charGroups++;
    if (oResult.digits)
        oResult.charGroups++;
    if (oResult.specialChars)
        oResult.charGroups++;
    return oResult;
}
exports.getPasswordStrengthData = getPasswordStrengthData;
function isPasswordStrengthValid(pass, oPassStrength, oComplexityPolicy) {
    if (!pass || !oPassStrength || !oComplexityPolicy)
        return;
    if (oComplexityPolicy.regExp) {
        var regexFormat = new RegExp(oComplexityPolicy.regExp);
        if (!regexFormat.test(pass)) {
            return false;
        }
    }
    return !(oPassStrength.lower < oComplexityPolicy.minLowercase ||
        oPassStrength.upper < oComplexityPolicy.minUppercase ||
        oPassStrength.digits < oComplexityPolicy.minDigit ||
        oPassStrength.specialChars < oComplexityPolicy.minSpecialChars ||
        oPassStrength.charGroups < oComplexityPolicy.minCharGroups ||
        oPassStrength.length < oComplexityPolicy.minLength);
}
exports.isPasswordStrengthValid = isPasswordStrengthValid;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneAuthMethodWidget.ts":
/*!**************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneAuthMethodWidget.ts ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseAuthMethodWidget_1 = __webpack_require__(/*! ../BaseAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseAuthMethodWidget.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseOtpAuthMethodWidget_1 = __webpack_require__(/*! ../BaseOtpAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseOtpAuthMethodWidget.ts");
exports.PhoneOtpAuthMethodOtpWidget_CONSTS = tslib_1.__assign(tslib_1.__assign({}, BaseAuthMethodWidget_1.AuthMethod_CONSTS), { selector: '.gigya-link-accounts-form .gigya-auth-method[data-auth-method="phone"]' });
utils_1.DeepFreeze(exports.PhoneOtpAuthMethodOtpWidget_CONSTS);
var PhoneAuthMethodWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PhoneAuthMethodWidget, _super);
    function PhoneAuthMethodWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.fieldName = 'phoneCode';
        return _this;
    }
    Object.defineProperty(PhoneAuthMethodWidget.prototype, "initApiParams", {
        get: function () {
            var _a;
            return {
                lang: this.dataProvider.lang,
                phvToken: (_a = this.dataProvider.phone) === null || _a === void 0 ? void 0 : _a.lookup,
                regToken: null
            };
        },
        enumerable: true,
        configurable: true
    });
    PhoneAuthMethodWidget.CONSTS = exports.PhoneOtpAuthMethodOtpWidget_CONSTS;
    return PhoneAuthMethodWidget;
}(BaseOtpAuthMethodWidget_1.BaseOtpAuthMethodWidget));
exports.PhoneAuthMethodWidget = PhoneAuthMethodWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(PhoneAuthMethodWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneNumberWidget.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneNumberWidget.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var Utils_1 = __webpack_require__(/*! src/accounts/Gigya.Js.Plugin.Tfa/app/helpers/Utils */ "./src/accounts/Gigya.Js.Plugin.Tfa/app/helpers/Utils.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ./TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var Errors_1 = __webpack_require__(/*! ../Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ErrorDisplayElement_1 = __webpack_require__(/*! ../ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
var keypressValidationDelay = 1000;
var PhoneWidgetState;
(function (PhoneWidgetState) {
    PhoneWidgetState["Mobile"] = "mobile";
    PhoneWidgetState["Verification"] = "verification";
    PhoneWidgetState["Verified"] = "verified";
})(PhoneWidgetState || (PhoneWidgetState = {}));
var PhoneWidgetCodeState;
(function (PhoneWidgetCodeState) {
    PhoneWidgetCodeState["Sent"] = "sent";
    PhoneWidgetCodeState["Resend"] = "resend";
})(PhoneWidgetCodeState || (PhoneWidgetCodeState = {}));
exports.PhoneNumberWidget_CONSTS = {
    selector: '.gigya-phone-number-widget',
    verifyButtonClass: 'gigya-phone-verify-button',
    resendButtonCLass: 'gigya-phone-resend-button',
    phonePreviewClass: 'gigya-phone-number-preview',
    useAsIdentifierAttr: 'data-use-as-identifier',
    codeInputClass: 'gigya-phone-number-verification-code',
    phoneInputNumberClass: 'gigya-subscriber-phone-number-input',
    countryCodeInputClass: 'gigya-country-code-select',
    verifiedStatusClass: 'gigya-phone-verified-status',
    resendBlockedLabelClass: 'gigya-phone-resend-blocked',
    linkDisabledClass: 'gigya-disabled',
    errorMessageClass: 'gigya-error-msg',
    placeholderTextAttribute: 'data-gigya-placeholder',
    gigyaHiddenClass: 'gigya-hidden',
    placeholderAttribute: 'placeholder',
    widgetStateAttribute: 'data-widget-state',
    requiredAttribute: 'data-widget-required',
    codeStateAttributes: 'data-widget-code-state',
    displayNameAttribute: 'data-display-name',
    translationKeyAttribute: 'data-translation-key',
    resendBlockDefaultLabelAttr: 'data-resend-blocked-default-label',
    phoneNumberFieldName: 'phoneNumber',
    resendCountTemplate: '%sec',
    disableVerifyInSeconds: 10,
    otpCodeLength: 6,
    deps: [TranslatedWidget_1.TranslatedWidget]
};
utils_1.DeepFreeze(exports.PhoneNumberWidget_CONSTS);
var PhoneNumberWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PhoneNumberWidget, _super);
    function PhoneNumberWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.debounceDelay = _this._screenSet.params['debounceDelay'] || keypressValidationDelay;
        return _this;
    }
    PhoneNumberWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.isIdentifierMode) {
            this.init();
            this.startFlow();
        }
    };
    PhoneNumberWidget.prototype.unlinkInstanceElement = function () {
        var _a;
        _super.prototype.unlinkInstanceElement.call(this);
        if (this.resendTimeoutId) {
            clearTimeout(this.resendTimeoutId);
        }
        (_a = this.errorDisplayEl) === null || _a === void 0 ? void 0 : _a.unlinkInstanceElement();
    };
    PhoneNumberWidget.prototype.renderWidget = function () {
        var _a;
        _super.prototype.renderWidget.call(this);
        if (this.isIdentifierMode) {
            (_a = this.codeInputEl) === null || _a === void 0 ? void 0 : _a.setAttribute(PhoneNumberWidget.CONSTS.placeholderAttribute, this.codePlaceholder);
        }
    };
    PhoneNumberWidget.prototype.validateAsync = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var errorMessage, error;
            return tslib_1.__generator(this, function (_a) {
                if (!this.isRequired()) {
                    return [2 /*return*/, gigya.Promise.resolve({
                            errorCode: GSErrors_1.GSErrors.OK,
                            widget: this
                        })];
                }
                if (this.verifiedFormNumber) {
                    return [2 /*return*/, gigya.Promise.resolve({
                            errorCode: GSErrors_1.GSErrors.OK,
                            widget: this
                        })];
                }
                errorMessage = this.getErrorText(this.requiredErrorKey);
                this.showErrorMessage(errorMessage);
                error = {
                    errorCode: GSErrors_1.GSErrors.REQUIRED_VALUE_VALIDATION_ERROR,
                    widget: this,
                    errorType: Errors_1.ErrorType.custom,
                    errorMessage: errorMessage
                };
                return [2 /*return*/, gigya.Promise.resolve(error)];
            });
        });
    };
    PhoneNumberWidget.prototype.isRequired = function () {
        return this.instanceElement.hasAttribute(exports.PhoneNumberWidget_CONSTS.requiredAttribute);
    };
    PhoneNumberWidget.prototype.init = function () {
        var _this = this;
        this.addButtonHandler(this.phonePreviewEl, function () { return _this.showPhoneNumberStep(true); });
        this.addDomEventListener(this.codeInputEl, 'keyup', window.gigya.utils.functions.debounce(function () { return _this.onCodeInputChange(); }, this.debounceDelay));
        this.addDomEventListener(this.phoneInputEl, 'keyup', window.gigya.utils.functions.debounce(function () { return _this.onPhoneInputChange(); }, this.debounceDelay));
        this.addDomEventListener(this.countryCodeEl, 'change', function () { return _this.onPhoneInputChange(); });
        this.errorDisplayEl = new ErrorDisplayElement_1.ErrorDisplayElement(this.errorMessageEl, this._screen);
        this.errorDisplayEl.linkInstanceElement(this._screen.instanceElement);
    };
    PhoneNumberWidget.prototype.startFlow = function () {
        if (this.accountPhoneNumber) {
            this.showExistingPhoneNumber();
        }
        else {
            this.showPhoneNumberStep();
        }
    };
    PhoneNumberWidget.prototype.hideVerifiedMessage = function () {
        var messageEl = this.instanceElement.querySelector("." + exports.PhoneNumberWidget_CONSTS.verifiedStatusClass);
        if (messageEl) {
            window.gigya.utils.DOM.addClassToElement(messageEl, exports.PhoneNumberWidget_CONSTS.gigyaHiddenClass);
        }
    };
    Object.defineProperty(PhoneNumberWidget.prototype, "isIdentifierMode", {
        get: function () {
            return this.instanceElement.getAttribute(exports.PhoneNumberWidget_CONSTS.useAsIdentifierAttr) === 'true';
        },
        enumerable: true,
        configurable: true
    });
    PhoneNumberWidget.prototype.showPhoneNumberStep = function (focus) {
        if (focus === void 0) { focus = false; }
        this.switchToState(PhoneWidgetState.Mobile);
        this.toggleVerify();
        if (focus) {
            this.countryCodeEl.focus();
        }
    };
    PhoneNumberWidget.prototype.showVerificationStep = function () {
        this.switchToState(PhoneWidgetState.Verification);
        this.enableCodeInput();
        this.onCodeSent();
        this.codeInputEl.focus();
        this.phonePreviewEl.innerText = this.phoneNumberMasked;
        this.codeInputEl.value = '';
    };
    PhoneNumberWidget.prototype.showVerificationState = function () {
        this.switchToState(PhoneWidgetState.Verified);
    };
    PhoneNumberWidget.prototype.showPhoneVerified = function () {
        var _a;
        (_a = this.verifiedPhoneNumberField) === null || _a === void 0 ? void 0 : _a.setValue(this.phoneNumber, true);
        this.showVerificationState();
    };
    PhoneNumberWidget.prototype.showExistingPhoneNumber = function () {
        var _a;
        (_a = this.verifiedPhoneNumberField) === null || _a === void 0 ? void 0 : _a.setValue(this.accountPhoneNumber, true);
        this.hideVerifiedMessage();
        this.showVerificationState();
    };
    PhoneNumberWidget.prototype.switchToState = function (state) {
        this.hideErrorMessage();
        this.instanceElement.setAttribute(exports.PhoneNumberWidget_CONSTS.widgetStateAttribute, state);
    };
    PhoneNumberWidget.prototype.onCodeSent = function () {
        this.disableResend(exports.PhoneNumberWidget_CONSTS.disableVerifyInSeconds);
        this.startResendCountDown(exports.PhoneNumberWidget_CONSTS.disableVerifyInSeconds);
    };
    PhoneNumberWidget.prototype.startResendCountDown = function (count) {
        var _this = this;
        if (count) {
            this.changeResendBlockedMessage(count);
            this.resendTimeoutId = setTimeout(function () { return _this.startResendCountDown(count - 1); }, 1000);
        }
        else {
            this.enableResendCode();
        }
    };
    PhoneNumberWidget.prototype.changeResendBlockedMessage = function (count) {
        this.resendBlockedEl.innerText = this.getCountDownText(count);
    };
    PhoneNumberWidget.prototype.getCountDownText = function (count) {
        var _a;
        if (this.resendCountDownTranslationKey) {
            return this._screenSet.getText(this.resendCountDownTranslationKey, exports.PhoneNumberWidget_CONSTS.resendCountTemplate, count);
        }
        return (_a = this.resendCountdownDefaultLabel) === null || _a === void 0 ? void 0 : _a.replace(exports.PhoneNumberWidget_CONSTS.resendCountTemplate, count);
    };
    PhoneNumberWidget.prototype.disableResend = function (count) {
        this.changeResendBlockedMessage(count);
        this.instanceElement.setAttribute(exports.PhoneNumberWidget_CONSTS.codeStateAttributes, PhoneWidgetCodeState.Sent);
    };
    PhoneNumberWidget.prototype.enableResendCode = function () {
        var _this = this;
        this.instanceElement.setAttribute(exports.PhoneNumberWidget_CONSTS.codeStateAttributes, PhoneWidgetCodeState.Resend);
        this.addButtonHandler(this.resendButtonEl, function () { return _this.resendCodeHandler(); });
    };
    PhoneNumberWidget.prototype.onPhoneInputChange = function () {
        if (!this.verifyButtonEl) {
            return;
        }
        this.hideErrorMessage();
        this.toggleVerify();
    };
    PhoneNumberWidget.prototype.toggleVerify = function () {
        if (this.phoneNumberWithoutCode && this.countryCode) {
            this.enableVerifyButton();
        }
        else {
            this.disableVerifyButton();
        }
    };
    PhoneNumberWidget.prototype.enableVerifyButton = function () {
        var _this = this;
        this.verifyButtonEl.classList.remove(exports.PhoneNumberWidget_CONSTS.linkDisabledClass);
        this.addButtonHandler(this.verifyButtonEl, function () { return _this.verifyButtonClickHandler(); }, 'verifyButtonClick');
    };
    PhoneNumberWidget.prototype.disableVerifyButton = function () {
        this.verifyButtonEl.classList.add(exports.PhoneNumberWidget_CONSTS.linkDisabledClass);
        this.removeDomEventListener('verifyButtonClick');
    };
    PhoneNumberWidget.prototype.onCodeInputChange = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var res;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.hideErrorMessage();
                        if (!(this.codeInputEl.value.length === 6)) return [3 /*break*/, 2];
                        this.disableCodeInput();
                        return [4 /*yield*/, this.otpUpdate(this.codeInputEl.value, this.vToken)];
                    case 1:
                        res = _a.sent();
                        if (res.errorCode === GSErrors_1.GSErrors.OK) {
                            this.showPhoneVerified();
                        }
                        else {
                            this.enableCodeInput();
                            this.displayError(res);
                        }
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    PhoneNumberWidget.prototype.resendCodeHandler = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var res;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.otpSendCode()];
                    case 1:
                        res = _a.sent();
                        if (res.errorCode === GSErrors_1.GSErrors.OK) {
                            this.setVToken(res['vToken']);
                            this.onCodeSent();
                        }
                        else {
                            this.displayError(res);
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    PhoneNumberWidget.prototype.verifyButtonClickHandler = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var res;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.disableVerifyScreen();
                        return [4 /*yield*/, this.otpSendCode()];
                    case 1:
                        res = _a.sent();
                        this.enableVerifyScreen();
                        if (res.errorCode === GSErrors_1.GSErrors.OK) {
                            this.setVToken(res['vToken']);
                            this.showVerificationStep();
                        }
                        else {
                            this.displayError(res);
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    PhoneNumberWidget.prototype.disableVerifyScreen = function () {
        this.countryCodeEl.disabled = true;
        this.phoneInputEl.disabled = true;
        this.disableVerifyButton();
    };
    PhoneNumberWidget.prototype.enableVerifyScreen = function () {
        this.countryCodeEl.disabled = false;
        this.phoneInputEl.disabled = false;
        this.enableVerifyButton();
    };
    PhoneNumberWidget.prototype.setVToken = function (vToken) {
        this.vToken = vToken;
    };
    PhoneNumberWidget.prototype.otpUpdate = function (code, vToken) {
        return new gigya.Promise(function (resolve) {
            window.gigya.accounts.otp.update({
                code: code,
                vToken: vToken,
                callback: function (res) { return resolve(res); }
            });
        });
    };
    PhoneNumberWidget.prototype.otpSendCode = function () {
        var _this = this;
        return new gigya.Promise(function (resolve) {
            window.gigya.accounts.otp.sendCode({
                phoneNumber: _this.phoneNumber,
                callback: function (res) { return resolve(res); }
            });
        });
    };
    PhoneNumberWidget.prototype.displayError = function (response) {
        var errorText = this.getErrorTextFromResponse(response);
        this.showErrorMessage(errorText, response.errorCode);
    };
    PhoneNumberWidget.prototype.showErrorMessage = function (text, errorCode) {
        if (errorCode === void 0) { errorCode = GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE; }
        this.errorDisplayEl.showError({
            errorMessage: text,
            errorCode: errorCode
        });
    };
    PhoneNumberWidget.prototype.hideErrorMessage = function () {
        this.errorDisplayEl.hideError();
    };
    PhoneNumberWidget.prototype.getErrorKeyFromResponse = function (response) {
        var errorCode = Number(response.errorCode);
        if (errorCode === GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE && response.errorDetails) {
            if (utils_1.endsWith(response.errorDetails, 'Token has been revoked')) {
                return 'otp_code_expired';
            }
            if (utils_1.endsWith(response.errorDetails, 'phoneNumber already exists')) {
                return 'phone_number_exists';
            }
            if (utils_1.endsWith(response.errorDetails, 'code')) {
                return 'please_enter_a_valid_code';
            }
            if (utils_1.endsWith(response.errorDetails, 'Invalid parameter value : phoneNumber')) {
                return 'invalid_fieldname';
            }
        }
        if (errorCode === GSErrors_1.GSErrors.FORBIDDEN) {
            return 'forbidden_error';
        }
        if (errorCode === GSErrors_1.GSErrors.FREQUENCY_LIMIT_REACHED) {
            return 'code_frequency_limit_reached';
        }
        if (errorCode === GSErrors_1.GSErrors.PERMISSION_DENIED) {
            return 'unauthorized_user';
        }
        return null;
    };
    PhoneNumberWidget.prototype.enableCodeInput = function () {
        this.codeInputEl.disabled = false;
    };
    PhoneNumberWidget.prototype.disableCodeInput = function () {
        this.codeInputEl.disabled = true;
    };
    Object.defineProperty(PhoneNumberWidget.prototype, "accountPhoneNumber", {
        get: function () {
            var _a, _b;
            return (_b = (_a = this._screenSet.getApiData()) === null || _a === void 0 ? void 0 : _a.getAccountInfo) === null || _b === void 0 ? void 0 : _b.phoneNumber;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "verifyButtonEl", {
        get: function () {
            return Utils_1.getElementByClassName(this.instanceElement, exports.PhoneNumberWidget_CONSTS.verifyButtonClass);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "resendButtonEl", {
        get: function () {
            return Utils_1.getElementByClassName(this.instanceElement, exports.PhoneNumberWidget_CONSTS.resendButtonCLass);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "phonePreviewEl", {
        get: function () {
            return Utils_1.getElementByClassName(this.instanceElement, exports.PhoneNumberWidget_CONSTS.phonePreviewClass);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "codeInputEl", {
        get: function () {
            return Utils_1.getElementByClassName(this.instanceElement, exports.PhoneNumberWidget_CONSTS.codeInputClass);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "phoneInputEl", {
        get: function () {
            return Utils_1.getElementByClassName(this.instanceElement, exports.PhoneNumberWidget_CONSTS.phoneInputNumberClass);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "countryCodeEl", {
        get: function () {
            return Utils_1.getElementByClassName(this.instanceElement, exports.PhoneNumberWidget_CONSTS.countryCodeInputClass);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "phoneNumber", {
        get: function () {
            return this.countryCode ? "" + this.countryCode + this.phoneNumberWithoutCode : null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "phoneNumberMasked", {
        get: function () {
            var maskedSymbols = this.phoneNumber.slice(0, this.phoneNumber.length - 2).split('').map(function () { return '*'; }).join('');
            var visibleSymbols = this.phoneNumber.slice(-2);
            return "" + maskedSymbols + visibleSymbols;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "phoneNumberWithoutCode", {
        get: function () {
            var _a, _b;
            var number = (_b = (_a = this.phoneInputEl) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.replace(/\s/gm, ''); // remove whitespace
            if (this.countryCode !== '+39') { // Italy (phone must start with 0)
                number = number === null || number === void 0 ? void 0 : number.replace(/^0+/, '');
            }
            return number;
        },
        enumerable: true,
        configurable: true
    });
    PhoneNumberWidget.prototype.isCurrentState = function (state) {
        return this.instanceElement.getAttribute(exports.PhoneNumberWidget_CONSTS.widgetStateAttribute) === state;
    };
    Object.defineProperty(PhoneNumberWidget.prototype, "countryCode", {
        get: function () {
            var _a, _b;
            return ((_a = this.countryCodeEl) === null || _a === void 0 ? void 0 : _a.value) === '0' ? '' : (_b = this.countryCodeEl) === null || _b === void 0 ? void 0 : _b.value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "codePlaceholder", {
        get: function () {
            return this.codeInputEl.getAttribute(exports.PhoneNumberWidget_CONSTS.placeholderTextAttribute);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "errorMessageEl", {
        get: function () {
            return this.instanceElement.querySelector("." + exports.PhoneNumberWidget_CONSTS.errorMessageClass);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "verifiedFormNumber", {
        get: function () {
            return this.verifiedPhoneNumberField.getValue();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "verifiedPhoneNumberField", {
        get: function () {
            var _a;
            return (_a = this._form) === null || _a === void 0 ? void 0 : _a.getField(exports.PhoneNumberWidget_CONSTS.phoneNumberFieldName);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "resendBlockedEl", {
        get: function () {
            return this.instanceElement.querySelector("." + exports.PhoneNumberWidget_CONSTS.resendBlockedLabelClass);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "resendCountDownTranslationKey", {
        get: function () {
            return this.resendBlockedEl.getAttribute(exports.PhoneNumberWidget_CONSTS.translationKeyAttribute);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "resendCountdownDefaultLabel", {
        get: function () {
            return this.resendBlockedEl.getAttribute(exports.PhoneNumberWidget_CONSTS.resendBlockDefaultLabelAttr);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PhoneNumberWidget.prototype, "requiredErrorKey", {
        get: function () {
            if (this.isCurrentState(PhoneWidgetState.Verification)) {
                return 'phone_not_verified_enter_code';
            }
            if (this.isCurrentState(PhoneWidgetState.Mobile)) {
                if (this.phoneNumber) {
                    return 'phone_not_verified';
                }
                return 'this_field_is_required';
            }
        },
        enumerable: true,
        configurable: true
    });
    PhoneNumberWidget.CONSTS = exports.PhoneNumberWidget_CONSTS;
    return PhoneNumberWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.PhoneNumberWidget = PhoneNumberWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(PhoneNumberWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseUploadWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts");
var BaseServerWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var nextDownloadContext = 0;
exports.PhotoUploadWidget_CONSTS = {
    selector: 'div.gigya-photo-upload',
};
utils_1.DeepFreeze(exports.PhotoUploadWidget_CONSTS);
var PhotoUploadWidget = /** @class */ (function (_super) {
    tslib_1.__extends(PhotoUploadWidget, _super);
    function PhotoUploadWidget(_form, el) {
        var _this = _super.call(this, _form, el) || this;
        _this.photoElementID = _this._uploadIframeID + '_photo';
        _this.pathContainerID = _this._uploadIframeID + '_path';
        _this.defaultBGImage = window.gigya._.getCdnResource() + '/gs/i/accounts/avatar_64.png'; // TODO This should be replaced by CSS
        var template = _this._screenSet.getTemplates().photoUpload_ui;
        _this.uiHtml = window.gigya.utils.templates.fill(template, {
            pathContainerID: _this.pathContainerID,
            photoElementID: _this.photoElementID,
            choose_file: _this._screenSet.getText('choose_file'),
            no_file_chosen: _this._screenSet.getText('no_file_chosen'),
            tip: _this._screenSet.getText('maximum_size_of_3mb.') + ' JPG, GIF, PNG.',
        });
        el.innerHTML = '';
        if (window.gigya.localInfo.isIE9 || window.gigya.localInfo.isIE8) {
            _this._form.filters.push({
                filterOutWidgetsToSend: function (dataToFilter) {
                    if (dataToFilter.profile) {
                        delete dataToFilter.profile._profilePhoto;
                    }
                    return dataToFilter;
                },
            });
        }
        return _this;
    }
    PhotoUploadWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        // add instance ui
        this.uiDiv = document.createElement('div');
        this.uiDiv.innerHTML = this.uiHtml;
        this.instanceElement.appendChild(this.uiDiv);
        this.restoreDefaultBg();
    };
    PhotoUploadWidget.prototype.unlinkInstanceElement = function () {
        this.instanceElement.removeChild(this.uiDiv);
        this.uiDiv = null;
        _super.prototype.unlinkInstanceElement.call(this);
    };
    PhotoUploadWidget.prototype.restoreDefaultBg = function () {
        var elPhoto = document.getElementById(this.photoElementID);
        if (elPhoto)
            elPhoto.style.backgroundImage = "url('" + this.defaultBGImage + "')";
    };
    PhotoUploadWidget.prototype.getFormHtml = function () {
        return window.gigya.utils.templates.fill(this._screenSet.getTemplates().photoUpload_form, {
            formTarget: this._uploadIframeID,
        });
    };
    PhotoUploadWidget.prototype.getFormElement = function () {
        return this._formDiv.getElementsByTagName('form')[0];
    };
    PhotoUploadWidget.prototype.getFileElement = function () {
        return this._uploadForm.elements['_profilePhoto'];
    };
    PhotoUploadWidget.prototype.submitUploadForm = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var formAction, _a, _b, _c, _d, _e, pathElement;
            return tslib_1.__generator(this, function (_f) {
                switch (_f.label) {
                    case 0:
                        // set up new action & responseId
                        this.lastResponseId = this._uploadIframeID + '_' + this._lastQueryId;
                        _b = (_a = window.gigya.utils.stringUtils).format;
                        _c = ["https://" + window.gigya._.getApiDomain('accounts') + "/accounts.uploadProfilePhoto?publish=true&context={0}&saveResponseID={0}&{1}",
                            this.lastResponseId];
                        _e = (_d = window.gigya.utils.keyValue).serialize;
                        return [4 /*yield*/, this.getServerParameters()];
                    case 1:
                        formAction = _b.apply(_a, _c.concat([_e.apply(_d, [_f.sent()])]));
                        this._uploadForm.action = formAction;
                        pathElement = document.getElementById(this.pathContainerID);
                        pathElement.style.backgroundImage = "url('" + window.gigya._.getCdnResource() + "/gs/i/accounts/smallLoader.gif')";
                        _super.prototype.submitUploadForm.call(this);
                        return [2 /*return*/];
                }
            });
        });
    };
    PhotoUploadWidget.prototype.serverQueryDone = function (newState) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var params, _a, _b;
            var _this = this;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        this.stopUploadCheck();
                        _b = (_a = window.gigya.utils.object).removeUndefined;
                        return [4 /*yield*/, this.getServerParameters()];
                    case 1:
                        params = _b.apply(_a, [_c.sent()]);
                        params.saveResponseID = this.lastResponseId;
                        params.noAuth = true;
                        delete params.login_token;
                        delete params.regToken;
                        window.gigya._.apiAdapter.sendRequest('socialize.getSavedResponse', params, function (res) { return tslib_1.__awaiter(_this, void 0, void 0, function () { return tslib_1.__generator(this, function (_a) {
                            switch (_a.label) {
                                case 0: return [4 /*yield*/, this.onUploadSavedResponse(res)];
                                case 1: return [2 /*return*/, _a.sent()];
                            }
                        }); }); }, {
                            jsSdkRequestId: this.lastResponseId,
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    PhotoUploadWidget.prototype.onUploadSavedResponse = function (res) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var pathElement, _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        pathElement = document.getElementById(this.pathContainerID);
                        pathElement.style.backgroundImage = '';
                        _a = res.errorCode;
                        switch (_a) {
                            case GSErrors_1.GSErrors.OK: return [3 /*break*/, 1];
                            case GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE: return [3 /*break*/, 3];
                        }
                        return [3 /*break*/, 4];
                    case 1: return [4 /*yield*/, this.onUploadSuccess()];
                    case 2:
                        _b.sent();
                        return [3 /*break*/, 5];
                    case 3:
                        this.onServerError({
                            errorCode: GSErrors_1.GSErrors.PROFILE_PHOTO_TOO_LARGE,
                            errorMessage: this._screenSet.getText('profilePhoto_fileSizeError'),
                        });
                        return [3 /*break*/, 5];
                    case 4:
                        // Any other error
                        this.onServerError(res);
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    PhotoUploadWidget.prototype.onUploadSuccess = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var elPath, getProfilePhotoParams, img, thumbnailUrlDomain, thumbnailUrl;
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        elPath = document.getElementById(this.pathContainerID);
                        if (elPath)
                            elPath.style.backgroundImage = '';
                        return [4 /*yield*/, this.getServerParameters()];
                    case 1:
                        getProfilePhotoParams = _a.sent();
                        getProfilePhotoParams.type = 'thumbnail';
                        getProfilePhotoParams.context = this._uploadIframeID + ++nextDownloadContext;
                        img = new Image();
                        thumbnailUrlDomain = window.gigya._.getApiDomain('accounts');
                        thumbnailUrl = (getProfilePhotoParams.login_token || getProfilePhotoParams.regToken ? 'https' : window.gigya.localInfo.protocol) + "://" + thumbnailUrlDomain + "/accounts.getProfilePhoto?" + window.gigya.utils.keyValue.serialize(getProfilePhotoParams);
                        img.onload = function () {
                            var elPhoto = document.getElementById(_this.photoElementID);
                            var imageUrl = img.src;
                            if (elPhoto)
                                elPhoto.style.backgroundImage = "url('" + imageUrl + "')";
                            _this._form._screen.setProfilePhoto(imageUrl);
                            img = img.onload = img.onerror = null; // remove memory leak
                        };
                        img.onerror = function () {
                            _this.onServerError({
                                errorCode: GSErrors_1.GSErrors.RESOURCE_NOT_FOUND,
                                errorMessage: 'Profile photo inaccesible.',
                            });
                            _this._form._screen.setProfilePhoto('');
                            img = img.onload = img.onerror = null; // remove memory leak
                        };
                        img.src = thumbnailUrl;
                        _super.prototype.serverQueryDone.call(this, BaseServerWidget_1.ServerStates.Done);
                        return [2 /*return*/];
                }
            });
        });
    };
    PhotoUploadWidget.prototype.onServerError = function (response) {
        this.restoreDefaultBg();
        this._form._screen._screenSet.onScreenResponse(response, this._form);
        _super.prototype.serverQueryDone.call(this, BaseServerWidget_1.ServerStates.Error);
    };
    PhotoUploadWidget.CONSTS = exports.PhotoUploadWidget_CONSTS;
    return PhotoUploadWidget;
}(BaseUploadWidget_1.BaseUploadWidget));
exports.PhotoUploadWidget = PhotoUploadWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(PhotoUploadWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
exports.ProfilePhotoWidget_CONSTS = {
    selector: 'div.gigya-profile-photo',
};
utils_1.DeepFreeze(exports.ProfilePhotoWidget_CONSTS);
var ProfilePhotoWidget = /** @class */ (function (_super) {
    tslib_1.__extends(ProfilePhotoWidget, _super);
    function ProfilePhotoWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _screen._profilePhotos.push(_this);
        return _this;
    }
    ProfilePhotoWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        var profile = this._screenSet.getProfile();
        var thumbnailURL = profile.thumbnailURL ? window.gigya.global.getPhotoURL(profile.thumbnailURL) : '';
        this.setThumbnailUrl(thumbnailURL);
    };
    ProfilePhotoWidget.prototype.setThumbnailUrl = function (thumbnailURL) {
        this.instanceElement.innerHTML = thumbnailURL ? '<img src="' + thumbnailURL + '" />' : '';
    };
    ProfilePhotoWidget.CONSTS = exports.ProfilePhotoWidget_CONSTS;
    return ProfilePhotoWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.ProfilePhotoWidget = ProfilePhotoWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(ProfilePhotoWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget.ts":
/*!**************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget.ts ***!
  \**************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FlagService_1 = __webpack_require__(/*! ./../../../../core/Gigya.Js/app/Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var ScreenSetPlugin_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts");
exports.RequiredDisplayWidget_CONSTS = {
    selector: '.gigya-required-display',
    boundTo: 'data-bound-to',
    alwaysVisible: 'gigya-required-display-always-visible'
};
utils_1.DeepFreeze(exports.RequiredDisplayWidget_CONSTS);
var RequiredDisplayWidget = /** @class */ (function (_super) {
    tslib_1.__extends(RequiredDisplayWidget, _super);
    function RequiredDisplayWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        // The asterisk may be hidden by default. We'll replace this with the gigya-hidden class.
        if (el.style.display === 'none') {
            el.style.display = '';
        }
        // WCAG: Don't read the asterisk to user when using screen reader.
        // The form element has aria-required which will convey to the user that the field is required.
        el.setAttribute('aria-hidden', 'true');
        el.removeAttribute('for');
        return _this;
    }
    RequiredDisplayWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.updateVisibility();
    };
    RequiredDisplayWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        this.updateVisibility();
    };
    RequiredDisplayWidget.prototype.updateBoundedField = function (field) {
        this.boundTo = this.instanceElement.getAttribute(exports.RequiredDisplayWidget_CONSTS.boundTo);
        this.boundToField = field;
    };
    RequiredDisplayWidget.prototype.updateVisibility = function () {
        var el = this.instanceElement;
        if (!el)
            return;
        if (el.getAttribute(exports.RequiredDisplayWidget_CONSTS.alwaysVisible) === "true") {
            this.show();
            return;
        }
        this.boundTo = el.getAttribute(exports.RequiredDisplayWidget_CONSTS.boundTo);
        if (!this.boundTo) {
            this.warn(exports.RequiredDisplayWidget_CONSTS.selector + " is missing " + exports.RequiredDisplayWidget_CONSTS.boundTo + " attribute");
            this.hide();
            return;
        }
        this.boundToField = this._form.getField(this.boundTo, this.instanceElement.getAttribute(FormInput_1.FormInput_CONSTS.arrayKeyValueAttribute), FlagService_1.FlagService.getOnlyVisibleField);
        if (!this.boundToField) {
            this.warn(exports.RequiredDisplayWidget_CONSTS.selector + "'s form is missing field " + this.boundTo + " to bound to");
            this.hide();
            return;
        }
        this.boundToField.evaluateConditionalAttributes();
        if (this.boundToField.required()) {
            this.show();
        }
        else {
            this.hide();
        }
    };
    RequiredDisplayWidget.prototype.show = function () {
        window.gigya.utils.DOM.removeClassFromElement(this.instanceElement, ScreenSetPlugin_1.ScreenSet_CONSTS.gigyaHidden);
    };
    RequiredDisplayWidget.prototype.hide = function () {
        window.gigya.utils.DOM.addClassToElement(this.instanceElement, ScreenSetPlugin_1.ScreenSet_CONSTS.gigyaHidden);
    };
    RequiredDisplayWidget.CONSTS = exports.RequiredDisplayWidget_CONSTS;
    return RequiredDisplayWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.RequiredDisplayWidget = RequiredDisplayWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(RequiredDisplayWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget.ts":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget.ts ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var TemplateElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
exports.SecretQuestionWidget_CONSTS = {
    selector: 'div.gigya-secret-question',
    allowEmpty: 'data-allow-empty',
};
utils_1.DeepFreeze(exports.SecretQuestionWidget_CONSTS);
var SecretQuestionWidget = /** @class */ (function (_super) {
    tslib_1.__extends(SecretQuestionWidget, _super);
    function SecretQuestionWidget(form, el) {
        var _this = _super.call(this, form, el, false) || this;
        _this.questions = new Array();
        form._secretQuestions.push(_this);
        var questionElements = el.querySelectorAll('*[name="secretQuestion"]');
        utils_1.ForEach(questionElements, function (questionEl) { return _this.questions.push(new QuestionElement(questionEl, _this)); });
        _this.answerField = form.getField('secretAnswer');
        if (!_this.answerField) {
            _this.warn(exports.SecretQuestionWidget_CONSTS.selector + "'s form is missing secretAnswer field to link to");
            return _this;
        }
        return _this;
    }
    SecretQuestionWidget.prototype.unlinkTemplate = function () {
        utils_1.ForEach(this.questions, function (q) { return q.unlinkTemplate(); });
        _super.prototype.unlinkTemplate.call(this);
    };
    SecretQuestionWidget.prototype.linkInstanceElement = function (parent) {
        var _this = this;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            if (this.answerField)
                this.answerField.instanceElement.setAttribute(exports.SecretQuestionWidget_CONSTS.allowEmpty, '1'); // TODO perhaps use a different value
            utils_1.ForEach(this.questions, function (q) { return q.linkInstanceElement(_this.instanceElement); });
        }
    };
    SecretQuestionWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement)
            utils_1.ForEach(this.questions, function (q) { return q.unlinkInstanceElement(); });
        _super.prototype.unlinkInstanceElement.call(this);
    };
    SecretQuestionWidget.prototype.setQuestion = function (question) {
        utils_1.ForEach(this.questions, function (q) { return (q.instanceElement.innerHTML = question); });
        if (this.answerField)
            this.answerField.instanceElement.removeAttribute(exports.SecretQuestionWidget_CONSTS.allowEmpty);
        this.instanceElement.style.display = 'inline'; // TODO why this is needed
    };
    SecretQuestionWidget.CONSTS = exports.SecretQuestionWidget_CONSTS;
    return SecretQuestionWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.SecretQuestionWidget = SecretQuestionWidget;
var QuestionElement = /** @class */ (function (_super) {
    tslib_1.__extends(QuestionElement, _super);
    function QuestionElement(el, parent) {
        return _super.call(this, el, parent) || this;
    }
    return QuestionElement;
}(TemplateElement_1.TemplateElement));
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(SecretQuestionWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var LoginModes_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var BaseForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var GSErrors_1 = __webpack_require__(/*! ../../../../core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var linkAccountsHelper_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper */ "./src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts");
var nextGeneratedContainerId = 0;
exports.SocialLoginWidget_CONSTS = {
    selector: 'div.gigya-social-login',
};
utils_1.DeepFreeze(exports.SocialLoginWidget_CONSTS);
var SocialLoginWidget = /** @class */ (function (_super) {
    tslib_1.__extends(SocialLoginWidget, _super);
    function SocialLoginWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _this.bindID = _this.publishID ? _this.ID : exports.SocialLoginWidget_CONSTS.selector;
        _this.loginMode = LoginModes_1.LoginModes[_this.params['loginMode'] || 'standard'];
        _this.containerId = _this._screenSet.containerID + '_social_' + nextGeneratedContainerId++; // TODO Change use the same id for the same screenSet instance, regardless of how many times it is reused, unlike existing implementation that uses a new id each time
        _this.onErrorResponse = function (e) {
            // Hot fix for "no providers" error that goes into the infinite loop - see #44285
            // Hot fix for "invalid parameter" - see #56153
            if (e.errorCode !== GSErrors_1.GSErrors.NO_PROVIDERS && e.errorCode !== GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE) {
                if (Number(e.errorCode) === GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS) {
                    _this._screenSet.data.shouldConnectAccounts = true;
                }
                var event = _this.getProviderSessionInfo(e);
                return _this._screenSet.onScreenResponse(event, _this);
            }
        };
        _this.onLoginResponse = function (e) {
            _this._screenSet.removeRegToken();
            _this._screenSet.data.shouldConnectAccounts = true;
            _this._screenSet.onScreenResponse({ errorCode: 0, event: e }, _this);
        };
        return _this;
    }
    SocialLoginWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            while (this.instanceElement.firstChild) {
                // clearing the instance element. Notice this is faster than innerHTML=''.
                this.instanceElement.removeChild(this.instanceElement.firstChild);
            }
            this._container = document.createElement('div');
            this._container.className = 'gigya-social-login-container';
            this._container.id = this.containerId;
            this.instanceElement.appendChild(this._container);
            this.calculateEnabledProviders();
            this.apiParams = this.loginMode.filterParams(window.gigya.utils.object.clone(this._screenSet.params));
            if (!this.params['containerID']) {
                this.widgetParams = this.params;
                this.renderWidget();
            }
        }
    };
    /**
     * Surface errors in containing form.
     */
    SocialLoginWidget.prototype.getErrorDisplayForm = function () {
        return this._screen.getFormByElement(this.instanceElement);
    };
    /// Override from TemplateElement
    SocialLoginWidget.prototype.initFromInstanceElement = function () {
        this.successScreen = this._screenSet.chooseNextScreen(this.instanceElement.getAttribute(BaseForm_1.Form_CONSTS.successScreen));
    };
    SocialLoginWidget.prototype.calculateEnabledProviders = function () {
        var loginProviders = this.loginMode.getLoginProviders(this._screenSet.data.apiData, this.params, this._screenSet.data.regToken);
        if (loginProviders !== null && typeof loginProviders !== 'undefined')
            this.params['enabledProviders'] = loginProviders;
    };
    SocialLoginWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement)
            this.instanceElement.innerHTML = ''; // To make sure no ID conflicts will be generated
        if (this._instance)
            this._instance.dispose();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    SocialLoginWidget.prototype.renderWidget = function () {
        var _this = this;
        this.prepareWidgetParams();
        // because rendering the widget is async, we set the container size to take room accordingly - so the screenset will center correctly.
        this.setContainerSize(this.widgetParams['width'], this.widgetParams['height']);
        //re-render plugin and call the plugin API again with the new parameters after the conditionals.
        window.gigya.socialize.showLoginUI(this.apiParams, this.widgetParams, {
            containerID: this.containerId,
            accountsSocialLogin: true,
            onLogin: this.onLoginResponse,
            onError: this.onErrorResponse,
            finalizeRegistration: true,
            dontHandleScreenSet: true,
            UIMode: this.loginMode !== LoginModes_1.LoginModes.link ? 'Login' : 'LinkAccount',
            include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data,emails,subscriptions,preferences', this._screenSet.params.include),
            regSource: this._screenSet.params.regSource || utils_1.firstPart(utils_1.firstPart(location.href, '?'), '#'),
            getInstance: function (instances) {
                _this._instance = instances;
            },
        });
        this.renderWidgetUI = false;
    };
    SocialLoginWidget.prototype.prepareWidgetParams = function () {
        this.params.conflictHandling = this.getConflictHandlingFailParam();
        if (this.params.loginMode === 'link' && this.shouldLinkAccounts) {
            this.apiParams['suppressLoginEvent'] = true;
        }
    };
    SocialLoginWidget.prototype.getConflictHandlingFailParam = function () {
        if (this.params.conflictHandling) {
            return this.params.conflictHandling;
        }
        if (window.gigya.utils.toggles.isOn('linkAccountV2')) {
            return 'fail';
        }
        return undefined;
    };
    Object.defineProperty(SocialLoginWidget.prototype, "shouldLinkAccounts", {
        get: function () {
            return this.params.conflictHandling === 'fail' && this._screenSet.hasProviderSessionInfo;
        },
        enumerable: true,
        configurable: true
    });
    SocialLoginWidget.prototype.setContainerSize = function (width, height) {
        if (width) {
            var widthUnits = utils_1.getUnitMeasurementType(width);
            if (widthUnits != utils_1.UnitMeasurementType.auto)
                this._container.style.width = parseFloat(width) + widthUnits;
        }
        if (height) {
            var heightUnits = utils_1.getUnitMeasurementType(height);
            if (heightUnits != utils_1.UnitMeasurementType.auto)
                this._container.style.height = parseFloat(height) + heightUnits;
        }
    };
    SocialLoginWidget.prototype.getProviderSessionInfo = function (interruptionResponse) {
        if (interruptionResponse.errorCode != GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS) {
            return interruptionResponse;
        }
        var response = interruptionResponse.response;
        var providerSessionInfo = linkAccountsHelper_1.extractProviderInfoFromResponse(response);
        return tslib_1.__assign(tslib_1.__assign({}, interruptionResponse), { response: tslib_1.__assign(tslib_1.__assign({}, response), { providerSessionInfo: providerSessionInfo }) });
    };
    SocialLoginWidget.CONSTS = exports.SocialLoginWidget_CONSTS;
    return SocialLoginWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.SocialLoginWidget = SocialLoginWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(SocialLoginWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget.ts":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget.ts ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseFormWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ProfileForm_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts");
exports.SubscriptionWidget_CONSTS = {
    selector: 'div.gigya-subscription',
    subscriptionName: 'name',
};
utils_1.DeepFreeze(exports.SubscriptionWidget_CONSTS);
var SubscriptionWidget = /** @class */ (function (_super) {
    tslib_1.__extends(SubscriptionWidget, _super);
    function SubscriptionWidget(form, el) {
        var _this = _super.call(this, form, el) || this;
        _this._shouldPopulate = form instanceof ProfileForm_1.ProfileForm;
        return _this;
    }
    SubscriptionWidget.prototype.linkInstanceElement = function (parent) {
        var _a;
        _super.prototype.linkInstanceElement.call(this, parent);
        if (this.instanceElement) {
            // subscription name: subscription.<name>.<channel>
            var subscriptionName = (_a = this.instanceElement.getAttribute(SubscriptionWidget.CONSTS.subscriptionName)) === null || _a === void 0 ? void 0 : _a.split('.');
            subscriptionName === null || subscriptionName === void 0 ? void 0 : subscriptionName.shift(); // remove preceding subscriptions
            this.subscriptionObj = {
                channel: subscriptionName === null || subscriptionName === void 0 ? void 0 : subscriptionName.pop(),
                name: subscriptionName === null || subscriptionName === void 0 ? void 0 : subscriptionName.join('.'),
            };
            var checked = this.templateElement.hasAttribute('data-checked');
            if (this._shouldPopulate) {
                var subscriptionsInfo = this._screenSet.getApiData().getAccountInfo;
                var subscriptionData = window.gigya.utils.object.getPropertyBySerializedName(subscriptionsInfo === null || subscriptionsInfo === void 0 ? void 0 : subscriptionsInfo.subscriptions, this.subscriptionObj.name, false);
                if (subscriptionData) {
                    var channel = subscriptionData[this.subscriptionObj.channel];
                    if (channel) {
                        if (channel.hasOwnProperty('isSubscribed')) {
                            checked = channel['isSubscribed'];
                        }
                        if (channel.hasOwnProperty('doubleOptIn') && channel['doubleOptIn']['status'].toLowerCase() === 'pending') {
                            this._statusElement = document.createElement('div');
                            this._statusElement.className = 'subscription-status-label';
                            this._statusElement.style.paddingLeft = '18px';
                            this._statusElement.style.color = 'grey';
                            this._statusElement.style.fontStyle = 'italic';
                            this._statusElement.innerText = this._screenSet.getText('subscription_pending_confirmation');
                        }
                    }
                }
            }
            this.inputElement = document.createElement('input');
            this.inputElement.id = "subs-checkbox-" + this.subscriptionObj.name;
            this.inputElement.name = "subscriptions." + this.subscriptionObj.name + "." + this.subscriptionObj.channel + ".isSubscribed";
            this.inputElement.className = 'gigya-input-checkbox subscription-checkbox';
            this.inputElement.type = 'checkbox';
            this.inputElement.checked = checked;
            this._labelElement = document.createElement('label');
            this._labelElement.className = 'subscription-name-label';
            this._labelElement.style.display = 'inline-block';
            this._labelElement.style.verticalAlign = 'middle';
            this._labelElement.style.paddingLeft = '5px';
            this._labelElement.setAttribute('for', this.inputElement.id);
            this._container = document.createElement('div');
            this._container.className = 'subs-widget-container';
            //add checkbox
            this._container.appendChild(this.inputElement);
            //add label near checkbox
            this._container.appendChild(this._labelElement);
            //add 'pending' status element
            if (this._statusElement) {
                this._container.appendChild(this._statusElement);
            }
            this.instanceElement.appendChild(this._container);
            this.renderWidget();
        }
    };
    SubscriptionWidget.prototype.renderWidget = function () {
        _super.prototype.renderWidget.call(this);
        var text = !this.instanceElement ? '' : this.instanceElement.getAttribute('data-label');
        this._labelElement.innerHTML = this.evaluate(text);
    };
    SubscriptionWidget.CONSTS = exports.SubscriptionWidget_CONSTS;
    return SubscriptionWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.SubscriptionWidget = SubscriptionWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(SubscriptionWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationBaseItemWidget.ts":
/*!***************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationBaseItemWidget.ts ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var CardListItemWidget_1 = __webpack_require__(/*! ../../CardListItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListItemWidget.ts");
var TfaEventService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaEventService */ "./src/core/Gigya.Js/app/TFA/TfaEventService.ts");
var TfaGigyaAssertionService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService */ "./src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var errorMessageUtil_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorMessageUtil */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorMessageUtil.ts");
var expandableWidget_1 = __webpack_require__(/*! ../../../utils/expandableWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/expandableWidget.ts");
var errorEventUtil_1 = __webpack_require__(/*! ../../../utils/errorEventUtil */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorEventUtil.ts");
exports.TFABaseItem_CONSTS = {
    sendButtonSelector: '.gigya-tfa-verification-action-btn',
    submitButtonSelector: '.gigya-input-submit',
    resendButtonSelector: '.gigya-tfa-resend-code',
    expandedAttribute: 'data-device-expanded',
    errorMessageSelector: '.gigya-error-msg[data-bound-to="tfaVerificationWidget"]',
    errorActiveMessageClass: 'gigya-error-msg-active',
    rememberDeviceSelector: '.gigya-remember-device-checkbox input',
    symbolsPlaceholder: '%lastSymbols',
    codeInputSelector: '.gigya-code-input',
    nameAttr: 'name',
    boundToAttr: 'data-bound-to',
    inputErrorSelector: '.gigya-input-error',
    ariaLabelAttr: 'aria-label',
    containerClass: 'gigya-container',
    containerEnabledClass: 'gigya-container-enabled',
};
var TFAVerificationBaseItemWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TFAVerificationBaseItemWidget, _super);
    function TFAVerificationBaseItemWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.expandedStateAttribute = exports.TFABaseItem_CONSTS.expandedAttribute;
        _this.verifyCode = function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {
            var isValid, verifyCodeResponse, _a, _b, _c, _d, e_1;
            var _this = this;
            return tslib_1.__generator(this, function (_e) {
                switch (_e.label) {
                    case 0: return [4 /*yield*/, this.validateChildField(this.codeFormField)];
                    case 1:
                        isValid = _e.sent();
                        if (!isValid) {
                            return [2 /*return*/];
                        }
                        this._screenSet.data.finalizeRegistrationNeeded = true;
                        this._screenSet.dimScreenSet();
                        _e.label = 2;
                    case 2:
                        _e.trys.push([2, 8, 9, 10]);
                        return [4 /*yield*/, this.verifyCodeApi()];
                    case 3:
                        verifyCodeResponse = _e.sent();
                        if (!(verifyCodeResponse.errorCode === GSErrors_1.GSErrors.OK)) return [3 /*break*/, 6];
                        _b = (_a = this._form).submit;
                        _c = {
                            customSubmitApi: window.gigya.accounts.tfa.finalizeTFA
                        };
                        _d = {};
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 4: return [4 /*yield*/, _b.apply(_a, [(_c.submitApiParams = (_d.gigyaAssertion = _e.sent(),
                                _d.providerAssertion = verifyCodeResponse['providerAssertion'],
                                _d.tempDevice = !this.rememberDevice,
                                _d.regToken = this._screenSet.regToken,
                                _d),
                                _c.onAfterSubmitCallback = function (response) {
                                    if (response.errorCode != GSErrors_1.GSErrors.OK) {
                                        _this.showMessage(response);
                                    }
                                },
                                _c)])];
                    case 5:
                        _e.sent();
                        return [3 /*break*/, 7];
                    case 6:
                        this.handleError({ response: verifyCodeResponse });
                        _e.label = 7;
                    case 7: return [3 /*break*/, 10];
                    case 8:
                        e_1 = _e.sent();
                        this.handleError({
                            response: { errorCode: GSErrors_1.GSErrors.GENERAL_SERVER_ERROR },
                            context: e_1
                        });
                        return [3 /*break*/, 10];
                    case 9:
                        this._screenSet.undimScreenSet();
                        return [7 /*endfinally*/];
                    case 10: return [2 /*return*/];
                }
            });
        }); };
        return _this;
    }
    TFAVerificationBaseItemWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        this.initErrorHandling();
                        this.collapse();
                        this.addEventHandlers();
                        this.updateCodeAriaLabel();
                        this.addResendButtonHandlers();
                        return [4 /*yield*/, this.activateHighRiskDevice()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationBaseItemWidget.prototype.expand = function () {
        expandableWidget_1.changeExpandedState(this.instanceElement, this.expandedStateAttribute, true);
    };
    TFAVerificationBaseItemWidget.prototype.collapse = function () {
        expandableWidget_1.changeExpandedState(this.instanceElement, this.expandedStateAttribute, false);
    };
    TFAVerificationBaseItemWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        TfaEventService_1.default.unsubscribe('changeActiveDevice');
    };
    TFAVerificationBaseItemWidget.prototype.updateFormElementsWithCardIndex = function () {
        var _a, _b, _c, _d;
        var inputNameAtt = (_a = this.codeInputEl) === null || _a === void 0 ? void 0 : _a.getAttribute(exports.TFABaseItem_CONSTS.nameAttr);
        var indexedNameAttribute = inputNameAtt + "_" + this.indexStr;
        (_c = (_b = this.instanceElement) === null || _b === void 0 ? void 0 : _b.querySelector(exports.TFABaseItem_CONSTS.inputErrorSelector)) === null || _c === void 0 ? void 0 : _c.setAttribute(exports.TFABaseItem_CONSTS.boundToAttr, indexedNameAttribute);
        (_d = this.codeInputEl) === null || _d === void 0 ? void 0 : _d.setAttribute(exports.TFABaseItem_CONSTS.nameAttr, indexedNameAttribute);
    };
    TFAVerificationBaseItemWidget.prototype.activateHighRiskDevice = function () {
        var _a, _b;
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(((_b = (_a = this._screenSet.data) === null || _a === void 0 ? void 0 : _a.tfaProviders) === null || _b === void 0 ? void 0 : _b.highestRiskProvider) === this.providerName && this.isFirstItem())) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.automaticallyActivateDevice()];
                    case 1:
                        _c.sent();
                        _c.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationBaseItemWidget.prototype.isFirstItem = function () {
        return this.indexInt === 0;
    };
    TFAVerificationBaseItemWidget.prototype.automaticallyActivateDevice = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.activateDevice()];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.sendCode()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationBaseItemWidget.prototype.updateCodeAriaLabel = function () {
        if (this.codeInputAriaLabel) {
            this.codeInputAriaLabel = this.codeInputAriaLabel.replace(exports.TFABaseItem_CONSTS.symbolsPlaceholder, this.lastSymbols);
        }
    };
    Object.defineProperty(TFAVerificationBaseItemWidget.prototype, "sendButton", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TFABaseItem_CONSTS.sendButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationBaseItemWidget.prototype, "submitButton", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TFABaseItem_CONSTS.submitButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    TFAVerificationBaseItemWidget.prototype.activateDevice = function () {
        TfaEventService_1.default.activateDevice(this.providerName, this.elementId);
    };
    TFAVerificationBaseItemWidget.prototype.showMessage = function (message) {
        this.errorMessageElem.classList.add(exports.TFABaseItem_CONSTS.errorActiveMessageClass);
        this.errorMessageElem.innerText = message;
    };
    Object.defineProperty(TFAVerificationBaseItemWidget.prototype, "codeInputAriaLabel", {
        get: function () {
            return this.codeInput.getAttribute(exports.TFABaseItem_CONSTS.ariaLabelAttr);
        },
        set: function (value) {
            this.codeInput.setAttribute(exports.TFABaseItem_CONSTS.ariaLabelAttr, value);
        },
        enumerable: true,
        configurable: true
    });
    TFAVerificationBaseItemWidget.prototype.hideMessage = function () {
        this.errorMessageElem.classList.remove(exports.TFABaseItem_CONSTS.errorActiveMessageClass);
    };
    TFAVerificationBaseItemWidget.prototype.getErrorKeyFromResponse = function (response) {
        return errorMessageUtil_1.getOtpErrorMessage(response);
    };
    TFAVerificationBaseItemWidget.prototype.addEventHandlers = function () {
        var _this = this;
        TfaEventService_1.default.on('changeActiveDevice', function (params) { return _this.onDeviceActivated(params); });
        this.addActionButtonEventHandlers();
        this.addButtonHandler(this.submitButton, function () { return _this.verifyCode(); });
        this.submitOnEnter(this.codeInput, this.submitButton);
        this.submitOnEnter(this.rememberDeviceCheckboxEl, this.submitButton);
    };
    TFAVerificationBaseItemWidget.prototype.addActionButtonEventHandlers = function () {
        var _this = this;
        this.addButtonHandler(this.sendButton, function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.sendCode()];
                    case 1:
                        _a.sent();
                        this.activateDevice();
                        return [2 /*return*/];
                }
            });
        }); });
    };
    TFAVerificationBaseItemWidget.prototype.onDeviceActivated = function (_a) {
        var deviceId = _a.deviceId, provider = _a.provider;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_b) {
                if (provider === this.providerName && deviceId === this.elementId) {
                    this.expand();
                    this.codeInput.focus();
                    this.startCountDown();
                }
                else {
                    this.collapse();
                }
                return [2 /*return*/];
            });
        });
    };
    TFAVerificationBaseItemWidget.prototype.initErrorHandling = function () {
        var _a, _b;
        this.errorMessageElem = (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TFABaseItem_CONSTS.errorMessageSelector);
        (_b = this.errorMessageElem) === null || _b === void 0 ? void 0 : _b.classList.add(exports.TFABaseItem_CONSTS.errorActiveMessageClass);
    };
    TFAVerificationBaseItemWidget.prototype.sendCode = function (params) {
        if (params === void 0) { params = {}; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var response;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.hideMessage();
                        return [4 /*yield*/, this.sendCodeApi(params)];
                    case 1:
                        response = _a.sent();
                        if (response.errorCode === GSErrors_1.GSErrors.OK) {
                            this._screenSet.data.tfaProviders.phvToken = response['phvToken'];
                        }
                        else {
                            this.handleError({ response: response });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationBaseItemWidget.prototype.handleError = function (_a) {
        var response = _a.response, context = _a.context;
        this.displayErrorMessage(response);
        errorEventUtil_1.dispatchErrorEvent(this._screen, this._form.bindID, { response: response, context: context });
    };
    TFAVerificationBaseItemWidget.prototype.displayErrorMessage = function (response) {
        var errorMessage = this.getErrorTextFromResponse(response);
        this.renderError(errorMessage);
    };
    TFAVerificationBaseItemWidget.prototype.renderError = function (message) {
        this.errorMessageElem.classList.add(exports.TFABaseItem_CONSTS.errorActiveMessageClass);
        this.errorMessageElem.innerText = message;
    };
    TFAVerificationBaseItemWidget.prototype.getGigyaAssertion = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, TfaGigyaAssertionService_1.default.getAssertion(types_1.TfaMode.verify, this.providerName, {
                        regToken: this._screenSet.regToken,
                    })];
            });
        });
    };
    Object.defineProperty(TFAVerificationBaseItemWidget.prototype, "rememberDevice", {
        get: function () {
            var _a;
            return (_a = this.rememberDeviceCheckboxEl) === null || _a === void 0 ? void 0 : _a.checked;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationBaseItemWidget.prototype, "rememberDeviceCheckboxEl", {
        get: function () {
            return this.instanceElement.querySelector(exports.TFABaseItem_CONSTS.rememberDeviceSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationBaseItemWidget.prototype, "codeInputEl", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TFABaseItem_CONSTS.codeInputSelector);
        },
        enumerable: true,
        configurable: true
    });
    return TFAVerificationBaseItemWidget;
}(CardListItemWidget_1.CardListItemWidget));
exports.TFAVerificationBaseItemWidget = TFAVerificationBaseItemWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationBaseListWidget.ts":
/*!***************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationBaseListWidget.ts ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var TfaGigyaAssertionService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService */ "./src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService.ts");
var CardListFormWidget_1 = __webpack_require__(/*! ../../../CardListFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/CardListFormWidget.ts");
var TFAVerificationBaseListWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TFAVerificationBaseListWidget, _super);
    function TFAVerificationBaseListWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.itemId = 'id';
        return _this;
    }
    TFAVerificationBaseListWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        this._screen._hasTfa = true;
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationBaseListWidget.prototype.getGigyaAssertion = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, TfaGigyaAssertionService_1.default.getAssertion(types_1.TfaMode.verify, this.providerName, {
                        regToken: this._screenSet.regToken,
                    })];
            });
        });
    };
    TFAVerificationBaseListWidget.prototype.isActiveProvider = function () {
        var _this = this;
        return this._screenSet.data.tfaProviders.activeProviders.some(function (activeProvider) { return activeProvider.name === _this.providerName; });
    };
    return TFAVerificationBaseListWidget;
}(CardListFormWidget_1.CardListFormWidget));
exports.TFAVerificationBaseListWidget = TFAVerificationBaseListWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationWidget.ts":
/*!*******************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationWidget.ts ***!
  \*******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseScreenWidget_1 = __webpack_require__(/*! ../../../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
exports.TFAVerification_CONSTS = {
    selector: '.gigya-composite-control-tfa-verification-widget'
};
var TFAVerificationWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TFAVerificationWidget, _super);
    function TFAVerificationWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _this._screen._hasTfa = true;
        return _this;
    }
    TFAVerificationWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.init()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationWidget.prototype.init = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var getProviderRes;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this._screenSet.dimScreenSet();
                        this._screenSet.data.finalizeRegistrationNeeded = false;
                        this._screen._hasTfa = true;
                        if (!this._screenSet.regToken) return [3 /*break*/, 2];
                        return [4 /*yield*/, apis_1.fetchAvailableProviders({
                                regToken: this._screenSet.regToken
                            })];
                    case 1:
                        getProviderRes = _a.sent();
                        this._screenSet.data.tfaProviders.activeProviders = getProviderRes === null || getProviderRes === void 0 ? void 0 : getProviderRes.activeProviders;
                        this._screenSet.undimScreenSet();
                        this.getHighestRiskProvider();
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
    };
    TFAVerificationWidget.prototype.getHighestRiskProvider = function () {
        var providersArray = this._screenSet.data.tfaProviders.activeProviders.map(function (provider) { return types_1.TfaRiskOrderedProviders[provider.name]; });
        var highestRiskProvider = Math.max.apply(Math, providersArray);
        this._screenSet.data.tfaProviders.highestRiskProvider = types_1.TfaRiskOrderedProviders[highestRiskProvider];
    };
    TFAVerificationWidget.CONSTS = exports.TFAVerification_CONSTS;
    return TFAVerificationWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.TFAVerificationWidget = TFAVerificationWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(TFAVerificationWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailItemWidget.ts":
/*!**********************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailItemWidget.ts ***!
  \**********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var TFAVerificationBaseItemWidget_1 = __webpack_require__(/*! ../TFAVerificationBaseItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationBaseItemWidget.ts");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ApiLinkHelper_1 = __webpack_require__(/*! ../../../../ApiLinkHelper */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ApiLinkHelper.ts");
exports.TFAEmailItem_CONSTS = tslib_1.__assign(tslib_1.__assign({}, TFAVerificationBaseItemWidget_1.TFABaseItem_CONSTS), { codeInputSelector: '.gigya-code-input.gigya-input-text', selector: '.gigya-tfa-verification-method[data-tfa-method="email"] .gigya-card' });
var TFAVerificationEmailItemWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TFAVerificationEmailItemWidget, _super);
    function TFAVerificationEmailItemWidget(_form, el, _domUtils) {
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        var _this = _super.call(this, _form, el) || this;
        _this._domUtils = _domUtils;
        _this.providerName = types_1.TfaProvider.email;
        _this.bindID = _this.ID || exports.TFAEmailItem_CONSTS.selector;
        return _this;
    }
    TFAVerificationEmailItemWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.resendLinkHelper.destroy();
    };
    TFAVerificationEmailItemWidget.prototype.sendCodeApi = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = apis_1.sendEmailVerificationCode;
                        _b = {
                            emailID: this.email['id'],
                            method: this.email['lastMethod'],
                            regToken: this._screenSet.regToken
                        };
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 1: return [2 /*return*/, _a.apply(void 0, [(_b.gigyaAssertion = _c.sent(),
                                _b.lang = this._screenSet.params.communicationLang,
                                _b)])];
                }
            });
        });
    };
    TFAVerificationEmailItemWidget.prototype.verifyCodeApi = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = apis_1.sendEmailCompleteVerification;
                        _b = {
                            code: this.codeInput.value
                        };
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 1: return [2 /*return*/, _a.apply(void 0, [(_b.gigyaAssertion = _c.sent(),
                                _b.phvToken = this._screenSet.data.tfaProviders.phvToken,
                                _b)])];
                }
            });
        });
    };
    TFAVerificationEmailItemWidget.prototype.addResendButtonHandlers = function () {
        var _this = this;
        this.resendLinkHelper = new ApiLinkHelper_1.ApiLinkHelper(this.resendButton, function () { return _this.sendCode(); });
    };
    Object.defineProperty(TFAVerificationEmailItemWidget.prototype, "codeInput", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TFAEmailItem_CONSTS.codeInputSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationEmailItemWidget.prototype, "email", {
        get: function () {
            var _a, _b, _c;
            return (_c = (_b = (_a = this._screenSet.data) === null || _a === void 0 ? void 0 : _a.tfaProviders) === null || _b === void 0 ? void 0 : _b.emails) === null || _c === void 0 ? void 0 : _c[this.indexStr];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationEmailItemWidget.prototype, "lastSymbols", {
        get: function () {
            var _a, _b, _c;
            var matches = (_b = (_a = this.email) === null || _a === void 0 ? void 0 : _a.email) === null || _b === void 0 ? void 0 : _b.match(/(\*)+(?<lastSymbols>.+)$/);
            return (_c = matches === null || matches === void 0 ? void 0 : matches.groups) === null || _c === void 0 ? void 0 : _c.lastSymbols;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationEmailItemWidget.prototype, "codeFormField", {
        get: function () {
            var _a;
            return (_a = this._form) === null || _a === void 0 ? void 0 : _a.getField("emailCode_" + this.indexStr);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationEmailItemWidget.prototype, "resendButton", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(TFAVerificationBaseItemWidget_1.TFABaseItem_CONSTS.resendButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    TFAVerificationEmailItemWidget.prototype.startCountDown = function () {
        this.resendLinkHelper.init();
    };
    TFAVerificationEmailItemWidget.CONSTS = exports.TFAEmailItem_CONSTS;
    return TFAVerificationEmailItemWidget;
}(TFAVerificationBaseItemWidget_1.TFAVerificationBaseItemWidget));
exports.TFAVerificationEmailItemWidget = TFAVerificationEmailItemWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TFAVerificationEmailItemWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailListWidget.ts":
/*!**********************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailListWidget.ts ***!
  \**********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var TFAVerificationBaseListWidget_1 = __webpack_require__(/*! ../TFAVerificationBaseListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationBaseListWidget.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ../../../TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.TFAEmailList_CONSTS = {
    selector: '.gigya-tfa-verification-method.tfa-email-method',
    deps: [TranslatedWidget_1.TranslatedWidget]
};
var TFAVerificationEmailListWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TFAVerificationEmailListWidget, _super);
    function TFAVerificationEmailListWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.providerName = types_1.TfaProvider.email;
        return _this;
    }
    TFAVerificationEmailListWidget.prototype.reloadData = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var assertion, getEmailsResponse;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this._screenSet.regToken && this.isActiveProvider())) return [3 /*break*/, 3];
                        this._screenSet.dimScreenSet();
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 1:
                        assertion = _a.sent();
                        return [4 /*yield*/, apis_1.fetchTfaEmailList(assertion)];
                    case 2:
                        getEmailsResponse = _a.sent();
                        this._screenSet.undimScreenSet();
                        this._screenSet.data.tfaProviders.emails = this.getDataFromListResponse(getEmailsResponse);
                        this.showList();
                        return [2 /*return*/, this._screenSet.data.tfaProviders.emails];
                    case 3: return [2 /*return*/, []];
                }
            });
        });
    };
    TFAVerificationEmailListWidget.prototype.getDataFromListResponse = function (res) {
        return res.emails.map(function (email) { return ({ email: email.obfuscated, id: email.id }); });
    };
    TFAVerificationEmailListWidget.CONSTS = exports.TFAEmailList_CONSTS;
    return TFAVerificationEmailListWidget;
}(TFAVerificationBaseListWidget_1.TFAVerificationBaseListWidget));
exports.TFAVerificationEmailListWidget = TFAVerificationEmailListWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TFAVerificationEmailListWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneItemWidget.ts":
/*!**********************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneItemWidget.ts ***!
  \**********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var TFAVerificationBaseItemWidget_1 = __webpack_require__(/*! ../TFAVerificationBaseItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationBaseItemWidget.ts");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var ApiCountdownHelper_1 = __webpack_require__(/*! ../../../../ApiCountdownHelper */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ApiCountdownHelper.ts");
exports.TFAPhoneItem_CONSTS = tslib_1.__assign(tslib_1.__assign({}, TFAVerificationBaseItemWidget_1.TFABaseItem_CONSTS), { selector: '.gigya-tfa-verification-method[data-tfa-method="phone"] .gigya-card', codeInputSelector: '.gigya-code-input.gigya-input-text', sendSMSButtonSelector: '.gigya-tfa-verification-action-btn[data-method="sms"]', sendVoiceButtonSelector: '.gigya-tfa-verification-action-btn[data-method="voice"]', resendButtonSelectorSms: '.gigya-tfa-resend-code[data-method="sms"]', resendButtonSelectorVoice: '.gigya-tfa-resend-code[data-method="voice"]', countDownSelector: '.gigya-api-countdown', gigyaHiddenClass: 'gigya-hidden' });
var TFAVerificationPhoneItemWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TFAVerificationPhoneItemWidget, _super);
    function TFAVerificationPhoneItemWidget(_form, el, _domUtils) {
        if (_domUtils === void 0) { _domUtils = window.gigya.utils.DOM; }
        var _this = _super.call(this, _form, el) || this;
        _this._domUtils = _domUtils;
        _this.providerName = types_1.TfaProvider.phone;
        _this.bindID = _this.ID || exports.TFAPhoneItem_CONSTS.selector;
        return _this;
    }
    TFAVerificationPhoneItemWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        this.countdownHelper.destroy();
    };
    TFAVerificationPhoneItemWidget.prototype.sendCode = function (params) {
        if (params === void 0) { params = { method: types_1.TfaPhoneSendCodeMethod.sms }; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.sendCode.call(this, params)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationPhoneItemWidget.prototype.sendCodeApi = function (params) {
        if (params === void 0) { params = { method: types_1.TfaPhoneSendCodeMethod.sms }; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = apis_1.sendPhoneVerificationCode;
                        _b = {
                            phoneID: this.phone['id'],
                            method: params.method,
                            regToken: this._screenSet.regToken
                        };
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 1: return [2 /*return*/, _a.apply(void 0, [(_b.gigyaAssertion = _c.sent(),
                                _b.lang = this._screenSet.params.communicationLang,
                                _b)])];
                }
            });
        });
    };
    TFAVerificationPhoneItemWidget.prototype.addActionButtonEventHandlers = function () {
        var _this = this;
        this.addButtonHandler(this.sendSmsButton, function () { return _this.onSendButtonClicked(types_1.TfaPhoneSendCodeMethod.sms); });
        this.addButtonHandler(this.sendVoiceButton, function () { return _this.onSendButtonClicked(types_1.TfaPhoneSendCodeMethod.voice); });
    };
    TFAVerificationPhoneItemWidget.prototype.addResendButtonHandlers = function () {
        var _this = this;
        this.countdownHelper = new ApiCountdownHelper_1.ApiCountdownHelper(this.countDownEl);
        this.addButtonHandler(this.resendSmsButton, function () { return _this.onResendButtonClick(types_1.TfaPhoneSendCodeMethod.sms); });
        this.addButtonHandler(this.resendVoiceButton, function () { return _this.onResendButtonClick(types_1.TfaPhoneSendCodeMethod.voice); });
    };
    TFAVerificationPhoneItemWidget.prototype.onSendButtonClicked = function (method) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.sendCode({ method: method })];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.activateDevice()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationPhoneItemWidget.prototype.onResendButtonClick = function (method) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.sendCode({ method: method })];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.startCountDown()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationPhoneItemWidget.prototype.automaticallyActivateDevice = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var method;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        method = this.phone['lastMethod'] || types_1.TfaPhoneSendCodeMethod.sms;
                        return [4 /*yield*/, this.activateDevice()];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.sendCode({ method: method })];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationPhoneItemWidget.prototype.startCountDown = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.resendButtons.forEach(function (el) { return el.classList.add(exports.TFAPhoneItem_CONSTS.gigyaHiddenClass); });
                        return [4 /*yield*/, this.countdownHelper.startCountdown()];
                    case 1:
                        _a.sent();
                        this.resendButtons.forEach(function (el) { return el.classList.remove(exports.TFAPhoneItem_CONSTS.gigyaHiddenClass); });
                        return [2 /*return*/];
                }
            });
        });
    };
    TFAVerificationPhoneItemWidget.prototype.verifyCodeApi = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a, _b;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = apis_1.sendPhoneCompleteVerification;
                        _b = {
                            code: this.codeInput.value
                        };
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 1: return [2 /*return*/, _a.apply(void 0, [(_b.gigyaAssertion = _c.sent(),
                                _b.phvToken = this._screenSet.data.tfaProviders.phvToken,
                                _b)])];
                }
            });
        });
    };
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "codeInput", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TFAPhoneItem_CONSTS.codeInputSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "phone", {
        get: function () {
            var _a, _b, _c;
            return (_c = (_b = (_a = this._screenSet.data) === null || _a === void 0 ? void 0 : _a.tfaProviders) === null || _b === void 0 ? void 0 : _b.phones) === null || _c === void 0 ? void 0 : _c[this.indexStr];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "lastSymbols", {
        get: function () {
            var _a, _b, _c;
            var matches = (_b = (_a = this.phone) === null || _a === void 0 ? void 0 : _a.phoneNumber) === null || _b === void 0 ? void 0 : _b.match(/(?<lastSymbols>\d.+)$/);
            return (_c = matches === null || matches === void 0 ? void 0 : matches.groups) === null || _c === void 0 ? void 0 : _c.lastSymbols;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "codeFormField", {
        get: function () {
            var _a;
            return (_a = this._form) === null || _a === void 0 ? void 0 : _a.getField("phoneCode_" + this.indexStr);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "sendSmsButton", {
        get: function () {
            return this.instanceElement.querySelector(exports.TFAPhoneItem_CONSTS.sendSMSButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "sendVoiceButton", {
        get: function () {
            return this.instanceElement.querySelector(exports.TFAPhoneItem_CONSTS.sendVoiceButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "resendButtons", {
        get: function () {
            if (this.resendVoiceButton) {
                return [this.resendSmsButton, this.resendVoiceButton];
            }
            return [this.resendSmsButton];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "resendSmsButton", {
        get: function () {
            return this.instanceElement.querySelector(exports.TFAPhoneItem_CONSTS.resendButtonSelectorSms);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "resendVoiceButton", {
        get: function () {
            return this.instanceElement.querySelector(exports.TFAPhoneItem_CONSTS.resendButtonSelectorVoice);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TFAVerificationPhoneItemWidget.prototype, "countDownEl", {
        get: function () {
            return this.instanceElement.querySelector(exports.TFAPhoneItem_CONSTS.countDownSelector);
        },
        enumerable: true,
        configurable: true
    });
    TFAVerificationPhoneItemWidget.CONSTS = exports.TFAPhoneItem_CONSTS;
    return TFAVerificationPhoneItemWidget;
}(TFAVerificationBaseItemWidget_1.TFAVerificationBaseItemWidget));
exports.TFAVerificationPhoneItemWidget = TFAVerificationPhoneItemWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TFAVerificationPhoneItemWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneListWidget.ts":
/*!**********************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneListWidget.ts ***!
  \**********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var TFAVerificationBaseListWidget_1 = __webpack_require__(/*! ../TFAVerificationBaseListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationBaseListWidget.ts");
var phoneNumberUtil_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil */ "./src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.TFAPhoneList_CONSTS = {
    selector: '.gigya-tfa-verification-method.tfa-phone-method',
};
var TFAVerificationPhoneListWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TFAVerificationPhoneListWidget, _super);
    function TFAVerificationPhoneListWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.providerName = types_1.TfaProvider.phone;
        return _this;
    }
    TFAVerificationPhoneListWidget.prototype.reloadData = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var assertion, getPhonesResponse;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this._screenSet.regToken && this.isActiveProvider())) return [3 /*break*/, 3];
                        this._screenSet.dimScreenSet();
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 1:
                        assertion = _a.sent();
                        return [4 /*yield*/, apis_1.fetchTfaPhoneList(assertion)];
                    case 2:
                        getPhonesResponse = _a.sent();
                        this._screenSet.undimScreenSet();
                        this._screenSet.data.tfaProviders.phones = this.getDataFromListResponse(getPhonesResponse);
                        this.showList();
                        return [2 /*return*/, this._screenSet.data.tfaProviders.phones];
                    case 3: return [2 /*return*/, []];
                }
            });
        });
    };
    TFAVerificationPhoneListWidget.prototype.getDataFromListResponse = function (res) {
        return res.phones.map(function (phone) { return ({
            id: phone.id,
            lastMethod: phone.lastMethod,
            phoneNumber: phoneNumberUtil_1.formatObfuscatedPhoneNumber(phone),
        }); });
    };
    TFAVerificationPhoneListWidget.CONSTS = exports.TFAPhoneList_CONSTS;
    return TFAVerificationPhoneListWidget;
}(TFAVerificationBaseListWidget_1.TFAVerificationBaseListWidget));
exports.TFAVerificationPhoneListWidget = TFAVerificationPhoneListWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TFAVerificationPhoneListWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementItemBase.ts":
/*!****************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementItemBase.ts ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var CardListItemWidget_1 = __webpack_require__(/*! ../CardListItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CardListItemWidget.ts");
var TfaManagementService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaManagementService */ "./src/core/Gigya.Js/app/TFA/TfaManagementService.ts");
var TranslatedWidget_1 = __webpack_require__(/*! ../TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
exports.TfaManagementItemBase_CONSTS = {
    deleteDialogButtonSelector: '.gigya-remove-tfa-device-icon',
    removeButtonSelector: '.gigya-button-delete',
    deleteDialogCancelButtonSelector: '.gigya-button-cancel',
    deleteDialogClass: 'gigya-icon-clicked',
    deps: [TranslatedWidget_1.TranslatedWidget]
};
var TfaManagementItemBase = /** @class */ (function (_super) {
    tslib_1.__extends(TfaManagementItemBase, _super);
    function TfaManagementItemBase() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TfaManagementItemBase.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.init();
    };
    TfaManagementItemBase.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        TfaManagementService_1.default.unsubscribe(this.listUpdateEvent);
    };
    TfaManagementItemBase.prototype.init = function () {
        var _this = this;
        if (this.removeButtonEl) {
            TfaManagementService_1.default.on(this.listUpdateEvent, function () { return _this.updateRemoveButtonState(); });
        }
    };
    TfaManagementItemBase.prototype.updateRemoveButtonState = function () {
        var _a, _b;
        if (((_b = (_a = this._screenSet.data.tfaProviders) === null || _a === void 0 ? void 0 : _a.phones) === null || _b === void 0 ? void 0 : _b.length) > 1) {
            this.enableRemoveButton();
        }
        else {
            this.disableRemoveButton();
        }
    };
    TfaManagementItemBase.prototype.enableRemoveButton = function () {
        var _this = this;
        var _a;
        this.addButtonHandler(this.deleteDialogButtonEl, function () { return _this.openDeleteDialog(); });
        (_a = this.deleteDialogButtonEl) === null || _a === void 0 ? void 0 : _a.removeAttribute('disabled');
    };
    TfaManagementItemBase.prototype.openDeleteDialog = function () {
        var _this = this;
        var _a, _b;
        this.addButtonHandler(this.removeButtonEl, function () { return _this.onRemoveDeviceClicked(); }, this.buttonEventKey);
        this.addButtonHandler(this.deleteDialogCancelButtonEl, function () { return _this.closeDeleteDialog(); });
        (_b = (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.classList) === null || _b === void 0 ? void 0 : _b.add(exports.TfaManagementItemBase_CONSTS.deleteDialogClass);
    };
    TfaManagementItemBase.prototype.closeDeleteDialog = function () {
        var _a, _b;
        (_b = (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.classList) === null || _b === void 0 ? void 0 : _b.remove(exports.TfaManagementItemBase_CONSTS.deleteDialogClass);
    };
    TfaManagementItemBase.prototype.disableRemoveButton = function () {
        var _a;
        this.removeButtonHandler(this.buttonEventKey);
        (_a = this.deleteDialogButtonEl) === null || _a === void 0 ? void 0 : _a.setAttribute('disabled', 'disabled');
    };
    TfaManagementItemBase.prototype.onRemoveDeviceClicked = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this._screen.dimScreen();
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, , 3, 4]);
                        return [4 /*yield*/, this.removeDevice()];
                    case 2:
                        _a.sent();
                        this.instanceElement.remove();
                        this.unlinkInstanceElement();
                        return [3 /*break*/, 4];
                    case 3:
                        this._screen.undimScreen();
                        return [7 /*endfinally*/];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(TfaManagementItemBase.prototype, "removeButtonEl", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TfaManagementItemBase_CONSTS.removeButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaManagementItemBase.prototype, "deleteDialogButtonEl", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TfaManagementItemBase_CONSTS.deleteDialogButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaManagementItemBase.prototype, "deleteDialogCancelButtonEl", {
        get: function () {
            var _a;
            return (_a = this.instanceElement) === null || _a === void 0 ? void 0 : _a.querySelector(exports.TfaManagementItemBase_CONSTS.deleteDialogCancelButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaManagementItemBase.prototype, "buttonEventKey", {
        get: function () {
            return this.elementId + "-remove";
        },
        enumerable: true,
        configurable: true
    });
    return TfaManagementItemBase;
}(CardListItemWidget_1.CardListItemWidget));
exports.TfaManagementItemBase = TfaManagementItemBase;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementListBase.ts":
/*!****************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementListBase.ts ***!
  \****************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var TfaManagementService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaManagementService */ "./src/core/Gigya.Js/app/TFA/TfaManagementService.ts");
var CardListFormWidget_1 = __webpack_require__(/*! ../../CardListFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/CardListFormWidget.ts");
var TfaManagementListBase = /** @class */ (function (_super) {
    tslib_1.__extends(TfaManagementListBase, _super);
    function TfaManagementListBase() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.itemId = 'id';
        return _this;
    }
    TfaManagementListBase.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.isActiveProvider) return [3 /*break*/, 2];
                        return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        this.showList();
                        TfaManagementService_1.default.on(this.removeEvent, function () { return _this.reloadList(); });
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(TfaManagementListBase.prototype, "isActiveProvider", {
        get: function () {
            var _this = this;
            return this._screenSet.data.tfaProviders.activeProviders.some(function (activeProvider) { return activeProvider.name === _this.providerName; });
        },
        enumerable: true,
        configurable: true
    });
    TfaManagementListBase.prototype.reloadList = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.reloadList.call(this)];
                    case 1:
                        _a.sent();
                        TfaManagementService_1.default.dispatchEvent(this.listUpdateEvent, {
                            list: this.getScreenSetData()
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    TfaManagementListBase.prototype.reloadData = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var response, hostForm, _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 5, , 6]);
                        return [4 /*yield*/, this.fetchDevices()];
                    case 1:
                        response = _b.sent();
                        if (!(response.errorCode === GSErrors_1.GSErrors.OK)) return [3 /*break*/, 2];
                        this.setScreenSetData(this.getDataFromListResponse(response));
                        return [2 /*return*/, this.getScreenSetData()];
                    case 2:
                        hostForm = this._screen.getFormByElement(this.instanceElement);
                        return [4 /*yield*/, this._screenSet.onScreenResponse(response, hostForm)];
                    case 3:
                        _b.sent();
                        return [2 /*return*/, []];
                    case 4: return [3 /*break*/, 6];
                    case 5:
                        _a = _b.sent();
                        return [2 /*return*/, []];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    TfaManagementListBase.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
        TfaManagementService_1.default.unsubscribe(this.removeEvent);
    };
    return TfaManagementListBase;
}(CardListFormWidget_1.CardListFormWidget));
exports.TfaManagementListBase = TfaManagementListBase;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementWidget.ts":
/*!**************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementWidget.ts ***!
  \**************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseScreenWidget_1 = __webpack_require__(/*! ../../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var GSErrors = window.gigya.GSErrors;
var TfaManagementWidget_CONSTS = {
    selector: '.gigya-composite-control-tfa-management-widget',
};
var TfaManagementWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaManagementWidget, _super);
    function TfaManagementWidget(_screen, el) {
        return _super.call(this, _screen, el) || this;
    }
    TfaManagementWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var providers;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        return [4 /*yield*/, apis_1.fetchAvailableProviders()];
                    case 1:
                        providers = _a.sent();
                        if (providers.errorCode === GSErrors.OK) {
                            this._screenSet.data.tfaProviders.activeProviders = providers === null || providers === void 0 ? void 0 : providers.activeProviders;
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    TfaManagementWidget.CONSTS = TfaManagementWidget_CONSTS;
    return TfaManagementWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.TfaManagementWidget = TfaManagementWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(TfaManagementWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailItemWidget.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailItemWidget.ts ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var TfaManagementItemBase_1 = __webpack_require__(/*! ../TfaManagementItemBase */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementItemBase.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var CONSTS = tslib_1.__assign({ selector: '.gigya-tfa-management-method[data-tfa-method="email"] .gigya-card' }, TfaManagementItemBase_1.TfaManagementItemBase_CONSTS);
var TfaManagementEmailItemWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaManagementEmailItemWidget, _super);
    function TfaManagementEmailItemWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.removeEvent = 'removeEmail';
        _this.listUpdateEvent = 'emailListUpdated';
        return _this;
    }
    TfaManagementEmailItemWidget.prototype.removeDevice = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/];
            });
        });
    };
    TfaManagementEmailItemWidget.CONSTS = CONSTS;
    return TfaManagementEmailItemWidget;
}(TfaManagementItemBase_1.TfaManagementItemBase));
exports.TfaManagementEmailItemWidget = TfaManagementEmailItemWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TfaManagementEmailItemWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailListWidget.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailListWidget.ts ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var TfaManagementService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaManagementService */ "./src/core/Gigya.Js/app/TFA/TfaManagementService.ts");
var TfaManagementListBase_1 = __webpack_require__(/*! ../TfaManagementListBase */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementListBase.ts");
var TfaGigyaAssertionService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService */ "./src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.TfaEmailManagement_CONSTS = {
    selector: '.gigya-tfa-management-method[data-tfa-method="email"]'
};
var TfaManagementEmailListWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaManagementEmailListWidget, _super);
    function TfaManagementEmailListWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.removeEvent = 'removeEmail';
        _this.listUpdateEvent = 'emailListUpdated';
        _this.providerName = types_1.TfaProvider.email;
        return _this;
    }
    TfaManagementEmailListWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.linkInstanceElement.call(this, parent)];
                    case 1:
                        _a.sent();
                        TfaManagementService_1.default.on('removeEmail', function () { return _this.reloadList(); });
                        return [2 /*return*/];
                }
            });
        });
    };
    TfaManagementEmailListWidget.prototype.reloadList = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _super.prototype.reloadList.call(this)];
                    case 1:
                        _a.sent();
                        TfaManagementService_1.default.dispatchEvent('emailListUpdated', {
                            list: this._screenSet.data.tfaProviders.phones
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    TfaManagementEmailListWidget.prototype.getDataFromListResponse = function (res) {
        return res.emails.map(function (item) { return ({ email: item.obfuscated, id: item.id }); });
    };
    TfaManagementEmailListWidget.prototype.setScreenSetData = function (items) {
        this._screenSet.data.tfaProviders.emails = items;
    };
    TfaManagementEmailListWidget.prototype.getScreenSetData = function () {
        return this._screenSet.data.tfaProviders.emails;
    };
    TfaManagementEmailListWidget.prototype.fetchDevices = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var gigyaAssertion;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, TfaGigyaAssertionService_1.default.getAssertion(types_1.TfaMode.edit, types_1.TfaProvider.email)];
                    case 1:
                        gigyaAssertion = _a.sent();
                        if (!gigyaAssertion) {
                            return [2 /*return*/, gigya.Promise.resolve({})];
                        }
                        return [2 /*return*/, apis_1.fetchTfaEmailList(gigyaAssertion)];
                }
            });
        });
    };
    TfaManagementEmailListWidget.CONSTS = exports.TfaEmailManagement_CONSTS;
    return TfaManagementEmailListWidget;
}(TfaManagementListBase_1.TfaManagementListBase));
exports.TfaManagementEmailListWidget = TfaManagementEmailListWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TfaManagementEmailListWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneItemWidget.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneItemWidget.ts ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var TfaManagementService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaManagementService */ "./src/core/Gigya.Js/app/TFA/TfaManagementService.ts");
var TfaManagementItemBase_1 = __webpack_require__(/*! ../TfaManagementItemBase */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementItemBase.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var CONSTS = tslib_1.__assign({ selector: '.gigya-tfa-management-method[data-tfa-method="phone"] .gigya-card' }, TfaManagementItemBase_1.TfaManagementItemBase_CONSTS);
var TfaManagementPhoneItemWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaManagementPhoneItemWidget, _super);
    function TfaManagementPhoneItemWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.removeEvent = 'removePhone';
        _this.listUpdateEvent = 'phoneListUpdated';
        return _this;
    }
    TfaManagementPhoneItemWidget.prototype.removeDevice = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, TfaManagementService_1.default.removePhone(types_1.TfaProvider.phone, this.elementId)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    TfaManagementPhoneItemWidget.CONSTS = CONSTS;
    return TfaManagementPhoneItemWidget;
}(TfaManagementItemBase_1.TfaManagementItemBase));
exports.TfaManagementPhoneItemWidget = TfaManagementPhoneItemWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TfaManagementPhoneItemWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneListWidget.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneListWidget.ts ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var TfaManagementListBase_1 = __webpack_require__(/*! ../TfaManagementListBase */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementListBase.ts");
var TfaGigyaAssertionService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService */ "./src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService.ts");
var phoneNumberUtil_1 = __webpack_require__(/*! src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil */ "./src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
exports.TfaPhoneManagement_CONSTS = {
    selector: ' .gigya-tfa-management-method[data-tfa-method="phone"]'
};
var TfaManagementPhoneListWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaManagementPhoneListWidget, _super);
    function TfaManagementPhoneListWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.removeEvent = 'removePhone';
        _this.listUpdateEvent = 'phoneListUpdated';
        _this.providerName = types_1.TfaProvider.phone;
        return _this;
    }
    TfaManagementPhoneListWidget.prototype.getScreenSetData = function () {
        return this._screenSet.data.tfaProviders.phones;
    };
    TfaManagementPhoneListWidget.prototype.setScreenSetData = function (items) {
        this._screenSet.data.tfaProviders.phones = items;
    };
    TfaManagementPhoneListWidget.prototype.getDataFromListResponse = function (res) {
        return res.phones.map(function (phone) { return ({
            phoneNumber: phoneNumberUtil_1.formatObfuscatedPhoneNumber(phone), id: phone.id
        }); });
    };
    TfaManagementPhoneListWidget.prototype.fetchDevices = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var gigyaAssertion;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, TfaGigyaAssertionService_1.default.getAssertion(types_1.TfaMode.edit, types_1.TfaProvider.phone)];
                    case 1:
                        gigyaAssertion = _a.sent();
                        if (!gigyaAssertion) {
                            return [2 /*return*/, gigya.Promise.resolve({})];
                        }
                        return [2 /*return*/, apis_1.fetchTfaPhoneList(gigyaAssertion)];
                }
            });
        });
    };
    TfaManagementPhoneListWidget.CONSTS = exports.TfaPhoneManagement_CONSTS;
    return TfaManagementPhoneListWidget;
}(TfaManagementListBase_1.TfaManagementListBase));
exports.TfaManagementPhoneListWidget = TfaManagementPhoneListWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TfaManagementPhoneListWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/BaseTfaRegistrationWidget.ts":
/*!**********************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/BaseTfaRegistrationWidget.ts ***!
  \**********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseFormWidget_1 = __webpack_require__(/*! ../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var TfaGigyaAssertionService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService */ "./src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService.ts");
var errorMessageUtil_1 = __webpack_require__(/*! ../../utils/errorMessageUtil */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorMessageUtil.ts");
var errorEventUtil_1 = __webpack_require__(/*! ../../utils/errorEventUtil */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorEventUtil.ts");
var BaseTfaRegistrationWidget = /** @class */ (function (_super) {
    tslib_1.__extends(BaseTfaRegistrationWidget, _super);
    function BaseTfaRegistrationWidget() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BaseTfaRegistrationWidget.prototype.handleError = function (_a) {
        var response = _a.response, context = _a.context, fieldName = _a.fieldName;
        this.displayErrorMessage(response, fieldName);
        errorEventUtil_1.dispatchErrorEvent(this._screen, this._form.bindID, { response: response, context: context });
    };
    BaseTfaRegistrationWidget.prototype.getGigyaAssertion = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, TfaGigyaAssertionService_1.default.getAssertion(types_1.TfaMode.register, this.providerName, {
                        regToken: this._screenSet.regToken,
                    })];
            });
        });
    };
    Object.defineProperty(BaseTfaRegistrationWidget.prototype, "fieldName", {
        get: function () {
            return this.instanceElement.getAttribute('data-gigya-name');
        },
        enumerable: true,
        configurable: true
    });
    BaseTfaRegistrationWidget.prototype.displayErrorMessage = function (response, fieldName) {
        var text = this.getErrorTextFromResponse(response, fieldName);
        this.renderWidgetError(response.errorCode, text);
    };
    BaseTfaRegistrationWidget.prototype.getErrorKeyFromResponse = function (response) {
        return errorMessageUtil_1.getOtpErrorMessage(response);
    };
    BaseTfaRegistrationWidget.prototype.renderWidgetError = function (errorCode, errorMessage) {
        var _a;
        (_a = this._screen._errorDisplayElements[this.fieldName]) === null || _a === void 0 ? void 0 : _a.forEach(function (errorElement) {
            errorElement.showError({
                errorMessage: errorMessage, errorCode: errorCode
            });
        });
    };
    BaseTfaRegistrationWidget.prototype.hideErrorMessage = function () {
        var _a;
        (_a = this._screen._errorDisplayElements[this.fieldName]) === null || _a === void 0 ? void 0 : _a.forEach(function (errorElement) {
            errorElement.hideError();
        });
    };
    return BaseTfaRegistrationWidget;
}(BaseFormWidget_1.BaseFormWidget));
exports.BaseTfaRegistrationWidget = BaseTfaRegistrationWidget;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/TfaRegistrationWidget.ts":
/*!******************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/TfaRegistrationWidget.ts ***!
  \******************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseScreenWidget_1 = __webpack_require__(/*! ../../BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var TfaRegistrationWidget_CONSTS = {
    selector: '.gigya-composite-control-tfa-registration-widget',
};
var TfaRegistrationWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaRegistrationWidget, _super);
    function TfaRegistrationWidget(_screen, el) {
        return _super.call(this, _screen, el) || this;
    }
    TfaRegistrationWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var providers;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _super.prototype.linkInstanceElement.call(this, parent);
                        this._screenSet.dimScreenSet();
                        this._screenSet.data.finalizeRegistrationNeeded = false;
                        this._screen._hasTfa = true;
                        return [4 /*yield*/, apis_1.fetchAvailableProviders()];
                    case 1:
                        providers = _a.sent();
                        this._screenSet.data.tfaProviders.activeProviders = providers.activeProviders;
                        this._screenSet.undimScreenSet();
                        return [2 /*return*/];
                }
            });
        });
    };
    TfaRegistrationWidget.CONSTS = TfaRegistrationWidget_CONSTS;
    return TfaRegistrationWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.TfaRegistrationWidget = TfaRegistrationWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(TfaRegistrationWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/phone/TfaRegistrationPhoneWidget.ts":
/*!*****************************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/phone/TfaRegistrationPhoneWidget.ts ***!
  \*****************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var ApiLinkHelper_1 = __webpack_require__(/*! ../../../ApiLinkHelper */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ApiLinkHelper.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var PhoneNumberInput_1 = __webpack_require__(/*! ../../../Inputs/PhoneNumberInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput.ts");
var BaseFormWidget_1 = __webpack_require__(/*! ../../../BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var FormInput_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var BaseTfaRegistrationWidget_1 = __webpack_require__(/*! ../BaseTfaRegistrationWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/BaseTfaRegistrationWidget.ts");
var apis_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var TfaRegistrationPhoneWidget_CONSTS = {
    selector: '.gigya-tfa-widget-method[data-tfa-method="phone"]',
    continueButtonSelector: '.gigya-tfa-continue-button',
    resendButtonSelector: '.gigya-resend-button',
    chooseMethodSelector: '.gigya-tfa-method-selection',
    chooseMethodOptionName: 'tfa-method-selection',
    currentStepAttribute: 'data-current-step',
    voiceAllowedAttribute: 'data-allow-voice',
    phoneNumberPreviewSelector: '.gigya-phone-number-preview',
    sendCodeStepSelector: '.gigya-tfa-registration-method-send-code-step',
    verifyStepSelector: '.gigya-tfa-registration-method-send-verify-step',
    rememberDeviceSelector: '.gigya-remember-device-checkbox input',
    hiddenClass: 'gigya-hidden',
    phoneFieldName: 'phone number',
    deps: [PhoneNumberInput_1.PhoneNumberInput, FormInput_1.FormInput]
};
var WidgetState;
(function (WidgetState) {
    WidgetState["sendCode"] = "sendCode";
    WidgetState["verify"] = "verify";
})(WidgetState || (WidgetState = {}));
var TfaRegistrationPhoneWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaRegistrationPhoneWidget, _super);
    function TfaRegistrationPhoneWidget() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.providerName = types_1.TfaProvider.phone;
        return _this;
    }
    TfaRegistrationPhoneWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                _super.prototype.linkInstanceElement.call(this, parent);
                this.init();
                return [2 /*return*/];
            });
        });
    };
    TfaRegistrationPhoneWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
    };
    TfaRegistrationPhoneWidget.prototype.init = function () {
        var _this = this;
        var _a, _b;
        this._screenSet.dimScreenSet();
        this.addEventHandlers();
        this.resendPhoneLink = new ApiLinkHelper_1.ApiLinkHelper(this.resendButton, function () { return _this.sendCode(); });
        if (this.hasVoiceCapability) {
            (_a = this.chooseMethodEl) === null || _a === void 0 ? void 0 : _a.classList.remove(TfaRegistrationPhoneWidget_CONSTS.hiddenClass);
        }
        else {
            (_b = this.chooseMethodEl) === null || _b === void 0 ? void 0 : _b.classList.add(TfaRegistrationPhoneWidget_CONSTS.hiddenClass);
        }
        this._screenSet.undimScreenSet();
        this.showSendCodeStep();
    };
    TfaRegistrationPhoneWidget.prototype.showSendCodeStep = function () {
        var _this = this;
        this.widgetState = WidgetState.sendCode;
        setTimeout(function () { var _a; return (_a = _this.phoneNumberFormField) === null || _a === void 0 ? void 0 : _a.focus(); });
    };
    TfaRegistrationPhoneWidget.prototype.showVerifyStep = function () {
        var _this = this;
        var _a;
        this.resendPhoneLink.init();
        this.widgetState = WidgetState.verify;
        this.previewEl.innerHTML = this.phoneNumber;
        (_a = this.codeFormField) === null || _a === void 0 ? void 0 : _a.prePopulate('');
        setTimeout(function () { var _a, _b; return (_b = (_a = _this.codeFormField) === null || _a === void 0 ? void 0 : _a.instanceElement) === null || _b === void 0 ? void 0 : _b.focus(); });
    };
    TfaRegistrationPhoneWidget.prototype.addEventHandlers = function () {
        var _this = this;
        this.addButtonHandler(this.sendCodeButton, function () { return _this.submitPhoneNumber(); });
        this.addButtonHandler(this.verificationButton, function () { return _this.submitCode(); });
        this.addDomEventListener(this.previewEl, 'click', function () { return _this.showSendCodeStep(); });
        this.addDomEventListener(this._form.instanceElement, 'fieldChanged', function () { return _this.hideErrorMessage(); });
        this.submitOnEnter(this.sendCodeStepEl, this.sendCodeButton);
        this.submitOnEnter(this.sendVerificationStepEl, this.verificationButton);
    };
    TfaRegistrationPhoneWidget.prototype.submitPhoneNumber = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var isValid, result;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.hideErrorMessage();
                        this.phoneNumberFormField.markAsDirty();
                        return [4 /*yield*/, this.validateChildField(this.phoneNumberFormField)];
                    case 1:
                        isValid = _a.sent();
                        if (!isValid) {
                            return [2 /*return*/];
                        }
                        return [4 /*yield*/, this.sendCode()];
                    case 2:
                        result = _a.sent();
                        if ((result === null || result === void 0 ? void 0 : result.errorCode) == GSErrors_1.GSErrors.OK) {
                            this.showVerifyStep();
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    TfaRegistrationPhoneWidget.prototype.sendCode = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var response, _a, _b, err_1;
            return tslib_1.__generator(this, function (_c) {
                switch (_c.label) {
                    case 0:
                        this._screenSet.dimScreenSet();
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 4, 5, 6]);
                        _a = apis_1.sendPhoneVerificationCode;
                        _b = {
                            phone: this.phoneNumber,
                            method: this.selectedMethod,
                            regToken: this._screenSet.regToken
                        };
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 2: return [4 /*yield*/, _a.apply(void 0, [(_b.gigyaAssertion = _c.sent(),
                                _b.lang = this._screenSet.params.communicationLang,
                                _b)])];
                    case 3:
                        response = _c.sent();
                        if (response.errorCode == GSErrors_1.GSErrors.OK) {
                            this.phvToken = response['phvToken'];
                        }
                        else {
                            this.handleError({
                                response: response,
                                fieldName: this.phoneNumberFieldName
                            });
                        }
                        return [2 /*return*/, response];
                    case 4:
                        err_1 = _c.sent();
                        this.handleError({
                            response: { errorCode: GSErrors_1.GSErrors.GENERAL_SERVER_ERROR },
                            context: err_1
                        });
                        return [3 /*break*/, 6];
                    case 5:
                        this._screenSet.undimScreenSet();
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    TfaRegistrationPhoneWidget.prototype.submitCode = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var isValid, completeVerificationRes, _a, _b, submitApiParams, _c, err_2;
            var _this = this;
            return tslib_1.__generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        this.hideErrorMessage();
                        return [4 /*yield*/, this.validateChildField(this.codeFormField)];
                    case 1:
                        isValid = _d.sent();
                        if (!isValid) {
                            return [2 /*return*/];
                        }
                        this._screenSet.data.finalizeRegistrationNeeded = true;
                        this._screenSet.dimScreenSet();
                        _d.label = 2;
                    case 2:
                        _d.trys.push([2, 9, 10, 11]);
                        _a = apis_1.sendPhoneCompleteVerification;
                        _b = {
                            code: this.currentCode
                        };
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 3: return [4 /*yield*/, _a.apply(void 0, [(_b.gigyaAssertion = _d.sent(),
                                _b.phvToken = this.phvToken,
                                _b)])];
                    case 4:
                        completeVerificationRes = _d.sent();
                        if (!(completeVerificationRes.errorCode == GSErrors_1.GSErrors.OK)) return [3 /*break*/, 7];
                        _c = {};
                        return [4 /*yield*/, this.getGigyaAssertion()];
                    case 5:
                        submitApiParams = (_c.gigyaAssertion = _d.sent(),
                            _c.providerAssertion = completeVerificationRes['providerAssertion'],
                            _c.tempDevice = !this.rememberDevice,
                            _c.regToken = this._screenSet.regToken,
                            _c);
                        return [4 /*yield*/, this._form.submit({
                                customSubmitApi: window.gigya.accounts.tfa.finalizeTFA,
                                submitApiParams: submitApiParams,
                                onAfterSubmitCallback: function (response) {
                                    if (response.errorCode != GSErrors_1.GSErrors.OK) {
                                        _this.displayErrorMessage(response);
                                    }
                                }
                            })];
                    case 6:
                        _d.sent();
                        return [3 /*break*/, 8];
                    case 7:
                        this.handleError({ response: completeVerificationRes });
                        _d.label = 8;
                    case 8: return [3 /*break*/, 11];
                    case 9:
                        err_2 = _d.sent();
                        this.handleError({
                            response: { errorCode: GSErrors_1.GSErrors.GENERAL_SERVER_ERROR },
                            context: err_2
                        });
                        return [3 /*break*/, 11];
                    case 10:
                        this._screenSet.undimScreenSet();
                        return [7 /*endfinally*/];
                    case 11: return [2 /*return*/];
                }
            });
        });
    };
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "sendCodeButton", {
        get: function () {
            var stepSelector = TfaRegistrationPhoneWidget_CONSTS.sendCodeStepSelector;
            var buttonSelector = TfaRegistrationPhoneWidget_CONSTS.continueButtonSelector;
            return this.instanceElement.querySelector(stepSelector + " " + buttonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "verificationButton", {
        get: function () {
            var stepSelector = TfaRegistrationPhoneWidget_CONSTS.verifyStepSelector;
            var buttonSelector = TfaRegistrationPhoneWidget_CONSTS.continueButtonSelector;
            return this.instanceElement.querySelector(stepSelector + " " + buttonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "resendButton", {
        get: function () {
            return this.instanceElement.querySelector(TfaRegistrationPhoneWidget_CONSTS.resendButtonSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "widgetState", {
        set: function (currentState) {
            this.instanceElement.setAttribute(TfaRegistrationPhoneWidget_CONSTS.currentStepAttribute, currentState);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "hasVoiceCapability", {
        get: function () {
            return this.instanceElement.getAttribute(TfaRegistrationPhoneWidget_CONSTS.voiceAllowedAttribute) === 'true';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "chooseMethodEl", {
        get: function () {
            return this.instanceElement.querySelector(TfaRegistrationPhoneWidget_CONSTS.chooseMethodSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "sendVerificationStepEl", {
        get: function () {
            return this.instanceElement.querySelector(TfaRegistrationPhoneWidget_CONSTS.verifyStepSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "sendCodeStepEl", {
        get: function () {
            return this.instanceElement.querySelector(TfaRegistrationPhoneWidget_CONSTS.sendCodeStepSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "selectedMethod", {
        get: function () {
            var _a;
            if (!this.hasVoiceCapability) {
                return types_1.TfaPhoneSendCodeMethod.sms;
            }
            var optionName = TfaRegistrationPhoneWidget_CONSTS.chooseMethodOptionName;
            return (_a = this.instanceElement.querySelector("input[name=\"" + optionName + "\"]:checked")) === null || _a === void 0 ? void 0 : _a.value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "currentCode", {
        get: function () {
            var _a;
            return (_a = this.codeFormField) === null || _a === void 0 ? void 0 : _a.getValue();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "hostForm", {
        get: function () {
            return this._screen.getFormByElement(this.instanceElement);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "phoneNumber", {
        get: function () {
            return this.phoneNumberFormField.getValue();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "previewEl", {
        get: function () {
            return this.instanceElement.querySelector(TfaRegistrationPhoneWidget_CONSTS.phoneNumberPreviewSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "phoneNumberFormField", {
        get: function () {
            return this._form.getField('tfaPhoneNumber');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "rememberDevice", {
        get: function () {
            var _a;
            return (_a = this.rememberDeviceCheckboxEl) === null || _a === void 0 ? void 0 : _a.checked;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "rememberDeviceCheckboxEl", {
        get: function () {
            return this.instanceElement.querySelector(TfaRegistrationPhoneWidget_CONSTS.rememberDeviceSelector);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "codeFormField", {
        get: function () {
            return this._form.getField('tfaCode');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TfaRegistrationPhoneWidget.prototype, "phoneNumberFieldName", {
        get: function () {
            var _a;
            return ((_a = this.phoneNumberFormField) === null || _a === void 0 ? void 0 : _a.displayName) || TfaRegistrationPhoneWidget_CONSTS.phoneFieldName;
        },
        enumerable: true,
        configurable: true
    });
    TfaRegistrationPhoneWidget.CONSTS = TfaRegistrationPhoneWidget_CONSTS;
    return TfaRegistrationPhoneWidget;
}(BaseTfaRegistrationWidget_1.BaseTfaRegistrationWidget));
exports.TfaRegistrationPhoneWidget = TfaRegistrationPhoneWidget;
BaseFormWidget_1.BaseFormWidget.addWidgetToLibrary(TfaRegistrationPhoneWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget.ts":
/*!**************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var nextTfaContainerId = 0;
exports.TfaWidget_CONSTS = {
    selector: 'div.gigya-tfa',
};
utils_1.DeepFreeze(exports.TfaWidget_CONSTS);
var TfaWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TfaWidget, _super);
    function TfaWidget(_screen, el) {
        var _this = _super.call(this, _screen, el) || this;
        _this.bindID = _this.publishID ? _this.ID : exports.TfaWidget_CONSTS.selector;
        _screen._hasTfa = true;
        // TODO Change use the same id for the same screenSet instance, regardless of how many times it is reused, unlike existing implementation that uses a new id each time
        _this.tfaContainerId = (_this._screenSet.params.containerID || 'showScreenSet') + '_showTfaUI_' + nextTfaContainerId++;
        return _this;
    }
    TfaWidget.prototype.linkInstanceElement = function (parent) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                _super.prototype.linkInstanceElement.call(this, parent);
                if (this.instanceElement) {
                    this.instanceElement.innerHTML = '<div id="' + this.tfaContainerId + '"></div>';
                    this._screen.dimScreen();
                    if (!this.widgetParams) {
                        this.widgetParams = this.params;
                    }
                    return [2 /*return*/, new gigya.Promise(function (resolve) {
                            window.gigya.accounts.showTfaUI(_this.params, _this.widgetParams, {
                                dontHandleScreenSet: false,
                                regToken: _this._screenSet.data.regToken,
                                lang: _this._screenSet.params.lang,
                                communicationLang: _this._screenSet.params.communicationLang,
                                containerID: _this.tfaContainerId,
                                cssPrefix: 'div.gigya-tfa',
                                width: 'auto',
                                source: _this._screenSet.injectionInfo.methodName,
                                onDone: function (e) {
                                    _this._screen.dimScreen();
                                    _this._screenSet.onScreenResponse(e.response, _this);
                                },
                                onLoad: function () {
                                    _this._screen.undimScreen();
                                },
                                onAfterScreenLoad: function (e) {
                                    if (e && e.caption && e.caption.length) {
                                        _this._screen.overrideTemplateCaption(e.caption);
                                        _this._screenSet.setCaption(e.caption);
                                    }
                                    _this._screenSet.centerModal();
                                    resolve();
                                },
                                ignoreApiQueue: _this._screenSet.params['ignoreApiQueue'],
                                customLang: _this._screenSet.params.customLang,
                            });
                        })];
                }
                return [2 /*return*/];
            });
        });
    };
    TfaWidget.prototype.unlinkInstanceElement = function () {
        if (this.instanceElement)
            this.instanceElement.innerHTML = ''; // To make sure no ID conflicts will be generated
        if (this._instance)
            this._instance.dispose();
        _super.prototype.unlinkInstanceElement.call(this);
    };
    TfaWidget.prototype.renderWidget = function () {
        var _this = this;
        //re-render the plugin with the new new conditional values.
        window.gigya.accounts.showTfaUI(this.widgetParams, {
            dontHandleScreenSet: false,
            regToken: this._screenSet.data.regToken,
            containerID: this.tfaContainerId,
            cssPrefix: 'div.gigya-tfa',
            width: 'auto',
            deviceType: this._screenSet.params.deviceType,
            source: this._screenSet.injectionInfo.methodName,
            onDone: function (e) {
                _this._screen.dimScreen();
                _this._screenSet.onScreenResponse(e.response, _this);
            },
            onLoad: function () {
                _this._screen.undimScreen();
            },
            onAfterScreenLoad: function (e) {
                if (e && e.caption && e.caption.length) {
                    _this._screen.overrideTemplateCaption(e.caption);
                    _this._screenSet.setCaption(e.caption);
                }
                _this._screenSet.centerModal();
            },
            getInstance: function (instances) {
                _this._instance = instances;
            },
            ignoreApiQueue: this._screenSet.params['ignoreApiQueue'],
        });
        this.renderWidgetUI = false;
    };
    TfaWidget.CONSTS = exports.TfaWidget_CONSTS;
    return TfaWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.TfaWidget = TfaWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(TfaWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts":
/*!*********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var BaseScreenWidget_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
exports.Translated_CONSTS = {
    selector: '*[data-translation-key]',
    translationKeyAttribute: 'data-translation-key',
};
utils_1.DeepFreeze(exports.Translated_CONSTS);
var TranslatedWidget = /** @class */ (function (_super) {
    tslib_1.__extends(TranslatedWidget, _super);
    function TranslatedWidget(_screen, el) {
        // Turn resetCSS off.
        return _super.call(this, _screen, el, false) || this;
    }
    TranslatedWidget.prototype.linkInstanceElement = function (parent) {
        _super.prototype.linkInstanceElement.call(this, parent);
        this.updateTranslation();
    };
    TranslatedWidget.prototype.unlinkInstanceElement = function () {
        _super.prototype.unlinkInstanceElement.call(this);
    };
    /**
     * Handle case where translation key is updated via conditional attr.
     */
    TranslatedWidget.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.renderedTranslationKey !== this.instanceElement.getAttribute(TranslatedWidget.CONSTS.translationKeyAttribute).toLowerCase()) {
            this.updateTranslation();
        }
    };
    /**
     * Normalize translation key lowercase.
     */
    TranslatedWidget.prototype.getTranslationKey = function () {
        return this.instanceElement.getAttribute(TranslatedWidget.CONSTS.translationKeyAttribute).toLowerCase();
    };
    /**
     * Set translated text.
     */
    TranslatedWidget.prototype.updateTranslation = function () {
        this.renderedTranslationKey = this.getTranslationKey();
        if (this._screenSet.params.customLang && this._screenSet.params.customLang[this.renderedTranslationKey]) {
            // Unlink any widgets before HTML is cleared.
            this.unlinkWidgets();
            // Replace inner HTML.
            this.instanceElement.innerHTML = this._screenSet.params.customLang[this.renderedTranslationKey];
            this.linkWidgets();
        }
    };
    TranslatedWidget.CONSTS = exports.Translated_CONSTS;
    return TranslatedWidget;
}(BaseScreenWidget_1.BaseScreenWidget));
exports.TranslatedWidget = TranslatedWidget;
BaseScreenWidget_1.BaseScreenWidget.addWidgetToLibrary(TranslatedWidget);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/index.ts":
/*!**********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/index.ts ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyManagerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyManagerWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyCardWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyCardWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneListWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneItemWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailItemWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailListWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneListWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneItemWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailListWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailItemWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/TfaRegistrationWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/TfaRegistrationWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/phone/TfaRegistrationPhoneWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/phone/TfaRegistrationPhoneWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CommunicationWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CommunicationWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneNumberWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneNumberWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyLoginWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyLoginWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyRegisterWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyRegisterWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/OrganizationContextWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/OrganizationContextWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneAuthMethodWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/EmailOtpAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/EmailOtpAuthMethodWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordAuthMethodWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts"), exports);
//base widgets export
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts"), exports);


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/elements.ts":
/*!*****************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/elements.ts ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.Consent = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts");
exports.Debug = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts");
exports.ErrorDisplayElement = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
exports.Errors = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
exports.LoginModes = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
exports.Screen = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts");
exports.ScreenConsts = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
exports.ScreenOptions = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
exports.ScreenSetData = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts");
exports.ScreenSetPlugin = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts");
exports.ScreenSetHtmlResources = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts");
exports.TemplateElement = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
exports.Templates = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates.ts");
exports.Captcha = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha.ts");


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/errorBindingHelper.ts":
/*!***************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/errorBindingHelper.ts ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var ErrorDisplayElement_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
var utils_1 = __webpack_require__(/*! ./utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
function getErrorBindings(container) {
    var boundedElements = [], binds = Array.prototype.slice
        .call(container.querySelectorAll("[" + ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.boundedTo + "]"))
        .map(function (el) { return el.getAttribute(ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.boundedTo); });
    utils_1.ForEach(ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.gigyaClasses, function (gigyaClass) {
        var bindedSelectors = [];
        binds.forEach(function (bindID) {
            bindedSelectors.push("." + gigyaClass + "[" + ErrorDisplayElement_1.ErrorDisplayElement_CONSTS.boundedTo + "=\"" + bindID + "\"]");
        });
        if (bindedSelectors === null || bindedSelectors === void 0 ? void 0 : bindedSelectors.length) {
            boundedElements = boundedElements.concat(Array.prototype.slice.call(container.querySelectorAll(bindedSelectors.join(','))));
        }
    });
    return boundedElements;
}
exports.getErrorBindings = getErrorBindings;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/index.ts":
/*!**************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/index.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var BaseForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseForm.ts");
var BaseFormWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseFormWidget.ts");
var BaseScreenWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseScreenWidget.ts");
var BaseServerWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseServerWidget.ts");
var BaseUploadWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseUploadWidget.ts");
var BaseWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/BaseWidget.ts");
var Consent = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Consent.ts");
var Debug = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Debug.ts");
var ErrorDisplayElement = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ErrorDisplayElement.ts");
var Errors = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Errors.ts");
var LoginModes = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts");
var Screen = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Screen.ts");
exports.Screen = Screen;
var ScreenConsts = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
exports.ScreenConsts = ScreenConsts;
var ScreenOptions = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenOptions.ts");
exports.ScreenOptions = ScreenOptions;
var ScreenSetData = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetData.ts");
exports.ScreenSetData = ScreenSetData;
var ScreenSetPlugin = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetPlugin.ts");
exports.ScreenSetPlugin = ScreenSetPlugin;
var ScreenSetHtmlResources = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenSetResources.ts");
var TemplateElement = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var Templates = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Templates.ts");
var utils = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var LinkAccountsForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts");
var LoginForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LoginForm.ts");
var PasswordlessLoginForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessLoginForm.ts");
var PasswordlessRegisterForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessRegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordlessRegisterForm.ts");
var AuthMethodsForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/AuthMethodsForm.ts");
var PasswordAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PasswordAuthMethodForm.ts");
var PushAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/PushAuthMethodForm.ts");
var MagicLinkAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/MagicLinkAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/MagicLinkAuthMethodForm.ts");
var EmailCodeAuthMethodForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/EmailCodeAuthMethodForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/EmailCodeAuthMethodForm.ts");
var NewsletterSignupForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/NewsletterSignupForm.ts");
var ProfileForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProfileForm.ts");
var ReAuthenticationForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ReauthenticationForm.ts");
var RegisterForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/RegisterForm.ts");
var ProgressionForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProgressionForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ProgressionForm.ts");
var ResendVerificationCodeForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResendVerificationCodeForm.ts");
var ResetPasswordForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/ResetPasswordForm.ts");
var OrgRegisterForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OrganizationRegistrationForm.ts");
var ButtonInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ButtonInput.ts");
var CheckboxInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CheckboxInput.ts");
var CommunicationCheckboxInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CommunicationCheckboxInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/CommunicationCheckboxInput.ts");
var EmailInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/EmailInput.ts");
var FormInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var AddressInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/AddressInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/AddressInput.ts");
var LoginIdInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/LoginIdInput.ts");
var PasswordInputs = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PasswordInputs.ts");
var PhoneNumberInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/PhoneNumberInput.ts");
var RadioInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RadioInput.ts");
var RememberInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RememeberInput.ts");
var PasskeyMangerWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyManagerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyManagerWidget.ts");
var PasskeyCardWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyCardWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyManager/PasskeyCardWidget.ts");
var TFAVerification = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/TFAVerificationWidget.ts");
var TFAVerificationPhoneListWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneListWidget.ts");
var TFAVerificationPhoneItemWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/phone/TFAVerificationPhoneItemWidget.ts");
var TFAVerificationEmailItemWidget_1 = __webpack_require__(/*! ./Widgets/TFA/verification/email/TFAVerificationEmailItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailItemWidget.ts");
var TFAVerificationEmailListWidget_1 = __webpack_require__(/*! ./Widgets/TFA/verification/email/TFAVerificationEmailListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TFA/verification/email/TFAVerificationEmailListWidget.ts");
var TfaManagementWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/TfaManagementWidget.ts");
var TfaPhoneManagementListWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneListWidget.ts");
var TfaPhoneManagementDeviceWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/phone/TfaManagementPhoneItemWidget.ts");
var TfaEmailManagementListWidget = __webpack_require__(/*! ./Widgets/TfaManagement/email/TfaManagementEmailListWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailListWidget.ts");
var TfaEmailManagementDeviceWidget = __webpack_require__(/*! ./Widgets/TfaManagement/email/TfaManagementEmailItemWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaManagement/email/TfaManagementEmailItemWidget.ts");
var TfaRegistrationWidget = __webpack_require__(/*! ./Widgets/TfaRegistration/TfaRegistrationWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/TfaRegistrationWidget.ts");
var TfaRegistrationPhoneWidget = __webpack_require__(/*! ./Widgets/TfaRegistration/phone/TfaRegistrationPhoneWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaRegistration/phone/TfaRegistrationPhoneWidget.ts");
var RetypePasswordInput = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/RetypePasswordInput.ts");
var ArrayManagerWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ArrayManagerWidget.ts");
var BindingWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/BindingWidget.ts");
var CaptchaWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CaptchaWidget.ts");
var ConsentWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ConsentWidget.ts");
var ContainerWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ContainerWidget.ts");
var ImageWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ImageWidget.ts");
var LogInAvailabilityWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/LogInAvailabilityWidget.ts");
var MyPhotoWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/MyPhotoWidget.ts");
var PasswordStrengthWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordStrengthWidget.ts");
var PhotoUploadWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhotoUploadWidget.ts");
var ProfilePhotoWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ProfilePhotoWidget.ts");
var RequiredDisplayWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/RequiredDisplayWidget.ts");
var SecretQuestionWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SecretQuestionWidget.ts");
var SocialLoginWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SocialLoginWidget.ts");
var SubscriptionWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/SubscriptionWidget.ts");
var CommunicationWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CommunicationWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/CommunicationWidget.ts");
var PhoneNumberWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneNumberWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneNumberWidget.ts");
var TfaWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TfaWidget.ts");
var TranslatedWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/TranslatedWidget.ts");
var PasskeyLoginWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyLoginWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyLoginWidget.ts");
var PasskeyRegisterWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyRegisterWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasskeyRegisterWidget.ts");
var SwitchScreenWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/SwitchScreenWidget.ts");
var BaseCaptchaHandler = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/BaseCaptchaHandler.ts");
var FunCaptchaHandler = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/FunCaptchaHandler.ts");
var GoogleCaptchaHandler = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/CaptchaHandler/GoogleCaptchaHandler.ts");
var OrganizationContextWidget = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/OrganizationContextWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/OrganizationContextWidget.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpSendCodeForm.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpUpdateForm.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerifyForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpVerifyForm.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OtpLoginForm.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/ApiLinkWidget.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/LinkAccountsForm.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Captcha.ts");
__webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/index.ts");
var DeviceCodeForm = __webpack_require__(/*! ./Forms/DeviceCodeForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/DeviceCodeForm.ts");
var PhoneAuthMethodWidget_1 = __webpack_require__(/*! ./Widgets/PhoneAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PhoneAuthMethodWidget.ts");
var EmailOtpAuthMethodWidget_1 = __webpack_require__(/*! ./Widgets/EmailOtpAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/EmailOtpAuthMethodWidget.ts");
var PasswordAuthMethodWidget_1 = __webpack_require__(/*! ./Widgets/PasswordAuthMethodWidget */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/PasswordAuthMethodWidget.ts");
var CustomForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/CustomForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/CustomForm.ts");
var TfaForm = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/TfaForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/TfaForm.ts");
var OneAccountSubscriptionForm_1 = __webpack_require__(/*! ./Forms/OneAccountSubscriptionForm */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/OneAccountSubscriptionForm.ts");
if (!window.gigya._) {
    window.gigya._ = {};
}
if (!window.gigya._.plugins) {
    window.gigya._.plugins = {};
}
if (!window.gigya._.plugins.ScreenSet) {
    window.gigya._.plugins.ScreenSet = {};
}
if (!window.gigya._.plugins.ScreenSet.consent) {
    window.gigya._.plugins.ScreenSet.consent = {};
}
if (!window.gigya._.plugins.resources) {
    window.gigya._.plugins.resources = {};
}
if (!window.gigya._.plugins.resources.html) {
    window.gigya._.plugins.resources.html = {};
}
if (!window.gigya._.plugins.resources.html.screenSet) {
    window.gigya._.plugins.resources.html.screenSet = {};
}
__webpack_provided_Object_dot_assign(window.gigya._.plugins.ScreenSet, SwitchScreenWidget, BaseForm, BaseFormWidget, BaseScreenWidget, BaseServerWidget, BaseUploadWidget, BaseWidget, Debug, ErrorDisplayElement, Errors, LoginModes, Screen, ScreenConsts, ScreenOptions, ScreenSetData, ScreenSetPlugin, TemplateElement, Templates, utils, LinkAccountsForm, LoginForm, PasswordlessLoginForm, PasswordlessRegisterForm, AuthMethodsForm, PasswordAuthMethodForm, PushAuthMethodForm, MagicLinkAuthMethodForm, EmailCodeAuthMethodForm, OneAccountSubscriptionForm_1.OneAccountSubscriptionForm, NewsletterSignupForm, ProfileForm, ReAuthenticationForm, RegisterForm, ProgressionForm, ResendVerificationCodeForm, ResetPasswordForm, OrgRegisterForm, ButtonInput, CheckboxInput, CommunicationCheckboxInput, EmailInput, FormInput, AddressInput, LoginIdInput, PasswordInputs, PhoneNumberInput, RadioInput, RememberInput, RetypePasswordInput, ArrayManagerWidget, BindingWidget, CaptchaWidget, ConsentWidget, ContainerWidget, ImageWidget, LogInAvailabilityWidget, MyPhotoWidget, PasswordStrengthWidget, PhotoUploadWidget, ProfilePhotoWidget, RequiredDisplayWidget, SecretQuestionWidget, SocialLoginWidget, SubscriptionWidget, PhoneNumberWidget, CommunicationWidget, TfaWidget, TranslatedWidget, BaseCaptchaHandler, FunCaptchaHandler, GoogleCaptchaHandler, DeviceCodeForm, PasswordAuthMethodWidget_1.PasswordAuthMethodWidget, PhoneAuthMethodWidget_1.PhoneAuthMethodWidget, EmailOtpAuthMethodWidget_1.EmailOtpAuthMethodWidget, PasskeyLoginWidget, PasskeyRegisterWidget, PasskeyMangerWidget, TFAVerification, TFAVerificationPhoneListWidget, TFAVerificationPhoneItemWidget, TFAVerificationEmailItemWidget_1.TFAVerificationEmailItemWidget, TFAVerificationEmailListWidget_1.TFAVerificationEmailListWidget, PasskeyCardWidget, TfaManagementWidget, TfaPhoneManagementListWidget, TfaPhoneManagementDeviceWidget, TfaEmailManagementListWidget, TfaEmailManagementDeviceWidget, TfaRegistrationWidget, TfaRegistrationPhoneWidget, CustomForm, TfaForm, OrganizationContextWidget);
__webpack_provided_Object_dot_assign(window.gigya._.plugins.ScreenSet.consent, Consent);
__webpack_provided_Object_dot_assign(window.gigya._.plugins.resources.html.screenSet, ScreenSetHtmlResources);
tslib_1.__exportStar(__webpack_require__(/*! ./Forms */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Forms/index.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./Widgets */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Widgets/index.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./Handlers */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Handlers/index.ts"), exports);
exports.utils = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
tslib_1.__exportStar(__webpack_require__(/*! ./Inputs */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/index.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./DataProviders */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/DataProviders/index.ts"), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./elements */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/elements.ts"), exports);
exports.default = window.gigya._.plugins.ScreenSet;
//
//
//
// export {
//     SwitchScreenWidget,
//     BaseForm,
//     BaseFormWidget,
//     BaseScreenWidget,
//     BaseServerWidget,
//     BaseUploadWidget,
//     BaseWidget,
//     Debug,
//     ErrorDisplayElement,
//     Errors,
//     LoginModes,
//     Screen,
//     ScreenConsts,
//     ScreenOptions,
//     ScreenSetData,
//     ScreenSetPlugin,
//     TemplateElement,
//     Templates,
//     utils,
//     LinkAccountsForm,
//     LoginForm,
//     PasswordlessLoginForm,
//     PasswordlessRegisterForm,
//     AuthMethodsForm,
//     PasswordAuthMethodForm,
//     PushAuthMethodForm,
//     MagicLinkAuthMethodForm,
//     EmailCodeAuthMethodForm,
//     OneAccountSubscriptionForm,
//     NewsletterSignupForm,
//     ProfileForm,
//     ReAuthenticationForm,
//     RegisterForm,
//     ProgressionForm,
//     ResendVerificationCodeForm,
//     ResetPasswordForm,
//     OrgRegisterForm,
//     ButtonInput,
//     CheckboxInput,
//     CommunicationCheckboxInput,
//     EmailInput,
//     FormInput,
//     AddressInput,
//     LoginIdInput,
//     PasswordInputs,
//     PhoneNumberInput,
//     RadioInput,
//     RememberInput,
//     RetypePasswordInput,
//     ArrayManagerWidget,
//     BindingWidget,
//     CaptchaWidget,
//     ConsentWidget,
//     ContainerWidget,
//     ImageWidget,
//     LogInAvailabilityWidget,
//     MyPhotoWidget,
//     PasswordStrengthWidget,
//     PhotoUploadWidget,
//     ProfilePhotoWidget,
//     RequiredDisplayWidget,
//     SecretQuestionWidget,
//     SocialLoginWidget,
//     SubscriptionWidget,
//     PhoneNumberWidget,
//     CommunicationWidget,
//     TfaWidget,
//     TranslatedWidget,
//     BaseCaptchaHandler,
//     FunCaptchaHandler,
//     GoogleCaptchaHandler,
//     DeviceCodeForm,
//     PasswordAuthMethodWidget,
//     PhoneAuthMethodWidget,
//     EmailOtpAuthMethodWidget,
//     PasskeyLoginWidget,
//     PasskeyRegisterWidget,
//     PasskeyMangerWidget,
//     TFAVerification,
//     TFAVerificationPhoneListWidget,
//     TFAVerificationPhoneItemWidget,
//     TFAVerificationEmailItemWidget,
//     TFAVerificationEmailListWidget,
//     PasskeyCardWidget,
//     TfaManagementWidget,
//     TfaPhoneManagementListWidget,
//     TfaPhoneManagementDeviceWidget,
//     TfaEmailManagementListWidget,
//     TfaEmailManagementDeviceWidget,
//     TfaRegistrationWidget,
//     TfaRegistrationPhoneWidget,
//     CustomForm,
//     TfaForm,
//     OrganizationContextWidget
// };
//
//

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/communicationCheckbox.html":
/*!******************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/communicationCheckbox.html ***!
  \******************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"subs-widget-container\" aria-invalid=\"false\">\n    <input class=\"gigya-input-checkbox subscription-checkbox\"\n           id=\"subs-checkbox-${topic}-${channel}\" name=\"${gigyaName}\" type=\"checkbox\"\n           ${checked}\n           data-communication-status=\"${status}\"\n           data-communication-topic=\"${topic}\"\n           data-communication-channel=\"${channel}\"\n    >\n    <label class=\"subscription-name-label\" for=\"subs-checkbox-${topic}-${channel}\"\n           style=\"display: inline-block; vertical-align: middle; padding-left: 5px;\">\n        ${label}\n    </label>\n</div>\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/consent.html":
/*!****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/consent.html ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"consent\" data-id=\"v1\">\n\n  <div class=\"gigya-consent-title\">${label}</div>\n  <div class=\"gigya-consent-subtitle\" >${docId}</div>\n  <span class=\"gigya-consent-text\">${approvedOnLabel}</span> <span class=\"gigya-consent-text\">${approved}</span>\n\n</div>\n\n<div class=\"consent\" data-id=\"v2\">\n\n  <div class=\"gigya-consent-title\">${label}</div>\n\n  <div class=\"gigya-version-content\">\n    <span class=\"gigya-consent-text version-label\">${versionLabel}</span> <span class=\"gigya-consent-text version\">${docId}</span>\n  </div>\n\n  <div class=\"gigya-locale-content\">\n    <span class=\"gigya-consent-text locale-label\">${localeLabel}</span> <span class=\"gigya-consent-text locale\">${locale}</span>\n  </div>\n\n  <div class=\"gigya-approved-on-content\">\n    <span class=\"gigya-consent-text gigya-disabled-color approved-on-label\">${approvedOnLabel}</span> <span class=\"gigya-consent-text gigya-disabled-color approved-on\">${approved}</span>\n  </div>\n\n</div>";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/inlinedPasswordStrength.html":
/*!********************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/inlinedPasswordStrength.html ***!
  \********************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"gigya-password-strength\" data-on-focus-bubble=\"true\" data-bubble-orientation=\"${orientation}\"></div>\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength.html":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength.html ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"${scoreClass}\" aria-atomic=\"true\" aria-live=\"polite\">${content}</div>\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_minimumRequirements.html":
/*!*********************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_minimumRequirements.html ***!
  \*********************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"gigya-passwordStrength-text-requirements\">$requirements</div>\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_strengthMeter.html":
/*!***************************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/passwordStrength_strengthMeter.html ***!
  \***************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"gigya-passwordStrength-text\">\n    <span class=\"gigya-passwordStrength-text\">$TEXT('password_strength_colon')</span>\n    <span class=\"gigya-passwordStrength-text gigya-passwordStrength-scoreText\">${scoreText}</span>\n</div>\n<div class=\"gigya-passwordStrength-bar\">\n    <div class=\"${barIndicatorClass}\"></div>\n</div>\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_form.html":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_form.html ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<form enctype=\"multipart/form-data\" method=\"post\" class=\"gigya-photo-upload-form\" target=\"${formTarget}\" action=\"\">\n    <input type=\"file\" accept=\"image/*\" name=\"_profilePhoto\" />\n</form>\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_ui.html":
/*!***********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/photoUpload_ui.html ***!
  \***********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div class=\"gigya-photo-upload-image\" id=\"${photoElementID}\"></div>\n<div>\n    <div class=\"gigya-photo-upload-button\">$choose_file</div>\n    <div class=\"gigya-photo-upload-path\" id=\"${pathContainerID}\">$no_file_chosen</div>\n    <div class=\"gigya-photo-upload-text\">$tip</div>\n</div>\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet.html":
/*!******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet.html ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<h1 class=\"gigya-screen-caption\" id=\"${innerContainerID}_caption\"></h1>\r\n<div id=\"${childContainerID}\" class=\"gigya-hidden\"></div>\r\n<div id=\"${innerContainerID}\" class=\"gigya-screen-content\"></div>\r\n";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet_dialog.html":
/*!*************************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/templates/screenSet_dialog.html ***!
  \*************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<div id=\"${innerContainerID}\" class=\"gigya-screen-content\"></div>";

/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/typeahead/geo-location.ts":
/*!*******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/typeahead/geo-location.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var GeoLocation = /** @class */ (function () {
    function GeoLocation() {
    }
    GeoLocation.prototype.init = function (enableHighAccuracy, timeout, maximumAge) {
        if (enableHighAccuracy === void 0) { enableHighAccuracy = true; }
        if (timeout === void 0) { timeout = 10000; }
        if (maximumAge === void 0) { maximumAge = 30000; }
        var options = {
            enableHighAccuracy: enableHighAccuracy,
            timeout: timeout,
            maximumAge: maximumAge
        };
        this.resetPosition();
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(this.setPosition.bind(this), this.locationError.bind(this), options);
        }
        else {
            this.displayError("Please update your browser to us Geolocation.");
        }
    };
    GeoLocation.prototype.setPosition = function (position) {
        this.latitude = position.coords.latitude;
        this.longitude = position.coords.longitude;
    };
    GeoLocation.prototype.getPosition = function () {
        return {
            latitude: this.latitude,
            longitude: this.longitude
        };
    };
    GeoLocation.prototype.resetPosition = function () {
        this.latitude = null;
        this.longitude = null;
    };
    GeoLocation.prototype.displayError = function (errorMessage) {
        window.gigya.logger.warn(errorMessage);
    };
    GeoLocation.prototype.locationError = function (error) {
        var errorMessage = "";
        //  https://developer.mozilla.org/en-US/docs/Web/API/GeolocationPositionError
        switch (error.code) {
            case error.PERMISSION_DENIED:
                errorMessage = "The acquisition of the geolocation information failed because the page didn't have the necessary permissions.";
                break;
            case error.POSITION_UNAVAILABLE:
                errorMessage = "The acquisition of the geolocation failed because at least one internal source of position returned an internal error.";
                break;
            case error.TIMEOUT:
                errorMessage = "The time allowed to acquire the geolocation was reached before the information was obtained.";
                break;
            case error.UNKNOWN_ERROR:
                errorMessage = "An unknown error occured.";
                break;
        }
        this.displayError(errorMessage);
    };
    return GeoLocation;
}());
exports.GeoLocation = GeoLocation;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/typeahead/typeahead-input.ts":
/*!**********************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/typeahead/typeahead-input.ts ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var FormInput_1 = __webpack_require__(/*! ../Inputs/FormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/FormInput.ts");
var TemplateElement_1 = __webpack_require__(/*! ../TemplateElement */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/TemplateElement.ts");
var DOM_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/DOM */ "./src/core/Gigya.Js/app/Utils/DOM.ts");
var ServerFormInput_1 = __webpack_require__(/*! ../Inputs/ServerFormInput */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/Inputs/ServerFormInput.ts");
var TypeAheadConsts = {
    comboWrapperSelector: '.gigya-combo-container',
    comboInputClass: 'gigya-combo-input',
    comboPopupClass: 'gigya-combo-popup',
    comboPopupSelector: '.gigya-combo-popup',
    comboListSelector: '.gigya-combo-list',
    comboClearButtonSelector: '.gigya-combo-input-clear',
    comboLoaderSelector: '.gigya-combo-spinner',
    comboNoDataClass: 'gigya-no-data',
    comboOptionClass: 'gigya-combo-option',
    comboOptionDisabledSelector: '.gigya-combo-option-disabled',
    comboStyleDisplayBlock: 'block',
    comboStyleDisplayNone: 'none',
    comboActiveClass: 'gigya-combo-active',
    comboOptionSelectedClass: 'gigya-combo-selected'
};
var TypeaheadInput = /** @class */ (function (_super) {
    tslib_1.__extends(TypeaheadInput, _super);
    function TypeaheadInput(context) {
        var _this = _super.call(this, context) || this;
        _this.options = [];
        _this.clickOutsideListener = function (e) { return _this.onClickOutside(e); };
        _this.inputFocusListener = function (e) { return _this.onInputFocus(e); };
        _this.inputChangeListener = function (e) { return _this.onInputChange(); };
        _this.optionsSelectListener = function (e) { return _this.handleOptionSelect(e); };
        _this.clearClickListener = function (e) { return _this.onClearClick(e); };
        _this.arrowKeyListener = function (e) { return _this.useArrowKeys(e); };
        _this.scrollListener = function (e) { return _this.onScroll(e); };
        return _this;
    }
    TypeaheadInput.prototype.init = function (input, clickOutsideCallback, options) {
        if (clickOutsideCallback === void 0) { clickOutsideCallback = null; }
        this.minimumCharacters = options === null || options === void 0 ? void 0 : options.minimumCharacters;
        this._clickOutSideCallback = clickOutsideCallback;
        this.initComboElements(input);
        this.addEventListeners();
        this.afterSelectCallback = options === null || options === void 0 ? void 0 : options.afterSelectCallback;
    };
    TypeaheadInput.prototype.initComboElements = function (input) {
        var _a, _b, _c, _d, _e;
        input.classList.add(TypeAheadConsts.comboInputClass);
        // Wrap with combo-container elements
        this.containerEl = input.parentElement.querySelector(TypeAheadConsts.comboWrapperSelector);
        if (this.containerEl) {
            this.containerEl.style.width = input.style.width;
        }
        input.insertAdjacentElement("beforebegin", this.containerEl);
        this.bodyEl = document.querySelector('body');
        this.inputEL = input;
        this.screenEl = this._screen.instanceElement;
        this.popupEL = (_a = this.containerEl) === null || _a === void 0 ? void 0 : _a.querySelector(TypeAheadConsts.comboPopupSelector);
        this.optionsListEL = (_b = this.containerEl) === null || _b === void 0 ? void 0 : _b.querySelector(TypeAheadConsts.comboListSelector);
        this.clearBtnEL = (_c = this.containerEl) === null || _c === void 0 ? void 0 : _c.querySelector(TypeAheadConsts.comboClearButtonSelector);
        this.loadingEL = (_d = this.containerEl) === null || _d === void 0 ? void 0 : _d.querySelector(TypeAheadConsts.comboLoaderSelector);
        (_e = this.popupEL) === null || _e === void 0 ? void 0 : _e.insertAdjacentElement("beforebegin", input);
    };
    TypeaheadInput.prototype.setOptions = function (newOptions) {
        this.options = newOptions;
        this.setLoading(false);
        this.updateList();
    };
    TypeaheadInput.prototype.updateList = function () {
        var _this = this;
        var _a;
        this.clearList();
        if ((_a = this.options) === null || _a === void 0 ? void 0 : _a.length) {
            this.optionsListEL.classList.remove(TypeAheadConsts.comboNoDataClass);
            this.options.forEach(function (item) { return _this.addOption(item, TypeAheadConsts.comboOptionClass); });
            this.calculateDropDownPosition();
        }
        else {
            this.optionsListEL.classList.add(TypeAheadConsts.comboNoDataClass);
        }
    };
    TypeaheadInput.prototype.clearList = function () {
        this.warningOption = this.optionsListEL.querySelector(TypeAheadConsts.comboOptionDisabledSelector);
        this.optionsListEL.innerHTML = "";
        this.optionsListEL.appendChild(this.warningOption);
    };
    TypeaheadInput.prototype.showWarning = function () {
        window.gigya.utils.DOM.addClassToElement(this.inputEL, FormInput_1.FormInput_CONSTS.warnClass);
    };
    TypeaheadInput.prototype.removeWarning = function () {
        window.gigya.utils.DOM.removeClassFromElement(this.inputEL, FormInput_1.FormInput_CONSTS.warnClass);
    };
    TypeaheadInput.prototype.setLoading = function (on) {
        this.optionsListEL.classList.remove(TypeAheadConsts.comboNoDataClass);
        if (on)
            this.showPopup();
        this.loadingEL.style.display = on ? TypeAheadConsts.comboStyleDisplayBlock : TypeAheadConsts.comboStyleDisplayNone;
    };
    TypeaheadInput.prototype.handleOptionSelect = function (e) {
        e.stopPropagation();
        if (e.target.classList.contains(TypeAheadConsts.comboOptionClass)) {
            this.inputEL.value = e.target.textContent;
            this.clearBtnEL.style.display = TypeAheadConsts.comboStyleDisplayNone;
            this.inputEL.dispatchEvent(new Event("change"));
            if (this.afterSelectCallback) {
                this.afterSelectCallback();
            }
            this.hidePopup();
        }
    };
    TypeaheadInput.prototype.addOption = function (text, className) {
        var option = document.createElement("div");
        option.classList.add(className);
        option.setAttribute('tabindex', "0");
        option.setAttribute('aria-label', text);
        option.textContent = text;
        this.optionsListEL.appendChild(option);
    };
    TypeaheadInput.prototype.addEventListeners = function () {
        window.gigya.utils.DOM.addEventListener(this.bodyEl, "click", this.clickOutsideListener);
        window.gigya.utils.DOM.addEventListener(this.inputEL, "focus", this.inputFocusListener);
        window.gigya.utils.DOM.addEventListener(this.inputEL, "input", this.inputChangeListener);
        window.gigya.utils.DOM.addEventListener(this.optionsListEL, "click", this.optionsSelectListener);
        window.gigya.utils.DOM.addEventListener(this.clearBtnEL, "click", this.clearClickListener);
        window.gigya.utils.DOM.addEventListener(document, 'scroll', this.scrollListener);
        window.gigya.utils.DOM.addEventListener(document, "touchmove", this.scrollListener);
        window.gigya.utils.DOM.addEventListener(this.containerEl, "keydown", this.arrowKeyListener);
    };
    TypeaheadInput.prototype.onInputChange = function () {
        this.clearBtnEL.style.display = this.inputEL.value ? TypeAheadConsts.comboStyleDisplayBlock : TypeAheadConsts.comboStyleDisplayNone;
    };
    TypeaheadInput.prototype.onClearClick = function (e) {
        // Clear the input value and hide the clear button
        this.setValue("");
        this.setOptions([]);
        this.removeWarning();
        this.clearBtnEL.style.display = TypeAheadConsts.comboStyleDisplayNone;
        this.hidePopup();
    };
    Object.defineProperty(TypeaheadInput.prototype, "clickedOutside", {
        get: function () {
            return this._isClickOutside;
        },
        set: function (clicked) {
            this._isClickOutside = clicked;
        },
        enumerable: true,
        configurable: true
    });
    TypeaheadInput.prototype.onInputFocus = function (e) {
        var _a, _b;
        this.clickedOutside = false;
        this.removeWarning();
        if (((_b = (_a = e.target) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.length) >= this.minimumCharacters) {
            this.showPopup();
        }
    };
    TypeaheadInput.prototype.showPopup = function () {
        if (!this.isOpen) {
            this.popupEL.classList.add(TypeAheadConsts.comboActiveClass);
            this.isOpen = true;
            this.calculateDropDownPosition();
        }
    };
    TypeaheadInput.prototype.hidePopup = function () {
        if (this.isOpen) {
            this.popupEL.classList.remove(TypeAheadConsts.comboActiveClass);
            this.isOpen = false;
        }
    };
    TypeaheadInput.prototype.onClickOutside = function (event) {
        var _a;
        if (!((_a = this.inputEL[TemplateElement_1.TemplateElement_CONSTS.instanceOfArray]) === null || _a === void 0 ? void 0 : _a.length)) {
            this.removeListeners();
        }
        else if (!event.target.closest(TypeAheadConsts.comboWrapperSelector)) {
            this.hidePopup();
            this.clickedOutside = true;
            if (this._clickOutSideCallback) {
                this._clickOutSideCallback();
            }
        }
    };
    TypeaheadInput.prototype.removeListeners = function () {
        window.gigya.utils.DOM.removeEventListener(this.inputEL, "focus", this.inputFocusListener);
        window.gigya.utils.DOM.removeEventListener(this.inputEL, "input", this.inputChangeListener);
        window.gigya.utils.DOM.removeEventListener(this.optionsListEL, "click", this.optionsSelectListener);
        window.gigya.utils.DOM.removeEventListener(this.bodyEl, "click", this.clickOutsideListener);
        window.gigya.utils.DOM.removeEventListener(document, 'scroll', this.scrollListener);
        window.gigya.utils.DOM.removeEventListener(document, "touchmove", this.scrollListener);
        window.gigya.utils.DOM.removeEventListener(this.containerEl, "keydown", this.arrowKeyListener);
    };
    TypeaheadInput.prototype.calculateDropDownPosition = function () {
        var popupElHeight = 160;
        var inputPosition = this.inputEL.getBoundingClientRect();
        var inputWidth = inputPosition.width;
        var isOverflowing = inputPosition.top + popupElHeight >= window.innerHeight;
        this.popupEL.style.width = inputWidth + "px";
        this.popupEL.style.bottom = '';
        this.popupEL.style.top = '';
        isOverflowing ? this.popupEL.style.bottom = window.innerHeight - inputPosition.top + "px" :
            this.popupEL.style.top = inputPosition.top + inputPosition.height + "px";
    };
    TypeaheadInput.prototype.onScroll = function (event) {
        if (!DOM_1.isParentHasClass(event === null || event === void 0 ? void 0 : event.target, TypeAheadConsts.comboPopupClass)) {
            this.hidePopup();
        }
    };
    TypeaheadInput.prototype.useArrowKeys = function (event) {
        switch (event.keyCode) {
            case 38:
                this.moveUp(event);
                break;
            case 40:
                this.moveDown(event);
                break;
            case 13:
                this.handleOptionSelect(event);
        }
    };
    TypeaheadInput.prototype.moveUp = function (event) {
        var _a, _b;
        this.focusFirstChildInList(event);
        if ((_b = (_a = event.target) === null || _a === void 0 ? void 0 : _a.previousElementSibling) === null || _b === void 0 ? void 0 : _b.classList.contains(TypeAheadConsts.comboOptionClass)) {
            var htmlDiv = event.target;
            htmlDiv.classList.remove(TypeAheadConsts.comboOptionSelectedClass);
            htmlDiv.previousElementSibling.classList.add(TypeAheadConsts.comboOptionSelectedClass);
            htmlDiv.previousElementSibling.focus();
        }
    };
    TypeaheadInput.prototype.moveDown = function (event) {
        var _a;
        this.focusFirstChildInList(event);
        if ((_a = event.target.nextElementSibling) === null || _a === void 0 ? void 0 : _a.classList.contains(TypeAheadConsts.comboOptionClass)) {
            var htmlDiv = event.target;
            htmlDiv.classList.remove(TypeAheadConsts.comboOptionSelectedClass);
            htmlDiv.nextElementSibling.classList.add(TypeAheadConsts.comboOptionSelectedClass);
            htmlDiv.nextElementSibling.focus();
        }
    };
    TypeaheadInput.prototype.focusFirstChildInList = function (event) {
        var _a, _b;
        event.preventDefault();
        if ((_b = (_a = event.target) === null || _a === void 0 ? void 0 : _a.nextElementSibling) === null || _b === void 0 ? void 0 : _b.querySelector(TypeAheadConsts.comboListSelector)) {
            var options = this.optionsListEL.children;
            if (options.length > 1) { //first child is always teh disabled one. choose the second if exists.
                var firstAddressOption = options.item(1);
                if (firstAddressOption === null || firstAddressOption === void 0 ? void 0 : firstAddressOption.classList.contains(TypeAheadConsts.comboOptionClass)) {
                    firstAddressOption.classList.add(TypeAheadConsts.comboOptionSelectedClass);
                    firstAddressOption.focus();
                }
            }
        }
    };
    TypeaheadInput.prototype.evaluateConditionalAttributes = function () {
        _super.prototype.evaluateConditionalAttributes.call(this);
        if (this.isOpen) {
            this.calculateDropDownPosition();
        }
    };
    return TypeaheadInput;
}(ServerFormInput_1.ServerFormInput));
exports.TypeaheadInput = TypeaheadInput;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts":
/*!**************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var ScreenConsts_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts");
function isHidden(el) {
    while (el && el.parentElement) {
        if (el.style.visibility === 'hidden' || // hidden element
            el.style.display === 'none' || // hidden element
            (window.gigya.utils.DOM.isElementClass(el, 'gigya-error-display') && !window.gigya.utils.DOM.isElementClass(el, 'gigya-error-display-active')) || // hidden error message
            window.gigya.utils.DOM.isElementClass(el, 'ng-hide')) {
            // angular hidden element
            return true;
        }
        else {
            el = el.parentElement;
        }
    }
    return false;
}
exports.isHidden = isHidden;
function inIFrame() {
    try {
        return window.self !== window.top;
    }
    catch (e) {
        return true;
    }
}
exports.inIFrame = inIFrame;
function isFieldInHiddenContainer(el) {
    var curr = el;
    while (curr) {
        if (window.gigya.utils.DOM.isElementClass(curr, 'gigya-container') && !window.gigya.utils.DOM.isElementClass(curr, 'gigya-container-enabled'))
            return true;
        curr = curr.parentElement;
    }
    return false;
}
exports.isFieldInHiddenContainer = isFieldInHiddenContainer;
function hasParentAttribute(el, attrName, attrValue) {
    var curr = el;
    while (curr) {
        if (curr.getAttribute(attrName) === attrValue) {
            return true;
        }
        curr = curr.parentElement;
    }
    return false;
}
exports.hasParentAttribute = hasParentAttribute;
function firstPart(str, seperator) {
    var index = str.indexOf(seperator);
    return index > -1 ? str.substring(0, index) : str;
}
exports.firstPart = firstPart;
function LastIndexOf(arr, val, fromIndex) {
    if (fromIndex === void 0) { fromIndex = 0; }
    for (var i = arr.length; --i >= fromIndex;) {
        if (arr[i] === val)
            return i;
    }
    return -1;
}
exports.LastIndexOf = LastIndexOf;
function ForEach(arr, action) {
    for (var i = 0; i < arr.length; ++i) {
        action(arr[i], i, arr);
    }
}
exports.ForEach = ForEach;
function ForEachProp(obj, action) {
    for (var name in obj) {
        if (obj.hasOwnProperty(name))
            action(obj[name], name, obj);
    }
}
exports.ForEachProp = ForEachProp;
function Some(arr, condition) {
    for (var i = 0; i < arr.length; ++i) {
        if (condition(arr[i], i, arr))
            return true;
    }
    return false;
}
exports.Some = Some;
function Every(arr, condition) {
    for (var i = 0; i < arr.length; ++i) {
        if (!condition(arr[i], i, arr))
            return false;
    }
    return true;
}
exports.Every = Every;
function EveryProp(obj, condition) {
    for (var name in obj) {
        if (obj.hasOwnProperty(name) && !condition(obj[name], name, obj))
            return false;
    }
    return true;
}
exports.EveryProp = EveryProp;
function Map(arr, action) {
    var result = new Array();
    ForEach(arr, function (item, idx, arr) { return result.push(action(item, idx, arr)); });
    return result;
}
exports.Map = Map;
function DeepFreeze(obj) {
    // Only once IE9 is the minimum - currently IE7 is supported
    /*
        if (obj instanceof Object && !Object.isFrozen(obj[key])) {
            ForEachProp(obj, (prop) => DeepFreeze(prop));

            Object.freeze(obj);
        }
        */
}
exports.DeepFreeze = DeepFreeze;
function getElementsByHavingAttribute(parentElement, tagName, attributeName) {
    var arEls = new Array();
    var els = parentElement.getElementsByTagName(tagName);
    ForEach(els, function (el) {
        if (el.getAttribute(attributeName)) {
            arEls.push(el);
        }
    });
    return arEls;
}
exports.getElementsByHavingAttribute = getElementsByHavingAttribute;
function getElementsByHavingAttributePrefix(parentElement, attributePrefixes, tagNamesExceptions) {
    if (tagNamesExceptions === void 0) { tagNamesExceptions = []; }
    if (typeof attributePrefixes === 'string') {
        attributePrefixes = [attributePrefixes];
    }
    var elements = parentElement.getElementsByTagName('*');
    var matchingElements = new Array();
    for (var i = 0; i <= elements.length - 1; i++) {
        var el = elements.item(i);
        if (window.gigya.utils.array.indexOf(tagNamesExceptions, el.tagName.toLowerCase()) !== -1) {
            continue;
        }
        for (var _i = 0, attributePrefixes_1 = attributePrefixes; _i < attributePrefixes_1.length; _i++) {
            var attributePrefix = attributePrefixes_1[_i];
            if (isElementContainAttributePrefix(elements[i], attributePrefix)) {
                matchingElements.push(elements[i]);
                continue;
            }
        }
    }
    return matchingElements;
}
exports.getElementsByHavingAttributePrefix = getElementsByHavingAttributePrefix;
function isElementContainAttributePrefix(el, subString) {
    var elementAttributes = el.attributes;
    var containConditionalAttribute = false;
    if (elementAttributes) {
        for (var i = 0; i < elementAttributes.length; i++) {
            if (elementAttributes[i].nodeName.indexOf(subString) !== -1) {
                containConditionalAttribute = true;
                break;
            }
        }
    }
    return containConditionalAttribute;
}
exports.isElementContainAttributePrefix = isElementContainAttributePrefix;
function getConditionalAttributeExpressions(element, isWidgetContext) {
    if (isWidgetContext === void 0) { isWidgetContext = false; }
    if (!element) {
        return [];
    }
    var conditionalExpressions = new Array();
    var conditionalDefaultValue;
    var lastAttributeValue;
    var isParamTag = false;
    var attributes = getAttributesAsArray(element);
    ForEach(attributes, function (at) {
        try {
            // Check for conditional attribute prefix which determines if this attribute be evaluated.
            var isConditionalAttribute = at.nodeName.indexOf(ScreenConsts_1.Screen_CONSTS.conditionalAttributePrefix) !== -1;
            var isExpressionAttribute = at.nodeName.indexOf(ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix) !== -1;
            if (isConditionalAttribute || isExpressionAttribute) {
                var colonIndex = at.nodeName.indexOf(':');
                if (colonIndex !== -1) {
                    var targetAttribute = void 0;
                    if (isWidgetContext) {
                        conditionalDefaultValue = window.gigya._.plugins.utils.DOM.getAttribute(element, 'value');
                        targetAttribute = window.gigya._.plugins.utils.DOM.getAttribute(element, 'name');
                        isParamTag = element.tagName.toLowerCase() === 'param';
                    }
                    else {
                        targetAttribute = at.nodeName.substring(colonIndex + 1, at.nodeName.length);
                        lastAttributeValue = window.gigya._.plugins.utils.DOM.getAttribute(element, targetAttribute);
                        var defaultValueAttribute = 'gigya-default-' + targetAttribute;
                        if (!window.gigya._.plugins.utils.DOM.getAttribute(element, defaultValueAttribute)) {
                            window.gigya._.plugins.utils.DOM.setAttribute(element, defaultValueAttribute, lastAttributeValue !== null ? lastAttributeValue : 'null');
                        }
                        var val = window.gigya._.plugins.utils.DOM.getAttribute(element, defaultValueAttribute);
                        conditionalDefaultValue = val !== 'null' ? val : null;
                    }
                    // Conditionals are always ternary with special escaping and parsing done.
                    // In: expression ? value : otherValue
                    // Out: expression ? 'value' : 'otherValue'
                    //
                    // Expressions are parsed as-is and the returned value is set.
                    var conditionalExpression = !isExpressionAttribute
                        ? setupConditionalExpressionValue(at.nodeValue, conditionalDefaultValue)
                        : at.nodeValue;
                    var conditional = {
                        attributeName: targetAttribute,
                        condition: conditionalExpression,
                        defaultValue: conditionalDefaultValue,
                        lastAttributeValue: lastAttributeValue,
                        isWidgetParamTag: isParamTag,
                    };
                    conditionalExpressions.push(conditional);
                }
            }
        }
        catch (e) {
            throw new Error('Conditional format error: ' + e);
        }
    });
    return conditionalExpressions;
}
exports.getConditionalAttributeExpressions = getConditionalAttributeExpressions;
function setupConditionalExpressionValue(conditionalValue, defaultValue) {
    var expressionWithFalseValue = setupConditionalFalseValue(conditionalValue, defaultValue);
    var expressionWithEscaping = escapeCharactersInConditionalValue(expressionWithFalseValue);
    var finalConditionalExpression = setUpLastFalseValue(expressionWithEscaping);
    if (!defaultValue) {
        // fix default value to be a falsy value instead of a string literal
        var defaultValueLocation = finalConditionalExpression.lastIndexOf(":'" + defaultValue + "'");
        if (defaultValueLocation > -1) {
            finalConditionalExpression = finalConditionalExpression.substring(0, defaultValueLocation) + ":null";
        }
    }
    return finalConditionalExpression;
}
exports.setupConditionalExpressionValue = setupConditionalExpressionValue;
function setupConditionalFalseValue(conditionalValue, defaultValue) {
    // Make sure that the last 'false' value has a ':' sign and if it doesn't, add it and assign the default value, if there's one.
    var indexOfLastConditionResults = conditionalValue.lastIndexOf('?');
    var subStringOfLastConditionResults = conditionalValue.substr(indexOfLastConditionResults + 1, conditionalValue.length);
    var indexOfLastConditionResultsDivider = subStringOfLastConditionResults.indexOf(':');
    if (indexOfLastConditionResultsDivider === -1) {
        conditionalValue += ':';
        if (defaultValue) {
            conditionalValue += defaultValue;
        }
    }
    else {
        // check if there's a 'false' value or just an empty string
        var emptyFalseValue = subStringOfLastConditionResults.substr(indexOfLastConditionResultsDivider + 1, subStringOfLastConditionResults.length);
        if (emptyFalseValue === '') {
            conditionalValue = conditionalValue.substr(0, conditionalValue.length) + defaultValue;
        }
    }
    return conditionalValue;
}
function escapeCharactersInConditionalValue(conditionalValue) {
    // Escape any "'" signs.
    conditionalValue = conditionalValue.replace(/\'/g, "'");
    // Enclose all the 'true' values in ''
    conditionalValue = conditionalValue.replace(/\?/g, "?'");
    conditionalValue = conditionalValue.replace(/:/g, "':");
    return conditionalValue;
}
function setUpLastFalseValue(conditionalValue) {
    // Set an aphostrophe in the last 'false' if there isn't one
    // First: trim the last 'false' value for the aphostrophe insertion
    var indexOfLastConditionResults = conditionalValue.lastIndexOf('?');
    var subStringOfLastConditionResults = conditionalValue.substr(indexOfLastConditionResults + 1, conditionalValue.length);
    var falseResultStartIndex = subStringOfLastConditionResults.indexOf(':') + 1;
    var lastFalseResultValue = subStringOfLastConditionResults.substr(falseResultStartIndex, subStringOfLastConditionResults.length);
    lastFalseResultValue = window.gigya.utils.stringUtils.trim(lastFalseResultValue);
    if (lastFalseResultValue[0] != "'") {
        lastFalseResultValue = "'" + lastFalseResultValue;
    }
    if (lastFalseResultValue[lastFalseResultValue.length] != "'") {
        lastFalseResultValue += "'";
    }
    var lastTrueResultValue = subStringOfLastConditionResults.substr(0, falseResultStartIndex - 1);
    conditionalValue = conditionalValue.substr(0, indexOfLastConditionResults + 1) + lastTrueResultValue + ':' + lastFalseResultValue;
    return conditionalValue;
}
function isKeyCodeDisplayable(keycode) {
    return ((keycode > 47 && keycode < 58) || // number keys
        (keycode == 32 || keycode == 13) || // spacebar & return key(s)
        (keycode > 64 && keycode < 91) || // letter keys
        (keycode > 95 && keycode < 112) || // numpad keys
        (keycode > 185 && keycode < 193) || // ;=,-./` (in order)
        (keycode > 218 && keycode < 223)); // [\]' (in order)
}
exports.isKeyCodeDisplayable = isKeyCodeDisplayable;
exports.UnitMeasurementType = {
    pixel: 'px',
    percentage: '%',
    auto: '',
};
function getUnitMeasurementType(value) {
    if (value === void 0) { value = ''; }
    var unitType;
    if (value === null || value == 'auto') {
        unitType = exports.UnitMeasurementType.auto;
    }
    else {
        unitType = value.indexOf('%') != -1 ? exports.UnitMeasurementType.percentage : exports.UnitMeasurementType.pixel;
    }
    return unitType;
}
exports.getUnitMeasurementType = getUnitMeasurementType;
function getAttributesAsArray(el) {
    var attributes = [];
    var elementAttributes = el.attributes;
    // A workaround for IE8
    for (var i = 0; i < elementAttributes.length; i++) {
        attributes.push(elementAttributes[i]);
    }
    return attributes;
}
exports.getAttributesAsArray = getAttributesAsArray;
function endsWith(s, suffix) {
    return s.indexOf(suffix, s.length - suffix.length) !== -1;
}
exports.endsWith = endsWith;
function hasIndex(key) {
    return /\[[0-9]]|\.[0-9]/.test(key);
}
exports.hasIndex = hasIndex;
function removeSerializedKeyLastEnumerator(key) {
    return key.replace(/[0-9]\.(?=[^.]*$)/, '').replace(/\[[0-9]](?=[^\[]*$)/, '');
}
exports.removeSerializedKeyLastEnumerator = removeSerializedKeyLastEnumerator;
function removeSerializedKeyEdgeProperty(key) {
    return key.substr(0, key.lastIndexOf('.'));
}
exports.removeSerializedKeyEdgeProperty = removeSerializedKeyEdgeProperty;
function IETemplateElementPolyfill(doc) {
    if (doc === void 0) { doc = document; }
    var support = 'content' in document.createElement('template');
    // Set the content property if missing
    if (!support) {
        var /**
             * Prefer an array to a NodeList
             * Otherwise, updating the content property of a node
             * will update the NodeList and we'll loose the nested <template>
             */ templates = Array.prototype.slice.call(document.getElementsByTagName('template')), template, content, fragment, node, i = 0, j;
        // For each <template> element get its content and wrap it in a document fragment
        while ((template = templates[i++]) && !template.content) {
            content = template.children;
            fragment = document.createDocumentFragment();
            while (content[0]) {
                fragment.appendChild(content[0]);
            }
            template.content = fragment;
        }
    }
}
exports.IETemplateElementPolyfill = IETemplateElementPolyfill;
function replaceAttribute(htmlElement, fromAttribute, toAttribute) {
    try {
        var templateEls = htmlElement === null || htmlElement === void 0 ? void 0 : htmlElement.querySelectorAll("[" + fromAttribute + "]");
        ForEach(templateEls, function (el) {
            el.setAttribute(toAttribute, el.getAttribute(fromAttribute));
            el.removeAttribute(fromAttribute);
        });
    }
    catch (ex) { }
}
exports.replaceAttribute = replaceAttribute;
function isDOMXSS(text) {
    var dummyDomElement = document.createElement('span');
    dummyDomElement.innerText = text;
    return dummyDomElement.innerHTML !== text;
}
exports.isDOMXSS = isDOMXSS;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorEventUtil.ts":
/*!*****************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorEventUtil.ts ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
function dispatchErrorEvent(screen, formId, _a) {
    var response = _a.response, context = _a.context;
    var errorEvent = {
        eventName: 'error',
        response: response,
        statusMessage: response === null || response === void 0 ? void 0 : response.statusMessage,
        errorMessage: response === null || response === void 0 ? void 0 : response.errorMessage,
        errorDetails: response === null || response === void 0 ? void 0 : response.errorDetails,
        errorCode: response === null || response === void 0 ? void 0 : response.errorCode,
        context: context,
        form: formId,
    };
    screen.dispatchEvent('error', tslib_1.__assign({}, errorEvent));
}
exports.dispatchErrorEvent = dispatchErrorEvent;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorMessageUtil.ts":
/*!*******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/errorMessageUtil.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
function getOtpErrorMessage(response, defaultMessage) {
    if (defaultMessage === void 0) { defaultMessage = 'general_error'; }
    if (!response) {
        return defaultMessage;
    }
    var errorCode = Number(response.errorCode);
    if (errorCode === GSErrors_1.GSErrors.OK) {
        return null;
    }
    if (errorCode === GSErrors_1.GSErrors.MISSING_REQUIRED_PARAMETER && response.errorDetails) {
        if (utils_1.endsWith(response.errorDetails, 'code')) {
            return 'please_enter_a_valid_code';
        }
    }
    if (errorCode === GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE && response.errorDetails) {
        if (utils_1.endsWith(response.errorDetails, 'Invalid parameter value : phoneNumber')) {
            return 'invalid_fieldname';
        }
        if (utils_1.endsWith(response.errorDetails, 'PhoneNumber is missing country code')) {
            return 'invalid_fieldname';
        }
        if (utils_1.endsWith(response.errorDetails, 'Token has been revoked')) {
            return 'otp_code_expired';
        }
        if (utils_1.endsWith(response.errorDetails, 'phvToken is expired')) {
            return 'otp_code_expired';
        }
        if (utils_1.endsWith(response.errorDetails, 'code')) {
            return 'please_enter_a_valid_code';
        }
    }
    if (errorCode === GSErrors_1.GSErrors.FORBIDDEN) {
        return 'forbidden_error';
    }
    if (errorCode === GSErrors_1.GSErrors.FREQUENCY_LIMIT_REACHED ||
        errorCode === GSErrors_1.GSErrors.LIMIT_REACHED ||
        errorCode === GSErrors_1.GSErrors.API_RATE_LIMIT_EXCEEDED) {
        return 'code_frequency_limit_reached';
    }
    return defaultMessage;
}
exports.getOtpErrorMessage = getOtpErrorMessage;


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/expandableWidget.ts":
/*!*******************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils/expandableWidget.ts ***!
  \*******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var CONSTS = {
    containerClass: 'gigya-container',
    containerEnabledClass: 'gigya-container-enabled',
};
function changeExpandedState(el, expandedStateAttribute, isExpanded) {
    if (!el || !expandedStateAttribute) {
        return;
    }
    el === null || el === void 0 ? void 0 : el.setAttribute(expandedStateAttribute, isExpanded ? 'true' : 'false');
    updateContainerClasses(el, isExpanded);
}
exports.changeExpandedState = changeExpandedState;
// When widget is collapsed and form is submitted, the fields inside the collapsed widget should not be validated.
// The validation is prevented by adding containerClass
function updateContainerClasses(el, isExpanded) {
    window.gigya.utils.DOM.addClassToElement(el, CONSTS.containerClass);
    if (isExpanded) {
        window.gigya.utils.DOM.addClassToElement(el, CONSTS.containerEnabledClass);
    }
    else {
        window.gigya.utils.DOM.removeClassFromElement(el, CONSTS.containerEnabledClass);
    }
}


/***/ }),

/***/ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/visbleWhenHelper.ts":
/*!*************************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/visbleWhenHelper.ts ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var utils_1 = __webpack_require__(/*! ./utils */ "./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts");
var LoginMethods;
(function (LoginMethods) {
    LoginMethods[LoginMethods["social"] = 0] = "social";
    LoginMethods[LoginMethods["site"] = 1] = "site";
    LoginMethods[LoginMethods["siteOnly"] = 2] = "siteOnly";
    LoginMethods[LoginMethods["socialOnly"] = 3] = "socialOnly";
    LoginMethods[LoginMethods["siteAndSocial"] = 4] = "siteAndSocial";
    LoginMethods[LoginMethods["emailOtp"] = 5] = "emailOtp";
    LoginMethods[LoginMethods["phone"] = 6] = "phone";
    LoginMethods[LoginMethods["site-only"] = 2] = "site-only";
    LoginMethods[LoginMethods["social-only"] = 3] = "social-only";
    LoginMethods[LoginMethods["site-and-social"] = 4] = "site-and-social";
})(LoginMethods = exports.LoginMethods || (exports.LoginMethods = {}));
utils_1.DeepFreeze(LoginMethods);
function showAuthMethodAccordingToExistingLoginProviders(authMethod, availableLoginProviders) {
    if (!authMethod) {
        return true;
    }
    if (isSocialProvider(authMethod) && hasSocial(availableLoginProviders)) {
        return true;
    }
    return window.gigya.utils.array.some(availableLoginProviders, function (provider) { return (provider === null || provider === void 0 ? void 0 : provider.toLowerCase()) === (authMethod === null || authMethod === void 0 ? void 0 : authMethod.toLowerCase()); });
}
exports.showAuthMethodAccordingToExistingLoginProviders = showAuthMethodAccordingToExistingLoginProviders;
function showIdentityAccordingToExistingLoginProviders(widgetSiteIdentities, availableLoginProviders) {
    if (visibleWhenSiteOnly(widgetSiteIdentities)) {
        return hasSite(availableLoginProviders) && !hasSocial(availableLoginProviders);
    }
    if (visibleWhenSocialOnly(widgetSiteIdentities)) {
        return hasSocial(availableLoginProviders) && !hasSite(availableLoginProviders);
    }
    if (visibleWhenSocial(widgetSiteIdentities)) {
        return hasSocial(availableLoginProviders);
    }
    if (visibleWhenSite(widgetSiteIdentities)) {
        return hasSite(availableLoginProviders);
    }
    if (visibleWhenSiteAndSocial(widgetSiteIdentities)) {
        return hasSite(availableLoginProviders) && hasSocial(availableLoginProviders);
    }
    return hasMatchingProvider(widgetSiteIdentities, availableLoginProviders);
}
exports.showIdentityAccordingToExistingLoginProviders = showIdentityAccordingToExistingLoginProviders;
function hasMatchingProvider(allowedMethods, existingMethods) {
    return utils_1.Some(allowedMethods, function (ap) { return utils_1.Some(existingMethods, function (lp) { return lp === ap; }); });
}
function hasSocial(existingLoginProviders) {
    return isAllAllowed(existingLoginProviders) || utils_1.Some(existingLoginProviders, function (p) { return isSocialProvider(p); });
}
function hasSite(existingLoginProviders) {
    return isAllAllowed(existingLoginProviders) ||
        hasPassword(existingLoginProviders) || hasEmailOtp(existingLoginProviders) || hasPhone(existingLoginProviders);
}
function hasPassword(existingLoginProviders) {
    return isMethodAllowed(existingLoginProviders, LoginMethods.site);
}
function hasEmailOtp(existingLoginProviders) {
    return isAllAllowed(existingLoginProviders) || isMethodAllowed(existingLoginProviders, LoginMethods.emailOtp);
}
function hasPhone(existingLoginProviders) {
    return isAllAllowed(existingLoginProviders) || isMethodAllowed(existingLoginProviders, LoginMethods.phone);
}
function isMethodAllowed(existingLoginProviders, method) {
    if (isAllAllowed(existingLoginProviders)) {
        return true;
    }
    return utils_1.Some(existingLoginProviders, function (p) { return p === normalizeMethodName(method); });
}
function isAllAllowed(existingLoginProviders) {
    return !(existingLoginProviders === null || existingLoginProviders === void 0 ? void 0 : existingLoginProviders.length);
}
function isSocialProvider(loginProvider) {
    return (loginProvider === null || loginProvider === void 0 ? void 0 : loginProvider.toLowerCase()) !== normalizeMethodName(LoginMethods.site) &&
        (loginProvider === null || loginProvider === void 0 ? void 0 : loginProvider.toLowerCase()) !== normalizeMethodName(LoginMethods.emailOtp) &&
        (loginProvider === null || loginProvider === void 0 ? void 0 : loginProvider.toLowerCase()) !== normalizeMethodName(LoginMethods.phone);
}
function visibleWhenSite(allowedLoginMethods) {
    return utils_1.Some(allowedLoginMethods, function (method) { return isAllowedMethod(method, LoginMethods.site); });
}
function visibleWhenSiteOnly(allowedLoginMethods) {
    return utils_1.Some(allowedLoginMethods, function (method) { return isAllowedMethod(method, LoginMethods.siteOnly); });
}
function visibleWhenSocial(allowedLoginMethods) {
    return utils_1.Some(allowedLoginMethods, function (method) { return isAllowedMethod(method, LoginMethods.social); });
}
function visibleWhenSocialOnly(allowedLoginMethods) {
    return utils_1.Some(allowedLoginMethods, function (method) { return isAllowedMethod(method, LoginMethods.socialOnly); });
}
function visibleWhenSiteAndSocial(allowedLoginMethods) {
    return utils_1.Some(allowedLoginMethods, function (method) { return isAllowedMethod(method, LoginMethods.siteAndSocial); });
}
function isAllowedMethod(method, allowedMethod) {
    return (method === null || method === void 0 ? void 0 : method.toLowerCase()) === normalizeMethodName(allowedMethod);
}
function normalizeMethodName(provider) {
    var _a;
    return (_a = LoginMethods[provider]) === null || _a === void 0 ? void 0 : _a.toLowerCase();
}


/***/ }),

/***/ "./src/accounts/Gigya.Js.Plugin.Tfa/app/helpers/Utils.ts":
/*!***************************************************************!*\
  !*** ./src/accounts/Gigya.Js.Plugin.Tfa/app/helpers/Utils.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
function getElementByClassName(container, className) {
    return window.gigya.utils.DOM.getElementsByClass(container, className)[0];
}
exports.getElementByClassName = getElementByClassName;
function createActionInterval(tfaProvider, action, interval, cancelCondition) {
    var _this = this;
    if (cancelCondition === void 0) { cancelCondition = function () { return false; }; }
    var count = 1;
    var canContinue = false;
    action(count).then(function () { return canContinue = true; });
    var renderIntervalId = setInterval(function () { return tslib_1.__awaiter(_this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!(cancelCondition(count) || !tfaProvider.isActive())) return [3 /*break*/, 1];
                    clearInterval(renderIntervalId);
                    return [3 /*break*/, 3];
                case 1:
                    if (!canContinue) return [3 /*break*/, 3];
                    canContinue = false;
                    return [4 /*yield*/, action(++count)];
                case 2:
                    _a.sent();
                    canContinue = true;
                    _a.label = 3;
                case 3: return [2 /*return*/];
            }
        });
    }); }, interval);
}
exports.createActionInterval = createActionInterval;
function bindEnterKey(el1, el2) {
    var listenEl = el1;
    var buttonEl = el2 || el1;
    window.gigya.utils.DOM.addEventListener(listenEl, 'keyup', function (event) {
        // Submit on ENTER if button or listener element.
        // Submit on SPACE if button.
        if ((event.code === 'Space') || (event.code === 'Enter' && !el2) || (event.key === 'Enter')) {
            buttonEl.click();
        }
    });
}
exports.bindEnterKey = bindEnterKey;


/***/ }),

/***/ "./src/accounts/constants.ts":
/*!***********************************!*\
  !*** ./src/accounts/constants.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var EditableTfaProvidersTypes;
(function (EditableTfaProvidersTypes) {
    EditableTfaProvidersTypes[EditableTfaProvidersTypes["gigyaPhone"] = 0] = "gigyaPhone";
    EditableTfaProvidersTypes[EditableTfaProvidersTypes["gigyaTotp"] = 1] = "gigyaTotp";
    EditableTfaProvidersTypes[EditableTfaProvidersTypes["gigyaPush"] = 2] = "gigyaPush";
    EditableTfaProvidersTypes[EditableTfaProvidersTypes["livelink"] = 3] = "livelink";
})(EditableTfaProvidersTypes = exports.EditableTfaProvidersTypes || (exports.EditableTfaProvidersTypes = {}));
exports.gigyaAssertionExpiration = 60 * 5 * 1000;
exports.sensitiveParamsOverride = 'login_token';
exports.GIGYA_PARAM_PREFIX = 'gig_';
exports.GIGYA_INTERNAL_PARAM_PREFIX = exports.GIGYA_PARAM_PREFIX + "i_";
exports.GIGYA_INTERNAL_PARAMS = exports.GIGYA_PARAM_PREFIX + "actions";


/***/ }),

/***/ "./src/core/Gigya.Js.Adapters.Web/app/SsoService.ts":
/*!**********************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/SsoService.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var sso_1 = __webpack_require__(/*! src/fidm/Gigya.JS.SSO/app/sso */ "./src/fidm/Gigya.JS.SSO/app/sso.ts");
var domains_1 = __webpack_require__(/*! ../../Gigya.Js/app/Utils/domains */ "./src/core/Gigya.Js/app/Utils/domains.ts");
var utils_1 = __webpack_require__(/*! ../../ServiceProxy/utils */ "./src/core/ServiceProxy/utils.ts");
var FlagService_1 = __webpack_require__(/*! ../../Gigya.Js/app/Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
var ServiceProxy_1 = __webpack_require__(/*! ../../ServiceProxy/ServiceProxy */ "./src/core/ServiceProxy/ServiceProxy.ts");
// ### Single Sign On across multiple domains ###
var callbackCounter = 0;
exports._requestTimeout = 3000;
var SsoService = /** @class */ (function () {
    function SsoService() {
    }
    SsoService.getInstance = function (ssoKey) {
        if (ssoKey === void 0) { ssoKey = window.gigya.partnerSettings.ssoKey; }
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var qs, url, ssoAdapter, error_1;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!this._instance) return [3 /*break*/, 7];
                        if (!!ssoKey) return [3 /*break*/, 1];
                        return [2 /*return*/, null];
                    case 1:
                        if (!FlagService_1.FlagService.loadSsoFrameOnlyOnce) return [3 /*break*/, 6];
                        qs = window.gigya.utils.keyValue.serialize({
                            APIKey: ssoKey,
                            version: window.gigya.build.version,
                            build: window.gigya.build.number || -1,
                            sourceKey: window.gigya.thisScript.APIKey,
                            oneFrame: true,
                            origin: window.gigya.localInfo.protocol + "://" + document.location.hostname,
                            ssoSegment: window.gigya.partnerSettings.ssoSegment || ''
                        });
                        url = "https://" + domains_1.getStorageDomain() + "/gs/sso.htm?" + qs;
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, , 5]);
                        ssoAdapter = new ServiceProxy_1.ServiceProxy(url);
                        return [4 /*yield*/, ssoAdapter.init('SSO')];
                    case 3:
                        _a.sent();
                        this._instance = ssoAdapter.wrapWith(sso_1.Sso);
                        return [3 /*break*/, 5];
                    case 4:
                        error_1 = _a.sent();
                        window.gigya.logger.error("error initialize sso frame", {
                            scope: 'SsoService.init',
                            error: error_1
                        });
                        this._instance = new SsoService();
                        return [3 /*break*/, 5];
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        this._instance = new SsoService();
                        _a.label = 7;
                    case 7: return [2 /*return*/, this._instance];
                }
            });
        });
    };
    SsoService.prototype.checkTokenRenew = function (loginToken) {
        return new gigya.Promise(function (resolve) {
            checkTokenRenew({ loginToken: loginToken, callback: resolve });
        });
    };
    SsoService.prototype.getToken = function () {
        return new gigya.Promise(function (resolve) {
            getGroupToken({ callback: resolve });
        });
    };
    SsoService.prototype.getTokenExpiration = function () {
        return new gigya.Promise(function (resolve) {
            getLoginTokenExp({
                callback: resolve
            });
        });
    };
    SsoService.prototype.logout = function () {
        return new gigya.Promise(function (resolve) {
            logout({
                callback: resolve
            });
        });
    };
    SsoService.prototype.removeToken = function () {
        return new gigya.Promise(function (resolve) {
            removeGroupToken({ callback: resolve });
        });
    };
    SsoService.prototype.setGroupContext = function (groupContext) {
        return new gigya.Promise(function (resolve) {
            setGroupContextCookie({ groupContext: groupContext, callback: resolve });
        });
    };
    SsoService.prototype.setToken = function (lt, expiration, gltexp) {
        return new gigya.Promise(function (resolve) {
            setGroupToken({
                lt: lt, expiration: expiration, gltexp: gltexp, callback: resolve
            });
        });
    };
    SsoService.prototype.setTokenExpiration = function (loginTokenExp, useCache) {
        if (useCache === void 0) { useCache = true; }
        return new gigya.Promise(function (resolve) {
            setLoginTokenExp({
                loginTokenExp: loginTokenExp,
                callback: resolve
            }, useCache);
        });
    };
    SsoService.prototype.syncCanaryIndication = function (isCanary, canaryVersion) {
        return new gigya.Promise(function (resolve) {
            syncCanaryIndication({ isCanary: isCanary, canaryVersion: canaryVersion, callback: resolve });
        });
    };
    SsoService.prototype.getGroupApiDomain = function () {
        return new gigya.Promise(function (resolve) {
            getGroupApiDomain({ callback: resolve });
        });
    };
    SsoService.prototype.setGroupApiDomain = function (domain) {
        return new gigya.Promise(function (resolve) {
            setGroupApiDomain({ callback: resolve, domain: domain });
        });
    };
    return SsoService;
}());
exports.SsoService = SsoService;
function _request(mode, p) {
    if (!window.gigya.partnerSettings.ssoKey) {
        if (p && p.callback) {
            p.callback({});
        }
        return;
    }
    var params;
    if (!p) {
        params = {};
    }
    else {
        // Ensure the params passed are not modified by reference.
        params = window.gigya.utils.object.clone(p);
    }
    var ifr;
    var requestTimeoutId;
    var callback = function (response) {
        window.gigya.logger.debug("cleaning sso iframe");
        // cleanup iframe
        ifr.parentNode.removeChild(ifr);
        clearTimeout(requestTimeoutId);
        // Typecast response.
        if (response) {
            if (response.errorCode && typeof response.errorCode === 'string') {
                response.errorCode = Number(response.errorCode);
            }
            if (response.expires_in && typeof response.expires_in === 'string') {
                response.expires_in = Number(response.expires_in);
            }
        }
        if (p && p.callback) {
            p.callback(response);
        }
    };
    params.m = mode;
    params.d = window.gigya.localInfo.protocol + "://" + document.location.hostname;
    if (document.location.port) {
        params.d += ':' + document.location.port;
    }
    // Chrome caches the fragment when loaded for the first time. workaround:
    params.callbackID = 'gig_sso_cb' + new Date().getTime() + '_' + callbackCounter++;
    params.sAPIKey = window.gigya.thisScript.APIKey;
    params[window.gigya.logger.configKey] = JSON.stringify(window.gigya.logger.getConfig());
    var fragment = window.gigya.utils.keyValue.serialize(params);
    var iframeLoader = function (retries) {
        if (retries === void 0) { retries = 0; }
        window.gigya.utils.xd.addMessageListener(params.callbackID, {}, false, callback, window.gigya._.MessagingMethod.PostMessage);
        ifr = _getIframe(params.callbackID);
        var fnOnLoad = function () {
            requestTimeoutId = setTimeout(function () {
                // total failure
                if (retries <= 0) {
                    window.gigya.logger.error("SSO Communication Timeout", {
                        IE11PrivateMode: window.gigya.localInfo.isIE11 && !window.indexedDB, mode: mode
                    });
                    return;
                }
                // reset
                window.gigya.utils.xd.removeMessageListener(params.callbackID);
                window.gigya.utils.DOM.removeElement(ifr);
                // retry
                iframeLoader(retries - 1);
            }, exports._requestTimeout);
            var qs = window.gigya.utils.keyValue.serialize({
                APIKey: window.gigya.partnerSettings.ssoKey,
                ssoSegment: window.gigya.partnerSettings.ssoSegment || '',
                version: window.gigya.build.version,
                build: window.gigya.build.number || -1,
            });
            // should always load from gigya's domain except when overriden for #50261.
            ifr.src = "https://" + domains_1.getStorageDomain() + "/gs/sso.htm?" + qs + "#" + fragment;
            window.gigya.utils.DOM.removeEventListener(ifr, 'load', fnOnLoad);
        };
        window.gigya.utils.DOM.addEventListener(ifr, 'load', fnOnLoad);
        window.gigya.logger.debug("opening sso iframe", params);
        if (document.body) {
            window.gigya.utils.DOM.appendToBody(ifr);
        }
        else {
            window.gigya.utils.functions.invokeOnPageLoad(function () { return window.gigya.utils.DOM.appendToBody(ifr); });
        }
    };
    iframeLoader(3);
}
exports._request = _request;
function _getIframe(requestId) {
    var ifr;
    if (FlagService_1.FlagService.hideSSOFrame) {
        ifr = utils_1.createIframe('SSO Frame');
    }
    else {
        ifr = document.createElement('iframe');
        // Absolute position with -1000px causes scrolling slowdowns on mobile devices.
        if (window.gigya.localInfo.isIOS || window.gigya.localInfo.isIOSChrome || window.gigya.localInfo.isAndroid) {
            ifr.style.width = '0px';
            ifr.style.height = '0px';
            ifr.style.display = 'none';
        }
        else {
            ifr.style.width = '30px';
            ifr.style.height = '10px';
            ifr.style.position = 'absolute';
            ifr.style.top = '-1000px';
            ifr.style.left = '-1000px';
        }
    }
    ifr.id = 'gig_sso_' + requestId;
    window.gigya.utils.functions.addSrcToIFrameIfNeeded(ifr);
    return ifr;
}
function getGroupToken(params) {
    window.gigya.logger.info("trying to get sso group login token");
    _request('getToken', {
        callback: function (response) {
            exports._storedLoginTokenExp = response.gltexp;
            if (params && params.callback) {
                params.callback(response);
            }
        },
    });
}
exports.getGroupToken = getGroupToken;
function setGroupToken(params) {
    // Add current gltexp cookie to the parameters automatically.
    if (!params.gltexp) {
        params.gltexp = window.gigya.utils.cookie.get("gltexp_" + window.gigya.thisScript.APIKey);
    }
    _request('setToken', params);
}
exports.setGroupToken = setGroupToken;
function logout(params) {
    _request('logout', params);
}
exports.logout = logout;
function removeGroupToken(params) {
    _request('removeToken', params);
}
exports.removeGroupToken = removeGroupToken;
function setLoginTokenExp(params, useCache) {
    if (useCache === void 0) { useCache = true; }
    // Don't store the login token again if we've already stored it.
    if (useCache && exports._storedLoginTokenExp && params.loginTokenExp === exports._storedLoginTokenExp) {
        if (params.callback) {
            params.callback({ gltexp: exports._storedLoginTokenExp });
        }
        return;
    }
    exports._storedLoginTokenExp = params.loginTokenExp;
    _request('setLoginTokenExp', params);
}
exports.setLoginTokenExp = setLoginTokenExp;
function getLoginTokenExp(params) {
    _request('getLoginTokenExp', params);
}
exports.getLoginTokenExp = getLoginTokenExp;
function checkTokenRenew(params) {
    window.gigya.logger.info("verifying login token with sso group");
    _request('checkTokenRenew', params);
}
exports.checkTokenRenew = checkTokenRenew;
function syncCanaryIndication(params) {
    _request('syncCanaryIndication', params);
}
exports.syncCanaryIndication = syncCanaryIndication;
function setGroupContextCookie(params) {
    _request('setGroupContext', params);
}
exports.setGroupContextCookie = setGroupContextCookie;
function setGroupApiDomain(params) {
    _request('setGroupApiDomain', params);
}
exports.setGroupApiDomain = setGroupApiDomain;
function getGroupApiDomain(params) {
    _request('getGroupApiDomain', params);
}
exports.getGroupApiDomain = getGroupApiDomain;


/***/ }),

/***/ "./src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts":
/*!**********************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var SsoService_1 = __webpack_require__(/*! src/core/Gigya.Js.Adapters.Web/app/SsoService */ "./src/core/Gigya.Js.Adapters.Web/app/SsoService.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var SessionService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Services/SessionService */ "./src/core/Gigya.Js/app/Services/SessionService.ts");
var FlagService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
// Load and save tokens based on API keys
var _curSessionExpiration;
var _bearerToken = null;
var _triedGACs = {};
exports.activeNamespaces = {};
function isValidGltExp(gltexp) {
    if (gltexp === void 0) { gltexp = getGltexpCookie(); }
    return !gltexp || window.gigya.utils.gltexp.isValid(gltexp);
}
exports.isValidGltExp = isValidGltExp;
function getGltexpCookie(APIKey) {
    if (APIKey === void 0) { APIKey = window.gigya.thisScript.APIKey; }
    return window.gigya.utils.cookie.get(getGltCookieKey(APIKey));
}
exports.getGltexpCookie = getGltexpCookie;
function setGltexp(gltexp, APIKey) {
    if (APIKey === void 0) { APIKey = window.gigya.thisScript.APIKey; }
    if (gltexp && !isGigyaCookieDomain()) {
        window.gigya.utils.cookie.remove(getGltCookieKey(APIKey));
        if (FlagService_1.FlagService.setCookieSameSiteLaxSession) {
            window.gigya.utils.cookie.set(getGltCookieKey(APIKey), gltexp, null, null, null, 'Lax');
        }
        else {
            window.gigya.utils.cookie.set(getGltCookieKey(APIKey), gltexp);
        }
    }
}
exports.setGltexp = setGltexp;
function getGltCookieKey(APIKey) {
    return "gltexp_" + APIKey;
}
function _getTokenCookieName(APIKey) {
    if (APIKey === void 0) { APIKey = window.gigya.thisScript.APIKey; }
    if (APIKey) {
        return 'glt_' + APIKey;
    }
    else {
        return '_gig_lt';
    }
}
function get(APIKey) {
    if (APIKey === void 0) { APIKey = window.gigya.thisScript.APIKey; }
    var lt = window.gigya.utils.cookie.get(_getTokenCookieName(APIKey));
    if (lt) {
        return lt.split('|')[0];
    }
    else {
        return null;
    }
}
exports.get = get;
function set(APIKey, login_token, expires_in, sessionExpiration) {
    window.gigya.utils.localStorage.removeItem('gigyaSettings');
    window.gigya.logger.info("setting a new login token");
    if (!APIKey) {
        APIKey = window.gigya.thisScript.APIKey;
    }
    if (APIKey) {
        if (FlagService_1.FlagService.setCookieSameSiteLaxSession) {
            window.gigya.utils.cookie.set('glt_' + APIKey, login_token, expires_in, null, null, 'Lax');
        }
        else {
            window.gigya.utils.cookie.set('glt_' + APIKey, login_token, expires_in);
        }
        window.gigya.utils.cookie.remove('gac_' + APIKey);
    }
    else {
        if (FlagService_1.FlagService.setCookieSameSiteLaxSession) {
            window.gigya.utils.cookie.set('_gig_lt', login_token, expires_in, null, null, 'Lax');
        }
        else {
            window.gigya.utils.cookie.set('_gig_lt', login_token, expires_in);
        }
    }
    _curSessionExpiration = sessionExpiration;
}
exports.set = set;
function getCurrentSessionExpiration() {
    return _curSessionExpiration;
}
exports.getCurrentSessionExpiration = getCurrentSessionExpiration;
function getGACCookie() {
    return window.gigya.thisScript.APIKey && window.gigya.utils.cookie.get('gac_' + window.gigya.thisScript.APIKey);
}
exports.getGACCookie = getGACCookie;
function setFromAuthCode(authCode) {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, new gigya.Promise(function (resolve) {
                    setFromGAC({}, resolve, authCode);
                })];
        });
    });
}
exports.setFromAuthCode = setFromAuthCode;
function setFromGAC(params, callback, gac) {
    if (gac === void 0) { gac = getGACCookie(); }
    if (window.gigya.thisScript.APIKey) {
        if (gac && !params['neverTryGAC']) {
            // Sometimes gac is set with surrounding double-quotes (like in java). Strip quotes.
            if (gac.charAt(0) === '"' && gac.charAt(gac.length - 1) === '"') {
                gac = gac.substring(1, gac.length - 1);
            }
            if (_triedGACs[gac]) {
                callback(); // Already tried, don't try again.
                return;
            }
            _triedGACs[gac] = true;
            window.gigya.socialize.updateRefUID();
            window.gigya.socialize.notifyLogin({
                ignoreApiQueue: true,
                neverTryGAC: true,
                authCode: gac,
                APIKey: window.gigya.thisScript.APIKey,
                client_id: window.gigya.thisScript.APIKey
            }, {
                // Intentionally we're not raising onLogin event, as no login was made, just established (verified in bug 43419).
                callback: function () {
                    window.gigya.utils.cookie.remove('gac_' + window.gigya.thisScript.APIKey);
                    callback();
                    // neverTryGAC is used to avoid trying setFromGac forever if the cookie wasn't removed (when a wrong baseDomain is used)
                    window.gigya.socialize.refreshUI({
                        neverTryGAC: true
                    });
                },
            });
        }
        else {
            callback();
        }
    }
    else {
        callback();
    }
}
exports.setFromGAC = setFromGAC;
function setFromSsoResponse(res, APIKey) {
    if (APIKey === void 0) { APIKey = window.gigya.thisScript.APIKey; }
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var _this = this;
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, new gigya.Promise(function (resolve) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
                    var _a, expires_in, groupContext, gltexpCookieName;
                    return tslib_1.__generator(this, function (_b) {
                        switch (_b.label) {
                            case 0:
                                if (!res)
                                    return [2 /*return*/];
                                _a = res.errorCode;
                                switch (_a) {
                                    case GSErrors_1.GSErrors.UNAUTHORIZED_USER: return [3 /*break*/, 1];
                                    case GSErrors_1.GSErrors.INVALID_TOKEN: return [3 /*break*/, 2];
                                    case GSErrors_1.GSErrors.TOKEN_HAS_RENEWED: return [3 /*break*/, 3];
                                    case GSErrors_1.GSErrors.OK: return [3 /*break*/, 3];
                                    case GSErrors_1.GSErrors.NETWORK_ERROR: return [3 /*break*/, 5];
                                }
                                return [3 /*break*/, 6];
                            case 1:
                                window.gigya.logger.info("no group session found");
                                remove(APIKey);
                                return [3 /*break*/, 7];
                            case 2:
                                window.gigya.logger.info("existing group session was revoked");
                                remove(APIKey);
                                window.gigya.events.global.dispatchWhenHandlerAdded({ eventName: 'accounts.logout' });
                                window.gigya.events.global.dispatchWhenHandlerAdded({ eventName: 'logout' });
                                return [3 /*break*/, 7];
                            case 3:
                                if (!res.login_token)
                                    return [2 /*return*/];
                                window.gigya.logger.info("new session from group");
                                expires_in = void 0;
                                groupContext = void 0;
                                if (res.groupContext) {
                                    groupContext = JSON.parse(res.groupContext);
                                }
                                if (!isGigyaCookieDomain()) {
                                    // It should never expire if a gltexp is present.
                                    expires_in = !res.gltexp ? res.expires_in : window.gigya.utils.cookie.getInfiniteExpirationTimeInSeconds();
                                    // Set login token cookie
                                    set(APIKey, res.login_token, expires_in);
                                    gltexpCookieName = "gltexp_" + APIKey;
                                    if (res.gltexp && !window.gigya.utils.cookie.get(gltexpCookieName)) {
                                        window.gigya.utils.cookie.set(gltexpCookieName, res.gltexp);
                                    }
                                }
                                return [4 /*yield*/, dispatchLoginEvent({ expires_in: expires_in, groupContext: groupContext })];
                            case 4:
                                _b.sent();
                                return [3 /*break*/, 7];
                            case 5:
                                window.gigya.logger.error("gigya: error loading sso frame", { res: res });
                                window.gigya.events.global.dispatchWhenHandlersAdded(['accounts.error', 'socialize.error'], res);
                                return [3 /*break*/, 7];
                            case 6:
                                window.gigya.logger.error("sso: unsupported response");
                                throw 'gigya: unsupported response from sso';
                            case 7:
                                resolve();
                                return [2 /*return*/];
                        }
                    });
                }); })];
        });
    });
}
exports.setFromSsoResponse = setFromSsoResponse;
function dispatchLoginEvent(eventParams) {
    if (eventParams === void 0) { eventParams = {}; }
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var _this = this;
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, new gigya.Promise(function (resolve) {
                    window.gigya.utils.queue.hold('verifyLogin', 'API');
                    window.gigya.accounts.verifyLogin({
                        ignoreApiQueue: true,
                        suppressLoginEvent: true,
                        include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data', window.gigya.thisScript.globalConf['include']),
                        extraProfileFields: 'samlData',
                        callback: function (accountInfoRes) {
                            window.gigya.utils.queue.release('verifyLogin', 'API'); // release the api queue
                            SessionService_1.sessionData.setIsSessionVerified(get(), accountInfoRes.errorCode == GSErrors_1.GSErrors.OK);
                            // use whatever field you need from accountInfoRes now before accountInfoRes will be overridden (such as 'source')
                            var source = accountInfoRes.source;
                            window.gigya.events.global.dispatchWhenHandlerAdded({ eventName: 'socialize.login' }, null, function (eventObj, callback) {
                                if (!eventObj) {
                                    eventObj = {};
                                }
                                eventObj = window.gigya.utils.object.merge([eventObj, eventParams]);
                                if (accountInfoRes.errorCode == GSErrors_1.GSErrors.OK) {
                                    window.gigya.socialize.getUserInfo({
                                        signIDs: true,
                                        extraFields: 'samlData',
                                        callback: function (userInfoRes) {
                                            if (userInfoRes.errorCode == GSErrors_1.GSErrors.OK) {
                                                eventObj = window.gigya._.addUserInfoToEvent(userInfoRes, { eventName: 'login' }, true);
                                                // normalizing event fields for backwards compatibility
                                                eventObj['source'] = source;
                                                eventObj['newUser'] = false;
                                                eventObj['provider'] = 'site';
                                                eventObj['loginMode'] = 'standard';
                                                if (eventObj['user']) {
                                                    eventObj['user'].errorCode = userInfoRes.errorCode;
                                                    eventObj['user'].callId = userInfoRes.callId;
                                                }
                                                accountInfoRes.id_token && (eventObj['id_token'] = accountInfoRes.id_token);
                                            }
                                            else {
                                                eventObj['cancel'] = true;
                                            }
                                            callback(eventObj);
                                        },
                                    });
                                }
                                else {
                                    eventObj['cancel'] = true;
                                    callback(eventObj);
                                }
                            });
                            window.gigya.events.global.dispatchWhenHandlerAdded({ eventName: 'accounts.login' }, null, function (eventObj, callback) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
                                return tslib_1.__generator(this, function (_a) {
                                    switch (_a.label) {
                                        case 0:
                                            if (!eventObj) {
                                                eventObj = {};
                                            }
                                            eventObj = window.gigya.utils.object.merge([eventObj, eventParams]);
                                            if (!(accountInfoRes.errorCode == GSErrors_1.GSErrors.OK)) return [3 /*break*/, 3];
                                            eventObj['eventName'] = 'accounts.login';
                                            if (!!accountInfoRes.UID) return [3 /*break*/, 2];
                                            return [4 /*yield*/, new gigya.Promise(function (r) {
                                                    return window.gigya.accounts.getAccountInfo({
                                                        callback: r,
                                                        include: window.gigya.utils.stringUtils.mergeCommaSeparatedValues('profile,data', window.gigya.thisScript.globalConf['include'])
                                                    });
                                                })];
                                        case 1:
                                            accountInfoRes = _a.sent();
                                            _a.label = 2;
                                        case 2:
                                            window.gigya.utils.object.extractProperties(accountInfoRes, eventObj, 'signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|dataCenter|id_token|groups');
                                            return [3 /*break*/, 4];
                                        case 3:
                                            eventObj['cancel'] = true;
                                            _a.label = 4;
                                        case 4:
                                            callback(eventObj);
                                            return [2 /*return*/];
                                    }
                                });
                            }); });
                            resolve();
                        },
                    });
                })];
        });
    });
}
exports.dispatchLoginEvent = dispatchLoginEvent;
function remove(APIKey) {
    if (APIKey === void 0) { APIKey = window.gigya.thisScript.APIKey; }
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var service;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (get(APIKey)) {
                        window.gigya.logger.info("removing login token");
                    }
                    window.gigya.utils.cookie.remove("glt_" + APIKey);
                    window.gigya.utils.cookie.remove('_gig_lt');
                    window.gigya.utils.cookie.remove("gltexp_" + APIKey);
                    if (!window.gigya.partnerSettings.ssoKey) return [3 /*break*/, 2];
                    window.gigya.logger.info("removing group login token");
                    return [4 /*yield*/, SsoService_1.SsoService.getInstance()];
                case 1:
                    service = _a.sent();
                    return [2 /*return*/, service.removeToken()];
                case 2: return [2 /*return*/, gigya.Promise.resolve()];
            }
        });
    });
}
exports.remove = remove;
function getTokenParam(APIKey, paramName) {
    var lt = window.gigya.utils.cookie.get(_getTokenCookieName(APIKey));
    if (lt) {
        var ltSegs = lt.split('|');
        if (ltSegs.length > 1) {
            return window.gigya.utils.keyValue.deserialize(ltSegs[1])[paramName];
        }
        else {
            return null;
        }
    }
}
exports.getTokenParam = getTokenParam;
function isGigyaCookieDomain() {
    var cookieDomain = window.gigya.utils.cookie.getDefaultDomain();
    return window.gigya.utils.stringUtils.endsWith(cookieDomain, window.gigya.defaultApiDomain);
}
function setBearerToken(bearerToken) {
    window.gigya.logger.info("setting a new Bearer token");
    _bearerToken = 'Bearer ' + bearerToken;
}
exports.setBearerToken = setBearerToken;
function getBearerToken() {
    return _bearerToken;
}
exports.getBearerToken = getBearerToken;
function removeBearerToken() {
    window.gigya.logger.info("Bearer token removed");
    _bearerToken = null;
}
exports.removeBearerToken = removeBearerToken;


/***/ }),

/***/ "./src/core/Gigya.Js.Plugin/app/CloseReasons.ts":
/*!******************************************************!*\
  !*** ./src/core/Gigya.Js.Plugin/app/CloseReasons.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var CloseReasons;
(function (CloseReasons) {
    CloseReasons[CloseReasons["pendingError"] = 0] = "pendingError";
    CloseReasons[CloseReasons["missing"] = 1] = "missing";
    CloseReasons[CloseReasons["finished"] = 2] = "finished";
    CloseReasons[CloseReasons["canceled"] = 3] = "canceled";
    CloseReasons[CloseReasons["backButton"] = 4] = "backButton";
    CloseReasons[CloseReasons["canceledByParent"] = 5] = "canceledByParent";
    CloseReasons[CloseReasons["skip"] = 6] = "skip";
    CloseReasons[CloseReasons["error"] = 7] = "error";
    CloseReasons[CloseReasons["cancel"] = 8] = "cancel";
})(CloseReasons = exports.CloseReasons || (exports.CloseReasons = {}));


/***/ }),

/***/ "./src/core/Gigya.Js.Plugin/app/PluginStyles.ts":
/*!******************************************************!*\
  !*** ./src/core/Gigya.Js.Plugin/app/PluginStyles.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var PluginStyle;
(function (PluginStyle) {
    PluginStyle[PluginStyle["_undefined"] = 0] = "_undefined";
    PluginStyle[PluginStyle["none"] = 1] = "none";
    PluginStyle[PluginStyle["legacy"] = 2] = "legacy";
    PluginStyle[PluginStyle["modern"] = 3] = "modern";
})(PluginStyle = exports.PluginStyle || (exports.PluginStyle = {}));
function getPluginStyleClass(style) {
    return 'gigya-style-' + PluginStyle[style];
}
exports.getPluginStyleClass = getPluginStyleClass;


/***/ }),

/***/ "./src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts":
/*!**************************************************************************!*\
  !*** ./src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var promise_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/promise */ "./src/core/Gigya.Js/app/Utils/promise.ts");
var phoneNumberUtil_1 = __webpack_require__(/*! ./phoneNumberUtil */ "./src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil.ts");
var LinkAccountsWithRedirectParam;
(function (LinkAccountsWithRedirectParam) {
    LinkAccountsWithRedirectParam["Provider"] = "gig_provider";
    LinkAccountsWithRedirectParam["AccessToken"] = "gig_access_token";
})(LinkAccountsWithRedirectParam = exports.LinkAccountsWithRedirectParam || (exports.LinkAccountsWithRedirectParam = {}));
function connectAccounts(providerSessionInfo, requestParams) {
    if (requestParams === void 0) { requestParams = {}; }
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        var providerSessions;
        return tslib_1.__generator(this, function (_a) {
            providerSessions = extractProviderSessions(providerSessionInfo);
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.notifySocialLogin, tslib_1.__assign(tslib_1.__assign({}, requestParams), { loginMode: 'connect', providerSessions: providerSessions, ignoreApiQueue: true }))];
        });
    });
}
exports.connectAccounts = connectAccounts;
function extractProviderSessions(providerSessionInfo) {
    var _a;
    var idToken = providerSessionInfo.idToken, provider = providerSessionInfo.provider, code = providerSessionInfo.code, access_token = providerSessionInfo.access_token, lastName = providerSessionInfo.lastName, firstName = providerSessionInfo.firstName;
    return _a = {},
        _a[provider] = { authToken: access_token, idToken: idToken, code: code, lastName: lastName, firstName: firstName },
        _a;
}
exports.extractProviderSessions = extractProviderSessions;
function extractProviderInfoFromResponse(response) {
    if (response.errorCode != GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS) {
        return response;
    }
    var providerSessionInfo = getProviderSessionFromParams(response);
    return tslib_1.__assign(tslib_1.__assign({}, response), { providerSessionInfo: providerSessionInfo });
}
exports.extractProviderInfoFromResponse = extractProviderInfoFromResponse;
function getLoginId(conflictingAccount) {
    var _a;
    return (conflictingAccount === null || conflictingAccount === void 0 ? void 0 : conflictingAccount.loginID) || ((_a = conflictingAccount === null || conflictingAccount === void 0 ? void 0 : conflictingAccount.emails) === null || _a === void 0 ? void 0 : _a[0]);
}
exports.getLoginId = getLoginId;
function getObfuscatedPhone(conflictingAccount) {
    var phone = getPhone(conflictingAccount);
    return phoneNumberUtil_1.formatObfuscatedPhoneNumber(phone);
}
exports.getObfuscatedPhone = getObfuscatedPhone;
function getPhone(conflictingAccount) {
    var _a;
    return (_a = conflictingAccount === null || conflictingAccount === void 0 ? void 0 : conflictingAccount.phones) === null || _a === void 0 ? void 0 : _a[0];
}
exports.getPhone = getPhone;
function isLinkAccountsV2Interruption(errorCode) {
    return Number(errorCode) === GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS;
}
exports.isLinkAccountsV2Interruption = isLinkAccountsV2Interruption;
function hasProviderSessionForLinkAccountsInParamsAfterRedirect(params) {
    var providerSession = getProviderSessionForLinkAccountsAfterRedirect(params);
    return isProviderSessionValid(providerSession);
}
exports.hasProviderSessionForLinkAccountsInParamsAfterRedirect = hasProviderSessionForLinkAccountsInParamsAfterRedirect;
function getProviderSessionForLinkAccountsAfterRedirect(params) {
    try {
        var gig_provider = params.gig_provider;
        if (!gig_provider)
            return {};
        var providerSession = window.gigya.utils.JSON.deserialize(gig_provider);
        return providerSession;
    }
    catch (error) {
        window.gigya.logger.error('Error while getting provider session from params after redirect', error);
        return {};
    }
}
exports.getProviderSessionForLinkAccountsAfterRedirect = getProviderSessionForLinkAccountsAfterRedirect;
function getProviderSessionFromParams(params) {
    if (!params)
        return null;
    var providerSessionInfo = {
        access_token: params.access_token,
        provider: params.provider,
        provider_uid: params.provider_uid,
        idToken: params.id_token,
        code: params.code,
        lastName: params.lastName,
        firstName: params.firstName,
    };
    return providerSessionInfo;
}
exports.getProviderSessionFromParams = getProviderSessionFromParams;
function isProviderSessionValid(params) {
    return Boolean((params === null || params === void 0 ? void 0 : params.provider) && (params === null || params === void 0 ? void 0 : params.access_token));
}
exports.isProviderSessionValid = isProviderSessionValid;


/***/ }),

/***/ "./src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil.ts":
/*!***********************************************************************!*\
  !*** ./src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil.ts ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function formatObfuscatedPhoneNumber(phoneData) {
    var phone = phoneData === null || phoneData === void 0 ? void 0 : phoneData.obfuscated;
    return phone === null || phone === void 0 ? void 0 : phone.replace(/#/g, '*').replace(/(\*+)/, ' $1 ');
}
exports.formatObfuscatedPhoneNumber = formatObfuscatedPhoneNumber;


/***/ }),

/***/ "./src/core/Gigya.Js/app/BaseObject/IBaseObjectConfig.ts":
/*!***************************************************************!*\
  !*** ./src/core/Gigya.Js/app/BaseObject/IBaseObjectConfig.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var DeviceTypes;
(function (DeviceTypes) {
    DeviceTypes[DeviceTypes["_undefined"] = 0] = "_undefined";
    DeviceTypes[DeviceTypes["desktop"] = 1] = "desktop";
    DeviceTypes[DeviceTypes["mobile"] = 2] = "mobile";
    DeviceTypes[DeviceTypes["auto"] = 3] = "auto";
})(DeviceTypes = exports.DeviceTypes || (exports.DeviceTypes = {}));


/***/ }),

/***/ "./src/core/Gigya.Js/app/Events.ts":
/*!*****************************************!*\
  !*** ./src/core/Gigya.Js/app/Events.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var objectUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/object */ "./src/core/Gigya.Js/app/Utils/object.ts");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var LegacyLogger_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LegacyLogger */ "./src/core/Gigya.Js/app/LegacyLogger.ts");
var InternalFlows_1 = __webpack_require__(/*! src/core/Gigya.Js/app/InternalFlows */ "./src/core/Gigya.Js/app/InternalFlows.ts");
var arrayUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/array */ "./src/core/Gigya.Js/app/Utils/array.ts");
var templatesUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/templates */ "./src/core/Gigya.Js/app/Utils/templates.ts");
function getEventHandlerName(eventName) {
    if (eventName.substring(0, 2) === 'on') {
        return eventName;
    }
    else {
        return 'on' + eventName.substring(0, 1).toUpperCase() + eventName.substring(1);
    }
}
function addMap(map) {
    window.gigya.defaultEventMaps.splice(0, 0, map);
}
exports.addMap = addMap;
function dispatchErrorFromResponse(widgetParams, response, additionalProperties) {
    if (!response) {
        response = {};
    }
    var r = response;
    if (r.response) {
        r = r.response;
    }
    var eventObj = {
        eventName: 'error',
        status: r.status ? r.status : 'FAIL',
        statusMessage: r.statusMessage ? r.statusMessage : 'General Server Error',
        errorMessage: r.errorMessage ? r.errorMessage : 'General Server Error',
        errorDetails: r.errorDetails ? r.errorDetails : '',
        errorCode: r.errorCode ? r.errorCode : 500001,
        response: response,
    };
    objectUtils.add(eventObj, additionalProperties);
    return dispatchForWidget(eventObj, widgetParams);
}
exports.dispatchErrorFromResponse = dispatchErrorFromResponse;
function dispatchInvalidParamError(widgetParams, paramName) {
    var evt = { eventName: 'error' };
    if (typeof widgetParams[paramName] == 'undefined' || widgetParams[paramName] == null) {
        evt.errorCode = GSErrors_1.GSErrors.MISSING_REQUIRED_PARAMETER;
        evt.errorMessage = 'Missing_required_parameter (' + paramName + ')';
    }
    else {
        evt.errorCode = GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE;
        evt.errorMessage = 'Invalid_parameter_value (' + paramName + ')';
    }
    evt.status = evt.errorCode;
    evt.statusMessage = evt.errorMessage;
    dispatchForWidget(evt, widgetParams);
}
exports.dispatchInvalidParamError = dispatchInvalidParamError;
function dispatchForWidget(e, widgetParams) {
    if (!e || !e.eventName)
        return;
    var eventName = e.eventName;
    LegacyLogger_1.addLog('Dispatching widget event "' + eventName + '" for ' + widgetParams.lastSource + ' with this event object', e);
    //gigya.socialize._AdjustResponseStatus(eventObj);
    InternalFlows_1.handleSpecialFields(e);
    var arEvents = eventName.split(',');
    var result;
    for (var i = 0; i < arEvents.length; i++) {
        var eventName_1 = arEvents[i];
        var eventHandlerName = getEventHandlerName(eventName_1);
        if (widgetParams) {
            if (widgetParams.context) {
                e.context = widgetParams.context;
            }
            if (widgetParams.source) {
                e.source = widgetParams.source;
            }
            if (widgetParams.sourceData) {
                e.sourceData = widgetParams.sourceData;
            }
            if (widgetParams.containerID) {
                e.sourceContainerID = widgetParams.containerID;
            }
            if (widgetParams.instanceID) {
                e.instanceID = widgetParams.instanceID;
            }
        }
        if (widgetParams[eventHandlerName]) {
            result = dispatchEventObject(widgetParams[eventHandlerName], e);
        }
        if (typeof result === 'undefined') {
            result = true;
        }
        if (eventName_1.indexOf('login') == -1 && eventName_1.indexOf('logout') == -1 && eventName_1 != 'connectionRemoved' && eventName_1 != 'connectionAdded') {
            _dispatchFromMaps(e);
            var GenesisExchange_Gigya = window['GenesisExchange_Gigya'];
            var gigya_omniture_conf = window['gigya_omniture_conf'];
            var myOmnitureIntegrationFunc = window['myOmnitureIntegrationFunc'];
            if (typeof GenesisExchange_Gigya != 'undefined' && typeof gigya_omniture_conf != 'undefined') {
                var ge = new GenesisExchange_Gigya(gigya_omniture_conf);
                ge.processAction(e);
                if (typeof myOmnitureIntegrationFunc != 'undefined') {
                    myOmnitureIntegrationFunc(gigya_omniture_conf, e);
                }
            }
        }
    }
    return result;
}
exports.dispatchForWidget = dispatchForWidget;
function dispatchEventObject(handlers, e) {
    var result;
    try {
        if (typeof handlers == 'function') {
            result = handlers(e);
        }
        else if (!(handlers instanceof Array)) {
            LegacyLogger_1.addLog('Not a function or function array registered to event', handlers);
        }
        else {
            arrayUtils.forEach(handlers, function (handler) {
                if (typeof handler == 'function') {
                    handler(e);
                }
                else {
                    LegacyLogger_1.addLog('Not a function registered to event: ' + handler, handler);
                }
            });
            /// TODO: not collecting results.. should it?
        }
    }
    catch (ex) {
        LegacyLogger_1.addLog('Error invoking function registered to event', handlers);
    }
    return result;
}
exports.dispatchEventObject = dispatchEventObject;
function _dispatchFromMaps(evt, isGlobal) {
    if (isGlobal === void 0) { isGlobal = false; }
    var arDispatch = [];
    var stop = false;
    for (var i = 0; i < window.gigya.defaultEventMaps.length; i++) {
        var map = window.gigya.defaultEventMaps[i].eventMap;
        var defaultMethod = window.gigya.defaultEventMaps[i].defaultMethod;
        for (var u = 0; u < map.length; u++) {
            var oField = map[u];
            var processedArgs = [];
            if (!oField.args)
                oField.args = [];
            for (var iArg = 0; iArg < oField.args.length; iArg++) {
                if (oField.args[iArg] == '$event') {
                    processedArgs.push(evt);
                }
                else {
                    processedArgs.push(templatesUtils.fill(oField.args[iArg], evt));
                }
            }
            var sEvents = ',' + oField.events.toLowerCase() + ',';
            if (sEvents.indexOf(',*,') != -1 ||
                ((sEvents.indexOf(',' + 'on' + evt.eventName.toLowerCase() + ',') != -1 || sEvents.indexOf(',' + evt.eventName.toLowerCase() + ',') != -1) &&
                    ((!evt.source && !oField.sources) || !oField.sources || oField.sources.indexOf(evt.source) != -1))) {
                arDispatch.push(oField);
                var method = oField.method ? oField.method : defaultMethod;
                try {
                    method.apply(this, processedArgs);
                }
                catch (e) {
                    LegacyLogger_1.addLog("Error invoking function registered to events map's method", method);
                }
                if (oField.override) {
                    stop = true;
                }
            }
        }
        if (stop)
            break;
    }
}
exports._dispatchFromMaps = _dispatchFromMaps;


/***/ }),

/***/ "./src/core/Gigya.Js/app/GSErrors.ts":
/*!*******************************************!*\
  !*** ./src/core/Gigya.Js/app/GSErrors.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var GSErrors;
(function (GSErrors) {
    GSErrors[GSErrors["OK"] = 0] = "OK";
    GSErrors[GSErrors["Data_Pending"] = 100001] = "Data_Pending";
    GSErrors[GSErrors["NETWORK_ERROR"] = 500026] = "NETWORK_ERROR";
    GSErrors[GSErrors["DATA_PENDING"] = 100001] = "DATA_PENDING";
    GSErrors[GSErrors["OPERATION_CANCELED"] = 200001] = "OPERATION_CANCELED";
    GSErrors[GSErrors["PERMISSION_GRANTED"] = 200002] = "PERMISSION_GRANTED";
    GSErrors[GSErrors["PERMISSION_NOT_GRANTED"] = 200003] = "PERMISSION_NOT_GRANTED";
    GSErrors[GSErrors["REDIRECT"] = 200004] = "REDIRECT";
    GSErrors[GSErrors["NEW_USER"] = 200005] = "NEW_USER";
    GSErrors[GSErrors["OPERATION_DONE"] = 200006] = "OPERATION_DONE";
    GSErrors[GSErrors["UPDATE_USER"] = 200007] = "UPDATE_USER";
    GSErrors[GSErrors["OK_WITH_ERRORS"] = 200008] = "OK_WITH_ERRORS";
    GSErrors[GSErrors["ACCOUNTS_LINKED"] = 200009] = "ACCOUNTS_LINKED";
    GSErrors[GSErrors["OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS"] = 200010] = "OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS";
    GSErrors[GSErrors["ACCOUNT_PENDING_REGISTRATION"] = 206001] = "ACCOUNT_PENDING_REGISTRATION";
    GSErrors[GSErrors["ACCOUNT_PENDING_VERIFICATION"] = 206002] = "ACCOUNT_PENDING_VERIFICATION";
    GSErrors[GSErrors["ACCOUNT_MISSING_LOGINID"] = 206003] = "ACCOUNT_MISSING_LOGINID";
    GSErrors[GSErrors["IDENTITY_ALREADY_ASSIGNED"] = 206004] = "IDENTITY_ALREADY_ASSIGNED";
    GSErrors[GSErrors["AFTER_EMAIL_VERIFICATION"] = 206005] = "AFTER_EMAIL_VERIFICATION";
    GSErrors[GSErrors["PENDING_CODE_VERIFICATION"] = 206006] = "PENDING_CODE_VERIFICATION";
    GSErrors[GSErrors["CLIENT_LOG"] = 300001] = "CLIENT_LOG";
    GSErrors[GSErrors["INVALID_DATA_CENTER"] = 301001] = "INVALID_DATA_CENTER";
    GSErrors[GSErrors["INVALID_REQUEST_FORMAT"] = 400001] = "INVALID_REQUEST_FORMAT";
    GSErrors[GSErrors["MISSING_REQUIRED_PARAMETER"] = 400002] = "MISSING_REQUIRED_PARAMETER";
    GSErrors[GSErrors["UNIQUE_IDENTIFIER_EXISTS"] = 400003] = "UNIQUE_IDENTIFIER_EXISTS";
    GSErrors[GSErrors["INVALID_PARAMETER_FORMAT"] = 400004] = "INVALID_PARAMETER_FORMAT";
    GSErrors[GSErrors["INVALID_PARAMETER_VALUE"] = 400006] = "INVALID_PARAMETER_VALUE";
    GSErrors[GSErrors["DUPLICATE_VALUE"] = 400007] = "DUPLICATE_VALUE";
    GSErrors[GSErrors["INVALID_AUTHENTICATION_HEADER"] = 400008] = "INVALID_AUTHENTICATION_HEADER";
    GSErrors[GSErrors["VALIDATION_ERROR"] = 400009] = "VALIDATION_ERROR";
    GSErrors[GSErrors["INVALID_REDIRECT_URI"] = 400011] = "INVALID_REDIRECT_URI";
    GSErrors[GSErrors["INVALID_RESPONSE_TYPE"] = 400012] = "INVALID_RESPONSE_TYPE";
    GSErrors[GSErrors["UNSUPPORTED_GRANT_TYPE"] = 400013] = "UNSUPPORTED_GRANT_TYPE";
    GSErrors[GSErrors["INVALID_GRANT"] = 400014] = "INVALID_GRANT";
    GSErrors[GSErrors["CODE_EXPIRED"] = 400015] = "CODE_EXPIRED";
    GSErrors[GSErrors["SCHEMA_VALIDATION_FAILED"] = 400020] = "SCHEMA_VALIDATION_FAILED";
    GSErrors[GSErrors["CAPTCHA_VERIFICATION_FAILED"] = 400021] = "CAPTCHA_VERIFICATION_FAILED";
    GSErrors[GSErrors["UNIQUE_INDEX_VALIDATION_ERROR"] = 400022] = "UNIQUE_INDEX_VALIDATION_ERROR";
    GSErrors[GSErrors["INVALID_TYPE_VALIDATION_ERROR"] = 400023] = "INVALID_TYPE_VALIDATION_ERROR";
    GSErrors[GSErrors["DYNAMIC_FIELDS_VALIDATION_ERROR"] = 400024] = "DYNAMIC_FIELDS_VALIDATION_ERROR";
    GSErrors[GSErrors["WRITE_ACCESS_VALIDATION_ERROR"] = 400025] = "WRITE_ACCESS_VALIDATION_ERROR";
    GSErrors[GSErrors["INVALID_FORMAT_VALIDATION_ERROR"] = 400026] = "INVALID_FORMAT_VALIDATION_ERROR";
    GSErrors[GSErrors["REQUIRED_VALUE_VALIDATION_ERROR"] = 400027] = "REQUIRED_VALUE_VALIDATION_ERROR";
    GSErrors[GSErrors["EMAIL_NOT_VERIFIED"] = 400028] = "EMAIL_NOT_VERIFIED";
    GSErrors[GSErrors["SCHEMA_CONFLICT_ERROR"] = 400029] = "SCHEMA_CONFLICT_ERROR";
    GSErrors[GSErrors["OPERATION_NOT_ALLOWED"] = 400030] = "OPERATION_NOT_ALLOWED";
    GSErrors[GSErrors["SECURITY_VERIFICATION_FAILED"] = 400050] = "SECURITY_VERIFICATION_FAILED";
    GSErrors[GSErrors["INVALID_APIKEY_PARAMETER"] = 400093] = "INVALID_APIKEY_PARAMETER";
    GSErrors[GSErrors["NOT_SUPPORTED"] = 400096] = "NOT_SUPPORTED";
    GSErrors[GSErrors["UNSUPPORTED_USER_AGENT"] = 400097] = "UNSUPPORTED_USER_AGENT";
    GSErrors[GSErrors["NO_PROVIDERS"] = 400100] = "NO_PROVIDERS";
    GSErrors[GSErrors["POPUP_BLOCKED"] = 400101] = "POPUP_BLOCKED";
    GSErrors[GSErrors["INVALID_EVENT_HANDLER"] = 400102] = "INVALID_EVENT_HANDLER";
    GSErrors[GSErrors["INVALID_CONTAINERID"] = 400103] = "INVALID_CONTAINERID";
    GSErrors[GSErrors["NOT_CONNECTED"] = 400106] = "NOT_CONNECTED";
    GSErrors[GSErrors["INVALID_SITE_DOMAIN"] = 400120] = "INVALID_SITE_DOMAIN";
    GSErrors[GSErrors["PROVIDER_CONFIGURATION_ERROR"] = 400122] = "PROVIDER_CONFIGURATION_ERROR";
    GSErrors[GSErrors["LIMIT_REACHED"] = 400124] = "LIMIT_REACHED";
    GSErrors[GSErrors["FREQUENCY_LIMIT_REACHED"] = 400125] = "FREQUENCY_LIMIT_REACHED";
    GSErrors[GSErrors["INVALID_ACTION"] = 400126] = "INVALID_ACTION";
    GSErrors[GSErrors["INSUFFICIENT_POINTS_TO_REDEEM"] = 400127] = "INSUFFICIENT_POINTS_TO_REDEEM";
    GSErrors[GSErrors["SIGNATURE_TIMESTAMP_EXPIRED"] = 400128] = "SIGNATURE_TIMESTAMP_EXPIRED";
    GSErrors[GSErrors["Error_During_Extensions_Operation"] = 400302] = "Error_During_Extensions_Operation";
    GSErrors[GSErrors["Extension_Point_Custom_Error"] = 400303] = "Extension_Point_Custom_Error";
    GSErrors[GSErrors["INVALID_POLICY_CONFIGURATION"] = 401000] = "INVALID_POLICY_CONFIGURATION";
    GSErrors[GSErrors["SUSPECTED_SPAM"] = 401010] = "SUSPECTED_SPAM";
    GSErrors[GSErrors["LOGIN_FAILED_CAPTCHA_REQUIRED"] = 401020] = "LOGIN_FAILED_CAPTCHA_REQUIRED";
    GSErrors[GSErrors["REQUEST_FAILED_CAPTCHA_REQUIRED"] = 401023] = "REQUEST_FAILED_CAPTCHA_REQUIRED";
    GSErrors[GSErrors["LOGIN_FAILED_WRONG_CAPTCHA"] = 401021] = "LOGIN_FAILED_WRONG_CAPTCHA";
    GSErrors[GSErrors["OLD_PASSWORD_USED"] = 401030] = "OLD_PASSWORD_USED";
    GSErrors[GSErrors["FORBIDDEN"] = 403000] = "FORBIDDEN";
    GSErrors[GSErrors["INVALID_SESSION_TOKEN"] = 403001] = "INVALID_SESSION_TOKEN";
    GSErrors[GSErrors["REQUEST_HAS_EXPIRED"] = 403002] = "REQUEST_HAS_EXPIRED";
    GSErrors[GSErrors["INVALID_REQUEST_SIGNATURE"] = 403003] = "INVALID_REQUEST_SIGNATURE";
    GSErrors[GSErrors["DUPLICATE_NONCE"] = 403004] = "DUPLICATE_NONCE";
    GSErrors[GSErrors["UNAUTHORIZED_USER"] = 403005] = "UNAUTHORIZED_USER";
    GSErrors[GSErrors["SENSITIVE_DATA_SENT_OVER_HTTP"] = 403006] = "SENSITIVE_DATA_SENT_OVER_HTTP";
    GSErrors[GSErrors["PERMISSION_DENIED"] = 403007] = "PERMISSION_DENIED";
    GSErrors[GSErrors["INVALID_OPENID_URL"] = 403008] = "INVALID_OPENID_URL";
    GSErrors[GSErrors["PROVIDER_SESSION_EXPIRED"] = 403009] = "PROVIDER_SESSION_EXPIRED";
    GSErrors[GSErrors["INVALID_SECRET"] = 403010] = "INVALID_SECRET";
    GSErrors[GSErrors["SESSION_HAS_EXPIRED"] = 403011] = "SESSION_HAS_EXPIRED";
    GSErrors[GSErrors["NO_VALID_SESSION"] = 403012] = "NO_VALID_SESSION";
    GSErrors[GSErrors["UNVERIFIED_USER"] = 403013] = "UNVERIFIED_USER";
    GSErrors[GSErrors["MISSING_REQUEST_REFERRER"] = 403015] = "MISSING_REQUEST_REFERRER";
    GSErrors[GSErrors["UNEXPECTED_PROVIDER_USER"] = 403017] = "UNEXPECTED_PROVIDER_USER";
    GSErrors[GSErrors["PERMISSION_NOT_REQUESTED"] = 403022] = "PERMISSION_NOT_REQUESTED";
    GSErrors[GSErrors["NO_USER_PERMISSION"] = 403023] = "NO_USER_PERMISSION";
    GSErrors[GSErrors["PROVIDER_LIMIT_REACHED"] = 403024] = "PROVIDER_LIMIT_REACHED";
    GSErrors[GSErrors["INVALID_TOKEN"] = 403025] = "INVALID_TOKEN";
    GSErrors[GSErrors["UNAUTHORIZED_ACCESS_ERROR"] = 403026] = "UNAUTHORIZED_ACCESS_ERROR";
    GSErrors[GSErrors["DIFFERENT_USER_FOR_REAUTH"] = 403027] = "DIFFERENT_USER_FOR_REAUTH";
    GSErrors[GSErrors["SESSION_EXPIRED_RETRY"] = 403030] = "SESSION_EXPIRED_RETRY";
    GSErrors[GSErrors["APPROVED_BY_MODERATOR"] = 403031] = "APPROVED_BY_MODERATOR";
    GSErrors[GSErrors["TOKEN_HAS_RENEWED"] = 403032] = "TOKEN_HAS_RENEWED";
    GSErrors[GSErrors["NO_USER_COOKIE"] = 403035] = "NO_USER_COOKIE";
    GSErrors[GSErrors["UNAUTHORIZED_PARTNER"] = 403036] = "UNAUTHORIZED_PARTNER";
    GSErrors[GSErrors["POST_DENIED"] = 403037] = "POST_DENIED";
    GSErrors[GSErrors["NO_LOGIN_TICKET"] = 403040] = "NO_LOGIN_TICKET";
    GSErrors[GSErrors["ACCOUNT_DISABLED"] = 403041] = "ACCOUNT_DISABLED";
    GSErrors[GSErrors["INVALID_LOGINID"] = 403042] = "INVALID_LOGINID";
    GSErrors[GSErrors["LOGIN_IDENTIFIER_EXISTS"] = 403043] = "LOGIN_IDENTIFIER_EXISTS";
    GSErrors[GSErrors["UNDERAGE_USER"] = 403044] = "UNDERAGE_USER";
    GSErrors[GSErrors["INVALID_SITE_CONFIGURATION_ERROR"] = 403045] = "INVALID_SITE_CONFIGURATION_ERROR";
    GSErrors[GSErrors["LOGINID_DOES_NOT_EXIST"] = 403047] = "LOGINID_DOES_NOT_EXIST";
    GSErrors[GSErrors["API_RATE_LIMIT_EXCEEDED"] = 403048] = "API_RATE_LIMIT_EXCEEDED";
    GSErrors[GSErrors["PENDING_PASSWORD_CHANGE"] = 403100] = "PENDING_PASSWORD_CHANGE";
    GSErrors[GSErrors["ACCOUNT_PENDING_TFA_VERIFICATION"] = 403101] = "ACCOUNT_PENDING_TFA_VERIFICATION";
    GSErrors[GSErrors["ACCOUNT_PENDING_TFA_REGISTRATION"] = 403102] = "ACCOUNT_PENDING_TFA_REGISTRATION";
    GSErrors[GSErrors["ACCOUNT_PENDING_RECENT_LOGIN"] = 403110] = "ACCOUNT_PENDING_RECENT_LOGIN";
    GSErrors[GSErrors["ACCOUNT_TEMPORARILY_LOCKED_OUT"] = 403120] = "ACCOUNT_TEMPORARILY_LOCKED_OUT";
    GSErrors[GSErrors["REDUNDANT_OPERATION"] = 403200] = "REDUNDANT_OPERATION";
    GSErrors[GSErrors["INVALID_APPLICATION_ID"] = 403201] = "INVALID_APPLICATION_ID";
    GSErrors[GSErrors["NOT_FOUND"] = 404000] = "NOT_FOUND";
    GSErrors[GSErrors["FRIEND_NOT_FOUND"] = 404001] = "FRIEND_NOT_FOUND";
    GSErrors[GSErrors["CATEGORY_NOT_FOUND"] = 404002] = "CATEGORY_NOT_FOUND";
    GSErrors[GSErrors["UID_NOT_FOUND"] = 404003] = "UID_NOT_FOUND";
    GSErrors[GSErrors["RESOURCE_NOT_FOUND"] = 404004] = "RESOURCE_NOT_FOUND";
    GSErrors[GSErrors["INVALID_API_METHOD"] = 405001] = "INVALID_API_METHOD";
    GSErrors[GSErrors["IDENTITY_EXISTS"] = 409001] = "IDENTITY_EXISTS";
    GSErrors[GSErrors["GONE"] = 410000] = "GONE";
    GSErrors[GSErrors["REQUEST_ENTITY_TOO_LARGE"] = 413001] = "REQUEST_ENTITY_TOO_LARGE";
    GSErrors[GSErrors["COMMENT_TEXT_TOO_LARGE"] = 413002] = "COMMENT_TEXT_TOO_LARGE";
    GSErrors[GSErrors["OBJECT_TOO_LARGE"] = 413003] = "OBJECT_TOO_LARGE";
    GSErrors[GSErrors["PROFILE_PHOTO_TOO_LARGE"] = 413004] = "PROFILE_PHOTO_TOO_LARGE";
    GSErrors[GSErrors["REQUEST_URI_TOO_LONG"] = 414000] = "REQUEST_URI_TOO_LONG";
    GSErrors[GSErrors["MISSING_USER_PHOTO"] = 409010] = "MISSING_USER_PHOTO";
    GSErrors[GSErrors["COUNTER_NOT_REGISTERED"] = 409011] = "COUNTER_NOT_REGISTERED";
    GSErrors[GSErrors["INVALID_GMID_TICKET"] = 409012] = "INVALID_GMID_TICKET";
    GSErrors[GSErrors["SAML_MAPPED_ATTRIBUTE_NOT_FOUND"] = 409013] = "SAML_MAPPED_ATTRIBUTE_NOT_FOUND";
    GSErrors[GSErrors["SAML_CERTIFICATE_NOT_FOUND"] = 409014] = "SAML_CERTIFICATE_NOT_FOUND";
    GSErrors[GSErrors["SAML_MESSAGE_NOT_FOUND"] = 409015] = "SAML_MESSAGE_NOT_FOUND";
    GSErrors[GSErrors["GENERAL_SERVER_ERROR"] = 500001] = "GENERAL_SERVER_ERROR";
    GSErrors[GSErrors["SERVER_LOGIN_ERROR"] = 500002] = "SERVER_LOGIN_ERROR";
    GSErrors[GSErrors["DEFAULT_APPLICATION_CONFIGURATION_ERROR"] = 500003] = "DEFAULT_APPLICATION_CONFIGURATION_ERROR";
    GSErrors[GSErrors["SESSION_MIGRATION_ERROR"] = 500014] = "SESSION_MIGRATION_ERROR";
    GSErrors[GSErrors["PROVIDER_ERROR"] = 500023] = "PROVIDER_ERROR";
    GSErrors[GSErrors["DATABASE_ERROR"] = 500028] = "DATABASE_ERROR";
    GSErrors[GSErrors["USERNAME_REQUIRED"] = 500029] = "USERNAME_REQUIRED";
    GSErrors[GSErrors["NO_PROVIDER_APPLICATION"] = 500031] = "NO_PROVIDER_APPLICATION";
    GSErrors[GSErrors["LOAD_FAILED"] = 500032] = "LOAD_FAILED";
    GSErrors[GSErrors["INVALID_ENVIRONMENT_CONFIG"] = 500033] = "INVALID_ENVIRONMENT_CONFIG";
    GSErrors[GSErrors["ERROR_DURING_BACKEND_OPERATION"] = 500034] = "ERROR_DURING_BACKEND_OPERATION";
    GSErrors[GSErrors["TIMEOUT"] = 504001] = "TIMEOUT";
    GSErrors[GSErrors["CLIENTTIMEOUT"] = 504002] = "CLIENTTIMEOUT";
    GSErrors[GSErrors["INVALID_URL"] = 404004] = "INVALID_URL";
    GSErrors[GSErrors["MEDIA_ITEMS_NOT_SUPPORTED"] = 401001] = "MEDIA_ITEMS_NOT_SUPPORTED";
    GSErrors[GSErrors["MISSING_ERROR_CODE"] = 599999] = "MISSING_ERROR_CODE";
    GSErrors[GSErrors["THIS_AUTHENTICATION_METHOD_IS_CURRENTLY_DISABLED"] = 403300] = "THIS_AUTHENTICATION_METHOD_IS_CURRENTLY_DISABLED";
    GSErrors[GSErrors["FORCE_LINK_LOGIN_IDENTIFIER_EXISTS"] = 409003] = "FORCE_LINK_LOGIN_IDENTIFIER_EXISTS";
    GSErrors[GSErrors["PASSKEY_AUTHENTICATOR_REGISTERED"] = 400130] = "PASSKEY_AUTHENTICATOR_REGISTERED";
    GSErrors[GSErrors["PASSKEY_ABORTED"] = 400131] = "PASSKEY_ABORTED";
    GSErrors[GSErrors["PASSKEY_ERROR"] = 500131] = "PASSKEY_ERROR";
})(GSErrors = exports.GSErrors || (exports.GSErrors = {}));
var GSErrorDetails;
(function (GSErrorDetails) {
    GSErrorDetails[GSErrorDetails["None"] = 0] = "None";
    GSErrorDetails[GSErrorDetails["Same_password"] = 100001] = "Same_password";
    GSErrorDetails[GSErrorDetails["Invalid_password"] = 100002] = "Invalid_password";
    GSErrorDetails[GSErrorDetails["Invalid_counters_query_with_cursor"] = 100003] = "Invalid_counters_query_with_cursor";
})(GSErrorDetails = exports.GSErrorDetails || (exports.GSErrorDetails = {}));


/***/ }),

/***/ "./src/core/Gigya.Js/app/GlobalEvents.ts":
/*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/GlobalEvents.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var arrayUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/array */ "./src/core/Gigya.Js/app/Utils/array.ts");
var LegacyLogger_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LegacyLogger */ "./src/core/Gigya.Js/app/LegacyLogger.ts");
var objectUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/object */ "./src/core/Gigya.Js/app/Utils/object.ts");
var InternalFlows_1 = __webpack_require__(/*! src/core/Gigya.Js/app/InternalFlows */ "./src/core/Gigya.Js/app/InternalFlows.ts");
var events = __webpack_require__(/*! src/core/Gigya.Js/app/Events */ "./src/core/Gigya.Js/app/Events.ts");
function getEventHandlerName(eventName) {
    if (eventName.substring(0, 2) === 'on') {
        return eventName;
    }
    else {
        return 'on' + eventName.substring(0, 1).toUpperCase() + eventName.substring(1);
    }
}
var _eventHandlers = {};
var _pendingEvents = {};
exports._activeNamespaces = {};
function add(eventName, eventHandler, type, context, namespace, params) {
    if (type === void 0) { type = 'other'; }
    if (namespace === void 0) { namespace = 'socialize'; }
    var fullEventName = namespace + '_' + getEventHandlerName(eventName);
    if (!_eventHandlers[fullEventName]) {
        _eventHandlers[fullEventName] = [];
    }
    var registeredHandler = {
        handler: eventHandler,
        type: type,
        context: context,
        params: params,
        fullEventName: fullEventName,
    };
    _eventHandlers[fullEventName].push(registeredHandler);
    if (!this._activeNamespaces[namespace] && window.gigya._.apiAdapter) {
        window.gigya._.apiAdapter.registerForNamespaceEvents(namespace);
    }
    this._activeNamespaces[namespace] = 1;
    var pendingEvents = _pendingEvents[fullEventName];
    if (pendingEvents && type == 'other') {
        _pendingEvents[fullEventName] = [];
        for (var i = 0; i < pendingEvents.length; i++) {
            var e = pendingEvents[i];
            dispatchRegisteredHandlers(e.eventObj, e.params, e.preProcess);
        }
    }
    return registeredHandler;
}
exports.add = add;
function remove(fullEventName, registeredHandler) {
    if (_eventHandlers[fullEventName]) {
        arrayUtils.removeByValue(_eventHandlers[fullEventName], registeredHandler);
    }
}
exports.remove = remove;
function dispatch(eventObj, params) {
    var dispatched = 0;
    var isInternal = eventObj.isInternal; //internal event should be dispatched to widgets/components only.
    var eventNameArr = eventObj['eventName'].split(',');
    LegacyLogger_1.addLog('Dispatching global event "' + eventObj['eventName'] + '" with this event object', eventObj);
    for (var i = 0; i < eventNameArr.length; i++) {
        var eventNameSegs = eventNameArr[i].split('.');
        var namespace = eventNameSegs.length > 1 ? eventNameSegs.shift() : 'socialize';
        var eventName = eventNameSegs[0];
        var eventHandlerName = getEventHandlerName(eventName);
        var fullEventName = namespace + '_' + eventHandlerName;
        var eventHandlers = objectUtils.clone(_eventHandlers[fullEventName]) || [];
        var baseEventObj = objectUtils.clone(eventObj);
        baseEventObj['isGlobal'] = true;
        baseEventObj.eventName = eventName;
        baseEventObj.fullEventName = eventNameArr[i];
        if (params) {
            if (params.source)
                baseEventObj.source = params.source;
            if (params.sourceData)
                baseEventObj.sourceData = params.sourceData;
            if (params.context)
                baseEventObj.context = params.context;
        }
        var ListenerTypes = ['component'];
        if (!isInternal)
            ListenerTypes.push('other');
        for (var iListenerType = 0; iListenerType < ListenerTypes.length; iListenerType++) {
            var listenerType = ListenerTypes[iListenerType];
            for (var iHandler = 0; iHandler < eventHandlers.length; iHandler++) {
                var oHandler = eventHandlers[iHandler]; //{type: 'other', handler:function, context: object}
                if (oHandler.type == listenerType) {
                    var eventObjCopy = objectUtils.clone(baseEventObj);
                    if (!eventObjCopy['context'] && oHandler.context) {
                        eventObjCopy['context'] = oHandler['context'];
                    }
                    if (!eventObjCopy['context']) {
                        delete eventObjCopy['context'];
                    }
                    //context is now taken from the call that dispatched the event
                    if (listenerType !== 'component') {
                        dispatched++;
                        InternalFlows_1.handleSpecialFields(eventObjCopy); // Make sure returned fields such as friends are returned as collections.
                    }
                    // Feature #34522
                    if (oHandler.params && oHandler.params['signKey']) {
                        eventObjCopy['UIDSignature'] = eventObj['signKeysUIDSignature'][oHandler.params['signKey']];
                        delete eventObjCopy['signKeysUIDSignature'];
                    }
                    try {
                        oHandler.handler(eventObjCopy);
                    }
                    catch (ex) {
                        LegacyLogger_1.addLog('Error while trying to invoke "' + eventObj['eventName'] + '" global event handler', ex);
                    }
                }
            }
        }
        if (!isInternal) {
            events._dispatchFromMaps(baseEventObj, true);
        }
        var GenesisExchange_Gigya = window['GenesisExchange_Gigya'];
        var gigya_omniture_conf = window['gigya_omniture_conf'];
        var myOmnitureIntegrationFunc = window['myOmnitureIntegrationFunc'];
        if (!isInternal && typeof GenesisExchange_Gigya != 'undefined' && typeof gigya_omniture_conf != 'undefined' && namespace == 'socialize') {
            var ge = new GenesisExchange_Gigya(gigya_omniture_conf);
            ge.processAction(baseEventObj);
            if (typeof myOmnitureIntegrationFunc != 'undefined') {
                myOmnitureIntegrationFunc(gigya_omniture_conf, baseEventObj);
            }
        }
    }
    return dispatched;
}
exports.dispatch = dispatch;
function dispatchWhenHandlerAdded(eventObj, params, preProcess) {
    if (params === void 0) { params = {}; }
    var eventNameSegs = eventObj['eventName'].split('.');
    var namespace = eventNameSegs.length > 1 ? eventNameSegs.shift() : 'socialize';
    var eventName = eventNameSegs[0];
    dispatchRegisteredHandlers(eventObj, params, preProcess, function (dispatched) {
        // If no handlers were dispatched, we need to wait for the handler to be added
        if (dispatched == 0) {
            var eventHandlerName = 'on' + eventName.substring(0, 1).toUpperCase() + eventName.substring(1);
            var fullEventName = namespace + '_' + eventHandlerName;
            if (!_pendingEvents[fullEventName])
                _pendingEvents[fullEventName] = [];
            _pendingEvents[fullEventName].push({ eventObj: eventObj, params: params, preProcess: preProcess });
        }
    });
}
exports.dispatchWhenHandlerAdded = dispatchWhenHandlerAdded;
function dispatchWhenHandlersAdded(eventNames, eventObj, params, preProcess) {
    if (params === void 0) { params = {}; }
    for (var _i = 0, eventNames_1 = eventNames; _i < eventNames_1.length; _i++) {
        var eventName = eventNames_1[_i];
        dispatchWhenHandlerAdded(tslib_1.__assign({ eventName: eventName }, eventObj), params, preProcess);
    }
}
exports.dispatchWhenHandlersAdded = dispatchWhenHandlersAdded;
function dispatchRegisteredHandlers(eventObj, params, preProcess, callback) {
    var fnDispatch = function (e) {
        var dispatched = 0;
        if (!e['cancel']) {
            dispatched = dispatch(e, params);
        }
        if (callback) {
            callback(dispatched);
        }
    };
    if (preProcess) {
        preProcess(eventObj, fnDispatch);
    }
    else {
        fnDispatch(eventObj);
    }
}
function getEventsForOperation(operation) {
    var activeLoginEvents = [];
    if (operation.toLowerCase().indexOf('login') != -1) {
        if (this._activeNamespaces.socialize)
            activeLoginEvents.push('socialize.login');
        if (this._activeNamespaces.accounts)
            activeLoginEvents.push('accounts.login');
    }
    else if (operation.toLowerCase().indexOf('addconnection') != -1) {
        if (this._activeNamespaces.socialize)
            activeLoginEvents.push('socialize.connectionAdded');
    }
    return activeLoginEvents.join(',');
}
exports.getEventsForOperation = getEventsForOperation;


/***/ }),

/***/ "./src/core/Gigya.Js/app/InternalFlows.ts":
/*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/InternalFlows.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var LocalInfo_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LocalInfo */ "./src/core/Gigya.Js/app/LocalInfo.ts");
var tokenStore = __webpack_require__(/*! src/core/Gigya.Js.Adapters.Web/app/TokenStore */ "./src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts");
var localStorageUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/localStorage */ "./src/core/Gigya.Js/app/Utils/localStorage.ts");
var JSONUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/JSON */ "./src/core/Gigya.Js/app/Utils/JSON.ts");
var objectUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/object */ "./src/core/Gigya.Js/app/Utils/object.ts");
var URLUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/URL */ "./src/core/Gigya.Js/app/Utils/URL.ts");
var MessagingMethod;
(function (MessagingMethod) {
    MessagingMethod[MessagingMethod["LocalStorageListener"] = 0] = "LocalStorageListener";
    MessagingMethod[MessagingMethod["PostMessage"] = 1] = "PostMessage";
    MessagingMethod[MessagingMethod["Flash"] = 2] = "Flash";
})(MessagingMethod = exports.MessagingMethod || (exports.MessagingMethod = {}));
function checkCompleteRegistration(res, params, methodName, callback) {
    var screenSet;
    var retry;
    var pending = false;
    var providerSessionInfo;
    if (res['errorCode'] == GSErrors_1.GSErrors.AFTER_EMAIL_VERIFICATION) {
        // Handle autoLogin from registration link
        window.gigya.logger.info('finalizing registration after email verification');
        pending = true;
        window.gigya.accounts.finalizeRegistration({
            regToken: res['regToken'],
            ignoreApiQueue: true,
            callback: callback,
        });
    }
    else if (!params['ignoreInterruptions'] &&
        !params['dontHandleScreenSet'] &&
        (((res['regToken'] || params['regToken']) && // has regToken
            (res['errorCode'] == GSErrors_1.GSErrors.OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS || // socialLogin/setAccountInfo saved with loginID exist error
                res['errorCode'] == GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS || //forceLinking loginId exists
                res['errorCode'] == GSErrors_1.GSErrors.LOGIN_IDENTIFIER_EXISTS)) || // loginID exists
            res['errorCode'] == GSErrors_1.GSErrors.ACCOUNT_PENDING_REGISTRATION || // pending registration
            res['errorCode'] == GSErrors_1.GSErrors.ACCOUNT_PENDING_VERIFICATION || // pending email verification
            res['errorCode'] == GSErrors_1.GSErrors.ACCOUNT_MISSING_LOGINID || // pending LoginID
            res['errorCode'] == GSErrors_1.GSErrors.ACCOUNT_PENDING_TFA_VERIFICATION || // pending TFA verification
            res['errorCode'] == GSErrors_1.GSErrors.ACCOUNT_PENDING_TFA_REGISTRATION || // pending TFA registration
            res['errorCode'] == GSErrors_1.GSErrors.ACCOUNT_PENDING_RECENT_LOGIN || // pending recent login
            res['errorCode'] == GSErrors_1.GSErrors.PENDING_PASSWORD_CHANGE || // pending password change
            res['errorCode'] == GSErrors_1.GSErrors.PENDING_CODE_VERIFICATION) // pending code verification
    ) {
        if (res['errorCode'] == GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS) {
            providerSessionInfo = {
                access_token: res['access_token'],
                provider: res['provider'],
                provider_uid: res['provider_uid'],
                idToken: res['id_token'],
                code: res['code'],
                lastName: res['lastName'],
                firstName: res['firstName'],
            };
        }
        var newModal;
        if (res['errorCode'] == GSErrors_1.GSErrors.ACCOUNT_PENDING_RECENT_LOGIN) {
            retry = true;
            newModal = true;
        }
        if (params['defaultMobileRegScreenSet'] && LocalInfo_1.localInfo.isMobile) {
            screenSet = params['defaultMobileRegScreenSet'];
        }
        else if (params['defaultRegScreenSet']) {
            screenSet = params['defaultRegScreenSet'];
        }
    }
    if (screenSet) {
        window.gigya.logger.info("showing screenset '" + screenSet + "' for errorCode " + res['errorCode']);
        window.gigya.logger.group(screenSet);
        window.gigya.accounts.showScreenSet({
            ignoreApiQueue: true,
            newModal: newModal,
            screenSet: screenSet,
            initialMethod: methodName,
            initialResponse: res,
            suppressLoginEvent: params['suppressLoginEvent'],
            providerSessionInfo: providerSessionInfo,
            onError: function (e) {
                callback(res);
            },
            onHide: function (e) {
                window.gigya.logger.groupEnd(screenSet);
                if (e.reason === 'finished' && e.user) {
                    var successResponse = {
                        errorCode: 0,
                        userInfo: e.user,
                        source: e.source
                    };
                    callback(successResponse, true, retry);
                }
                else {
                    callback(res);
                }
            },
        });
    }
    else if (!pending) {
        callback(res);
    }
}
exports.checkCompleteRegistration = checkCompleteRegistration;
function checkGroupInvitation(params) {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var confirmation, screenSet;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!params.invitationId) {
                        window.gigya.events.global.dispatchWhenHandlersAdded(['accounts.error', 'socialize.error'], {
                            status: 'MISSING_REQUIRED_PARAMETER',
                            statusMessage: 'Missing required parameter: invitationId',
                            errorCode: GSErrors_1.GSErrors.MISSING_REQUIRED_PARAMETER,
                            errorMessage: 'Missing required parameter: invitationId'
                        });
                    }
                    return [4 /*yield*/, confirmGroupInvitation(params.invitationId)];
                case 1:
                    confirmation = _a.sent();
                    if (!!confirmation.token) return [3 /*break*/, 2];
                    window.gigya.events.global.dispatchWhenHandlersAdded(['accounts.error', 'socialize.error'], confirmation);
                    return [3 /*break*/, 5];
                case 2:
                    if (!(tokenStore.get() === null)) return [3 /*break*/, 3];
                    window.gigya.accounts.addEventHandlers({
                        onLogin: function () {
                            return tslib_1.__awaiter(this, void 0, void 0, function () {
                                return tslib_1.__generator(this, function (_a) {
                                    switch (_a.label) {
                                        case 0: return [4 /*yield*/, finalizeGroupInvitation(confirmation.token)];
                                        case 1:
                                            _a.sent();
                                            return [2 /*return*/];
                                    }
                                });
                            });
                        }
                    });
                    screenSet = LocalInfo_1.localInfo.isMobile ? window.gigya.thisScript.globalConf.defaultMobileRegScreenSet : window.gigya.thisScript.globalConf.defaultRegScreenSet;
                    window.gigya.accounts.showScreenSet({
                        ignoreApiQueue: true,
                        screenSet: screenSet
                    });
                    return [3 /*break*/, 5];
                case 3: return [4 /*yield*/, finalizeGroupInvitation(confirmation.token)];
                case 4:
                    _a.sent();
                    _a.label = 5;
                case 5: return [2 /*return*/];
            }
        });
    });
}
exports.checkGroupInvitation = checkGroupInvitation;
function confirmGroupInvitation(invitationId) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, new gigya.Promise(function (resolve) {
                    window.gigya.accounts.groups.invitationConfirm({
                        ignoreApiQueue: true,
                        invitationId: invitationId,
                        callback: resolve
                    });
                })];
        });
    });
}
function finalizeGroupInvitation(token) {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, new gigya.Promise(function (resolve) {
                    window.gigya.accounts.groups.finalizeInvitation({
                        ignoreApiQueue: true,
                        token: token,
                        callback: function (result) {
                            if (result.errorCode !== GSErrors_1.GSErrors.OK) {
                                window.gigya.events.global.dispatchWhenHandlersAdded(['accounts.error', 'socialize.error'], result);
                            }
                            else {
                                window.gigya.events.global.dispatchWhenHandlersAdded(['accounts.finalizeGroupInvitation', 'socialize.finalizeGroupInvitation'], result);
                            }
                            resolve();
                        }
                    });
                })];
        });
    });
}
function getGigyaSettings(group) {
    var gigyaSettings = localStorageUtils.getObject('gigyaSettings');
    return JSONUtils.serialize(gigyaSettings[group]);
}
exports.getGigyaSettings = getGigyaSettings;
function setGigyaSettings(group, settings) {
    var _a;
    var gigyaSettings = localStorageUtils.getObject('gigyaSettings', (_a = {}, _a[group] = {}, _a));
    for (var p in settings) {
        gigyaSettings[group][p] = settings[p];
    }
    localStorageUtils.setItem('gigyaSettings', JSONUtils.serialize(gigyaSettings));
}
exports.setGigyaSettings = setGigyaSettings;
function delGigyaSettings(group) {
    if (!group) {
        localStorageUtils.removeItem('gigyaSettings');
    }
    else {
        var gigyaSettings = localStorageUtils.getObject('gigyaSettings');
        if (gigyaSettings) {
            delete gigyaSettings[group];
            localStorageUtils.setItem('gigyaSettings', JSONUtils.serialize(gigyaSettings));
        }
    }
}
exports.delGigyaSettings = delGigyaSettings;
function handleSpecialFields(o) {
    var collection = window.gigya.socialize.Collection;
    var toTyped = function (arr, ctor) {
        var oarr = [];
        var i = 0;
        var el = arr[i];
        while (el) {
            oarr.push(new ctor(el));
            if (oarr[i].identities) {
                convertIdentitiesArrayToObject(oarr[i]);
            }
            el = arr[++i];
        }
        return oarr;
    };
    if (o.photos)
        o.photos = new collection(o.photos, 'photoID');
    if (o.albums)
        o.albums = new collection(o.albums, 'albumID');
    if (o.contacts)
        o.contacts = new collection(toTyped(o.contacts, window.gigya.socialize.Contact), 'email');
    if (o.friend)
        o.friend = new collection(toTyped(o.friend, window.gigya.socialize.Friend), 'UID');
    if (o.user)
        o.user = new window.gigya.socialize.User(o.user);
    if (o.friends && o.friends instanceof Array) {
        var arUIDs = [];
        for (var i = 0; i < o.friends.length; i++) {
            arUIDs.push(o.friends[i].UID);
        }
        o.UIDs = arUIDs.join(',');
        o.friends = new collection(toTyped(o.friends, window.gigya.socialize.Friend), 'UID');
    }
}
exports.handleSpecialFields = handleSpecialFields;
function convertIdentitiesArrayToObject(o) {
    if (o.identities == null) {
        o.identities = {};
        return;
    }
    if (o.identities.constructor != Array) {
        return;
    }
    var identitiesArray = o.identities;
    o.identities = {};
    for (var i = 0; i < identitiesArray.length; i++) {
        o.identities[identitiesArray[i].provider] = new window.gigya.socialize.Identity(identitiesArray[i]);
    }
}
exports.convertIdentitiesArrayToObject = convertIdentitiesArrayToObject;
function addUserInfoToEvent(response, targetObject, addLoginProperties, useBasePhotoURL) {
    var oUser = response['user'] || response['userInfo'];
    if (targetObject == null)
        targetObject = {};
    if (oUser != null) {
        targetObject['user'] = objectUtils.clone(oUser);
        if (response['isLoggedIn'] != null)
            targetObject['user']['isLoggedIn'] = response['isLoggedIn'];
        if (response['isSiteUID'] != null)
            targetObject['user']['isSiteUID'] = response['isSiteUID'];
        if (response['iRank'] != null)
            targetObject['user']['iRank'] = response['iRank'];
    }
    if (addLoginProperties) {
        objectUtils.extractProperties(response, targetObject, 'signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|signKeysUIDSignature|dataCenter|id_token|groups');
        if (targetObject['user'] != null) {
            targetObject['UID'] = oUser.UID;
            targetObject['isSiteUID'] = oUser.isSiteUID;
            // isSiteUID is temporary for https://gigya.my.salesforce.com/5004000000T3qcZ
        }
    }
    return targetObject;
}
exports.addUserInfoToEvent = addUserInfoToEvent;
function sendEmailNative(params) {
    var userAction = params['userAction'] || {};
    var subject = userAction['title'] || '';
    var body = userAction['linkBack'] || '';
    document.location.href = 'mailto:?to=&subject=' + URLUtils.URLEncode(subject) + '&body=' + URLUtils.URLEncode(body);
    window.gigya.socialize.sendEmail(params, { dontSendEmail: true }); // To report that send without sending it
}
exports.sendEmailNative = sendEmailNative;


/***/ }),

/***/ "./src/core/Gigya.Js/app/LegacyLogger.ts":
/*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/LegacyLogger.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var objectUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/object */ "./src/core/Gigya.Js/app/Utils/object.ts");
var JSONUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/JSON */ "./src/core/Gigya.Js/app/Utils/JSON.ts");
var arrayUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/array */ "./src/core/Gigya.Js/app/Utils/array.ts");
var scriptUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/script */ "./src/core/Gigya.Js/app/Utils/script.ts");
var cdn_1 = __webpack_require__(/*! src/core/Gigya.Js/app/cdn */ "./src/core/Gigya.Js/app/cdn.ts");
var functionsUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/functions */ "./src/core/Gigya.Js/app/Utils/functions.ts");
var cookie_1 = __webpack_require__(/*! ./Utils/cookie */ "./src/core/Gigya.Js/app/Utils/cookie.ts");
exports.CONSOLE_LOG_LEVELS = ['debug', 'info', 'log', 'warn', 'error'];
exports.selectedConsoleLogLevels = [];
exports._log = [];
function enable() {
    cookie_1.default.set('_gig_dbgConsole_log', '1', null);
}
exports.enable = enable;
function disable() {
    cookie_1.default.set('_gig_dbgConsole_log', '0', null);
}
exports.disable = disable;
function _isEnabled() {
    var isManuallyEnabled = !window.gigya.localInfo.isNativeMobileApp && cookie_1.default.get('_gig_dbgConsole_log');
    if (typeof isManuallyEnabled !== 'undefined' && isManuallyEnabled != null) {
        return isManuallyEnabled === '1';
    }
    return exports.selectedConsoleLogLevels.length > 0;
}
exports._isEnabled = _isEnabled;
function addLog(title, obj, writeToConsole) {
    if (writeToConsole === void 0) { writeToConsole = false; }
    if (_isEnabled() || writeToConsole) {
        var sLog = title;
        obj = objectUtils.clone(obj, true, false, 4, null, true);
        if (obj != null)
            sLog += ':' + (typeof obj == 'object' ? '\n' : '') + JSONUtils.serialize(obj, true, true);
        if (writeToConsole && (typeof console == 'object' && console.log))
            console.log(sLog);
        if (_isEnabled()) {
            exports._log.push(sLog);
            if (document.getElementById('gigya_log') != null && show)
                show();
            var logType;
            if (arrayUtils.indexOf(exports.CONSOLE_LOG_LEVELS, title) != -1)
                logType = title;
            else
                logType = 'log';
            window.gigya._.apiAdapter.onJSLog(logType, sLog);
        }
    }
}
exports.addLog = addLog;
function logCall(name, params, lastSource) {
    if (!lastSource)
        lastSource = params.lastSource;
    addLog('Calling ' +
        name +
        (lastSource && lastSource != name ? ' for ' + lastSource : '') +
        (params.source && lastSource != params.source ? ' initiated from ' + params.source : '') +
        ' with these params', params);
}
exports.logCall = logCall;
function debug() {
    scriptUtils.load(cdn_1.getCdnResource('/js/gigya.services.socialize.plugins.log.min.js'), null, function () {
        showConfig();
    }, true);
}
exports.debug = debug;
function showLog() {
    scriptUtils.load(cdn_1.getCdnResource('/js/gigya.services.socialize.plugins.log.min.js'), null, function () {
        show();
    }, true);
}
exports.showLog = showLog;
function show() { }
exports.show = show;
function showConfig() { }
exports.showConfig = showConfig;
functionsUtils.createAlias('gigya.debug', debug);


/***/ }),

/***/ "./src/core/Gigya.Js/app/LocalInfo.ts":
/*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/LocalInfo.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Local environment info (browser, capabilities, hosting domain)
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var userAgent = navigator.userAgent.toLowerCase();
exports.localInfo = {
    baseDomain: '',
    isBrowserSupportsFilesAPI: (function () {
        return typeof FileReader === 'function' || typeof FileReader === 'object';
    })(),
    initTime: new Date(),
    version: 0,
    pageDomain: document.location.hostname,
    protocol: document.location.protocol == 'http:' ? 'http' : 'https',
    userAgent: userAgent,
    isWin: userAgent.indexOf('win') != -1,
    isIE: userAgent.indexOf('msie') != -1 || (userAgent.indexOf('mozilla') != -1 && userAgent.indexOf('trident') != -1),
    isIE6: userAgent.indexOf('msie 6.') != -1,
    isIE7: userAgent.indexOf('msie 7.') != -1,
    isIE8: userAgent.indexOf('msie 8.') != -1,
    isIE9: userAgent.indexOf('msie 9.') != -1,
    isIE10: userAgent.indexOf('msie 10.') != -1,
    isIE11: userAgent.indexOf('mozilla') != -1 && userAgent.indexOf('trident/7.0') != -1,
    isEdgeLegacy: userAgent.indexOf('edge') != -1,
    isEdge: RegExp(/edg(?!e)/).test(userAgent),
    isIOS: userAgent.indexOf('iphone') != -1 || userAgent.indexOf('ipad') != -1 || userAgent.indexOf('ipod') != -1,
    isSafari534: userAgent.indexOf('safari/534') != -1,
    isWeChat: userAgent.indexOf('micromessenger') != -1,
    iosVersion: (function () {
        if (userAgent.indexOf('applewebkit') != -1 && userAgent.indexOf('version/') != -1) {
            return parseInt(userAgent.split('version/')[1].split(' ')[0]);
        }
        else
            return 0;
    })(),
    isAndroid: userAgent.indexOf('android') != -1,
    isAndroidBrowser: (function (userAgent) {
        if (userAgent.indexOf('mozilla/5.0') === -1)
            return false;
        if (userAgent.indexOf('android 4') === -1)
            return false;
        if (userAgent.indexOf('applewebkit') === -1)
            return false;
        if (userAgent.indexOf('windows phone') !== -1)
            return false;
        // Special user agents found so far that violate the existance of chrome rule
        // Bug 38367 Android Browser: Mozilla/5.0 (Linux; Android 4.2.2; en-us; SAMSUNG GT-I9500 Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Version/1.0 Chrome/18.0.1025.308 Mobile Safari/535.19
        // Bug 40209 Chrome Browser: Mozilla/5.0 (Linux; Android 4.2.2; SAMSUNG SGT-I747 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.93 Mobile Safari/537.36
        // Windows Phone Browser: Mozilla/5.0 (Mobile; Windows Phone 8.1; Android 4.0; ARM; Trident/7.0; Touch; rv:11.0; IEMobile/11.0; NOKIA; Lumia 920) like iPhone OS 7_0_3 Mac OS X AppleWebKit/537 (KHTML, like Gecko) Mobile Safari/537
        // Chrome Browser: Mozilla/5.0 (Linux; Android 4.2.2; en-gb; SAMSUNG GT-I9500 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Version/1.5 Chrome/28.0.1500.94 Mobile Safari/537.36
        var chromeInfo = /chrome\/(\d+)/.exec(userAgent);
        if (!chromeInfo)
            return true;
        var chromeVersion = parseInt(chromeInfo[1]);
        return chromeVersion < 20;
    })(userAgent),
    currentBrowser: '',
    androidVersion: (function () {
        if (userAgent.indexOf('android') != -1) {
            return parseFloat(userAgent.slice(userAgent.indexOf('android') + 8));
        }
        else
            return 0;
    })(),
    isChrome: userAgent.indexOf('chrome') != -1 && userAgent.indexOf('edg') == -1,
    isGoogleBot: userAgent.indexOf('googlebot') != -1,
    isFF: userAgent.indexOf('firefox') != -1,
    isOpera: userAgent.indexOf('opera') != -1,
    isSafari: navigator.appVersion &&
        navigator.appVersion.toLowerCase().indexOf('safari') != -1 &&
        navigator.appVersion.toLowerCase().indexOf('chrome') == -1 &&
        userAgent.indexOf('android') == -1,
    isIOSWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),
    isIOSChrome: userAgent.indexOf('crios') != -1,
    isMAC: navigator.appVersion && navigator.appVersion.toLowerCase().indexOf('mac') != -1,
    isWindowsPhone: userAgent.indexOf('windows phone') != -1,
    isFacebookBrowser: userAgent.indexOf('fban') != -1 || userAgent.indexOf('fbav') != -1,
    supportsPostMessage: window.postMessage != null && (userAgent.indexOf('msie') == -1 || userAgent.indexOf('iemobile') != -1),
    supportsLocalStorage: false,
    supportsSessionStorage: false,
    supportsFlash: (function () {
        // http://stackoverflow.com/questions/998245/how-can-i-detect-if-flash-is-installed-and-if-not-display-a-hidden-div-that-inf
        var supportsFlash = false;
        try {
            if (navigator.mimeTypes &&
                navigator.mimeTypes['application/x-shockwave-flash'] != undefined &&
                navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin) {
                supportsFlash = true;
            }
            else {
                var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
                if (fo) {
                    supportsFlash = true;
                }
            }
        }
        catch (e) { }
        return supportsFlash;
    })(),
    quirksMode: document.compatMode == 'BackCompat' && userAgent.indexOf('msie') != -1,
    backCompat: document.compatMode == 'BackCompat',
    // TODO: Add isTablet function for devices non-Mobile
    isMobile: (function () {
        var mobileClients = [
            'iphone',
            'ipod',
            'android',
            'midp',
            '240x320',
            'blackberry',
            'netfront',
            'nokia',
            'panasonic',
            'portalmmm',
            'sharp',
            'sie-',
            'sonyericsson',
            'symbian',
            'windows ce',
            'benq',
            'mda',
            'mot-',
            'opera mini',
            'philips',
            'pocket pc',
            'sagem',
            'samsung',
            'htc',
        ];
        for (var i in mobileClients) {
            if (userAgent.indexOf(mobileClients[i]) != -1) {
                return true;
            }
        }
        return false;
    })(),
    isMobileApp: (function () {
        if (!document.getElementsByTagName)
            // for old IE
            return false;
        var metaTags = document.getElementsByTagName('meta');
        for (var i = 0; i < metaTags.length; i++) {
            if (metaTags[i].getAttribute('name') == 'viewport') {
                var content = metaTags[i].getAttribute('content');
                if (content && content.indexOf('width=device-width') !== -1)
                    return true;
            }
        }
        return false;
    })(),
    isNativeMobileApp: false,
    isTouch: (function () {
        if ('ontouchstart' in window)
            // works on most browsers
            return true;
        if ('onmsgesturechange' in window) {
            // works on ie10
            // Try to determine if IE is open in metro mode. Metro doesn't allow activeX, that's the best test available as of IE11.
            try {
                new ActiveXObject('htmlfile');
                return false;
            }
            catch (e) {
                return true;
            }
        }
        return false;
    })(),
    isOnLine: function () { return navigator.onLine; },
    messagingMethod: 1
};
var isStorageEnabled = function (storageName) {
    try {
        var storage = window[storageName];
        if (!storage) {
            return false;
        }
        var testName = '_gig_localStorage_test';
        var testValue = 'just checking for localStorage';
        storage.setItem(testName, testValue);
        var result = storage.getItem(testName) === testValue;
        storage.removeItem(testName);
        return result;
    }
    catch (ex) {
        // Reasons:
        // - Inside 3rd party API proxy iFrame.
        // - Safari in incognito mode will error with "quota exceeded".
        // - Chrome with 3rd party cookies disabled will throw an error if you access the window.localStorage object in ANY way.
        return false;
    }
};
exports.localInfo.supportsLocalStorage = isStorageEnabled('localStorage');
exports.localInfo.supportsSessionStorage = isStorageEnabled('sessionStorage');
exports.localInfo.isMAC = exports.localInfo.isMAC && !exports.localInfo.isIOS;
var os = exports.localInfo.isWin
    ? 'windows'
    : exports.localInfo.isWindowsPhone
        ? 'winphone'
        : exports.localInfo.isIOS
            ? 'ios-v' + exports.localInfo.iosVersion
            : exports.localInfo.isMAC
                ? 'mac'
                : exports.localInfo.isAndroid
                    ? 'android'
                    : '';
if (os)
    os += ' ';
var browser = exports.localInfo.isChrome
    ? 'chrome'
    : exports.localInfo.isFF
        ? 'firefox'
        : exports.localInfo.isSafari
            ? 'safari'
            : exports.localInfo.isEdge
                ? 'edge'
                : exports.localInfo.isEdgeLegacy
                    ? 'edge legacy'
                    : exports.localInfo.isIE11
                        ? 'ie11'
                        : exports.localInfo.isIE10
                            ? 'ie10'
                            : exports.localInfo.isIE9
                                ? 'ie9'
                                : exports.localInfo.isIE8
                                    ? 'ie8'
                                    : '';
exports.localInfo.currentBrowser = os + browser;
var ClientFeature = /** @class */ (function () {
    function ClientFeature(navigator, screen) {
        if (navigator === void 0) { navigator = window.gigya._.WindowProvider.navigator(); }
        if (screen === void 0) { screen = window.gigya._.WindowProvider.screen(); }
        this.navigator = navigator;
        this.screen = screen;
        this.collectData();
    }
    ClientFeature.prototype.collectData = function () {
        var _a, _b, _c, _d, _e, _f, _g;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var permissionStatus, state, batteryInfo, _h, charging, chargingTime, dischargingTime, level;
            return tslib_1.__generator(this, function (_j) {
                switch (_j.label) {
                    case 0:
                        this.userAgent = (_a = this.navigator) === null || _a === void 0 ? void 0 : _a.userAgent;
                        this.plugins = Array.from(((_b = this.navigator) === null || _b === void 0 ? void 0 : _b.plugins) || []).map(function (_a) {
                            var name = _a.name, filename = _a.filename, length = _a.length;
                            return ({ name: name, filename: filename, length: length });
                        });
                        this.localTime = new Date().toLocaleTimeString();
                        this.timezoneOffset = new Date().getTimezoneOffset();
                        return [4 /*yield*/, ((_d = (_c = this.navigator) === null || _c === void 0 ? void 0 : _c.permissions) === null || _d === void 0 ? void 0 : _d.query({ name: 'notifications' }))];
                    case 1:
                        permissionStatus = _j.sent();
                        if (permissionStatus) {
                            state = permissionStatus.state;
                            this.permissionStatus = { state: state };
                        }
                        this.webdriver = (_e = this.navigator) === null || _e === void 0 ? void 0 : _e.webdriver;
                        _h = this.navigator.getBattery;
                        if (!_h) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.navigator.getBattery()];
                    case 2:
                        _h = (_j.sent());
                        _j.label = 3;
                    case 3:
                        batteryInfo = _h;
                        if (batteryInfo) {
                            charging = batteryInfo.charging, chargingTime = batteryInfo.chargingTime, dischargingTime = batteryInfo.dischargingTime, level = batteryInfo.level;
                            this.batteryInfo = { charging: charging, chargingTime: chargingTime, dischargingTime: dischargingTime, level: level };
                        }
                        this.features = [
                            ((_f = this.navigator) === null || _f === void 0 ? void 0 : _f.maxTouchPoints) || ((_g = this.navigator) === null || _g === void 0 ? void 0 : _g.msMaxTouchPoints),
                            this.screen.width + "|" + this.screen.height + "|" + this.screen.colorDepth,
                            this.navigator.javaEnabled(),
                            'sendBeacon' in this.navigator
                        ];
                        return [2 /*return*/];
                }
            });
        });
    };
    return ClientFeature;
}());
exports.ClientFeature = ClientFeature;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Oauth/OauthService.ts":
/*!*****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Oauth/OauthService.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var promise_1 = __webpack_require__(/*! ../Utils/promise */ "./src/core/Gigya.Js/app/Utils/promise.ts");
exports.DefaultGrantType = 'authorization_code';
exports.Oauth_Response_Type = 'code';
var OauthService = /** @class */ (function () {
    function OauthService() {
    }
    OauthService.prototype.register = function (params) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var idToken, rest, res;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        idToken = params.idToken, rest = tslib_1.__rest(params, ["idToken"]);
                        window.gigya._.apiAdapters.web.tokenStore.setBearerToken(idToken);
                        return [4 /*yield*/, promise_1.promisify(window.gigya.oauth.register, tslib_1.__assign({}, rest))];
                    case 1:
                        res = _a.sent();
                        window.gigya._.apiAdapters.web.tokenStore.removeBearerToken();
                        return [2 /*return*/, res];
                }
            });
        });
    };
    ;
    OauthService.prototype.connect = function (_a) {
        var idToken = _a.idToken, regToken = _a.regToken, ignoreApiQueue = _a.ignoreApiQueue;
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var res;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        window.gigya._.apiAdapters.web.tokenStore.setBearerToken(idToken);
                        return [4 /*yield*/, promise_1.promisify(window.gigya.oauth.connect, {
                                regToken: regToken, ignoreApiQueue: ignoreApiQueue
                            })];
                    case 1:
                        res = _b.sent();
                        window.gigya._.apiAdapters.web.tokenStore.removeBearerToken();
                        return [2 /*return*/, res];
                }
            });
        });
    };
    ;
    OauthService.prototype.authorize = function (params) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var res;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        window.gigya._.apiAdapters.web.tokenStore.setBearerToken(params.idToken);
                        return [4 /*yield*/, promise_1.promisify(window.gigya.oauth.authorize, {
                                response_type: exports.Oauth_Response_Type
                            })];
                    case 1:
                        res = _a.sent();
                        window.gigya._.apiAdapters.web.tokenStore.removeBearerToken();
                        return [2 /*return*/, res];
                }
            });
        });
    };
    OauthService.prototype.token = function (_a) {
        var grantType = _a.grantType, sessionExpiration = _a.sessionExpiration, code = _a.code, dontHandleScreenSet = _a.dontHandleScreenSet;
        return promise_1.promisify(window.gigya.oauth.token, {
            code: code,
            grant_type: grantType || exports.DefaultGrantType,
            sessionExpiration: sessionExpiration || '0',
            dontHandleScreenSet: dontHandleScreenSet || false
        });
    };
    return OauthService;
}());
exports.OauthService = OauthService;
exports.default = new OauthService();


/***/ }),

/***/ "./src/core/Gigya.Js/app/Passkey/CredentialService.ts":
/*!************************************************************!*\
  !*** ./src/core/Gigya.Js/app/Passkey/CredentialService.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils_1 = __webpack_require__(/*! ./utils */ "./src/core/Gigya.Js/app/Passkey/utils.ts");
var GSErrors_1 = __webpack_require__(/*! ../GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
exports.errorMap = {
    ConstraintError: {
        errorCode: GSErrors_1.GSErrors.NOT_SUPPORTED,
        errorDetails: 'Discoverable credentials were required but no available authenticator supported'
    },
    InvalidStateError: {
        errorCode: GSErrors_1.GSErrors.PASSKEY_AUTHENTICATOR_REGISTERED,
        errorDetails: 'The authenticator was previously registered'
    },
    NotAllowedError: {
        errorCode: GSErrors_1.GSErrors.OPERATION_CANCELED,
        errorDetails: 'User clicked cancel, or the registration ceremony timed out'
    },
    NotSupportedError: {
        errorCode: GSErrors_1.GSErrors.NOT_SUPPORTED,
        errorDetails: 'No available authenticator supported any of the specified pubKeyCredParams algorithms'
    },
    SecurityError: {
        errorCode: GSErrors_1.GSErrors.INVALID_SITE_CONFIGURATION_ERROR,
        errorDetails: "Hostname is an invalid domain / The RP ID is invalid for this domain"
    },
    TypeError: {
        errorCode: GSErrors_1.GSErrors.INVALID_SITE_CONFIGURATION_ERROR,
        errorDetails: "User ID was not between 1 and 64 characters"
    },
    AbortError: {
        errorCode: GSErrors_1.GSErrors.PASSKEY_ABORTED,
        errorDetails: 'Authentication ceremony was sent an abort signal'
    },
    UnknownError: {
        errorCode: GSErrors_1.GSErrors.PASSKEY_ERROR,
        errorDetails: 'The authenticator was unable to process the specified options, or could not create a new credential'
    },
    CredentialError: {
        errorCode: GSErrors_1.GSErrors.PASSKEY_ERROR,
        errorDetails: 'Unable to create/get credential'
    }
};
var CredentialService = /** @class */ (function () {
    function CredentialService() {
        this.abortService = new PasskeyAbortService();
    }
    Object.defineProperty(CredentialService.prototype, "credentials", {
        get: function () {
            return window.gigya._.WindowProvider.navigator().credentials;
        },
        enumerable: true,
        configurable: true
    });
    CredentialService.prototype.isConditionalMediationAvailable = function (pubKeyCred) {
        if (pubKeyCred === void 0) { pubKeyCred = PublicKeyCredential; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof pubKeyCred.isConditionalMediationAvailable === 'function')) return [3 /*break*/, 2];
                        return [4 /*yield*/, (pubKeyCred === null || pubKeyCred === void 0 ? void 0 : pubKeyCred.isConditionalMediationAvailable())];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: return [2 /*return*/, false];
                }
            });
        });
    };
    CredentialService.prototype.isSupported = function () {
        var _a, _b;
        return !(typeof this.credentials !== 'object' ||
            typeof ((_a = this.credentials) === null || _a === void 0 ? void 0 : _a.create) !== 'function' ||
            typeof ((_b = this.credentials) === null || _b === void 0 ? void 0 : _b.get) !== 'function');
    };
    CredentialService.prototype.get = function (options, mediation) {
        if (mediation === void 0) { mediation = undefined; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var publicKey, signal, _a, credential, error_1, id, rawId, response, type;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        publicKey = this.createPKCredentialRequest(options);
                        signal = this.abortService.createNewAbortSignal();
                        _a = mediation === 'conditional';
                        if (!_a) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.isConditionalMediationAvailable()];
                    case 1:
                        _a = !(_b.sent());
                        _b.label = 2;
                    case 2:
                        if (_a) {
                            mediation = undefined;
                        }
                        _b.label = 3;
                    case 3:
                        _b.trys.push([3, 5, , 6]);
                        return [4 /*yield*/, this.credentials.get({
                                mediation: mediation,
                                publicKey: publicKey,
                                signal: signal
                            })];
                    case 4:
                        credential = _b.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        error_1 = _b.sent();
                        throw exports.errorMap[error_1 === null || error_1 === void 0 ? void 0 : error_1.name] || exports.errorMap.UnknownError;
                    case 6:
                        if (!credential) {
                            throw exports.errorMap.CredentialError;
                        }
                        id = credential.id, rawId = credential.rawId, response = credential.response, type = credential.type;
                        return [2 /*return*/, {
                                id: id,
                                type: type,
                                rawId: utils_1.bufferToBase64URLString(rawId),
                                extensions: credential.getClientExtensionResults(),
                                response: {
                                    authenticatorData: utils_1.bufferToBase64URLString(response.authenticatorData),
                                    clientDataJSON: utils_1.bufferToBase64URLString(response.clientDataJSON),
                                    signature: utils_1.bufferToBase64URLString(response.signature),
                                    userHandle: null
                                }
                            }];
                }
            });
        });
    };
    CredentialService.prototype.create = function (options) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var publicKey, signal, credential, error_2, id, rawId, response, type, transport;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        publicKey = this.createPKCredentialCreate(options);
                        signal = this.abortService.createNewAbortSignal();
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, this.credentials.create({
                                signal: signal,
                                publicKey: publicKey
                            })];
                    case 2:
                        credential = _b.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        error_2 = _b.sent();
                        throw exports.errorMap[error_2 === null || error_2 === void 0 ? void 0 : error_2.name] || exports.errorMap.UnknownError;
                    case 4:
                        if (!credential) {
                            throw exports.errorMap.CredentialError;
                        }
                        id = credential.id, rawId = credential.rawId, response = credential.response, type = credential.type;
                        transport = undefined;
                        if (typeof response.getTransports === 'function') {
                            transport = response.getTransports();
                        }
                        return [2 /*return*/, {
                                id: id,
                                type: type,
                                rawId: utils_1.bufferToBase64URLString(rawId),
                                response: {
                                    attestationObject: utils_1.bufferToBase64URLString(response.attestationObject),
                                    clientDataJSON: utils_1.bufferToBase64URLString(response.clientDataJSON),
                                    transport: transport
                                },
                                clientExtensionResults: credential.getClientExtensionResults(),
                                authenticatorSelection: tslib_1.__assign(tslib_1.__assign({}, options.authenticatorSelection), { authenticatorAttachment: ((_a = options.authenticatorSelection) === null || _a === void 0 ? void 0 : _a.authenticatorAttachment) || undefined }),
                                attestation: options.attestation || 'direct'
                            }];
                }
            });
        });
    };
    CredentialService.prototype.abortCurrentCeremony = function () {
        this.abortService.abort();
    };
    CredentialService.prototype.createPKCredentialRequest = function (options) {
        var _a;
        var allowCredentials;
        if (((_a = options.allowCredentials) === null || _a === void 0 ? void 0 : _a.length) > 0) {
            allowCredentials = options.allowCredentials.map(function (c) {
                return tslib_1.__assign(tslib_1.__assign({}, c), { id: utils_1.base64URLStringToBuffer(c.id) });
            });
        }
        return tslib_1.__assign(tslib_1.__assign({}, options), { challenge: utils_1.base64URLStringToBuffer(options.challenge), allowCredentials: allowCredentials });
    };
    CredentialService.prototype.createPKCredentialCreate = function (options) {
        var _a;
        return tslib_1.__assign(tslib_1.__assign({}, options), { challenge: utils_1.base64URLStringToBuffer(options.challenge), user: tslib_1.__assign(tslib_1.__assign({}, options.user), { id: utils_1.utf8StringToBuffer(options.user.id) }), excludeCredentials: (_a = options.excludeCredentials) === null || _a === void 0 ? void 0 : _a.map(function (c) {
                return tslib_1.__assign(tslib_1.__assign({}, c), { id: utils_1.base64URLStringToBuffer(c.id) });
            }) });
    };
    return CredentialService;
}());
exports.CredentialService = CredentialService;
var PasskeyAbortService = /** @class */ (function () {
    function PasskeyAbortService() {
    }
    PasskeyAbortService.prototype.createNewAbortSignal = function () {
        if (this.controller) {
            this.controller.abort();
        }
        var newController = new AbortController();
        this.controller = newController;
        return newController.signal;
    };
    PasskeyAbortService.prototype.abort = function () {
        var _a;
        (_a = this.controller) === null || _a === void 0 ? void 0 : _a.abort();
        this.controller = null;
    };
    return PasskeyAbortService;
}());
exports.default = new CredentialService();


/***/ }),

/***/ "./src/core/Gigya.Js/app/Passkey/PasskeyService.ts":
/*!*********************************************************!*\
  !*** ./src/core/Gigya.Js/app/Passkey/PasskeyService.ts ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var OauthService_1 = __webpack_require__(/*! ../Oauth/OauthService */ "./src/core/Gigya.Js/app/Oauth/OauthService.ts");
var GSErrors_1 = __webpack_require__(/*! ../GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var promise_1 = __webpack_require__(/*! ../Utils/promise */ "./src/core/Gigya.Js/app/Utils/promise.ts");
var globalEvents = __webpack_require__(/*! src/core/Gigya.Js/app/GlobalEvents */ "./src/core/Gigya.Js/app/GlobalEvents.ts");
var CredentialService_1 = __webpack_require__(/*! ./CredentialService */ "./src/core/Gigya.Js/app/Passkey/CredentialService.ts");
var PasskeyService = /** @class */ (function () {
    function PasskeyService() {
        this.eventHandlers = new Map();
    }
    PasskeyService.prototype.on = function (event, handler) {
        if (!this.eventHandlers.get(event)) {
            this.eventHandlers.set(event, []);
        }
        this.eventHandlers.get(event).push(handler);
    };
    PasskeyService.prototype.remove = function (event, handler) {
        var _a;
        this.eventHandlers.set(event, (_a = this.eventHandlers.get(event)) === null || _a === void 0 ? void 0 : _a.filter(function (fn) { return fn !== handler; }));
    };
    PasskeyService.prototype.isSupported = function () {
        return CredentialService_1.default.isSupported();
    };
    PasskeyService.prototype.isConditionalMediationAvailable = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, CredentialService_1.default.isConditionalMediationAvailable()];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    PasskeyService.prototype.authenticate = function (params) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, this.runOneAtATime(function () { return _this.internalAuthenticate(params); }, (params === null || params === void 0 ? void 0 : params.abortCurrentCeremony) || false)];
            });
        });
    };
    PasskeyService.prototype.registerPasskey = function (params, abortCurrentCeremony) {
        if (params === void 0) { params = {}; }
        if (abortCurrentCeremony === void 0) { abortCurrentCeremony = false; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
                if (params.aToken) {
                    return [2 /*return*/, this.runOneAtATime(function () { return _this.internalRegister(params); }, abortCurrentCeremony)];
                }
                return [2 /*return*/, this.runOneAtATime(function () { return _this.internalConnect(params); }, abortCurrentCeremony)];
            });
        });
    };
    PasskeyService.prototype.removePasskey = function (credentialId, regToken) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var response;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.auth.fido.removeCredential, {
                            credentialId: credentialId,
                            regToken: regToken,
                            ignoreApiQueue: true
                        })];
                    case 1:
                        response = _a.sent();
                        if (response.errorCode === GSErrors_1.GSErrors.OK) {
                            this.dispatchEvent('passkeyRemoved', {
                                credentialId: credentialId,
                                response: response
                            });
                        }
                        return [2 /*return*/, response];
                }
            });
        });
    };
    PasskeyService.prototype.getPasskeys = function (regToken) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.auth.fido.getCredentials, {
                            regToken: regToken,
                            ignoreApiQueue: true
                        })];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    PasskeyService.prototype.waitForService = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.currentRun];
                    case 1: return [2 /*return*/, _b.sent()];
                    case 2:
                        _a = _b.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    PasskeyService.prototype.abortCurrentCeremony = function () {
        CredentialService_1.default.abortCurrentCeremony();
    };
    PasskeyService.prototype.dispatchEvent = function (event, data) {
        for (var _i = 0, _a = this.eventHandlers.get(event) || []; _i < _a.length; _i++) {
            var fn = _a[_i];
            fn(data);
        }
        globalEvents.dispatch(tslib_1.__assign({ eventName: "passkey." + event }, data));
    };
    PasskeyService.prototype.runOneAtATime = function (func, abortCurrentCeremony) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.isSupported()) {
                            throw CredentialService_1.errorMap.NotSupportedError;
                        }
                        if (abortCurrentCeremony) {
                            CredentialService_1.default.abortCurrentCeremony();
                        }
                        return [4 /*yield*/, this.waitForService()];
                    case 1:
                        _a.sent();
                        this.currentRun = func();
                        return [2 /*return*/, this.currentRun];
                }
            });
        });
    };
    PasskeyService.prototype.internalRegister = function (params) {
        if (params === void 0) { params = {}; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var createCredRes, lang, sessionExpiration, context, regSource, cid, source, regResponse, response;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.createAndRegisterCredential(params)];
                    case 1:
                        createCredRes = _a.sent();
                        lang = params.lang, sessionExpiration = params.sessionExpiration, context = params.context, regSource = params.regSource, cid = params.cid, source = params.source;
                        return [4 /*yield*/, OauthService_1.default.register({
                                idToken: createCredRes.idToken,
                                ignoreApiQueue: true,
                                ignoreInterruptions: true,
                                provider: 'site',
                                source: source, lang: lang, sessionExpiration: sessionExpiration, context: context, regSource: regSource, cid: cid
                            })];
                    case 2:
                        regResponse = _a.sent();
                        return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.finalizeRegistration, {
                                regToken: regResponse.regToken,
                                ignoreInterruptions: true,
                                ignoreApiQueue: true,
                                provider: 'site',
                                source: source, context: context
                            })];
                    case 3:
                        response = _a.sent();
                        if (response.errorCode === GSErrors_1.GSErrors.OK) {
                            this.dispatchEvent('passkeyAdded', { response: createCredRes });
                        }
                        return [2 /*return*/, tslib_1.__assign(tslib_1.__assign({}, response), { regToken: regResponse.regToken })];
                }
            });
        });
    };
    PasskeyService.prototype.internalConnect = function (params) {
        if (params === void 0) { params = {}; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var createCredRes, response;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.createAndRegisterCredential(params)];
                    case 1:
                        createCredRes = _a.sent();
                        return [4 /*yield*/, OauthService_1.default.connect({
                                idToken: createCredRes.idToken,
                                regToken: params.regToken,
                                ignoreApiQueue: true
                            })];
                    case 2:
                        response = _a.sent();
                        if (response.errorCode === GSErrors_1.GSErrors.OK) {
                            this.dispatchEvent('passkeyAdded', { response: createCredRes });
                        }
                        return [2 /*return*/, response];
                }
            });
        });
    };
    PasskeyService.prototype.internalAuthenticate = function (params) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a, token, options, authenticatorAssertion, verifyAssertionResponse, authorizeResponse;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, PasskeyService.getAssertionOptions()];
                    case 1:
                        _a = _b.sent(), token = _a[0], options = _a[1];
                        return [4 /*yield*/, CredentialService_1.default.get(options, params === null || params === void 0 ? void 0 : params.mediation)];
                    case 2:
                        authenticatorAssertion = _b.sent();
                        return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.auth.fido.verifyAssertion, {
                                authenticatorAssertion: authenticatorAssertion,
                                token: token,
                                ignoreApiQueue: true
                            })];
                    case 3:
                        verifyAssertionResponse = _b.sent();
                        if (verifyAssertionResponse.errorCode !== GSErrors_1.GSErrors.OK || !verifyAssertionResponse.idToken) {
                            throw verifyAssertionResponse;
                        }
                        return [4 /*yield*/, OauthService_1.default.authorize({
                                idToken: verifyAssertionResponse.idToken,
                                ignoreApiQueue: true
                            })];
                    case 4:
                        authorizeResponse = _b.sent();
                        if (authorizeResponse.errorCode !== GSErrors_1.GSErrors.OK || !authorizeResponse.code) {
                            throw authorizeResponse;
                        }
                        return [4 /*yield*/, OauthService_1.default.token({
                                code: authorizeResponse.code,
                                dontHandleScreenSet: (params === null || params === void 0 ? void 0 : params.dontHandleScreenSet) || true,
                                sessionExpiration: params === null || params === void 0 ? void 0 : params.sessionExpiration,
                                ignoreApiQueue: true
                            })];
                    case 5: return [2 /*return*/, _b.sent()];
                }
            });
        });
    };
    PasskeyService.prototype.createAndRegisterCredential = function (params) {
        if (params === void 0) { params = {}; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _a, token, options, attestation, regToken, deviceName, ignoreInterruptions, registerCredentialsResponse;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, PasskeyService.getRegistrationOptions(params)];
                    case 1:
                        _a = _b.sent(), token = _a[0], options = _a[1];
                        return [4 /*yield*/, CredentialService_1.default.create(options)];
                    case 2:
                        attestation = _b.sent();
                        regToken = params.regToken, deviceName = params.deviceName, ignoreInterruptions = params.ignoreInterruptions;
                        return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.auth.fido.registerCredentials, {
                                token: token,
                                attestation: attestation,
                                deviceName: deviceName,
                                regToken: regToken,
                                ignoreApiQueue: true
                            })];
                    case 3:
                        registerCredentialsResponse = _b.sent();
                        if (registerCredentialsResponse.errorCode !== GSErrors_1.GSErrors.OK || !registerCredentialsResponse.idToken) {
                            throw registerCredentialsResponse;
                        }
                        return [2 /*return*/, registerCredentialsResponse];
                }
            });
        });
    };
    PasskeyService.getAssertionOptions = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var requestOptions, options;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.auth.fido.getAssertionOptions, {
                            ignoreApiQueue: true
                        })];
                    case 1:
                        requestOptions = _a.sent();
                        if (requestOptions.errorCode !== GSErrors_1.GSErrors.OK || !requestOptions.options || !requestOptions.token) {
                            throw requestOptions;
                        }
                        options = JSON.parse(requestOptions.options);
                        return [2 /*return*/, [requestOptions.token, options]];
                }
            });
        });
    };
    PasskeyService.getRegistrationOptions = function (params) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var requestOptions, options;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, promise_1.promisify(window.gigya.accounts.auth.fido.initRegisterCredentials, tslib_1.__assign(tslib_1.__assign({}, params), { ignoreApiQueue: true }))];
                    case 1:
                        requestOptions = _a.sent();
                        if (requestOptions.errorCode !== GSErrors_1.GSErrors.OK || !requestOptions.options || !requestOptions.token) {
                            throw requestOptions;
                        }
                        options = JSON.parse(requestOptions.options);
                        return [2 /*return*/, [requestOptions.token, options]];
                }
            });
        });
    };
    return PasskeyService;
}());
exports.PasskeyService = PasskeyService;
exports.default = new PasskeyService();


/***/ }),

/***/ "./src/core/Gigya.Js/app/Passkey/utils.ts":
/*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/Passkey/utils.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function utf8StringToBuffer(value) {
    return new TextEncoder().encode(value);
}
exports.utf8StringToBuffer = utf8StringToBuffer;
function bufferToUTF8String(value) {
    return new TextDecoder('utf-8').decode(value);
}
exports.bufferToUTF8String = bufferToUTF8String;
function bufferToBase64URLString(buffer) {
    var bytes = new Uint8Array(buffer);
    var str = '';
    for (var i = 0; i < bytes.length; i++) {
        str += String.fromCharCode(bytes[i]);
    }
    var base64String = btoa(str);
    return base64String.replace(/\+/g, '-').replace(/\//g, '_').replace(/=/g, '');
}
exports.bufferToBase64URLString = bufferToBase64URLString;
function base64URLStringToBuffer(base64URLString) {
    // Convert from Base64URL to Base64
    var base64 = base64URLString.replace(/-/g, '+').replace(/_/g, '/');
    /**
     * Pad with '=' until it's a multiple of four
     * (4 - (85 % 4 = 1) = 3) % 4 = 3 padding
     * (4 - (86 % 4 = 2) = 2) % 4 = 2 padding
     * (4 - (87 % 4 = 3) = 1) % 4 = 1 padding
     * (4 - (88 % 4 = 0) = 4) % 4 = 0 padding
     */
    var padLength = (4 - (base64.length % 4)) % 4;
    var padded = base64.padEnd(base64.length + padLength, '=');
    // Convert to a binary string
    var binary = atob(padded);
    // Convert binary string to buffer
    var buffer = new ArrayBuffer(binary.length);
    var bytes = new Uint8Array(buffer);
    for (var i = 0; i < binary.length; i++) {
        bytes[i] = binary.charCodeAt(i);
    }
    return buffer;
}
exports.base64URLStringToBuffer = base64URLStringToBuffer;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Services/FlagService.ts":
/*!*******************************************************!*\
  !*** ./src/core/Gigya.Js/app/Services/FlagService.ts ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var FlagService = /** @class */ (function () {
    function FlagService() {
    }
    Object.defineProperty(FlagService, "forceWebSdkBootstrap", {
        get: function () {
            return this.get('forceWebSdkBootstrap');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "useGigyaJsBaseDomain", {
        get: function () {
            return this.get('useGigyaJsBaseDomain');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "hideSSOFrame", {
        get: function () {
            return this.get('hideSSOFrame');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "wcagContrastFix", {
        get: function () {
            return this.get('wcagContrastFix');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "newFormLinkInstanceElement", {
        get: function () {
            return this.get('newFormLinkInstanceElement');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "stopSendingReports", {
        get: function () {
            return this.get('stopSendingReports');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "setGroupApiDomainAfterLogin", {
        get: function () {
            return this.get('setGroupApiDomainAfterLogin');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "useHttpStatusCode", {
        get: function () {
            return this.get('useHttpStatusCode');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "alwaysCheckCookieSave", {
        get: function () {
            return this.get('alwaysCheckCookieSave');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "fixPhoneTFATranslations", {
        get: function () {
            return this.get('fixPhoneTFATranslations');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "loadSsoFrameOnlyOnce", {
        get: function () {
            return this.get('loadSsoFrameOnlyOnce');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "verifyLoginOnlyOnce", {
        get: function () {
            return this.get('verifyLoginOnlyOnce');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "sendLangForEmailOTP", {
        get: function () {
            return this.get('sendLangForEmailOTP');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "setProviderFromResponse", {
        get: function () {
            return this.get('setProviderFromResponse');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "setCookieSameSiteLaxSession", {
        get: function () {
            return this.get('setCookieSameSiteLaxSession');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "setCookieSameSiteLaxSocial", {
        get: function () {
            return this.get('setCookieSameSiteLaxSocial');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "setCookieSameSiteLaxLowPriority", {
        get: function () {
            return this.get('setCookieSameSiteLaxLowPriority');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "forceErrorReport", {
        get: function () {
            return this.get('forceErrorReport');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "skipSameScreenCheckOnSwitch", {
        get: function () {
            return this.get('skipSameScreenCheckOnSwitch');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "getOnlyVisibleField", {
        get: function () {
            return this.get('getOnlyVisibleField');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "updateAccountInfoAsync", {
        get: function () {
            return this.get('updateAccountInfoAsync');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "sanitizeEvaluatedValue", {
        get: function () {
            return this.get('sanitizeEvaluatedValue');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "useSessionVerify", {
        get: function () {
            return this.get('useSessionVerify');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "useExtendedPhoneNumberRegex", {
        get: function () {
            return this.get('useExtendedPhoneNumberRegex');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "generateNewCodeWcagCompliance", {
        get: function () {
            return this.get('generateNewCodeWcagCompliance');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "enforceAuthFlowRedirectForSocial", {
        get: function () {
            return this.get('enforceAuthFlowRedirectForSocial');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "useDecodeURIComponent", {
        get: function () {
            return this.get('useDecodeURIComponent');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "useOidcGetParamHashOldStyle", {
        get: function () {
            return this.get('useOidcGetParamHashOldStyle');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "useViewportPollerAction", {
        get: function () {
            return this.get('useViewportPollerAction');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "ignoreInterruptionsInOidcPassiveLogin", {
        get: function () {
            return this.get('ignoreInterruptionsInOidcPassiveLogin');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "overrideAllChildContext", {
        get: function () {
            return this.get('overrideAllChildContext');
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(FlagService, "dispatchLoginEventWhenHandlerAdded", {
        get: function () {
            return this.get('dispatchLoginEventWhenHandlerAdded');
        },
        enumerable: true,
        configurable: true
    });
    FlagService.get = function (name) {
        var _a, _b;
        return (((_a = window.gigya._.config) === null || _a === void 0 ? void 0 : _a.flags) && ((_b = window.gigya._.config) === null || _b === void 0 ? void 0 : _b.flags[name])) || false;
    };
    Object.defineProperty(FlagService, "apiFlags", {
        // Every flag that is associated with data modification related to the api layer
        get: function () {
            return [];
        },
        enumerable: true,
        configurable: true
    });
    return FlagService;
}());
exports.FlagService = FlagService;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Services/SessionService.ts":
/*!**********************************************************!*\
  !*** ./src/core/Gigya.Js/app/Services/SessionService.ts ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var sessionCache_1 = __webpack_require__(/*! ../Utils/sessionCache */ "./src/core/Gigya.Js/app/Utils/sessionCache.ts");
var object_1 = __webpack_require__(/*! ../Utils/object */ "./src/core/Gigya.Js/app/Utils/object.ts");
var SessionService = /** @class */ (function () {
    function SessionService() {
    }
    SessionService.prototype.isSessionVerified = function (glt, apiKey) {
        if (apiKey === void 0) { apiKey = window.gigya.thisScript.APIKey; }
        var key = this.createKey(glt, apiKey);
        return sessionCache_1.get(key) === 'true';
    };
    SessionService.prototype.setIsSessionVerified = function (glt, verified, apiKey) {
        if (apiKey === void 0) { apiKey = window.gigya.thisScript.APIKey; }
        var key = this.createKey(glt, apiKey);
        sessionCache_1.set(key, "" + verified);
    };
    SessionService.prototype.createKey = function (glt, apiKey) {
        var key = object_1.getMurmurHash(glt + "_" + apiKey, 15).toString();
        return btoa(key);
    };
    return SessionService;
}());
exports.sessionData = new SessionService();


/***/ }),

/***/ "./src/core/Gigya.Js/app/Services/SiteData.ts":
/*!****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Services/SiteData.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var localStorage_1 = __webpack_require__(/*! ../Utils/localStorage */ "./src/core/Gigya.Js/app/Utils/localStorage.ts");
var object_1 = __webpack_require__(/*! ../Utils/object */ "./src/core/Gigya.Js/app/Utils/object.ts");
var _merge = __webpack_require__(/*! lodash.merge */ "../node_modules/lodash.merge/index.js");
var MAX_LIMIT_OF_USERS_PREFERRED_LOGIN_METHODS_PER_SITE = 10;
var SiteDataService = /** @class */ (function () {
    function SiteDataService() {
    }
    Object.defineProperty(SiteDataService, "SITE_PREFERENCES_KEY", {
        get: function () {
            return window.gigya.apiKey + "_preferences";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SiteDataService, "SITE_GIG_KEY", {
        get: function () {
            return window.gigya.apiKey + "_gig";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SiteDataService.prototype, "didForcedBootstrap", {
        get: function () {
            return this.getDataByKey(SiteDataService.SITE_GIG_KEY).didForcedBootstrap || null;
        },
        set: function (didForcedBootstrap) {
            this.setDataByKey(SiteDataService.SITE_GIG_KEY, { didForcedBootstrap: didForcedBootstrap });
        },
        enumerable: true,
        configurable: true
    });
    SiteDataService.prototype.getPreferredLoginMethod = function (identifier) {
        var _a, _b, _c, _d;
        if (!identifier) {
            return '';
        }
        var userPreferences = this.getDataByKey(SiteDataService.SITE_PREFERENCES_KEY);
        var usersPreferredLoginMethods = (_b = (_a = userPreferences === null || userPreferences === void 0 ? void 0 : userPreferences.authentication) === null || _a === void 0 ? void 0 : _a.usersPreferredLoginMethods) !== null && _b !== void 0 ? _b : [];
        return (_d = (_c = usersPreferredLoginMethods.find(function (user) { return user.identifier === identifier; })) === null || _c === void 0 ? void 0 : _c.preferredLoginMethod) !== null && _d !== void 0 ? _d : '';
    };
    SiteDataService.prototype.setPreferredLoginMethod = function (authMethod, identifier) {
        var _a, _b, _c, _d;
        if (!identifier) {
            return;
        }
        var userPreferences = this.getDataByKey(SiteDataService.SITE_PREFERENCES_KEY);
        var usersPreferredLoginMethods = tslib_1.__spreadArrays((_b = (_a = userPreferences === null || userPreferences === void 0 ? void 0 : userPreferences.authentication) === null || _a === void 0 ? void 0 : _a.usersPreferredLoginMethods) !== null && _b !== void 0 ? _b : []);
        var tfaPreferredMethod = (_d = (_c = userPreferences === null || userPreferences === void 0 ? void 0 : userPreferences.authentication) === null || _c === void 0 ? void 0 : _c.tfaPreferredMethod) !== null && _d !== void 0 ? _d : '';
        var isUserExists = usersPreferredLoginMethods.some(function (user) { return user.identifier === identifier; });
        if (this.isMaxLimitUsersPreferredLoginMethodsReached(usersPreferredLoginMethods) && !isUserExists) {
            usersPreferredLoginMethods = this.removeOldestUserPreferredLoginMethod(usersPreferredLoginMethods);
        }
        if (!isUserExists) {
            usersPreferredLoginMethods = this.addUserPreferredLoginMethod(usersPreferredLoginMethods, { identifier: identifier, preferredLoginMethod: authMethod });
        }
        if (isUserExists) {
            usersPreferredLoginMethods = this.refreshExistingUserPreferredLoginMethod({ authMethod: authMethod, identifier: identifier, usersPreferredLoginMethods: usersPreferredLoginMethods });
        }
        this.setDataByKey(SiteDataService.SITE_PREFERENCES_KEY, { authentication: { usersPreferredLoginMethods: usersPreferredLoginMethods, tfaPreferredMethod: tfaPreferredMethod } });
    };
    SiteDataService.prototype.setScreenVariant = function (screenSetId, screenId, testId, variantId) {
        var _a, _b, _c;
        this.setDataByKey(SiteDataService.SITE_PREFERENCES_KEY, (_a = {},
            _a[screenSetId] = {
                screens: (_b = {},
                    _b[screenId] = (_c = {}, _c[testId] = { variant: variantId }, _c),
                    _b)
            },
            _a));
    };
    SiteDataService.prototype.getScreenVariant = function (screenSetId, screenId, testId) {
        var _a, _b, _c, _d;
        var preferences = this.getDataByKey(SiteDataService.SITE_PREFERENCES_KEY);
        return (_d = (_c = (_b = (_a = preferences === null || preferences === void 0 ? void 0 : preferences[screenSetId]) === null || _a === void 0 ? void 0 : _a.screens) === null || _b === void 0 ? void 0 : _b[screenId]) === null || _c === void 0 ? void 0 : _c[testId]) === null || _d === void 0 ? void 0 : _d.variant;
    };
    SiteDataService.prototype.getDataByKey = function (key) {
        return localStorage_1.getObject(key, {});
    };
    SiteDataService.prototype.setDataByKey = function (key, newData) {
        var oldData = this.getDataByKey(key);
        try {
            localStorage_1.setObject(key, object_1.removeUndefined(_merge(oldData, newData)));
        }
        catch (error) {
            window.gigya.logger.report('Failed to save local site data', { error: error, key: key });
        }
    };
    SiteDataService.prototype.refreshExistingUserPreferredLoginMethod = function (_a) {
        var usersPreferredLoginMethods = _a.usersPreferredLoginMethods, identifier = _a.identifier, authMethod = _a.authMethod;
        var remainingMethods = this.removeUserPreferredLoginMethod(usersPreferredLoginMethods, identifier);
        return this.addUserPreferredLoginMethod(remainingMethods, { identifier: identifier, preferredLoginMethod: authMethod });
    };
    SiteDataService.prototype.removeUserPreferredLoginMethod = function (usersPreferredLoginMethods, identifier) {
        return usersPreferredLoginMethods.filter(function (userLoginMethod) { return userLoginMethod.identifier !== identifier; });
    };
    SiteDataService.prototype.isMaxLimitUsersPreferredLoginMethodsReached = function (usersPreferredLoginMethods) {
        return usersPreferredLoginMethods.length === MAX_LIMIT_OF_USERS_PREFERRED_LOGIN_METHODS_PER_SITE;
    };
    SiteDataService.prototype.removeOldestUserPreferredLoginMethod = function (usersPreferredLoginMethods) {
        var oldestMethod = usersPreferredLoginMethods[0];
        return this.removeUserPreferredLoginMethod(usersPreferredLoginMethods, oldestMethod === null || oldestMethod === void 0 ? void 0 : oldestMethod.identifier);
    };
    SiteDataService.prototype.addUserPreferredLoginMethod = function (usersPreferredLoginMethods, userPreferredLogin) {
        return tslib_1.__spreadArrays(usersPreferredLoginMethods, [userPreferredLogin]);
    };
    return SiteDataService;
}());
exports.SiteDataService = SiteDataService;
exports.siteData = new SiteDataService();


/***/ }),

/***/ "./src/core/Gigya.Js/app/TFA/TfaEventService.ts":
/*!******************************************************!*\
  !*** ./src/core/Gigya.Js/app/TFA/TfaEventService.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var eventDispatcher_1 = __webpack_require__(/*! ../Utils/eventDispatcher */ "./src/core/Gigya.Js/app/Utils/eventDispatcher.ts");
var TfaEventService = /** @class */ (function (_super) {
    tslib_1.__extends(TfaEventService, _super);
    function TfaEventService() {
        return _super.call(this, 'tfaEvents') || this;
    }
    TfaEventService.prototype.activateDevice = function (provider, deviceId) {
        this.dispatchEvent('changeActiveDevice', { provider: provider, deviceId: deviceId });
    };
    return TfaEventService;
}(eventDispatcher_1.EventDispatcher));
exports.default = new TfaEventService();


/***/ }),

/***/ "./src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService.ts":
/*!***************************************************************!*\
  !*** ./src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService.ts ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var constants_1 = __webpack_require__(/*! ../../../../accounts/constants */ "./src/accounts/constants.ts");
var apis_1 = __webpack_require__(/*! ./apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var TfaGigyaAssertionService = /** @class */ (function () {
    function TfaGigyaAssertionService() {
        this.assertions = new Map();
    }
    TfaGigyaAssertionService.prototype.getAssertion = function (mode, provider, requestParams) {
        if (requestParams === void 0) { requestParams = {}; }
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var existingAssertion, assertionValue;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        existingAssertion = this.getExistingAssertion(mode, provider);
                        if ((existingAssertion === null || existingAssertion === void 0 ? void 0 : existingAssertion.value) && this.isAssertionValid(existingAssertion.lastUpdatedTimestamp)) {
                            return [2 /*return*/, existingAssertion.value];
                        }
                        return [4 /*yield*/, this.fetchGigyaAssertion(tslib_1.__assign({ mode: mode,
                                provider: provider }, requestParams))];
                    case 1:
                        assertionValue = _a.sent();
                        this.updateAssertion(mode, provider, assertionValue);
                        return [2 /*return*/, assertionValue];
                }
            });
        });
    };
    TfaGigyaAssertionService.prototype.fetchGigyaAssertion = function (params) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var res;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, apis_1.sentInitTfaRequest(params)];
                    case 1:
                        res = _a.sent();
                        if ((res === null || res === void 0 ? void 0 : res.errorCode) == 0 && (res === null || res === void 0 ? void 0 : res.gigyaAssertion)) {
                            return [2 /*return*/, res.gigyaAssertion];
                        }
                        return [2 /*return*/, null];
                }
            });
        });
    };
    TfaGigyaAssertionService.prototype.getExistingAssertion = function (mode, provider) {
        var key = this.getKey(mode, provider);
        return this.assertions.get(key);
    };
    TfaGigyaAssertionService.prototype.updateAssertion = function (mode, provider, value) {
        var key = this.getKey(mode, provider);
        if (!value) {
            this.assertions.delete(key);
        }
        this.assertions.set(key, {
            value: value,
            lastUpdatedTimestamp: new Date().getTime()
        });
    };
    TfaGigyaAssertionService.prototype.getKey = function (mode, provider) {
        return mode + "-" + provider;
    };
    TfaGigyaAssertionService.prototype.isAssertionValid = function (assertionCreationTimestamp) {
        if (!assertionCreationTimestamp) {
            return false;
        }
        return new Date().getTime() - assertionCreationTimestamp < constants_1.gigyaAssertionExpiration;
    };
    return TfaGigyaAssertionService;
}());
exports.default = new TfaGigyaAssertionService();


/***/ }),

/***/ "./src/core/Gigya.Js/app/TFA/TfaManagementService.ts":
/*!***********************************************************!*\
  !*** ./src/core/Gigya.Js/app/TFA/TfaManagementService.ts ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var eventDispatcher_1 = __webpack_require__(/*! ../Utils/eventDispatcher */ "./src/core/Gigya.Js/app/Utils/eventDispatcher.ts");
var apis_1 = __webpack_require__(/*! ./apis */ "./src/core/Gigya.Js/app/TFA/apis.ts");
var types_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/types */ "./src/core/Gigya.Js/app/TFA/types.ts");
var TfaGigyaAssertionService_1 = __webpack_require__(/*! src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService */ "./src/core/Gigya.Js/app/TFA/TfaGigyaAssertionService.ts");
var TfaManagementService = /** @class */ (function (_super) {
    tslib_1.__extends(TfaManagementService, _super);
    function TfaManagementService() {
        return _super.call(this, 'tfaManagement') || this;
    }
    TfaManagementService.prototype.removePhone = function (provider, deviceId) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var gigyaAssertion, res, e_1;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        return [4 /*yield*/, TfaGigyaAssertionService_1.default.getAssertion(types_1.TfaMode.edit, provider)];
                    case 1:
                        gigyaAssertion = _a.sent();
                        return [4 /*yield*/, apis_1.removeTfaPhone(gigyaAssertion, deviceId)];
                    case 2:
                        res = _a.sent();
                        if (res.errorCode === 0) {
                            this.dispatchEvent('removePhone');
                        }
                        else {
                            window.gigya.logger.error('tfa management - could not remove device', { res: res });
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        e_1 = _a.sent();
                        window.gigya.logger.error('tfa management - could not remove device', { e: e_1 });
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    return TfaManagementService;
}(eventDispatcher_1.EventDispatcher));
exports.TfaManagementService = TfaManagementService;
exports.default = new TfaManagementService();


/***/ }),

/***/ "./src/core/Gigya.Js/app/TFA/apis.ts":
/*!*******************************************!*\
  !*** ./src/core/Gigya.Js/app/TFA/apis.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var promise_1 = __webpack_require__(/*! ../Utils/promise */ "./src/core/Gigya.Js/app/Utils/promise.ts");
function sentInitTfaRequest(params) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.initTFA, params)];
        });
    });
}
exports.sentInitTfaRequest = sentInitTfaRequest;
function fetchTfaPhoneList(gigyaAssertion) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.phone.getRegisteredPhoneNumbers, {
                    gigyaAssertion: gigyaAssertion
                })];
        });
    });
}
exports.fetchTfaPhoneList = fetchTfaPhoneList;
function fetchTfaEmailList(gigyaAssertion) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.email.getEmails, {
                    gigyaAssertion: gigyaAssertion
                })];
        });
    });
}
exports.fetchTfaEmailList = fetchTfaEmailList;
function removeTfaPhone(gigyaAssertion, deviceId) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.phone.removePhone, {
                    phoneId: deviceId,
                    gigyaAssertion: gigyaAssertion
                })];
        });
    });
}
exports.removeTfaPhone = removeTfaPhone;
function fetchAvailableProviders(params) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.getProviders, params)];
        });
    });
}
exports.fetchAvailableProviders = fetchAvailableProviders;
function sendEmailVerificationCode(params) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.email.sendVerificationCode, params)];
        });
    });
}
exports.sendEmailVerificationCode = sendEmailVerificationCode;
function sendPhoneVerificationCode(params) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.phone.sendVerificationCode, params)];
        });
    });
}
exports.sendPhoneVerificationCode = sendPhoneVerificationCode;
function sendEmailCompleteVerification(params) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.email.completeVerification, params)];
        });
    });
}
exports.sendEmailCompleteVerification = sendEmailCompleteVerification;
function sendPhoneCompleteVerification(params) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.phone.completeVerification, params)];
        });
    });
}
exports.sendPhoneCompleteVerification = sendPhoneCompleteVerification;
function finalizeTFA(params) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, promise_1.promisify(window.gigya.accounts.tfa.finalizeTFA, params)];
        });
    });
}
exports.finalizeTFA = finalizeTFA;


/***/ }),

/***/ "./src/core/Gigya.Js/app/TFA/types.ts":
/*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/TFA/types.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var TfaProvider;
(function (TfaProvider) {
    TfaProvider["email"] = "gigyaEmail";
    TfaProvider["phone"] = "gigyaPhone";
    TfaProvider["totp"] = "gigyaTotp";
    TfaProvider["push"] = "gigyaPush";
})(TfaProvider = exports.TfaProvider || (exports.TfaProvider = {}));
var TfaRiskOrderedProviders;
(function (TfaRiskOrderedProviders) {
    TfaRiskOrderedProviders[TfaRiskOrderedProviders["gigyaEmail"] = 0] = "gigyaEmail";
    TfaRiskOrderedProviders[TfaRiskOrderedProviders["gigyaPhone"] = 1] = "gigyaPhone";
    TfaRiskOrderedProviders[TfaRiskOrderedProviders["gigyaTotp"] = 2] = "gigyaTotp";
    TfaRiskOrderedProviders[TfaRiskOrderedProviders["gigyaPush"] = 3] = "gigyaPush";
})(TfaRiskOrderedProviders = exports.TfaRiskOrderedProviders || (exports.TfaRiskOrderedProviders = {}));
var TfaMode;
(function (TfaMode) {
    TfaMode["add"] = "add";
    TfaMode["edit"] = "edit";
    TfaMode["verify"] = "verify";
    TfaMode["register"] = "register";
})(TfaMode = exports.TfaMode || (exports.TfaMode = {}));
var TfaPhoneSendCodeMethod;
(function (TfaPhoneSendCodeMethod) {
    TfaPhoneSendCodeMethod["sms"] = "sms";
    TfaPhoneSendCodeMethod["voice"] = "voice";
})(TfaPhoneSendCodeMethod = exports.TfaPhoneSendCodeMethod || (exports.TfaPhoneSendCodeMethod = {}));


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/DOM.ts":
/*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/DOM.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var LocalInfo_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LocalInfo */ "./src/core/Gigya.Js/app/LocalInfo.ts");
var viewportUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/viewport */ "./src/core/Gigya.Js/app/Utils/viewport.ts");
var functionsUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/functions */ "./src/core/Gigya.Js/app/Utils/functions.ts");
exports._popupContainers = [];
exports._pseudoContainers = [];
var _nextZIndex = 999999999;
var backListener = null;
function getNextZIndex() {
    _nextZIndex++;
    return _nextZIndex;
}
exports.getNextZIndex = getNextZIndex;
function getGigyaScriptElement(fileNames) {
    var scripts = document.getElementsByTagName('script');
    var scriptElement;
    var gigyaCdnRegex = /\/\/cdn(s)?\.(ru1\.)?gigya.com/;
    for (var i = scripts.length - 1; i >= 0; i--) {
        var script = scripts[i];
        var src = script.src.toLowerCase();
        if (src !== '') {
            if (gigyaCdnRegex.test(src) || src.indexOf('?apikey=') > -1) {
                var isFileNameExistInSrc = fileNames.length === 0 || fileNames.some(function (fileName) { return src.indexOf(fileName) > -1; });
                if (isFileNameExistInSrc) {
                    scriptElement = script;
                    break;
                }
            }
        }
    }
    return scriptElement;
}
exports.getGigyaScriptElement = getGigyaScriptElement;
function dispatch(el, eventName) {
    var event;
    try {
        event = new Event(eventName);
    }
    catch (e) {
        // IE10 and below support
        event = document.createEvent('CustomEvent');
        event.initCustomEvent(eventName, true, true, {});
    }
    el.dispatchEvent(event);
}
exports.dispatch = dispatch;
function addButtonSubmitListener(el, handler, event, debugName) {
    if (event === void 0) { event = 'click'; }
    // Just in case the element does not exist.
    if (!el) {
        return;
    }
    el.setAttribute('role', 'button');
    if (el.getAttribute('tabindex') != '-1') {
        el.setAttribute('tabindex', '0');
    }
    addEventListener(el, event, function (e) { return handler(e); });
    addEventListener(el, 'keydown', function (e) {
        if ((e.which || e.keyCode) == 13) {
            e.preventDefault();
            handler(e);
        }
    });
}
exports.addButtonSubmitListener = addButtonSubmitListener;
function addEventListener(el, eventName, handler) {
    if (!el || !handler)
        return;
    if (el.addEventListener) {
        el.addEventListener(eventName, handler, true);
    }
    else {
        el.attachEvent('on' + eventName, handler);
    }
}
exports.addEventListener = addEventListener;
function addActivationHandler(el, handler) {
    if (!el || !handler)
        return;
    this.addEventListener(el, 'keydown', function (event) {
        if (event.code === 'Space' || event.code === 'Enter') {
            handler();
        }
    });
    this.addEventListener(el, 'click', handler);
}
exports.addActivationHandler = addActivationHandler;
function removeEventListener(el, eventName, handler) {
    if (!el || !handler)
        return;
    if (el.removeEventListener) {
        el.removeEventListener(eventName, handler, true);
    }
    else {
        el.detachEvent('on' + eventName, handler);
    }
}
exports.removeEventListener = removeEventListener;
function disableDefaultEventHandling(event) {
    if (event.preventDefault) {
        event.preventDefault();
    }
    else if (window.event) {
        window.event.returnValue = false;
    }
}
exports.disableDefaultEventHandling = disableDefaultEventHandling;
function addDialogBackListener(handler) {
    _removeDialogBackListener();
    // This should fire when back is clicked
    backListener = function (e) {
        if (e && e.newURL && e.newURL.indexOf('|gigyaMobileDialog') == -1) {
            handler(e);
            _removeDialogBackListener();
        }
    };
    // hash could change right after the call if it was initiated from a link that didn't return false
    window.setTimeout(function () {
        if (window.location.hash.indexOf('|gigyaMobileDialog') == -1) {
            window.location.hash = window.location.hash + '|gigyaMobileDialog';
        }
        addEventListener(window, 'hashchange', backListener);
    }, 50);
}
exports.addDialogBackListener = addDialogBackListener;
function _removeDialogBackListener() {
    if (!backListener)
        return;
    removeEventListener(window, 'hashchange', backListener);
    backListener = null;
    //restore previous hash
    window.location.hash = window.location.hash.replace('|gigyaMobileDialog', '');
}
exports._removeDialogBackListener = _removeDialogBackListener;
function prependToBody(el, document) {
    if (document === void 0) { document = window.document; }
    if (!document.body)
        return;
    if (document.body.insertBefore && document.body.firstChild) {
        document.body.insertBefore(el, document.body.firstChild);
    }
    else {
        // Backward compatibility
        document.body.appendChild(el);
    }
}
exports.prependToBody = prependToBody;
function appendToBody(el, document) {
    if (document === void 0) { document = window.document; }
    if (!document.body)
        return;
    document.body.appendChild(el);
}
exports.appendToBody = appendToBody;
function removeElement(el) {
    if (el && el.parentElement) {
        el.parentElement.removeChild(el);
    }
}
exports.removeElement = removeElement;
function isChildOf(child, parent) {
    var directParent = child.parentNode;
    while (directParent) {
        if (parent == directParent) {
            return true;
        }
        directParent = directParent.parentNode;
    }
    return false;
}
exports.isChildOf = isChildOf;
function isVisible(el) {
    while (el) {
        var computedStyle = getComputedStyle(el);
        if (computedStyle.display === 'none' || computedStyle.visibility === 'hidden') {
            return false;
        }
        else {
            el = el.parentElement;
        }
    }
    return true;
}
exports.isVisible = isVisible;
function getCenteredDivID(name) {
    return 'gig_' + LocalInfo_1.localInfo.initTime.getTime().toString() + '_' + name;
}
exports.getCenteredDivID = getCenteredDivID;
function createElementWithAttributes(domElemName, domElemAttrs) {
    var newDomElem = document.createElement(domElemName);
    if (domElemAttrs) {
        for (var elemAttr in domElemAttrs) {
            newDomElem[elemAttr] = domElemAttrs[elemAttr];
        }
    }
    return newDomElem;
}
exports.createElementWithAttributes = createElementWithAttributes;
function createTopLevelDiv(id) {
    var el = document.createElement('div');
    if (el.style.zIndex != null) {
        el.style.zIndex = '' + getNextZIndex();
    }
    el.innerHTML = '';
    if (id) {
        el.id = id;
    }
    if (document.body) {
        if (document.body.insertBefore && document.body.firstChild) {
            document.body.insertBefore(el, document.body.firstChild);
        }
        else if (document.body.appendChild) {
            document.body.appendChild(el);
        }
    }
    return el;
}
exports.createTopLevelDiv = createTopLevelDiv;
function hideByID(id) {
    var el = document.getElementById(id);
    if (el) {
        el.style.display = 'none';
    }
}
exports.hideByID = hideByID;
function showByID(id) {
    var el = document.getElementById(id);
    if (el) {
        el.style.display = LocalInfo_1.localInfo.isIE6 ? (el.tagName == 'TD' ? 'table-cell' : el.tagName == 'TR' ? '' : el.tagName == 'TABLE' ? '' : 'block') : '';
    }
}
exports.showByID = showByID;
function clearByID(id) {
    try {
        var c = document.getElementById(id);
        if (c != null) {
            c.innerHTML = '';
        }
    }
    catch (e) { }
}
exports.clearByID = clearByID;
function getHTMLSize(html, container) {
    var divMeasure = document.createElement('div');
    divMeasure.style.position = 'absolute';
    divMeasure.style.left = '-1000px';
    divMeasure.innerHTML = html;
    container.appendChild(divMeasure);
    var w = divMeasure.offsetWidth;
    var h = divMeasure.offsetHeight;
    divMeasure.parentNode.removeChild(divMeasure);
    return { w: w, h: h };
}
exports.getHTMLSize = getHTMLSize;
function getElementsByClass(parentElement, className, includeParent) {
    if (!parentElement) {
        return [];
    }
    var arEls = [];
    if (includeParent && isElementClass(parentElement, className)) {
        arEls.push(parentElement);
    }
    var els = parentElement.getElementsByTagName('*');
    for (var i = 0; i < els.length; i++) {
        if (isElementClass(els[i], className)) {
            arEls.push(els[i]);
        }
    }
    return arEls || [];
}
exports.getElementsByClass = getElementsByClass;
function getElementsByAttribute(parentElement, tagName, attributeName, attributeValue) {
    var arEls = [];
    var els = parentElement.getElementsByTagName(tagName);
    for (var i = 0; i < els.length; i++) {
        if (els[i].getAttribute(attributeName) == attributeValue) {
            arEls.push(els[i]);
        }
    }
    return arEls;
}
exports.getElementsByAttribute = getElementsByAttribute;
function getElementPosition(el) {
    if (!el) {
        return { left: 0, top: 0, bottom: 0, right: 0 };
    }
    var rect = el.getBoundingClientRect();
    var scroll = viewportUtils.getScroll();
    var left = rect.left + scroll.left;
    var top = rect.top + scroll.top;
    return {
        left: left,
        top: top,
        right: left + rect.width,
        bottom: top + rect.height,
    };
}
exports.getElementPosition = getElementPosition;
function addClassToElement(el, className) {
    if (!el) {
        return;
    }
    var existingClasses = el.className ? getClassNames(el) : [];
    var existingOriginalLength = existingClasses.length;
    var newClasses = className.split(' ');
    for (var j in newClasses) {
        var exists = false;
        if (!newClasses[j]) {
            break;
        }
        for (var i in existingClasses) {
            if (existingClasses[i] === newClasses[j]) {
                exists = true;
                break;
            }
        }
        if (!exists) {
            existingClasses.push(newClasses[j]);
        }
    }
    if (existingClasses.length !== existingOriginalLength) {
        el.className = existingClasses.join(' ');
    }
}
exports.addClassToElement = addClassToElement;
function removeClassFromElement(el, className, substring) {
    if (substring === void 0) { substring = false; }
    if (!el) {
        return;
    }
    var arClass = getClassNames(el);
    for (var i = arClass.length - 1; i >= 0; i--) {
        if (arClass[i] === className || (substring && arClass[i].indexOf(className) !== -1)) {
            arClass.splice(i, 1);
        }
    }
    el.className = arClass.join(' ');
}
exports.removeClassFromElement = removeClassFromElement;
function getClassNames(el) {
    var classes = [];
    if (typeof el.className === 'string') {
        classes = el.className.split(' ');
    }
    return classes;
}
exports.getClassNames = getClassNames;
function isElementClass(el, className) {
    if (!el)
        return false;
    else if (!className)
        return true;
    else if (!el.className)
        return false;
    var exists = false;
    var arClass = getClassNames(el);
    for (var i = 0; i < arClass.length; i++) {
        if (arClass[i] === className) {
            exists = true;
            break;
        }
    }
    return exists;
}
exports.isElementClass = isElementClass;
function cancelEvent(event) {
    if (!event)
        return;
    if ('cancelable' in event)
        // All browsers except <IE9
        event.preventDefault();
    else
        event.returnValue = false;
}
exports.cancelEvent = cancelEvent;
function createElement(type, name) {
    var divContainer = document.createElement('div');
    name = name || '';
    divContainer.innerHTML = '<' + type + ' name="' + name + '" id="' + name + '"></' + type + '>';
    return divContainer.firstChild;
}
exports.createElement = createElement;
function setSize(container, w, h, center) {
    if (container == null || container.style == null) {
        return;
    }
    if (w) {
        w = '' + w;
        var isWidthPrecentage = w.indexOf('%') > 0;
        if (!isNaN(w) || isWidthPrecentage) {
            var widthValue = '' + (isWidthPrecentage ? w : w + 'px');
            if (container.style.width != widthValue) {
                container.style.width = widthValue;
            }
        }
    }
    if (h) {
        h = '' + h;
        var isHeightPrecentage = h.indexOf('%') > 0;
        if (!isNaN(w) || isHeightPrecentage) {
            var heightValue = '' + (isHeightPrecentage ? h : h + 'px');
            if (container.style.height !== heightValue) {
                container.style.height = heightValue;
            }
        }
    }
    if (center && w && h) {
        if (container.style.zIndex == null || center) {
            container.style.zIndex = '' + getNextZIndex();
        }
        var vp = viewportUtils.getInnerSize();
        var scrl = viewportUtils.getScroll();
        var vpt = scrl.top;
        var vpl = scrl.left;
        container.style.top = '' + Math.max(0, vpt + Math.floor((vp.h - h) / 2)) + 'px';
        container.style.left = '' + Math.max(0, vpl + Math.floor((vp.w - w) / 2)) + 'px';
        container.style.visibility = '';
    }
}
exports.setSize = setSize;
function createHiddenIframe(src) {
    var ifr = document.createElement('iframe');
    ifr.src = src;
    ifr.style.width = '30px';
    ifr.style.height = '10px';
    ifr.style.position = 'absolute';
    ifr.style.top = '-1000px';
    ifr.style.left = '-1000px';
    if (document.body) {
        appendToBody(ifr);
    }
    else {
        functionsUtils.invokeOnPageLoad(function () {
            appendToBody(ifr);
        });
    }
    return ifr;
}
exports.createHiddenIframe = createHiddenIframe;
function attributeEncode(value) {
    return value
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/\"/g, '&quot;')
        .replace(/\'/g, '&#39;'); // IE8 doesn't support &apos;
}
exports.attributeEncode = attributeEncode;
function manipulateAttributes(elements, matcher, replacePredicate, criteria) {
    if (criteria === void 0) { criteria = function () { return true; }; }
    elements.forEach(function (el) {
        if (!el.attributes)
            return;
        Array.prototype.slice.call(el.attributes).forEach(function (attr) {
            if (criteria(attr)) {
                attr.value = attr.value.replace(matcher, replacePredicate);
            }
        });
    });
}
exports.manipulateAttributes = manipulateAttributes;
function textNodesUnder(el) {
    var n;
    var textNodes = [];
    var treeWalker = document.createTreeWalker(el, NodeFilter.SHOW_TEXT, null, false);
    while ((n = treeWalker.nextNode())) {
        textNodes.push(n);
    }
    return textNodes;
}
exports.textNodesUnder = textNodesUnder;
function isHTMLBooleanAttribute(attrName) {
    return ['autocomplete', 'autofocus', 'checked', 'disabled', 'hidden', 'readonly', 'required', 'selected'].indexOf(attrName) > -1;
}
exports.isHTMLBooleanAttribute = isHTMLBooleanAttribute;
function isBelongToGigyaFieldset(el) {
    if (!el || el instanceof HTMLFormElement) {
        return false; // end of recursion - element is not a child of a fieldset
    }
    if (isElementClass(el.parentElement, 'gigya-fieldset')) {
        return true;
    }
    return isBelongToGigyaFieldset(el.parentElement);
}
exports.isBelongToGigyaFieldset = isBelongToGigyaFieldset;
function getClosestElement(elem, selector, parent) {
    if (parent === void 0) { parent = document; }
    setMatchesPolyfill();
    // Get the closest matching element
    for (; elem && elem !== parent; elem = elem.parentNode) {
        if (elem === null || elem === void 0 ? void 0 : elem.matches(selector))
            return elem;
    }
    return null;
}
exports.getClosestElement = getClosestElement;
function createElementFromTemplate(template) {
    if (template === void 0) { template = ''; }
    var _a;
    var div = document.createElement('div');
    div.innerHTML = template === null || template === void 0 ? void 0 : template.trim();
    return (_a = div.firstChild) !== null && _a !== void 0 ? _a : div;
}
exports.createElementFromTemplate = createElementFromTemplate;
function setMatchesPolyfill() {
    if (!Element.prototype.matches) {
        // @ts-ignore
        Element.prototype.matches = Element.prototype.msMatchesSelector ||
            Element.prototype.webkitMatchesSelector;
    }
}
function isParentHasClass(nativeElement, className) {
    var _a;
    if ((_a = nativeElement === null || nativeElement === void 0 ? void 0 : nativeElement.classList) === null || _a === void 0 ? void 0 : _a.contains(className)) {
        return true;
    }
    if (!(nativeElement === null || nativeElement === void 0 ? void 0 : nativeElement.parentElement)) {
        return false;
    }
    return isParentHasClass(nativeElement === null || nativeElement === void 0 ? void 0 : nativeElement.parentElement, className);
}
exports.isParentHasClass = isParentHasClass;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/JSON.ts":
/*!*********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/JSON.ts ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function serialize(obj, includeFunctions, prettyPrint, l, maxLevel) {
    if (includeFunctions === void 0) { includeFunctions = false; }
    if (prettyPrint === void 0) { prettyPrint = false; }
    if (l === void 0) { l = 0; }
    if (maxLevel === void 0) { maxLevel = 20; }
    if (!window.gigya.localInfo.isIE8) {
        return window['JSON'].stringify(obj);
    }
    else {
        if (!l)
            l = 0;
        if (l > maxLevel)
            return '[Too deep]';
        var prefix = '';
        var newline = '';
        var tab = '';
        if (prettyPrint) {
            tab = '\t';
            newline = '\n';
            for (var i = 0; i < l + 1; i++) {
                prefix += tab;
            }
        }
        var t = typeof obj;
        if (t == 'function') {
            return t.toString();
        }
        if (t != 'object' || obj === null) {
            // simple data type
            if (t == 'string')
                obj = '"' + obj.replace(/(\"|\\)/g, '\\$1').replace(/\r\n|\r|\n/g, '\\n') + '"';
            return String(obj);
        }
        else {
            var n, v, json = [], arr = obj && obj.constructor == Array;
            if (arr) {
                for (var i = 0; i < obj.length; i++) {
                    v = obj[i];
                    t = typeof v;
                    if (v == null || t == 'undefined')
                        v = '';
                    else if (t == 'string')
                        v = '"' + v.replace(/(\"|\\)/g, '\\$1').replace(/\r\n|\r|\n/g, '\\n') + '"';
                    else if (t == 'function') {
                        if (includeFunctions)
                            v = 'Function';
                        else
                            v = '';
                    }
                    else if (v.parentNode && v.innerHTML)
                        v = 'HTMLElement';
                    else if (v.constructor == Date)
                        v = '';
                    else if (t == 'object' && v !== null)
                        v = serialize(v, includeFunctions, prettyPrint, l + 1);
                    if (String(v) != '')
                        json.push(prefix + tab + String(v));
                }
            }
            else {
                for (n in obj) {
                    v = obj[n];
                    t = typeof v;
                    if (v == null || t == 'undefined')
                        v = String(v);
                    else if (t == 'string')
                        v = '"' + v.replace(/(\"|\\)/g, '\\$1').replace(/\r\n|\r|\n/g, '\\n') + '"';
                    else if (t == 'function') {
                        if (includeFunctions) {
                            v = 'Function';
                        }
                        else {
                            v = '';
                        }
                    }
                    else if (v.parentNode && v.innerHTML)
                        v = 'HTMLElement';
                    else if (v.constructor == Date)
                        v = '';
                    else if (t == 'object' && v !== null)
                        v = newline + serialize(v, includeFunctions, prettyPrint, l + 1);
                    if (String(v) != '')
                        json.push(prefix + tab + '"' + n.replace(/(\"|\\)/g, '\\$1').replace(/\r\n|\r|\n/g, '\\n') + '":' + String(v));
                }
            }
            return newline + prefix + (arr ? '[' : '{') + newline + json.join(',' + newline) + newline + prefix + (arr ? ']' : '}');
        }
    }
}
exports.serialize = serialize;
function deserialize(json, defaultValue, scope) {
    // Return default value if is empty string (or similar).
    if (!json || !json.replace(/^\s+|\s+$/g, '')) {
        return defaultValue || {};
    }
    // Attempt to parse. On error, warn in console and return default value.
    try {
        var keys = [];
        var values = [];
        if (scope) {
            for (var key in scope) {
                keys.push(key);
                values.push(scope[key]);
            }
        }
        var fn = eval("(function(" + keys.join(',') + ") { return " + json.trim() + "; })");
        return fn.apply(undefined, values);
    }
    catch (e) {
        console.warn('Error deserializing JavaScript', e);
        return defaultValue || {};
    }
}
exports.deserialize = deserialize;
function parse(json, defaultValue) {
    if (window.gigya.localInfo.isIE8) {
        return deserialize(json, defaultValue);
    }
    else {
        try {
            return window['JSON'].parse(json);
        }
        catch (e) {
            return defaultValue || {};
        }
    }
}
exports.parse = parse;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/URL.ts":
/*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/URL.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var constants_1 = __webpack_require__(/*! ./../../../../accounts/constants */ "./src/accounts/constants.ts");
var keyValueUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/keyValue */ "./src/core/Gigya.Js/app/Utils/keyValue.ts");
var objectUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/object */ "./src/core/Gigya.Js/app/Utils/object.ts");
function URLEncode(value) {
    return encodeURIComponent(value);
}
exports.URLEncode = URLEncode;
function URLDecode(value) {
    return decodeURIComponent(value.replace(/\+/g, ' '));
}
exports.URLDecode = URLDecode;
function URLDecodeRecursive(value) {
    var prevDecodingRes = '';
    var currDecodingRes = value;
    // keep decoding until we can't decode anymore
    while (currDecodingRes != prevDecodingRes) {
        // store the last decoding result
        prevDecodingRes = currDecodingRes;
        // decode the string once again
        currDecodingRes = URLDecode(prevDecodingRes);
    }
    return currDecodingRes;
}
exports.URLDecodeRecursive = URLDecodeRecursive;
function getParamsFromURL(url, keysToLower) {
    if (!url || url.indexOf('?') === -1) {
        return {};
    }
    return keyValueUtils.deserialize(url.split('#')[0].split('?')[1], '&', keysToLower);
}
exports.getParamsFromURL = getParamsFromURL;
function getGigParamsFromURL(config) {
    var _a = config || {}, url = _a.url, paramPrefix = _a.paramPrefix, keysToLower = _a.keysToLower, removePrefix = _a.removePrefix;
    var prefix = paramPrefix || constants_1.GIGYA_PARAM_PREFIX;
    var urlParams = getParamsFromURL(url, keysToLower);
    return Object.keys(urlParams)
        .filter(function (key) { return key.indexOf(prefix) === 0 && key !== prefix; })
        .reduce(function (obj, key) {
        var newKey = removePrefix ? key.slice(4) : key;
        obj[newKey] = urlParams[key];
        return obj;
    }, {});
}
exports.getGigParamsFromURL = getGigParamsFromURL;
function getParamValueFromURL(param, url, defaultValue) {
    if (null == url || '' == url) {
        return defaultValue;
    }
    var iqm = url.indexOf('?');
    if (iqm === -1) {
        return defaultValue;
    }
    var qs = '&' + url.substr(iqm + 1);
    var idx = qs.toLowerCase().indexOf('&' + param.toLowerCase() + '=');
    if (idx === -1) {
        return defaultValue;
    }
    var valAndMore = qs.substr(idx + (1 + param.length + 1)) + '&';
    idx = valAndMore.indexOf('&');
    return valAndMore.substr(0, idx);
}
exports.getParamValueFromURL = getParamValueFromURL;
function addParamsToURL(url, oParams) {
    var params = getParamsFromURL(url);
    objectUtils.add(params, oParams);
    var urlHashSplit = url.split('#');
    var finalUrl = urlHashSplit[0].split('?')[0] + '?' + keyValueUtils.serialize(params, '&');
    if (urlHashSplit.length > 1) {
        finalUrl += '#' + urlHashSplit[1];
    }
    return finalUrl;
}
exports.addParamsToURL = addParamsToURL;
var removeUnacceptableParams = function (params, unacceptableParams) {
    if (!unacceptableParams) {
        return params;
    }
    var validParams = {};
    Object.entries(params || {})
        .filter(function (_a) {
        var paramName = _a[0];
        return !unacceptableParams.test(paramName);
    })
        .forEach(function (_a) {
        var paramName = _a[0], paramValue = _a[1];
        return validParams[paramName] = paramValue;
    });
    return validParams;
};
function getContextParamsFromUrl(config) {
    var _a = config || {}, url = _a.url, paramPrefix = _a.paramPrefix, unacceptableParams = _a.unacceptableParams;
    if (!url) {
        return {};
    }
    var params = window.gigya.utils.URL.getGigParamsFromURL({ url: url, paramPrefix: paramPrefix });
    return removeUnacceptableParams(params, unacceptableParams);
}
exports.getContextParamsFromUrl = getContextParamsFromUrl;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/Uri.ts":
/*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/Uri.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var stringUtilsUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/stringUtils */ "./src/core/Gigya.Js/app/Utils/stringUtils.ts");
var Uri = /** @class */ (function () {
    function Uri(url, isAbsolute) {
        if (isAbsolute === void 0) { isAbsolute = true; }
        this._anchor = document.createElement('a');
        var protocol = document.location.protocol == 'http:' ? 'http' : 'https';
        if (isAbsolute && url.indexOf('://') === -1 && url.charAt(0) !== '/')
            url = protocol + "://" + url;
        this._anchor.href = url;
    }
    Object.defineProperty(Uri.prototype, "domain", {
        get: function () {
            return this._anchor.hostname;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Uri.prototype, "path", {
        get: function () {
            return this._anchor.pathname;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Uri.prototype, "href", {
        get: function () {
            return this._anchor.href;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Uri.prototype, "search", {
        get: function () {
            return this._anchor.search.slice(1);
        } // dropping '?'
        ,
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Uri.prototype, "hash", {
        get: function () {
            return this._anchor.hash.slice(1);
        } // dropping '#'
        ,
        enumerable: true,
        configurable: true
    });
    Uri.prototype.toString = function () {
        return this._anchor.href;
    };
    Uri.prototype.addToSearch = function (params) {
        for (var name in params) {
            var val = params[name];
            if ((typeof val == 'boolean' || typeof val == 'number' || typeof val == 'string') && name != 'eventName') {
                var addition = this._anchor.search ? '&' : '';
                this._anchor.search += "" + addition + name + "=" + encodeURIComponent(params[name]);
            }
        }
        return this;
    };
    Uri.prototype.fetch = function (retries) {
        if (retries === void 0) { retries = 0; }
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _a, e_1;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, 5, , 8]);
                        if (!window.fetch) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.browserFetch()];
                    case 1:
                        _a = _b.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.xhr()];
                    case 3:
                        _a = _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, _a];
                    case 5:
                        e_1 = _b.sent();
                        if (retries <= 0)
                            throw new Error("fetch failed: " + e_1);
                        return [4 /*yield*/, this.delay(1)];
                    case 6:
                        _b.sent();
                        return [4 /*yield*/, this.fetch(retries - 1)];
                    case 7: return [2 /*return*/, _b.sent()];
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    Uri.prototype.isBaseOf = function (url) {
        return Uri.parse(url).isIn(this);
    };
    Uri.prototype.isIn = function (base) {
        if (typeof base === 'string') {
            base = Uri.parse(base);
        }
        return ((this.domain == base.domain || // page is the base domain
            this.isSubDomainOf(base)) && // or sub-domain of it
            (!base.path || this.path.indexOf(base.path) == 0)); // page is also in base's defined path;
    };
    Uri.prototype.isForSubDomains = function () {
        return this.domain.indexOf('.') == 0;
    };
    Uri.prototype.isSubDomainOf = function (base) {
        var domain = '';
        if (!base.isForSubDomains())
            domain = '.';
        domain += base.domain;
        return stringUtilsUtils.endsWith(this.domain, domain);
    };
    Uri.parse = function (url, isAbsolute) {
        if (isAbsolute === void 0) { isAbsolute = true; }
        if (!url)
            return undefined;
        return new Uri(url, isAbsolute);
    };
    Uri.prototype.browserFetch = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var url, response;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        url = this.toString();
                        return [4 /*yield*/, window.fetch(url)];
                    case 1:
                        response = _a.sent();
                        if (!response.ok)
                            throw new Error("fetch failed");
                        return [2 /*return*/, response.json()];
                }
            });
        });
    };
    Uri.prototype.xhr = function () {
        var url = this.toString();
        return new gigya.Promise(function (resolve, reject) {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', url);
            xhr.send();
            xhr.onerror = reject;
            xhr.onload = function () {
                if (xhr.readyState !== 4 || xhr.status !== 200) {
                    return reject("xhr failed - " + xhr.status + " - " + xhr.statusText);
                }
                try {
                    var jsonResponse = JSON.parse(xhr.responseText);
                    return resolve(jsonResponse);
                }
                catch (e) {
                    return reject(e);
                }
            };
        });
    };
    Uri.prototype.delay = function (ms) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                return [2 /*return*/, new gigya.Promise(function (r) { return setTimeout(r, ms); })];
            });
        });
    };
    return Uri;
}());
exports.Uri = Uri;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/array.ts":
/*!**********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/array.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function indexOf(ar, o) {
    for (var i = 0; i < ar.length; i++) {
        if (ar[i] == o)
            return i;
    }
    return -1;
}
exports.indexOf = indexOf;
function clone(ar) {
    var ar2 = [];
    for (var i = 0; i < ar.length; i++) {
        ar2[i] = ar[i];
    }
    return ar2;
}
exports.clone = clone;
function removeByValue(ar, value) {
    if (!ar)
        return;
    for (var i = ar.length - 1; i >= 0; i--) {
        if (ar[i] == value) {
            ar.splice(i, 1);
        }
    }
}
exports.removeByValue = removeByValue;
function removeByProperty(ar, property, value) {
    if (!ar)
        return;
    for (var i = ar.length - 1; i >= 0; i--) {
        if (ar[i][property] == value) {
            ar.splice(i, 1);
        }
    }
}
exports.removeByProperty = removeByProperty;
function getArrayFromString(str, delimiter, lowerCase) {
    // check for string type in the input and not empty.
    if (!str || typeof str != 'string')
        return [];
    // lowercase if demended
    if (lowerCase)
        str = str.toLowerCase();
    // clean the string:
    str = str.replace(/[ ]/g, '').replace(/,,/g, ',');
    // if string empty
    if (!str)
        return [];
    // return array from string
    return str.split(delimiter);
}
exports.getArrayFromString = getArrayFromString;
function intersect(array) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    if (array == null)
        return [];
    var result = [];
    var argsLength = arguments.length;
    for (var i = 0, length = array.length; i < length; i++) {
        var item = array[i];
        if (this.indexOf(result, item) != -1)
            continue;
        for (var j = 1; j < argsLength; j++) {
            var arr = arguments[j];
            if (arr == null || this.indexOf(arr, item) == -1)
                break;
        }
        if (j === argsLength)
            result.push(item);
    }
    return result;
}
exports.intersect = intersect;
function lastIndexOf(arr, val, fromIndex) {
    if (fromIndex === void 0) { fromIndex = 0; }
    for (var i = arr.length; --i >= fromIndex;) {
        if (arr[i] === val)
            return i;
    }
    return -1;
}
exports.lastIndexOf = lastIndexOf;
function forEach(arr, action) {
    for (var i = 0; i < arr.length; ++i)
        action(arr[i], i, arr);
}
exports.forEach = forEach;
function forEachProp(obj, action) {
    for (var name in obj) {
        if (obj.hasOwnProperty(name))
            action(obj[name], name, obj);
    }
}
exports.forEachProp = forEachProp;
function some(arr, condition) {
    for (var i = 0; i < arr.length; ++i) {
        if (condition(arr[i], i, arr))
            return true;
    }
    return false;
}
exports.some = some;
function every(arr, condition) {
    for (var i = 0; i < arr.length; ++i) {
        if (!condition(arr[i], i, arr))
            return false;
    }
    return true;
}
exports.every = every;
function everyProp(obj, condition) {
    for (var name in obj) {
        if (obj.hasOwnProperty(name) && !condition(obj[name], name, obj))
            return false;
    }
    return true;
}
exports.everyProp = everyProp;
function map(arr, action) {
    var result = new Array();
    forEach(arr, function (item, idx, arr) { return result.push(action(item, idx, arr)); });
    return result;
}
exports.map = map;
function firstIndex(arr, condition) {
    var result = -1;
    some(arr, function (item, index, arr) {
        if (condition(item, index, arr)) {
            result = index;
            return true;
        }
        return false;
    });
    return result;
}
exports.firstIndex = firstIndex;
function first(arr, condition) {
    return arr[firstIndex(arr, condition)];
}
exports.first = first;
function getAllEnumValues(enumType) {
    var results = [];
    for (var i in enumType)
        if (typeof enumType[i] == 'number')
            results.push(enumType[i]);
    return results;
}
exports.getAllEnumValues = getAllEnumValues;
function getUniqueValues(arr) {
    for (var i = 0; i < arr.length; ++i) {
        for (var j = i + 1; j < arr.length; j++)
            if (arr[i] === arr[j]) {
                arr.splice(j, 1);
            }
    }
    return arr;
}
exports.getUniqueValues = getUniqueValues;
function includes(arr, item) {
    if (arr === void 0) { arr = []; }
    return (arr === null || arr === void 0 ? void 0 : arr.indexOf(item)) >= 0;
}
exports.includes = includes;
function containsOnly(arr1, arr2) {
    if (!arr1 || !arr2)
        return false;
    if (arr1.length !== arr2.length)
        return false;
    if (arr1.length === 0 && arr2.length === 0)
        return true;
    return !arr1.some(function (elem) { return !includes(arr2, elem); });
}
exports.containsOnly = containsOnly;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/cookie.ts":
/*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/cookie.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var LocalInfo_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LocalInfo */ "./src/core/Gigya.Js/app/LocalInfo.ts");
var global_1 = __webpack_require__(/*! ./global */ "./src/core/Gigya.Js/app/Utils/global.ts");
var CookieUtils = /** @class */ (function () {
    function CookieUtils(_cookieStore) {
        if (_cookieStore === void 0) { _cookieStore = new global_1.CookieStore(); }
        this._cookieStore = _cookieStore;
    }
    CookieUtils.prototype.set = function (name, value, expires_in, cookieDomain, dontUseRootPath, sameSite) {
        if (cookieDomain == null) {
            cookieDomain = this.getDefaultDomain();
        }
        var path = dontUseRootPath ? '' : '/';
        var expireMs = this._getExpirationInMs(expires_in);
        var expires = null;
        if (expireMs != null) {
            expires = new Date();
            expires.setTime(expires.getTime() + expireMs);
        }
        var cookieExist = this._setCookieInternal(name, value, path, expires, cookieDomain, sameSite);
        var shouldCookieExist = !expireMs || expireMs > 0;
        if (shouldCookieExist === cookieExist) {
            return true;
        }
        // If failed to set cookie, retry;
        // it might be because the domain is listed as TLD https://data.iana.org/TLD/tlds-alpha-by-domain.txt
        var pageDomain = LocalInfo_1.localInfo.pageDomain;
        cookieExist = this._setCookieInternal(name, value, path, expires, pageDomain, sameSite);
        return cookieExist === shouldCookieExist;
    };
    CookieUtils.prototype.get = function (name) {
        return this._cookieStore.getCookie(name);
    };
    CookieUtils.prototype.remove = function (name, domain) {
        if (domain === void 0) { domain = LocalInfo_1.localInfo.pageDomain; }
        this._removeFromBaseDomains(name, domain);
        this.set(name, '', -1, '', false);
        this.set(name, '', -1, '', true);
    };
    CookieUtils.prototype.getInfiniteExpirationTimeInSeconds = function () {
        // Set expiration time to 1 years
        return 60 * 60 * 24 * 365;
    };
    CookieUtils.prototype.canSaveCookie = function (cookieDomain) {
        if (cookieDomain === void 0) { cookieDomain = null; }
        try {
            return this.set(CookieUtils.testCookieName, 'true', 1, cookieDomain, null);
        }
        catch (e) {
            // iOS 10 webview throws in some scenarios
            return false;
        }
    };
    CookieUtils.prototype.getDefaultDomain = function (pageDomain, baseDomain) {
        if (pageDomain === void 0) { pageDomain = LocalInfo_1.localInfo.pageDomain; }
        if (baseDomain === void 0) { baseDomain = LocalInfo_1.localInfo.baseDomain || ''; }
        return baseDomain.length > 0 && pageDomain.length >= baseDomain.length && pageDomain.lastIndexOf(baseDomain) === pageDomain.length - baseDomain.length
            ? baseDomain
            : pageDomain;
    };
    CookieUtils.prototype._getExpirationInMs = function (expiresIn) {
        var expireMs;
        if (expiresIn == null || expiresIn === '' || isNaN(expiresIn)) {
            expireMs = 1000 * this.getInfiniteExpirationTimeInSeconds();
        }
        else if (expiresIn == 0) {
            // 0 means Session
            expireMs = null;
        }
        else {
            // Any other value is number of seconds (A negative value would mean expire now!)
            expireMs = expiresIn * 1000;
        }
        return expireMs;
    };
    CookieUtils.prototype._setCookieInternal = function (name, value, path, expires, cookieDomain, sameSiteMode) {
        if (sameSiteMode === void 0) { sameSiteMode = CookieUtils._getSameSiteMode(); }
        var _a;
        var protocol = (_a = LocalInfo_1.localInfo === null || LocalInfo_1.localInfo === void 0 ? void 0 : LocalInfo_1.localInfo.protocol) !== null && _a !== void 0 ? _a : document.location.protocol;
        var isSecured = protocol.indexOf('https') === 0;
        this._cookieStore.setCookie(name, value, {
            path: path,
            expires: expires,
            domain: cookieDomain,
            sameSite: sameSiteMode,
            secure: isSecured
        });
        if (this.get(name)) {
            return true;
        }
        if (!sameSiteMode) {
            //if failed to write cookie without sameSite mode, then stop here
            return false;
        }
        if (sameSiteMode !== 'None') {
            this._fallbackToSameSiteNone(name, value, path, expires, cookieDomain, isSecured);
        }
        if (this.get(name)) {
            this._reportFallback('Setting SameSite=None', { name: name, value: value, sameSiteMode: sameSiteMode });
            return true;
        }
        // If failed to write cookie with sameSite mode, retry without;
        this._cookieStore.setCookie(name, value, {
            path: path,
            expires: expires,
            domain: cookieDomain,
            secure: isSecured
        });
        if (this.get(name)) {
            this._reportFallback('Cookie established only without sameSite mode', { name: name, value: value, sameSiteMode: sameSiteMode });
            return true;
        }
        return false;
    };
    CookieUtils.prototype._removeFromBaseDomains = function (name, domain) {
        var domainParts = domain.split('.');
        // when clearing from a.b.c.d.com --> clear from a.b.c.d.com, b.c.d.com, c.d.com, d.com
        for (var i = 0; i < domainParts.length - 1; i++) {
            var domain_1 = domainParts.slice(i).join('.');
            this.set(name, '', -1, domain_1, false);
            this.set(name, '', -1, domain_1, true);
        }
    };
    CookieUtils._getSameSiteMode = function () {
        if (!CookieUtils._disallowSameSiteMode())
            return 'None';
    };
    CookieUtils._disallowSameSiteMode = function () {
        var _a, _b;
        var protocol = (_a = LocalInfo_1.localInfo === null || LocalInfo_1.localInfo === void 0 ? void 0 : LocalInfo_1.localInfo.protocol) !== null && _a !== void 0 ? _a : document.location.protocol;
        var ua = (_b = LocalInfo_1.localInfo === null || LocalInfo_1.localInfo === void 0 ? void 0 : LocalInfo_1.localInfo.userAgent) !== null && _b !== void 0 ? _b : navigator.userAgent.toLowerCase();
        var isSecured = protocol.indexOf('https') === 0;
        return !isSecured || !ua ||
            // Cover all iOS based browsers here. This includes:
            // - Safari on iOS 12 for iPhone, iPod Touch, iPad
            // - WkWebview on iOS 12 for iPhone, iPod Touch, iPad
            // - Chrome on iOS 12 for iPhone, iPod Touch, iPad
            // All of which are broken by SameSite=None, because they use the iOS networking stack
            ((ua.indexOf('CPU iPhone OS 12') > -1 || ua.indexOf('iPad; CPU OS 12') > -1) ||
                // Cover Mac OS X based browsers that use the Mac OS networking stack. This includes:
                // - Safari on Mac OS X.
                // This does not include:
                // - Chrome on Mac OS X
                // Because they do not use the Mac OS networking stack.
                (ua.indexOf('Macintosh; Intel Mac OS X 10_14') > -1 && ua.indexOf('Version/') > -1 && ua.indexOf('Safari') > -1) ||
                // Cover Chrome 50-69, because some versions are broken by SameSite=None,
                // and none in this range require it.
                // Note: this covers some pre-Chromium Edge versions,
                // but pre-Chromium Edge does not require SameSite=None.
                (ua.indexOf('Chrome/5') > -1 && ua.indexOf('Chrome/6') > -1));
    };
    CookieUtils.prototype._fallbackToSameSiteNone = function (name, value, path, expires, cookieDomain, secure) {
        this._cookieStore.setCookie(name, value, {
            path: path,
            expires: expires,
            domain: cookieDomain,
            sameSite: 'None',
            secure: secure
        });
    };
    CookieUtils.prototype._reportFallback = function (message, details) {
        window.gigya.logger.report("Cookie Policy Fallback: " + message, tslib_1.__assign(tslib_1.__assign({}, details), { isIframe: this._isIFrame() }), false);
    };
    CookieUtils.prototype._isIFrame = function () {
        var _a;
        try {
            return (window === null || window === void 0 ? void 0 : window.location) !== ((_a = window === null || window === void 0 ? void 0 : window.parent) === null || _a === void 0 ? void 0 : _a.location);
        }
        catch (e) {
            return true;
        }
    };
    CookieUtils.testCookieName = 'gig3pctest';
    return CookieUtils;
}());
exports.CookieUtils = CookieUtils;
exports.default = new CookieUtils();


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/domains.ts":
/*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/domains.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
var Uri_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/Uri */ "./src/core/Gigya.Js/app/Utils/Uri.ts");
var stringUtilsUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/stringUtils */ "./src/core/Gigya.Js/app/Utils/stringUtils.ts");
var LocalInfo_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LocalInfo */ "./src/core/Gigya.Js/app/LocalInfo.ts");
var FlagService_1 = __webpack_require__(/*! ../Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
var cookie_1 = __webpack_require__(/*! ./cookie */ "./src/core/Gigya.Js/app/Utils/cookie.ts");
// TODO: move to config
var baseDomains;
if ((_b = (_a = window.gigya.partnerSettings) === null || _a === void 0 ? void 0 : _a.baseDomains) === null || _b === void 0 ? void 0 : _b.length) {
    baseDomains = window.gigya.partnerSettings.baseDomains;
}
else {
    if (window.self === window.top) {
        // only in the top frame
        window.gigya.logger.warn('gigya: missing base domains for site');
    }
    baseDomains = [document.location.hostname];
}
LocalInfo_1.localInfo.baseDomain = getBaseDomain(baseDomains);
var gigyaDomainNamespaces = ['socialize', 'accounts', 'fidm', 'gm', 'comments', 'gcs', 'ids', 'ds', 'gscounters', 'reports'];
function apiDomainFactory(apiDomain, defaultApiDomain) {
    if (apiDomain === void 0) { apiDomain = resolveApiDomain(); }
    if (defaultApiDomain === void 0) { defaultApiDomain = window.gigya.defaultApiDomain; }
    var shouldAddNamespace = Uri_1.Uri.parse(apiDomain).isIn(Uri_1.Uri.parse(defaultApiDomain));
    return function (namespace) {
        if (namespace && shouldAddNamespace) {
            var subDomain = namespace.split('.')[0];
            if (subDomain === 'sdk' || subDomain === 'oauth') {
                subDomain = 'accounts';
            }
            else if (gigyaDomainNamespaces.indexOf(subDomain) == -1) {
                window.gigya.logger.error("trying to send request to an invalid domain");
                subDomain = gigyaDomainNamespaces[0];
            }
            return subDomain + "." + apiDomain;
        }
        else {
            return apiDomain;
        }
    };
}
exports.apiDomainFactory = apiDomainFactory;
function getGigyaDomain(namespace, dataCenter, defaultDomain) {
    if (dataCenter === void 0) { dataCenter = window.gigya.dataCenter; }
    if (defaultDomain === void 0) { defaultDomain = window.gigya.defaultApiDomain; }
    if (defaultDomain === 'sapcdm.cn' && dataCenter !== 'cn1') {
        defaultDomain = "cn1." + defaultDomain; //Fix for cn1-st1. it should be cn1-st1.cn1.sapcdm.cn and not cn1-st1.sapcdm.cn
    }
    var domain = dataCenter + "." + defaultDomain;
    if (namespace)
        return namespace + "." + domain;
    else
        return domain;
}
exports.getGigyaDomain = getGigyaDomain;
function getBaseDomain(baseDomains, currentDomain, defaultDomains) {
    if (baseDomains === void 0) { baseDomains = window.gigya.partnerSettings.baseDomains; }
    if (currentDomain === void 0) { currentDomain = location.hostname; }
    if (defaultDomains === void 0) { defaultDomains = ['gigya.com', 'cn1.sapcdm.cn', 'localhost', window.gigya.defaultApiDomain]; }
    // #49786 - Support webview without hostname.
    if (!currentDomain) {
        return '';
    }
    if (typeof baseDomains == 'string') {
        baseDomains = baseDomains.split(',');
    }
    var originURI = Uri_1.Uri.parse(currentDomain);
    if (defaultDomains) {
        baseDomains = baseDomains.concat(defaultDomains);
    }
    for (var _i = 0, baseDomains_1 = baseDomains; _i < baseDomains_1.length; _i++) {
        var rawDomain = baseDomains_1[_i];
        // This does not take care of wildcards in the middle of string.
        var baseDomain = stringUtilsUtils.replaceAll(rawDomain, '*', '');
        var baseUri = Uri_1.Uri.parse(baseDomain);
        if (baseUri && originURI.isIn(baseUri)) {
            if (!window.gigya._) {
                window.gigya._ = {};
            }
            window.gigya._.isTrustedDomain = true;
            if (baseUri.isForSubDomains()) {
                return originURI.domain;
            }
            else {
                return baseUri.domain;
            }
        }
    }
    // fallback to the parent's window domain (for backward compatibility).
    return originURI.domain;
}
exports.getBaseDomain = getBaseDomain;
function resolveApiDomain(customApiDomainPrefix, baseDomain, dataCenter, defaultApiDomain) {
    if (customApiDomainPrefix === void 0) { customApiDomainPrefix = window.gigya.partnerSettings && window.gigya.partnerSettings.customAPIDomainPrefix; }
    if (baseDomain === void 0) { baseDomain = LocalInfo_1.localInfo.baseDomain; }
    if (dataCenter === void 0) { dataCenter = window.gigya.dataCenter; }
    if (defaultApiDomain === void 0) { defaultApiDomain = window.gigya.defaultApiDomain; }
    var _a;
    var apiDomain = getHostedPagesApiDomainCookie();
    if (apiDomain) {
        return apiDomain;
    }
    // TODO: remove once a solution will be found for hosted pages
    if (baseDomain.endsWith(((_a = window.gigya._.config) === null || _a === void 0 ? void 0 : _a.hostedPagesDomain) || 'my.gigya-ext.com')) {
        return baseDomain;
    }
    if (customApiDomainPrefix && baseDomain && baseDomain !== defaultApiDomain) {
        return customApiDomainPrefix + "." + baseDomain;
    }
    return getGigyaDomain(undefined, dataCenter, defaultApiDomain);
}
exports.resolveApiDomain = resolveApiDomain;
function getStorageDomain() {
    var _a, _b, _c;
    var apiDomain = getHostedPagesApiDomainCookie();
    if (apiDomain) {
        return apiDomain;
    }
    if ((_b = (_a = window.gigya.thisScript) === null || _a === void 0 ? void 0 : _a.globalConf) === null || _b === void 0 ? void 0 : _b['storageDomainOverride']) {
        return window.gigya.thisScript.globalConf['storageDomainOverride'];
    }
    if (((_c = window.gigya.thisScript) === null || _c === void 0 ? void 0 : _c.baseDomain) && FlagService_1.FlagService.useGigyaJsBaseDomain) {
        return window.gigya.thisScript.baseDomain;
    }
    var domain = window.gigya.defaultApiDomain;
    if (window.gigya.utils.stringUtils.endsWith(domain, 'sapcdm.cn') && window.gigya.dataCenter !== 'cn1') { // special case with china domain staging
        domain = "cn1.sapcdm.cn";
    }
    var prefix = window.gigya.dataCenter !== 'global' ? "cdns." + window.gigya.dataCenter : "cdns";
    return prefix + "." + domain;
}
exports.getStorageDomain = getStorageDomain;
function getHostedPagesApiDomainCookie() {
    return cookie_1.default.get("pages_apiDomain_" + window.gigya.apiKey);
}


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/eventDispatcher.ts":
/*!********************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/eventDispatcher.ts ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var globalEvents = __webpack_require__(/*! ../GlobalEvents */ "./src/core/Gigya.Js/app/GlobalEvents.ts");
var EventDispatcher = /** @class */ (function () {
    function EventDispatcher(eventPrefix) {
        this.eventPrefix = eventPrefix;
        this.eventHandlers = new Map();
    }
    EventDispatcher.prototype.on = function (eventName, handler) {
        var fullEventName = this.getFullEventName(eventName);
        if (!this.eventHandlers.get(fullEventName)) {
            this.eventHandlers.set(fullEventName, []);
        }
        this.eventHandlers.get(fullEventName).push(handler);
    };
    EventDispatcher.prototype.unsubscribe = function (event) {
        var fullEventName = this.getFullEventName(event);
        this.eventHandlers.delete(fullEventName);
    };
    EventDispatcher.prototype.dispatchEvent = function (eventName, data) {
        var fullEventName = this.getFullEventName(eventName);
        for (var _i = 0, _a = this.eventHandlers.get(fullEventName) || []; _i < _a.length; _i++) {
            var fn = _a[_i];
            fn(data);
        }
        globalEvents.dispatch(tslib_1.__assign({ eventName: fullEventName }, data));
    };
    EventDispatcher.prototype.getFullEventName = function (eventName) {
        return "" + this.eventPrefix + eventName;
    };
    return EventDispatcher;
}());
exports.EventDispatcher = EventDispatcher;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/functions.ts":
/*!**************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/functions.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var DOMUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/DOM */ "./src/core/Gigya.Js/app/Utils/DOM.ts");
var cdn_1 = __webpack_require__(/*! src/core/Gigya.Js/app/cdn */ "./src/core/Gigya.Js/app/cdn.ts");
var LocalInfo_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LocalInfo */ "./src/core/Gigya.Js/app/LocalInfo.ts");
function callAsync(methodName, params) {
    if (params === void 0) { params = {}; }
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, new gigya.Promise(function (resolve) {
                    callFunction("gigya." + methodName, [tslib_1.__assign(tslib_1.__assign({}, params), { callback: resolve })]);
                })];
        });
    });
}
exports.callAsync = callAsync;
function callFunction(name, arParams) {
    var fn = eval(name);
    var arParts = name.split('.');
    arParts.splice(arParts.length - 1, 1);
    var scope = eval(arParts.join('.'));
    fn.apply(scope, arParams);
}
exports.callFunction = callFunction;
function invokeOnPageLoad(func, completeOnly) {
    if ((!document.readyState && document.body) ||
        document.readyState === 'complete' ||
        (!completeOnly && document.readyState === 'interactive' && document.body)) {
        func();
    }
    else {
        var called_1 = false;
        var fnOnLoad = function () {
            if (!called_1) {
                called_1 = true;
                func();
            }
        };
        window.setTimeout(fnOnLoad, 20000); // fallback - sometimes readystate stays stuck on interactive
        DOMUtils.addEventListener(window, 'load', fnOnLoad);
        DOMUtils.addEventListener(document, 'DOMContentLoaded', fnOnLoad);
    }
}
exports.invokeOnPageLoad = invokeOnPageLoad;
function createAlias(publicName, fnc) {
    var arNameSegments = publicName.split('.');
    var oCurrentSegment = window;
    for (var iSegment = 0; iSegment < arNameSegments.length - 1; iSegment++) {
        var sSegment = arNameSegments[iSegment];
        if (!oCurrentSegment[sSegment]) {
            oCurrentSegment[sSegment] = {};
        }
        oCurrentSegment = oCurrentSegment[sSegment];
    }
    oCurrentSegment[arNameSegments[arNameSegments.length - 1]] = fnc;
}
exports.createAlias = createAlias;
function debounce(fn, delayMilliseconds) {
    var timer = undefined;
    return function () {
        if (timer !== undefined) {
            clearTimeout(timer);
        }
        timer = setTimeout(function () {
            timer = undefined;
            fn();
        }, delayMilliseconds);
    };
}
exports.debounce = debounce;
function addSrcToIFrameIfNeeded(iframe, src) {
    if (src === void 0) { src = cdn_1.getCdnResource('/'); }
    if (LocalInfo_1.localInfo.isIOSWebView || (LocalInfo_1.localInfo.isIOS && LocalInfo_1.localInfo.isWeChat)) {
        iframe.setAttribute('src', src);
    }
}
exports.addSrcToIFrameIfNeeded = addSrcToIFrameIfNeeded;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/global.ts":
/*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/global.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var CookieStore = /** @class */ (function () {
    function CookieStore(_win) {
        if (_win === void 0) { _win = window; }
        this._win = _win;
    }
    CookieStore.prototype.setCookie = function (name, value, options) {
        var cookieString = name + "=" + escape(value);
        if (options.path)
            cookieString += "; path=" + options.path;
        if (options.expires)
            cookieString += "; expires=" + options.expires.toUTCString();
        if (options.domain && options.domain.indexOf('.') != -1)
            cookieString += "; domain=" + options.domain;
        if (options.sameSite)
            cookieString += "; sameSite=" + options.sameSite;
        if (options.secure)
            cookieString += "; secure";
        this._win.document.cookie = cookieString;
    };
    CookieStore.prototype.getCookie = function (name) {
        name = name.replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1').replace(/^[ \t]+|[ \t]+$/g, '');
        var regex = new RegExp('(?:^|;)\\s?' + name + '=(.*?)(?:;|$)');
        var match = this._win.document.cookie.match(regex);
        return match && unescape(match[1]);
    };
    return CookieStore;
}());
exports.CookieStore = CookieStore;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/gltexp.ts":
/*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/gltexp.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function isValid(gltexp) {
    return getMillis(gltexp) > Date.now();
}
exports.isValid = isValid;
function getMax() {
    var gltexps = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        gltexps[_i] = arguments[_i];
    }
    if (!gltexps || !gltexps.length)
        return undefined;
    return gltexps.sort(function (gltexpA, gltexpB) { return getMillis(gltexpB) - getMillis(gltexpA); })[0];
}
exports.getMax = getMax;
function getMillis(gltExp) {
    return !gltExp ? 0 : Number(gltExp.substr(0, gltExp.indexOf('_'))) * 1000;
}
exports.getMillis = getMillis;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/keyValue.ts":
/*!*************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/keyValue.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var URLUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/URL */ "./src/core/Gigya.Js/app/Utils/URL.ts");
var JSONUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/JSON */ "./src/core/Gigya.Js/app/Utils/JSON.ts");
var FlagService_1 = __webpack_require__(/*! ../Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
function serialize(oKeyValue, delimiter) {
    var a = [];
    if (!delimiter) {
        delimiter = '&';
    }
    for (var p in oKeyValue) {
        switch (typeof oKeyValue[p]) {
            case 'function':
                break;
            case 'object':
                if (oKeyValue[p] != null) {
                    a.push(p + '=' + URLUtils.URLEncode(JSONUtils.serialize(oKeyValue[p])));
                }
                break;
            case 'undefined':
                break;
            default:
                a.push(p + '=' + URLUtils.URLEncode(oKeyValue[p]));
        }
    }
    var s = a.join(delimiter);
    return s;
}
exports.serialize = serialize;
function deserialize(urlEncodedString, delimiter, keysToLower, useUnescape) {
    var o = {};
    if (!urlEncodedString) {
        return o;
    }
    if (!delimiter) {
        delimiter = '&';
    }
    var pairs = urlEncodedString.split(delimiter);
    for (var iPair = 0; iPair < pairs.length; iPair++) {
        var pair = pairs[iPair];
        var eqPos = pair.indexOf('=');
        if (eqPos === -1) {
            var key = keysToLower ? pair.toLowerCase() : pair;
            o[key] = '1';
        }
        else {
            var key = pair.substr(0, eqPos);
            if (keysToLower) {
                key = key.toLowerCase();
            }
            var serializedValue = pair.substr(eqPos + 1).replace(/\+/g, ' ');
            try {
                if (useUnescape) {
                    o[key] = FlagService_1.FlagService.useDecodeURIComponent ? compareResultsAndReturnURLDecode(serializedValue) : unescape(serializedValue);
                }
                else {
                    o[key] = URLUtils.URLDecode(serializedValue);
                }
            }
            catch (ex) {
                o[key] = FlagService_1.FlagService.useDecodeURIComponent ? URLUtils.URLDecode(serializedValue) : unescape(serializedValue);
            }
        }
    }
    return o;
}
exports.deserialize = deserialize;
function compareResultsAndReturnURLDecode(serializedValue) {
    var unescapedResult = unescape(serializedValue);
    var urlDecodeResult = URLUtils.URLDecode(serializedValue);
    unescapedResult.localeCompare(urlDecodeResult) !== 0 && window.gigya.logger.report('urlDecoder and unescaped have different values', {
        unescapedResult: unescapedResult,
        urlDecodeResult: urlDecodeResult
    });
    return urlDecodeResult;
}


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/localStorage.ts":
/*!*****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/localStorage.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var JSONUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/JSON */ "./src/core/Gigya.Js/app/Utils/JSON.ts");
var LocalInfo_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LocalInfo */ "./src/core/Gigya.Js/app/LocalInfo.ts");
var cookie_1 = __webpack_require__(/*! ./cookie */ "./src/core/Gigya.Js/app/Utils/cookie.ts");
var AbstractLocalStorageAdapter = /** @class */ (function () {
    function AbstractLocalStorageAdapter() {
    }
    AbstractLocalStorageAdapter.getName = function () {
        return 'AbstractAdapter';
    };
    /**
     * Set object to storage.
     */
    AbstractLocalStorageAdapter.prototype.setObject = function (key, o) {
        this.setItem(key, JSONUtils.serialize(o));
    };
    /**
     * Get object from local storage.
     */
    AbstractLocalStorageAdapter.prototype.getObject = function (key, defaultValue) {
        return JSONUtils.deserialize(this.getItem(key), defaultValue);
    };
    /**
     * Is persistent storage. Returns false when data is not persisted.
     */
    AbstractLocalStorageAdapter.prototype.isPersistent = function () {
        return true;
    };
    return AbstractLocalStorageAdapter;
}());
exports.AbstractLocalStorageAdapter = AbstractLocalStorageAdapter;
var AbstractAsyncLocalStorageAdapter = /** @class */ (function (_super) {
    tslib_1.__extends(AbstractAsyncLocalStorageAdapter, _super);
    function AbstractAsyncLocalStorageAdapter() {
        var _this = _super.call(this) || this;
        _this.isLoaded = false;
        return _this;
    }
    AbstractAsyncLocalStorageAdapter.prototype.isReady = function () {
        return this.isLoaded;
    };
    /**
     * Used when there is initialization time on the local storage adapter.
     */
    AbstractAsyncLocalStorageAdapter.prototype.waitForService = function (callback) {
        var _this = this;
        if (this.isReady()) {
            callback();
            return;
        }
        else {
            setTimeout(function () { return _this.waitForService(callback); }, 50);
        }
    };
    return AbstractAsyncLocalStorageAdapter;
}(AbstractLocalStorageAdapter));
exports.AbstractAsyncLocalStorageAdapter = AbstractAsyncLocalStorageAdapter;
var StorageAdapter = /** @class */ (function (_super) {
    tslib_1.__extends(StorageAdapter, _super);
    function StorageAdapter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    StorageAdapter.prototype.getItem = function (key) {
        return this.storage[key];
    };
    StorageAdapter.prototype.setItem = function (key, value, expiresIn) {
        try {
            this.storage[key] = value;
        }
        catch (ex) { }
    };
    StorageAdapter.prototype.removeItem = function (key) {
        this.storage.removeItem(key);
    };
    return StorageAdapter;
}(AbstractLocalStorageAdapter));
var LocalStorageAdapter = /** @class */ (function (_super) {
    tslib_1.__extends(LocalStorageAdapter, _super);
    function LocalStorageAdapter() {
        var _this = _super.call(this) || this;
        _this.storage = window.localStorage;
        return _this;
    }
    LocalStorageAdapter.getName = function () {
        return 'LocalStorageAdapter';
    };
    LocalStorageAdapter.isAvailable = function () {
        return LocalInfo_1.localInfo.supportsLocalStorage;
    };
    return LocalStorageAdapter;
}(StorageAdapter));
var SessionStorageAdapter = /** @class */ (function (_super) {
    tslib_1.__extends(SessionStorageAdapter, _super);
    function SessionStorageAdapter() {
        var _this = _super.call(this) || this;
        _this.storage = window.sessionStorage;
        return _this;
    }
    SessionStorageAdapter.getName = function () {
        return 'SessionStorageAdapter';
    };
    SessionStorageAdapter.isAvailable = function () {
        return LocalInfo_1.localInfo.supportsSessionStorage;
    };
    return SessionStorageAdapter;
}(StorageAdapter));
var FirefoxStorageAdapter = /** @class */ (function (_super) {
    tslib_1.__extends(FirefoxStorageAdapter, _super);
    function FirefoxStorageAdapter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    FirefoxStorageAdapter.isAvailable = function () {
        return LocalInfo_1.localInfo.isFF && window['globalStorage'];
    };
    FirefoxStorageAdapter.getName = function () {
        return 'FirefoxStorageAdapter';
    };
    FirefoxStorageAdapter.prototype.getItem = function (key) {
        return window['globalStorage'][location.hostname][key];
    };
    FirefoxStorageAdapter.prototype.setItem = function (key, value, expiresIn) {
        try {
            window['globalStorage'][location.hostname][key] = value;
        }
        catch (ex) { }
    };
    FirefoxStorageAdapter.prototype.removeItem = function (key) {
        delete window['globalStorage'][location.hostname][key];
    };
    return FirefoxStorageAdapter;
}(AbstractLocalStorageAdapter));
var CookieStorageAdapter = /** @class */ (function (_super) {
    tslib_1.__extends(CookieStorageAdapter, _super);
    function CookieStorageAdapter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    CookieStorageAdapter.isAvailable = function () {
        return cookie_1.default.canSaveCookie();
    };
    CookieStorageAdapter.getName = function () {
        return 'CookieStorageAdapter';
    };
    CookieStorageAdapter.prototype.getItem = function (key) {
        return cookie_1.default.get(key);
    };
    CookieStorageAdapter.prototype.setItem = function (key, value, expiresIn, domain, additionalParams) {
        if (additionalParams === void 0) { additionalParams = {}; }
        cookie_1.default.set(key, value, expiresIn, domain, additionalParams.dontUseRootPath, additionalParams.sameSite);
    };
    CookieStorageAdapter.prototype.removeItem = function (key) {
        cookie_1.default.remove(key);
    };
    return CookieStorageAdapter;
}(AbstractLocalStorageAdapter));
exports.CookieStorageAdapter = CookieStorageAdapter;
var MemoryStorageAdapter = /** @class */ (function (_super) {
    tslib_1.__extends(MemoryStorageAdapter, _super);
    function MemoryStorageAdapter() {
        var _this = _super.call(this) || this;
        _this.memory = {};
        return _this;
    }
    MemoryStorageAdapter.isAvailable = function () {
        return true;
    };
    MemoryStorageAdapter.getName = function () {
        return 'MemoryStorageAdapter';
    };
    MemoryStorageAdapter.prototype.getItem = function (key) {
        return this.memory[key];
    };
    MemoryStorageAdapter.prototype.setItem = function (key, value, expiresIn) {
        this.memory[key] = value;
    };
    MemoryStorageAdapter.prototype.removeItem = function (key) {
        delete this.memory[key];
    };
    /**
     * Is persistent storage. Returns false when data is not persisted.
     */
    MemoryStorageAdapter.prototype.isPersistent = function () {
        return false;
    };
    return MemoryStorageAdapter;
}(AbstractLocalStorageAdapter));
exports.MemoryStorageAdapter = MemoryStorageAdapter;
exports.adapters = [
    LocalStorageAdapter,
    SessionStorageAdapter,
    FirefoxStorageAdapter,
    CookieStorageAdapter,
    MemoryStorageAdapter,
];
exports.instances = {};
function initializeAdapter(adapter) {
    var adapterName = adapter.getName() || adapter.name;
    if (!exports.instances[adapterName]) {
        exports.instances[adapterName] = new adapter();
    }
    return exports.instances[adapterName];
}
exports.initializeAdapter = initializeAdapter;
function waitForService(callback) {
    // Select compatible adapter.
    var storage;
    for (var _i = 0, adapters_1 = exports.adapters; _i < adapters_1.length; _i++) {
        var adapter_1 = adapters_1[_i];
        if (adapter_1.isAvailable()) {
            // Don't select adapter if it's async and a callback wasn't provided.
            if (adapter_1.prototype instanceof AbstractAsyncLocalStorageAdapter && !callback) {
                continue;
            }
            storage = initializeAdapter(adapter_1);
            break;
        }
    }
    // Fallback to memory-based non-persistent storage.
    if (!storage) {
        storage = initializeAdapter(MemoryStorageAdapter);
    }
    // Trigger callback when adapter finishes loading (or instantly, if not required to wait).
    if (callback) {
        if (storage instanceof AbstractAsyncLocalStorageAdapter) {
            storage.waitForService(function () {
                callback(storage);
            });
        }
        else {
            callback(storage);
        }
    }
    return storage;
}
exports.waitForService = waitForService;
var adapter = waitForService();
function getItem(key) {
    return adapter.getItem(key);
}
exports.getItem = getItem;
function setItem(key, value, expiresIn) {
    return adapter.setItem(key, value, expiresIn);
}
exports.setItem = setItem;
function removeItem(key) {
    return adapter.removeItem(key);
}
exports.removeItem = removeItem;
function setObject(key, o) {
    return adapter.setObject(key, o);
}
exports.setObject = setObject;
function getObject(key, defaultValue) {
    return adapter.getObject(key, defaultValue);
}
exports.getObject = getObject;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/object.ts":
/*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/object.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(__webpack_provided_Object_dot_assign) {Object.defineProperty(exports, "__esModule", { value: true });
var JSONUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/JSON */ "./src/core/Gigya.Js/app/Utils/JSON.ts");
var toggles_1 = __webpack_require__(/*! ./toggles */ "./src/core/Gigya.Js/app/Utils/toggles.ts");
function removeUndefined(o) {
    var o2 = {};
    for (var p in o) {
        if (o[p] != null && o[p] != undefined) {
            o2[p] = o[p];
        }
    }
    return o2;
}
exports.removeUndefined = removeUndefined;
function expressionHelper(context) {
    context = context || {};
    return {
        getField: function (path) {
            if (!path)
                return undefined;
            var paths = path.split('.'), current = context, i;
            for (i = 0; i < paths.length; ++i) {
                if (current[paths[i]] == undefined) {
                    return undefined;
                }
                else {
                    current = current[paths[i]];
                }
            }
            return current;
        },
    };
}
exports.expressionHelper = expressionHelper;
function getPropertyBySerializedName(o, name, createMissingObjects) {
    if (!name)
        return o;
    var oResult = o;
    var arNameSegments = name.split('.');
    for (var iSegment = 0; iSegment < arNameSegments.length; iSegment++) {
        var sSegment = arNameSegments[iSegment];
        var sIndex = null;
        //Support for array access. i.e. "obj.prop1[0].prop2"
        if (sSegment.match(/\[[0-9]+]/)) {
            sIndex = Number(sSegment.match(/\[[0-9]+]/)[0].replace(/[\[\]]/g, ''));
        }
        sSegment = sSegment.split(/\[[0-9]+]/).join('');
        var res = (sIndex || sIndex === 0) && oResult[sSegment] ? oResult[sSegment][sIndex] : oResult[sSegment];
        if (createMissingObjects && !oResult[sSegment]) {
            oResult[sSegment] = {};
        }
        else if (createMissingObjects && !res && res !== false) {
            oResult[sSegment] = [];
        }
        if (res || res === false) {
            oResult = res;
        }
        else {
            return null;
        }
    }
    return oResult;
}
exports.getPropertyBySerializedName = getPropertyBySerializedName;
function setPropertyBySerializedName(o, name, value) {
    var arNameSegments = name.split('.');
    var propertyName = arNameSegments.pop();
    getPropertyBySerializedName(o, arNameSegments.join('.'), true)[propertyName] = value;
}
exports.setPropertyBySerializedName = setPropertyBySerializedName;
function add(oTarget, o, dontOverride) {
    for (var p in o) {
        if (!dontOverride || typeof oTarget[p] === 'undefined') {
            oTarget[p] = o[p];
        }
    }
}
exports.add = add;
function getHash(o) {
    var ar = [];
    for (var p in o) {
        var s;
        if (typeof o[p] == 'object')
            s = JSONUtils.serialize(o[p], false);
        else if (o[p])
            s = o[p].toString();
        ar.push(p + '=' + s);
    }
    return ar.sort().join('&');
}
exports.getHash = getHash;
function getMurmurHash(key, seed) {
    if (!seed)
        seed = 0;
    var remainder, bytes, h1, h1b, c1, c1b, c2, c2b, k1, i;
    remainder = key.length & 3; // key.length % 4
    bytes = key.length - remainder;
    h1 = seed;
    c1 = 0xcc9e2d51;
    c2 = 0x1b873593;
    i = 0;
    while (i < bytes) {
        k1 = (key.charCodeAt(i) & 0xff) | ((key.charCodeAt(++i) & 0xff) << 8) | ((key.charCodeAt(++i) & 0xff) << 16) | ((key.charCodeAt(++i) & 0xff) << 24);
        ++i;
        k1 = ((k1 & 0xffff) * c1 + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;
        k1 = (k1 << 15) | (k1 >>> 17);
        k1 = ((k1 & 0xffff) * c2 + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;
        h1 ^= k1;
        h1 = (h1 << 13) | (h1 >>> 19);
        h1b = ((h1 & 0xffff) * 5 + ((((h1 >>> 16) * 5) & 0xffff) << 16)) & 0xffffffff;
        h1 = (h1b & 0xffff) + 0x6b64 + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16);
    }
    k1 = 0;
    switch (remainder) {
        case 3:
            k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
        case 2:
            k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
        case 1:
            k1 ^= key.charCodeAt(i) & 0xff;
            k1 = ((k1 & 0xffff) * c1 + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;
            k1 = (k1 << 15) | (k1 >>> 17);
            k1 = ((k1 & 0xffff) * c2 + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;
            h1 ^= k1;
    }
    h1 ^= key.length;
    h1 ^= h1 >>> 16;
    h1 = ((h1 & 0xffff) * 0x85ebca6b + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;
    h1 ^= h1 >>> 13;
    h1 = ((h1 & 0xffff) * 0xc2b2ae35 + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16)) & 0xffffffff;
    h1 ^= h1 >>> 16;
    return h1 >>> 0;
}
exports.getMurmurHash = getMurmurHash;
function clone(obj, deepCopy, ignoreFunctions, maxLevel, level, ignoreContext) {
    if (maxLevel === void 0) { maxLevel = 20; }
    if (level === void 0) { level = 0; }
    if (obj === window)
        return window; // do not clone the window object
    if (level > maxLevel)
        return null; // Too deep
    if (typeof obj == 'undefined' || obj == null) {
        return toggles_1.default.isOn('removeUndefinedProperties') ? obj : null;
    }
    else if (typeof obj == 'function' && ignoreFunctions) {
        return null;
    }
    else if (obj.constructor == Array) {
        var ar = [];
        for (var i = 0; i < obj.length; i++) {
            if (!ignoreFunctions || typeof obj[i] != 'function') {
                if (deepCopy) {
                    ar[i] = clone(obj[i], deepCopy, ignoreFunctions, maxLevel, level + 1, ignoreContext);
                }
                else {
                    ar[i] = obj[i];
                }
            }
        }
        return ar;
    }
    else if (typeof obj == 'object') {
        var o = {};
        for (var p in obj) {
            if (ignoreContext && p == 'context')
                continue;
            if (!ignoreFunctions || typeof obj[p] != 'function') {
                if (deepCopy) {
                    o[p] = clone(obj[p], deepCopy, ignoreFunctions, maxLevel, level + 1, ignoreContext);
                }
                else {
                    o[p] = obj[p];
                }
            }
        }
        return o;
    }
    else {
        return obj;
    }
}
exports.clone = clone;
function merge(args, isDeepMerge) {
    var o = {};
    for (var i = 0; i < args.length; i++) {
        if (args[i] && args[i].length) {
            for (var u = 0; u < args[i].length; u++) {
                for (var p in args[i][u]) {
                    o[p] = args[i][u][p];
                }
            }
        }
        else {
            // Merge objects.
            if (!isDeepMerge) {
                // Flat merge.
                for (var p in args[i]) {
                    o[p] = args[i][p];
                }
            }
            else {
                // Deep merge.
                for (var p in args[i]) {
                    //we override primitive / array
                    if (typeof o[p] !== 'object' || o[p] instanceof Array) {
                        o[p] = args[i][p];
                    }
                    else {
                        o[p] = merge([o[p], args[i][p]], true);
                    }
                }
            }
        }
    }
    return o;
}
exports.merge = merge;
function unflatten(data) {
    if (Object(data) !== data || Array.isArray(data)) {
        return data;
    }
    var result = {};
    for (var p in data) {
        var cur = result;
        var prop = '';
        var parts = p.replace(/\[([0-9])]/, '.$1').split('.');
        for (var i = 0; i < parts.length; i++) {
            var idx = !isNaN(Number(parts[i]));
            cur = cur[prop] || (cur[prop] = idx ? [] : {});
            prop = parts[i];
        }
        cur[prop] = data[p];
    }
    return result[''] || {};
}
exports.unflatten = unflatten;
function flatten(data, withBracket) {
    if (withBracket === void 0) { withBracket = false; }
    var result = {};
    function recurse(cur, prop) {
        if (Object(cur) !== cur) {
            result[prop] = cur;
        }
        else if (Array.isArray(cur)) {
            var l = cur.length;
            for (var i = 0; i < l; i++) {
                var nestedProperty = withBracket ? prop + "[" + i + "]" : prop + "." + i;
                recurse(cur[i], prop ? nestedProperty : String(i));
            }
            if (l === 0) {
                result[prop] = [];
            }
        }
        else {
            var isEmpty = true;
            for (var p in cur) {
                isEmpty = false;
                recurse(cur[p], prop ? prop + "." + p : p);
            }
            if (isEmpty && prop !== '') {
                result[prop] = {};
            }
        }
    }
    recurse(data, '');
    return result;
}
exports.flatten = flatten;
function extractProperties(src, dest, schema) {
    if (src == null)
        return;
    if (dest == null)
        dest = {};
    if (src.constructor == Array) {
        for (var iSrc = 0; iSrc < src.length; iSrc++) {
            extractProperties(src[iSrc], dest, schema);
        }
    }
    else if (schema) {
        var arSchema = schema.split('|');
        var srcLCase = {};
        for (var fieldName in src) {
            srcLCase[fieldName.toLowerCase()] = 1;
        }
        for (var i = 0; i < arSchema.length; i++) {
            var fieldName2 = arSchema[i];
            if (srcLCase[fieldName2.toLowerCase()])
                dest[fieldName2] = src[fieldName2];
        }
    }
    else {
        dest = clone(src, false);
    }
    return dest;
}
exports.extractProperties = extractProperties;
function extractProperty(src, paramName) {
    var params;
    return extractProperties(src, params, paramName)[paramName];
}
exports.extractProperty = extractProperty;
function parseToObject(str) {
    try {
        var parsedVal = window['JSON'].parse(str);
        if (typeof parsedVal == 'object') {
            return parsedVal;
        }
    }
    catch (e) { }
    return undefined;
}
exports.parseToObject = parseToObject;
function removePropertiesPrefix(obj, prefix) {
    if (obj === void 0) { obj = {}; }
    if (prefix === void 0) { prefix = ''; }
    return Object.keys(obj).reduce(function (acc, curr) {
        var _a;
        return (__webpack_provided_Object_dot_assign(acc, (_a = {}, _a[curr.replace(prefix, '')] = obj[curr], _a)));
    }, {});
}
exports.removePropertiesPrefix = removePropertiesPrefix;
function addPrefixToProperties(obj, prefix) {
    if (obj === void 0) { obj = {}; }
    if (prefix === void 0) { prefix = ''; }
    return Object.keys(obj).reduce(function (acc, key) {
        if (key.indexOf(prefix) !== 0) {
            acc["" + prefix + key] = obj[key];
        }
        else {
            acc[key] = obj[key];
        }
        return acc;
    }, {});
}
exports.addPrefixToProperties = addPrefixToProperties;
function normalizeObjectKeysToLowerCase(object) {
    // Normalize all keys to lowercase in addition to their original casing.
    for (var key in object) {
        object[key.toLowerCase()] = object[key];
    }
    return object;
}
exports.normalizeObjectKeysToLowerCase = normalizeObjectKeysToLowerCase;
function decodeObjectKeys(obj) {
    var decodeObjectKeys = {};
    for (var key in obj) {
        var decodedKey = key;
        while (decodedKey.indexOf('%') !== -1) {
            decodedKey = decodeURIComponent(decodedKey);
        }
        decodeObjectKeys[decodedKey] = obj[key];
    }
    return decodeObjectKeys;
}
exports.decodeObjectKeys = decodeObjectKeys;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js")["__assign"]))

/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/promise.ts":
/*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/promise.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
function promisify(method, params) {
    if (params === void 0) { params = {}; }
    return new gigya.Promise(function (resolve) {
        method(tslib_1.__assign(tslib_1.__assign({}, params), { callback: function (response) {
                resolve(response);
            } }));
    });
}
exports.promisify = promisify;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/queue.ts":
/*!**********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/queue.ts ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var _q = {};
function _servicesStatus() {
    var services = {};
    for (var service in _q) {
        var active = isActive(service);
        if (active) {
            services[service] = {
                active: true,
                waitingFor: _q[service].ids,
                queuedCount: _q[service].q.length,
            };
        }
        else {
            services[service] = {
                active: false,
            };
        }
    }
    return services;
}
exports._servicesStatus = _servicesStatus;
function isActive(service) {
    if (!_q[service])
        return false;
    for (var id in _q[service].ids)
        return true;
    return false;
}
exports.isActive = isActive;
function release(id, service) {
    window.gigya.logger.debug("releasing " + service + " queue by " + id);
    if (!_q[service])
        return;
    delete _q[service].ids[id];
    if (!isActive(service)) {
        var q = _q[service].q;
        _q[service].q = [];
        while (q.length > 0) {
            var o = q.splice(0, 1)[0];
            try {
                o.func.apply(this, o.args);
            }
            catch (ex) {
                if (typeof console == 'object' && console.log) {
                    console.log('Gigya: Exception while invoking queued method (' + service + ': ' + id + ')');
                }
            }
            if (isActive(service)) {
                //queue became inactive
                _q[service].q = q;
                break;
            }
        }
    }
}
exports.release = release;
function hold(id, service) {
    window.gigya.logger.debug("locking queue " + service + " by " + id);
    if (!_q[service])
        _q[service] = { q: [], ids: {} };
    _q[service].ids[id] = true;
}
exports.hold = hold;
function waitFor(service, fnc, args) {
    if (!_q[service])
        _q[service] = { q: [], ids: {} };
    _q[service].q.push({ func: fnc, args: args });
}
exports.waitFor = waitFor;
function queueForExecution(service, func, args) {
    args = args || [];
    if (isActive(service)) {
        waitFor(service, func, args);
    }
    else {
        func.apply(this, args);
    }
}
exports.queueForExecution = queueForExecution;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/script.ts":
/*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/script.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var Uri_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/Uri */ "./src/core/Gigya.Js/app/Utils/Uri.ts");
var LocalInfo_1 = __webpack_require__(/*! src/core/Gigya.Js/app/LocalInfo */ "./src/core/Gigya.Js/app/LocalInfo.ts");
var arrayUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/array */ "./src/core/Gigya.Js/app/Utils/array.ts");
var functionsUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/functions */ "./src/core/Gigya.Js/app/Utils/functions.ts");
var DOMUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/DOM */ "./src/core/Gigya.Js/app/Utils/DOM.ts");
var cdn_1 = __webpack_require__(/*! src/core/Gigya.Js/app/cdn */ "./src/core/Gigya.Js/app/cdn.ts");
var pending = {};
function addSdkVersion(url) {
    var scriptUrl = Uri_1.Uri.parse(url);
    scriptUrl.addToSearch({ version: window.gigya.build.version });
    return scriptUrl.toString();
}
function formatSrcUrl(src) {
    // remove cdn domain number
    return src.replace(/^http(s?):\/\/cdn(s?)[0-9]*.gigya.com\//, 'http$1://cdn$2.gigya.com/');
}
function isLoaded(src) {
    var pendingSrc = formatSrcUrl(src);
    return Boolean(pending[pendingSrc] && pending[pendingSrc].loaded);
}
exports.isLoaded = isLoaded;
function load(src, fnOnError, fnOnLoad, loadOnce, removeAfter, treatTogether) {
    if (removeAfter === void 0) { removeAfter = 5000; }
    var oScript;
    if (src.indexOf('//') === 0) {
        src = LocalInfo_1.localInfo.protocol + ':' + src;
    }
    if (loadOnce) {
        var pendingSrc = formatSrcUrl(src);
        if (pending[pendingSrc]) {
            if (pending[pendingSrc].loaded) {
                window.gigya.logger.debug("script was already loaded:", { src: src });
                if (fnOnLoad) {
                    fnOnLoad();
                }
            }
            else {
                pending[pendingSrc].onLoad.push(fnOnLoad);
                pending[pendingSrc].onError.push(fnOnError);
            }
            return;
        }
        oScript = pending[pendingSrc] = { loaded: false, onLoad: [fnOnLoad], onError: [fnOnError] };
        if (treatTogether && treatTogether.length > 0) {
            arrayUtils.forEach(treatTogether, function (url) {
                pending[url] = oScript;
            });
        }
    }
    else {
        // multiple loads
        oScript = { loaded: false, onLoad: [fnOnLoad], onError: [fnOnError] };
    }
    var scriptLoader = function () {
        var script = document.createElement('script');
        script.async = true;
        script.type = 'text/javascript';
        script.charset = 'UTF-8';
        var done = false;
        var fnOnScriptLoad = function () {
            if (!done) {
                if (oScript.onLoad && oScript.onLoad.length) {
                    for (var i = 0; i < oScript.onLoad.length; i++) {
                        if (typeof oScript.onLoad[i] === 'function') {
                            oScript.onLoad[i]();
                        }
                    }
                }
                oScript.loaded = true;
                oScript.onError = oScript.onLoad = null; // remove memory leak
                done = true;
                if (removeAfter === true) {
                    removeAfter = 0;
                }
                if (removeAfter !== false) {
                    setTimeout(function () {
                        if (script.parentNode) {
                            script.parentNode.removeChild(script);
                        }
                    }, removeAfter);
                }
            }
        };
        script.onload = fnOnScriptLoad;
        script['onreadystatechange'] = function () {
            if (this.readyState === 'loaded') {
                fnOnScriptLoad();
            }
        };
        script.onerror = function () {
            for (var i = 0; i < oScript.onError.length; i++) {
                if (typeof oScript.onError[i] === 'function') {
                    oScript.onError[i]();
                }
            }
            delete pending[src];
        };
        var head = document.getElementsByTagName('head');
        if (head && head.length > 0) {
            head[0].appendChild(script);
        }
        var fnSetScriptSrc = function () {
            var webSdkResourcesDomain = new RegExp("^https?://cdns?.*" + window.gigya.defaultApiDomain + "/.*gigya.js");
            var scriptSrc = webSdkResourcesDomain.test(src) ? addSdkVersion(src) : src;
            script.src = scriptSrc;
        };
        if (LocalInfo_1.localInfo.iosVersion >= 6) {
            // iOS 6 breaks setTimeout when animation is active (switching tabs back from a login sequence)
            fnSetScriptSrc();
        }
        else {
            setTimeout(fnSetScriptSrc, 1); // Doing this async gives better performance in older browsers
        }
    };
    if (LocalInfo_1.localInfo.isIE) {
        functionsUtils.invokeOnPageLoad(scriptLoader);
    }
    else {
        scriptLoader();
    }
}
exports.load = load;
var ResourceTypes;
(function (ResourceTypes) {
    ResourceTypes[ResourceTypes["script"] = 0] = "script";
    ResourceTypes[ResourceTypes["image"] = 1] = "image";
    ResourceTypes[ResourceTypes["iframe"] = 2] = "iframe";
})(ResourceTypes = exports.ResourceTypes || (exports.ResourceTypes = {}));
function triggerResource(url, callback, resourceType, removeAfter) {
    if (resourceType === void 0) { resourceType = ResourceTypes.image; }
    if (removeAfter === void 0) { removeAfter = 5000; }
    switch (resourceType) {
        case ResourceTypes.script:
            load(url, callback, callback, false, removeAfter);
            break;
        case ResourceTypes.image:
            loadImage(url, callback);
            break;
        case ResourceTypes.iframe:
            loadIframe(url, callback, removeAfter);
            break;
        default:
            throw new Error('Unsupported resource type');
    }
}
exports.triggerResource = triggerResource;
function loadImage(url, callback) {
    var img = new Image();
    var loaded = false;
    var fnOnLoad = function () {
        if (!loaded) {
            loaded = true;
            callback();
        }
    };
    img.onload = img.onerror = fnOnLoad;
    img.src = url;
}
function loadIframe(url, callback, removeAfter) {
    if (removeAfter === void 0) { removeAfter = 5000; }
    var ifr = document.createElement('iframe');
    ifr.style.width = '30px';
    ifr.style.height = '10px';
    ifr.style.position = 'absolute';
    ifr.style.top = '-1000px';
    ifr.style.left = '-1000px';
    if (removeAfter === true) {
        removeAfter = 0;
    }
    var fnOnLoad = function (e) {
        var el;
        if (e && e.srcElement) {
            el = e.srcElement;
        }
        else if (e && e.target) {
            el = e.target;
        }
        else {
            el = this;
        }
        if (!el.loaded && el.parentNode) {
            el.loaded = true;
            callback();
            if (removeAfter !== false) {
                window.setTimeout(function () {
                    try {
                        document.body.removeChild(el);
                    }
                    catch (ex) { }
                }, removeAfter);
            }
        }
    };
    DOMUtils.addEventListener(ifr, 'load', fnOnLoad);
    DOMUtils.addEventListener(ifr, 'error', fnOnLoad);
    ifr.onload = function (e) {
        fnOnLoad(e);
    };
    ifr.onerror = fnOnLoad;
    ifr.src = url;
    DOMUtils.appendToBody(ifr);
}
function loadService(serviceName, fnOnError, fnOnLoad) {
    var url = cdn_1.getCdnResource() + '/js/gigya.services.' + serviceName + '.js';
    load(url, function () {
        if (typeof console === 'object' && console.error) {
            console.error('error loading gigya service ' + serviceName + ' from url: ' + url);
            if (fnOnError) {
                fnOnError();
            }
        }
    }, fnOnLoad, true);
}
exports.loadService = loadService;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/sessionCache.ts":
/*!*****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/sessionCache.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var JSONUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/JSON */ "./src/core/Gigya.Js/app/Utils/JSON.ts");
var queueUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/queue */ "./src/core/Gigya.Js/app/Utils/queue.ts");
var FlagService_1 = __webpack_require__(/*! ../Services/FlagService */ "./src/core/Gigya.Js/app/Services/FlagService.ts");
var sessionStorageEnabled;
try {
    sessionStorageEnabled = Boolean(window.sessionStorage); // when 3pc blocked, chrome throws when trying to access session storage.
}
catch (ex) {
    sessionStorageEnabled = false;
}
function set(key, response) {
    if (!sessionStorageEnabled)
        return;
    var oGigya;
    try {
        oGigya = JSONUtils.deserialize(window.sessionStorage.getItem('gigyaCache'));
        if (response == null && oGigya[key]) {
            delete oGigya[key];
        }
        else {
            var time = new Date().getTime();
            oGigya[key] = { response: response, time: time };
            if (key.indexOf('gig_oidcContext_') >= 0) {
                window.gigya.logger.report('oidc storage logs - set', {
                    key: key,
                    value: oGigya[key]
                }, false, FlagService_1.FlagService.forceErrorReport);
            }
        }
        window.sessionStorage.setItem('gigyaCache', JSONUtils.serialize(oGigya));
    }
    catch (ex) { }
    queueUtils.release('cache', 'cache_' + key);
}
exports.set = set;
function get(key, cacheTimeout) {
    if (cacheTimeout === void 0) { cacheTimeout = -1; }
    if (!sessionStorageEnabled) {
        return null;
    }
    try {
        if (!queueUtils.isActive('cache_' + key)) {
            var sGigyaCache = window.sessionStorage.getItem('gigyaCache');
            var oGigya = JSONUtils.deserialize(sGigyaCache);
            var cached = oGigya[key];
            if (cached) {
                var currentTime = new Date().getTime();
                if (cacheTimeout < 0 || cacheTimeout + cached.time > currentTime) {
                    //cached
                    return cached.response;
                }
                else {
                    if (key.indexOf('gig_oidcContext_') >= 0) {
                        window.gigya.logger.report('oidc storage logs - get', {
                            key: key,
                            value: oGigya[key],
                            cacheTime: cached.time,
                            currentTime: currentTime
                        }, false, FlagService_1.FlagService.forceErrorReport);
                    }
                    //expired
                    remove(key);
                    return null;
                }
            }
            if (!cached) {
                //not cached (first time)
                queueUtils.hold('cache', 'cache_' + key); //so that future requests will wait for the first one's response.
                return null;
            }
        }
        else {
            //wait for first response
            queueUtils.waitFor('cache_' + key, get, arguments);
            return null;
        }
    }
    catch (ex) { }
    return null;
}
exports.get = get;
function remove(key) {
    set(key, null);
}
exports.remove = remove;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/stringUtils.ts":
/*!****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/stringUtils.ts ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function trim(s) {
    return s.replace(/^\s*(\S*(.*\S)?)\s*$/, '$1');
}
exports.trim = trim;
function format(s) {
    var rest = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        rest[_i - 1] = arguments[_i];
    }
    for (var i = 0; i < arguments.length - 1; i++) {
        if (arguments[i + 1] != null) {
            s = s.split('{' + i + '}').join(arguments[i + 1]);
        }
    }
    return s;
}
exports.format = format;
function capitalize(s) {
    return s.substring(0, 1).toUpperCase() + s.substring(1);
}
exports.capitalize = capitalize;
function endsWith(s, suffix) {
    return s.indexOf(suffix, s.length - suffix.length) !== -1;
}
exports.endsWith = endsWith;
function escapeRegExp(str) {
    return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, '\\$1');
}
exports.escapeRegExp = escapeRegExp;
function replaceAll(str, find, replace) {
    if (!find)
        return str;
    return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);
}
exports.replaceAll = replaceAll;
function mergeCommaSeparatedValues(str1, str2) {
    if (str1 === void 0) { str1 = ''; }
    if (str2 === void 0) { str2 = ''; }
    var arr = str1.concat(',', str2).split(',');
    return window.gigya.utils.array.getUniqueValues(arr).filter(function (x) { return x; }).join(',');
}
exports.mergeCommaSeparatedValues = mergeCommaSeparatedValues;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/templates.ts":
/*!**************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/templates.ts ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function fill(template, o) {
    if (typeof template == 'function') {
        template = template(o);
    }
    if (template instanceof Array) {
        template = template.join('');
    }
    var p = /(\$)(!?)([a-z_][a-z_.\d]*)([(][^()]*[)])?|(\$)(!?)\{([a-z_][a-z_.\d]*)([(][^()]*[)])?\}/gi;
    p.lastIndex = 0;
    var res = template;
    var matches = p.exec(res);
    var offset;
    while (matches != null) {
        if (matches[1] == '$') {
            offset = 0;
        }
        else {
            offset = 4;
        }
        var blnDontInject = matches[2 + offset] == '!';
        var identifier = matches[3 + offset]; // 0 is the entire expr and 1/5=$ 2/6=! 3/7=identifier 4/8=()'s
        var para = matches[4 + offset];
        if (para == null)
            para = '';
        var dbg = 0;
        if (identifier.substring(0, 1) == '.') {
            identifier = identifier.substring(1);
        }
        if (identifier.substring(0, 3) == 'DBG') {
            identifier = identifier.substring(3);
            dbg = 1;
        }
        var preTemp = '';
        var postTemp = identifier + para;
        while (postTemp != preTemp) {
            preTemp = postTemp;
            var lastIndex = p.lastIndex;
            postTemp = fill(preTemp, o);
            p.lastIndex = lastIndex;
        }
        var v = '';
        var skipChars = 0;
        if (o[identifier.split('.')[0]] != null) {
            try {
                v = new Function('o', 'p', 'return eval("o." + p)')(o, postTemp);
            }
            catch (e) { }
        }
        else {
            v = '$' + (blnDontInject ? '!' : '') + postTemp;
            skipChars = 1;
        }
        if (blnDontInject) {
            res = res.replace(matches[0], '');
        }
        else {
            res = res.substr(0, matches.index) + v + res.substr(matches.index + matches[0].length);
            //res=res.split(matches[0]).join(v);
        }
        p.lastIndex = matches.index + skipChars; // to allow recursive changes in templates that contain templates.
        matches = p.exec(res);
    }
    return res;
}
exports.fill = fill;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/toggles.ts":
/*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/toggles.ts ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var objectUtils = __webpack_require__(/*! ./object */ "./src/core/Gigya.Js/app/Utils/object.ts");
var WebSDKToggles = /** @class */ (function () {
    function WebSDKToggles() {
    }
    WebSDKToggles.prototype.has = function (key) {
        return typeof this._toggles[key] != 'undefined';
    };
    WebSDKToggles.prototype.get = function (key) {
        return this._toggles[key];
    };
    WebSDKToggles.prototype.isOn = function (key) {
        return this.has(key) && this.get(key);
    };
    Object.defineProperty(WebSDKToggles.prototype, "_toggles", {
        get: function () {
            return objectUtils.merge([
                this._globalConfToggles,
                this._webSdkConfigToggles
            ]);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WebSDKToggles.prototype, "_globalConfToggles", {
        get: function () {
            var _a, _b;
            return ((_b = (_a = window.gigya.thisScript) === null || _a === void 0 ? void 0 : _a.globalConf) === null || _b === void 0 ? void 0 : _b.toggles) || {};
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(WebSDKToggles.prototype, "_webSdkConfigToggles", {
        get: function () {
            var _a, _b;
            var toggles = ((_b = (_a = window.gigya._) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.toggles) || {};
            return Object.keys(toggles).reduce(function (newToggles, key) {
                newToggles[key] = toggles[key] === 'on';
                return newToggles;
            }, {});
        },
        enumerable: true,
        configurable: true
    });
    return WebSDKToggles;
}());
exports.default = new WebSDKToggles();


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/validation.ts":
/*!***************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/validation.ts ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function isExplicitTrue(val) {
    var lc = ('' + val).toLowerCase();
    return lc == 'true' || lc == '1';
}
exports.isExplicitTrue = isExplicitTrue;
function isExplicitFalse(val) {
    var lc = ('' + val).toLowerCase();
    return lc == 'false' || lc == '0';
}
exports.isExplicitFalse = isExplicitFalse;
function isLaterThanNow(expirationTime) {
    return expirationTime > new Date().getTime();
}
exports.isLaterThanNow = isLaterThanNow;
function allDefinedOrAllUndefined() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    var anyUndefined = args.some(function (x) { return typeof x === 'undefined'; });
    var anyDefined = args.some(function (x) { return typeof x !== 'undefined'; });
    return (anyDefined && !anyUndefined) || (!anyDefined && anyUndefined);
}
exports.allDefinedOrAllUndefined = allDefinedOrAllUndefined;


/***/ }),

/***/ "./src/core/Gigya.Js/app/Utils/viewport.ts":
/*!*************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/viewport.ts ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
function getScroll() {
    var scrOfX = 0, scrOfY = 0;
    if (typeof window.pageYOffset == 'number') {
        scrOfY = window.pageYOffset;
        scrOfX = window.pageXOffset;
    }
    else if (document.body && (document.body.scrollLeft || document.body.scrollTop)) {
        scrOfY = document.body.scrollTop;
        scrOfX = document.body.scrollLeft;
    }
    else if (document.documentElement && (document.documentElement.scrollLeft || document.documentElement.scrollTop)) {
        scrOfY = document.documentElement.scrollTop;
        scrOfX = document.documentElement.scrollLeft;
    }
    return { left: scrOfX, top: scrOfY };
}
exports.getScroll = getScroll;
function getFullSize() {
    var de = document.documentElement;
    var db = document.body;
    var h = de.clientHeight;
    if (h == 0)
        h = db.clientHeight;
    var w = de.clientWidth;
    if (w == 0)
        w = db.clientWidth;
    return { w: w, h: h };
}
exports.getFullSize = getFullSize;
function getOrientation() {
    var orientation = parseInt(window['orientation'] || '0');
    if (orientation < 0)
        orientation += 360;
    return orientation;
}
exports.getOrientation = getOrientation;
function getOuterSize() {
    var h;
    var w;
    var de = document.documentElement;
    var db = document.body;
    if (window.outerHeight) {
        h = window.outerHeight;
        w = window.outerWidth;
    }
    else {
        h = de.clientHeight;
        if (h == 0)
            h = db.clientHeight;
        w = de.clientWidth;
        if (w == 0)
            w = db.clientWidth;
    }
    return { w: w, h: h };
}
exports.getOuterSize = getOuterSize;
function getInnerSize() {
    var h;
    var w;
    var de = document.documentElement;
    var db = document.body;
    if (window.innerHeight) {
        h = window.innerHeight;
        w = window.innerWidth;
    }
    else {
        h = de.clientHeight;
        if (h == 0)
            h = db.clientHeight;
        w = de.clientWidth;
        if (w == 0)
            w = db.clientWidth;
    }
    return { w: w, h: h };
}
exports.getInnerSize = getInnerSize;
function getMiddleCenter() {
    var scroll = getScroll();
    var size = getInnerSize();
    return {
        top: scroll.top + Math.floor(size.h / 2),
        left: scroll.left + Math.floor(size.w / 2),
    };
}
exports.getMiddleCenter = getMiddleCenter;
function isRectHorizontallyVisible(rect) {
    var scroll = getScroll();
    var size = getInnerSize();
    return rect.left >= scroll.left && rect.right <= scroll.left + size.w;
}
exports.isRectHorizontallyVisible = isRectHorizontallyVisible;
function isRectFullyVisible(rect) {
    var scroll = getScroll();
    var size = getInnerSize();
    return rect.top >= scroll.top && rect.bottom <= scroll.top + size.h && rect.left >= scroll.left && rect.right <= scroll.left + size.w;
}
exports.isRectFullyVisible = isRectFullyVisible;
function scrollIntoView(element) {
    if (element && element.scrollIntoView) {
        element.scrollIntoView();
    }
}
exports.scrollIntoView = scrollIntoView;


/***/ }),

/***/ "./src/core/Gigya.Js/app/apiBootstrap.ts":
/*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/apiBootstrap.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var domains_1 = __webpack_require__(/*! ./Utils/domains */ "./src/core/Gigya.Js/app/Utils/domains.ts");
var Uri_1 = __webpack_require__(/*! ./Utils/Uri */ "./src/core/Gigya.Js/app/Utils/Uri.ts");
var defaultStorageDomain = function () { return (window.gigya === null || window.gigya === void 0 ? void 0 : window.gigya.configHostnameOverride) || domains_1.getStorageDomain(); };
var defaultApiDomain = function () { return domains_1.resolveApiDomain(); };
function getSdkConfig(domain, retries) {
    if (domain === void 0) { domain = defaultStorageDomain(); }
    if (retries === void 0) { retries = 0; }
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        var apiKey;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    apiKey = window.gigya.apiKey;
                    return [4 /*yield*/, Uri_1.Uri.parse(domain + "/sdk.config.get")
                            .addToSearch({ apiKey: apiKey, httpStatusCodes: true })
                            .fetch(retries)];
                case 1: return [2 /*return*/, _a.sent()];
            }
        });
    });
}
exports.getSdkConfig = getSdkConfig;
function getSsoContext(ssoToken, domain, retries) {
    if (domain === void 0) { domain = defaultApiDomain(); }
    if (retries === void 0) { retries = 0; }
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        var APIKey, e_1;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    APIKey = window.gigya.apiKey;
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, Uri_1.Uri.parse(domain + "/accounts.sso.getContext")
                            .addToSearch({ APIKey: APIKey, ssoToken: ssoToken, format: 'json' })
                            .fetch(retries)];
                case 2: return [2 /*return*/, _a.sent()];
                case 3:
                    e_1 = _a.sent();
                    return [2 /*return*/, {}];
                case 4: return [2 /*return*/];
            }
        });
    });
}
exports.getSsoContext = getSsoContext;
// Consent status currently return only by api domain because the configuration is set by minor DC( should be save on major always)
// We should change the gigya._.getApiDomain('accounts') to defaultStorageDomain once the config is updated.
function getConsentStatus(config) {
    return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
        var domain, retries, apiKey, url;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    domain = (config === null || config === void 0 ? void 0 : config.domain) || window.gigya._.getApiDomain('accounts');
                    retries = (config === null || config === void 0 ? void 0 : config.retries) || 0;
                    apiKey = window.gigya.apiKey;
                    url = domain + "/sdk.getConsentStatus";
                    return [4 /*yield*/, Uri_1.Uri.parse(url)
                            .addToSearch({ apiKey: apiKey })
                            .fetch(retries)];
                case 1: return [2 /*return*/, _a.sent()];
            }
        });
    });
}
exports.getConsentStatus = getConsentStatus;


/***/ }),

/***/ "./src/core/Gigya.Js/app/cdn.ts":
/*!**************************************!*\
  !*** ./src/core/Gigya.Js/app/cdn.ts ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var selectedCdnHostsIndex = 0;
exports.CDN_HOSTS = {
    http: ['cdn.gigya.com', 'cdn1.gigya.com', 'cdn2.gigya.com', 'cdn3.gigya.com'],
    https: ['cdns.gigya.com', 'cdns1.gigya.com', 'cdns2.gigya.com', 'cdns3.gigya.com'],
};
function getCdnResource(path) {
    var _a, _b, _c, _d;
    // gigya.thisScript may not exist if loaded for ssoOrig.
    var baseDomain = (_b = (_a = window.gigya.thisScript) === null || _a === void 0 ? void 0 : _a.baseDomain) !== null && _b !== void 0 ? _b : '';
    var protocol = (_d = (_c = window.gigya.thisScript) === null || _c === void 0 ? void 0 : _c.protocol) !== null && _d !== void 0 ? _d : 'https';
    // If no base domain or if base domain ends with .gigya.com, use Gigya CDN.
    // Otherwise use the base domain.
    if (!baseDomain || /cdns?\.gigya\.com$/.test(baseDomain)) {
        var selectedSchemaRepository = exports.CDN_HOSTS[protocol];
        if (selectedSchemaRepository.length <= selectedCdnHostsIndex) {
            selectedCdnHostsIndex = 0;
        }
        baseDomain = selectedSchemaRepository[selectedCdnHostsIndex++];
    }
    // Ensure the path starts with "/".
    if (path) {
        if (path.indexOf('/') !== 0) {
            path = '/' + path;
        }
    }
    return protocol + '://' + baseDomain + (path || '');
}
exports.getCdnResource = getCdnResource;
function getImgCdnResource() {
    return getCdnResource('/gs/i/');
}
exports.getImgCdnResource = getImgCdnResource;


/***/ }),

/***/ "./src/core/ServiceProxy/ServiceProxy.ts":
/*!***********************************************!*\
  !*** ./src/core/ServiceProxy/ServiceProxy.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var utils = __webpack_require__(/*! src/core/ServiceProxy/utils */ "./src/core/ServiceProxy/utils.ts");
var ServiceProxy = /** @class */ (function () {
    function ServiceProxy(url, timeout, _idCreator, _iframeCreator, getIframeHost, _win) {
        var _this = this;
        if (timeout === void 0) { timeout = 60000; }
        if (_idCreator === void 0) { _idCreator = utils.generateId; }
        if (_iframeCreator === void 0) { _iframeCreator = utils.createIframe; }
        if (getIframeHost === void 0) { getIframeHost = function () {
            return new gigya.Promise(function (resolve) {
                if (document.body)
                    resolve(document.body);
                else
                    document.addEventListener('DOMContentLoaded', function () { return resolve(document.body); });
            });
        }; }
        if (_win === void 0) { _win = window; }
        this.url = url;
        this.timeout = timeout;
        this._idCreator = _idCreator;
        this._iframeCreator = _iframeCreator;
        this.getIframeHost = getIframeHost;
        this._win = _win;
        this._pendingReqs = [];
        this._mutationObservers = [];
        this.onResponse = function (e) {
            // arrow function to preserve context
            var msg = window.gigya.utils.JSON.parse(e.data);
            if (msg && _this._pendingReqs[msg.id] && _this.validateOrigin(e.origin)) {
                _this._pendingReqs[msg.id](msg);
                delete _this._pendingReqs[msg.id];
            }
        };
    }
    Object.defineProperty(ServiceProxy.prototype, "isInit", {
        get: function () {
            return Boolean(this._iframe);
        },
        enumerable: true,
        configurable: true
    });
    ServiceProxy.prototype.init = function (title) {
        var _this = this;
        if (this.isInit)
            return gigya.Promise.reject('proxy already initialized');
        else
            return new gigya.Promise(function (resolve, reject) {
                _this._iframe = _this._iframeCreator(title);
                _this._iframe.src = _this.url;
                _this.getIframeHost().then(function (host) {
                    _this._iframeHost = host;
                    _this._iframeHost.appendChild(_this._iframe);
                    if (window.gigya.logger.isEnabled) {
                        // observe iframe removal only if gigya.logger is explicitly enabled
                        _this.startObservingIFrameRemoval();
                    }
                    var timeoutId = _this._win.setTimeout(function () { return reject('proxy init timeout'); }, _this.timeout);
                    var onInitResponse = function (e) {
                        if (_this.validateOrigin(e.origin)) {
                            var response = _this._tryParseResponse(e.data);
                            if (response === null || response === void 0 ? void 0 : response.signal) {
                                _this._win.clearTimeout(timeoutId);
                                _this._win.removeEventListener('message', onInitResponse, true);
                                switch (response.signal) {
                                    case 'listening':
                                        _this._win.addEventListener('message', _this.onResponse, true);
                                        resolve(response.res);
                                        break;
                                    case 'error':
                                    case 'stop':
                                        reject(response.res);
                                        break;
                                    default:
                                        reject('unsupported response');
                                        break;
                                }
                            }
                        }
                    };
                    _this._win.addEventListener('message', onInitResponse, true);
                });
            });
    };
    ServiceProxy.prototype.validateOrigin = function (checked) {
        return utils.validateOrigin(this._iframe.src, checked);
    };
    ServiceProxy.prototype.postToIFrame = function (req) {
        var onMsgResponse = this.registerMessage(req);
        var message = typeof req === 'object' ? JSON.stringify(req) : req;
        this._iframe.contentWindow.postMessage(message, this._iframe.src);
        return onMsgResponse;
    };
    ServiceProxy.prototype.registerMessage = function (req, timeout) {
        var _this = this;
        if (timeout === void 0) { timeout = this.timeout; }
        return new gigya.Promise(function (resolve, reject) {
            var timeoutId = _this._win.setTimeout(function () {
                reject('proxy request timeout');
            }, timeout);
            _this._pendingReqs[req.id] = function (e) {
                _this._win.clearTimeout(timeoutId);
                if (e.signal === 'error') {
                    reject(e.res);
                }
                else {
                    resolve(e.res);
                }
            };
        });
    };
    ServiceProxy.prototype.sendRequest = function (methodName, params) {
        return this.postToIFrame({
            id: this._idCreator(),
            methodName: methodName,
            params: params,
        });
    };
    ServiceProxy.prototype.stop = function (forceClose) {
        if (forceClose === void 0) { forceClose = false; }
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var error, e_1;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!this.isInit) return [3 /*break*/, 1];
                        throw 'proxy is not active';
                    case 1:
                        error = void 0;
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, 5, 6]);
                        return [4 /*yield*/, this.postToIFrame({
                                id: this._idCreator(),
                                signal: 'stop',
                            })];
                    case 3: return [2 /*return*/, _a.sent()];
                    case 4:
                        e_1 = _a.sent();
                        error = e_1;
                        throw e_1;
                    case 5:
                        if (!error || forceClose) {
                            if (this._mutationObservers && this._mutationObservers.length) {
                                // disconnect mutation observers, if any.
                                this.stopObservingIFrameRemoval();
                            }
                            this._win.removeEventListener('message', this.onResponse, true);
                            this._iframeHost.removeChild(this._iframe);
                            delete this._iframe;
                        }
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    ServiceProxy.prototype.wrapWith = function (type) {
        var keys;
        if (typeof type === 'function')
            keys = utils.getAllClassMethodsNames(type);
        else if (type instanceof Array)
            keys = type;
        else if (typeof type === 'object')
            keys = Object.keys(type);
        //.concat(getAllClassMethodsNames(Object.getPrototypeOf(type)));
        else
            throw 'unsupported type for wrapper';
        return this.proxyFromKeys(keys);
    };
    ServiceProxy.prototype.proxyFromKeys = function (keys) {
        var _this = this;
        var proxy = {};
        keys.forEach(function (key) { return (proxy[key] = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return _this.sendRequest(key, args);
        }); });
        return proxy;
    };
    ServiceProxy.prototype.startObservingIFrameRemoval = function () {
        var targetNode = this._iframe;
        while (targetNode.parentElement) {
            // observe the iframe and its parents (iframe,body)
            this.addMutationObserver(targetNode);
            targetNode = targetNode.parentElement;
        }
    };
    ServiceProxy.prototype.stopObservingIFrameRemoval = function () {
        this._mutationObservers.forEach(function (observer) {
            if (observer && observer.disconnect) {
                observer.disconnect();
            }
        });
        this._mutationObservers = [];
    };
    ServiceProxy.prototype.addMutationObserver = function (targetNode) {
        var _this = this;
        var mutationCallback = function (mutationsList) {
            for (var _i = 0, mutationsList_1 = mutationsList; _i < mutationsList_1.length; _i++) {
                var mutation = mutationsList_1[_i];
                if (mutation.type == 'childList' && mutation.removedNodes.length) {
                    // A child node has been removed.
                    for (var i = 0; i < mutation.removedNodes.length; i++) {
                        var removedNode = mutation.removedNodes.item(i);
                        if (removedNode === targetNode) {
                            window.gigya.logger.warn("### Gigya's service proxy has been unexpectedly detached from the DOM. " +
                                'This may cause unexpected behavior including a complete loss of service. ###');
                            _this.stopObservingIFrameRemoval(); // can stop observing for iframe removal
                            return; // stop the loop
                        }
                    }
                }
            }
        };
        // Create an observer instance linked to the callback function to execute when mutations are observed
        var observer = new MutationObserver(mutationCallback);
        // Start observing the the target-node's parent element for configured mutations
        observer.observe(targetNode.parentElement, {
            childList: true,
            subtree: false,
        });
        this._mutationObservers.push(observer);
    };
    ServiceProxy.prototype._tryParseResponse = function (dataStr) {
        try {
            return JSON.parse(dataStr);
        }
        catch (e) {
            window.gigya.logger.warn("received message with invalid format", {
                data: dataStr
            });
        }
    };
    return ServiceProxy;
}());
exports.ServiceProxy = ServiceProxy;


/***/ }),

/***/ "./src/core/ServiceProxy/utils.ts":
/*!****************************************!*\
  !*** ./src/core/ServiceProxy/utils.ts ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
exports.getParentUrl = function (win, doc) {
    if (win === void 0) { win = window; }
    if (doc === void 0) { doc = document; }
    return (win.location != win.parent.location ? doc.referrer : doc.location.href);
};
exports.getBodyElement = function (doc) {
    if (doc === void 0) { doc = document; }
    return new gigya.Promise(function (resolve) {
        if (doc.body)
            resolve(doc.body);
        else
            doc.addEventListener('DOMContentLoaded', function () { return resolve(doc.body); });
    });
};
exports.validateOrigin = function (origin, checked) { var _a; return ((_a = origin === null || origin === void 0 ? void 0 : origin.toLowerCase()) === null || _a === void 0 ? void 0 : _a.indexOf(checked === null || checked === void 0 ? void 0 : checked.toLowerCase())) === 0; };
exports.createIframe = function (title, doc) {
    if (title === void 0) { title = 'Gigya Frame'; }
    if (doc === void 0) { doc = document; }
    var iframe = doc.createElement('iframe');
    iframe.style.position = 'absolute';
    iframe.style.height = '0px';
    iframe.style.width = '0px';
    iframe.style.display = 'none';
    iframe.title = title;
    iframe.setAttribute('aria-hidden', 'true');
    return iframe;
};
var _counter = 1;
exports.generateId = function () {
    return String(_counter++);
};
function isClass(type) {
    return !!type.prototype;
}
exports.getAllClassMethodsNames = function (type) {
    var props = [];
    var proto = isClass(type) ? type.prototype : type;
    do {
        try {
            /** initial implementation - using filter **/
            var l = Object.getOwnPropertyNames(proto)
                // .concat(Object.getOwnPropertySymbols(proto).map(s => s.toString()))
                .map(function (s) { return s.toString(); })
                .sort()
                .filter(function (p, i, arr) {
                return typeof proto[p] === 'function' && //only the methods
                    p !== 'constructor' && //not the constructor
                    (i == 0 || p !== arr[i - 1]) && //not overriding in this prototype
                    props.indexOf(p) === -1;
            });
            props = props.concat(l);
        }
        catch (e) {
            /** bug fix implementation - using custom our own filter logic
             case of Array.filter polyfill causing "can not read property '0' of undefined" **/
            var arr = Object.getOwnPropertyNames(proto)
                // .concat(Object.getOwnPropertySymbols(proto).map(s => s.toString()))
                .map(function (s) { return s.toString(); })
                .sort();
            var l = [];
            for (var i = 0; i < arr.length; i++) {
                var p = arr[i];
                if (typeof proto[p] === 'function' && //only the methods
                    p !== 'constructor' && //not the constructor
                    (i == 0 || p !== arr[i - 1]) && //not overriding in this prototype
                    props.indexOf(p) === -1) {
                    //not overridden in a child
                    l.push(p);
                }
            }
            props = props.concat(l);
        }
    } while ((proto = Object.getPrototypeOf(proto)) && //walk-up the prototype chain
        Object.getPrototypeOf(proto) //not the the Object prototype methods (hasOwnProperty, etc...)
    );
    return props;
};


/***/ }),

/***/ "./src/fidm/Gigya.JS.SSO/app/globalProvider.ts":
/*!*****************************************************!*\
  !*** ./src/fidm/Gigya.JS.SSO/app/globalProvider.ts ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

Object.defineProperty(exports, "__esModule", { value: true });
var GlobalProvider = /** @class */ (function () {
    function GlobalProvider() {
    }
    GlobalProvider.prototype.documentLocation = function () {
        return document.location;
    };
    GlobalProvider.prototype.postMessageToParent = function (message, targetOrigin, transfer) {
        window.parent.postMessage(message, targetOrigin, transfer);
    };
    return GlobalProvider;
}());
exports.GlobalProvider = GlobalProvider;
exports.default = new GlobalProvider();


/***/ }),

/***/ "./src/fidm/Gigya.JS.SSO/app/sso.ts":
/*!******************************************!*\
  !*** ./src/fidm/Gigya.JS.SSO/app/sso.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "../node_modules/tslib/tslib.es6.js");
var GSErrors_1 = __webpack_require__(/*! src/core/Gigya.Js/app/GSErrors */ "./src/core/Gigya.Js/app/GSErrors.ts");
var ssoUtils_1 = __webpack_require__(/*! src/fidm/Gigya.JS.SSO/app/ssoUtils */ "./src/fidm/Gigya.JS.SSO/app/ssoUtils.ts");
var Sso = /** @class */ (function () {
    function Sso(_apiKey, _siteApiKey, _ssoSegment, _ssoConfig, _utils, _storage) {
        var _this = this;
        if (_ssoConfig === void 0) { _ssoConfig = {
            validDomains: [],
            logoutURLs: {},
            canaryCookiesNames: {
                isCanary: 'gig_isCanary',
                version: 'gig_canary_ver'
            }
        }; }
        if (_utils === void 0) { _utils = new ssoUtils_1.SsoUtils(); }
        if (_storage === void 0) { _storage = _utils.getCookiesStorage(); }
        this._apiKey = _apiKey;
        this._siteApiKey = _siteApiKey;
        this._ssoSegment = _ssoSegment;
        this._ssoConfig = _ssoConfig;
        this._utils = _utils;
        this._storage = _storage;
        this._checkFragment = function () {
            var fragment = _this._utils.getFragment();
            if (fragment && fragment !== _this._currentFragment) {
                _this._currentFragment = fragment;
                _this._start(_this._utils.deserialize(fragment));
            }
            window.setTimeout(_this._checkFragment, 200);
        };
        this._storageKey = this._createKey('gig_loginToken');
        var canaryCookiesNames = this._ssoConfig.canaryCookiesNames;
        if (typeof canaryCookiesNames !== 'undefined') {
            this._canaryKey = this._createKey(canaryCookiesNames.isCanary);
            this._canaryVerKey = this._createKey(canaryCookiesNames.version);
        }
    }
    Sso.prototype.init = function () {
        // Start repeatedly checking fragment for a new call.
        this._checkFragment();
    };
    Sso.prototype._start = function (params) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var response, _a;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this._mode = params.m;
                        this._requestDomain = params.d; // Receiving domain.
                        this._lid = params.lid;
                        this._callbackID = params.callbackID;
                        this._siteApiKey = params.sAPIKey;
                        // Abort if not in iFrame
                        if (!window.parent) {
                            console.log("gigya sso: invalid use");
                            return [2 /*return*/];
                        }
                        else if (!this._utils.isValidDomain(this._ssoConfig.validDomains, this._requestDomain)) {
                            console.log("gigya sso: " + this._requestDomain + " is not in valid domain: " + this._ssoConfig.validDomains.join(','));
                            return [2 /*return*/];
                        }
                        _a = params.m;
                        switch (_a) {
                            case 'logout': return [3 /*break*/, 1];
                            case 'removeToken': return [3 /*break*/, 3];
                            case 'getToken': return [3 /*break*/, 5];
                            case 'setToken': return [3 /*break*/, 7];
                            case 'setGroupContext': return [3 /*break*/, 9];
                            case 'setLoginTokenExp': return [3 /*break*/, 11];
                            case 'getLoginTokenExp': return [3 /*break*/, 13];
                            case 'checkTokenRenew': return [3 /*break*/, 15];
                            case 'syncCanaryIndication': return [3 /*break*/, 17];
                            case 'setGroupApiDomain': return [3 /*break*/, 19];
                            case 'getGroupApiDomain': return [3 /*break*/, 21];
                        }
                        return [3 /*break*/, 23];
                    case 1: return [4 /*yield*/, this.logout()];
                    case 2:
                        response = _b.sent();
                        return [3 /*break*/, 24];
                    case 3: return [4 /*yield*/, this.removeToken()];
                    case 4:
                        _b.sent();
                        return [3 /*break*/, 24];
                    case 5: return [4 /*yield*/, this.getToken()];
                    case 6:
                        response = _b.sent();
                        return [3 /*break*/, 24];
                    case 7: return [4 /*yield*/, this.setToken(params.lt, String(params.expiration), params.gltexp)];
                    case 8:
                        _b.sent();
                        return [3 /*break*/, 24];
                    case 9: return [4 /*yield*/, this.setGroupContext(params.groupContext)];
                    case 10:
                        _b.sent();
                        return [3 /*break*/, 24];
                    case 11: return [4 /*yield*/, this.setTokenExpiration(params.loginTokenExp)];
                    case 12:
                        response = _b.sent();
                        return [3 /*break*/, 24];
                    case 13: return [4 /*yield*/, this.getTokenExpiration()];
                    case 14:
                        response = _b.sent();
                        return [3 /*break*/, 24];
                    case 15: return [4 /*yield*/, this.checkTokenRenew(params.loginToken)];
                    case 16:
                        response = _b.sent();
                        return [3 /*break*/, 24];
                    case 17: return [4 /*yield*/, this.syncCanaryIndication(params.isCanary, params.canaryVersion)];
                    case 18:
                        response = _b.sent();
                        return [3 /*break*/, 24];
                    case 19: return [4 /*yield*/, this.setGroupApiDomain(params.domain)];
                    case 20:
                        _b.sent();
                        return [3 /*break*/, 24];
                    case 21: return [4 /*yield*/, this.getGroupApiDomain()];
                    case 22:
                        response = _b.sent();
                        return [3 /*break*/, 24];
                    case 23:
                        response = {
                            errorCode: GSErrors_1.GSErrors.INVALID_API_METHOD,
                        };
                        _b.label = 24;
                    case 24:
                        this._utils.sendMessage(response, this._callbackID, this._requestDomain);
                        return [2 /*return*/];
                }
            });
        });
    };
    Sso.prototype.getGroupApiDomain = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var domain;
            return tslib_1.__generator(this, function (_a) {
                domain = this._storage.getItem("apiDomain_" + this._apiKey);
                return [2 /*return*/, {
                        errorCode: GSErrors_1.GSErrors.OK,
                        domain: domain
                    }];
            });
        });
    };
    Sso.prototype.setGroupApiDomain = function (domain) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
                this._storage.setItem("apiDomain_" + this._apiKey, domain);
                return [2 /*return*/];
            });
        });
    };
    Sso.prototype.logout = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var logoutURLs;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        logoutURLs = this._getLogoutURLs();
                        return [4 /*yield*/, this.removeToken()];
                    case 1:
                        _a.sent();
                        this._storage.removeItem(this._storageKey + "_visited");
                        return [2 /*return*/, { logoutURLs: logoutURLs }];
                }
            });
        });
    };
    Sso.prototype.removeToken = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var loginToken;
            return tslib_1.__generator(this, function (_a) {
                loginToken = this._storage.getItem(this._storageKey);
                if (loginToken) {
                    this._markRevokedLoginToken(loginToken);
                    this._storage.removeItem(this._storageKey);
                }
                this._storage.removeItem(this._storageKey + "_exp");
                this._storage.removeItem(this._storageKey + "_gltexp");
                this._storage.removeItem(this._storageKey + "_session");
                this._storage.removeItem(this._storageKey + "_context");
                return [2 /*return*/];
            });
        });
    };
    Sso.prototype.getToken = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var errorCode, lt, storageExp, exp, twoYearFromNow, gltexp, groupContext, inSession, response;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        errorCode = 0;
                        lt = this._storage.getItem(this._storageKey);
                        storageExp = this._storage.getItem(this._storageKey + "_exp");
                        if (storageExp === 'undefined') {
                            exp = Date.now() - 1000;
                        }
                        else {
                            exp = Number(storageExp);
                            twoYearFromNow = Date.now() + (1000 * 60 * 60 * 24 * 365 * 2);
                            if (exp > twoYearFromNow) {
                                exp = Date.now() - 1000;
                            }
                        }
                        gltexp = this._storage.getItem(this._storageKey + "_gltexp");
                        groupContext = this._storage.getItem(this._storageKey + "_context");
                        inSession = gltexp || this._storage.getItem(this._storageKey + "_session") === '1';
                        if (!(!isNaN(exp) && ((exp === 0 && !inSession) || (exp > 0 && new Date().getTime() > exp)))) return [3 /*break*/, 2];
                        // expired!
                        return [4 /*yield*/, this.removeToken()];
                    case 1:
                        // expired!
                        _a.sent();
                        lt = undefined;
                        _a.label = 2;
                    case 2:
                        if (!lt) {
                            // no user
                            return [2 /*return*/, {
                                    errorCode: GSErrors_1.GSErrors.UNAUTHORIZED_USER,
                                }];
                        }
                        else {
                            this._markSiteVisited();
                        }
                        response = {
                            errorCode: errorCode,
                            login_token: lt,
                            expires_in: exp === 0 ? 0 : Math.round((exp - new Date().getTime()) / 1000),
                        };
                        if (groupContext) {
                            response.groupContext = groupContext;
                        }
                        if (exp === 0 && gltexp) {
                            response.gltexp = gltexp;
                        }
                        return [2 /*return*/, response];
                }
            });
        });
    };
    Sso.prototype.setToken = function (lt, expiration, gltexp) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            var oldToken, expiresIn, expiresInMs;
            return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        lt = lt.split('|')[0];
                        oldToken = (_a = this._storage.getItem(this._storageKey)) === null || _a === void 0 ? void 0 : _a.split('|')[0];
                        if (lt !== oldToken) {
                            this._markRevokedLoginToken(oldToken);
                        }
                        if (lt) {
                            this._storage.setItem(this._storageKey, lt);
                        }
                        if (expiration) {
                            expiresIn = typeof expiration === 'string' && expiration ? Number(expiration) : expiration;
                            if (expiresIn === 0) {
                                // Session cookie or dynamic session cookie.
                                // Either way, flag the expiration as 0.
                                expiration = 0;
                            }
                            else {
                                expiresInMs = void 0;
                                if (!expiresIn || expiresIn === -2) {
                                    expiresInMs = 1000 * 60 * 60 * 24 * 365;
                                }
                                else {
                                    expiresInMs = Number(expiresIn) * 1000;
                                }
                                // Convert expires in milliseconds to an a timestamp (also milliseconds).
                                expiresIn = Date.now() + expiresInMs;
                            }
                            this._storage.setItem(this._storageKey + "_exp", "" + expiresIn);
                            if (expiration === 0) {
                                this._storage.setItem(this._storageKey + "_session", '1', 0);
                            }
                        }
                        if (!(gltexp !== undefined)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.setTokenExpiration(gltexp)];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2:
                        if (!lt) return [3 /*break*/, 4];
                        return [4 /*yield*/, this._markSiteVisited()];
                    case 3:
                        _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    Sso.prototype.setGroupContext = function (groupContext) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                this._storage.setItem(this._storageKey + "_context", JSON.stringify(groupContext));
                return [2 /*return*/];
            });
        });
    };
    Sso.prototype.setTokenExpiration = function (gltexp) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var _a, _b, _c;
            return tslib_1.__generator(this, function (_d) {
                switch (_d.label) {
                    case 0:
                        if (!!this._utils.isValidGltExp(gltexp)) return [3 /*break*/, 1];
                        this._storage.removeItem(this._storageKey + "_gltexp");
                        gltexp = null;
                        return [3 /*break*/, 3];
                    case 1:
                        _b = (_a = this._utils).getMaxGltExp;
                        _c = [gltexp];
                        return [4 /*yield*/, this.getTokenExpiration()];
                    case 2:
                        gltexp = _b.apply(_a, _c.concat([(_d.sent()).gltexp]));
                        this._storage.setItem(this._storageKey + "_gltexp", gltexp);
                        this._storage.removeItem(this._storageKey + "_exp");
                        _d.label = 3;
                    case 3: return [2 /*return*/, {
                            errorCode: GSErrors_1.GSErrors.OK,
                            gltexp: gltexp,
                        }];
                }
            });
        });
    };
    Sso.prototype.getTokenExpiration = function () {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var lt;
            return tslib_1.__generator(this, function (_a) {
                lt = this._storage.getItem(this._storageKey);
                if (!lt) {
                    return [2 /*return*/, {
                            errorCode: GSErrors_1.GSErrors.UNAUTHORIZED_USER,
                        }];
                }
                return [2 /*return*/, {
                        errorCode: GSErrors_1.GSErrors.OK,
                        gltexp: this._storage.getItem(this._storageKey + "_gltexp"),
                    }];
            });
        });
    };
    Sso.prototype.checkTokenRenew = function (loginToken) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var groupToken, invalidTokens, isInvalid;
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.getToken()];
                    case 1:
                        groupToken = _a.sent();
                        invalidTokens = this._storage.getItem(this._storageKey + "_revoked_tokens") || '';
                        isInvalid = invalidTokens.indexOf(loginToken) >= 0;
                        if (!!isInvalid) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.setToken(loginToken)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/, { errorCode: GSErrors_1.GSErrors.OK }];
                    case 3:
                        if (groupToken.errorCode === GSErrors_1.GSErrors.OK && invalidTokens.indexOf(groupToken.login_token) < 0) {
                            // just changing the error code - but returning the same session info of the group
                            groupToken.errorCode = GSErrors_1.GSErrors.TOKEN_HAS_RENEWED;
                            return [2 /*return*/, groupToken];
                        }
                        else {
                            return [2 /*return*/, { errorCode: GSErrors_1.GSErrors.INVALID_TOKEN }];
                        }
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    Sso.prototype.syncCanaryIndication = function (isCanary, versionSignature) {
        return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var SSOIsCanary, SSOVersionSignature, response, siteCanaryVersion, SSOCanaryVersion;
            return tslib_1.__generator(this, function (_a) {
                if (!this._canaryKey || !this._canaryVerKey) {
                    return [2 /*return*/, { errorCode: GSErrors_1.GSErrors.INVALID_ENVIRONMENT_CONFIG }];
                }
                SSOIsCanary = this._storage.getItem(this._canaryKey);
                SSOVersionSignature = this._storage.getItem(this._canaryVerKey);
                response = {
                    errorCode: GSErrors_1.GSErrors.OK,
                    isCanary: isCanary,
                    canaryVersion: versionSignature,
                };
                if (!this._utils.validations().allDefinedOrAllUndefined(SSOIsCanary, SSOVersionSignature)) {
                    // not legal
                    response.errorCode = GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE;
                    return [2 /*return*/, response];
                }
                if (!this._utils.validations().allDefinedOrAllUndefined(isCanary, versionSignature)) {
                    // not legal
                    return [2 /*return*/, {
                            errorCode: GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE,
                            isCanary: SSOIsCanary,
                            canaryVersion: SSOVersionSignature,
                        }];
                }
                siteCanaryVersion = this._parseCanaryVersionSignature(versionSignature);
                SSOCanaryVersion = this._parseCanaryVersionSignature(SSOVersionSignature);
                if (siteCanaryVersion.timestamp > SSOCanaryVersion.timestamp) {
                    this._storage.setItem(this._canaryKey, isCanary);
                    this._storage.setItem(this._canaryVerKey, versionSignature);
                }
                else {
                    response.isCanary = SSOIsCanary;
                    response.canaryVersion = SSOVersionSignature;
                }
                return [2 /*return*/, response];
            });
        });
    };
    Sso.prototype._markSiteVisited = function () {
        var visitedStorageKey = this._storageKey + "_visited";
        var visited = this._storage.getItem(visitedStorageKey) || '';
        if (visited.indexOf(this._siteApiKey) === -1) {
            visited += ',' + this._siteApiKey;
        }
        this._storage.setItem(visitedStorageKey, visited);
    };
    Sso.prototype._markRevokedLoginToken = function (loginToken) {
        if (!loginToken)
            return;
        var invalidTokensStorageKey = this._storageKey + "_revoked_tokens";
        var invalidTokens = this._storage.getItem(invalidTokensStorageKey) || '';
        var arrInvalidTokens = invalidTokens.split(',');
        if (arrInvalidTokens.length > 3) {
            //delete one old revoked token
            arrInvalidTokens.splice(1, 1); // first element is always empty
        }
        invalidTokens = arrInvalidTokens.join(',');
        if (invalidTokens.indexOf(loginToken) < 0) {
            invalidTokens += ',' + loginToken;
        }
        this._storage.setItem(invalidTokensStorageKey, invalidTokens);
    };
    Sso.prototype._getLogoutURLs = function () {
        var visited = this._storage.getItem(this._storageKey + "_visited");
        if (!visited) {
            return '';
        }
        var arLogoutURLs = [];
        for (var siteKey in this._ssoConfig.logoutURLs) {
            if (visited.indexOf(',' + siteKey) !== -1) {
                arLogoutURLs.push(this._ssoConfig.logoutURLs[siteKey]);
            }
        }
        return arLogoutURLs.join(',');
    };
    Sso.prototype._createKey = function (name) {
        return name + "_" + this._apiKey + (this._ssoSegment ? "_" + this._ssoSegment : '');
    };
    Sso.prototype._parseCanaryVersionSignature = function (canaryVersionSig) {
        var defaultData = { build: 0, probability: 0, timestamp: -1 };
        if (!canaryVersionSig)
            return defaultData;
        var parts = canaryVersionSig.split('-');
        if (parts.length < 3) {
            return defaultData;
        }
        return {
            build: Number(parts[0]),
            probability: Number(parts[1]),
            timestamp: Number(parts[2]),
        };
    };
    return Sso;
}());
exports.Sso = Sso;


/***/ }),

/***/ "./src/fidm/Gigya.JS.SSO/app/ssoUtils.ts":
/*!***********************************************!*\
  !*** ./src/fidm/Gigya.JS.SSO/app/ssoUtils.ts ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

Object.defineProperty(exports, "__esModule", { value: true });
var Uri_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/Uri */ "./src/core/Gigya.Js/app/Utils/Uri.ts");
var validationUtils = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/validation */ "./src/core/Gigya.Js/app/Utils/validation.ts");
var globalProvider_1 = __webpack_require__(/*! ./globalProvider */ "./src/fidm/Gigya.JS.SSO/app/globalProvider.ts");
var localStorage_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/localStorage */ "./src/core/Gigya.Js/app/Utils/localStorage.ts");
var keyValue_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/keyValue */ "./src/core/Gigya.Js/app/Utils/keyValue.ts");
var gltexp_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/gltexp */ "./src/core/Gigya.Js/app/Utils/gltexp.ts");
var URL_1 = __webpack_require__(/*! src/core/Gigya.Js/app/Utils/URL */ "./src/core/Gigya.Js/app/Utils/URL.ts");
var defaultValidDomains = ['gigya-api.com', 'gigya-api.cn', 'gigya.com', 'my.gigya-ext.com', 'localhost'];
var SsoUtils = /** @class */ (function () {
    function SsoUtils(_global, _defaultValidDomains) {
        if (_global === void 0) { _global = globalProvider_1.default; }
        if (_defaultValidDomains === void 0) { _defaultValidDomains = defaultValidDomains; }
        this._global = _global;
        this._defaultValidDomains = _defaultValidDomains;
    }
    SsoUtils.prototype.getPageUrl = function () {
        return this._global.documentLocation().toString();
    };
    SsoUtils.prototype.isValidDomain = function (validDomains, candidate) {
        var domain = Uri_1.Uri.parse(candidate).domain;
        var arValidDomains = validDomains.concat(this._defaultValidDomains);
        for (var i = 0; i < arValidDomains.length; i++) {
            var validDomain = arValidDomains[i].replace('*', '').split(':')[0];
            var indexOfValidDomain = domain.indexOf(validDomain);
            if (indexOfValidDomain >= 0 &&
                indexOfValidDomain === domain.length - validDomain.length &&
                (indexOfValidDomain === 0 || domain.charAt(indexOfValidDomain - 1) === '.' || domain.charAt(indexOfValidDomain - 1) === '/')) {
                return true;
            }
        }
        return false;
    };
    SsoUtils.prototype.sendMessage = function (res, callbackID, requestDomain) {
        var strMessage = '';
        for (var p in res) {
            if (res[p] != null) {
                strMessage += escape(p + '=' + encodeURIComponent(res[p]) + '&');
            }
        }
        this._global.postMessageToParent(callbackID + '=' + strMessage, requestDomain);
    };
    SsoUtils.prototype.isValidGltExp = function (gltExp) {
        return gltexp_1.isValid(gltExp);
    };
    SsoUtils.prototype.getMaxGltExp = function (gltExp1, gltExp2) {
        return gltexp_1.getMax(gltExp1, gltExp2);
    };
    SsoUtils.prototype.decodeUrl = function (value) {
        return URL_1.URLDecodeRecursive(value);
    };
    SsoUtils.prototype.deserialize = function (value) {
        return keyValue_1.deserialize(value);
    };
    SsoUtils.prototype.getCookiesStorage = function () {
        return localStorage_1.initializeAdapter(localStorage_1.CookieStorageAdapter);
    };
    SsoUtils.prototype.validations = function () {
        return validationUtils;
    };
    SsoUtils.prototype.UriFactory = function (url, isAbsolute) {
        if (isAbsolute === void 0) { isAbsolute = true; }
        return new Uri_1.Uri(url, isAbsolute);
    };
    SsoUtils.prototype.getFragment = function () {
        var pageURL = this.getPageUrl();
        if (pageURL.indexOf('#') !== -1) {
            return pageURL.split('#')[1];
        }
        return null;
    };
    ;
    return SsoUtils;
}());
exports.SsoUtils = SsoUtils;


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2guaXNlbXB0eS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL2xvZGFzaC5tZXJnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4uL25vZGVfbW9kdWxlcy93ZWJwYWNrL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQXBpQ291bnRkb3duSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQXBpTGlua0hlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VBdXRoTWV0aG9kV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VPdHBBdXRoTWV0aG9kV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNjcmVlbldpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTZXJ2ZXJXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlVXBsb2FkV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0JlaGF2aW9yVHJhY2tpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9DYXJkTGlzdEZvcm1XaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Db25zZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ29uc2VudERhdGEudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Db25zdGFudHMvbGluay1hY2NvdW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0NvbnN0YW50cy9tYWdpYy1saW5rLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRGF0YVByb3ZpZGVycy9Gb3JtRGF0YVByb3ZpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRGF0YVByb3ZpZGVycy9MaW5rQWNjb3VudHNEYXRhUHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9EYXRhUHJvdmlkZXJzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRGVidWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvckRpc3BsYXlFbGVtZW50LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JzLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvQXV0aE1ldGhvZHNGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvQmFzZUxvZ2luRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0NoYW5nZU9yZ2FuaXphdGlvbkNvbnRleHRGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvQ3VzdG9tRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0RldmljZUNvZGVGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvRW1haWxDb2RlQXV0aE1ldGhvZEZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9MaW5rQWNjb3VudHNGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvTG9naW5Gb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvTWFnaWNMaW5rQXV0aE1ldGhvZEZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9OZXdzbGV0dGVyU2lnbnVwRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL09uZUFjY291bnRTdWJzY3JpcHRpb25Gb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3JnYW5pemF0aW9uUmVnaXN0cmF0aW9uRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL090cExvZ2luRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL090cFNlbmRDb2RlRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL090cFVwZGF0ZUZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9PdHBWZXJpZmljYXRpb25CYXNlRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL090cFZlcmlmeUZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9QYXNzd29yZEF1dGhNZXRob2RGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUGFzc3dvcmRsZXNzRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Bhc3N3b3JkbGVzc0xvZ2luRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Bhc3N3b3JkbGVzc1JlZ2lzdGVyRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Byb2ZpbGVGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUHJvZ3Jlc3Npb25Gb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUHVzaEF1dGhNZXRob2RGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUmVhdXRoZW50aWNhdGlvbkZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9SZWdpc3RlckZvcm0udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9SZXNlbmRWZXJpZmljYXRpb25Db2RlRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Jlc2V0UGFzc3dvcmRGb3JtLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvVGZhRm9ybS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvR3JvdXBWYXJpYW50UHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9BcGlIYW5kbGVyL0Jhc2VBcGlIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQXBpSGFuZGxlci9TZW5kTWFnaWNMaW5rSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0FwaUhhbmRsZXIvU2VuZE90cENvZGVIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQXBpSGFuZGxlci9TZW5kVmVyaWZpY2F0aW9uSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0FwaUhhbmRsZXIvU3RhbmRhcmRIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQXBpSGFuZGxlci9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0NhcHRjaGFIYW5kbGVyL0Jhc2VDYXB0Y2hhSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0NhcHRjaGFIYW5kbGVyL0Z1bkNhcHRjaGFIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQ2FwdGNoYUhhbmRsZXIvR29vZ2xlQ2FwdGNoYUhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9BZGRyZXNzSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvQnV0dG9uSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvQ2hlY2tib3hJbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Db21tdW5pY2F0aW9uQ2hlY2tib3hJbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9FbWFpbElucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Mb2dpbklkSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUGFzc3dvcmRJbnB1dHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUGhvbmVOdW1iZXJJbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9SYWRpb0lucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1JlbWVtZWJlcklucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1JldHlwZVBhc3N3b3JkSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvU2VydmVyRm9ybUlucHV0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvTG9naW5Nb2Rlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjaGVtYVR5cGVDb252ZXJ0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5Db25zdHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5PcHRpb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0RGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFJlc291cmNlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1N3aXRjaFNjcmVlbldpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvQXBpTGlua1dpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvQXJyYXlNYW5hZ2VyV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9CaW5kaW5nV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9DYXB0Y2hhV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9DYXJkTGlzdEl0ZW1XaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NhcmRMaXN0V2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Db21tdW5pY2F0aW9uV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Db25zZW50V2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Db250YWluZXJXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0VtYWlsT3RwQXV0aE1ldGhvZFdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvSW1hZ2VXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0xvZ0luQXZhaWxhYmlsaXR5V2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9NeVBob3RvV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Pcmdhbml6YXRpb25Db250ZXh0V2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QYXNza2V5QmFzZVdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUGFzc2tleUxvZ2luV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QYXNza2V5TWFuYWdlci9QYXNza2V5Q2FyZFdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUGFzc2tleU1hbmFnZXIvUGFzc2tleU1hbmFnZXJXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3NrZXlSZWdpc3RlcldpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUGFzc3dvcmRBdXRoTWV0aG9kV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QYXNzd29yZFN0cmVuZ3RoV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QaG9uZUF1dGhNZXRob2RXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bob25lTnVtYmVyV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QaG90b1VwbG9hZFdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUHJvZmlsZVBob3RvV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9SZXF1aXJlZERpc3BsYXlXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1NlY3JldFF1ZXN0aW9uV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Tb2NpYWxMb2dpbldpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvU3Vic2NyaXB0aW9uV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9URkEvdmVyaWZpY2F0aW9uL1RGQVZlcmlmaWNhdGlvbkJhc2VJdGVtV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9URkEvdmVyaWZpY2F0aW9uL1RGQVZlcmlmaWNhdGlvbkJhc2VMaXN0V2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9URkEvdmVyaWZpY2F0aW9uL1RGQVZlcmlmaWNhdGlvbldpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVEZBL3ZlcmlmaWNhdGlvbi9lbWFpbC9URkFWZXJpZmljYXRpb25FbWFpbEl0ZW1XaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RGQS92ZXJpZmljYXRpb24vZW1haWwvVEZBVmVyaWZpY2F0aW9uRW1haWxMaXN0V2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9URkEvdmVyaWZpY2F0aW9uL3Bob25lL1RGQVZlcmlmaWNhdGlvblBob25lSXRlbVdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVEZBL3ZlcmlmaWNhdGlvbi9waG9uZS9URkFWZXJpZmljYXRpb25QaG9uZUxpc3RXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RmYU1hbmFnZW1lbnQvVGZhTWFuYWdlbWVudEl0ZW1CYXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFNYW5hZ2VtZW50L1RmYU1hbmFnZW1lbnRMaXN0QmFzZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVGZhTWFuYWdlbWVudC9UZmFNYW5hZ2VtZW50V2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFNYW5hZ2VtZW50L2VtYWlsL1RmYU1hbmFnZW1lbnRFbWFpbEl0ZW1XaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RmYU1hbmFnZW1lbnQvZW1haWwvVGZhTWFuYWdlbWVudEVtYWlsTGlzdFdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVGZhTWFuYWdlbWVudC9waG9uZS9UZmFNYW5hZ2VtZW50UGhvbmVJdGVtV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFNYW5hZ2VtZW50L3Bob25lL1RmYU1hbmFnZW1lbnRQaG9uZUxpc3RXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RmYVJlZ2lzdHJhdGlvbi9CYXNlVGZhUmVnaXN0cmF0aW9uV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFSZWdpc3RyYXRpb24vVGZhUmVnaXN0cmF0aW9uV2lkZ2V0LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFSZWdpc3RyYXRpb24vcGhvbmUvVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RmYVdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVHJhbnNsYXRlZFdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9lbGVtZW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL2Vycm9yQmluZGluZ0hlbHBlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdGVtcGxhdGVzL2NvbW11bmljYXRpb25DaGVja2JveC5odG1sIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdGVtcGxhdGVzL2NvbnNlbnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3RlbXBsYXRlcy9pbmxpbmVkUGFzc3dvcmRTdHJlbmd0aC5odG1sIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdGVtcGxhdGVzL3Bhc3N3b3JkU3RyZW5ndGguaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3RlbXBsYXRlcy9wYXNzd29yZFN0cmVuZ3RoX21pbmltdW1SZXF1aXJlbWVudHMuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3RlbXBsYXRlcy9wYXNzd29yZFN0cmVuZ3RoX3N0cmVuZ3RoTWV0ZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3RlbXBsYXRlcy9waG90b1VwbG9hZF9mb3JtLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC90ZW1wbGF0ZXMvcGhvdG9VcGxvYWRfdWkuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3RlbXBsYXRlcy9zY3JlZW5TZXQuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3RlbXBsYXRlcy9zY3JlZW5TZXRfZGlhbG9nLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC90eXBlYWhlYWQvZ2VvLWxvY2F0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdHlwZWFoZWFkL3R5cGVhaGVhZC1pbnB1dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMvZXJyb3JFdmVudFV0aWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscy9lcnJvck1lc3NhZ2VVdGlsLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMvZXhwYW5kYWJsZVdpZGdldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3Zpc2JsZVdoZW5IZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpzLlBsdWdpbi5UZmEvYXBwL2hlbHBlcnMvVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy5BZGFwdGVycy5XZWIvYXBwL1Nzb1NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9Ub2tlblN0b3JlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvQ2xvc2VSZWFzb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvUGx1Z2luU3R5bGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvVXRpbHMvZ2VuZXJhbC9saW5rQWNjb3VudHNIZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9VdGlscy9nZW5lcmFsL3Bob25lTnVtYmVyVXRpbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvQmFzZU9iamVjdC9JQmFzZU9iamVjdENvbmZpZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvRXZlbnRzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvR2xvYmFsRXZlbnRzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9JbnRlcm5hbEZsb3dzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9MZWdhY3lMb2dnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvT2F1dGgvT2F1dGhTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9QYXNza2V5L0NyZWRlbnRpYWxTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9QYXNza2V5L1Bhc3NrZXlTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9QYXNza2V5L3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9GbGFnU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvU2VydmljZXMvU2Vzc2lvblNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1NlcnZpY2VzL1NpdGVEYXRhLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvVGZhRXZlbnRTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvVGZhR2lneWFBc3NlcnRpb25TZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvVGZhTWFuYWdlbWVudFNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9hcGlzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL0RPTS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvSlNPTi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvVVJMLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9VcmkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2FycmF5LnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9jb29raWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2RvbWFpbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2V2ZW50RGlzcGF0Y2hlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvZnVuY3Rpb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9nbG9iYWwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2dsdGV4cC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMva2V5VmFsdWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2xvY2FsU3RvcmFnZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvb2JqZWN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9wcm9taXNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9xdWV1ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvc2NyaXB0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9zZXNzaW9uQ2FjaGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3N0cmluZ1V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy90ZW1wbGF0ZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3RvZ2dsZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3ZpZXdwb3J0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9hcGlCb290c3RyYXAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL2Nkbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9TZXJ2aWNlUHJveHkvU2VydmljZVByb3h5LnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL1NlcnZpY2VQcm94eS91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlkbS9HaWd5YS5KUy5TU08vYXBwL2dsb2JhbFByb3ZpZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9maWRtL0dpZ3lhLkpTLlNTTy9hcHAvc3NvLnRzIiwid2VicGFjazovLy8uL3NyYy9maWRtL0dpZ3lhLkpTLlNTTy9hcHAvc3NvVXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMENBQTBDLGdDQUFnQztRQUMxRTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLHdEQUF3RCxrQkFBa0I7UUFDMUU7UUFDQSxpREFBaUQsY0FBYztRQUMvRDs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EseUNBQXlDLGlDQUFpQztRQUMxRSxnSEFBZ0gsbUJBQW1CLEVBQUU7UUFDckk7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwyQkFBMkIsMEJBQTBCLEVBQUU7UUFDdkQsaUNBQWlDLGVBQWU7UUFDaEQ7UUFDQTtRQUNBOztRQUVBO1FBQ0Esc0RBQXNELCtEQUErRDs7UUFFckg7UUFDQTs7O1FBR0E7UUFDQTs7Ozs7Ozs7Ozs7O0FDbEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7O0FBRXBDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsS0FBMEI7O0FBRTVDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsYUFBYSxFQUFFO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxTQUFTO0FBQ3BCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlEQUFpRCxlQUFlOztBQUVoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixhQUFhLEVBQUU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGtCQUFrQixFQUFFO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsRUFBRTtBQUNiLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsRUFBRTtBQUNiLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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QUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQSxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxFQUFFO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxFQUFFO0FBQ2IsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsRUFBRTtBQUNmO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxFQUFFO0FBQ2IsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsTUFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLEVBQUU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLEVBQUU7QUFDYixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLEVBQUU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLEVBQUU7QUFDYixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsV0FBVyxRQUFRO0FBQ25CLGFBQWEsTUFBTTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLEVBQUU7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsRUFBRTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakIsV0FBVyxFQUFFO0FBQ2IsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsRUFBRTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixhQUFhLE9BQU87QUFDcEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsRUFBRTtBQUNiLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsU0FBUztBQUNwQixXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsRUFBRTtBQUNiLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsRUFBRTtBQUNiLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JC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LFNBQVMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUV2RCxTQUFTLEdBQUcsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxpQkFBaUI7SUFDN0MsS0FBSyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDO0lBQy9CLEVBQUUsR0FBRyxJQUFJLENBQUM7SUFDVixFQUFFLEdBQUcsVUFBVSxDQUFDO0lBQ2hCLEVBQUUsR0FBRyxVQUFVLENBQUM7SUFDaEIsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUVOLE9BQU8sQ0FBQyxHQUFHLEtBQUssRUFBRTtRQUNkLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDcEosRUFBRSxDQUFDLENBQUM7UUFFSixFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUM7UUFDL0UsRUFBRSxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQzlCLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQztRQUUvRSxFQUFFLElBQUksRUFBRSxDQUFDO1FBQ1QsRUFBRSxHQUFHLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQzlCLEdBQUcsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQztRQUM5RSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQzdFO0lBRUQsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUVQLFFBQVEsU0FBUyxFQUFFO1FBQ2YsS0FBSyxDQUFDO1lBQ0YsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQy9DLEtBQUssQ0FBQztZQUNGLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM5QyxLQUFLLENBQUM7WUFDRixFQUFFLElBQUksR0FBRyxDQUFDLFVBQVUsQ0FB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TSw0QkFBUyxHQUFoQixVQUFpQixLQUFhO1FBQzFCLE9BQU8sd0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVNLDhCQUFXLEdBQWxCLFVBQW1CLEtBQWE7UUFDNUIsT0FBTyxzQkFBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFTSxvQ0FBaUIsR0FBeEI7UUFDSSxPQUFPLGdDQUFpQixDQUFDLG1DQUFvQixDQUFDLENBQUM7SUFDbkQsQ0FBQztJQUVNLDhCQUFXLEdBQWxCO1FBQ0ksT0FBTyxlQUFlLENBQUM7SUFDM0IsQ0FBQztJQUVNLDZCQUFVLEdBQWpCLFVBQWtCLEdBQVcsRUFBRSxVQUFpQjtRQUFqQiw4Q0FBaUI7UUFDNUMsT0FBTyxJQUFJLFNBQUcsQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVNLDhCQUFXLEdBQWxCO1FBQ0ksSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBRWxDLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtZQUM3QixPQUFPLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDaEM7UUFFQSxPQUFPLElBQUksQ0FBQztJQUNqQixDQUFDO0lBQUEsQ0FBQztJQUNOLGVBQUM7QUFBRCxDQUFDO0FBeEVZLDRCQUFRIiwiZmlsZSI6ImdpZ3lhLnNlcnZpY2VzLmFjY291bnRzLnBsdWdpbnMuc2NyZWVuU2V0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL2luZGV4LnRzXCIpO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcHJvbWlzZVRhZyA9ICdbb2JqZWN0IFByb21pc2VdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcbiAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLlxuICovXG52YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgLiAqL1xudmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAuICovXG52YXIgZnJlZU1vZHVsZSA9IGZyZWVFeHBvcnRzICYmIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXG4vKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgLiAqL1xudmFyIG1vZHVsZUV4cG9ydHMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHM7XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldFZhbHVlKG9iamVjdCwga2V5KSB7XG4gIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QgaW4gSUUgPCA5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNIb3N0T2JqZWN0KHZhbHVlKSB7XG4gIC8vIE1hbnkgaG9zdCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIHRoYXQgY2FuIGNvZXJjZSB0byBzdHJpbmdzXG4gIC8vIGRlc3BpdGUgaGF2aW5nIGltcHJvcGVybHkgZGVmaW5lZCBgdG9TdHJpbmdgIG1ldGhvZHMuXG4gIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gISEodmFsdWUgKyAnJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB1bmFyeSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIGZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgICBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvdmVycmVhY2hpbmcgY29yZS1qcyBzaGltcy4gKi9cbnZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtZXRob2RzIG1hc3F1ZXJhZGluZyBhcyBuYXRpdmUuICovXG52YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTtcbiAgcmV0dXJuIHVpZCA/ICgnU3ltYm9sKHNyYylfMS4nICsgdWlkKSA6ICcnO1xufSgpKTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIEJ1ZmZlciA9IG1vZHVsZUV4cG9ydHMgPyByb290LkJ1ZmZlciA6IHVuZGVmaW5lZCxcbiAgICBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlSXNCdWZmZXIgPSBCdWZmZXIgPyBCdWZmZXIuaXNCdWZmZXIgOiB1bmRlZmluZWQsXG4gICAgbmF0aXZlS2V5cyA9IG92ZXJBcmcoT2JqZWN0LmtleXMsIE9iamVjdCk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBEYXRhVmlldyA9IGdldE5hdGl2ZShyb290LCAnRGF0YVZpZXcnKSxcbiAgICBNYXAgPSBnZXROYXRpdmUocm9vdCwgJ01hcCcpLFxuICAgIFByb21pc2UgPSBnZXROYXRpdmUocm9vdCwgJ1Byb21pc2UnKSxcbiAgICBTZXQgPSBnZXROYXRpdmUocm9vdCwgJ1NldCcpLFxuICAgIFdlYWtNYXAgPSBnZXROYXRpdmUocm9vdCwgJ1dlYWtNYXAnKTtcblxuLyoqIERldGVjdCBpZiBwcm9wZXJ0aWVzIHNoYWRvd2luZyB0aG9zZSBvbiBgT2JqZWN0LnByb3RvdHlwZWAgYXJlIG5vbi1lbnVtZXJhYmxlLiAqL1xudmFyIG5vbkVudW1TaGFkb3dzID0gIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoeyAndmFsdWVPZic6IDEgfSwgJ3ZhbHVlT2YnKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG1hcHMsIHNldHMsIGFuZCB3ZWFrbWFwcy4gKi9cbnZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG4gICAgbWFwQ3RvclN0cmluZyA9IHRvU291cmNlKE1hcCksXG4gICAgcHJvbWlzZUN0b3JTdHJpbmcgPSB0b1NvdXJjZShQcm9taXNlKSxcbiAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcbiAgICB3ZWFrTWFwQ3RvclN0cmluZyA9IHRvU291cmNlKFdlYWtNYXApO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXRUYWcodmFsdWUpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTmF0aXZlYCB3aXRob3V0IGJhZCBzaGltIGNoZWNrcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbixcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc05hdGl2ZSh2YWx1ZSkge1xuICBpZiAoIWlzT2JqZWN0KHZhbHVlKSB8fCBpc01hc2tlZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHBhdHRlcm4gPSAoaXNGdW5jdGlvbih2YWx1ZSkgfHwgaXNIb3N0T2JqZWN0KHZhbHVlKSkgPyByZUlzTmF0aXZlIDogcmVJc0hvc3RDdG9yO1xuICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShvYmplY3QsIGtleSk7XG4gIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbnZhciBnZXRUYWcgPSBiYXNlR2V0VGFnO1xuXG4vLyBGYWxsYmFjayBmb3IgZGF0YSB2aWV3cywgbWFwcywgc2V0cywgYW5kIHdlYWsgbWFwcyBpbiBJRSAxMSxcbi8vIGZvciBkYXRhIHZpZXdzIGluIEVkZ2UgPCAxNCwgYW5kIHByb21pc2VzIGluIE5vZGUuanMuXG5pZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG4gICAgKE1hcCAmJiBnZXRUYWcobmV3IE1hcCkgIT0gbWFwVGFnKSB8fFxuICAgIChQcm9taXNlICYmIGdldFRhZyhQcm9taXNlLnJlc29sdmUoKSkgIT0gcHJvbWlzZVRhZykgfHxcbiAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG4gICAgKFdlYWtNYXAgJiYgZ2V0VGFnKG5ldyBXZWFrTWFwKSAhPSB3ZWFrTWFwVGFnKSkge1xuICBnZXRUYWcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZXN1bHQgPSBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSxcbiAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWcgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3RvclN0cmluZyA9IEN0b3IgPyB0b1NvdXJjZShDdG9yKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChjdG9yU3RyaW5nKSB7XG4gICAgICBzd2l0Y2ggKGN0b3JTdHJpbmcpIHtcbiAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcbiAgICAgICAgY2FzZSBtYXBDdG9yU3RyaW5nOiByZXR1cm4gbWFwVGFnO1xuICAgICAgICBjYXNlIHByb21pc2VDdG9yU3RyaW5nOiByZXR1cm4gcHJvbWlzZVRhZztcbiAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuICAgICAgICBjYXNlIHdlYWtNYXBDdG9yU3RyaW5nOiByZXR1cm4gd2Vha01hcFRhZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGlzIG1hc2tlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG4gIHJldHVybiAhIW1hc2tTcmNLZXkgJiYgKG1hc2tTcmNLZXkgaW4gZnVuYyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3RvdHlwZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkge1xuICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLFxuICAgICAgcHJvdG8gPSAodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSkgfHwgb2JqZWN0UHJvdG87XG5cbiAgcmV0dXJuIHZhbHVlID09PSBwcm90bztcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG4gKi9cbmZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcbiAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICAvLyBTYWZhcmkgOC4xIG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuICAgICghcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NUYWcpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzXG4gKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG4gKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZSgnYWJjJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0FycmF5TGlrZWAgZXhjZXB0IHRoYXQgaXQgYWxzbyBjaGVja3MgaWYgYHZhbHVlYFxuICogaXMgYW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGJ1ZmZlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMy4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGJ1ZmZlciwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQnVmZmVyKG5ldyBCdWZmZXIoMikpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNCdWZmZXIobmV3IFVpbnQ4QXJyYXkoMikpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQnVmZmVyID0gbmF0aXZlSXNCdWZmZXIgfHwgc3R1YkZhbHNlO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGVtcHR5IG9iamVjdCwgY29sbGVjdGlvbiwgbWFwLCBvciBzZXQuXG4gKlxuICogT2JqZWN0cyBhcmUgY29uc2lkZXJlZCBlbXB0eSBpZiB0aGV5IGhhdmUgbm8gb3duIGVudW1lcmFibGUgc3RyaW5nIGtleWVkXG4gKiBwcm9wZXJ0aWVzLlxuICpcbiAqIEFycmF5LWxpa2UgdmFsdWVzIHN1Y2ggYXMgYGFyZ3VtZW50c2Agb2JqZWN0cywgYXJyYXlzLCBidWZmZXJzLCBzdHJpbmdzLCBvclxuICogalF1ZXJ5LWxpa2UgY29sbGVjdGlvbnMgYXJlIGNvbnNpZGVyZWQgZW1wdHkgaWYgdGhleSBoYXZlIGEgYGxlbmd0aGAgb2YgYDBgLlxuICogU2ltaWxhcmx5LCBtYXBzIGFuZCBzZXRzIGFyZSBjb25zaWRlcmVkIGVtcHR5IGlmIHRoZXkgaGF2ZSBhIGBzaXplYCBvZiBgMGAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZW1wdHksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0VtcHR5KG51bGwpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNFbXB0eSh0cnVlKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRW1wdHkoMSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0VtcHR5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNFbXB0eSh7ICdhJzogMSB9KTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSAmJlxuICAgICAgKGlzQXJyYXkodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fFxuICAgICAgICB0eXBlb2YgdmFsdWUuc3BsaWNlID09ICdmdW5jdGlvbicgfHwgaXNCdWZmZXIodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICByZXR1cm4gIXZhbHVlLmxlbmd0aDtcbiAgfVxuICB2YXIgdGFnID0gZ2V0VGFnKHZhbHVlKTtcbiAgaWYgKHRhZyA9PSBtYXBUYWcgfHwgdGFnID09IHNldFRhZykge1xuICAgIHJldHVybiAhdmFsdWUuc2l6ZTtcbiAgfVxuICBpZiAobm9uRW51bVNoYWRvd3MgfHwgaXNQcm90b3R5cGUodmFsdWUpKSB7XG4gICAgcmV0dXJuICFuYXRpdmVLZXlzKHZhbHVlKS5sZW5ndGg7XG4gIH1cbiAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGtleSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBTYWZhcmkgOC05IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGFuZCBvdGhlciBjb25zdHJ1Y3RvcnMuXG4gIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNMZW5ndGgoMyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0xlbmd0aChOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aChJbmZpbml0eSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoJzMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcbiAgICB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIGBmYWxzZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEzLjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRpbWVzKDIsIF8uc3R1YkZhbHNlKTtcbiAqIC8vID0+IFtmYWxzZSwgZmFsc2VdXG4gKi9cbmZ1bmN0aW9uIHN0dWJGYWxzZSgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRW1wdHk7XG4iLCIvKipcbiAqIExvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IE9wZW5KUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vb3BlbmpzZi5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xudmFyIExBUkdFX0FSUkFZX1NJWkUgPSAyMDA7XG5cbi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGhvdCBmdW5jdGlvbnMgYnkgbnVtYmVyIG9mIGNhbGxzIHdpdGhpbiBhIHNwYW4gb2YgbWlsbGlzZWNvbmRzLiAqL1xudmFyIEhPVF9DT1VOVCA9IDgwMCxcbiAgICBIT1RfU1BBTiA9IDE2O1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYXN5bmNUYWcgPSAnW29iamVjdCBBc3luY0Z1bmN0aW9uXScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nLFxuICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIG51bGxUYWcgPSAnW29iamVjdCBOdWxsXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcHJveHlUYWcgPSAnW29iamVjdCBQcm94eV0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgIHVuZGVmaW5lZFRhZyA9ICdbb2JqZWN0IFVuZGVmaW5lZF0nLFxuICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcbiAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLlxuICovXG52YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xudmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG50eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbnR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cbnR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cbnR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID1cbnR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID1cbnR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPSB0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID1cbnR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID1cbnR5cGVkQXJyYXlUYWdzW3NldFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID1cbnR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYC4gKi9cbnZhciBmcmVlRXhwb3J0cyA9IHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLiAqL1xudmFyIGZyZWVNb2R1bGUgPSBmcmVlRXhwb3J0cyAmJiB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblxuLyoqIERldGVjdCB0aGUgcG9wdWxhciBDb21tb25KUyBleHRlbnNpb24gYG1vZHVsZS5leHBvcnRzYC4gKi9cbnZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHByb2Nlc3NgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlUHJvY2VzcyA9IG1vZHVsZUV4cG9ydHMgJiYgZnJlZUdsb2JhbC5wcm9jZXNzO1xuXG4vKiogVXNlZCB0byBhY2Nlc3MgZmFzdGVyIE5vZGUuanMgaGVscGVycy4gKi9cbnZhciBub2RlVXRpbCA9IChmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICAvLyBVc2UgYHV0aWwudHlwZXNgIGZvciBOb2RlLmpzIDEwKy5cbiAgICB2YXIgdHlwZXMgPSBmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUucmVxdWlyZSAmJiBmcmVlTW9kdWxlLnJlcXVpcmUoJ3V0aWwnKS50eXBlcztcblxuICAgIGlmICh0eXBlcykge1xuICAgICAgcmV0dXJuIHR5cGVzO1xuICAgIH1cblxuICAgIC8vIExlZ2FjeSBgcHJvY2Vzcy5iaW5kaW5nKCd1dGlsJylgIGZvciBOb2RlLmpzIDwgMTAuXG4gICAgcmV0dXJuIGZyZWVQcm9jZXNzICYmIGZyZWVQcm9jZXNzLmJpbmRpbmcgJiYgZnJlZVByb2Nlc3MuYmluZGluZygndXRpbCcpO1xuICB9IGNhdGNoIChlKSB7fVxufSgpKTtcblxuLyogTm9kZS5qcyBoZWxwZXIgcmVmZXJlbmNlcy4gKi9cbnZhciBub2RlSXNUeXBlZEFycmF5ID0gbm9kZVV0aWwgJiYgbm9kZVV0aWwuaXNUeXBlZEFycmF5O1xuXG4vKipcbiAqIEEgZmFzdGVyIGFsdGVybmF0aXZlIHRvIGBGdW5jdGlvbiNhcHBseWAsIHRoaXMgZnVuY3Rpb24gaW52b2tlcyBgZnVuY2BcbiAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgdGhlIGFyZ3VtZW50cyBvZiBgYXJnc2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtBcnJheX0gYXJncyBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXN1bHQgb2YgYGZ1bmNgLlxuICovXG5mdW5jdGlvbiBhcHBseShmdW5jLCB0aGlzQXJnLCBhcmdzKSB7XG4gIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZyk7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0pO1xuICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kc1xuICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udW5hcnlgIHdpdGhvdXQgc3VwcG9ydCBmb3Igc3RvcmluZyBtZXRhZGF0YS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2FwIGFyZ3VtZW50cyBmb3IuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBjYXBwZWQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VVbmFyeShmdW5jKSB7XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBmdW5jKHZhbHVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZ2V0VmFsdWUob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIGFyZ3VtZW50IHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvdmVyQXJnKGZ1bmMsIHRyYW5zZm9ybSkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuICB9O1xufVxuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSxcbiAgICBmdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGUsXG4gICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovXG52YXIgY29yZUpzRGF0YSA9IHJvb3RbJ19fY29yZS1qc19zaGFyZWRfXyddO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gZnVuY1Byb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xudmFyIG1hc2tTcmNLZXkgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciB1aWQgPSAvW14uXSskLy5leGVjKGNvcmVKc0RhdGEgJiYgY29yZUpzRGF0YS5rZXlzICYmIGNvcmVKc0RhdGEua2V5cy5JRV9QUk9UTyB8fCAnJyk7XG4gIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcbn0oKSk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBuYXRpdmVPYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBpbmZlciB0aGUgYE9iamVjdGAgY29uc3RydWN0b3IuICovXG52YXIgb2JqZWN0Q3RvclN0cmluZyA9IGZ1bmNUb1N0cmluZy5jYWxsKE9iamVjdCk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIEJ1ZmZlciA9IG1vZHVsZUV4cG9ydHMgPyByb290LkJ1ZmZlciA6IHVuZGVmaW5lZCxcbiAgICBTeW1ib2wgPSByb290LlN5bWJvbCxcbiAgICBVaW50OEFycmF5ID0gcm9vdC5VaW50OEFycmF5LFxuICAgIGFsbG9jVW5zYWZlID0gQnVmZmVyID8gQnVmZmVyLmFsbG9jVW5zYWZlIDogdW5kZWZpbmVkLFxuICAgIGdldFByb3RvdHlwZSA9IG92ZXJBcmcoT2JqZWN0LmdldFByb3RvdHlwZU9mLCBPYmplY3QpLFxuICAgIG9iamVjdENyZWF0ZSA9IE9iamVjdC5jcmVhdGUsXG4gICAgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZSxcbiAgICBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZSxcbiAgICBzeW1Ub1N0cmluZ1RhZyA9IFN5bWJvbCA/IFN5bWJvbC50b1N0cmluZ1RhZyA6IHVuZGVmaW5lZDtcblxudmFyIGRlZmluZVByb3BlcnR5ID0gKGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIHZhciBmdW5jID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2RlZmluZVByb3BlcnR5Jyk7XG4gICAgZnVuYyh7fSwgJycsIHt9KTtcbiAgICByZXR1cm4gZnVuYztcbiAgfSBjYXRjaCAoZSkge31cbn0oKSk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVJc0J1ZmZlciA9IEJ1ZmZlciA/IEJ1ZmZlci5pc0J1ZmZlciA6IHVuZGVmaW5lZCxcbiAgICBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVOb3cgPSBEYXRlLm5vdztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyksXG4gICAgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNyZWF0ZWAgd2l0aG91dCBzdXBwb3J0IGZvciBhc3NpZ25pbmdcbiAqIHByb3BlcnRpZXMgdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvdG8gVGhlIG9iamVjdCB0byBpbmhlcml0IGZyb20uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICovXG52YXIgYmFzZUNyZWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gb2JqZWN0KCkge31cbiAgcmV0dXJuIGZ1bmN0aW9uKHByb3RvKSB7XG4gICAgaWYgKCFpc09iamVjdChwcm90bykpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgaWYgKG9iamVjdENyZWF0ZSkge1xuICAgICAgcmV0dXJuIG9iamVjdENyZWF0ZShwcm90byk7XG4gICAgfVxuICAgIG9iamVjdC5wcm90b3R5cGUgPSBwcm90bztcbiAgICB2YXIgcmVzdWx0ID0gbmV3IG9iamVjdDtcbiAgICBvYmplY3QucHJvdG90eXBlID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59KCkpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gSGFzaChlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKi9cbmZ1bmN0aW9uIGhhc2hDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5hdGl2ZUNyZWF0ZSA/IG5hdGl2ZUNyZWF0ZShudWxsKSA6IHt9O1xuICB0aGlzLnNpemUgPSAwO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHtcbiAgdmFyIHJlc3VsdCA9IHRoaXMuaGFzKGtleSkgJiYgZGVsZXRlIHRoaXMuX19kYXRhX19ba2V5XTtcbiAgdGhpcy5zaXplIC09IHJlc3VsdCA/IDEgOiAwO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGhhc2ggdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gaGFzaEdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAobmF0aXZlQ3JlYXRlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0ID09PSBIQVNIX1VOREVGSU5FRCA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGhhc2ggdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgcmV0dXJuIG5hdGl2ZUNyZWF0ZSA/IChkYXRhW2tleV0gIT09IHVuZGVmaW5lZCkgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgaGFzaCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGhhc2ggaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIHRoaXMuc2l6ZSArPSB0aGlzLmhhcyhrZXkpID8gMCA6IDE7XG4gIGRhdGFba2V5XSA9IChuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgPyBIQVNIX1VOREVGSU5FRCA6IHZhbHVlO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYEhhc2hgLlxuSGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7XG5IYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBoYXNoRGVsZXRlO1xuSGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDtcbkhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7XG5IYXNoLnByb3RvdHlwZS5zZXQgPSBoYXNoU2V0O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gbGlzdCBjYWNoZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIExpc3RDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbGlzdCBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBbXTtcbiAgdGhpcy5zaXplID0gMDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbGlzdCBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlRGVsZXRlKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIGlmIChpbmRleCA8IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3RJbmRleCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuICAgIGRhdGEucG9wKCk7XG4gIH0gZWxzZSB7XG4gICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuICB9XG4gIC0tdGhpcy5zaXplO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIHJldHVybiBpbmRleCA8IDAgPyB1bmRlZmluZWQgOiBkYXRhW2luZGV4XVsxXTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGFzc29jSW5kZXhPZih0aGlzLl9fZGF0YV9fLCBrZXkpID4gLTE7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbGlzdCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgKyt0aGlzLnNpemU7XG4gICAgZGF0YS5wdXNoKFtrZXksIHZhbHVlXSk7XG4gIH0gZWxzZSB7XG4gICAgZGF0YVtpbmRleF1bMV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuXG5MaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG5MaXN0Q2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IGxpc3RDYWNoZURlbGV0ZTtcbkxpc3RDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbGlzdENhY2hlR2V0O1xuTGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG5MaXN0Q2FjaGUucHJvdG90eXBlLnNldCA9IGxpc3RDYWNoZVNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID09IG51bGwgPyAwIDogZW50cmllcy5sZW5ndGg7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHtcbiAgdGhpcy5zaXplID0gMDtcbiAgdGhpcy5fX2RhdGFfXyA9IHtcbiAgICAnaGFzaCc6IG5ldyBIYXNoLFxuICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLFxuICAgICdzdHJpbmcnOiBuZXcgSGFzaFxuICB9O1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBtYXAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG4gIHZhciByZXN1bHQgPSBnZXRNYXBEYXRhKHRoaXMsIGtleSlbJ2RlbGV0ZSddKGtleSk7XG4gIHRoaXMuc2l6ZSAtPSByZXN1bHQgPyAxIDogMDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIG1hcCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBtYXAgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSBnZXRNYXBEYXRhKHRoaXMsIGtleSksXG4gICAgICBzaXplID0gZGF0YS5zaXplO1xuXG4gIGRhdGEuc2V0KGtleSwgdmFsdWUpO1xuICB0aGlzLnNpemUgKz0gZGF0YS5zaXplID09IHNpemUgPyAwIDogMTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuXG5NYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IG1hcENhY2hlRGVsZXRlO1xuTWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcENhY2hlR2V0O1xuTWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcENhY2hlU2V0O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBzdGFjayBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTdGFjayhlbnRyaWVzKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGUoZW50cmllcyk7XG4gIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBTdGFja1xuICovXG5mdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZTtcbiAgdGhpcy5zaXplID0gMDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgc3RhY2suXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIHJlc3VsdCA9IGRhdGFbJ2RlbGV0ZSddKGtleSk7XG5cbiAgdGhpcy5zaXplID0gZGF0YS5zaXplO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBzdGFja0dldChrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgc3RhY2sgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzdGFja0hhcyhrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGtleSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgc3RhY2sgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgc3RhY2sgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAoZGF0YSBpbnN0YW5jZW9mIExpc3RDYWNoZSkge1xuICAgIHZhciBwYWlycyA9IGRhdGEuX19kYXRhX187XG4gICAgaWYgKCFNYXAgfHwgKHBhaXJzLmxlbmd0aCA8IExBUkdFX0FSUkFZX1NJWkUgLSAxKSkge1xuICAgICAgcGFpcnMucHVzaChba2V5LCB2YWx1ZV0pO1xuICAgICAgdGhpcy5zaXplID0gKytkYXRhLnNpemU7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZGF0YSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUocGFpcnMpO1xuICB9XG4gIGRhdGEuc2V0KGtleSwgdmFsdWUpO1xuICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLlxuU3RhY2sucHJvdG90eXBlLmNsZWFyID0gc3RhY2tDbGVhcjtcblN0YWNrLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBzdGFja0RlbGV0ZTtcblN0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtcblN0YWNrLnByb3RvdHlwZS5oYXMgPSBzdGFja0hhcztcblN0YWNrLnByb3RvdHlwZS5zZXQgPSBzdGFja1NldDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIHRoZSBhcnJheS1saWtlIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtib29sZWFufSBpbmhlcml0ZWQgU3BlY2lmeSByZXR1cm5pbmcgaW5oZXJpdGVkIHByb3BlcnR5IG5hbWVzLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYXJyYXlMaWtlS2V5cyh2YWx1ZSwgaW5oZXJpdGVkKSB7XG4gIHZhciBpc0FyciA9IGlzQXJyYXkodmFsdWUpLFxuICAgICAgaXNBcmcgPSAhaXNBcnIgJiYgaXNBcmd1bWVudHModmFsdWUpLFxuICAgICAgaXNCdWZmID0gIWlzQXJyICYmICFpc0FyZyAmJiBpc0J1ZmZlcih2YWx1ZSksXG4gICAgICBpc1R5cGUgPSAhaXNBcnIgJiYgIWlzQXJnICYmICFpc0J1ZmYgJiYgaXNUeXBlZEFycmF5KHZhbHVlKSxcbiAgICAgIHNraXBJbmRleGVzID0gaXNBcnIgfHwgaXNBcmcgfHwgaXNCdWZmIHx8IGlzVHlwZSxcbiAgICAgIHJlc3VsdCA9IHNraXBJbmRleGVzID8gYmFzZVRpbWVzKHZhbHVlLmxlbmd0aCwgU3RyaW5nKSA6IFtdLFxuICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICBpZiAoKGluaGVyaXRlZCB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrZXkpKSAmJlxuICAgICAgICAhKHNraXBJbmRleGVzICYmIChcbiAgICAgICAgICAgLy8gU2FmYXJpIDkgaGFzIGVudW1lcmFibGUgYGFyZ3VtZW50cy5sZW5ndGhgIGluIHN0cmljdCBtb2RlLlxuICAgICAgICAgICBrZXkgPT0gJ2xlbmd0aCcgfHxcbiAgICAgICAgICAgLy8gTm9kZS5qcyAwLjEwIGhhcyBlbnVtZXJhYmxlIG5vbi1pbmRleCBwcm9wZXJ0aWVzIG9uIGJ1ZmZlcnMuXG4gICAgICAgICAgIChpc0J1ZmYgJiYgKGtleSA9PSAnb2Zmc2V0JyB8fCBrZXkgPT0gJ3BhcmVudCcpKSB8fFxuICAgICAgICAgICAvLyBQaGFudG9tSlMgMiBoYXMgZW51bWVyYWJsZSBub24taW5kZXggcHJvcGVydGllcyBvbiB0eXBlZCBhcnJheXMuXG4gICAgICAgICAgIChpc1R5cGUgJiYgKGtleSA9PSAnYnVmZmVyJyB8fCBrZXkgPT0gJ2J5dGVMZW5ndGgnIHx8IGtleSA9PSAnYnl0ZU9mZnNldCcpKSB8fFxuICAgICAgICAgICAvLyBTa2lwIGluZGV4IHByb3BlcnRpZXMuXG4gICAgICAgICAgIGlzSW5kZXgoa2V5LCBsZW5ndGgpXG4gICAgICAgICkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgYXNzaWduVmFsdWVgIGV4Y2VwdCB0aGF0IGl0IGRvZXNuJ3QgYXNzaWduXG4gKiBgdW5kZWZpbmVkYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGFzc2lnbi5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFzc2lnbi5cbiAqL1xuZnVuY3Rpb24gYXNzaWduTWVyZ2VWYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgaWYgKCh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmICFlcShvYmplY3Rba2V5XSwgdmFsdWUpKSB8fFxuICAgICAgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkpIHtcbiAgICBiYXNlQXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEFzc2lnbnMgYHZhbHVlYCB0byBga2V5YCBvZiBgb2JqZWN0YCBpZiB0aGUgZXhpc3RpbmcgdmFsdWUgaXMgbm90IGVxdWl2YWxlbnRcbiAqIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGFzc2lnbi5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFzc2lnbi5cbiAqL1xuZnVuY3Rpb24gYXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldO1xuICBpZiAoIShoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJiBlcShvYmpWYWx1ZSwgdmFsdWUpKSB8fFxuICAgICAgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkpIHtcbiAgICBiYXNlQXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgdGhlIGluZGV4IGF0IHdoaWNoIHRoZSBga2V5YCBpcyBmb3VuZCBpbiBgYXJyYXlgIG9mIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICovXG5mdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBhc3NpZ25WYWx1ZWAgYW5kIGBhc3NpZ25NZXJnZVZhbHVlYCB3aXRob3V0XG4gKiB2YWx1ZSBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGFzc2lnbi5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFzc2lnbi5cbiAqL1xuZnVuY3Rpb24gYmFzZUFzc2lnblZhbHVlKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5ID09ICdfX3Byb3RvX18nICYmIGRlZmluZVByb3BlcnR5KSB7XG4gICAgZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgICdjb25maWd1cmFibGUnOiB0cnVlLFxuICAgICAgJ2VudW1lcmFibGUnOiB0cnVlLFxuICAgICAgJ3ZhbHVlJzogdmFsdWUsXG4gICAgICAnd3JpdGFibGUnOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBiYXNlRm9yT3duYCB3aGljaCBpdGVyYXRlcyBvdmVyIGBvYmplY3RgXG4gKiBwcm9wZXJ0aWVzIHJldHVybmVkIGJ5IGBrZXlzRnVuY2AgYW5kIGludm9rZXMgYGl0ZXJhdGVlYCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xudmFyIGJhc2VGb3IgPSBjcmVhdGVCYXNlRm9yKCk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldFRhZ2Agd2l0aG91dCBmYWxsYmFja3MgZm9yIGJ1Z2d5IGVudmlyb25tZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0VGFnKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWRUYWcgOiBudWxsVGFnO1xuICB9XG4gIHJldHVybiAoc3ltVG9TdHJpbmdUYWcgJiYgc3ltVG9TdHJpbmdUYWcgaW4gT2JqZWN0KHZhbHVlKSlcbiAgICA/IGdldFJhd1RhZyh2YWx1ZSlcbiAgICA6IG9iamVjdFRvU3RyaW5nKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0FyZ3VtZW50c2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICovXG5mdW5jdGlvbiBiYXNlSXNBcmd1bWVudHModmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gYXJnc1RhZztcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBwYXR0ZXJuID0gaXNGdW5jdGlvbih2YWx1ZSkgPyByZUlzTmF0aXZlIDogcmVJc0hvc3RDdG9yO1xuICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNUeXBlZEFycmF5YCB3aXRob3V0IE5vZGUuanMgb3B0aW1pemF0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiZcbiAgICBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3NbYmFzZUdldFRhZyh2YWx1ZSldO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNJbmAgd2hpY2ggZG9lc24ndCB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBiYXNlS2V5c0luKG9iamVjdCkge1xuICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICByZXR1cm4gbmF0aXZlS2V5c0luKG9iamVjdCk7XG4gIH1cbiAgdmFyIGlzUHJvdG8gPSBpc1Byb3RvdHlwZShvYmplY3QpLFxuICAgICAgcmVzdWx0ID0gW107XG5cbiAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgIGlmICghKGtleSA9PSAnY29uc3RydWN0b3InICYmIChpc1Byb3RvIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1lcmdlYCB3aXRob3V0IHN1cHBvcnQgZm9yIG11bHRpcGxlIHNvdXJjZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gKiBAcGFyYW0ge251bWJlcn0gc3JjSW5kZXggVGhlIGluZGV4IG9mIGBzb3VyY2VgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2VkIHZhbHVlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIHZhbHVlcyBhbmQgdGhlaXIgbWVyZ2VkXG4gKiAgY291bnRlcnBhcnRzLlxuICovXG5mdW5jdGlvbiBiYXNlTWVyZ2Uob2JqZWN0LCBzb3VyY2UsIHNyY0luZGV4LCBjdXN0b21pemVyLCBzdGFjaykge1xuICBpZiAob2JqZWN0ID09PSBzb3VyY2UpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYmFzZUZvcihzb3VyY2UsIGZ1bmN0aW9uKHNyY1ZhbHVlLCBrZXkpIHtcbiAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgIGlmIChpc09iamVjdChzcmNWYWx1ZSkpIHtcbiAgICAgIGJhc2VNZXJnZURlZXAob2JqZWN0LCBzb3VyY2UsIGtleSwgc3JjSW5kZXgsIGJhc2VNZXJnZSwgY3VzdG9taXplciwgc3RhY2spO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciBuZXdWYWx1ZSA9IGN1c3RvbWl6ZXJcbiAgICAgICAgPyBjdXN0b21pemVyKHNhZmVHZXQob2JqZWN0LCBrZXkpLCBzcmNWYWx1ZSwgKGtleSArICcnKSwgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKVxuICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3VmFsdWUgPSBzcmNWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGFzc2lnbk1lcmdlVmFsdWUob2JqZWN0LCBrZXksIG5ld1ZhbHVlKTtcbiAgICB9XG4gIH0sIGtleXNJbik7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlTWVyZ2VgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAqIGRlZXAgbWVyZ2VzIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG4gKiByZWZlcmVuY2VzIHRvIGJlIG1lcmdlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gbWVyZ2UuXG4gKiBAcGFyYW0ge251bWJlcn0gc3JjSW5kZXggVGhlIGluZGV4IG9mIGBzb3VyY2VgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbWVyZ2VGdW5jIFRoZSBmdW5jdGlvbiB0byBtZXJnZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSB2YWx1ZXMgYW5kIHRoZWlyIG1lcmdlZFxuICogIGNvdW50ZXJwYXJ0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZU1lcmdlRGVlcChvYmplY3QsIHNvdXJjZSwga2V5LCBzcmNJbmRleCwgbWVyZ2VGdW5jLCBjdXN0b21pemVyLCBzdGFjaykge1xuICB2YXIgb2JqVmFsdWUgPSBzYWZlR2V0KG9iamVjdCwga2V5KSxcbiAgICAgIHNyY1ZhbHVlID0gc2FmZUdldChzb3VyY2UsIGtleSksXG4gICAgICBzdGFja2VkID0gc3RhY2suZ2V0KHNyY1ZhbHVlKTtcblxuICBpZiAoc3RhY2tlZCkge1xuICAgIGFzc2lnbk1lcmdlVmFsdWUob2JqZWN0LCBrZXksIHN0YWNrZWQpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbmV3VmFsdWUgPSBjdXN0b21pemVyXG4gICAgPyBjdXN0b21pemVyKG9ialZhbHVlLCBzcmNWYWx1ZSwgKGtleSArICcnKSwgb2JqZWN0LCBzb3VyY2UsIHN0YWNrKVxuICAgIDogdW5kZWZpbmVkO1xuXG4gIHZhciBpc0NvbW1vbiA9IG5ld1ZhbHVlID09PSB1bmRlZmluZWQ7XG5cbiAgaWYgKGlzQ29tbW9uKSB7XG4gICAgdmFyIGlzQXJyID0gaXNBcnJheShzcmNWYWx1ZSksXG4gICAgICAgIGlzQnVmZiA9ICFpc0FyciAmJiBpc0J1ZmZlcihzcmNWYWx1ZSksXG4gICAgICAgIGlzVHlwZWQgPSAhaXNBcnIgJiYgIWlzQnVmZiAmJiBpc1R5cGVkQXJyYXkoc3JjVmFsdWUpO1xuXG4gICAgbmV3VmFsdWUgPSBzcmNWYWx1ZTtcbiAgICBpZiAoaXNBcnIgfHwgaXNCdWZmIHx8IGlzVHlwZWQpIHtcbiAgICAgIGlmIChpc0FycmF5KG9ialZhbHVlKSkge1xuICAgICAgICBuZXdWYWx1ZSA9IG9ialZhbHVlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaXNBcnJheUxpa2VPYmplY3Qob2JqVmFsdWUpKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gY29weUFycmF5KG9ialZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGlzQnVmZikge1xuICAgICAgICBpc0NvbW1vbiA9IGZhbHNlO1xuICAgICAgICBuZXdWYWx1ZSA9IGNsb25lQnVmZmVyKHNyY1ZhbHVlLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGlzVHlwZWQpIHtcbiAgICAgICAgaXNDb21tb24gPSBmYWxzZTtcbiAgICAgICAgbmV3VmFsdWUgPSBjbG9uZVR5cGVkQXJyYXkoc3JjVmFsdWUsIHRydWUpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG5ld1ZhbHVlID0gW107XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUGxhaW5PYmplY3Qoc3JjVmFsdWUpIHx8IGlzQXJndW1lbnRzKHNyY1ZhbHVlKSkge1xuICAgICAgbmV3VmFsdWUgPSBvYmpWYWx1ZTtcbiAgICAgIGlmIChpc0FyZ3VtZW50cyhvYmpWYWx1ZSkpIHtcbiAgICAgICAgbmV3VmFsdWUgPSB0b1BsYWluT2JqZWN0KG9ialZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCFpc09iamVjdChvYmpWYWx1ZSkgfHwgaXNGdW5jdGlvbihvYmpWYWx1ZSkpIHtcbiAgICAgICAgbmV3VmFsdWUgPSBpbml0Q2xvbmVPYmplY3Qoc3JjVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIGlmIChpc0NvbW1vbikge1xuICAgIC8vIFJlY3Vyc2l2ZWx5IG1lcmdlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIHN0YWNrLnNldChzcmNWYWx1ZSwgbmV3VmFsdWUpO1xuICAgIG1lcmdlRnVuYyhuZXdWYWx1ZSwgc3JjVmFsdWUsIHNyY0luZGV4LCBjdXN0b21pemVyLCBzdGFjayk7XG4gICAgc3RhY2tbJ2RlbGV0ZSddKHNyY1ZhbHVlKTtcbiAgfVxuICBhc3NpZ25NZXJnZVZhbHVlKG9iamVjdCwga2V5LCBuZXdWYWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmVzdGAgd2hpY2ggZG9lc24ndCB2YWxpZGF0ZSBvciBjb2VyY2UgYXJndW1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VSZXN0KGZ1bmMsIHN0YXJ0KSB7XG4gIHJldHVybiBzZXRUb1N0cmluZyhvdmVyUmVzdChmdW5jLCBzdGFydCwgaWRlbnRpdHkpLCBmdW5jICsgJycpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBzZXRUb1N0cmluZ2Agd2l0aG91dCBzdXBwb3J0IGZvciBob3QgbG9vcCBzaG9ydGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc3RyaW5nIFRoZSBgdG9TdHJpbmdgIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgZnVuY2AuXG4gKi9cbnZhciBiYXNlU2V0VG9TdHJpbmcgPSAhZGVmaW5lUHJvcGVydHkgPyBpZGVudGl0eSA6IGZ1bmN0aW9uKGZ1bmMsIHN0cmluZykge1xuICByZXR1cm4gZGVmaW5lUHJvcGVydHkoZnVuYywgJ3RvU3RyaW5nJywge1xuICAgICdjb25maWd1cmFibGUnOiB0cnVlLFxuICAgICdlbnVtZXJhYmxlJzogZmFsc2UsXG4gICAgJ3ZhbHVlJzogY29uc3RhbnQoc3RyaW5nKSxcbiAgICAnd3JpdGFibGUnOiB0cnVlXG4gIH0pO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgY2xvbmUgb2YgIGBidWZmZXJgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYnVmZmVyIFRoZSBidWZmZXIgdG8gY2xvbmUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0RlZXBdIFNwZWNpZnkgYSBkZWVwIGNsb25lLlxuICogQHJldHVybnMge0J1ZmZlcn0gUmV0dXJucyB0aGUgY2xvbmVkIGJ1ZmZlci5cbiAqL1xuZnVuY3Rpb24gY2xvbmVCdWZmZXIoYnVmZmVyLCBpc0RlZXApIHtcbiAgaWYgKGlzRGVlcCkge1xuICAgIHJldHVybiBidWZmZXIuc2xpY2UoKTtcbiAgfVxuICB2YXIgbGVuZ3RoID0gYnVmZmVyLmxlbmd0aCxcbiAgICAgIHJlc3VsdCA9IGFsbG9jVW5zYWZlID8gYWxsb2NVbnNhZmUobGVuZ3RoKSA6IG5ldyBidWZmZXIuY29uc3RydWN0b3IobGVuZ3RoKTtcblxuICBidWZmZXIuY29weShyZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiBgYXJyYXlCdWZmZXJgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5QnVmZmVyfSBhcnJheUJ1ZmZlciBUaGUgYXJyYXkgYnVmZmVyIHRvIGNsb25lLlxuICogQHJldHVybnMge0FycmF5QnVmZmVyfSBSZXR1cm5zIHRoZSBjbG9uZWQgYXJyYXkgYnVmZmVyLlxuICovXG5mdW5jdGlvbiBjbG9uZUFycmF5QnVmZmVyKGFycmF5QnVmZmVyKSB7XG4gIHZhciByZXN1bHQgPSBuZXcgYXJyYXlCdWZmZXIuY29uc3RydWN0b3IoYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aCk7XG4gIG5ldyBVaW50OEFycmF5KHJlc3VsdCkuc2V0KG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIGB0eXBlZEFycmF5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHR5cGVkQXJyYXkgVGhlIHR5cGVkIGFycmF5IHRvIGNsb25lLlxuICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNsb25lZCB0eXBlZCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gY2xvbmVUeXBlZEFycmF5KHR5cGVkQXJyYXksIGlzRGVlcCkge1xuICB2YXIgYnVmZmVyID0gaXNEZWVwID8gY2xvbmVBcnJheUJ1ZmZlcih0eXBlZEFycmF5LmJ1ZmZlcikgOiB0eXBlZEFycmF5LmJ1ZmZlcjtcbiAgcmV0dXJuIG5ldyB0eXBlZEFycmF5LmNvbnN0cnVjdG9yKGJ1ZmZlciwgdHlwZWRBcnJheS5ieXRlT2Zmc2V0LCB0eXBlZEFycmF5Lmxlbmd0aCk7XG59XG5cbi8qKlxuICogQ29waWVzIHRoZSB2YWx1ZXMgb2YgYHNvdXJjZWAgdG8gYGFycmF5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gc291cmNlIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyBmcm9tLlxuICogQHBhcmFtIHtBcnJheX0gW2FycmF5PVtdXSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgdG8uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAqL1xuZnVuY3Rpb24gY29weUFycmF5KHNvdXJjZSwgYXJyYXkpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBzb3VyY2UubGVuZ3RoO1xuXG4gIGFycmF5IHx8IChhcnJheSA9IEFycmF5KGxlbmd0aCkpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGFycmF5W2luZGV4XSA9IHNvdXJjZVtpbmRleF07XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIENvcGllcyBwcm9wZXJ0aWVzIG9mIGBzb3VyY2VgIHRvIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20uXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgaWRlbnRpZmllcnMgdG8gY29weS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0by5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvcGllZCB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBjb3B5T2JqZWN0KHNvdXJjZSwgcHJvcHMsIG9iamVjdCwgY3VzdG9taXplcikge1xuICB2YXIgaXNOZXcgPSAhb2JqZWN0O1xuICBvYmplY3QgfHwgKG9iamVjdCA9IHt9KTtcblxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG5cbiAgICB2YXIgbmV3VmFsdWUgPSBjdXN0b21pemVyXG4gICAgICA/IGN1c3RvbWl6ZXIob2JqZWN0W2tleV0sIHNvdXJjZVtrZXldLCBrZXksIG9iamVjdCwgc291cmNlKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAobmV3VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgbmV3VmFsdWUgPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gICAgaWYgKGlzTmV3KSB7XG4gICAgICBiYXNlQXNzaWduVmFsdWUob2JqZWN0LCBrZXksIG5ld1ZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzaWduVmFsdWUob2JqZWN0LCBrZXksIG5ld1ZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gbGlrZSBgXy5hc3NpZ25gLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhc3NpZ25lciBUaGUgZnVuY3Rpb24gdG8gYXNzaWduIHZhbHVlcy5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFzc2lnbmVyIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVBc3NpZ25lcihhc3NpZ25lcikge1xuICByZXR1cm4gYmFzZVJlc3QoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2VzKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IHNvdXJjZXMubGVuZ3RoLFxuICAgICAgICBjdXN0b21pemVyID0gbGVuZ3RoID4gMSA/IHNvdXJjZXNbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQsXG4gICAgICAgIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQ7XG5cbiAgICBjdXN0b21pemVyID0gKGFzc2lnbmVyLmxlbmd0aCA+IDMgJiYgdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJylcbiAgICAgID8gKGxlbmd0aC0tLCBjdXN0b21pemVyKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc291cmNlc1swXSwgc291cmNlc1sxXSwgZ3VhcmQpKSB7XG4gICAgICBjdXN0b21pemVyID0gbGVuZ3RoIDwgMyA/IHVuZGVmaW5lZCA6IGN1c3RvbWl6ZXI7XG4gICAgICBsZW5ndGggPSAxO1xuICAgIH1cbiAgICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaW5kZXhdO1xuICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICBhc3NpZ25lcihvYmplY3QsIHNvdXJjZSwgaW5kZXgsIGN1c3RvbWl6ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYmFzZSBmdW5jdGlvbiBmb3IgbWV0aG9kcyBsaWtlIGBfLmZvckluYCBhbmQgYF8uZm9yT3duYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVCYXNlRm9yKGZyb21SaWdodCkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwga2V5c0Z1bmMpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgaXRlcmFibGUgPSBPYmplY3Qob2JqZWN0KSxcbiAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLFxuICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgIHZhciBrZXkgPSBwcm9wc1tmcm9tUmlnaHQgPyBsZW5ndGggOiArK2luZGV4XTtcbiAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtrZXldLCBrZXksIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH07XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZGF0YSBmb3IgYG1hcGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgVGhlIG1hcCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHJlZmVyZW5jZSBrZXkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuXG4gKi9cbmZ1bmN0aW9uIGdldE1hcERhdGEobWFwLCBrZXkpIHtcbiAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187XG4gIHJldHVybiBpc0tleWFibGUoa2V5KVxuICAgID8gZGF0YVt0eXBlb2Yga2V5ID09ICdzdHJpbmcnID8gJ3N0cmluZycgOiAnaGFzaCddXG4gICAgOiBkYXRhLm1hcDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IGdldFZhbHVlKG9iamVjdCwga2V5KTtcbiAgcmV0dXJuIGJhc2VJc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VHZXRUYWdgIHdoaWNoIGlnbm9yZXMgYFN5bWJvbC50b1N0cmluZ1RhZ2AgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHJhdyBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBnZXRSYXdUYWcodmFsdWUpIHtcbiAgdmFyIGlzT3duID0gaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgc3ltVG9TdHJpbmdUYWcpLFxuICAgICAgdGFnID0gdmFsdWVbc3ltVG9TdHJpbmdUYWddO1xuXG4gIHRyeSB7XG4gICAgdmFsdWVbc3ltVG9TdHJpbmdUYWddID0gdW5kZWZpbmVkO1xuICAgIHZhciB1bm1hc2tlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgdmFyIHJlc3VsdCA9IG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xuICBpZiAodW5tYXNrZWQpIHtcbiAgICBpZiAoaXNPd24pIHtcbiAgICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHRhZztcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlIHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbiBvYmplY3QgY2xvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbG9uZS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGluaXRpYWxpemVkIGNsb25lLlxuICovXG5mdW5jdGlvbiBpbml0Q2xvbmVPYmplY3Qob2JqZWN0KSB7XG4gIHJldHVybiAodHlwZW9mIG9iamVjdC5jb25zdHJ1Y3RvciA9PSAnZnVuY3Rpb24nICYmICFpc1Byb3RvdHlwZShvYmplY3QpKVxuICAgID8gYmFzZUNyZWF0ZShnZXRQcm90b3R5cGUob2JqZWN0KSlcbiAgICA6IHt9O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuXG4gIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICh0eXBlID09ICdudW1iZXInIHx8XG4gICAgICAodHlwZSAhPSAnc3ltYm9sJyAmJiByZUlzVWludC50ZXN0KHZhbHVlKSkpICYmXG4gICAgICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgdmFsdWUgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp9IGluZGV4IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgaW5kZXggb3Iga2V5IGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBvYmplY3QgYXJndW1lbnQuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGluZGV4LCBvYmplY3QpIHtcbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB0eXBlID0gdHlwZW9mIGluZGV4O1xuICBpZiAodHlwZSA9PSAnbnVtYmVyJ1xuICAgICAgICA/IChpc0FycmF5TGlrZShvYmplY3QpICYmIGlzSW5kZXgoaW5kZXgsIG9iamVjdC5sZW5ndGgpKVxuICAgICAgICA6ICh0eXBlID09ICdzdHJpbmcnICYmIGluZGV4IGluIG9iamVjdClcbiAgICAgICkge1xuICAgIHJldHVybiBlcShvYmplY3RbaW5kZXhdLCB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gKHR5cGUgPT0gJ3N0cmluZycgfHwgdHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nKVxuICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcbiAgICA6ICh2YWx1ZSA9PT0gbnVsbCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBmdW5jYCBpcyBtYXNrZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuICByZXR1cm4gISFtYXNrU3JjS2V5ICYmIChtYXNrU3JjS2V5IGluIGZ1bmMpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhIHByb3RvdHlwZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm90b3R5cGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNQcm90b3R5cGUodmFsdWUpIHtcbiAgdmFyIEN0b3IgPSB2YWx1ZSAmJiB2YWx1ZS5jb25zdHJ1Y3RvcixcbiAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXG4gIHJldHVybiB2YWx1ZSA9PT0gcHJvdG87XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyBsaWtlXG4gKiBbYE9iamVjdC5rZXlzYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LmtleXMpXG4gKiBleGNlcHQgdGhhdCBpdCBpbmNsdWRlcyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBuYXRpdmVLZXlzSW4ob2JqZWN0KSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgaWYgKG9iamVjdCAhPSBudWxsKSB7XG4gICAgZm9yICh2YXIga2V5IGluIE9iamVjdChvYmplY3QpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgdXNpbmcgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgY29udmVydGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIG5hdGl2ZU9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVJlc3RgIHdoaWNoIHRyYW5zZm9ybXMgdGhlIHJlc3QgYXJyYXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIHJlc3QgYXJyYXkgdHJhbnNmb3JtLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG92ZXJSZXN0KGZ1bmMsIHN0YXJ0LCB0cmFuc2Zvcm0pIHtcbiAgc3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQgPT09IHVuZGVmaW5lZCA/IChmdW5jLmxlbmd0aCAtIDEpIDogc3RhcnQsIDApO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSxcbiAgICAgICAgYXJyYXkgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIGFycmF5W2luZGV4XSA9IGFyZ3Nbc3RhcnQgKyBpbmRleF07XG4gICAgfVxuICAgIGluZGV4ID0gLTE7XG4gICAgdmFyIG90aGVyQXJncyA9IEFycmF5KHN0YXJ0ICsgMSk7XG4gICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuICAgICAgb3RoZXJBcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdO1xuICAgIH1cbiAgICBvdGhlckFyZ3Nbc3RhcnRdID0gdHJhbnNmb3JtKGFycmF5KTtcbiAgICByZXR1cm4gYXBwbHkoZnVuYywgdGhpcywgb3RoZXJBcmdzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCwgdW5sZXNzIGBrZXlgIGlzIFwiX19wcm90b19fXCIgb3IgXCJjb25zdHJ1Y3RvclwiLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gc2FmZUdldChvYmplY3QsIGtleSkge1xuICBpZiAoa2V5ID09PSAnY29uc3RydWN0b3InICYmIHR5cGVvZiBvYmplY3Rba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChrZXkgPT0gJ19fcHJvdG9fXycpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICByZXR1cm4gb2JqZWN0W2tleV07XG59XG5cbi8qKlxuICogU2V0cyB0aGUgYHRvU3RyaW5nYCBtZXRob2Qgb2YgYGZ1bmNgIHRvIHJldHVybiBgc3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gc3RyaW5nIFRoZSBgdG9TdHJpbmdgIHJlc3VsdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgZnVuY2AuXG4gKi9cbnZhciBzZXRUb1N0cmluZyA9IHNob3J0T3V0KGJhc2VTZXRUb1N0cmluZyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQnbGwgc2hvcnQgb3V0IGFuZCBpbnZva2UgYGlkZW50aXR5YCBpbnN0ZWFkXG4gKiBvZiBgZnVuY2Agd2hlbiBpdCdzIGNhbGxlZCBgSE9UX0NPVU5UYCBvciBtb3JlIHRpbWVzIGluIGBIT1RfU1BBTmBcbiAqIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcmVzdHJpY3QuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzaG9ydGFibGUgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHNob3J0T3V0KGZ1bmMpIHtcbiAgdmFyIGNvdW50ID0gMCxcbiAgICAgIGxhc3RDYWxsZWQgPSAwO1xuXG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3RhbXAgPSBuYXRpdmVOb3coKSxcbiAgICAgICAgcmVtYWluaW5nID0gSE9UX1NQQU4gLSAoc3RhbXAgLSBsYXN0Q2FsbGVkKTtcblxuICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICBpZiAocmVtYWluaW5nID4gMCkge1xuICAgICAgaWYgKCsrY291bnQgPj0gSE9UX0NPVU5UKSB7XG4gICAgICAgIHJldHVybiBhcmd1bWVudHNbMF07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvdW50ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGBmdW5jYCB0byBpdHMgc291cmNlIGNvZGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzb3VyY2UgY29kZS5cbiAqL1xuZnVuY3Rpb24gdG9Tb3VyY2UoZnVuYykge1xuICBpZiAoZnVuYyAhPSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmdW5jVG9TdHJpbmcuY2FsbChmdW5jKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gKGZ1bmMgKyAnJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogUGVyZm9ybXMgYVxuICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSB9O1xuICogdmFyIG90aGVyID0geyAnYSc6IDEgfTtcbiAqXG4gKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKCdhJywgJ2EnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKE5hTiwgTmFOKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gb3RoZXIgfHwgKHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXIpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGxpa2VseSBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNBcmd1bWVudHMgPSBiYXNlSXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSkgPyBiYXNlSXNBcmd1bWVudHMgOiBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgJiZcbiAgICAhcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvclxuICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgIWlzRnVuY3Rpb24odmFsdWUpO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uaXNBcnJheUxpa2VgIGV4Y2VwdCB0aGF0IGl0IGFsc28gY2hlY2tzIGlmIGB2YWx1ZWBcbiAqIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS1saWtlIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjMuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBidWZmZXIsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0J1ZmZlcihuZXcgQnVmZmVyKDIpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQnVmZmVyKG5ldyBVaW50OEFycmF5KDIpKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0J1ZmZlciA9IG5hdGl2ZUlzQnVmZmVyIHx8IHN0dWJGYWxzZTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIFNhZmFyaSA5IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5cyBhbmQgb3RoZXIgY29uc3RydWN0b3JzLlxuICB2YXIgdGFnID0gYmFzZUdldFRhZyh2YWx1ZSk7XG4gIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnIHx8IHRhZyA9PSBhc3luY1RhZyB8fCB0YWcgPT0gcHJveHlUYWc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTGVuZ3RoKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKCczJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmXG4gICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZVxuICogYE9iamVjdGAgY29uc3RydWN0b3Igb3Igb25lIHdpdGggYSBgW1tQcm90b3R5cGVdXWAgb2YgYG51bGxgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC44LjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqIH1cbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdExpa2UodmFsdWUpIHx8IGJhc2VHZXRUYWcodmFsdWUpICE9IG9iamVjdFRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcHJvdG8gPSBnZXRQcm90b3R5cGUodmFsdWUpO1xuICBpZiAocHJvdG8gPT09IG51bGwpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB2YXIgQ3RvciA9IGhhc093blByb3BlcnR5LmNhbGwocHJvdG8sICdjb25zdHJ1Y3RvcicpICYmIHByb3RvLmNvbnN0cnVjdG9yO1xuICByZXR1cm4gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yIGluc3RhbmNlb2YgQ3RvciAmJlxuICAgIGZ1bmNUb1N0cmluZy5jYWxsKEN0b3IpID09IG9iamVjdEN0b3JTdHJpbmc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdHlwZWQgYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KFtdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc1R5cGVkQXJyYXkgPSBub2RlSXNUeXBlZEFycmF5ID8gYmFzZVVuYXJ5KG5vZGVJc1R5cGVkQXJyYXkpIDogYmFzZUlzVHlwZWRBcnJheTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgcGxhaW4gb2JqZWN0IGZsYXR0ZW5pbmcgaW5oZXJpdGVkIGVudW1lcmFibGUgc3RyaW5nXG4gKiBrZXllZCBwcm9wZXJ0aWVzIG9mIGB2YWx1ZWAgdG8gb3duIHByb3BlcnRpZXMgb2YgdGhlIHBsYWluIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDMuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBwbGFpbiBvYmplY3QuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8uYXNzaWduKHsgJ2EnOiAxIH0sIG5ldyBGb28pO1xuICogLy8gPT4geyAnYSc6IDEsICdiJzogMiB9XG4gKlxuICogXy5hc3NpZ24oeyAnYSc6IDEgfSwgXy50b1BsYWluT2JqZWN0KG5ldyBGb28pKTtcbiAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9XG4gKi9cbmZ1bmN0aW9uIHRvUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGNvcHlPYmplY3QodmFsdWUsIGtleXNJbih2YWx1ZSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAzLjAuMFxuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzSW4obmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYicsICdjJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqL1xuZnVuY3Rpb24ga2V5c0luKG9iamVjdCkge1xuICByZXR1cm4gaXNBcnJheUxpa2Uob2JqZWN0KSA/IGFycmF5TGlrZUtleXMob2JqZWN0LCB0cnVlKSA6IGJhc2VLZXlzSW4ob2JqZWN0KTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmFzc2lnbmAgZXhjZXB0IHRoYXQgaXQgcmVjdXJzaXZlbHkgbWVyZ2VzIG93biBhbmRcbiAqIGluaGVyaXRlZCBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3RzIGludG8gdGhlXG4gKiBkZXN0aW5hdGlvbiBvYmplY3QuIFNvdXJjZSBwcm9wZXJ0aWVzIHRoYXQgcmVzb2x2ZSB0byBgdW5kZWZpbmVkYCBhcmVcbiAqIHNraXBwZWQgaWYgYSBkZXN0aW5hdGlvbiB2YWx1ZSBleGlzdHMuIEFycmF5IGFuZCBwbGFpbiBvYmplY3QgcHJvcGVydGllc1xuICogYXJlIG1lcmdlZCByZWN1cnNpdmVseS4gT3RoZXIgb2JqZWN0cyBhbmQgdmFsdWUgdHlwZXMgYXJlIG92ZXJyaWRkZW4gYnlcbiAqIGFzc2lnbm1lbnQuIFNvdXJjZSBvYmplY3RzIGFyZSBhcHBsaWVkIGZyb20gbGVmdCB0byByaWdodC4gU3Vic2VxdWVudFxuICogc291cmNlcyBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuNS4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7XG4gKiAgICdhJzogW3sgJ2InOiAyIH0sIHsgJ2QnOiA0IH1dXG4gKiB9O1xuICpcbiAqIHZhciBvdGhlciA9IHtcbiAqICAgJ2EnOiBbeyAnYyc6IDMgfSwgeyAnZSc6IDUgfV1cbiAqIH07XG4gKlxuICogXy5tZXJnZShvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IHsgJ2EnOiBbeyAnYic6IDIsICdjJzogMyB9LCB7ICdkJzogNCwgJ2UnOiA1IH1dIH1cbiAqL1xudmFyIG1lcmdlID0gY3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UsIHNyY0luZGV4KSB7XG4gIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgc3JjSW5kZXgpO1xufSk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBgdmFsdWVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byByZXR1cm4gZnJvbSB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY29uc3RhbnQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3RzID0gXy50aW1lcygyLCBfLmNvbnN0YW50KHsgJ2EnOiAxIH0pKTtcbiAqXG4gKiBjb25zb2xlLmxvZyhvYmplY3RzKTtcbiAqIC8vID0+IFt7ICdhJzogMSB9LCB7ICdhJzogMSB9XVxuICpcbiAqIGNvbnNvbGUubG9nKG9iamVjdHNbMF0gPT09IG9iamVjdHNbMV0pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBjb25zdGFudCh2YWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IGl0IHJlY2VpdmVzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSB9O1xuICpcbiAqIGNvbnNvbGUubG9nKF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0KTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgYGZhbHNlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMTMuMFxuICogQGNhdGVnb3J5IFV0aWxcbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udGltZXMoMiwgXy5zdHViRmFsc2UpO1xuICogLy8gPT4gW2ZhbHNlLCBmYWxzZV1cbiAqL1xuZnVuY3Rpb24gc3R1YkZhbHNlKCkge1xuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWVyZ2U7XG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XHJcbiAgICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gZ2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByaXZhdGVNYXAuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHByaXZhdGVNYXAsIHZhbHVlKSB7XHJcbiAgICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZU1hcC5zZXQocmVjZWl2ZXIsIHZhbHVlKTtcclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRpZiAoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUubDtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdH1cblx0cmV0dXJuIG1vZHVsZTtcbn07XG4iLCJpbXBvcnQge1Bob25lTnVtYmVyV2lkZ2V0X0NPTlNUU30gZnJvbSAnLi9XaWRnZXRzL1Bob25lTnVtYmVyV2lkZ2V0JztcblxuY29uc3QgQ09OU1RTID0ge1xuICBkaXNhYmxlZENsYXNzOiAnZ2lneWEtZGlzYWJsZWQnLFxuICByZXNlbmRDb3VudERvd25BdHRyOiAnZGF0YS1jb3VudGRvd24tbGFiZWwnLFxuICBoaWRkZW5DbGFzczogJ2dpZ3lhLWhpZGRlbidcbn07XG5cbmV4cG9ydCBjbGFzcyBBcGlDb3VudGRvd25IZWxwZXIge1xuICBwcm90ZWN0ZWQgaW50ZXJ2YWxJRDtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGVsOiBIVE1MRWxlbWVudCkge31cblxuICBwdWJsaWMgYXN5bmMgc3RhcnRDb3VudGRvd24oKSB7XG4gICAgdGhpcy5zaG93KCk7XG4gICAgYXdhaXQgdGhpcy5zdGFydFJlc2VuZENvdW50RG93bigxMCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgc3RhcnRSZXNlbmRDb3VudERvd24oY291bnRlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgdGhpcy5jaGFuZ2VSZXNlbmRCbG9ja2VkTWVzc2FnZShjb3VudGVyKTtcblxuICAgICAgdGhpcy5pbnRlcnZhbElEID0gc2V0SW50ZXJ2YWwoICgpID0+IHtcbiAgICAgICAgaWYgKGNvdW50ZXIgPT09IDEpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJRCk7XG4gICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY291bnRlciAtPSAxO1xuICAgICAgICAgIHRoaXMuY2hhbmdlUmVzZW5kQmxvY2tlZE1lc3NhZ2UoY291bnRlcik7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwMDApO1xuICAgIH0pO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgY2hhbmdlUmVzZW5kQmxvY2tlZE1lc3NhZ2UoY291bnQ6IG51bWJlcikge1xuICAgIGNvbnN0IGNvdW50ZG93bkxhYmVsID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoQ09OU1RTLnJlc2VuZENvdW50RG93bkF0dHIpIHx8ICcnO1xuICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gY291bnRkb3duTGFiZWw/LnJlcGxhY2UoUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLnJlc2VuZENvdW50VGVtcGxhdGUsIGNvdW50Py50b1N0cmluZygpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzaG93KCkge1xuICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZShDT05TVFMuaGlkZGVuQ2xhc3MpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGhpZGUoKSB7XG4gICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKENPTlNUUy5oaWRkZW5DbGFzcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5pbnRlcnZhbElEKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJRCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQge1Bob25lTnVtYmVyV2lkZ2V0X0NPTlNUU30gZnJvbSAnLi9XaWRnZXRzL1Bob25lTnVtYmVyV2lkZ2V0JztcblxuY29uc3QgQ09OU1RTID0ge1xuICBkaXNhYmxlZENsYXNzOiAnZ2lneWEtZGlzYWJsZWQnLFxuICByZXNlbmRDb3VudERvd25BdHRyOiAnZGF0YS1jb3VudGRvd24tbGFiZWwnXG59O1xuXG5leHBvcnQgY2xhc3MgQXBpTGlua0hlbHBlciB7XG4gIHByaXZhdGUgcmVzZW5kVGltZW91dElkO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgb3JpZ2luYWxUZXh0OiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBvbkNsaWNrID0gKCkgPT4ge1xuICAgIHRoaXMuY2FsbEFwaSgpO1xuICAgIHRoaXMudGVtcG9yYXJpbHlEaXNhYmxlKCk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGVsOiBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjYWxsQXBpOiBGdW5jdGlvbikge1xuICAgIHRoaXMub3JpZ2luYWxUZXh0ID0gdGhpcy5lbD8uaW5uZXJIVE1MO1xuICB9XG5cbiAgcHVibGljIGluaXQoKSB7XG4gICAgdGhpcy50ZW1wb3JhcmlseURpc2FibGUoKTtcbiAgfVxuXG4gIHB1YmxpYyBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLnJlc2VuZFRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVzZW5kVGltZW91dElkKTtcbiAgICB9XG5cbiAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmVsLCAnY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICB9XG5cbiAgcHJpdmF0ZSB0ZW1wb3JhcmlseURpc2FibGUoKSB7XG4gICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgdGhpcy5zdGFydFJlc2VuZENvdW50RG93bigxMCk7XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0UmVzZW5kQ291bnREb3duKGNvdW50KSB7XG4gICAgaWYgKGNvdW50KSB7XG4gICAgICB0aGlzLmNoYW5nZVJlc2VuZEJsb2NrZWRNZXNzYWdlKGNvdW50KTtcbiAgICAgIHRoaXMucmVzZW5kVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnN0YXJ0UmVzZW5kQ291bnREb3duKGNvdW50IC0gMSksIDEwMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZVJlc2VuZENvZGUoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVuYWJsZVJlc2VuZENvZGUoKSB7XG4gICAgdGhpcy5lbC5pbm5lckhUTUwgPSB0aGlzLm9yaWdpbmFsVGV4dDtcbiAgICB0aGlzLmVuYWJsZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNhYmxlKCkge1xuICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmVsLCBDT05TVFMuZGlzYWJsZWRDbGFzcyk7XG4gICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5lbCwgJ2NsaWNrJywgdGhpcy5vbkNsaWNrKTtcbiAgfVxuXG4gIHByaXZhdGUgY2hhbmdlUmVzZW5kQmxvY2tlZE1lc3NhZ2UoY291bnQ6IG51bWJlcikge1xuICAgIGNvbnN0IGNvdW50ZG93bkxhYmVsID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoQ09OU1RTLnJlc2VuZENvdW50RG93bkF0dHIpIHx8ICcnO1xuICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gY291bnRkb3duTGFiZWw/LnJlcGxhY2UoUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLnJlc2VuZENvdW50VGVtcGxhdGUsIGNvdW50Py50b1N0cmluZygpKTtcbiAgfVxuXG4gIHByaXZhdGUgZW5hYmxlKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuZWwsIENPTlNUUy5kaXNhYmxlZENsYXNzKTtcbiAgICBnaWd5YS51dGlscy5ET00uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmVsLCAnY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICB9XG59XG4iLCJpbXBvcnQge0RlZXBGcmVlemUsIGVuZHNXaXRofSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7QmFzZUZvcm1XaWRnZXR9IGZyb20gJy4vQmFzZUZvcm1XaWRnZXQnO1xuaW1wb3J0IHtJRm9ybVJlc3BvbnNlfSBmcm9tICcuL1NjcmVlblNldFBsdWdpbic7XG5pbXBvcnQge1RyYW5zbGF0ZWRXaWRnZXR9IGZyb20gJy4vV2lkZ2V0cy9UcmFuc2xhdGVkV2lkZ2V0JztcbmltcG9ydCB7QmluZGluZ1dpZGdldH0gZnJvbSAnLi9XaWRnZXRzL0JpbmRpbmdXaWRnZXQnO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7SUZvcm1JbnB1dH0gZnJvbSAnLi9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7RXJyb3JEaXNwbGF5RWxlbWVudH0gZnJvbSAnLi9FcnJvckRpc3BsYXlFbGVtZW50JztcbmltcG9ydCB7SUxvZ2luRGF0YVByb3ZpZGVyfSBmcm9tICcuL0RhdGFQcm92aWRlcnMvSUxvZ2luRGF0YVByb3ZpZGVyJztcbmltcG9ydCB7Y2hhbmdlRXhwYW5kZWRTdGF0ZSwgSUV4cGFuZGFibGVXaWRnZXR9IGZyb20gJy4vdXRpbHMvZXhwYW5kYWJsZVdpZGdldCc7XG5cbmV4cG9ydCB2YXIgQXV0aE1ldGhvZF9DT05TVFMgPSB7XG4gIGF1dGhNZXRob2Q6ICdkYXRhLWF1dGgtbWV0aG9kJyxcbiAgaXNFeHBhbmRlZEF0dHI6ICdkYXRhLWNhcmQtZXhwYW5kZWQnLFxuICBjb250YWluZXJDbGFzczogJ2dpZ3lhLWNvbnRhaW5lcicsXG4gIGNvbnRhaW5lckVuYWJsZWRDbGFzczogJ2dpZ3lhLWNvbnRhaW5lci1lbmFibGVkJyxcbiAgZGVwczogW1RyYW5zbGF0ZWRXaWRnZXQsIEJpbmRpbmdXaWRnZXQsIEVycm9yRGlzcGxheUVsZW1lbnRdXG59O1xuRGVlcEZyZWV6ZShBdXRoTWV0aG9kX0NPTlNUUyk7XG5cbmNvbnN0IGF1dGhNZXRob2RzOiB7W2Zvcm1JZDogc3RyaW5nXTogQmFzZUF1dGhNZXRob2RXaWRnZXRbXX0gPSB7fTtcblxuLy8gVE9ETzogaW1wbGVtZW50IElFeHBhbmRhYmxlIHdpZGdldCBhbmQgdXNlIG1ldGhvZHMgdG8gZXhwYW5kL2NvbGxhcHNlIGZyb20gcGFyZW50XG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUF1dGhNZXRob2RXaWRnZXQgZXh0ZW5kcyBCYXNlRm9ybVdpZGdldDxIVE1MRGl2RWxlbWVudD4gaW1wbGVtZW50cyBJRXhwYW5kYWJsZVdpZGdldCB7XG4gIHByb3RlY3RlZCBpc0luaXRpYWxpemVkID0gZmFsc2U7XG4gIHByb3RlY3RlZCBhYnN0cmFjdCBmaWVsZE5hbWU7XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGdldCBzdWJtaXRBcGkoKTtcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGdldCBzdWJtaXRBcGlQYXJhbXMoKTtcblxuICBwcm90ZWN0ZWQgb3JpZ2luYWxUYWJJbmRleCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IocHVibGljIF9mb3JtLCBlbDogSFRNTERpdkVsZW1lbnQsIHJlc2V0Q1NTPzogYm9vbGVhbikge1xuICAgIHN1cGVyKF9mb3JtLCBlbCwgcmVzZXRDU1MpO1xuICB9XG5cbiAgcHVibGljIGFkZFdpZGdldFRvRm9ybSgpIHtcbiAgICBpZiAoIWF1dGhNZXRob2RzW3RoaXMuX2Zvcm0uSURdKSB7XG4gICAgICBhdXRoTWV0aG9kc1t0aGlzLl9mb3JtLklEXSA9IFtdO1xuICAgIH1cblxuICAgIGF1dGhNZXRob2RzW3RoaXMuX2Zvcm0uSURdLnB1c2godGhpcyk7XG4gIH1cblxuICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpIHtcbiAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuYWRkQnV0dG9uSGFuZGxlcih0aGlzLnN1Ym1pdEJ1dHRvbiwgKCkgPT4gdGhpcy5zdWJtaXQoKSwgJ3N1Ym1pdCcpO1xuICAgICAgdGhpcy5hZGREb21FdmVudExpc3RlbmVyKHRoaXMudG9nZ2xlRWxlbWVudCwgJ2NsaWNrJywgKCkgPT4gdGhpcy5vbkNsaWNrKCkpO1xuICAgICAgdGhpcy5hZGREb21FdmVudExpc3RlbmVyKHRoaXMuZm9ybUZpZWxkLmluc3RhbmNlRWxlbWVudCwgJ2NoYW5nZScsICgpID0+IHRoaXMuaGlkZVdpZGdldEVycm9ycygpKTtcblxuICAgICAgdGhpcy5hZGRXaWRnZXRUb0Zvcm0oKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZXhwYW5kKCkge1xuICAgIHRoaXMuY29sbGFwc2VPdGhlckF1dGhNZXRob2RXaWRnZXRzKCk7XG4gICAgdGhpcy5pc0V4cGFuZGVkID0gdHJ1ZTtcbiAgICB0aGlzLmZvY3VzSW5wdXQoKTtcbiAgICB0aGlzLnJlbW92ZUZyb21UYWJPcmRlcigpO1xuICB9XG5cbiAgcHVibGljIGNvbGxhcHNlKCkge1xuICAgIHRoaXMuaXNFeHBhbmRlZCA9IGZhbHNlO1xuICAgIHRoaXMuYWRkVG9UYWJPcmRlcigpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uQ2xpY2soKSB7XG4gICAgdGhpcy5leHBhbmQoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBzdWJtaXQoKSB7XG4gICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuc2hvdWxkQ29ubmVjdEFjY291bnRzID0gdHJ1ZTtcblxuICAgIHRoaXMuX2Zvcm0uc3VibWl0KHtcbiAgICAgIHN1Ym1pdEFwaVBhcmFtczogdGhpcy5zdWJtaXRBcGlQYXJhbXMsXG4gICAgICBjdXN0b21TdWJtaXRBcGk6IHRoaXMuc3VibWl0QXBpLFxuICAgICAgb25BZnRlclN1Ym1pdENhbGxiYWNrOiAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSAhPSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgIHRoaXMuZGlzcGxheUVycm9yTWVzc2FnZShyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBkaXNwbGF5RXJyb3JNZXNzYWdlKHJlc3BvbnNlKSB7XG4gICAgY29uc3QgdGV4dCA9IHRoaXMuZ2V0RXJyb3JUZXh0RnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICB0aGlzLnJlbmRlcldpZGdldEVycm9yKHJlc3BvbnNlLmVycm9yQ29kZSwgdGV4dCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyV2lkZ2V0RXJyb3IoZXJyb3JDb2RlOiBudW1iZXIsIGVycm9yTWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fZm9ybS5fZXJyb3JEaXNwbGF5RWxlbWVudHNbdGhpcy5maWVsZE5hbWVdPy5mb3JFYWNoKChlcnJvckVsZW1lbnQ6IEVycm9yRGlzcGxheUVsZW1lbnQpID0+IHtcbiAgICAgIGVycm9yRWxlbWVudC5zaG93RXJyb3Ioe1xuICAgICAgICBlcnJvck1lc3NhZ2UsIGVycm9yQ29kZVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgaGlkZVdpZGdldEVycm9ycygpOiB2b2lkIHtcbiAgICB0aGlzLl9mb3JtLl9lcnJvckRpc3BsYXlFbGVtZW50c1t0aGlzLmZpZWxkTmFtZV0/LmZvckVhY2goKGVycm9yRWxlbWVudDogRXJyb3JEaXNwbGF5RWxlbWVudCkgPT4ge1xuICAgICAgZXJyb3JFbGVtZW50LmhpZGVFcnJvcigpO1xuICAgIH0pO1xuICB9XG5cblxuICBwcm90ZWN0ZWQgZ2V0RXJyb3JLZXlGcm9tUmVzcG9uc2UocmVzcG9uc2U6IElGb3JtUmVzcG9uc2UpOiBzdHJpbmcge1xuICAgIGNvbnN0IGVycm9yQ29kZSA9IE51bWJlcihyZXNwb25zZS5lcnJvckNvZGUpO1xuXG4gICAgaWYgKGVycm9yQ29kZSA9PT0gR1NFcnJvcnMuSU5WQUxJRF9QQVJBTUVURVJfVkFMVUUgJiYgcmVzcG9uc2UuZXJyb3JEZXRhaWxzKSB7XG4gICAgICBpZiAoZW5kc1dpdGgocmVzcG9uc2UuZXJyb3JEZXRhaWxzLCAnVG9rZW4gaGFzIGJlZW4gcmV2b2tlZCcpKSB7XG4gICAgICAgIHJldHVybiAnb3RwX2NvZGVfZXhwaXJlZCc7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbmRzV2l0aChyZXNwb25zZS5lcnJvckRldGFpbHMsICdjb2RlJykpIHtcbiAgICAgICAgcmV0dXJuICdwbGVhc2VfZW50ZXJfYV92YWxpZF9jb2RlJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZm9ybS5nZXRFcnJvcktleShyZXNwb25zZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYWRkVG9UYWJPcmRlcigpIHtcbiAgICBpZiAodGhpcy5vcmlnaW5hbFRhYkluZGV4ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnRvZ2dsZUVsZW1lbnQ/LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCB0aGlzLm9yaWdpbmFsVGFiSW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCByZW1vdmVGcm9tVGFiT3JkZXIoKSB7XG4gICAgdGhpcy5vcmlnaW5hbFRhYkluZGV4ID0gdGhpcy50b2dnbGVFbGVtZW50LmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICB0aGlzLnRvZ2dsZUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGZvY3VzSW5wdXQoKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmZvcm1GaWVsZD8uaW5zdGFuY2VFbGVtZW50Py5mb2N1cygpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBjb2xsYXBzZU90aGVyQXV0aE1ldGhvZFdpZGdldHMoKSB7XG4gICAgYXV0aE1ldGhvZHNbdGhpcy5fZm9ybS5JRF0uZm9yRWFjaChhdXRoTWV0aG9kID0+IGF1dGhNZXRob2QgIT09IHRoaXMgJiYgYXV0aE1ldGhvZC5jb2xsYXBzZSgpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBzZXQgaXNFeHBhbmRlZChleHBhbmRlZDogYm9vbGVhbikge1xuICAgIGNoYW5nZUV4cGFuZGVkU3RhdGUodGhpcy5pbnN0YW5jZUVsZW1lbnQsIEF1dGhNZXRob2RfQ09OU1RTLmlzRXhwYW5kZWRBdHRyLCBleHBhbmRlZCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IHN1Ym1pdEJ1dHRvbigpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5xdWVyeVNlbGVjdG9yKCcuZ2lneWEtaW5wdXQtc3VibWl0Jyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IHRvZ2dsZUVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcignLmdpZ3lhLWNhcmQtaGVhZGVyJyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0RmllbGQoZmllbGROYW1lKTogSUZvcm1JbnB1dCB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm0uZ2V0RmllbGQoZmllbGROYW1lKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgZm9ybUZpZWxkKCk6IElGb3JtSW5wdXQge1xuICAgIHJldHVybiB0aGlzLmdldEZpZWxkKHRoaXMuZmllbGROYW1lKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgZGF0YVByb3ZpZGVyKCk6IElMb2dpbkRhdGFQcm92aWRlciB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm0uZGF0YVByb3ZpZGVyO1xuICB9XG59XG4iLCJpbXBvcnQgeyBnZXRDb25zZW50U3RhdHVzIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL2FwaUJvb3RzdHJhcCc7XG5pbXBvcnQge1xuICAgIERlZXBGcmVlemUsXG4gICAgZmlyc3RQYXJ0LFxuICAgIEZvckVhY2gsXG4gICAgRm9yRWFjaFByb3AsXG4gICAgSU1hcCxcbiAgICBTb21lLFxufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7U2NyZWVufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5pbXBvcnQge1RlbXBsYXRlRWxlbWVudCwgVGVtcGxhdGVFbGVtZW50X0NPTlNUU30gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xuaW1wb3J0IHtFcnJvclR5cGUsIElFcnJvckluZm99IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JzJztcbmltcG9ydCB7XG4gICAgRm9ybUlucHV0LFxuICAgIEZvcm1JbnB1dF9DT05TVFMsXG4gICAgSUZpZWxkU2NoZW1hLFxuICAgIElGb3JtSW5wdXQsXG4gICAgSVNjaGVtYUZpZWxkQmFzZSxcbiAgICBJU2NoZW1hRmllbGRzLFxuICAgIElWYWxpZGF0aW9uSW5mbyxcbiAgICBWYWxpZGl0eVN0YXRlcyxcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7RXJyb3JEaXNwbGF5RWxlbWVudH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvckRpc3BsYXlFbGVtZW50JztcbmltcG9ydCB7QmFzZUZvcm1XaWRnZXQsIElGb3JtV2lkZ2V0fSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7UmV0eXBlUGFzc3dvcmRJbnB1dH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUmV0eXBlUGFzc3dvcmRJbnB1dCc7XG5pbXBvcnQge1JlbWVtZWJlcklucHV0fSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9SZW1lbWViZXJJbnB1dCc7XG5pbXBvcnQge1NlY3JldFF1ZXN0aW9uV2lkZ2V0fSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvU2VjcmV0UXVlc3Rpb25XaWRnZXQnO1xuaW1wb3J0IHtDb250YWluZXJXaWRnZXR9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Db250YWluZXJXaWRnZXQnO1xuaW1wb3J0IHtCYXNlU2VydmVyV2lkZ2V0LCBTZXJ2ZXJTdGF0ZXN9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNlcnZlcldpZGdldCc7XG5pbXBvcnQge0xvZ2luTW9kZXN9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvTG9naW5Nb2Rlcyc7XG5pbXBvcnQge0Jhc2VQYXNzd29yZElucHV0fSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9QYXNzd29yZElucHV0cyc7XG5pbXBvcnQge1xuICAgIElBZnRlclZhbGlkYXRpb25FdmVudCxcbiAgICBJQmFzZUZvcm1EYXRhRXZlbnQsXG4gICAgSUJhc2VJblNjcmVlbkV2ZW50LFxuICAgIElCZWZvcmVTdWJtaXRFdmVudCxcbiAgICBJQmVmb3JlVmFsaWRhdGlvbkV2ZW50LFxuICAgIElGaWVsZENoYW5nZUV2ZW50LFxuICAgIElTdWJtaXRFdmVudFxufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0V2ZW50cy5kJztcbmltcG9ydCB7bmFtZXNwYWNlLCBwb3N0UHJvY2Vzc0Zvcm19IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ29uc2VudCc7XG5pbXBvcnQge0lGb3JtUmVzcG9uc2UsIElTY3JlZW5TZXRQYXJhbXN9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcbmltcG9ydCB7R1NFcnJvcnN9IGZyb20gJy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7SUZvcm1Db250ZXh0fSBmcm9tICcuL0lGb3JtQ29udGV4dCc7XG5pbXBvcnQge0J1dHRvbklucHV0fSBmcm9tICcuL0lucHV0cy9CdXR0b25JbnB1dCc7XG5pbXBvcnQge0JlaGF2aW9yVHJhY2tpbmdDb250ZXh0fSBmcm9tICcuL0JlaGF2aW9yVHJhY2tpbmcnO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSBcIi4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL1NlcnZpY2VzL0ZsYWdTZXJ2aWNlXCI7XG5pbXBvcnQge2dldENvbnNlbnREYXRhRm9yU2NyZWVuU2V0LCBoYXNDb25zZW50TGljZW5zZX0gZnJvbSAnLi9Db25zZW50RGF0YSc7XG5pbXBvcnQge0Zvcm1EYXRhUHJvdmlkZXJ9IGZyb20gJy4vRGF0YVByb3ZpZGVycy9Gb3JtRGF0YVByb3ZpZGVyJztcbmltcG9ydCB7SUZvcm1EYXRhUHJvdmlkZXJ9IGZyb20gJy4vRGF0YVByb3ZpZGVycy9JRm9ybURhdGFQcm92aWRlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBhcmFtZXRlcnNEYXRhIHtcbiAgICBmaW5hbGl6ZVJlZ2lzdHJhdGlvbj86IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIElGb3JtRGF0YSBleHRlbmRzIElNYXA8YW55PiB7XG4gICAgcmVtZW1iZXJNZT86IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIElGb3JtRGF0YUZpbHRlciB7XG4gICAgZmlsdGVyT3V0V2lkZ2V0c1RvU2VuZDogKElGb3JtRGF0YSkgPT4gSUZvcm1EYXRhO1xufVxuZXhwb3J0IGludGVyZmFjZSBJRm9ybVR5cGUge1xuICAgIG5ldyAoc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZyk6IEJhc2VGb3JtO1xuXG4gICAgQ09OU1RTOiB7XG4gICAgICAgIGdpZ3lhQ2xhc3M6IHN0cmluZztcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IEZvcm1fQ09OU1RTID0ge1xuICAgIG9yaWdpbmFsU3VjY2Vzc1NjcmVlbjogJ2RhdGEtb3JpZ2luYWwtc3VjY2Vzcy1zY3JlZW4nLFxuICAgIHN1Y2Nlc3NTY3JlZW46ICdkYXRhLW9uLXN1Y2Nlc3Mtc2NyZWVuJyxcbiAgICBhdXRvU2tpcFNjcmVlbjogJ2RhdGEtb24tYXV0by1za2lwLXNjcmVlbicsXG4gICAgYXV0b1NraXBGbGFnOiAnZGF0YS1hdXRvLXNraXAnLFxuICAgIHNjcmVlblNldFNraXBwZWRTY3JlZW46ICdkYXRhLW9uLXNjcmVlbnNldC1za2lwcGVkLXNjcmVlbicsXG4gICAgZm9ybUVycm9yQ2xhc3M6ICdnaWd5YS1mb3JtLWVycm9yJyxcbiAgICBkZWZhdWx0Q2hlY2tlZEF0dHJpYnV0ZTogJ2RhdGEtY2hlY2tlZCcsXG59O1xuZXhwb3J0IGludGVyZmFjZSBJTmVlZGVkRGF0YU1ldGhvZENvbmZpZyB7XG4gIHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8IHt9O1xuICBjYWNoZT86IGJvb2xlYW47XG4gIHJlc3BvbnNlSGFuZGxlcj86IDxUUmVzcG9uc2UgPSBhbnk+KHJlczogVFJlc3BvbnNlKSA9PiBUUmVzcG9uc2UgfCB1bmtub3duXG4gIHNob3VsZEV4ZWN1dGU/OiAoKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xufVxuZXhwb3J0IGludGVyZmFjZSBJTmVlZGVkRGF0YSB7XG4gIFttZXRob2ROYW1lOiBzdHJpbmddOiBJTmVlZGVkRGF0YU1ldGhvZENvbmZpZ1xufVxuZXhwb3J0IGNvbnN0IENVU1RPTV9WQUxJREFUSU9OX1RJTUVPVVRfV0FSTklORyA9IDEwMDAwO1xuRGVlcEZyZWV6ZShGb3JtX0NPTlNUUyk7XG5jb25zdCBOT1RfSU1QTEVNRU5URUQgPSAnTm90IGltcGxlbWVudGVkJztcbmV4cG9ydCB0eXBlIFNjaGVtYU5hbWUgPSAnZGF0YScgfCAncHJvZmlsZScgfCAnc3Vic2NyaXB0aW9ucycgfCAncHJlZmVyZW5jZXMnIHwgJ29yZ2FuaXphdGlvbicgfCAncmVxdWVzdGVyJztcbmV4cG9ydCBjbGFzcyBCYXNlRm9ybSBleHRlbmRzIFRlbXBsYXRlRWxlbWVudDxIVE1MRm9ybUVsZW1lbnQ+IHtcbiAgICAvLyNyZWdpb24gRm9ybSBsaWJyYXJ5XG5cbiAgICBwdWJsaWMgZ2V0IGRhdGFQcm92aWRlcigpOiBJRm9ybURhdGFQcm92aWRlciB7XG4gICAgICAgIHJldHVybiBuZXcgRm9ybURhdGFQcm92aWRlcih0aGlzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBGb3Jtc0xpYnJhcnk6IElNYXA8SUZvcm1UeXBlPiA9IHt9O1xuXG4gICAgcHJvdGVjdGVkIHNldHRpbmdzID0ge1xuICAgICAgICBzdXBwb3J0Q29uc2VudERhdGE6IGZhbHNlXG4gICAgfTtcblxuICAgIHByaXZhdGUgX3N1Ym1pdEJ1dHRvbkNsaWNrZWQ6IGJvb2xlYW47XG4gICAgcHVibGljIGdldCBzdWJtaXRCdXR0b25DbGlja2VkICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1Ym1pdEJ1dHRvbkNsaWNrZWQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZEZvcm1Ub0xpYnJhcnkoZm9ybTogSUZvcm1UeXBlKSB7XG4gICAgICAgIEJhc2VGb3JtLkZvcm1zTGlicmFyeVtmb3JtLkNPTlNUUy5naWd5YUNsYXNzXSA9IGZvcm07XG4gICAgfVxuXG4gICAgc3RhdGljIHJlZ2lzdGVyRm9ybXMocGFyZW50OiBTY3JlZW4pIHtcbiAgICAgICAgY29uc3QgZm9ybXMgPSBuZXcgQXJyYXk8QmFzZUZvcm0+KCk7XG5cbiAgICAgICAgRm9yRWFjaFByb3AoQmFzZUZvcm0uRm9ybXNMaWJyYXJ5LCAoZm9ybVR5cGUsIGdpZ3lhQ2xhc3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gcGFyZW50LnRlbXBsYXRlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGBmb3JtLiR7Z2lneWFDbGFzc31gKTtcbiAgICAgICAgICAgIEZvckVhY2goZWxlbWVudHMsIChlbDogSFRNTEZvcm1FbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gIzQzOTA0IC0gRW5zdXJlIGZvcm0gaXMgbmV2ZXIgc3VibWl0dGVkLCBldmVuIGluIGNhc2Ugb2YgaW5pdGlhbGl6YXRpb24gZXJyb3IuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB3b3JrcyBieSBtb2RpZnlpbmcgdGhlIEhUTUwgYXR0cmlidXRlIG9mIHRoZSBpbnN0YW5jZSBlbGVtZW50IGJlZm9yZSBpbml0aWFsaXphdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSBlbGVtZW50IGlzIGNsb25lZCBpbnRvIGFuIGluc3RhbmNlLCBhbGwgc3VibWlzc2lvbnMgd2lsbCBiZSBjYW5jZWxsZWQgYnkgZGVmYXVsdC5cbiAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ29uc3VibWl0JywgJ3JldHVybiBmYWxzZTsnKTtcbiAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ21ldGhvZCcsICdwb3N0Jyk7XG5cbiAgICAgICAgICAgICAgICBmb3Jtcy5wdXNoKG5ldyBmb3JtVHlwZShwYXJlbnQsIGVsLCBnaWd5YUNsYXNzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZvcm1zO1xuICAgIH1cblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBhdXRvU2tpcDogYm9vbGVhbjtcbiAgICBwdWJsaWMgb3JpZ2luYWxTdWNjZXNzU2NyZWVuOiBzdHJpbmc7XG4gICAgcHVibGljIHN1Y2Nlc3NTY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgYXV0b1NraXBTY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgc2NyZWVuU2V0U2tpcHBlZFNjcmVlbjogc3RyaW5nO1xuICAgIHByaXZhdGUgc3VibWl0SGFuZGxlcjogKGUpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBmaWVsZENoYW5nZWRIYW5kbGVyOiAoZSkgPT4gdm9pZDtcbiAgICBwcml2YXRlIGlzV2FpdGluZ0ZvclNlcnZlclJlc3BvbnNlOiBib29sZWFuO1xuXG4gICAgLy8gRm9ybSBpbnB1dHNcbiAgICBwdWJsaWMgZGF0YVRvU2VydmVyID0gbmV3IEFycmF5PElGb3JtSW5wdXQ+KCk7XG5cbiAgICBwcml2YXRlIF9keW5hbWljSW5wdXRzID0gbmV3IEFycmF5PEZvcm1JbnB1dD4oKTtcbiAgICBwcml2YXRlIF9pbnB1dHMgPSBuZXcgQXJyYXk8Rm9ybUlucHV0PigpO1xuICAgIHByaXZhdGUgX2Vycm9yRGlzcGxheUVsZW1lbnRzOiBJTWFwPEFycmF5PEVycm9yRGlzcGxheUVsZW1lbnQ+PiA9IHt9O1xuICAgIHByaXZhdGUgX3dpZGdldHMgPSBuZXcgQXJyYXk8SUZvcm1XaWRnZXQ+KCk7XG4gICAgcHJpdmF0ZSBiZWZvcmVMb2FkRGF0YTogYW55O1xuXG4gICAgcHVibGljIF9zdWJtaXRCdXR0b25zID0gbmV3IEFycmF5PEJ1dHRvbklucHV0PigpO1xuICAgIHB1YmxpYyBfdmFsaWRhdGVkUGFzc3dvcmQ6IEZvcm1JbnB1dDtcbiAgICBwdWJsaWMgX3Bhc3N3b3JkSW5wdXRzID0gbmV3IEFycmF5PEZvcm1JbnB1dD4oKTtcbiAgICBwdWJsaWMgX3Bhc3N3b3JkUmV0eXBlcyA9IG5ldyBBcnJheTxSZXR5cGVQYXNzd29yZElucHV0PigpO1xuICAgIHB1YmxpYyBfcmVtZW1iZXJNZTogUmVtZW1lYmVySW5wdXQ7XG4gICAgcHVibGljIF9zZWNyZXRRdWVzdGlvbnMgPSBuZXcgQXJyYXk8U2VjcmV0UXVlc3Rpb25XaWRnZXQ+KCk7XG4gICAgcHVibGljIF9hdXRvU2tpcENvbnRhaW5lcnMgPSBuZXcgQXJyYXk8Q29udGFpbmVyV2lkZ2V0PigpO1xuICAgIHB1YmxpYyBfc2VydmVyV2lkZ2V0cyA9IG5ldyBBcnJheTxCYXNlU2VydmVyV2lkZ2V0PGFueT4+KCk7XG4gICAgcHVibGljIGJpbmRJRDogc3RyaW5nO1xuICAgIHB1YmxpYyBmaWx0ZXJzID0gbmV3IEFycmF5PElGb3JtRGF0YUZpbHRlcj4oKTtcbiAgICBwdWJsaWMgaXNQb3B1bGF0ZWQgPSBmYWxzZTtcblxuICAgIHByb3RlY3RlZCBkYXRhU3RvcmUgPSB0aGlzLl9zY3JlZW5TZXQuZGF0YTtcbiAgICBwcm90ZWN0ZWQgYmVoYXZpb3JDb250ZXh0OiBCZWhhdmlvclRyYWNraW5nQ29udGV4dCB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIF9zY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIHByaXZhdGUgZ2lneWFDbGFzczogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGVsRm9ybSwgX3NjcmVlbik7XG5cbiAgICAgICAgdGhpcy5iaW5kSUQgPSB0aGlzLnB1Ymxpc2hJRCA/IHRoaXMuSUQgOiBnaWd5YUNsYXNzO1xuICAgICAgICB0aGlzLm9yaWdpbmFsU3VjY2Vzc1NjcmVlbiA9IGVsRm9ybS5nZXRBdHRyaWJ1dGUoRm9ybV9DT05TVFMuc3VjY2Vzc1NjcmVlbik7XG4gICAgICAgIHRoaXMuc3VjY2Vzc1NjcmVlbiA9IHRoaXMuX3NjcmVlblNldC5jaG9vc2VOZXh0U2NyZWVuKHRoaXMub3JpZ2luYWxTdWNjZXNzU2NyZWVuKTtcblxuICAgICAgICB0aGlzLmF1dG9Ta2lwID0gZWxGb3JtLmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5hdXRvU2tpcEZsYWcpID09ICd0cnVlJztcbiAgICAgICAgdGhpcy5hdXRvU2tpcFNjcmVlbiA9IGVsRm9ybS5nZXRBdHRyaWJ1dGUoRm9ybV9DT05TVFMuYXV0b1NraXBTY3JlZW4pIHx8IHRoaXMuc3VjY2Vzc1NjcmVlbjtcbiAgICAgICAgdGhpcy5zY3JlZW5TZXRTa2lwcGVkU2NyZWVuID0gZWxGb3JtLmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5zY3JlZW5TZXRTa2lwcGVkU2NyZWVuKSB8fCB0aGlzLnN1Y2Nlc3NTY3JlZW47XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1JbnB1dHMoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckJvdW5kZWRFcnJvckVsZW1lbnRzKCk7XG5cbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IEJhc2VGb3JtV2lkZ2V0LnJlZ2lzdGVyV2lkZ2V0cyh0aGlzKTtcblxuICAgICAgICB0aGlzLnN1Ym1pdEhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uZGlzYWJsZURlZmF1bHRFdmVudEhhbmRsaW5nKGV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuc3VibWl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyKTtcblxuICAgICAgICB0aGlzLmZpZWxkQ2hhbmdlZEhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICAgICAgICB0aGlzLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3RlckZvcm1JbnB1dHMoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0cyA9IEZvcm1JbnB1dC5yZWdpc3RlckZvcm1JbnB1dHModGhpcy50ZW1wbGF0ZUVsZW1lbnQuZWxlbWVudHMsIHRoaXMpO1xuXG4gICAgICAgIGlmICh0aGlzLl9wYXNzd29yZElucHV0cy5sZW5ndGggPiAwKSB0aGlzLl92YWxpZGF0ZWRQYXNzd29yZCA9IHRoaXMuX3Bhc3N3b3JkSW5wdXRzWzBdO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGREYXRhRmllbGQoZmllbGQ6IElGb3JtSW5wdXQpIHtcbiAgICAgICAgdGhpcy5kYXRhVG9TZXJ2ZXIucHVzaChmaWVsZCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZER5bmFtaWNXaWRnZXRzKHJvb3RFbDogSFRNTEVsZW1lbnQpOiBBcnJheTxJRm9ybVdpZGdldD4ge1xuICAgICAgICBjb25zdCBuZXdXaWRnZXRzID0gQmFzZUZvcm1XaWRnZXQucmVnaXN0ZXJEeW5hbWljV2lkZ2V0cyh0aGlzLCByb290RWwpO1xuICAgICAgICBGb3JFYWNoKG5ld1dpZGdldHMsIHcgPT4gdy5saW5rSW5zdGFuY2VFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KSk7XG4gICAgICAgIHRoaXMuX3dpZGdldHMgPSB0aGlzLl93aWRnZXRzLmNvbmNhdChuZXdXaWRnZXRzKTtcbiAgICAgICAgcmV0dXJuIG5ld1dpZGdldHM7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUR5bmFtaWNXaWRnZXRzKHdpZGdldHNUb1JlbW92ZTogQXJyYXk8SUZvcm1XaWRnZXQ+KSB7XG4gICAgICAgIGlmICghdGhpcy5fd2lkZ2V0cyB8fCAhdGhpcy5fd2lkZ2V0cy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IHRoaXMuX3dpZGdldHMuZmlsdGVyKHcgPT4gd2lkZ2V0c1RvUmVtb3ZlLmluZGV4T2YodykgPCAwKTtcbiAgICAgICAgd2lkZ2V0c1RvUmVtb3ZlLmZvckVhY2god2lkZ2V0ID0+IHtcbiAgICAgICAgICAgIHdpZGdldC51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICAgICAgICAgIHdpZGdldC51bmxpbmtUZW1wbGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzRm9ybUJvdW5kZWRFbGVtZW50KGJvdW5kZWRFbGVtZW50OiBFcnJvckRpc3BsYXlFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChib3VuZGVkRWxlbWVudC5ib3VuZGVkVG8gPT09IHRoaXMuYmluZElEKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICBsZXQgZWwgPSBib3VuZGVkRWxlbWVudC5pbnN0YW5jZUVsZW1lbnQgfHwgYm91bmRlZEVsZW1lbnQudGVtcGxhdGVFbGVtZW50O1xuICAgICAgICBjb25zdCB0aGlzRWwgPSB0aGlzLmluc3RhbmNlRWxlbWVudCB8fCB0aGlzLnRlbXBsYXRlRWxlbWVudDtcbiAgICAgICAgd2hpbGUgKGVsICYmIGVsICE9PSB0aGlzRWwgJiYgZWwgIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xuXG4gICAgICAgIHJldHVybiBlbCA9PT0gdGhpc0VsO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGlua0FuZFBvcHVsYXRlSW5wdXRFbGVtZW50cyhpdGVtczogQXJyYXk8Rm9ybUlucHV0Pikge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGl0ZW0ubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVQb3B1bGF0ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbGlua0FuZFBvcHVsYXRlV2lkZ2V0RWxlbWVudHMoaXRlbXM6IEFycmF5PElGb3JtV2lkZ2V0Pikge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGF3YWl0IGl0ZW0ubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVQb3B1bGF0ZSgpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSB3aGVuIG5ld0Zvcm1MaW5rSW5zdGFuY2VFbGVtZW50IGNsZWFudXBcbiAgICBwcml2YXRlIGxpbmtBbmRQb3B1bGF0ZUVsZW1lbnRzKGl0ZW1zOiBBcnJheTxGb3JtSW5wdXQ+IHwgQXJyYXk8SUZvcm1XaWRnZXQ+KSB7XG4gICAgICAgIHZhciBsaW5rSXRlbSA9IGkgPT4gaS5saW5rSW5zdGFuY2VFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcbiAgICAgICAgRm9yRWFjaChpdGVtcywgbGlua0l0ZW0pO1xuICAgICAgICB0aGlzLnByZVBvcHVsYXRlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGlnbm9yZWRGaWVsZHMoKTogSU1hcDxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAnZy1yZWNhcHRjaGEtcmVzcG9uc2UnOiB0cnVlLFxuICAgICAgICAgICAgJ2ZjLXRva2VuJzogdHJ1ZSxcbiAgICAgICAgICAgICdwYXNza2V5JzogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVnaXN0ZXJCb3VuZGVkRXJyb3JFbGVtZW50cygpOiB2b2lkIHtcbiAgICAgICAgLy8gRmluZCBhbGwgZXJyb3IgZGlzcGxheSBlbGVtZW50cyBvbiB0aGUgc2NyZWVuIGluIHRoaXMgZm9ybS5cbiAgICAgICAgY29uc3QgZm9ybUJvdW5kZWRFbGVtZW50cyA9IG5ldyBBcnJheTxFcnJvckRpc3BsYXlFbGVtZW50PigpO1xuICAgICAgICB0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50cyA9IHt9O1xuICAgICAgICBGb3JFYWNoUHJvcCh0aGlzLl9zY3JlZW4uX2Vycm9yRGlzcGxheUVsZW1lbnRzLCBib3VuZGVkRWxlbWVudHMgPT4ge1xuXG4gICAgICAgICAgICBGb3JFYWNoKGJvdW5kZWRFbGVtZW50cywgYm91bmRlZEVsZW1lbnQgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNGb3JtQm91bmRlZEVsZW1lbnQoYm91bmRlZEVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1Cb3VuZGVkRWxlbWVudHMucHVzaChib3VuZGVkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIGVycm9yIGVsZW1lbnQgb24gdGhpcyBmb3JtLlxuICAgICAgICBGb3JFYWNoKGZvcm1Cb3VuZGVkRWxlbWVudHMsIGJvdW5kZWRFbGVtZW50ID0+IHtcblxuICAgICAgICAgICAgYm91bmRlZEVsZW1lbnQuX2Zvcm0gPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBVbmxlc3MgYm91bmQgdG8gdGhpcyBmb3JtLCBub3JtYWxpemUgZmllbGQgbmFtZSAoZm9yIGV4YW1wbGUsIFwiYmlydGhZZWFyXCIgYmVjb21lcyBcInByb2ZpbGUuYmlydGhZZWFyXCIpLlxuICAgICAgICAgICAgY29uc3QgYm91bmRlZFRvID0gYm91bmRlZEVsZW1lbnQuYm91bmRlZFRvID09PSB0aGlzLmJpbmRJRCA/IHRoaXMuYmluZElEIDogdGhpcy5nZXROb3JtYWxpemVkRmllbGROYW1lKGJvdW5kZWRFbGVtZW50LmJvdW5kZWRUbyk7XG5cbiAgICAgICAgICAgIC8vIEFkZCB0byBsaXN0IG9mIGVsZW1lbnRzIGJvdW5kIHRvIHNwZWNpZmljIElELlxuICAgICAgICAgICAgbGV0IGJvdW5kZWRMaXN0ID0gdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHNbYm91bmRlZFRvXTtcbiAgICAgICAgICAgIGlmICghYm91bmRlZExpc3QpIHtcbiAgICAgICAgICAgICAgICBib3VuZGVkTGlzdCA9IHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzW2JvdW5kZWRUb10gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvdW5kZWRMaXN0LnB1c2goYm91bmRlZEVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rVGVtcGxhdGUoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyKTtcblxuICAgICAgICB2YXIgdW5saW5rSXRlbSA9IGkgPT4gaS51bmxpbmtUZW1wbGF0ZSgpO1xuXG4gICAgICAgIEZvckVhY2godGhpcy5fd2lkZ2V0cywgdW5saW5rSXRlbSk7XG5cbiAgICAgICAgRm9yRWFjaCh0aGlzLl9pbnB1dHMsIHVubGlua0l0ZW0pO1xuXG4gICAgICAgIHN1cGVyLnVubGlua1RlbXBsYXRlKCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogcmVtb3ZlIG5ld0xpbmtJbnN0YW5jZUVsZW1lbnQgYW5kIHRha2UgdG8gY29kZSBmcm9tIHRoZXJlIHRvIHRoaXMgZnVuY3Rpb24gd2hlbiBuZXdGb3JtTGlua0luc3RhbmNlRWxlbWVudCBjbGVhbnVwXG4gICAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5zdXBwb3J0Q29uc2VudERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uc2VudERhdGEoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChGbGFnU2VydmljZS5uZXdGb3JtTGlua0luc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5uZXdMaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxlZ2FjeUxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE86IHdoZW4gbmV3Rm9ybUxpbmtJbnN0YW5jZUVsZW1lbnQgY2xlYW51cCBtb3ZlIGNvZGUgdG8gbGlua0luc3RhbmNlRWxlbWVudCBhbmQgcmVtb3ZlXG4gICAgcHVibGljIGFzeW5jIG5ld0xpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmxpbmtBbmRQb3B1bGF0ZUlucHV0RWxlbWVudHModGhpcy5faW5wdXRzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubGlua0FuZFBvcHVsYXRlV2lkZ2V0RWxlbWVudHModGhpcy5fd2lkZ2V0cyk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lciBhZnRlciBsaW5rIHRvIGluc3RhbmNlIGVsZW1lbnRzLlxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZWQnLCB0aGlzLmZpZWxkQ2hhbmdlZEhhbmRsZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iZWhhdmlvckNvbnRleHQ/LnN0YXJ0TW9uaXRvcmluZygpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSB3aGVuIG5ld0Zvcm1MaW5rSW5zdGFuY2VFbGVtZW50IGNsZWFudXBcbiAgICBwdWJsaWMgbGVnYWN5TGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcblxuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMubGlua0FuZFBvcHVsYXRlRWxlbWVudHModGhpcy5faW5wdXRzKTtcbiAgICAgICAgICAgIHRoaXMubGlua0FuZFBvcHVsYXRlRWxlbWVudHModGhpcy5fd2lkZ2V0cyk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lciBhZnRlciBsaW5rIHRvIGluc3RhbmNlIGVsZW1lbnRzLlxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZWQnLCB0aGlzLmZpZWxkQ2hhbmdlZEhhbmRsZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iZWhhdmlvckNvbnRleHQ/LnN0YXJ0TW9uaXRvcmluZygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMb2dpblByb3ZpZGVycygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gTG9naW5Nb2Rlcy5zdGFuZGFyZC5nZXRMb2dpblByb3ZpZGVycyh0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLCB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLCB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbik7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgLy8gVGhlIGV2ZW50IGxpc3RlbmVyIG5lZWRzIHRvIGJlIHJlbW92ZWQgc28gdGhhdCBpdCBjYW4ndCBiZSB0cmlnZ2VyZWQgd2hlbiBpbnN0YW5jZSBlbGVtZW50cyBkb24ndCBleGlzdC5cbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdmaWVsZENoYW5nZWQnLCB0aGlzLmZpZWxkQ2hhbmdlZEhhbmRsZXIpO1xuXG4gICAgICAgIHRoaXMuY2xlYXJEeW5hbWljRmllbGRzKHRoaXMuX2R5bmFtaWNJbnB1dHMpO1xuICAgICAgICB0aGlzLl9keW5hbWljSW5wdXRzID0gW107XG5cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgdW5saW5rSXRlbSA9IGkgPT4gaS51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcblxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl93aWRnZXRzLCB1bmxpbmtJdGVtKTtcblxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9pbnB1dHMsIHVubGlua0l0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iZWhhdmlvckNvbnRleHQ/LnN0b3BNb25pdG9yaW5nKCk7XG5cbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgLy8jcmVnaW9uIHByZS1wb3B1bGF0ZSBmb3JtXG5cbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhRnJvbSgpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhKCk6IGFueSB7XG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICAgICAgdmFyIGFwaURhdGFGb3JGb3JtID0gW3t9XTtcblxuICAgICAgICBjb25zdCBvdmVycmlkZGVuRGF0YSA9IFtdO1xuICAgICAgICBGb3JFYWNoKHRoaXMucHJlUG9wdWxhdGVEYXRhRnJvbSgpLCBmaWVsZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBleHRyYWN0ZWRGaWVsZCA9IGdpZ3lhLnV0aWxzLm9iamVjdC5nZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUoYXBpRGF0YSwgZmllbGQsIGZhbHNlKTtcbiAgICAgICAgICAgIGFwaURhdGFGb3JGb3JtLnB1c2goZXh0cmFjdGVkRmllbGQpO1xuXG4gICAgICAgICAgICBpZiAoKGZpZWxkID09PSAnZ2V0QWNjb3VudEluZm8ucHJlZmVyZW5jZXMnIHx8IGZpZWxkID09PSAnZ2V0QWNjb3VudEluZm8uc3Vic2NyaXB0aW9ucycpXG4gICAgICAgICAgICAgICAgJiYgZXh0cmFjdGVkRmllbGQgJiYgdHlwZW9mIGV4dHJhY3RlZEZpZWxkID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4dHJhY3RlZEZpZWxkKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcGlEYXRhW2tleV0pe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcnJpZGRlbkRhdGEucHVzaCh7a2V5LCBmaWVsZH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAob3ZlcnJpZGRlbkRhdGEubGVuZ3RoKXtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoJ3ByZS1wb3B1bGF0ZSBkYXRhIG92ZXJyaWRkZGVuIGZpZWxkcycsIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShvdmVycmlkZGVuRGF0YSksIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoYXBpRGF0YUZvckZvcm0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRFcnJvcktleShyZXNwb25zZTogSUZvcm1SZXNwb25zZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGVycm9yQ29kZSA9IE51bWJlcihyZXNwb25zZS5lcnJvckNvZGUpO1xuICAgICAgICBzd2l0Y2ggKGVycm9yQ29kZSkge1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5VTkFVVEhPUklaRURfVVNFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3VuYXV0aG9yaXplZF91c2VyJztcblxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Blcm1pc3Npb25fZGVuaWVkJ1xuXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkFDQ09VTlRfVEVNUE9SQVJJTFlfTE9DS0VEX09VVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FjY291bnRfdGVtcG9yYXJpbHlfbG9ja2VkX291dCc7XG5cbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuQUNDT1VOVF9ESVNBQkxFRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FjY291bnRfaXNfZGlzYWJsZWQnO1xuXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkxPR0lOX0ZBSUxFRF9DQVBUQ0hBX1JFUVVJUkVEOlxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5MT0dJTl9GQUlMRURfV1JPTkdfQ0FQVENIQTpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2xvZ2luX2NhcHRjaGFfZXJyb3InO1xuXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlJFUVVFU1RfRkFJTEVEX0NBUFRDSEFfUkVRVUlSRUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdyZXF1ZXN0X2NhcHRjaGFfZXJyb3InO1xuXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkxPR0lOX0lERU5USUZJRVJfRVhJU1RTOlxuICAgICAgICAgICAgICAgIHJldHVybiAnbG9naW5faWRlbnRpZmllcl9leGlzdHMnO1xuXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlVOSVFVRV9JREVOVElGSUVSX0VYSVNUUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3VuaXF1ZV9pZGVudGlmaWVyX2V4aXN0cyc7XG5cbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuVU5ERVJBR0VfVVNFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3NvcnJ5X3dlX2FyZV9ub3RfYWJsZV90b19wcm9jZXNzX3lvdXJfcmVnaXN0cmF0aW9uJzsvL0NPUFBBXG5cbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuSU5WQUxJRF9MT0dJTklEOlxuICAgICAgICAgICAgICAgIHJldHVybiAnaW52YWxpZF9sb2dpbl9vcl9wYXNzd29yZCc7XG5cbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuTE9HSU5JRF9ET0VTX05PVF9FWElTVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3RoZXJlX2lzX25vX3VzZXJfd2l0aF90aGF0X3VzZXJuYW1lX29yX2VtYWlsJztcblxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRTogLy8gaW52YWxpZCBwYXJhbWV0ZXIgdmFsdWVcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuRFVQTElDQVRFX05PTkNFOlxuICAgICAgICAgICAgICAgIHJldHVybiAndGhlcmVfYXJlX2Vycm9yc19pbl95b3VyX2Zvcm1fcGxlYXNlX3RyeV9hZ2Fpbic7XG5cbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuT0xEX1BBU1NXT1JEX1VTRUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdvbGRfcGFzc3dvcmRfY2Fubm90X2JlX3RoZV9zYW1lX2FzX25ld19wYXNzd29yZCc7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLk5FVFdPUktfRVJST1I6XG4gICAgICAgICAgICAgICAgcmV0dXJuICduZXR3b3JrX2Vycm9yJztcblxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5WQUxJREFUSU9OX0VSUk9SOiAvLyBWYWxpZGF0aW9uX2Vycm9yXG4gICAgICAgICAgICAgICAgY29uc3QgY2FwdGNoYUVycm9yID0gcmVzcG9uc2UudmFsaWRhdGlvbkVycm9ycy5maWx0ZXIoZXJyID0+IGVyci5lcnJvckNvZGUgPT09IEdTRXJyb3JzLkNBUFRDSEFfVkVSSUZJQ0FUSU9OX0ZBSUxFRClbMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhcHRjaGFFcnJvciA/ICdyZWdpc3Rlcl9jYXB0Y2hhX2Vycm9yJyA6ICd0aGVyZV9hcmVfZXJyb3JzX2luX3lvdXJfZm9ybV9wbGVhc2VfdHJ5X2FnYWluJztcblxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5GT1JCSURERU46XG4gICAgICAgICAgICAgICAgcmV0dXJuICdmb3JiaWRkZW5fZXJyb3InO1xuXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkZSRVFVRU5DWV9MSU1JVF9SRUFDSEVEOlxuICAgICAgICAgICAgICAgIHJldHVybiAnY29kZV9mcmVxdWVuY3lfbGltaXRfcmVhY2hlZCc7XG5cbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1JFR0lTVFJBVElPTjpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2FjY291bnRfcGVuZGluZ19yZWdpc3RyYXRpb24nXG5cbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuT0s6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gZm9yIHRoZSBlcnJvciBtZXNzYWdlIGhlcmVcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcmUtcG9wdWxhdGUgZm9ybSBkYXRhIGZyb20gc2VydmVyIG9yIGRlZmF1bHQgdmFsdWVzLlxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZSgpIHtcbiAgICAgICAgY29uc3QgcG9wdWxhdGVEYXRhID0gey4uLnRoaXMucHJlUG9wdWxhdGVEYXRhKCksIC4uLnRoaXMuYmVmb3JlTG9hZERhdGF9O1xuXG4gICAgICAgIHRoaXMudXBkYXRlRHluYW1pY0ZpZWxkcygpO1xuXG4gICAgICAgIGNvbnN0IHVwZGF0ZUZpZWxkID0gKGZpZWxkOiBGb3JtSW5wdXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkLmdldE5hbWUodHJ1ZSk7XG4gICAgICAgICAgICBpZiAoZmllbGROYW1lICYmIGZpZWxkTmFtZSAhPT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICAgICAgICAgIGxldCBkYXRhVmFsdWU6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJheVJvb3RGaWVsZCA9IGZpZWxkLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5hcnJheVJvb3RBdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgIGlmICghYXJyYXlSb290RmllbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVZhbHVlID0gZ2lneWEudXRpbHMub2JqZWN0LmdldFByb3BlcnR5QnlTZXJpYWxpemVkTmFtZShwb3B1bGF0ZURhdGEsIGZpZWxkTmFtZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmllbGQuYXJyYXlLZXlGaWVsZCB8fCAhZmllbGQuYXJyYXlLZXlWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXJuKCdGaWVsZCBub3QgcG9wdWxhdGVkIGJlY2F1c2UgZGF0YS1hcnJheS1yb290IHByb3ZpZGVkIHdpdGhvdXQgZGF0YS1hcnJheS1rZXktZmllbGQgYW5kIGRhdGEtYXJyYXkta2V5LXZhbHVlJywgZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5Um9vdCA9IGdpZ3lhLnV0aWxzLm9iamVjdC5nZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUocG9wdWxhdGVEYXRhLCBhcnJheVJvb3RGaWVsZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFycmF5Um9vdCAmJiBhcnJheVJvb3QuY29uc3RydWN0b3IgPT09IEFycmF5ICYmIGFycmF5Um9vdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBvIG9mIGFycmF5Um9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJheUtleUZpZWxkVmFsdWUgPSBnaWd5YS51dGlscy5vYmplY3QuZ2V0UHJvcGVydHlCeVNlcmlhbGl6ZWROYW1lKG8sIGZpZWxkLmFycmF5S2V5RmllbGQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLmFycmF5S2V5VmFsdWUgPT09IFN0cmluZyhhcnJheUtleUZpZWxkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVmFsdWUgPSBnaWd5YS51dGlscy5vYmplY3QuZ2V0UHJvcGVydHlCeVNlcmlhbGl6ZWROYW1lKG8sIGZpZWxkTmFtZS5zdWJzdHIoYXJyYXlSb290RmllbGQubGVuZ3RoICsgMSksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZC5wcmVQb3B1bGF0ZShkYXRhVmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveEluc3RhbmNlRWxlbWVudCA9IGZpZWxkLmluc3RhbmNlRWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0Q2hlY2tlZENvbmRpdGlvbiA9IGZpZWxkLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybV9DT05TVFMuZGVmYXVsdENoZWNrZWRBdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdENoZWNrZWRDb25kaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrYm94SW5zdGFuY2VFbGVtZW50LmNoZWNrZWQgPSBCb29sZWFuKGZpZWxkLmV2YWx1YXRlRXhwcmVzc2lvbih7IGNvbmRpdGlvbjogZGVmYXVsdENoZWNrZWRDb25kaXRpb24gfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHQgdmFsdWUgdG8gY2hlY2tlZCBwcm9wZXJ0eS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gdHJpZ2dlciBjb25kaXRpb25hbHMgdGhhdCByZWx5IG9uIHRoZSBjaGVja2JveCdzIHZhbHVlLlxuICAgICAgICAgICAgICAgICAgICBmaWVsZC5zZXRWYWx1ZShjaGVja2JveEluc3RhbmNlRWxlbWVudC5jaGVja2VkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIEZvckVhY2godGhpcy5faW5wdXRzLCB1cGRhdGVGaWVsZCk7XG4gICAgICAgIEZvckVhY2godGhpcy5fZHluYW1pY0lucHV0cywgdXBkYXRlRmllbGQpO1xuICAgICAgICB0aGlzLmlzUG9wdWxhdGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RXh0cmFQcm9maWxlRmllbGRzKG1pc3NpbmdPbmx5OiBib29sZWFuKSB7XG4gICAgICAgIGNvbnN0IGFscmVhZHlIYW5kbGVkRmllbGRzOiBJTWFwPGJvb2xlYW4+ID0ge307XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVRvU2VydmVyXG4gICAgICAgICAgICAubWFwKGZpZWxkID0+IGZpZWxkLm5vcm1hbGl6ZWRGaWVsZE5hbWUpXG4gICAgICAgICAgICAuY29uY2F0KHRoaXMuX3dpZGdldHMucmVkdWNlKChyZXMsIHdpZGdldCkgPT4gcmVzLmNvbmNhdCh3aWRnZXQuZ2V0RmllbGRzTmFtZXMoKSksIFtdKSkgLy8gZ2V0IGFsc28gZmllbGROYW1lcyBmcm9tIHdpZGdldHMgdGhhdCBtYXkgbm90IGJlIGZpbGxlZCBpbiBkYXRhVG9TZXJ2ZXJcbiAgICAgICAgICAgIC5maWx0ZXIobiA9PiBmaXJzdFBhcnQobiwgJy4nKSA9PT0gdGhpcy5wcm9maWxlT2JqZWN0TmFtZSgpKSAvLyBtYWtlIHN1cmUgaXQgaXMgaW4gcHJvZmlsZSBuYW1lc3BhY2VcbiAgICAgICAgICAgIC5tYXAobiA9PiBmaXJzdFBhcnQobi5yZXBsYWNlKHRoaXMucHJvZmlsZU9iamVjdE5hbWUoKSArICcuJywgJycpLCAnLicpKSAvLyBnZXQgdGhlIHByb3BlcnR5IG5hbWUgaXRzZWxmXG4gICAgICAgICAgICAucmVkdWNlKChmaWVsZE5hbWVzLCBmbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhbHJlYWR5SGFuZGxlZEZpZWxkc1tmbl0pIHJldHVybiBmaWVsZE5hbWVzO1xuICAgICAgICAgICAgICAgIGFscmVhZHlIYW5kbGVkRmllbGRzW2ZuXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHRoaXMuX3NjcmVlblNldC5nZXRQcm9maWxlKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFtaXNzaW5nT25seSB8fCAhcHJvZmlsZSB8fCAhcHJvZmlsZVtmbl0pIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGROYW1lcy5wdXNoKGZuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkTmFtZXM7XG4gICAgICAgICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE5lZWRlZERhdGEoZm9ybUNvbnRleHQ/OiBJRm9ybUNvbnRleHQpOiBJTmVlZGVkRGF0YSB7XG4gICAgICAgIGNvbnN0IG5lZWRlZERhdGE6IElOZWVkZWREYXRhID0ge307XG4gICAgICAgIC8vIEZldGNoIHBhc3N3b3JkIGNvbXBsZXhpdHkgZm9yIHRoZSBwYXNzd29yZCB3aWRnZXQgYW5kIHZhbGlkYXRpb24gaWYgcGFzc3dvcmQgZmllbGQgZXhpc3RzIG9uIHNjcmVlbi5cbiAgICAgICAgY29uc3QgaXNQYXNzd29yZFBvbGljaWVzTmVlZGVkID0gU29tZSh0aGlzLmRhdGFUb1NlcnZlciwgdGhpcy5pc1Bhc3N3b3JkUG9saWN5TmVlZGVkRm9yRmllbGQpO1xuICAgICAgICBpZiAoaXNQYXNzd29yZFBvbGljaWVzTmVlZGVkKSB7XG4gICAgICAgICAgICBuZWVkZWREYXRhWydnZXRQb2xpY2llcyddID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uczogJ3Bhc3N3b3JkQ29tcGxleGl0eScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdXBwb3J0Q29uc2VudERhdGEpIHtcbiAgICAgICAgICAgIG5lZWRlZERhdGFbJ2dldFNjaGVtYSddID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge30sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBuZWVkZWREYXRhWydnZXRTaXRlQ29uc2VudERldGFpbHMnXSA9IHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICAgICAgICAgIHNob3VsZEV4ZWN1dGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmICghaGFzQ29uc2VudExpY2Vuc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldENvbnNlbnRTdGF0dXMoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNaWdyYXRlZCA9IEJvb2xlYW4ocmVzPy5jb25zZW50U3RhdHVzPy5pc01pZ3JhdGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEuXy5jb25maWcuY29uc2VudC5pc01pZ3JhdGVkID0gaXNNaWdyYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTWlncmF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcignZXhjZXB0aW9uIHdoZW4gZ2V0dGluZyBjb25zZW50IHN0YXR1cycsIHtlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZWVkZWREYXRhO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRCZWZvcmVMb2FkRGF0YShldmVudERhdGE6IGFueSkge1xuICAgICAgICB0aGlzLmJlZm9yZUxvYWREYXRhID0gZXZlbnREYXRhO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpc1Bhc3N3b3JkUG9saWN5TmVlZGVkRm9yRmllbGQoZmllbGQ6IElGb3JtSW5wdXQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGZpZWxkIGluc3RhbmNlb2YgQmFzZVBhc3N3b3JkSW5wdXQgJiYgKGZpZWxkLmlzUGFzc3dvcmRTY2hlbWFWYWxpZGF0ZWQoKSB8fCBmaWVsZC5pc1Bhc3N3b3JkU3RyZW5ndGhXaWRnZXRCb3VuZCgpKTtcbiAgICB9XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIC8vI3JlZ2lvbiBEeW5hbWljIGZpZWxkc1xuXG4gICAgLy8gZXhwbGljaXRseSBhZGQgZHluYW1pYyBpbnB1dHMsIG1vcmUgZWZmaWNpZW50XG4gICAgcHVibGljIGFkZER5bmFtaWNJbnB1dHMocm9vdEVsOiBFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGlucHV0c0VsZW1lbnRzID0gcm9vdEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LHNlbGVjdCxmaWVsZHNldCcpO1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBGb3JtSW5wdXQucmVnaXN0ZXJGb3JtSW5wdXRzKGlucHV0c0VsZW1lbnRzLCB0aGlzKTtcbiAgICAgICAgaW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgVGVtcGxhdGVFbGVtZW50LnByZXBhcmVUZW1wbGF0ZUluc3RhbmNlRWxlbWVudChpbnB1dC50ZW1wbGF0ZUVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgIGlucHV0LmxpbmtJbnN0YW5jZUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5faW5wdXRzID0gdGhpcy5faW5wdXRzLmNvbmNhdChpbnB1dHMpO1xuICAgICAgICByZXR1cm4gaW5wdXRzO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVEeW5hbWljSW5wdXRzKGlucHV0c1RvUmVtb3ZlOiBBcnJheTxGb3JtSW5wdXQ+KSB7XG4gICAgICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX2lucHV0cy5maWx0ZXIoaSA9PiBpbnB1dHNUb1JlbW92ZS5pbmRleE9mKGkpIDwgMCk7XG4gICAgICAgIGlucHV0c1RvUmVtb3ZlLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YUluZGV4ID0gZ2lneWEudXRpbHMuYXJyYXkuaW5kZXhPZih0aGlzLmRhdGFUb1NlcnZlciwgaW5wdXQpO1xuICAgICAgICAgICAgaWYgKGRhdGFJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFUb1NlcnZlci5zcGxpY2UoZGF0YUluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlucHV0LnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgICAgICAgICAgaW5wdXQudW5saW5rVGVtcGxhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhckR5bmFtaWNGaWVsZHMoZHluYW1pY3M6IEZvcm1JbnB1dFtdKSB7XG4gICAgICAgIEZvckVhY2goZHluYW1pY3MsIG9sZCA9PiB7XG4gICAgICAgICAgICBvbGQudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgICAgICAgICBvbGQudW5saW5rVGVtcGxhdGUoKTtcblxuICAgICAgICAgICAgdmFyIGRhdGFJbmRleCA9IGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodGhpcy5kYXRhVG9TZXJ2ZXIsIG9sZCk7XG4gICAgICAgICAgICBpZiAoZGF0YUluZGV4ICE9PSAtMSkgdGhpcy5kYXRhVG9TZXJ2ZXIuc3BsaWNlKGRhdGFJbmRleCwgMSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwcml2YXRlIGlzRHluYW1pY0ZpZWxkT2Jzb2xldGUoZHluYW1pY0VsZW1lbnQ6IEZvcm1JbnB1dCk6IGJvb2xlYW4ge1xuICAgICAgICB2YXIgcGFyZW50ID0gZHluYW1pY0VsZW1lbnQudGVtcGxhdGVFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50ICE9PSB0aGlzLmluc3RhbmNlRWxlbWVudCAmJiBwYXJlbnQgIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgcmV0dXJuIHBhcmVudCAhPT0gdGhpcy5pbnN0YW5jZUVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0R5bmFtaWNGaWVsZFRvQWRkKGVsOiBFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHZhciBpZ25vcmVkRmllbGRzID0gdGhpcy5pZ25vcmVkRmllbGRzKCk7XG4gICAgICAgIHZhciBpbnN0YW5jZU9mQXJyYXkgPSBlbFtUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmluc3RhbmNlT2ZBcnJheV07XG4gICAgICAgIGlmIChpbnN0YW5jZU9mQXJyYXkgJiYgU29tZShpbnN0YW5jZU9mQXJyYXksIChpbnN0YW5jZTogRm9ybUlucHV0KSA9PiBpbnN0YW5jZSBpbnN0YW5jZW9mIEZvcm1JbnB1dCAmJiBpbnN0YW5jZS5fZm9ybSA9PT0gdGhpcykpIHJldHVybiBmYWxzZTtcblxuICAgICAgICB2YXIgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICBpZiAoaWdub3JlZEZpZWxkc1tuYW1lXSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVEeW5hbWljRmllbGRzKCkge1xuICAgICAgICB2YXIgb2xkRHluYW1pY0lucHV0cyA9IG5ldyBBcnJheTxGb3JtSW5wdXQ+KCk7XG4gICAgICAgIHZhciB2YWxpZER5bmFtaWNJbnB1dHMgPSBuZXcgQXJyYXk8Rm9ybUlucHV0PigpO1xuXG4gICAgICAgIC8vIHNlcGFyYXRlIHZhbGlkIGZyb20gaW52YWxpZCBleGlzdGluZyBkeW5hbWljc1xuICAgICAgICBGb3JFYWNoKHRoaXMuX2R5bmFtaWNJbnB1dHMsIGV4aXN0aW5nRHluYW1pY0lucHV0ID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRHluYW1pY0ZpZWxkT2Jzb2xldGUoZXhpc3RpbmdEeW5hbWljSW5wdXQpKSBvbGREeW5hbWljSW5wdXRzLnB1c2goZXhpc3RpbmdEeW5hbWljSW5wdXQpO1xuICAgICAgICAgICAgZWxzZSB2YWxpZER5bmFtaWNJbnB1dHMucHVzaChleGlzdGluZ0R5bmFtaWNJbnB1dCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHJlbW92ZSBpbnZhbGlkIGR5bmFtaWNzXG4gICAgICAgIHRoaXMuY2xlYXJEeW5hbWljRmllbGRzKG9sZER5bmFtaWNJbnB1dHMpO1xuXG4gICAgICAgIC8vIGFkZCBuZXcgZHluYW1pY3NcbiAgICAgICAgdmFyIG5ld0R5bmFtaWNzID0gbmV3IEFycmF5PEVsZW1lbnQ+KCk7XG4gICAgICAgIC8vIGZpbmQgbmV3IGR5bmFtaWMgZWxlbWVudHNcbiAgICAgICAgRm9yRWFjaCh0aGlzLmluc3RhbmNlRWxlbWVudC5lbGVtZW50cywgZWwgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEeW5hbWljRmllbGRUb0FkZChlbCkpIG5ld0R5bmFtaWNzLnB1c2goZWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gY3JlYXRlIGluc3RhbmNlcyBmb3IgbmV3IGR5bmFtaWNzXG4gICAgICAgIHZhciBuZXdEeW5hbWljSW5wdXRzID0gRm9ybUlucHV0LnJlZ2lzdGVyRm9ybUlucHV0cyhuZXdEeW5hbWljcywgdGhpcyk7XG4gICAgICAgIEZvckVhY2gobmV3RHluYW1pY0lucHV0cywgbmV3RHluYW1pY0lucHV0ID0+IHtcbiAgICAgICAgICAgIFRlbXBsYXRlRWxlbWVudC5wcmVwYXJlVGVtcGxhdGVJbnN0YW5jZUVsZW1lbnQobmV3RHluYW1pY0lucHV0LnRlbXBsYXRlRWxlbWVudCwgZmFsc2UpO1xuICAgICAgICAgICAgbmV3RHluYW1pY0lucHV0LmxpbmtJbnN0YW5jZUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgICAgICAgICAgbmV3RHluYW1pY0lucHV0LmR5bmFtaWNGaWVsZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHZhbGlkRHluYW1pY0lucHV0cy5wdXNoKG5ld0R5bmFtaWNJbnB1dCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHN0b3JlIG5ldyBkeW5hbWljcyBsaXN0XG4gICAgICAgIHRoaXMuX2R5bmFtaWNJbnB1dHMgPSB2YWxpZER5bmFtaWNJbnB1dHM7XG4gICAgfVxuXG4gICAgLy8jZW5kcmVnaW9uXG5cbiAgICAvLyNyZWdpb24gdmFsaWRhdGlvblxuXG4gICAgcHVibGljIHJlcXVpcmVkRmllbGRzKCk6IElNYXA8Ym9vbGVhbj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zcGVjaWFsRmllbGRzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uSW5wdXRDaGFuZ2UoaW5wdXQ6IElGb3JtSW5wdXQsIHNldEJ5U2NyaXB0OiBib29sZWFuKSB7XG4gICAgICAgIGlmIChzZXRCeVNjcmlwdCkge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmRpc3BhdGNoKHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnZmllbGRDaGFuZ2VkJyk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFmdGVySW5wdXRDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgIGZpZWxkOiBpbnB1dCxcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLk9LLFxuICAgICAgICAgICAgICAgIHNldEJ5U2NyaXB0OiBzZXRCeVNjcmlwdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gaW5wdXQuZ2V0VmFsdWUoKTtcblxuICAgICAgICAgICAgaW5wdXQudmFsaWRhdGUodmFsaWRhdGlvbkluZm8gPT4ge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZENoYW5nZUV2ZW50OiBJRmllbGRDaGFuZ2VFdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnZmllbGRDaGFuZ2VkJyxcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuOiB0aGlzLl9zY3JlZW4/LnJlcXVlc3RlZFNjcmVlbixcbiAgICAgICAgICAgICAgICAgICAgZm9ybTogdGhpcy5iaW5kSUQsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBpbnB1dC5maWVsZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGlzVmFsaWQ6ICF2YWxpZGF0aW9uSW5mby5lcnJvckNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGVyck1zZzogdmFsaWRhdGlvbkluZm8uZXJyb3JDb2RlLCAvLyBUT0RPIHNob3VsZG4ndCB0aGlzIGJlIGFuIGVycm9yIG1lc3NhZ2U/XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zY3JlZW4/LmlzU2NyZWVuVmFyaWFudCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZENoYW5nZUV2ZW50LmFiVGVzdGluZyA9IHRoaXMuX3NjcmVlbi5hYlRlc3RpbmdEYXRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW4uZGlzcGF0Y2hFdmVudCgnZmllbGRDaGFuZ2VkJywgZmllbGRDaGFuZ2VFdmVudCk7XG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmRpc3BhdGNoKHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnZmllbGRDaGFuZ2VkJyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVySW5wdXRDaGFuZ2UodmFsaWRhdGlvbkluZm8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFmdGVySW5wdXRDaGFuZ2UodmFsaWRhdGlvbkluZm86IElWYWxpZGF0aW9uSW5mbykge1xuXG4gICAgICBjb25zdCBzaG91bGRDbGVhclBhc3N3b3JkUmV0eXBlcyA9ICAodGhpcy5fc2NyZWVuLnJlcXVlc3RlZFNjcmVlbiA9PT0gJ2dpZ3lhLXJlZ2lzdGVyLXNjcmVlbicgJiYgdmFsaWRhdGlvbkluZm8uZmllbGQuZmllbGROYW1lID09PSAncGFzc3dvcmQnKSB8fCB2YWxpZGF0aW9uSW5mby5maWVsZC5maWVsZE5hbWUgPT09ICduZXdQYXNzd29yZCdcblxuICAgICAgICBpZiAoc2hvdWxkQ2xlYXJQYXNzd29yZFJldHlwZXMpIHtcbiAgICAgICAgICAgIEZvckVhY2godGhpcy5fcGFzc3dvcmRSZXR5cGVzLCBwID0+IHtcbiAgICAgICAgICAgICAgICBwLnNldFZhbHVlKCcnLCB2YWxpZGF0aW9uSW5mby5zZXRCeVNjcmlwdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlcnJvckluZm86IElFcnJvckluZm8gPSB7XG4gICAgICAgICAgICBmaWVsZDogdmFsaWRhdGlvbkluZm8uZmllbGQsXG4gICAgICAgICAgICBlcnJvckNvZGU6IHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSxcbiAgICAgICAgICAgIGVycm9yVHlwZTogdmFsaWRhdGlvbkluZm8uZXJyb3JUeXBlLFxuICAgICAgICAgICAgaXNXYXJuOiB2YWxpZGF0aW9uSW5mby5pc1dhcm5pbmdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZW5kZXJGaWVsZEVycm9yKGVycm9ySW5mbywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGlzUGFzc3dvcmRTY2hlbWFWYWxpZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVtYVZhbGlkYXRlZCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzY2hlbWFWYWxpZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RmllbGRTY2hlbWEoZmllbGQ6IElTY2hlbWFGaWVsZEJhc2UpIHtcbiAgICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy5nZXRTY2hlbWFPZjxJRmllbGRTY2hlbWE+KGZpZWxkLmZpZWxkTmFtZXNwYWNlIHx8ICdwcm9maWxlJyk7XG4gICAgICAgIHJldHVybiBzY2hlbWEgJiYgc2NoZW1hW2ZpZWxkLmZpZWxkQmFzZU5hbWVdO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0U2NoZW1hT2Y8VCBleHRlbmRzIElGaWVsZFNjaGVtYT4oc2NoZW1hTmFtZTogU2NoZW1hTmFtZSk6IElTY2hlbWFGaWVsZHM8VD4gfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICAgICAgY29uc3Qgc2NoZW1hUm9vdCA9IHRoaXMuZ2V0U2NoZW1hUm9vdChzY2hlbWFOYW1lKTtcblxuICAgICAgICByZXR1cm4gYXBpRGF0YS5nZXRTY2hlbWEgJiYgYXBpRGF0YS5nZXRTY2hlbWFbc2NoZW1hUm9vdF0gJiYgYXBpRGF0YS5nZXRTY2hlbWFbc2NoZW1hUm9vdF0uZmllbGRzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0U2NoZW1hUm9vdChuYW1lc3BhY2U6IFNjaGVtYU5hbWUpOiBzdHJpbmcge1xuICAgICAgICBzd2l0Y2ggKG5hbWVzcGFjZSkge1xuICAgICAgICAgICAgY2FzZSAnZGF0YSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdkYXRhU2NoZW1hJztcbiAgICAgICAgICAgIGNhc2UgJ3Byb2ZpbGUnOlxuICAgICAgICAgICAgICAgIHJldHVybiAncHJvZmlsZVNjaGVtYSc7XG4gICAgICAgICAgICBjYXNlICdzdWJzY3JpcHRpb25zJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3N1YnNjcmlwdGlvbnNTY2hlbWEnO1xuICAgICAgICAgICAgY2FzZSAncHJlZmVyZW5jZXMnOlxuICAgICAgICAgICAgICAgIHJldHVybiAncHJlZmVyZW5jZXNTY2hlbWEnO1xuICAgICAgICAgICAgY2FzZSAnb3JnYW5pemF0aW9uJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ29yZ2FuaXphdGlvblNjaGVtYSc7XG4gICAgICAgICAgICBjYXNlICdyZXF1ZXN0ZXInOlxuICAgICAgICAgICAgICAgIHJldHVybiAncmVxdWVzdGVyU2NoZW1hJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXJGaWVsZEVycm9yKGVycm9ySW5mbzogSUVycm9ySW5mbywgaXNCb3VuZFRvRmllbGQ6IGJvb2xlYW4sIGN1c3RvbUVyck1zZz86IHN0cmluZywgZXJyb3JUeXBlVG9SZW5kZXI/OiBFcnJvclR5cGUpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgZmllbGQgPSBlcnJvckluZm8uZmllbGQgPyBlcnJvckluZm8uZmllbGQgOiB0aGlzLmdldEZpZWxkKGVycm9ySW5mby5maWVsZE5hbWUsIGVycm9ySW5mby5maWVsZEFycmF5S2V5VmFsdWUsIHRydWUpO1xuICAgICAgICBlcnJvckluZm8uZXJyb3JNZXNzYWdlID0gY3VzdG9tRXJyTXNnIHx8IHRoaXMuX3NjcmVlbi5nZXRFcnJvck1lc3NhZ2UoZXJyb3JJbmZvLmVycm9yQ29kZSwgaXNCb3VuZFRvRmllbGQsIGZpZWxkKTtcblxuICAgICAgICBsZXQgYXJCb3VuZEVsZW1lbnRzID0gdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHNbZmllbGQ/Lm5vcm1hbGl6ZWRGaWVsZE5hbWVdIHx8IFtdO1xuICAgICAgICBpZihlcnJvclR5cGVUb1JlbmRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhckJvdW5kRWxlbWVudHMgPSBhckJvdW5kRWxlbWVudHMuZmlsdGVyKGVsID0+IGVsLmdldEVycm9yVHlwZSgpID09PSBlcnJvclR5cGVUb1JlbmRlcik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBza2lwVmFsaWRpdHlVcGRhdGUgPSBlcnJvclR5cGVUb1JlbmRlciAmJiBhckJvdW5kRWxlbWVudHMubGVuZ3RoID09PSAwO1xuICAgICAgICAvLyBkaXNwbGF5IGVycm9yIG9uIGJvdW5kZWQgZXJyb3IgZWxlbWVudHNcbiAgICAgICAgaWYgKGlzQm91bmRUb0ZpZWxkKSB7XG4gICAgICAgICAgICBpZiAoIXNraXBWYWxpZGl0eVVwZGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmllbGRWYWxpZGl0eShmaWVsZCwgZXJyb3JJbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlYWxpbmcgd2l0aCBnaWd5YS1lcnJvci1tc2cgYW5kIGdpZ3lhLWVycm9yLWRpc3BsYXkgd2l0aGluIHRoZSBzYW1lIGZvcm0gYXMgdGhlIGlucHV0LlxuICAgICAgICAgICAgRm9yRWFjaChhckJvdW5kRWxlbWVudHMsIGVsQm91bmQgPT4ge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdCBjb25zaWRlciB0aGUgZmllbGQgYm91bmQgaWYgaXQncyBhIGRpZmZlcmVudCBhcnJheSBlbGVtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkQXJyYXlLZXlWYWx1ZSA9IGZpZWxkLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5hcnJheUtleVZhbHVlQXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICBpZiAoZmllbGRBcnJheUtleVZhbHVlICYmIGZpZWxkQXJyYXlLZXlWYWx1ZSAhPT0gZWxCb3VuZC5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYXJyYXlLZXlWYWx1ZUF0dHJpYnV0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3JJbmZvPy5lcnJvck1lc3NhZ2UgJiYgZWxCb3VuZC5pc0Vycm9yQ29kZUFsbG93ZWQoZXJyb3JJbmZvLmVycm9yQ29kZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxCb3VuZC5zaG93RXJyb3IoZXJyb3JJbmZvKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbEJvdW5kLmhpZGVFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVycm9ySW5mby5lcnJvckNvZGUgIT09IEdTRXJyb3JzLkRhdGFfUGVuZGluZ1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0RmllbGRWYWxpZGl0eShmaWVsZDogSUZvcm1JbnB1dCwgZXJyb3JJbmZvOiBJRXJyb3JJbmZvKSB7XG4gICAgICAgIGxldCBmaWVsZFZhbGlkaXR5OiBWYWxpZGl0eVN0YXRlcztcbiAgICAgICAgc3dpdGNoIChlcnJvckluZm8uZXJyb3JDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgZmllbGRWYWxpZGl0eSA9IFZhbGlkaXR5U3RhdGVzLnZhbGlkO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5EYXRhX1BlbmRpbmc6XG4gICAgICAgICAgICAgICAgZmllbGRWYWxpZGl0eSA9IFZhbGlkaXR5U3RhdGVzLnBlbmRpbmc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGZpZWxkVmFsaWRpdHkgPSBWYWxpZGl0eVN0YXRlcy5lcnJvcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpc3BsYXkgZXJyb3Igb24gdGhlIGZpZWxkIGl0c2VsZi5cbiAgICAgICAgZmllbGQuc2V0VmFsaWRpdHlTdGF0ZShmaWVsZFZhbGlkaXR5KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dDdXN0b21Gb3JtRXJyb3IoZXJyTXNnOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZXJyb3JJbmZvOiBJRXJyb3JJbmZvID0ge1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJNc2csXG4gICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1IsXG4gICAgICAgICAgICBlcnJvclR5cGU6IEVycm9yVHlwZS5jdXN0b21cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zaG93RXJyb3JzKFtlcnJvckluZm9dLCB0cnVlKTsgLy8gaXNTZXJ2ZXJFcnJvciA9IHRydWUgKGZvcmNlIHRoZSBkaXNwbGF5IG9mIHRoZSBlcnJvciBtZXNzYWdlKVxuICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIEZvcm1fQ09OU1RTLmZvcm1FcnJvckNsYXNzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUZvcm1FdmVudDxUIGV4dGVuZHMgSUJhc2VGb3JtRGF0YUV2ZW50ICYgSUJhc2VJblNjcmVlbkV2ZW50PihldmVudE5hbWUsIGV2ZW50RGF0YTogUGFydGlhbDxUPikge1xuICAgICAgICBsZXQgZXZlbnQ6IFQgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuX3NjcmVlblNldC5nZXRTY2hlbWFEYXRhKCksXG4gICAgICAgICAgICBwcm9maWxlOiB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJvZmlsZSgpLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogdGhpcy5fc2NyZWVuU2V0LmdldFN1YlNjcmlwdGlvbnMoKSxcbiAgICAgICAgICAgIGNvbW11bmljYXRpb25zOiB0aGlzLl9zY3JlZW5TZXQuZ2V0Q29tbXVuaWNhdGlvbnMoKSxcbiAgICAgICAgICAgIHByZWZlcmVuY2VzOiB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJlZmVyZW5jZXMoKSxcbiAgICAgICAgICAgIGZvcm06IHRoaXMuYmluZElELFxuICAgICAgICAgICAgc2NyZWVuOiB0aGlzLl9zY3JlZW4/LnJlcXVlc3RlZFNjcmVlbixcbiAgICAgICAgfSwgZXZlbnREYXRhKSBhcyBUO1xuICAgICAgICBpZiAodGhpcy5fc2NyZWVuPy5pc1NjcmVlblZhcmlhbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmFiVGVzdGluZyA9IHRoaXMuX3NjcmVlbi5hYlRlc3RpbmdEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uQWZ0ZXJWYWxpZGF0aW9uKGVycm9yczogSUVycm9ySW5mb1tdKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnMgPSBlcnJvcnMucmVkdWNlKChhY2M6IHtba2V5OiBzdHJpbmddOiBQYXJ0aWFsPElFcnJvckluZm8+fSwgZXJySW5mbzogSUVycm9ySW5mbykgPT4ge1xuICAgICAgICAgICAgYWNjW2VyckluZm8uZmllbGROYW1lXSA9IHtcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVyckluZm8uZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogZXJySW5mby5lcnJvckNvZGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSlcbiAgICAgICAgY29uc3QgYWZ0ZXJWYWxpZGF0aW9uRXZlbnQgPSB0aGlzLmNyZWF0ZUZvcm1FdmVudDxJQWZ0ZXJWYWxpZGF0aW9uRXZlbnQ+KCdhZnRlclZhbGlkYXRpb24nLCB7XG4gICAgICAgICAgICBmb3JtRGF0YTogdGhpcy5nZXRGbGF0Rm9ybURhdGEodHJ1ZSwgZmFsc2UpLFxuICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9ycyxcbiAgICAgICAgICAgIGZvcm1FcnJvcnM6IHZhbGlkYXRpb25FcnJvcnMgLy8gdG9kbzogYmFja3dhcmQgY29tcGF0aWJpbGl0eSAtIG5lZWQgdG8gYmUgYW5ub3VuY2VkIGFuZCByZW1vdmVkXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9zY3JlZW4uZGlzcGF0Y2hFdmVudChhZnRlclZhbGlkYXRpb25FdmVudC5ldmVudE5hbWUsIGFmdGVyVmFsaWRhdGlvbkV2ZW50KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRpc3BsYXlFcnJvcnMoZXJyb3JzOiBJRXJyb3JJbmZvW10pOiB2b2lkIHtcbiAgICAgICAgRm9yRWFjaChlcnJvcnMsIChlcnJvckluZm86IElFcnJvckluZm8pID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvckluZm8uZmllbGROYW1lID09PSAnZm9ybScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDdXN0b21Gb3JtRXJyb3IoZXJyb3JJbmZvLmVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVycm9ySW5mby5oYW5kbGVkID0gdGhpcy5yZW5kZXJGaWVsZEVycm9yKGVycm9ySW5mbywgdHJ1ZSwgZXJyb3JJbmZvLmVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2hvd0Vycm9ycyhlcnJvcnMsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGdldFZhbGlkYXRpb25FcnJvcnMoKTogUHJvbWlzZTxJRXJyb3JJbmZvW10+IHtcbiAgICAgICAgY29uc3QgY3VzdG9tVmFsaWRhdGlvbkVycm9ycyA9IGF3YWl0IHRoaXMuZ2V0Q3VzdG9tVmFsaWRhdGlvbkVycm9ycygpO1xuXG4gICAgICAgIGlmIChjdXN0b21WYWxpZGF0aW9uRXJyb3JzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VzdG9tVmFsaWRhdGlvbkVycm9ycztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmdldFN0YW5kYXJkVmFsaWRhdGlvbkVycm9ycygpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBnZXRDdXN0b21WYWxpZGF0aW9uRXJyb3JzKCk6IFByb21pc2U8SUVycm9ySW5mb1tdPiB7XG4gICAgICAgIGNvbnN0IGN1c3RvbUVycm9yTWVzc2FnZXMgPSBhd2FpdCB0aGlzLmdldEJlZm9yZVZhbGlkYXRpb25FdmVudFJlc3VsdCgpO1xuXG4gICAgICAgIGlmICghY3VzdG9tRXJyb3JNZXNzYWdlcyB8fCB0eXBlb2YoY3VzdG9tRXJyb3JNZXNzYWdlcykgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoY3VzdG9tRXJyb3JNZXNzYWdlcylcbiAgICAgICAgICAgIC5maWx0ZXIoZmllbGROYW1lID0+IHRoaXMuaXNWYWxpZEN1c3RvbUVycm9yRmllbGROYW1lKGZpZWxkTmFtZSkpXG4gICAgICAgICAgICAubWFwKGZpZWxkTmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkTmFtZSA9PT0gJ2Zvcm0nID8ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogY3VzdG9tRXJyb3JNZXNzYWdlc1snZm9ybSddXG4gICAgICAgICAgICAgICAgfSBhcyBJRXJyb3JJbmZvIDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRFcnJvckluZm8oe1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogdGhpcy5nZXRGaWVsZChmaWVsZE5hbWUpLFxuICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1IsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLmN1c3RvbVxuICAgICAgICAgICAgICAgIH0gLCBjdXN0b21FcnJvck1lc3NhZ2VzW2ZpZWxkTmFtZV0pO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVmFsaWRDdXN0b21FcnJvckZpZWxkTmFtZShmaWVsZE5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZpZWxkTmFtZSA9PT0gJ2Zvcm0nIHx8IEJvb2xlYW4odGhpcy5nZXRGaWVsZChmaWVsZE5hbWUpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGdldFN0YW5kYXJkVmFsaWRhdGlvbkVycm9ycygpOiBQcm9taXNlPElFcnJvckluZm9bXT4ge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuZ2V0RmxhdEZvcm1EYXRhKHRydWUsIHRydWUpO1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9ucyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgdGhpcy5kYXRhVG9TZXJ2ZXIubWFwKGZpZWxkID0+IGZpZWxkLnZhbGlkYXRlQXN5bmMoZm9ybURhdGEpKVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHdpZGdldFZhbGlkYXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICB0aGlzLl93aWRnZXRzLm1hcCh3aWRnZXQgPT4gd2lkZ2V0LnZhbGlkYXRlQXN5bmMoZm9ybURhdGEpKVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBbLi4udmFsaWRhdGlvbnMsIC4uLndpZGdldFZhbGlkYXRpb25zXVxuICAgICAgICAgICAgLm1hcCh2YWxpZGF0aW9uSW5mbyA9PiB0aGlzLmdldEVycm9ySW5mbyh2YWxpZGF0aW9uSW5mbykpXG4gICAgICAgICAgICAuZmlsdGVyKGVycm9ySW5mbyA9PiBlcnJvckluZm8gIT0gbnVsbCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRFcnJvckluZm8odmFsaWRhdGlvbkluZm86IElWYWxpZGF0aW9uSW5mbywgZXJyb3JNZXNzYWdlPzogc3RyaW5nKTogSUVycm9ySW5mbyB7XG4gICAgICAgIGlmICh2YWxpZGF0aW9uSW5mbz8uZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5PSyAmJiB2YWxpZGF0aW9uSW5mby5maWVsZD8uZmllbGROYW1lPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkTmFtZTogdmFsaWRhdGlvbkluZm8uZmllbGQuZmllbGROYW1lLFxuICAgICAgICAgICAgICAgIGZpZWxkQXJyYXlLZXlWYWx1ZTogdmFsaWRhdGlvbkluZm8uZmllbGQuYXJyYXlLZXlWYWx1ZSxcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSxcbiAgICAgICAgICAgICAgICBlcnJvclR5cGU6IHZhbGlkYXRpb25JbmZvLmVycm9yVHlwZSxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZSB8fCB0aGlzLl9zY3JlZW4uZ2V0RXJyb3JNZXNzYWdlKHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSwgdHJ1ZSwgdmFsaWRhdGlvbkluZm8uZmllbGQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25JbmZvPy5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LICYmIHZhbGlkYXRpb25JbmZvLndpZGdldCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSxcbiAgICAgICAgICAgICAgICBlcnJvclR5cGU6IHZhbGlkYXRpb25JbmZvLmVycm9yVHlwZSxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGVycm9yTWVzc2FnZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0QmVmb3JlVmFsaWRhdGlvbkV2ZW50UmVzdWx0KCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIGNvbnN0IGJlZm9yZVZhbGlkYXRpb25FdmVudCA9IHRoaXMuY3JlYXRlRm9ybUV2ZW50PElCZWZvcmVWYWxpZGF0aW9uRXZlbnQ+KCdiZWZvcmVWYWxpZGF0aW9uJywge1xuICAgICAgICAgICAgZm9ybURhdGE6IHRoaXMuZ2V0RmxhdEZvcm1EYXRhKHRydWUsIGZhbHNlKVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgX2N1c3RvbVZhbGlkYXRpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFtHaWd5YV06IGN1c3RvbSB2YWxpZGF0aW9uIGRpZCBub3QgcmVzb2x2ZSBhZnRlciBtb3JlIHRoYW4gJHtDVVNUT01fVkFMSURBVElPTl9USU1FT1VUX1dBUk5JTkd9IHNlY29uZHNgKTtcbiAgICAgICAgfSwgQ1VTVE9NX1ZBTElEQVRJT05fVElNRU9VVF9XQVJOSU5HKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBhd2FpdCB0aGlzLl9zY3JlZW4uZGlzcGF0Y2hFdmVudChiZWZvcmVWYWxpZGF0aW9uRXZlbnQuZXZlbnROYW1lLCBiZWZvcmVWYWxpZGF0aW9uRXZlbnQpO1xuICAgICAgICAgICAgaWYgKCF2YWxpZGF0aW9uUmVzdWx0IHx8IHR5cGVvZih2YWxpZGF0aW9uUmVzdWx0KSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZUFycmF5RmllbGROYW1lcyh2YWxpZGF0aW9uUmVzdWx0KTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0dpZ3lhXTogY3VzdG9tIHZhbGlkYXRpb24gdGhyZXcgYW4gZXJyb3JgLCBleCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChfY3VzdG9tVmFsaWRhdGlvblRpbWVvdXQpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyBGb3IgYXJyYXlzIGZpZWxkcyB3ZSBuZWVkIHRvIHN1cHBvcnQgYm90aCBraW5kIG9mIG1hcHBlZCBmaWVsZCBcImRhdGEuYXJyYXlSb290WzBdLmZpZWxkXCIgYW5kIFwiZGF0YS5hcnJheVJvb3QuMC5maWVsZFwiLlxuICAgIC8vIFRoYXQncyB3aHkgd2UgdW5mbGF0dGVuIGFycmF5IGZpcnN0LCBhbmQgZmxhdHRlbiBpdCBhZ2FpbiB3aXRoIGJvdGggb3B0aW9uc1xuICAgIHByaXZhdGUgbm9ybWFsaXplQXJyYXlGaWVsZE5hbWVzKGRhdGFPYmo6IGFueSk6IG9iamVjdCB7XG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2VzID0gZ2lneWEudXRpbHMub2JqZWN0LnVuZmxhdHRlbihkYXRhT2JqKTtcblxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLm9iamVjdC5mbGF0dGVuKGVycm9yTWVzc2FnZXMsIHRydWUpLFxuICAgICAgICAgICAgZ2lneWEudXRpbHMub2JqZWN0LmZsYXR0ZW4oZXJyb3JNZXNzYWdlcykpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaG93RXJyb3JzKGFyRXJyb3JzOiBJRXJyb3JJbmZvW10sIGlzU2VydmVyRXJyb3I6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuLnNob3dFcnJvcnModGhpcywgYXJFcnJvcnMsIGlzU2VydmVyRXJyb3IpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc1JlcXVpcmVkRmllbGQoZmllbGROYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgdmFyIGZpZWxkTmFtZXNwYWNlID0gZmlyc3RQYXJ0KGZpZWxkTmFtZSwgJy4nKTtcbiAgICAgICAgdmFyIHNjaGVtYU5hbWUgPSBmaWVsZE5hbWVzcGFjZSA9PSAnZGF0YScgPyAnZGF0YVNjaGVtYScgOiAncHJvZmlsZVNjaGVtYSc7XG4gICAgICAgIGlmIChmaWVsZE5hbWVzcGFjZSA9PSAnZGF0YScgfHwgZmllbGROYW1lc3BhY2UgPT0gJ3Byb2ZpbGUnKSB7XG4gICAgICAgICAgICBmaWVsZE5hbWUgPSBmaWVsZE5hbWUuc3Vic3RyaW5nKGZpZWxkTmFtZXNwYWNlLmxlbmd0aCArIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSB0aGlzLnJlcXVpcmVkRmllbGRzKCk7XG4gICAgICAgIGlmIChyZXF1aXJlZEZpZWxkc1tmaWVsZE5hbWVdKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTsgLy8gVE9ETyBzaG91bGRuJ3QgdGhpcyBiZSBkZXBlbmRhbnQgb24gaXMgc2NoZW1hVmFsaWRhdGVkP1xuXG4gICAgICAgIGlmIChhcGlEYXRhLmdldFNjaGVtYSAmJiBhcGlEYXRhLmdldFNjaGVtYVtzY2hlbWFOYW1lXSAmJiBhcGlEYXRhLmdldFNjaGVtYVtzY2hlbWFOYW1lXS5maWVsZHMpIHtcbiAgICAgICAgICAgIHZhciBzY2hlbWEgPSBhcGlEYXRhLmdldFNjaGVtYVtzY2hlbWFOYW1lXS5maWVsZHNbZmllbGROYW1lXTtcblxuICAgICAgICAgICAgaWYgKHNjaGVtYSAmJiBzY2hlbWEucmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHB1YmxpYyBhc3luYyBjYW5BdXRvU2tpcChmb3JtQ29udGV4dDogSUZvcm1Db250ZXh0KSB7XG4gICAgICAgIGlmICghdGhpcy5hdXRvU2tpcCB8fCBTb21lKHRoaXMuX2F1dG9Ta2lwQ29udGFpbmVycywgYyA9PiAhYy5jYW5BdXRvU2tpcCgpKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gYXdhaXQgdGhpcy5nZXRWYWxpZGF0aW9uRXJyb3JzKCk7XG5cbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25FcnJvcnM/Lmxlbmd0aCA9PT0gMDtcbiAgICB9XG5cbiAgICAvLyNyZWdpb24gZm9ybSBkYXRhXG5cbiAgICBwdWJsaWMgZ2V0Tm9ybWFsaXplZEZpZWxkTmFtZShmaWVsZE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGlmICghZmllbGROYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZmllbGROYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgc3BlY2lhbCBmaWVsZCBvciBsb2NhbCBmaWVsZCwgdXNlIGFzLWlzLlxuICAgICAgICBjb25zdCBzcGVjaWFsRmllbGRzID0gdGhpcy5zcGVjaWFsRmllbGRzKCk7XG4gICAgICAgIGlmIChzcGVjaWFsRmllbGRzW2ZpZWxkTmFtZV0gfHwgZmllbGROYW1lLmluZGV4T2YoJ2xvY2FsLicpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmllbGROYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IGRhdGEgYW5kIHByb2ZpbGUgbmFtZXNwYWNlLlxuICAgICAgICBjb25zdCBwcm9maWxlTmFtZXNwYWNlID0gdGhpcy5wcm9maWxlT2JqZWN0TmFtZSgpO1xuICAgICAgICBjb25zdCBkYXRhTmFtZXNwYWNlID0gdGhpcy5kYXRhT2JqZWN0TmFtZSgpO1xuICAgICAgICBjb25zdCBzdWJzY3JpcHRpb25OYW1lc3BhY2UgPSB0aGlzLnN1YnNjcmlwdGlvbk9iamVjdE5hbWUoKTtcbiAgICAgICAgY29uc3QgY29tbXVuaWNhdGlvbnNOYW1lc3BhY2UgPSB0aGlzLmNvbW11bmljYXRpb25zT2JqZWN0TmFtZSgpO1xuICAgICAgICBjb25zdCBwcmVmZXJlbmNlc05hbWVzcGFjZSA9IHRoaXMucHJlZmVyZW5jZXNPYmplY3ROYW1lKCk7XG4gICAgICAgIGNvbnN0IG9yZ2FuaXphdGlvbk5hbWVzcGFjZSA9IHRoaXMub3JnYW5pemF0aW9uT2JqZWN0TmFtZSgpO1xuICAgICAgICBjb25zdCByZXF1ZXN0ZXJOYW1lc3BhY2UgPSB0aGlzLnJlcXVlc3Rlck9iamVjdE5hbWUoKTtcblxuICAgICAgICAvLyBEZWZhdWx0IHRvIHByb2ZpbGUgbmFtZXNwYWNlIGlmIG5vdCBwcm92aWRlZCBhbmQgbm90IHNwZWNpYWwgZmllbGQuXG4gICAgICAgIGNvbnN0IG5hbWVQYXJ0cyA9IGZpZWxkTmFtZS5zcGxpdCgnLicpO1xuICAgICAgICBsZXQgbnMgPSBuYW1lUGFydHMubGVuZ3RoID4gMSA/IG5hbWVQYXJ0cy5zaGlmdCgpIDogcHJvZmlsZU5hbWVzcGFjZTtcblxuICAgICAgICAvLyBDaGFuZ2UgXCJwcm9maWxlLmRhdGEuZmllbGRcIiB0byBcImRhdGEuZmllbGRcIi5cbiAgICAgICAgaWYgKG5zID09PSBwcm9maWxlTmFtZXNwYWNlICYmIG5hbWVQYXJ0cy5sZW5ndGggPiAxICYmIG5hbWVQYXJ0c1swXSA9PT0gZGF0YU5hbWVzcGFjZSkge1xuICAgICAgICAgICAgbnMgPSBuYW1lUGFydHMuc2hpZnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERlZmF1bHQgdG8gcHJvZmlsZSBuYW1lc3BhY2UgaWYgdW5rbm93biBuYW1lc3BhY2Ugd2FzIHByb3ZpZGVkLlxuICAgICAgICBpZiAoW2RhdGFOYW1lc3BhY2UsIHByb2ZpbGVOYW1lc3BhY2UsIHN1YnNjcmlwdGlvbk5hbWVzcGFjZSwgY29tbXVuaWNhdGlvbnNOYW1lc3BhY2UsXG4gICAgICAgICAgICBwcmVmZXJlbmNlc05hbWVzcGFjZSwgb3JnYW5pemF0aW9uTmFtZXNwYWNlLCByZXF1ZXN0ZXJOYW1lc3BhY2VdLmluZGV4T2YobnMpID09IC0xKSB7XG4gICAgICAgICAgICBucyA9IHByb2ZpbGVOYW1lc3BhY2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQdXNoIG5hbWVzcGFjZSBiYWNrIG9udG8gYXJyYXkgb2Ygc3RyaW5ncy5cbiAgICAgICAgaWYgKG5zKSB7XG4gICAgICAgICAgICBuYW1lUGFydHMudW5zaGlmdChucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXR1cm4gc3RyaW5nLlxuICAgICAgICBjb25zdCBub3JtYWxpemVkRmllbGROYW1lID0gbmFtZVBhcnRzLmpvaW4oJy4nKTtcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWRGaWVsZE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZpZWxkKGZpZWxkTmFtZTogc3RyaW5nLCBhcnJheUtleVZhbHVlPzogc3RyaW5nLCB2aXNpYmxlT25seTogYm9vbGVhbiA9IGZhbHNlKTogSUZvcm1JbnB1dCB7XG4gICAgICAgIHZhciByZXN1bHQ6IElGb3JtSW5wdXQ7XG5cbiAgICAgICAgZmllbGROYW1lID0gdGhpcy5nZXROb3JtYWxpemVkRmllbGROYW1lKGZpZWxkTmFtZSk7XG5cbiAgICAgICAgU29tZSh0aGlzLmRhdGFUb1NlcnZlciwgZmllbGQgPT4ge1xuICAgICAgICAgICAgaWYgKHZpc2libGVPbmx5ICYmIGZpZWxkLmlzSW5IaWRkZW5Db250YWluZXIoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZpZWxkLm5vcm1hbGl6ZWRGaWVsZE5hbWUgPT09IGZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICghYXJyYXlLZXlWYWx1ZSB8fCBhcnJheUtleVZhbHVlID09PSBmaWVsZC5hcnJheUtleVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZpZWxkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1NwZWNpYWxGaWVsZChmaWVsZDogSUZvcm1JbnB1dCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnNwZWNpYWxGaWVsZHMoKVtmaWVsZC5maWVsZE5hbWVdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGb3JtRGF0YShpZ25vcmVIaWRkZW5Db250YWluZXJzOiBib29sZWFuLCBub3JtYWxpemVGaWVsZHM6IGJvb2xlYW4sIHJlcGxhY2VFbXB0eVN0cmluZ1dpdGhOdWxsOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IG9EYXRhOiBJTWFwPGFueT4gPSB7fTtcblxuICAgICAgICAvLyBHZXQgZXhpc3RpbmcgYWNjb3VudCBmb3IgYXJyYXkgbWVyZ2luZy5cbiAgICAgICAgY29uc3QgYWNjb3VudEluZm8gPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpLmdldEFjY291bnRJbmZvIHx8IHt9O1xuICAgICAgICBjb25zdCB0cmFja0NyZWF0ZWRPYmpLZXlzOiB7IFtrZXk6IHN0cmluZ106IEFycmF5PHN0cmluZz4gfSA9IHt9O1xuICAgICAgICBjb25zdCBpc1Zpc2libGVGaWVsZCA9IHt9O1xuXG4gICAgICAgIC8vIENyZWF0ZSBmb3JtIGRhdGEuXG4gICAgICAgIEZvckVhY2godGhpcy5kYXRhVG9TZXJ2ZXIsIGZpZWxkID0+IHtcbiAgICAgICAgICAgIGlmICgoIWZpZWxkLmRpc2FibGVkKCkgfHwgdGhpcy5pc1NwZWNpYWxGaWVsZChmaWVsZCkpICYmICghaWdub3JlSGlkZGVuQ29udGFpbmVycyB8fCAhZmllbGQuaXNJbkhpZGRlbkNvbnRhaW5lcigpKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkS2V5ID0gZmllbGQuZ2V0TmFtZShub3JtYWxpemVGaWVsZHMsIHRydWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5nZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUoYWNjb3VudEluZm8sIGZpZWxkS2V5LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyYXlSb290RmllbGQgPSBmaWVsZC5nZXRBcnJheVJvb3QodHJ1ZSk7XG4gICAgICAgICAgICAgICAgbGV0IGZpZWxkVmFsdWU6IHN0cmluZyB8IE9iamVjdCA9IGZpZWxkLmdldFZhbHVlKGZpZWxkLmluc3RhbmNlRWxlbWVudCwgY3VycmVudFZhbHVlIHx8IG9EYXRhW2ZpZWxkS2V5XSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50bHkgd2UgZG8gbm90IHN1cHBvcnQgdGhlIGZpZWxkJ3Mgb3JpZ2luYWwgZGF0YS10eXBlLlxuICAgICAgICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gZ2lneWEudXRpbHMub2JqZWN0LnBhcnNlVG9PYmplY3QoZmllbGRWYWx1ZS50b1N0cmluZygpKSB8fCBmaWVsZFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFR5cGljYWwgcGF0aCBmb3Igbm9uLWFycmF5IGZpZWxkcy5cbiAgICAgICAgICAgICAgICBpZiAoIWFycmF5Um9vdEZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB3aGVuIGdhdGhlcmluZyBwYXJhbWV0ZXJzIHRvIHNlbmQgdG8gdGhlIHNlcnZlci4gZG8gbm90IGNvbnZlcnQgZW1wdHkgYXJyYXkgdG8gbnVsbC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXBsYWNlRW1wdHlTdHJpbmdXaXRoTnVsbCAmJiBTdHJpbmcoZmllbGRWYWx1ZSkgPT09ICcnICYmIGZpZWxkVmFsdWUuY29uc3RydWN0b3IgIT09IEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVmlzaWJsZSA9ICFmaWVsZC5pc0luSGlkZGVuQ29udGFpbmVyKClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1Zpc2libGUgfHwgIWlzVmlzaWJsZUZpZWxkW2ZpZWxkS2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVmlzaWJsZUZpZWxkW2ZpZWxkS2V5XSA9IGlzVmlzaWJsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvRGF0YVtmaWVsZEtleV0gPSBmaWVsZFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJyYXkgcm9vdCBpcyBwcm92aWRlZCwgc3dpdGNoIHRvIGFycmF5IG1vZGUuIFZlcmlmeSBhbGwgcmVxdWlyZWQgYXR0cmlidXRlcyBhcmUgcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5S2V5RmllbGQgPSBmaWVsZC5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYXJyYXlLZXlGaWVsZEF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5S2V5VmFsdWUgPSBmaWVsZC5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYXJyYXlLZXlWYWx1ZUF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJyYXlLZXlGaWVsZCB8fCAhYXJyYXlLZXlWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YXJuKCdGaWVsZCBpZ25vcmVkIGJlY2F1c2UgZGF0YS1hcnJheS1yb290IHByb3ZpZGVkIHdpdGhvdXQgZGF0YS1hcnJheS1rZXktZmllbGQgYW5kIGRhdGEtYXJyYXkta2V5LXZhbHVlJywgZmllbGRLZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghb0RhdGFbYXJyYXlSb290RmllbGRdIHx8IG9EYXRhW2FycmF5Um9vdEZpZWxkXS5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhcnI6IEFycmF5PGFueT47XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3VudEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIgPSBnaWd5YS51dGlscy5vYmplY3QuY2xvbmUoZ2lneWEudXRpbHMub2JqZWN0LmdldFByb3BlcnR5QnlTZXJpYWxpemVkTmFtZShhY2NvdW50SW5mbywgYXJyYXlSb290RmllbGQsIGZhbHNlKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhcnIgfHwgYXJyLmNvbnN0cnVjdG9yICE9PSBBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb0RhdGFbYXJyYXlSb290RmllbGRdID0gYXJyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5Um9vdDogQXJyYXk8YW55PiA9IG9EYXRhW2FycmF5Um9vdEZpZWxkXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIG9yIGNyZWF0ZSBvYmplY3QgaW5zaWRlIG9mIGFycmF5LlxuICAgICAgICAgICAgICAgICAgICBsZXQgb2JqO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Um9vdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IGFycmF5Um9vdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvW2FycmF5S2V5RmllbGRdICYmIFN0cmluZyhvW2FycmF5S2V5RmllbGRdKSA9PT0gYXJyYXlLZXlWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG9iamVjdCB3YXMgZm91bmQgZnJvbSBzZXJ2ZXIsIHJlbW92ZSBvYmplY3QgZnJvbSBhcnJheSByb290IGFuZCByZS1jcmVhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG1lcmdlIGxvZ2ljIHJlcGxhY2VzIGVudGlyZSBvYmplY3RzIGJ1dCBrZWVwcyB0aGUgb3RoZXIgZWxlbWVudHMgaW4gdGhlIGFycmF5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdHJhY2tDcmVhdGVkT2JqS2V5c1thcnJheVJvb3RGaWVsZF0gfHwgZ2lneWEudXRpbHMuYXJyYXkuaW5kZXhPZih0cmFja0NyZWF0ZWRPYmpLZXlzW2FycmF5Um9vdEZpZWxkXSwgYXJyYXlLZXlWYWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5Um9vdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gbztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgbmV3IG9iamVjdCBvciBhcHBlbmQga2V5IHRvIGV4aXN0aW5nIG9iamVjdCBvbmx5IGlmIGEgZmllbGQgdmFsdWUgaXMgcHJlc2VudC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB3aGF0IGFsbG93cyBhbiBvYmplY3QgdG8gYmUgZGVsZXRlZCBmcm9tIHRoZSBhcnJheS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbYXJyYXlLZXlGaWVsZF06IGFycmF5S2V5VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheVJvb3QucHVzaChvYmopO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmFja0NyZWF0ZWRPYmpLZXlzW2FycmF5Um9vdEZpZWxkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NyZWF0ZWRPYmpLZXlzW2FycmF5Um9vdEZpZWxkXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0NyZWF0ZWRPYmpLZXlzW2FycmF5Um9vdEZpZWxkXS5wdXNoKGFycmF5S2V5VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdmFsdWUgdG8gb2JqZWN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViS2V5ID0gZmllbGRLZXkuc3Vic3RyKGFycmF5Um9vdEZpZWxkLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqW3N1YktleV0gPSBmaWVsZFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBvRGF0YSA9IHRoaXMucG9zdFByb2Nlc3NGb3JtRGF0YShvRGF0YSk7XG5cbiAgICAgICAgLy8gVGhlIGZvcm0gZGF0YSBtYXkgYmUgYSBtaXggb2YgZmxhdHRlbmVkIGFuZCB1bmZsYXR0ZW5lZCBkYXRhLiBFbnN1cmUgaXQgaXMgdW5mbGF0dGVuZWQuXG4gICAgICAgIG9EYXRhID0gZ2lneWEudXRpbHMub2JqZWN0LnVuZmxhdHRlbihvRGF0YSk7XG5cbiAgICAgICAgLy8gRmlsdGVyIHRoZSBkYXRhLlxuICAgICAgICBGb3JFYWNoKHRoaXMuZmlsdGVycywgd2lkID0+IHtcbiAgICAgICAgICAgIG9EYXRhID0gd2lkLmZpbHRlck91dFdpZGdldHNUb1NlbmQob0RhdGEpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gb0RhdGE7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwb3N0UHJvY2Vzc0Zvcm1EYXRhKG9EYXRhKSB7XG4gICAgICAgIGxldCByZXMgPSBnaWd5YS51dGlscy5vYmplY3QuY2xvbmUob0RhdGEpO1xuICAgICAgICByZXMgPSBwb3N0UHJvY2Vzc0Zvcm0ocmVzLCB0aGlzLmdldFNjaGVtYU9mKG5hbWVzcGFjZSkpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGbGF0Rm9ybURhdGEoaWdub3JlSGlkZGVuQ29udGFpbmVyczogYm9vbGVhbiwgbm9ybWFsaXplRmllbGRzOiBib29sZWFuLCByZXBsYWNlRW1wdHlTdHJpbmdXaXRoTnVsbDogYm9vbGVhbiA9IGZhbHNlKTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSB7XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QuZmxhdHRlbih0aGlzLmdldEZvcm1EYXRhKGlnbm9yZUhpZGRlbkNvbnRhaW5lcnMsIG5vcm1hbGl6ZUZpZWxkcywgcmVwbGFjZUVtcHR5U3RyaW5nV2l0aE51bGwpKSBhcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgcHVibGljIHN1YnNjcmlwdGlvbk9iamVjdE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnc3Vic2NyaXB0aW9ucyc7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbW11bmljYXRpb25zT2JqZWN0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdjb21tdW5pY2F0aW9ucyc7XG4gICAgfVxuXG4gICAgcHVibGljIGRhdGFPYmplY3ROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ2RhdGEnO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcm9maWxlT2JqZWN0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdwcm9maWxlJztcbiAgICB9XG5cbiAgICBwdWJsaWMgcHJlZmVyZW5jZXNPYmplY3ROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ3ByZWZlcmVuY2VzJztcbiAgICB9XG5cbiAgICBwdWJsaWMgb3JnYW5pemF0aW9uT2JqZWN0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdvcmdhbml6YXRpb24nO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXF1ZXN0ZXJPYmplY3ROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ3JlcXVlc3Rlcic7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHF1ZXJ5U3RyaW5nVG9TdWJtaXRQYXJhbU1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWZhdWx0U3VibWl0UGFyYW1zKCkge1xuICAgICAgICBjb25zdCBxc1BhcmFtcyA9IHRoaXMucXVlcnlTdHJpbmdUb1N1Ym1pdFBhcmFtTWFwKCk7XG4gICAgICAgIGNvbnN0IHJldCA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhxc1BhcmFtcykuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN1Ym1pdFBhcmFtID0gcXNQYXJhbXNbcF07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdpZ3lhLnV0aWxzLlVSTC5nZXRQYXJhbVZhbHVlRnJvbVVSTChwLCBsb2NhdGlvbi5zZWFyY2gsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXRbc3VibWl0UGFyYW1dID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgLy8jcmVnaW9uIHN1Ym1pdFxuXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpOiAocGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zLCBkYXRhLCBvcHRpb25zLCBkZWZhdWx0UGFyYW1zKSA9PiB2b2lkIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKE5PVF9JTVBMRU1FTlRFRCk7XG4gICAgfVxuXG4gICAgcHVibGljIF9nZXRTdWJtaXRBcGlQYXJhbXMocGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zKTogSVNjcmVlblNldFBhcmFtcyB7XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QucmVtb3ZlVW5kZWZpbmVkKHBhcmFtcykgYXMgSVNjcmVlblNldFBhcmFtcztcbiAgICB9XG5cbiAgICBwdWJsaWMgcGVyZm9ybVN1Ym1pdChmb3JtRGF0YTogYW55LCB7Y3VzdG9tU3VibWl0QXBpLCBvbkFmdGVyU3VibWl0Q2FsbGJhY2ssIHN1Ym1pdEFwaVBhcmFtc306IHtjdXN0b21TdWJtaXRBcGk/LCBvbkFmdGVyU3VibWl0Q2FsbGJhY2s/LCBzdWJtaXRBcGlQYXJhbXM/fSA9IHt9KTogdm9pZCB7XG4gICAgICAgIHRoaXMub25CZWZvcmVTdWJtaXQoZm9ybURhdGEpO1xuXG4gICAgICAgIGNvbnN0IHN1Ym1pdEFwaSA9IGN1c3RvbVN1Ym1pdEFwaSB8fCB0aGlzLnN1Ym1pdEFwaSgpO1xuXG4gICAgICAgIGNvbnN0IGV4dHJhRXZlbnREYXRhID0gdGhpcy5fc2NyZWVuU2V0LmRhdGEuZXh0cmFFdmVudERhdGE7XG4gICAgICAgIGlmICh0aGlzLl9yZW1lbWJlck1lKSB7XG4gICAgICAgICAgICBleHRyYUV2ZW50RGF0YS5yZW1lbWJlck1lID0gQm9vbGVhbih0aGlzLl9yZW1lbWJlck1lLmdldFZhbHVlKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVtZW1iZXIgPSBleHRyYUV2ZW50RGF0YS5yZW1lbWJlck1lO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0byB1c2UgdGhlIGxhdGVzdCByZWd0b2tlbi9hVG9rZW4gaWYgaXQgd2FzIHNldCBieSBhIGNoaWxkIHNjcmVlbnNldFxuICAgICAgICBpZiAodGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5wYXJhbXMucmVnVG9rZW4gPSB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fc2NyZWVuU2V0LmRhdGEuYVRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmFUb2tlbiA9IHRoaXMuX3NjcmVlblNldC5kYXRhLmFUb2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFwaVBhcmFtcyA9IHRoaXMuX2dldFN1Ym1pdEFwaVBhcmFtcyhnaWd5YS51dGlscy5vYmplY3QuY2xvbmUodGhpcy5fc2NyZWVuU2V0LnBhcmFtcywgdHJ1ZSkpO1xuXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbnMuZm9yRWFjaChiID0+IGIuZGlzYWJsZSgpKTtcbiAgICAgICAgdGhpcy5fc2NyZWVuLmRpbVNjcmVlbigpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgZG9udEhhbmRsZVNjcmVlblNldDogdHJ1ZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9uQWZ0ZXJTdWJtaXRDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBvbkFmdGVyU3VibWl0Q2FsbGJhY2socmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMub25BZnRlclN1Ym1pdChyZXNwb25zZSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1lbWJlcjogcmVtZW1iZXIsXG4gICAgICAgICAgICBzZXNzaW9uRXhwaXJhdGlvbjpcbiAgICAgICAgICAgICAgICByZW1lbWJlciAmJiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLnJlbWVtYmVyU2Vzc2lvbkV4cGlyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLnJlbWVtYmVyU2Vzc2lvbkV4cGlyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9zY3JlZW4uX3NjcmVlblNldC5wYXJhbXMuc2Vzc2lvbkV4cGlyYXRpb24sXG4gICAgICAgIH07XG5cbiAgICAgICAgc3VibWl0QXBpKGFwaVBhcmFtcywgZm9ybURhdGEsIG9wdGlvbnMsIHN1Ym1pdEFwaVBhcmFtcyB8fCB0aGlzLmRlZmF1bHRTdWJtaXRQYXJhbXMoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uQmVmb3JlU3VibWl0KGZvcm1EYXRhKSB7fVxuXG4gICAgcHVibGljIGFzeW5jIHJ1bkZvcm1WYWxpZGF0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXG4gICAgICAgIHRoaXMuX3NjcmVlblNldC5kaW1TY3JlZW5TZXQoKTtcblxuICAgICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gYXdhaXQgdGhpcy5nZXRWYWxpZGF0aW9uRXJyb3JzKCk7XG5cbiAgICAgICAgdGhpcy5vbkFmdGVyVmFsaWRhdGlvbih2YWxpZGF0aW9uRXJyb3JzKTtcblxuICAgICAgICB0aGlzLl9zY3JlZW5TZXQudW5kaW1TY3JlZW5TZXQoKTtcblxuICAgICAgICBpZiAodmFsaWRhdGlvbkVycm9ycz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3JzKHZhbGlkYXRpb25FcnJvcnMpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHN1Ym1pdChwYXJhbXM/OiB7Y3VzdG9tU3VibWl0QXBpPywgb25BZnRlclN1Ym1pdENhbGxiYWNrPywgc3VibWl0QXBpUGFyYW1zfSkge1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25DbGlja2VkID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUR5bmFtaWNGaWVsZHMoKTtcblxuICAgICAgICBpZiAodGhpcy5zaG91bGRXYWl0Rm9yU2VydmVyUmVzcG9uc2UoKSB8fCAhYXdhaXQgdGhpcy5ydW5Gb3JtVmFsaWRhdGlvbigpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2VuZXJhdGUgb2JqZWN0IHRvIHBhc3MgYXMgcGFyYW1zLlxuICAgICAgICAgICAgY29uc3QgZm9ybURhdGFGb3JTZXJ2ZXIgPSB0aGlzLmdldEZvcm1EYXRhKHRydWUsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgLy8gR2VuZXJhdGUgZmxhdCBmb3JtIGRhdGEgZm9yIGV2ZW50LlxuICAgICAgICAgICAgY29uc3QgZmxhdEZvcm1EYXRhRm9yRXZlbnQgPSB0aGlzLmdldEZsYXRGb3JtRGF0YSh0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGZsYXRGb3JtRGF0YUZvckV2ZW50WydwYXNzd29yZCddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBmbGF0Rm9ybURhdGFGb3JFdmVudFsncGFzc3dvcmQnXTsgLy8gbWVhbmluZ2xlc3MgaW4gdGVybXMgb2Ygc2VjdXJpdHkgYnV0IGxlc3Mgc2hvY2tpbmcgZm9yIGNsaWVudHMgOilcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZvcm1EYXRhRm9yU2VydmVyWydpZGVudGlmaWVyJ10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZXN0YWJsaXNoQVRva2VuKGF3YWl0IHRoaXMuY3JlYXRlQVRva2VuKGZvcm1EYXRhRm9yU2VydmVyWydpZGVudGlmaWVyJ10pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5jcmVhdGVGb3JtRXZlbnQ8SUJlZm9yZVN1Ym1pdEV2ZW50PignYmVmb3JlU3VibWl0Jywge1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhOiBmbGF0Rm9ybURhdGFGb3JFdmVudFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50UmVzdWx0ID0gdGhpcy5fc2NyZWVuLmRpc3BhdGNoRXZlbnQoJ2JlZm9yZVN1Ym1pdCcsIGV2ZW50KTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHN1Ym1pdCB3YXMgY2FuY2VsbGVkIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICAgICAgaWYgKGV2ZW50UmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1Ym1pdEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdzdWJtaXQnLFxuICAgICAgICAgICAgICAgICAgICBzY3JlZW46IHRoaXMuX3NjcmVlbj8ucmVxdWVzdGVkU2NyZWVuLFxuICAgICAgICAgICAgICAgICAgICBmb3JtOiB0aGlzLmJpbmRJRCxcbiAgICAgICAgICAgICAgICAgICAgYWNjb3VudEluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHRoaXMuX3NjcmVlblNldC5nZXRQcm9maWxlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLl9zY3JlZW5TZXQuZ2V0U2NoZW1hRGF0YSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmVyZW5jZXM6IHRoaXMuX3NjcmVlblNldC5nZXRQcmVmZXJlbmNlcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogdGhpcy5fc2NyZWVuU2V0LmdldFN1YlNjcmlwdGlvbnMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW11bmljYXRpb25zOiB0aGlzLl9zY3JlZW5TZXQuZ2V0Q29tbXVuaWNhdGlvbnMoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybU1vZGVsOiBmb3JtRGF0YUZvclNlcnZlcixcbiAgICAgICAgICAgICAgICB9IGFzIElTdWJtaXRFdmVudDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2NyZWVuPy5pc1NjcmVlblZhcmlhbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0RXZlbnQuYWJUZXN0aW5nID0gdGhpcy5fc2NyZWVuLmFiVGVzdGluZ0RhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBzdWJtaXRSZXN1bHQgPSB0aGlzLl9zY3JlZW4uZGlzcGF0Y2hFdmVudCgnc3VibWl0Jywgc3VibWl0RXZlbnQpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY2FwdGNoYURhdGEgPSBhd2FpdCB0aGlzLl9zY3JlZW4uZ2V0Q2FwdGNoYURhdGEoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FwdGNoYURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYXB0Y2hhRGF0YS50b2tlbiA9PT0gJ3N0cmluZycpIGZvcm1EYXRhRm9yU2VydmVyWydjYXB0Y2hhVG9rZW4nXSA9IGNhcHRjaGFEYXRhLnRva2VuO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhcHRjaGFEYXRhLnR5cGUgPT09ICdzdHJpbmcnKSBmb3JtRGF0YUZvclNlcnZlclsnY2FwdGNoYVR5cGUnXSA9IGNhcHRjaGFEYXRhLnR5cGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYmVoYXZpb3JDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmVoYXZpb3JDb250ZXh0Lm9uU3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1EYXRhRm9yU2VydmVyWydyaXNrQ29udGV4dCddID0gdGhpcy5iZWhhdmlvckNvbnRleHQucmlza0NvbnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmVoYXZpb3JDb250ZXh0LnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHN1Ym1pdFJlc3VsdCAmJiB0eXBlb2Ygc3VibWl0UmVzdWx0LnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0UmVzdWx0LnRoZW4oeCA9PiB0aGlzLnBlcmZvcm1TdWJtaXQoZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtmb3JtRGF0YUZvclNlcnZlciwgeF0pLCBwYXJhbXMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1TdWJtaXQoZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtmb3JtRGF0YUZvclNlcnZlciwgc3VibWl0UmVzdWx0XSksIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBhbGwgb3RoZXIgZXhjZXB0aW9ucyBnZXRzIHN3YWxsb3dlZCwgYWxzbyBpZiBpdCBoYXBwZW5lZCBmb3IgZXhhbXBsZSBpbnNpZGUgZm9ybSdzIG9uQWZ0ZXJTdWJtaXQgbWV0aG9kICghKVxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmVycm9yKCdleGNlcHRpb24gd2hlbiBzdWJtaXR0aW5nIGEgZm9ybScsIHtlLCBmb3JtOiB0aGlzLmdpZ3lhQ2xhc3N9KTtcbiAgICAgICAgICAgIGlmIChlICYmIGUubWVzc2FnZSA9PT0gJ2NhcHRjaGFOZWVkZWQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVycm9ySW5mbzogSUVycm9ySW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgnbG9naW5fY2FwdGNoYV9lcnJvcicpLFxuICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1IsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yRmxhZ3M6IGUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9ycyhbZXJyb3JJbmZvXSwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZUFUb2tlbihpZGVudGlmaWVyOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmlkZW50aWZpZXIuY3JlYXRlVG9rZW4oe1xuICAgICAgICAgICAgICAgIGlkZW50aWZpZXJUeXBlOiB0aGlzLmdldEZpZWxkKCdpZGVudGlmaWVyJyk/LmdldE1ldGFkYXRhKClbRm9ybUlucHV0X0NPTlNUUy5pZGVudGlmaWVyVHlwZV0sXG4gICAgICAgICAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlc3BvbnNlWydhVG9rZW4nXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIud2FybignSWRlbnRpZmllciBDcmVhdGUgdG9rZW4gcmVxdWVzdCBmaWxlZCcsIHJlc3BvbnNlPy5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vI3JlZ2lvbiAtIGNvZGUgdG8gYmUgcmVtb3ZlZDogdGhlIGZvbGxvd2luZyBjb2RlIGJsb2NrIHNob3VsZCBiZSByZW1vdmVkIHdoZW4gdGhlIG9sZCBwaG90byB1cGxvYWQgd2lkZ2V0IHdpbGwgbm90IGJlIHN1cHBvcnRlZCBhbG9uZyB3aXRoIEJhc2VTZXJ2ZXJXaWRnZXRcbiAgICBwcml2YXRlIHNob3VsZFdhaXRGb3JTZXJ2ZXJSZXNwb25zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNXYWl0aW5nRm9yU2VydmVyUmVzcG9uc2UpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmlzV2FpdGluZ0ZvclNlcnZlcldpZGdldCgpIHx8IHRoaXMuaXNXYWl0aW5nRm9yU2VydmVyRmllbGQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzV2FpdGluZ0ZvclNlcnZlcldpZGdldCgpOiBib29sZWFuIHtcbiAgICAgICAgZm9yIChjb25zdCB3aWRnZXQgb2YgdGhpcy5fc2VydmVyV2lkZ2V0cykge1xuICAgICAgICAgICAgaWYgKHdpZGdldC5zZXJ2ZXJTdGF0ZSA9PT0gU2VydmVyU3RhdGVzLkluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzV2FpdGluZ0ZvclNlcnZlclJlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB3aWRnZXQucnVuT25TZXJ2ZXJEb25lKCgpID0+IHRoaXMuc3VibWl0QWZ0ZXJTZXJ2ZXJSZXNwb25zZSgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaXNXYWl0aW5nRm9yU2VydmVyRmllbGQoKTogYm9vbGVhbiB7XG4gICAgICAgIGZvciAobGV0IGZpZWxkIG9mIHRoaXMuZGF0YVRvU2VydmVyKSB7XG4gICAgICAgICAgICBpZih0aGlzLmlzUGVuZGluZyhmaWVsZCkpe1xuICAgICAgICAgICAgICAgIHRoaXMuaXNXYWl0aW5nRm9yU2VydmVyUmVzcG9uc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZpZWxkLnJ1bk9uU2VydmVyRG9uZSgoKSA9PiB0aGlzLnN1Ym1pdEFmdGVyU2VydmVyUmVzcG9uc2UoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN1Ym1pdEFmdGVyU2VydmVyUmVzcG9uc2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaXNXYWl0aW5nRm9yU2VydmVyUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdWJtaXQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzUGVuZGluZyhmaWVsZDogSUZvcm1JbnB1dCk6IGJvb2xlYW57XG4gICAgICAgIHJldHVybiBmaWVsZC5nZXRWYWxpZGl0eVN0YXRlKCkgPT09IFZhbGlkaXR5U3RhdGVzLnBlbmRpbmdcbiAgICB9XG4gICAgLy8jZW5kcmVnaW9uXG5cblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHVibGljIG9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuLnVuZGltU2NyZWVuKCk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbnMuZm9yRWFjaChiID0+IGIuZW5hYmxlKCkpO1xuXG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBGb3JtX0NPTlNUUy5mb3JtRXJyb3JDbGFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIEZvcm1fQ09OU1RTLmZvcm1FcnJvckNsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKHJlc3BvbnNlLCB0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2lneWEubG9nZ2VyLmdyb3VwKGBmb3JtIGNvbmRpdGlvbmFsIGF0dHJpYnV0ZXMgZXZhbHVhdGlvbmApLmVuZFdoZW4oKCkgPT4ge1xuICAgICAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9keW5hbWljSW5wdXRzLCBkeW5hbWljSW5wdXQgPT4ge1xuICAgICAgICAgICAgICAgIGR5bmFtaWNJbnB1dC5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIEZvckVhY2godGhpcy5fd2lkZ2V0cywgd2lkZ2V0ID0+IHtcbiAgICAgICAgICAgICAgICB3aWRnZXQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMuX2lucHV0cywgaW5wdXQgPT4ge1xuICAgICAgICAgICAgICAgIGlucHV0LmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgRm9yRWFjaCh0aGlzLl9wYXNzd29yZElucHV0cywgcGFzc3dvcmRJbnB1dCA9PiB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmRJbnB1dC5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIEZvckVhY2godGhpcy5fcGFzc3dvcmRSZXR5cGVzLCBwYXNzd29yZFJldHlwZSA9PiB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmRSZXR5cGUuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMuX3NlY3JldFF1ZXN0aW9ucywgc2VjID0+IHtcbiAgICAgICAgICAgICAgICBzZWMuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMuX2F1dG9Ta2lwQ29udGFpbmVycywgYXV0byA9PiB7XG4gICAgICAgICAgICAgICAgYXV0by5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIEZvckVhY2godGhpcy5fc2VydmVyV2lkZ2V0cywgc2VydiA9PiB7XG4gICAgICAgICAgICAgICAgc2Vydi5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVtZW1iZXJNZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbWVtYmVyTWUuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxTdWNjZXNzU2NyZWVuID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1fQ09OU1RTLnN1Y2Nlc3NTY3JlZW4pO1xuICAgICAgICB0aGlzLnN1Y2Nlc3NTY3JlZW4gPSB0aGlzLl9zY3JlZW5TZXQuY2hvb3NlTmV4dFNjcmVlbih0aGlzLm9yaWdpbmFsU3VjY2Vzc1NjcmVlbik7XG5cbiAgICAgICAgdGhpcy5hdXRvU2tpcCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5hdXRvU2tpcEZsYWcpID09ICd0cnVlJztcbiAgICAgICAgdGhpcy5hdXRvU2tpcFNjcmVlbiA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtX0NPTlNUUy5hdXRvU2tpcFNjcmVlbikgfHwgdGhpcy5zdWNjZXNzU2NyZWVuO1xuICAgICAgICB0aGlzLnNjcmVlblNldFNraXBwZWRTY3JlZW4gPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybV9DT05TVFMuc2NyZWVuU2V0U2tpcHBlZFNjcmVlbikgfHwgdGhpcy5zdWNjZXNzU2NyZWVuO1xuICAgIH1cblxuICAgIHB1YmxpYyBoYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChzdXBlci5oYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSkgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgdmFyIGNoaWxkcmVuOiBBcnJheTxUZW1wbGF0ZUVsZW1lbnQ8SFRNTERpdkVsZW1lbnQ+PiA9IFtdLmNvbmNhdChcbiAgICAgICAgICAgIHRoaXMuX3dpZGdldHMsXG4gICAgICAgICAgICB0aGlzLl9pbnB1dHMsXG4gICAgICAgICAgICB0aGlzLl9keW5hbWljSW5wdXRzLFxuICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRJbnB1dHMsXG4gICAgICAgICAgICB0aGlzLl9wYXNzd29yZFJldHlwZXMsXG4gICAgICAgICAgICB0aGlzLl9zZWNyZXRRdWVzdGlvbnMsXG4gICAgICAgICAgICB0aGlzLl9hdXRvU2tpcENvbnRhaW5lcnMsXG4gICAgICAgICAgICB0aGlzLl9zZXJ2ZXJXaWRnZXRzLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5hcnJheS5zb21lKGNoaWxkcmVuLCBjaGlsZCA9PiBjaGlsZC5oYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCkge1xuICAgICAgICBzdXBlci5yZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpO1xuXG4gICAgICAgIEZvckVhY2godGhpcy5fZHluYW1pY0lucHV0cywgZHluYW1pY0lucHV0ID0+IHtcbiAgICAgICAgICAgIGR5bmFtaWNJbnB1dC5yZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBGb3JFYWNoKHRoaXMuX3dpZGdldHMsIHdpZGdldCA9PiB7XG4gICAgICAgICAgICB3aWRnZXQucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRm9yRWFjaCh0aGlzLl9pbnB1dHMsIGlucHV0ID0+IHtcbiAgICAgICAgICAgIGlucHV0LnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIEZvckVhY2godGhpcy5fcGFzc3dvcmRJbnB1dHMsIHBhc3N3b3JkSW5wdXQgPT4ge1xuICAgICAgICAgICAgcGFzc3dvcmRJbnB1dC5yZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBGb3JFYWNoKHRoaXMuX3Bhc3N3b3JkUmV0eXBlcywgcGFzc3dvcmRSZXR5cGUgPT4ge1xuICAgICAgICAgICAgcGFzc3dvcmRSZXR5cGUucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRm9yRWFjaCh0aGlzLl9zZWNyZXRRdWVzdGlvbnMsIHNlYyA9PiB7XG4gICAgICAgICAgICBzZWMucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRm9yRWFjaCh0aGlzLl9hdXRvU2tpcENvbnRhaW5lcnMsIGF1dG8gPT4ge1xuICAgICAgICAgICAgYXV0by5yZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBGb3JFYWNoKHRoaXMuX3NlcnZlcldpZGdldHMsIHNlcnYgPT4ge1xuICAgICAgICAgICAgc2Vydi5yZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBzdXBwb3J0Q29uc2VudERhdGEoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzPy5zdXBwb3J0Q29uc2VudERhdGFcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldENvbnNlbnREYXRhKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICAgICAgaWYgKHRoaXMuX3NjcmVlblNldC5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5jb25zZW50U3RhdGVtZW50cyA9IGdldENvbnNlbnREYXRhRm9yU2NyZWVuU2V0KGFwaURhdGEsIHRoaXMuX3NjcmVlblNldC5sYW5nKSB8fCB7fTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IElXaWRnZXRUeXBlLCBJV2lkZ2V0LCBCYXNlV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlV2lkZ2V0JztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBJTWFwIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQge0Zvcm1JbnB1dCwgSVZhbGlkYXRpb25JbmZvfSBmcm9tICcuL0lucHV0cy9Gb3JtSW5wdXQnO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHtJRm9ybURhdGFQcm92aWRlcn0gZnJvbSAnLi9EYXRhUHJvdmlkZXJzL0lGb3JtRGF0YVByb3ZpZGVyJztcblxuY29uc3QgZGlzcGxheU5hbWVBdHRyaWJ1dGUgPSAnZGF0YS1kaXNwbGF5LW5hbWUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElGb3JtV2lkZ2V0VHlwZTxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGV4dGVuZHMgSVdpZGdldFR5cGU8VD4ge1xuICAgIG5ldyAoZm9ybTogQmFzZUZvcm0sIGVsOiBIVE1MRWxlbWVudCk6IElGb3JtV2lkZ2V0O1xufVxuZXhwb3J0IGludGVyZmFjZSBJRm9ybVdpZGdldCBleHRlbmRzIElXaWRnZXQge1xuICAgIF9mb3JtOiBCYXNlRm9ybTtcbiAgICBnZXRGaWVsZHNOYW1lcygpOiBzdHJpbmdbXTtcbiAgICB1cGRhdGUoKTogdm9pZDtcbiAgICB2YWxpZGF0ZUFzeW5jKGZvcm1EYXRhOiBhbnkpOiBQcm9taXNlPElWYWxpZGF0aW9uSW5mbz47XG59XG5cbmV4cG9ydCBjbGFzcyBCYXNlRm9ybVdpZGdldDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGV4dGVuZHMgQmFzZVdpZGdldDxUPiBpbXBsZW1lbnRzIElGb3JtV2lkZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgX2Zvcm06IEJhc2VGb3JtLCBlbDogVCwgcmVzZXRDU1M/OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKGVsLCBfZm9ybSwgX2Zvcm0uX3NjcmVlbiwgcmVzZXRDU1MpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIEZvcm1XaWRnZXRzTGlicmFyeTogSU1hcDxJRm9ybVdpZGdldFR5cGU8SFRNTEVsZW1lbnQ+PiA9IHt9O1xuXG4gICAgc3RhdGljIGFkZFdpZGdldFRvTGlicmFyeSh3aWRnZXQ6IElGb3JtV2lkZ2V0VHlwZTxIVE1MRWxlbWVudD4pIHtcbiAgICAgICAgQmFzZUZvcm1XaWRnZXQuRm9ybVdpZGdldHNMaWJyYXJ5W3dpZGdldC5DT05TVFMuc2VsZWN0b3JdID0gd2lkZ2V0O1xuICAgIH1cblxuICAgIHN0YXRpYyByZWdpc3RlcldpZGdldHMocGFyZW50OiBCYXNlRm9ybSkge1xuICAgICAgICByZXR1cm4gQmFzZVdpZGdldC5yZWdpc3RlclR5cGVkV2lkZ2V0cyhwYXJlbnQudGVtcGxhdGVFbGVtZW50LCBCYXNlRm9ybVdpZGdldC5Gb3JtV2lkZ2V0c0xpYnJhcnksICh0eXBlLCBlbCkgPT4gbmV3IHR5cGUocGFyZW50LCBlbCkpO1xuICAgIH1cblxuICAgIHN0YXRpYyByZWdpc3RlckR5bmFtaWNXaWRnZXRzKHBhcmVudDogQmFzZUZvcm0sIHJvb3RFbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIEJhc2VXaWRnZXQucmVnaXN0ZXJUeXBlZFdpZGdldHMocm9vdEVsLCBCYXNlRm9ybVdpZGdldC5Gb3JtV2lkZ2V0c0xpYnJhcnksICh0eXBlLCBlbCkgPT4gbmV3IHR5cGUocGFyZW50LCBlbCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGaWVsZHNOYW1lcygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKCk6IHZvaWQge31cblxuICAgIHB1YmxpYyBhc3luYyB2YWxpZGF0ZUFzeW5jKCk6IFByb21pc2U8SVZhbGlkYXRpb25JbmZvPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5PSyxcbiAgICAgICAgICAgIHdpZGdldDogdGhpc1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0RXJyb3JUZXh0KGVycm9yS2V5OiBzdHJpbmcsIGZpZWxkTmFtZT86IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoZXJyb3JLZXksICclZmllbGRuYW1lJywgZmllbGROYW1lKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGRpc3BsYXlOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoZGlzcGxheU5hbWVBdHRyaWJ1dGUpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRFcnJvclRleHRGcm9tUmVzcG9uc2UocmVzcG9uc2UsIGZpZWxkTmFtZT86IHN0cmluZykge1xuICAgICAgICBpZiAocmVzcG9uc2U/LmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuRXh0ZW5zaW9uX1BvaW50X0N1c3RvbV9FcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmVycm9yRGV0YWlscyB8fCByZXNwb25zZS5lcnJvck1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlcnJvcktleSA9IHRoaXMuZ2V0RXJyb3JLZXlGcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuXG4gICAgICAgIGlmIChlcnJvcktleSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RXJyb3JUZXh0KGVycm9yS2V5LCBmaWVsZE5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmVycm9yTWVzc2FnZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0RXJyb3JLZXlGcm9tUmVzcG9uc2UocmVzcG9uc2UpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGRhdGFQcm92aWRlcigpOiBJRm9ybURhdGFQcm92aWRlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtLmRhdGFQcm92aWRlcjtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgdmFsaWRhdGVDaGlsZEZpZWxkKGZvcm1GaWVsZDogRm9ybUlucHV0KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGlmIChmb3JtRmllbGQgJiYgdGhpcy5fZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgdmFsaWRhdGlvbkluZm8gPSBhd2FpdCBmb3JtRmllbGQudmFsaWRhdGVBc3luYygpO1xuICAgICAgICAgICAgdGhpcy5fZm9ybS5yZW5kZXJGaWVsZEVycm9yKHtcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSxcbiAgICAgICAgICAgICAgICBmaWVsZDogZm9ybUZpZWxkLFxuICAgICAgICAgICAgfSwgdHJ1ZSlcblxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSA9PT0gMFxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtCYXNlQXV0aE1ldGhvZFdpZGdldH0gZnJvbSAnLi9CYXNlQXV0aE1ldGhvZFdpZGdldCc7XG5pbXBvcnQgYWNjb3VudHMgPSBnaWd5YS5hY2NvdW50cztcbmltcG9ydCB7TElOS19BQ0NPVU5UU19ERUZBVUxUX0lOQ0xVREVfUEFSQU19IGZyb20gJy4vQ29uc3RhbnRzL2xpbmstYWNjb3VudHMnO1xuaW1wb3J0IHsgR1NFcnJvcnMgfSBmcm9tICcuLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5pbXBvcnQge0lucHV0VmFsdWVUeXBlfSBmcm9tICcuL1NjaGVtYVR5cGVDb252ZXJ0ZXInO1xuaW1wb3J0IHtBcGlMaW5rSGVscGVyfSBmcm9tICcuL0FwaUxpbmtIZWxwZXInO1xuaW1wb3J0IHtwcm9taXNpZnl9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9wcm9taXNlJztcbmltcG9ydCB7R2lneWFSZXNwb25zZX0gZnJvbSAnZ2lneWEnO1xuXG5leHBvcnQgY29uc3QgQ09OU1RTID0ge1xuICBpbnB1dFNlbGVjdG9yOiAnLmdpZ3lhLWlucHV0LXRleHQnLFxuICByZXNlbmRCdXR0b25TZWxlY3RvcjogJy5naWd5YS1vdHAtcmVzZW5kLWJ1dHRvbicsXG4gIGZpZWxkTmFtZUF0dHI6ICduYW1lJ1xufTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VPdHBBdXRoTWV0aG9kV2lkZ2V0IGV4dGVuZHMgQmFzZUF1dGhNZXRob2RXaWRnZXQge1xuICBwcm90ZWN0ZWQgdlRva2VuOiBzdHJpbmc7XG4gIHByb3RlY3RlZCBpbml0QXBpTGluazogQXBpTGlua0hlbHBlcjtcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGdldCBpbml0QXBpUGFyYW1zKCk7XG5cbiAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KSB7XG4gICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgdGhpcy5pbml0QXBpTGluayA9IG5ldyBBcGlMaW5rSGVscGVyKFxuICAgICAgICB0aGlzLnJlc2VuZENvZGVFbGVtZW50LFxuICAgICAgKCkgPT4gdGhpcy5jYWxsSW5pdEFwaSgpXG4gICAgKTtcblxuICAgIHRoaXMuY29sbGFwc2UoKTtcbiAgfVxuXG4gIHB1YmxpYyB1bmxpbmtJbnN0YW5jZUVsZW1lbnQoKSB7XG4gICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgdGhpcy5pbml0QXBpTGluaz8uZGVzdHJveSgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBzdWJtaXRBcGkoKTogRnVuY3Rpb24ge1xuICAgIHJldHVybiBhY2NvdW50cy5vdHAubG9naW47XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGluaXRBcGkoKTogRnVuY3Rpb24ge1xuICAgIHJldHVybiBhY2NvdW50cy5vdHAuc2VuZENvZGU7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgb25DbGljaygpIHtcbiAgICBzdXBlci5vbkNsaWNrKCk7XG5cbiAgICBpZiAodGhpcy5pbml0QXBpICYmICF0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIHRoaXMuaW5pdEFwaUxpbms/LmluaXQoKTtcbiAgICAgIGF3YWl0IHRoaXMuY2FsbEluaXRBcGkoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgY2FsbEluaXRBcGkoKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwcm9taXNpZnk8R2lneWFSZXNwb25zZT4odGhpcy5pbml0QXBpLCB0aGlzLmluaXRBcGlQYXJhbXMpO1xuICAgIHRoaXMuaGFuZGxlSW5pdEFwaVJlc3BvbnNlKHJlc3BvbnNlKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBoYW5kbGVJbml0QXBpUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG4gICAgaWYgKE51bWJlcihyZXNwb25zZT8uZXJyb3JDb2RlKSAhPSBHU0Vycm9ycy5PSykge1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3JNZXNzYWdlKHJlc3BvbnNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocmVzcG9uc2U/LnZUb2tlbikge1xuICAgICAgdGhpcy52VG9rZW4gPSByZXNwb25zZVsndlRva2VuJ107XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yTWVzc2FnZShyZXNwb25zZSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBzdWJtaXRBcGlQYXJhbXMoKSB7XG4gICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICB0aGlzLmRhdGFQcm92aWRlci5kZWZhdWx0U3VibWl0UGFyYW1zLFxuICAgICAge1xuICAgICAgICBpbmNsdWRlOiBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKFxuICAgICAgICAgIExJTktfQUNDT1VOVFNfREVGQVVMVF9JTkNMVURFX1BBUkFNLFxuICAgICAgICAgIHRoaXMuZGF0YVByb3ZpZGVyLmluY2x1ZGVQYXJhbXMpLFxuICAgICAgICBzdXBwcmVzc0xvZ2luRXZlbnQ6IHRydWUsXG4gICAgICAgIGNvZGU6IHRoaXMuY29kZSxcbiAgICAgICAgdlRva2VuOiB0aGlzLnZUb2tlblxuICAgICAgfVxuICAgIF0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBjb2RlRmllbGRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKENPTlNUUy5pbnB1dFNlbGVjdG9yKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgY29kZUZpZWxkTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvZGVGaWVsZEVsZW1lbnQ/LmdldEF0dHJpYnV0ZShDT05TVFMuZmllbGROYW1lQXR0cik7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGNvZGUoKTogSW5wdXRWYWx1ZVR5cGUge1xuICAgIGlmICghdGhpcy5jb2RlRmllbGROYW1lKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZm9ybS5nZXRGaWVsZCh0aGlzLmNvZGVGaWVsZE5hbWUpPy5nZXRWYWx1ZSgpO1xuICB9XG5cblxuICBwcm90ZWN0ZWQgZ2V0IHJlc2VuZENvZGVFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcbiAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKENPTlNUUy5yZXNlbmRCdXR0b25TZWxlY3Rvcik7XG4gIH1cbn1cbiIsImltcG9ydCB7SVdpZGdldFR5cGUsIElXaWRnZXQsIEJhc2VXaWRnZXR9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVdpZGdldCc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtcbiAgRm9yRWFjaCxcbiAgSU1hcFxufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBJU2NyZWVuV2lkZ2V0VHlwZTxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGV4dGVuZHMgSVdpZGdldFR5cGU8VD4ge1xuICBuZXcoc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRWxlbWVudCk6IElTY3JlZW5XaWRnZXQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNjcmVlbldpZGdldCBleHRlbmRzIElXaWRnZXQge1xufVxuXG5leHBvcnQgY2xhc3MgQmFzZVNjcmVlbldpZGdldDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGV4dGVuZHMgQmFzZVdpZGdldDxUPiBpbXBsZW1lbnRzIElTY3JlZW5XaWRnZXQge1xuICBwdWJsaWMgZGVwcz86IEFycmF5PElXaWRnZXRUeXBlPEhUTUxFbGVtZW50Pj47XG4gIHByaXZhdGUgX2NoaWxkV2lkZ2V0czogQXJyYXk8SVNjcmVlbldpZGdldD4gPSBbXTtcblxuICBjb25zdHJ1Y3Rvcihfc2NyZWVuOiBTY3JlZW4sIGVsOiBULCByZXNldENTUz86IGJvb2xlYW4pIHtcbiAgICBzdXBlcihlbCwgX3NjcmVlbiwgX3NjcmVlbiwgcmVzZXRDU1MpO1xuICB9XG5cbiAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICB0aGlzLnVubGlua1dpZGdldHMoKTtcbiAgICB0aGlzLnVubGlua0NoaWxkRWxlbWVudHMoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1bmxpbmtXaWRnZXRzKCkge1xuICAgIEZvckVhY2godGhpcy5fY2hpbGRXaWRnZXRzLCB3aWRnZXQgPT4ge1xuICAgICAgd2lkZ2V0LnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NoaWxkV2lkZ2V0cyA9IFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgU2NyZWVuV2lkZ2V0c0xpYnJhcnk6IElNYXA8SVNjcmVlbldpZGdldFR5cGU8SFRNTEVsZW1lbnQ+PiA9IHt9O1xuXG4gIHByb3RlY3RlZCBsaW5rV2lkZ2V0cygpIHtcbiAgICAvLyBXaWRnZXRzIHRoYXQgcmVuZGVyIGh0bWwgaW5zaWRlIHRoZW0sIG11c3QgcmVnaXN0ZXIgaW50ZXJuYWwgd2lkZ2V0c1xuICAgIGlmICghdGhpcy5fc2NyZWVuIHx8ICF0aGlzLl9zY3JlZW4uaW5zdGFuY2VFbGVtZW50KSByZXR1cm47XG4gICAgdGhpcy5fY2hpbGRXaWRnZXRzID1cbiAgICAgIEJhc2VTY3JlZW5XaWRnZXQucmVnaXN0ZXJEeW5hbWljV2lkZ2V0cyh0aGlzLl9zY3JlZW4sIHRoaXMuaW5zdGFuY2VFbGVtZW50KVxuICAgICAgICAuZmlsdGVyKGNoaWxkV2lkZ2V0ID0+ICF0aGlzLmRlcHMgfHwgIXRoaXMuZGVwcy5zb21lKGRlcCA9PiBjaGlsZFdpZGdldCBpbnN0YW5jZW9mIGRlcCkpO1xuXG4gICAgRm9yRWFjaCh0aGlzLl9jaGlsZFdpZGdldHMsIHdpZGdldCA9PiB7XG4gICAgICB3aWRnZXQubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLl9zY3JlZW4uaW5zdGFuY2VFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIHN0YXRpYyBhZGRXaWRnZXRUb0xpYnJhcnkod2lkZ2V0OiBJU2NyZWVuV2lkZ2V0VHlwZTxIVE1MRWxlbWVudD4pIHtcbiAgICBCYXNlU2NyZWVuV2lkZ2V0LlNjcmVlbldpZGdldHNMaWJyYXJ5W3dpZGdldC5DT05TVFMuc2VsZWN0b3JdID0gd2lkZ2V0O1xuICB9XG5cbiAgc3RhdGljIHJlZ2lzdGVyV2lkZ2V0cyhwYXJlbnQ6IFNjcmVlbikge1xuICAgIHJldHVybiBCYXNlV2lkZ2V0LnJlZ2lzdGVyVHlwZWRXaWRnZXRzKHBhcmVudC50ZW1wbGF0ZUVsZW1lbnQsIEJhc2VTY3JlZW5XaWRnZXQuU2NyZWVuV2lkZ2V0c0xpYnJhcnksICh0eXBlLCBlbCkgPT4gbmV3IHR5cGUocGFyZW50LCBlbCkpO1xuICB9XG4gIHN0YXRpYyByZWdpc3RlckR5bmFtaWNXaWRnZXRzKHBhcmVudDogU2NyZWVuLCByb290RWw6IEhUTUxFbGVtZW50KSB7XG4gICAgcmV0dXJuIEJhc2VXaWRnZXQucmVnaXN0ZXJUeXBlZFdpZGdldHMocm9vdEVsLCBCYXNlU2NyZWVuV2lkZ2V0LlNjcmVlbldpZGdldHNMaWJyYXJ5LCAodHlwZSwgZWwpID0+IG5ldyB0eXBlKHBhcmVudCwgZWwpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSwgRm9yRWFjaCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgQmFzZUZvcm1XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5cbmV4cG9ydCBlbnVtIFNlcnZlclN0YXRlcyB7XG4gICAgTm90U3RhcnRlZCxcbiAgICBJblByb2dyZXNzLFxuICAgIERvbmUsXG4gICAgRXJyb3IsXG59XG5EZWVwRnJlZXplKFNlcnZlclN0YXRlcyk7XG5leHBvcnQgaW50ZXJmYWNlIFNlcnZlckRvbmVDYWxsYmFjayBleHRlbmRzIEZ1bmN0aW9uIHtcbiAgICAoc3RhdHVzOiBTZXJ2ZXJTdGF0ZXMsIHdpZGdldDogQmFzZVNlcnZlcldpZGdldDxhbnk+KTogdm9pZDtcbn1cbmV4cG9ydCBjbGFzcyBCYXNlU2VydmVyV2lkZ2V0PFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gZXh0ZW5kcyBCYXNlRm9ybVdpZGdldDxUPiB7XG4gICAgcHJpdmF0ZSBuZXh0U2VydmVyUXVlcnlJZCA9IDA7XG4gICAgcHVibGljIHNlcnZlclN0YXRlID0gU2VydmVyU3RhdGVzLk5vdFN0YXJ0ZWQ7XG4gICAgcHJpdmF0ZSBjYWxsYmFja3MgPSBuZXcgQXJyYXk8U2VydmVyRG9uZUNhbGxiYWNrPigpO1xuXG4gICAgY29uc3RydWN0b3IoZm9ybTogQmFzZUZvcm0sIGVsOiBULCByZXNldENTUz86IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIoZm9ybSwgZWwsIHJlc2V0Q1NTKTtcblxuICAgICAgICBmb3JtLl9zZXJ2ZXJXaWRnZXRzLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0U2VydmVyUXVlcnkoKSB7XG4gICAgICAgIHRoaXMuc2VydmVyU3RhdGUgPSBTZXJ2ZXJTdGF0ZXMuSW5Qcm9ncmVzcztcblxuICAgICAgICByZXR1cm4gKyt0aGlzLm5leHRTZXJ2ZXJRdWVyeUlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblNlcnZlclF1ZXJ5RW5kPEQ+KHNlcnZlclF1ZXJ5SWQ6IG51bWJlciwgbmV3U3RhdGU6IFNlcnZlclN0YXRlcywgZGF0YT86IEQpIHtcbiAgICAgICAgaWYgKHNlcnZlclF1ZXJ5SWQgPT09IHRoaXMubmV4dFNlcnZlclF1ZXJ5SWQpIHRoaXMuc2VydmVyUXVlcnlEb25lKG5ld1N0YXRlLCBkYXRhKTtcbiAgICAgICAgZWxzZSB0aGlzLndhcm4oJ0lnbm9yaW5nIHNlcnZlciByZXNwb25zZSAjJyArIHNlcnZlclF1ZXJ5SWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXJ2ZXJRdWVyeURvbmU8RD4obmV3U3RhdGU6IFNlcnZlclN0YXRlcywgZGF0YT86IEQpIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJTdGF0ZSA9IG5ld1N0YXRlO1xuXG4gICAgICAgIEZvckVhY2godGhpcy5jYWxsYmFja3MsIGNhbGxiYWNrID0+IGNhbGxiYWNrKG5ld1N0YXRlLCB0aGlzKSk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzID0gbmV3IEFycmF5PFNlcnZlckRvbmVDYWxsYmFjaz4oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcnVuT25TZXJ2ZXJEb25lKGNhbGxiYWNrOiBTZXJ2ZXJEb25lQ2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuc2VydmVyU3RhdGUgIT09IFNlcnZlclN0YXRlcy5JblByb2dyZXNzKSBjYWxsYmFjayh0aGlzLnNlcnZlclN0YXRlLCB0aGlzKTtcbiAgICAgICAgZWxzZSB0aGlzLmNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlU2VydmVyV2lkZ2V0LCBTZXJ2ZXJTdGF0ZXMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTZXJ2ZXJXaWRnZXQnO1xuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcblxudmFyIE5PVF9JTVBMRU1FTlRFRCA9ICdOb3QgSW1wbGVtZW50ZWQnO1xuZXhwb3J0IHZhciBCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUyA9IHtcbiAgICBzZXREaW1lbnRpb25zRGVsYXk6IDUwMCxcbiAgICB1cGxvYWRDaGVja0ludGVydmFsOiA1MDAsXG4gICAgdXBsb2FkaW5nOiAnZGF0YS11cGxvYWQtc3RhdHVzJyxcbiAgICB1cGxvYWRGb3JtOiAnc2NyZWVuU2V0VXBsb2FkRm9ybScsXG59O1xuRGVlcEZyZWV6ZShCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUyk7XG52YXIgbmV4dEdlbmVyYXRlZElkID0gMDtcbmV4cG9ydCBjbGFzcyBCYXNlVXBsb2FkV2lkZ2V0PFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gZXh0ZW5kcyBCYXNlU2VydmVyV2lkZ2V0PFQ+IHtcbiAgICBwdWJsaWMgX3VwbG9hZElmcmFtZUlEOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBmb3JtRGl2SUQ6IHN0cmluZztcbiAgICBwcml2YXRlIGxpc3Rlbk9uSWZyYW1lOiAoKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgdXBsb2FkSWZyYW1lOiBIVE1MSUZyYW1lRWxlbWVudDtcbiAgICBwdWJsaWMgX2xhc3RRdWVyeUlkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB1cGxvYWRDaGVja0ludGVydmFsOiBudW1iZXI7XG4gICAgcHVibGljIF9mb3JtRGl2OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIHNldEZvcm1EaW1lbnRpb25zSW50ZXJ2YWw6IG51bWJlcjtcbiAgICBwdWJsaWMgX3VwbG9hZEZvcm06IEhUTUxGb3JtRWxlbWVudDtcbiAgICBwcml2YXRlIGZpbGVJbnB1dDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwcml2YXRlIGZpbGVJbnB1dENoYW5nZWQ6ICgpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihmb3JtOiBCYXNlRm9ybSwgZWw6IFQsIHJlc2V0Q1NTPzogYm9vbGVhbikge1xuICAgICAgICBzdXBlcihmb3JtLCBlbCwgcmVzZXRDU1MpO1xuXG4gICAgICAgIHZhciB1cGxvYWRJZCA9IG5leHRHZW5lcmF0ZWRJZCsrO1xuXG4gICAgICAgIHRoaXMuX3VwbG9hZElmcmFtZUlEID0gdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5jb250YWluZXJJRCArICdfdXBsb2FkJyArIHVwbG9hZElkICsgJ190YXJnZXQnO1xuICAgICAgICB0aGlzLmZvcm1EaXZJRCA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY29udGFpbmVySUQgKyAnX3VwbG9hZCcgKyB1cGxvYWRJZCArICdfZm9ybSc7XG5cbiAgICAgICAgdGhpcy5saXN0ZW5PbklmcmFtZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHZhciBpZnJhbWVTdGF0ZU5hbWUgPSB0aGlzLnVwbG9hZElmcmFtZS5nZXRBdHRyaWJ1dGUoQmFzZVVwbG9hZFdpZGdldF9DT05TVFMudXBsb2FkaW5nKTtcbiAgICAgICAgICAgIHZhciBpZnJhbWVTdGF0ZSA9IFNlcnZlclN0YXRlc1tpZnJhbWVTdGF0ZU5hbWVdO1xuXG4gICAgICAgICAgICBpZiAoaWZyYW1lU3RhdGUgIT09IHRoaXMuc2VydmVyU3RhdGUpIHRoaXMub25TZXJ2ZXJRdWVyeUVuZCh0aGlzLl9sYXN0UXVlcnlJZCwgaWZyYW1lU3RhdGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZmlsZUlucHV0Q2hhbmdlZCA9ICgpID0+IHRoaXMub25GaWxlSW5wdXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25GaWxlSW5wdXRDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc3RhcnRTZXJ2ZXJRdWVyeSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgLy8gYWRkIHVwbG9hZCBpZnJhbWVcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgICAgICB0aGlzLnVwbG9hZElmcmFtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy51cGxvYWRJZnJhbWUuaWQgPSB0aGlzLl91cGxvYWRJZnJhbWVJRDtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSWZyYW1lLnNldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMuX3VwbG9hZElmcmFtZUlEKTtcbiAgICAgICAgICAgIHRoaXMudXBsb2FkSWZyYW1lLnNldEF0dHJpYnV0ZShCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUy51cGxvYWRpbmcsIFNlcnZlclN0YXRlc1tTZXJ2ZXJTdGF0ZXMuTm90U3RhcnRlZF0pO1xuICAgICAgICAgICAgdGhpcy51cGxvYWRJZnJhbWUuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgICAgICdvbmxvYWQnLFxuICAgICAgICAgICAgICAgIFwidGhpcy5zZXRBdHRyaWJ1dGUoJ1wiICsgQmFzZVVwbG9hZFdpZGdldF9DT05TVFMudXBsb2FkaW5nICsgXCInLCdcIiArIFNlcnZlclN0YXRlc1tTZXJ2ZXJTdGF0ZXMuRG9uZV0gKyBcIicpXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy51cGxvYWRJZnJhbWUpO1xuXG4gICAgICAgICAgICAvLyBwbGFjZSBmb3JtIGZvciB0aGUgdXNlciB0byBpbnRlcmZhY3Qgd2l0aFxuICAgICAgICAgICAgdGhpcy5fZm9ybURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGhpcy5fZm9ybURpdi5pZCA9IHRoaXMuZm9ybURpdklEO1xuICAgICAgICAgICAgdGhpcy5fZm9ybURpdi5jbGFzc05hbWUgPSAnZ2lneWEtYXR0YWNoLWZpbGUtdXBsb2FkLWZvcm0nO1xuICAgICAgICAgICAgdGhpcy5fZm9ybURpdi5pbm5lckhUTUwgPSB0aGlzLmdldEZvcm1IdG1sKCk7XG4gICAgICAgICAgICB0aGlzLl9mb3JtRGl2LnN0eWxlLnpJbmRleCA9ICcnICsgZ2lneWEudXRpbHMuRE9NLmdldE5leHRaSW5kZXgoKTtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2Zvcm1EaXYpO1xuXG4gICAgICAgICAgICAvLyBzZXQgZGltZW50aW9uc1xuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5zZXRGb3JtRGltZW50aW9ucygpLCBCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUy5zZXREaW1lbnRpb25zRGVsYXkpO1xuXG4gICAgICAgICAgICB0aGlzLl91cGxvYWRGb3JtID0gdGhpcy5nZXRGb3JtRWxlbWVudCgpO1xuICAgICAgICAgICAgdGhpcy5maWxlSW5wdXQgPSB0aGlzLl91cGxvYWRGb3JtLmVsZW1lbnRzWydfcHJvZmlsZVBob3RvJ107XG5cbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmZpbGVJbnB1dCwgJ2dpZ3lhLWF0dGFjaC1maWxlLXVwbG9hZC1maWxlLWlucHV0Jyk7IC8vIFRPRE8gQ2hhbmdlIHVzZXMgY3NzIGZvciBpZSBwYXRjaCBpbnN0ZWFkIG9mIHN0eWxlXG5cbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRFdmVudExpc3RlbmVyKHRoaXMuZmlsZUlucHV0LCAnY2hhbmdlJywgdGhpcy5maWxlSW5wdXRDaGFuZ2VkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGb3JtSHRtbCgpOiBzdHJpbmcge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9UX0lNUExFTUVOVEVEKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rm9ybUVsZW1lbnQoKTogSFRNTEZvcm1FbGVtZW50IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKE5PVF9JTVBMRU1FTlRFRCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZpbGVFbGVtZW50KCk6IEhUTUxJbnB1dEVsZW1lbnQge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9UX0lNUExFTUVOVEVEKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldEZvcm1EaW1lbnRpb25zKCkge1xuICAgICAgICAvLyBUT0RPIGJlaGF2aW9yIGNoYW5nZTogdXNlcyB0aW1lb3V0IHJhdGhlciB0aGFuIGludGVydmFsXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50Lm9mZnNldEhlaWdodCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZm9ybURpdi5zdHlsZS5oZWlnaHQgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Zvcm1EaXYuc3R5bGUud2lkdGggPSB0aGlzLmluc3RhbmNlRWxlbWVudC5vZmZzZXRXaWR0aCArICdweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVwbG9hZENoZWNrSW50ZXJ2YWwpIHRoaXMub25TZXJ2ZXJRdWVyeUVuZCh0aGlzLl9sYXN0UXVlcnlJZCwgU2VydmVyU3RhdGVzLkVycm9yKTtcblxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5maWxlSW5wdXQsICdjaGFuZ2UnLCB0aGlzLm9uRmlsZUlucHV0Q2hhbmdlKTtcblxuICAgICAgICAgICAgdGhpcy5maWxlSW5wdXQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fdXBsb2FkRm9ybSA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuX2Zvcm1EaXYucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLl9mb3JtRGl2KTtcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1EaXYgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLnVwbG9hZElmcmFtZSk7XG4gICAgICAgICAgICB0aGlzLnVwbG9hZElmcmFtZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RvcFVwbG9hZENoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy51cGxvYWRDaGVja0ludGVydmFsKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnVwbG9hZENoZWNrSW50ZXJ2YWwpO1xuICAgICAgICAgICAgdGhpcy51cGxvYWRDaGVja0ludGVydmFsID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzZXJ2ZXJRdWVyeURvbmUobmV3U3RhdGU6IFNlcnZlclN0YXRlcykge1xuICAgICAgICB0aGlzLnN0b3BVcGxvYWRDaGVjaygpO1xuXG4gICAgICAgIHN1cGVyLnNlcnZlclF1ZXJ5RG9uZShuZXdTdGF0ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN1Ym1pdFVwbG9hZEZvcm0oKSB7XG4gICAgICAgIHRoaXMuX3VwbG9hZEZvcm0uc3VibWl0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0U2VydmVyUXVlcnkoKSB7XG4gICAgICAgIHRoaXMuX2xhc3RRdWVyeUlkID0gc3VwZXIuc3RhcnRTZXJ2ZXJRdWVyeSgpO1xuXG4gICAgICAgIHRoaXMudXBsb2FkSWZyYW1lLnNldEF0dHJpYnV0ZShCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUy51cGxvYWRpbmcsIFNlcnZlclN0YXRlc1t0aGlzLnNlcnZlclN0YXRlXSk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnVwbG9hZENoZWNrSW50ZXJ2YWwpIHRoaXMudXBsb2FkQ2hlY2tJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLmxpc3Rlbk9uSWZyYW1lLCBCYXNlVXBsb2FkV2lkZ2V0X0NPTlNUUy51cGxvYWRDaGVja0ludGVydmFsKTtcblxuICAgICAgICB0aGlzLnN1Ym1pdFVwbG9hZEZvcm0oKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fbGFzdFF1ZXJ5SWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFNlcnZlclBhcmFtZXRlcnMoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgdmFyIHBhcmFtczogYW55ID0gZ2lneWEudXRpbHMub2JqZWN0LmV4dHJhY3RQcm9wZXJ0aWVzKHRoaXMuX3NjcmVlblNldC5wYXJhbXMsIHt9LCAnQVBJS2V5fGNpZHxvYXV0aF90b2tlbnxsb2dpbl90b2tlbnxzb3VyY2V8c291cmNlRGF0YXxyZWdUb2tlbicpOyAvLyBUT0RPOiByZW1vdmUgdGhlIGFueSB0eXBlXG4gICAgICAgIHBhcmFtcy5hdXRoTW9kZSA9IHBhcmFtc1snb2F1dGhfdG9rZW4nXSA/ICd0b2tlbicgOiAnY29va2llJztcblxuICAgICAgICB2YXIgd2ViQWRhcHRlciA9IGdpZ3lhLl8uYXBpQWRhcHRlcnMud2ViO1xuICAgICAgICBpZiAod2ViQWRhcHRlcikge1xuICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlIGNhc3RpbmdcbiAgICAgICAgICAgIHBhcmFtcy5sb2dpbl90b2tlbiA9IGdpZ3lhLl8uYXBpQWRhcHRlcnMud2ViLnRva2VuU3RvcmUuZ2V0KHBhcmFtc1snQVBJS2V5J10pO1xuICAgICAgICAgICAgcGFyYW1zLmdtaWRUaWNrZXQgPSBhd2FpdCBnaWd5YS5fLmFwaUFkYXB0ZXIuZ2V0R21pZFRpY2tldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXJhbXMuQVBJS2V5KSBwYXJhbXMuQVBJS2V5ID0gZ2lneWEudGhpc1NjcmlwdC5BUElLZXk7XG5cbiAgICAgICAgaWYgKHRoaXMuX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuKSBwYXJhbXMucmVnVG9rZW4gPSB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbjtcblxuICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEZsYWdTZXJ2aWNlIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1NlcnZpY2VzL0ZsYWdTZXJ2aWNlJztcbmltcG9ydCB7IElUZW1wbGF0ZUVsZW1lbnQsIFRlbXBsYXRlRWxlbWVudCwgSUNvbmRpdGlvbmFsQXR0cmlidXRlIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtcbiAgICBJTWFwLFxuICAgIEZvckVhY2hQcm9wLFxuICAgIEZvckVhY2gsXG4gICAgZ2V0Q29uZGl0aW9uYWxBdHRyaWJ1dGVFeHByZXNzaW9ucyxcbiAgICBpc0RPTVhTUyxcbiAgICBnZXRFbGVtZW50c0J5SGF2aW5nQXR0cmlidXRlLCBnZXRFbGVtZW50c0J5SGF2aW5nQXR0cmlidXRlUHJlZml4XG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHtTY3JlZW5fQ09OU1RTfSBmcm9tICcuL1NjcmVlbkNvbnN0cyc7XG5cbmV4cG9ydCB0eXBlIElXaWRnZXRUeXBlPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gPSAobmV3KC4uLmFyZ3MpID0+IEJhc2VXaWRnZXQ8VD4pICYge1xuICAgIENPTlNUUzoge1xuICAgICAgICBzZWxlY3Rvcjogc3RyaW5nO1xuICAgIH07XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIElXaWRnZXQgZXh0ZW5kcyBJVGVtcGxhdGVFbGVtZW50IHtcbiAgICBfc2NyZWVuOiBTY3JlZW47XG59XG5cbmV4cG9ydCBjbGFzcyBCYXNlV2lkZ2V0PFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4gZXh0ZW5kcyBUZW1wbGF0ZUVsZW1lbnQ8VD4ge1xuICAgIHB1YmxpYyBkZXBzPzogQXJyYXk8SVdpZGdldFR5cGU8SFRNTEVsZW1lbnQ+PjtcbiAgICBwdWJsaWMgcGFyYW1zOiBJTWFwPHN0cmluZz4gPSB7fTtcbiAgICBwdWJsaWMgcmVuZGVyV2lkZ2V0VUk6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcm90ZWN0ZWQgd2lkZ2V0UGFyYW1zOiBJTWFwPHN0cmluZz47XG4gICAgcHJvdGVjdGVkIGV2YWx1YXRpb25DYWNoZToge1trZXk6IHN0cmluZ106IHN0cmluZ30gPSB7fTtcbiAgICBwcml2YXRlIF9vdGhlckVsZW1lbnRzOiBUZW1wbGF0ZUVsZW1lbnQ8SFRNTEVsZW1lbnQ+W10gPSBbXTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IGV2ZW50TGlzdGVuZXJzID0gbmV3IE1hcDxzdHJpbmcsIHtlbDogSFRNTEVsZW1lbnQsIGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbn0+KCk7XG5cbiAgICBjb25zdHJ1Y3RvcihlbDogVCwgcGFyZW50OiBJVGVtcGxhdGVFbGVtZW50LCBwdWJsaWMgX3NjcmVlbjogU2NyZWVuLCByZXNldENzczogYm9vbGVhbiA9IHRydWUpIHtcbiAgICAgICAgc3VwZXIoZWwsIHBhcmVudCk7XG5cbiAgICAgICAgdGhpcy5wYXJhbXMgPSB0aGlzLmdldEVsZW1lbnRQYXJhbXMoZWwpO1xuXG4gICAgICAgIGlmIChyZXNldENzcykgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KGVsLCAnZ2lneWEtcmVzZXQnKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcmVnaXN0ZXJUeXBlZFdpZGdldHM8VCwgV1QgZXh0ZW5kcyBJV2lkZ2V0VHlwZTxIVE1MRWxlbWVudD4+KHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50LCB3aWRnZXRMaWJyYXJ5OiBJTWFwPFdUPiwgZmFjdG9yeTogKHR5cGU6IFdULCBlbDogSFRNTEVsZW1lbnQpID0+IFQpIHtcbiAgICAgICAgY29uc3Qgd2lkZ2V0cyA9IG5ldyBBcnJheTxUPigpO1xuXG4gICAgICAgIEZvckVhY2hQcm9wKHdpZGdldExpYnJhcnksICh0eXBlLCBnaWd5YUNsYXNzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IHBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0eXBlLkNPTlNUUy5zZWxlY3Rvcik7XG4gICAgICAgICAgICBGb3JFYWNoKGVsZW1lbnRzLCAoZWw6IEhUTUxEaXZFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgd2lkZ2V0cy5wdXNoKGZhY3RvcnkodHlwZSwgZWwpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gd2lkZ2V0cztcbiAgICB9XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIHByaXZhdGUgZ2V0RWxlbWVudFBhcmFtcyhlbDogSFRNTEVsZW1lbnQpOiBJTWFwPHN0cmluZz4ge1xuICAgICAgICB2YXIgcGFyYW1zOiBJTWFwPHN0cmluZz4gPSB7fTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBGb3JFYWNoKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3BhcmFtJyksIHBhcmFtID0+IHtcbiAgICAgICAgICAgIHBhcmFtc1twYXJhbS5uYW1lXSA9IHBhcmFtLnZhbHVlO1xuICAgICAgICAgICAgdmFyIHdpZGdldEV4cHJlc3Npb25zO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdpZGdldEV4cHJlc3Npb25zID0gZ2V0Q29uZGl0aW9uYWxBdHRyaWJ1dGVFeHByZXNzaW9ucyhwYXJhbSwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53YXJuKCdFcnJvciBpbiBwYXJhbSBjb25kaXRpb25hbHMsIGNvbmRpdGlvbmFscyBpZ25vcmVkJyk7XG4gICAgICAgICAgICAgICAgd2lkZ2V0RXhwcmVzc2lvbnMgPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdpZGdldEV4cHJlc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMgPSBzZWxmLmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMuY29uY2F0KHdpZGdldEV4cHJlc3Npb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMud2lkZ2V0UGFyYW1zKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCB0aW1lIHRoZSB3aWRnZXQgaXMgbG9hZGVkLlxuICAgICAgICAgICAgdGhpcy53aWRnZXRQYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyV2lkZ2V0VUkgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICBpZiAodGhpcy5yZW5kZXJXaWRnZXRVSSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBldmFsdWF0ZSh0ZXh0OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSB0ZXh0Py5tYXRjaCgve3soLio/KX19L2cpO1xuICAgICAgICBpZiAoIW1hdGNoZXM/Lmxlbmd0aCkgcmV0dXJuIHRleHQ7XG4gICAgICAgIHJldHVybiBtYXRjaGVzLnJlZHVjZSgoZmluYWxTdHIsIG0pID0+IHtcbiAgICAgICAgICAgIGxldCB2YWwgPSB0aGlzLmV2YWx1YXRlRXhwcmVzc2lvbih7aWdub3JlRXJyb3I6IHRydWUsIGNvbmRpdGlvbjogbX0pO1xuXG4gICAgICAgICAgICBpZih2YWwpIHtcbiAgICAgICAgICAgICAgaWYoRmxhZ1NlcnZpY2Uuc2FuaXRpemVFdmFsdWF0ZWRWYWx1ZSAmJiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiBpc0RPTVhTUyh2YWwpKSB7XG4gICAgICAgICAgICAgICAgICB2YWwgPSBnaWd5YS51dGlscy5zYW5pdGl6ZS5zYW5pdGl6ZUhUTUwodmFsKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRoaXMuZXZhbHVhdGlvbkNhY2hlW21dID0gdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZpbmFsU3RyLnJlcGxhY2UobSwgdmFsID09PSB1bmRlZmluZWQgPyAodGhpcy5ldmFsdWF0aW9uQ2FjaGVbbV0gPT09IHVuZGVmaW5lZCA/ICcnIDogdGhpcy5ldmFsdWF0aW9uQ2FjaGVbbV0pIDogdmFsKTtcbiAgICAgICAgfSwgdGV4dCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgICAgIHRoaXMuY2xlYXJEb21FdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIC8vIG92ZXJyaWRlcyAnZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0JyBpbiBUZW1wbGF0ZUVsZW1lbnRcbiAgICBwcm90ZWN0ZWQgZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0KGV2YWx1YXRpb25SZXN1bHQ6IHN0cmluZywgY29uZGl0aW9uYWxBdHQ6IElDb25kaXRpb25hbEF0dHJpYnV0ZSwgZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFjb25kaXRpb25hbEF0dC5pc1dpZGdldFBhcmFtVGFnKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0KGV2YWx1YXRpb25SZXN1bHQsIGNvbmRpdGlvbmFsQXR0LCBlbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChldmFsdWF0aW9uUmVzdWx0ID09PSAnJyAmJiBjb25kaXRpb25hbEF0dC5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBldmFsdWF0aW9uUmVzdWx0ID0gY29uZGl0aW9uYWxBdHQuZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWV2YWx1YXRpb25SZXN1bHQgJiYgIWNvbmRpdGlvbmFsQXR0LmRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvbmFsQXR0Lmxhc3RBdHRyaWJ1dGVWYWx1ZSA9IGV2YWx1YXRpb25SZXN1bHQ7XG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgY2hlY2sgdGhhdCB0aGUgcGFyYW0gaXMgaW5zaWRlIHRoZSB3aWRnZXQgcGFyYW1zIHNvXG4gICAgICAgICAgICAgICAgLy8gSSBjYW4gc2V0IHRoZSAncmVSZW5kZXJXaWRnZXQnIGZsYWcuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMud2lkZ2V0UGFyYW1zW2NvbmRpdGlvbmFsQXR0LmF0dHJpYnV0ZU5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLndpZGdldFBhcmFtc1tjb25kaXRpb25hbEF0dC5hdHRyaWJ1dGVOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXRVSSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldmFsdWF0aW9uUmVzdWx0ICE9PSBjb25kaXRpb25hbEF0dC5sYXN0QXR0cmlidXRlVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25kaXRpb25hbEF0dC5sYXN0QXR0cmlidXRlVmFsdWUgPSBldmFsdWF0aW9uUmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMud2lkZ2V0UGFyYW1zW2NvbmRpdGlvbmFsQXR0LmF0dHJpYnV0ZU5hbWVdID0gZXZhbHVhdGlvblJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcldpZGdldFVJID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGV2YWx1YXRpb25SZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcmVuZGVyV2lkZ2V0KCkge1xuICAgICAgICAvL3ZpcnR1YWwgbWV0aG9kIC0gaW1wbGVtZW50ZWQgb25seSBieSB3aWRnZXRzIHdobyBhcmUgJ3BsdWdpbldpZGdldHMnXG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFkZERvbUV2ZW50TGlzdGVuZXIoZWw6IEhUTUxFbGVtZW50LCBldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24sIGtleT86IHN0cmluZykge1xuICAgICAgICBrZXkgPSBrZXkgfHwgYGV2ZW50X2AgKyB0aGlzLmV2ZW50TGlzdGVuZXJzLnNpemU7XG5cbiAgICAgICAgaWYgKHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuc2V0KGtleSwge1xuICAgICAgICAgICAgZWwsIGV2ZW50TmFtZSwgaGFuZGxlclxuICAgICAgICB9KTtcblxuICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYWRkQnV0dG9uSGFuZGxlcihlbCwgaGFuZGxlciwga2V5Pzogc3RyaW5nKSB7XG4gICAgICAgIGlmICghZWwgfHwgIWhhbmRsZXIpIHJldHVybjtcblxuICAgICAgICBrZXkgPSBrZXkgfHwgYGV2ZW50X2AgKyB0aGlzLmV2ZW50TGlzdGVuZXJzLnNpemU7XG5cbiAgICAgICAgdGhpcy5hZGREb21FdmVudExpc3RlbmVyKGVsLCAnY2xpY2snLCBoYW5kbGVyLCBgJHtrZXl9X2NsaWNrYCk7XG5cbiAgICAgICAgdGhpcy5hZGREb21FdmVudExpc3RlbmVyKGVsLCAna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdTcGFjZScgfHwgZXZlbnQuY29kZSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgYCR7a2V5fV9rZXlkb3duYCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHN1Ym1pdE9uRW50ZXIobGlzdGVuRWw6IEhUTUxFbGVtZW50LCBzdWJtaXRFbGVtZW50PzogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgYnV0dG9uRWwgPSBzdWJtaXRFbGVtZW50IHx8IGxpc3RlbkVsO1xuICAgICAgICB0aGlzLmFkZERvbUV2ZW50TGlzdGVuZXIobGlzdGVuRWwsICdrZXl1cCcsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIGJ1dHRvbkVsLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCByZW1vdmVCdXR0b25IYW5kbGVyKGtleTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRG9tRXZlbnRMaXN0ZW5lcihgJHtrZXl9X2NsaWNrYCk7XG4gICAgICAgIHRoaXMucmVtb3ZlRG9tRXZlbnRMaXN0ZW5lcihgJHtrZXl9X2tleWRvd25gKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcmVtb3ZlRG9tRXZlbnRMaXN0ZW5lcihrZXk6IHN0cmluZykge1xuICAgICAgICBjb25zdCBsaXN0ZW5lciA9IHRoaXMuZXZlbnRMaXN0ZW5lcnMuZ2V0KGtleSk7XG4gICAgICAgIGlmIChsaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIobGlzdGVuZXIuZWwsIGxpc3RlbmVyLmV2ZW50TmFtZSwgbGlzdGVuZXIuaGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzLmRlbGV0ZShrZXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGNsZWFyRG9tRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4gIHRoaXMucmVtb3ZlRG9tRXZlbnRMaXN0ZW5lcihrZXkpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcHJlcGFyZU90aGVyRWxlbWVudHMoKSB7XG4gICAgICAgIC8vIFRoZXNlIGVsZW1lbnRzIGFyZSBldmFsdWF0ZWQgYmVjYXVzZSB0aGV5IGhhdmUgYW4gSUQuXG4gICAgICAgIGNvbnN0IG90aGVyRWxlbWVudHMgPSBnZXRFbGVtZW50c0J5SGF2aW5nQXR0cmlidXRlKHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnKicsICdpZCcpO1xuXG4gICAgICAgIC8vIFRoZXNlIGVsZW1lbnRzIGFyZSBldmFsdWF0ZWQgYmVjYXVzZSB0aGV5IGhhdmUgY29uZGl0aW9uYWwgYXR0cmlidXRlcy5cbiAgICAgICAgY29uc3QgYXR0cmlidXRlUHJlZml4ZXMgPSBbU2NyZWVuX0NPTlNUUy5jb25kaXRpb25hbEF0dHJpYnV0ZVByZWZpeCwgU2NyZWVuX0NPTlNUUy5leHByZXNzaW9uQXR0cmlidXRlUHJlZml4XTtcbiAgICAgICAgY29uc3QgY29uZGl0aW9uYWxFbGVtZW50cyA9IGdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGVQcmVmaXgodGhpcy5pbnN0YW5jZUVsZW1lbnQsIGF0dHJpYnV0ZVByZWZpeGVzLCBbJ3BhcmFtJ10pO1xuXG4gICAgICAgIC8vIENvbWJpbmUgYW5kIGRlLWR1cCBhcnJheXMuXG4gICAgICAgIGZvciAoY29uc3QgY29uZGl0aW9uYWxFbGVtZW50IG9mIGNvbmRpdGlvbmFsRWxlbWVudHMpIHtcbiAgICAgICAgICAgIGlmIChnaWd5YS51dGlscy5hcnJheS5pbmRleE9mKG90aGVyRWxlbWVudHMsIGNvbmRpdGlvbmFsRWxlbWVudCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJFbGVtZW50cy5wdXNoKGNvbmRpdGlvbmFsRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgVGVtcGxhdGVFbGVtZW50IHRvIG90aGVyIGVsZW1lbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIG90aGVyRWxlbWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuX290aGVyRWxlbWVudHMucHVzaChuZXcgVGVtcGxhdGVFbGVtZW50KGVsLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgbGlua090aGVyRWxlbWVudHMoKSB7XG4gICAgICAgIHRoaXMucHJlcGFyZU90aGVyRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5fb3RoZXJFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5saW5rSW5zdGFuY2VFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHVubGlua0NoaWxkRWxlbWVudHMoKSB7XG4gICAgICAgIHRoaXMuX290aGVyRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQudW5saW5rSW5zdGFuY2VFbGVtZW50KCkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7SUZvcm1JbnB1dH0gZnJvbSAnLi9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7Q2xpZW50RmVhdHVyZX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mbyc7XG5cbnR5cGUgRXZlbnRUYXJnZXQgPSBFbGVtZW50IHwgRG9jdW1lbnQ7XG50eXBlIEV2ZW50VHlwZSA9IHsgZWxlbWVudDogRXZlbnRUYXJnZXQsIGV2ZW50VHlwZTogc3RyaW5nOyBoYW5kbGVyOiBhbnk7IH07XG5cbmV4cG9ydCBjbGFzcyBCZWhhdmlvclRyYWNraW5nQ29udGV4dCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVnaXN0ZXJlZEV2ZW50czogRXZlbnRUeXBlW10gPSBbXTtcbiAgICBwcml2YXRlIHN0YXJ0VGltZTogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIGZvY3VzQ291bnQ6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBjbGlja0NvdW50OiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgc3VibWl0Q291bnQ6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBtb3VzZU1vdmVtZW50ID0gWzAsIDAsIDAsIDBdO1xuICAgIHByaXZhdGUgc2Nyb2xsczogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIGZpZWxkc1RvVHJhY2s6IElGb3JtSW5wdXRbXTtcbiAgICBwcml2YXRlIGNsaWVudEZlYXR1cmVzOiBDbGllbnRGZWF0dXJlO1xuICAgIHByaXZhdGUgaW5jcmVhc2VGb2N1c0NvdW50ID0gKCkgPT4gdGhpcy5mb2N1c0NvdW50Kys7XG4gICAgcHJpdmF0ZSBpbmNyZWFzZUNsaWNrQ291bnQgPSAoKSA9PiB0aGlzLmNsaWNrQ291bnQrKztcbiAgICBwcml2YXRlIHRyYWNrTW91c2VNb3ZlbWVudCA9ICgpID0+IHtcbiAgICAgICAgbGV0IHByZXZpb3VzQ2xpZW50WCA9IDA7XG4gICAgICAgIGxldCBwcmV2aW91c0NsaWVudFkgPSAwO1xuICAgICAgICByZXR1cm4gZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2xpZW50WCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVtZW50WCA9IHByZXZpb3VzQ2xpZW50WCAtIGV2ZW50LmNsaWVudFg7XG4gICAgICAgICAgICAgICAgY29uc3QgbW92ZW1lbnRZID0gcHJldmlvdXNDbGllbnRZIC0gZXZlbnQuY2xpZW50WTtcblxuICAgICAgICAgICAgICAgIGlmIChtb3ZlbWVudFggPiAwKSB0aGlzLm1vdXNlTW92ZW1lbnRbM10rKzsgLy8gbGVmdFxuICAgICAgICAgICAgICAgIGlmIChtb3ZlbWVudFggPCAwKSB0aGlzLm1vdXNlTW92ZW1lbnRbMV0rKzsgLy8gcmlnaHRcbiAgICAgICAgICAgICAgICBpZiAobW92ZW1lbnRZID4gMCkgdGhpcy5tb3VzZU1vdmVtZW50WzBdKys7IC8vIHRvcFxuICAgICAgICAgICAgICAgIGlmIChtb3ZlbWVudFkgPCAwKSB0aGlzLm1vdXNlTW92ZW1lbnRbMl0rKzsgLy8gYm90dG9tXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2aW91c0NsaWVudFggPSBldmVudC5jbGllbnRYO1xuICAgICAgICAgICAgcHJldmlvdXNDbGllbnRZID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcHJpdmF0ZSB0cmFja1Njcm9sbGluZyA9ICgpID0+IHtcbiAgICAgICAgbGV0IHRpbWVyLCBzdGFydCwgZW5kLCBkaXN0YW5jZSwgdGltZUVsYXBzZWQ7XG4gICAgICAgIGVuZCA9IDA7XG4gICAgICAgIHJldHVybiBfID0+IHtcbiAgICAgICAgICAgIGlmICghc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IGVuZDtcbiAgICAgICAgICAgICAgICB0aW1lRWxhcHNlZCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGVuZCA9IHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gZW5kIC0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlbG9jaXR5ID0gZGlzdGFuY2UgLyAoRGF0ZS5ub3coKSAtIHRpbWVFbGFwc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYCR7LWRpc3RhbmNlfXwke01hdGguYWJzKHZlbG9jaXR5KS50b0ZpeGVkKDMpfWA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xscy5wdXNoKHJlcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbHMubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xscy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gZGlzdGFuY2UgPSB0aW1lRWxhcHNlZCA9IG51bGw7XG4gICAgICAgICAgICB9LCA2MCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBkb2N1bWVudDogRG9jdW1lbnQgPSBnaWd5YS5fLldpbmRvd1Byb3ZpZGVyLmRvY3VtZW50KCkpIHt9XG5cbiAgICBnZXQgcmlza0NvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiMDogRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnRUaW1lLFxuICAgICAgICAgICAgYjE6IHRoaXMubW91c2VNb3ZlbWVudCxcbiAgICAgICAgICAgIGIyOiB0aGlzLmZvY3VzQ291bnQsXG4gICAgICAgICAgICBiMzogdGhpcy5zY3JvbGxzLFxuICAgICAgICAgICAgYjQ6IHRoaXMuY2xpY2tDb3VudCxcbiAgICAgICAgICAgIGI1OiB0aGlzLnN1Ym1pdENvdW50LFxuICAgICAgICAgICAgYjY6IHRoaXMuY2xpZW50RmVhdHVyZXM/LnVzZXJBZ2VudCxcbiAgICAgICAgICAgIGI3OiB0aGlzLmNsaWVudEZlYXR1cmVzPy5wbHVnaW5zLFxuICAgICAgICAgICAgYjg6IHRoaXMuY2xpZW50RmVhdHVyZXM/LmxvY2FsVGltZSxcbiAgICAgICAgICAgIGI5OiB0aGlzLmNsaWVudEZlYXR1cmVzPy50aW1lem9uZU9mZnNldCxcbiAgICAgICAgICAgIGIxMDogdGhpcy5jbGllbnRGZWF0dXJlcz8ucGVybWlzc2lvblN0YXR1cyxcbiAgICAgICAgICAgIGIxMTogdGhpcy5jbGllbnRGZWF0dXJlcz8ud2ViZHJpdmVyLFxuICAgICAgICAgICAgYjEyOiB0aGlzLmNsaWVudEZlYXR1cmVzPy5iYXR0ZXJ5SW5mbyxcbiAgICAgICAgICAgIGIxMzogdGhpcy5jbGllbnRGZWF0dXJlcz8uZmVhdHVyZXNcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhZGRGaWVsZHMoZmllbGRzPzogSUZvcm1JbnB1dFtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZmllbGRzVG9UcmFjayA9IGZpZWxkcztcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhcnRNb25pdG9yaW5nKCkge1xuICAgICAgICAvLyBDbGVhciBhbGwgcmVnaXN0ZXJlZCBldmVudFxuICAgICAgICBCZWhhdmlvclRyYWNraW5nQ29udGV4dC5yZW1vdmVBbGxFdmVudHMoKTtcbiAgICAgICAgLy8gUmVnaXN0ZXIgbmV3IGV2ZW50c1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIEJlaGF2aW9yVHJhY2tpbmdDb250ZXh0LnJlZ2lzdGVyRXZlbnQodGhpcy5kb2N1bWVudD8uYm9keSwgJ2NsaWNrJywgdGhpcy5pbmNyZWFzZUNsaWNrQ291bnQpO1xuICAgICAgICBCZWhhdmlvclRyYWNraW5nQ29udGV4dC5yZWdpc3RlckV2ZW50KHRoaXMuZG9jdW1lbnQ/LmJvZHksICdtb3VzZW1vdmUnLCB0aGlzLnRyYWNrTW91c2VNb3ZlbWVudCgpKTtcbiAgICAgICAgQmVoYXZpb3JUcmFja2luZ0NvbnRleHQucmVnaXN0ZXJFdmVudCh0aGlzLmRvY3VtZW50LCAnc2Nyb2xsJywgdGhpcy50cmFja1Njcm9sbGluZygpKTtcbiAgICAgICAgdGhpcy5maWVsZHNUb1RyYWNrPy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgICAgIEJlaGF2aW9yVHJhY2tpbmdDb250ZXh0LnJlZ2lzdGVyRXZlbnQoZmllbGQ/Lmluc3RhbmNlRWxlbWVudCwgJ2ZvY3VzJywgdGhpcy5pbmNyZWFzZUZvY3VzQ291bnQpO1xuICAgICAgICAgICAgQmVoYXZpb3JUcmFja2luZ0NvbnRleHQucmVnaXN0ZXJFdmVudChmaWVsZD8uaW5zdGFuY2VFbGVtZW50LCAnYmx1cicsIHRoaXMuaW5jcmVhc2VGb2N1c0NvdW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jbGllbnRGZWF0dXJlcyA9IG5ldyBDbGllbnRGZWF0dXJlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0b3BNb25pdG9yaW5nKCkge1xuICAgICAgICBCZWhhdmlvclRyYWNraW5nQ29udGV4dC5yZW1vdmVBbGxFdmVudHMoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5mb2N1c0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5jbGlja0NvdW50ID0gMDtcbiAgICB9XG5cbiAgICAvLyNyZWdpb24gZXZlbnRzXG4gICAgcHVibGljIG9uU3VibWl0KCkge1xuICAgICAgICB0aGlzLnN1Ym1pdENvdW50Kys7XG4gICAgfVxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVtb3ZlQWxsRXZlbnRzKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGNvbnN0IHtlbGVtZW50LCBldmVudFR5cGUsIGhhbmRsZXJ9IG9mIEJlaGF2aW9yVHJhY2tpbmdDb250ZXh0LnJlZ2lzdGVyZWRFdmVudHMpIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVFdmVudExpc3RlbmVyKGVsZW1lbnQsIGV2ZW50VHlwZSwgaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgQmVoYXZpb3JUcmFja2luZ0NvbnRleHQucmVnaXN0ZXJlZEV2ZW50cyA9IFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHJlZ2lzdGVyRXZlbnQoZWxlbWVudDogRXZlbnRUYXJnZXQsIGV2ZW50VHlwZTogc3RyaW5nLCBoYW5kbGVyOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgQmVoYXZpb3JUcmFja2luZ0NvbnRleHQucmVnaXN0ZXJlZEV2ZW50cy5wdXNoKHtlbGVtZW50LCBldmVudFR5cGUsIGhhbmRsZXJ9KTtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIoZWxlbWVudCwgZXZlbnRUeXBlLCBoYW5kbGVyKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge0NhcmRMaXN0X0NPTlNUU30gZnJvbSAnLi9XaWRnZXRzL0NhcmRMaXN0V2lkZ2V0JztcbmltcG9ydCB7QmFzZUZvcm1XaWRnZXQsIElGb3JtV2lkZ2V0fSBmcm9tICcuL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7QmFzZUZvcm19IGZyb20gJy4vQmFzZUZvcm0nO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ2FyZExpc3RGb3JtV2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTFVMaXN0RWxlbWVudD4ge1xuICBwcm90ZWN0ZWQgaXRlbUlkOiBzdHJpbmc7XG4gIHB1YmxpYyBmb3JtV2lkZ2V0czogQXJyYXk8SUZvcm1XaWRnZXQ+ID0gW107XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGFzeW5jIHJlbG9hZERhdGEoKSA6IFByb21pc2U8YW55W10+O1xuXG4gIHByb3RlY3RlZCBnZXQgZW1wdHlJdGVtRWxlbSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoQ2FyZExpc3RfQ09OU1RTLmVtcHR5TGlzdEl0ZW1TZWxlY3Rvcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGl0ZW1UZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJyk/LmlubmVySFRNTDtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgY2FyZExpc3RFbGVtKCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcihDYXJkTGlzdF9DT05TVFMubGlzdFNlbGVjdG9yKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgaXRlbXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5xdWVyeVNlbGVjdG9yQWxsKENhcmRMaXN0X0NPTlNUUy5jYXJkU2VsZWN0b3IpO1xuICB9XG5cbiAgY29uc3RydWN0b3IoX2Zvcm06IEJhc2VGb3JtLCBlbDogSFRNTFVMaXN0RWxlbWVudCwgcHJpdmF0ZSBfZG9tVXRpbHMgPSBnaWd5YS51dGlscy5ET00pIHtcbiAgICBzdXBlcihfZm9ybSwgZWwsIGZhbHNlKTtcbiAgICB0aGlzLmNyZWF0ZUl0ZW1UZW1wbGF0ZShlbCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgIGF3YWl0IHRoaXMucmVsb2FkTGlzdCgpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUl0ZW1UZW1wbGF0ZShlbDogSFRNTFVMaXN0RWxlbWVudCkge1xuICAgIGlmICghZWwucXVlcnlTZWxlY3RvcigndGVtcGxhdGUnKSkge1xuICAgICAgY29uc3QgaXRlbSA9IGVsLnF1ZXJ5U2VsZWN0b3IoQ2FyZExpc3RfQ09OU1RTLmNhcmRTZWxlY3Rvcik7XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICB0ZW1wbGF0ZUVsZW0uY29udGVudC5hcHBlbmQoaXRlbT8uY2xvbmVOb2RlKHRydWUpKTtcblxuICAgICAgZWwuYXBwZW5kKHRlbXBsYXRlRWxlbSk7XG4gICAgICBpdGVtLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1bmxpbmtJbnN0YW5jZUVsZW1lbnQoKSB7XG4gICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgdGhpcy5fZm9ybS5yZW1vdmVEeW5hbWljV2lkZ2V0cyh0aGlzLmZvcm1XaWRnZXRzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyByZWxvYWRMaXN0KCkge1xuICAgIHRoaXMuX3NjcmVlbi5kaW1TY3JlZW4oKTtcblxuICAgIGxldCBpdGVtcyA9IGF3YWl0IHRoaXMucmVsb2FkRGF0YSgpO1xuICAgIHRoaXMuY2xlYXJMaXN0KCk7XG5cbiAgICBpZiAoaXRlbXM/Lmxlbmd0aCkge1xuICAgICAgdGhpcy5lbXB0eUl0ZW1FbGVtPy5jbGFzc0xpc3QucmVtb3ZlKENhcmRMaXN0X0NPTlNUUy5lbXB0eUxpc3RJdGVtQWN0aXZlQ2xhc3MpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjYXJkID0gdGhpcy5fZG9tVXRpbHMuY3JlYXRlRWxlbWVudEZyb21UZW1wbGF0ZSh0aGlzLml0ZW1UZW1wbGF0ZSkgYXMgSFRNTExJRWxlbWVudDtcbiAgICAgICAgY2FyZC5zZXRBdHRyaWJ1dGUoQ2FyZExpc3RfQ09OU1RTLmluZGV4QXR0cmlidXRlLCBpLnRvU3RyaW5nKCkpO1xuICAgICAgICBjYXJkLnNldEF0dHJpYnV0ZShDYXJkTGlzdF9DT05TVFMuaWRBdHRyaWJ1dGUsIGl0ZW1zW2ldW3RoaXMuaXRlbUlkXSk7XG4gICAgICAgIHRoaXMuY2FyZExpc3RFbGVtLmFwcGVuZChjYXJkKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5mb3JtV2lkZ2V0cyA9IHRoaXMuX2Zvcm0uYWRkRHluYW1pY1dpZGdldHModGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIHRoaXMuX3NjcmVlbi51bmRpbVNjcmVlbigpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNsZWFyTGlzdCgpIHtcbiAgICB0aGlzLmNhcmRMaXN0RWxlbVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoQ2FyZExpc3RfQ09OU1RTLmNhcmRTZWxlY3RvcilcbiAgICAgIC5mb3JFYWNoKGVsZW0gPT4gZWxlbS5yZW1vdmUoKSk7XG4gICAgdGhpcy5lbXB0eUl0ZW1FbGVtPy5jbGFzc0xpc3QuYWRkKENhcmRMaXN0X0NPTlNUUy5lbXB0eUxpc3RJdGVtQWN0aXZlQ2xhc3MpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNob3dMaXN0KCkge1xuICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBJU2NoZW1hRmllbGRzLCBJQ29uc2VudEZpZWxkU2NoZWFtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcblxuZXhwb3J0IGNvbnN0IGNvbnNlbnRGaWVsZE5hbWUgPSAnaXNDb25zZW50R3JhbnRlZCc7XG5leHBvcnQgY29uc3QgbmFtZXNwYWNlID0gJ3ByZWZlcmVuY2VzJztcbmV4cG9ydCBmdW5jdGlvbiBwb3N0UHJvY2Vzc0Zvcm0oZm9ybURhdGEsIHByZWZlcmVuY2VzU2NoZW1hKSB7XG4gICAgY29uc3QgZGlzcGxheWVkUHJlZmVyZW5jZXMgPSBnZXREaXNwbGF5ZWRQcmVmZXJlbmNlcyhmb3JtRGF0YSwgcHJlZmVyZW5jZXNTY2hlbWEpO1xuXG4gICAgaWYgKGRpc3BsYXllZFByZWZlcmVuY2VzKSB7XG4gICAgICAgIGZvcm1EYXRhID0gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtmb3JtRGF0YSwgeyBkaXNwbGF5ZWRQcmVmZXJlbmNlcyB9XSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1EYXRhO1xufVxuZnVuY3Rpb24gZ2V0RGlzcGxheWVkUHJlZmVyZW5jZXMoZm9ybURhdGEsIHByZWZlcmVuY2VzU2NoZW1hOiBJU2NoZW1hRmllbGRzPElDb25zZW50RmllbGRTY2hlYW0+KSB7XG4gICAgaWYgKCFmb3JtRGF0YSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICBpZiAoIXByZWZlcmVuY2VzU2NoZW1hKSB7XG4gICAgICAgIC8vIGdpZ3lhLmxvZ2dlci5lcnJvcihgZm9ybSBoYXMgcHJlZmVyZW5jZXMgLSBidXQgaXQgZG9lc24ndCBleGlzdCBpbiBzY2hlbWFgKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBjb25zZW50czogc3RyaW5nW10gPSBPYmplY3Qua2V5cyhmb3JtRGF0YSlcbiAgICAgICAgLmZpbHRlcihpc0NvbnNlbnRGaWVsZClcbiAgICAgICAgLm1hcCh0b0NvbnNlbnROYW1lKTtcblxuICAgIGlmICghY29uc2VudHMubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgcmV0dXJuIGNvbnNlbnRzLnJlZHVjZSgocmVzLCBjdXJyKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnNlbnQgPSBwcmVmZXJlbmNlc1NjaGVtYVtjdXJyXTtcblxuICAgICAgICBpZiAoIWNvbnNlbnQpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGBmb3JtIGlucHV0IGJvdW5kIHRvICR7bmFtZXNwYWNlfS4ke2N1cnJ9IGJ1dCBpdCBkb2Vzbid0IGV4aXN0IG9uIHNjaGVtYWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzW2N1cnJdID0ge1xuICAgICAgICAgICAgICAgIGRvY1ZlcnNpb246IGNvbnNlbnQuY3VycmVudERvY1ZlcnNpb24sXG4gICAgICAgICAgICAgICAgZG9jRGF0ZTogY29uc2VudC5jdXJyZW50RG9jRGF0ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIGlzQ29uc2VudEZpZWxkKGZpZWxkTmFtZTogc3RyaW5nKSB7XG4gICAgLy8gdG9kbzogYWZ0ZXIgaWUxMSBkZXByZWNhdGlvbiwgcmVwbGFjZSB3aXRoIHN0YXJ0c1dpdGggJiBlbmRzV2l0aC5cbiAgICByZXR1cm4gZmllbGROYW1lLmluZGV4T2YoYCR7bmFtZXNwYWNlfS5gKSA9PSAwICYmIGZpZWxkTmFtZS5zdWJzdHIoZmllbGROYW1lLmxlbmd0aCAtIGNvbnNlbnRGaWVsZE5hbWUubGVuZ3RoLCBmaWVsZE5hbWUubGVuZ3RoKSA9PT0gY29uc2VudEZpZWxkTmFtZTtcbn1cbmZ1bmN0aW9uIHRvQ29uc2VudE5hbWUoY29uc2VudEZpZWxkTmFtZTogc3RyaW5nKSB7XG4gICAgLy8gcmVtb3ZpbmcgcHJlZmVyZW5jZXMgbmFtZXNwYWNlIGFuZCBpc0NvbnNlbnRHcmFudGVkXG4gICAgY29uc3QgZmllbGRQYXJ0cyA9IGNvbnNlbnRGaWVsZE5hbWUuc3BsaXQoJy4nKTtcbiAgICByZXR1cm4gZmllbGRQYXJ0cy5zbGljZSgxLCBmaWVsZFBhcnRzLmxlbmd0aCAtIDEpLmpvaW4oJy4nKTtcbn1cbiIsImltcG9ydCB7IG5hbWVzcGFjZSwgY29uc2VudEZpZWxkTmFtZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ29uc2VudCc7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uc2VudERhdGFGb3JTY3JlZW5TZXQoYXBpRGF0YTogYW55LCBsYW5nOiBzdHJpbmcpIHtcbiAgY29uc3QgZ2V0U2l0ZUNvbnNlbnREZXRhaWxzID0gYXBpRGF0YT8uZ2V0U2l0ZUNvbnNlbnREZXRhaWxzO1xuXG4gIGlmIChnZXRTaXRlQ29uc2VudERldGFpbHM/LmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0sgJiYgZ2V0U2l0ZUNvbnNlbnREZXRhaWxzPy5zaXRlQ29uc2VudERldGFpbHMpIHtcbiAgICByZXR1cm4gZ2V0Q29uc2VudERhdGFGb3JDdXJyZW50TGFuZ3VhZ2UoZ2V0U2l0ZUNvbnNlbnREZXRhaWxzPy5zaXRlQ29uc2VudERldGFpbHMsIGxhbmcpO1xuICB9XG5cbiAgY29uc3QgbGVnYWN5Q29uc2VudERhdGEgPSBhcGlEYXRhLmdldFNjaGVtYT8ucHJlZmVyZW5jZXNTY2hlbWE/LmZpZWxkcztcblxuICBpZiAoIWxlZ2FjeUNvbnNlbnREYXRhKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gZ2V0Q29uc2VudERhdGFGb3JDdXJyZW50TGFuZ3VhZ2UobGVnYWN5Q29uc2VudERhdGEsIGxhbmcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb25zZW50TWlncmF0ZWQoKTogYm9vbGVhbiB7XG4gIHJldHVybiBnaWd5YS5fLmNvbmZpZy5jb25zZW50Py5pc01pZ3JhdGVkID8/IGZhbHNlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNDb25zZW50TGljZW5zZSgpOiBib29sZWFuIHtcbiAgcmV0dXJuIGdpZ3lhLl8uY29uZmlnLmNvbnNlbnQ/Lmhhc0xpY2Vuc2UgPz8gZmFsc2Vcbn1cbi8qKlxuICogQGRlc2NyaXB0aW9uIGRldGVybWluZXMgd2hlbiBjb25zZW50IHR5cGUgaXMgbm90IHRlcm1zIG9yIHByaXZhY3lcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ29uc2VudFR5cGVPdGhlcihmaWVsZE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuXG4gIGlmICghaXNDb25zZW50RmllbGQoZmllbGROYW1lKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3QgZmllbGROYW1lUGFydHMgPSBmaWVsZE5hbWUuc3BsaXQoJy4nKTtcblxuICBjb25zdCBjb25zZW50VHlwZSA9IGZpZWxkTmFtZVBhcnRzWzFdO1xuICBpZiAoY29uc2VudFR5cGUgPT09ICdwcml2YWN5JyB8fCBjb25zZW50VHlwZSA9PT0gJ3Rlcm1zJykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgcmV0dXJuIHRydWVcblxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNDb25zZW50RmllbGQoZmllbGROYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcblxuICBpZiAodG9vU2hvcnROYW1lKGZpZWxkTmFtZSkpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHJldHVybiBmaWVsZE5hbWUuc3RhcnRzV2l0aChuYW1lc3BhY2UpICYmIGZpZWxkTmFtZS5lbmRzV2l0aChjb25zZW50RmllbGROYW1lKVxufVxuXG5jb25zdCBDT05TRU5UX0ZJRUxEX01JTklNVU1fTEVOR1RIID0gMztcblxuZnVuY3Rpb24gdG9vU2hvcnROYW1lKGZpZWxkTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGZpZWxkTmFtZVBhcnRzID0gZmllbGROYW1lPy5zcGxpdCgnLicpID8/IFtdO1xuXG4gIGlmIChmaWVsZE5hbWVQYXJ0cy5sZW5ndGggPCBDT05TRU5UX0ZJRUxEX01JTklNVU1fTEVOR1RIKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDb25zZW50RGF0YUZvckN1cnJlbnRMYW5ndWFnZShjb25zZW50TWFwOiBvYmplY3QsIGxhbmc6IHN0cmluZykge1xuICByZXR1cm4gT2JqZWN0LmtleXMoY29uc2VudE1hcCkucmVkdWNlKChzdGF0ZW1lbnRzLCBrZXkpID0+IHtcbiAgICBjb25zdCBjb25zZW50ID0gY29uc2VudE1hcFtrZXldO1xuICAgIGNvbnN0IGRlZmF1bHRMYW5nID0gY29uc2VudC5kZWZhdWx0TGFuZztcbiAgICBjb25zdCBsZWdhbFN0YXRlbWVudHMgPSBjb25zZW50LmxlZ2FsU3RhdGVtZW50cztcblxuICAgIHN0YXRlbWVudHNba2V5XSA9IGxlZ2FsU3RhdGVtZW50cz8uW2xhbmddIHx8IGxlZ2FsU3RhdGVtZW50cz8uW2RlZmF1bHRMYW5nXSB8fCB7fTtcblxuICAgIHJldHVybiBzdGF0ZW1lbnRzO1xuICB9LCB7fSk7XG59XG4iLCJleHBvcnQgY29uc3QgTElOS19BQ0NPVU5UU19ERUZBVUxUX0lOQ0xVREVfUEFSQU0gPSAncHJvZmlsZSxkYXRhLHN1YnNjcmlwdGlvbnMscHJlZmVyZW5jZXMnO1xuIiwiaW1wb3J0IHsgR0lHWUFfSU5URVJOQUxfUEFSQU1fUFJFRklYLCBHSUdZQV9JTlRFUk5BTF9QQVJBTVMgfSBmcm9tICdzcmMvYWNjb3VudHMvY29uc3RhbnRzJztcblxuZXhwb3J0IGNvbnN0IE1BR0lDX0xJTktfVU5BQ0NFUFRBQkxFX1BBUkFNU19SRUdFWCA9IG5ldyBSZWdFeHAoYCR7R0lHWUFfSU5URVJOQUxfUEFSQU1fUFJFRklYfXwke0dJR1lBX0lOVEVSTkFMX1BBUkFNU31gKSIsImltcG9ydCB7QmFzZUZvcm19IGZyb20gJy4uL0Jhc2VGb3JtJztcbmltcG9ydCB7SUZvcm1EYXRhUHJvdmlkZXJ9IGZyb20gJy4vSUZvcm1EYXRhUHJvdmlkZXInO1xuXG5leHBvcnQgY2xhc3MgRm9ybURhdGFQcm92aWRlciBpbXBsZW1lbnRzIElGb3JtRGF0YVByb3ZpZGVyIHtcbiAgcHJvdGVjdGVkIF9mb3JtOiBCYXNlRm9ybTtcbiAgY29uc3RydWN0b3IoZm9ybTogQmFzZUZvcm0pIHtcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgfVxuICBwdWJsaWMgZ2V0IGRlZmF1bHRTdWJtaXRQYXJhbXMoKTogb2JqZWN0IHtcbiAgICByZXR1cm4gdGhpcy5fZm9ybS5kZWZhdWx0U3VibWl0UGFyYW1zKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGhhc1Byb3ZpZGVyU2Vzc2lvbkluZm8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm0uX3NjcmVlblNldC5oYXNQcm92aWRlclNlc3Npb25JbmZvO1xuICB9XG5cbiAgcHVibGljIGdldCBpbmNsdWRlUGFyYW1zKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm0uX3NjcmVlblNldC5wYXJhbXMuaW5jbHVkZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbGFuZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9mb3JtLl9zY3JlZW5TZXQ/LnBhcmFtcz8ubGFuZztcbiAgfVxufVxuIiwiaW1wb3J0IHtGb3JtRGF0YVByb3ZpZGVyfSBmcm9tICcuL0Zvcm1EYXRhUHJvdmlkZXInO1xuXG5pbXBvcnQge1xuICBnZXRMb2dpbklkLFxuICBnZXRQaG9uZVxufSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL1V0aWxzL2dlbmVyYWwvbGlua0FjY291bnRzSGVscGVyJztcbmltcG9ydCB7SUxvZ2luRGF0YVByb3ZpZGVyfSBmcm9tICcuL0lMb2dpbkRhdGFQcm92aWRlcic7XG5pbXBvcnQge0xJTktfQUNDT1VOVFNfREVGQVVMVF9JTkNMVURFX1BBUkFNfSBmcm9tICcuLi9Db25zdGFudHMvbGluay1hY2NvdW50cyc7XG5pbXBvcnQge0xvZ2luTW9kZXN9IGZyb20gJy4uL0xvZ2luTW9kZXMnO1xuXG5leHBvcnQgY2xhc3MgTGlua0FjY291bnRzRGF0YVByb3ZpZGVyIGV4dGVuZHMgRm9ybURhdGFQcm92aWRlciBpbXBsZW1lbnRzIElMb2dpbkRhdGFQcm92aWRlciB7XG4gIHB1YmxpYyBnZXQgbG9naW5JRCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBnZXRMb2dpbklkKHRoaXMuY29uZmxpY3RpbmdBY2NvdW50KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcGhvbmUoKToge2xvb2t1cDogc3RyaW5nLCBvYmZ1c2NhdGVkOiBzdHJpbmd9IHtcbiAgICByZXR1cm4gZ2V0UGhvbmUodGhpcy5jb25mbGljdGluZ0FjY291bnQpO1xuICB9XG5cbiAgcHVibGljIGdldFBhc3N3b3JkTG9naW5QYXJhbXMoXG4gICAgcGFzc3dvcmQ/OiBzdHJpbmdcbiAgKTogb2JqZWN0IHtcbiAgICBjb25zdCBsb2dpblBhcmFtcyA9IHtcbiAgICAgIGxvZ2luSUQ6IHRoaXMubG9naW5JRCxcbiAgICAgIGluY2x1ZGU6IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLm1lcmdlQ29tbWFTZXBhcmF0ZWRWYWx1ZXMoXG4gICAgICAgIExJTktfQUNDT1VOVFNfREVGQVVMVF9JTkNMVURFX1BBUkFNLFxuICAgICAgICB0aGlzLmluY2x1ZGVQYXJhbXNcbiAgICAgIClcbiAgICB9O1xuXG4gICAgaWYgKHBhc3N3b3JkKSB7XG4gICAgICBsb2dpblBhcmFtc1sncGFzc3dvcmQnXSA9IHBhc3N3b3JkO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhc1Byb3ZpZGVyU2Vzc2lvbkluZm8pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmxvZ2luUGFyYW1zLFxuICAgICAgICBzdXBwcmVzc0xvZ2luRXZlbnQ6IHRydWUsXG4gICAgICAgIHJlZ1Rva2VuOiBudWxsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmxvZ2luUGFyYW1zLFxuICAgICAgbG9naW5Nb2RlOiBMb2dpbk1vZGVzLmxpbmsubmFtZVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGdldCBjb25mbGljdGluZ0FjY291bnQoKToge1trZXk6IHN0cmluZ106IGFueX0ge1xuICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9mb3JtLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xuICAgIHJldHVybiBhcGlEYXRhPy5nZXRDb25mbGljdGluZ0FjY291bnQ/LmNvbmZsaWN0aW5nQWNjb3VudDtcbiAgfVxufVxuIiwiZXhwb3J0ICogZnJvbSAnLi9Gb3JtRGF0YVByb3ZpZGVyJztcbmV4cG9ydCAqIGZyb20gJy4vSUZvcm1EYXRhUHJvdmlkZXInO1xuZXhwb3J0ICogZnJvbSAnLi9JTG9naW5EYXRhUHJvdmlkZXInO1xuZXhwb3J0ICogZnJvbSAnLi9MaW5rQWNjb3VudHNEYXRhUHJvdmlkZXInO1xuIiwiZXhwb3J0IGludGVyZmFjZSBJV2FybmFibGUge1xuICAgIHdhcm4/KG1zZzogc3RyaW5nLCBpZD86IHN0cmluZyk6IHZvaWQ7XG59XG5leHBvcnQgZnVuY3Rpb24gd2FybihzY3JlZW5zZXRJRCwgbXNnKSB7XG4gICAgLy8gVE9ETzogdGhpcyBwcm9iYWJseSBzaG91bGQgdXNlIHNvbWUgZ2VuZXJhbCBkZWJ1ZyB3YXJuIG1ldGhvZCBvciBpbiB0aGUgYmFzZSBwbHVnaW5cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT0gJ29iamVjdCcgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4oJ0dpZ3lhIFNjcmVlbnNldCAoJyArIHNjcmVlbnNldElEICsgJykgLSAnICsgbXNnKTtcbn1cbiIsImltcG9ydCB7IElNYXAsIERlZXBGcmVlemUsIE1hcCwgU29tZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgVGVtcGxhdGVFbGVtZW50IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcbmltcG9ydCB7RXJyb3JUeXBlLCBJRXJyb3JJbmZvfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Vycm9ycyc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7IEZvcm1JbnB1dF9DT05TVFMgfSBmcm9tICcuL0lucHV0cy9Gb3JtSW5wdXQnO1xuXG5cbmludGVyZmFjZSBJRXJyb3JFbGVtZW50UG9saWN5IHtcbiAgICBzaG93RXJyb3I6IChlbDogSFRNTEVsZW1lbnQsIGVycm9yTWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIGhpZGVFcnJvcjogKGVsOiBIVE1MRWxlbWVudCkgPT4gdm9pZDtcbn1cblxuY29uc3QgRXJyb3JFbGVtZW50UG9saWNpZXM6IElNYXA8SUVycm9yRWxlbWVudFBvbGljeT4gPSB7XG4gICAgJ2dpZ3lhLWVycm9yLWRpc3BsYXknOiB7XG4gICAgICAgIHNob3dFcnJvcjogKGVsOiBIVE1MRWxlbWVudCwgZXJyb3JNZXNzYWdlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGlmKCFlbCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdnaWd5YS1lcnJvci1kaXNwbGF5LWFjdGl2ZScpO1xuICAgICAgICB9LFxuICAgICAgICBoaWRlRXJyb3I6IChlbDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmKCFlbCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdnaWd5YS1lcnJvci1kaXNwbGF5LWFjdGl2ZScpO1xuICAgICAgICB9LFxuICAgIH0sXG4gICAgJ2dpZ3lhLWVycm9yLW1zZyc6IHtcbiAgICAgICAgc2hvd0Vycm9yOiAoZWw6IEhUTUxFbGVtZW50LCBlcnJvck1lc3NhZ2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgaWYoIWVsKSByZXR1cm47XG5cbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2dpZ3lhLWVycm9yLW1zZy1hY3RpdmUnKTtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgncm9sZScsICdhbGVydCcpO1xuICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICB9LFxuICAgICAgICBoaWRlRXJyb3I6IChlbDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlmKCFlbCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdnaWd5YS1lcnJvci1tc2ctYWN0aXZlJyk7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3JvbGUnKTtcbiAgICAgICAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9LFxuICAgIH0sXG59O1xuXG5cbkRlZXBGcmVlemUoRXJyb3JFbGVtZW50UG9saWNpZXMpO1xuZXhwb3J0IGVudW0gRXJyb3JTY29wZXMge1xuICAgIGJvdW5kT2JqZWN0RXJyb3IsXG4gICAgZmlyc3RFcnJvcixcbiAgICBhbnlFcnJvcixcbiAgICBhbGxFcnJvcnMsXG4gICAgJ2JvdW5kLW9iamVjdC1lcnJvcicgPSBib3VuZE9iamVjdEVycm9yLFxuICAgICdmaXJzdC1lcnJvcicgPSBmaXJzdEVycm9yLFxuICAgICdhbnktZXJyb3InID0gYW55RXJyb3IsXG4gICAgJ2FsbC1lcnJvcnMnID0gYWxsRXJyb3JzLFxufVxuRGVlcEZyZWV6ZShFcnJvclNjb3Blcyk7XG5leHBvcnQgdmFyIEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3NlczogWydnaWd5YS1lcnJvci1kaXNwbGF5JywgJ2dpZ3lhLWVycm9yLW1zZyddLFxuICAgIGJvdW5kZWRUbzogJ2RhdGEtYm91bmQtdG8nLFxuICAgIGVycm9yQ29kZXM6ICdkYXRhLWVycm9yLWNvZGVzJyxcbiAgICBzY29wZTogJ2RhdGEtc2NvcGUnLFxuICAgIGZsYWdzOiAnZGF0YS1lcnJvci1mbGFncycsXG4gICAgZXJyb3JDbGFzc1ByZWZpeDogJ2dpZ3lhLWVycm9yLWNvZGUtJyxcbiAgICBlcnJvclR5cGU6ICdnaWd5YS1lcnJvci10eXBlLScsXG59O1xuRGVlcEZyZWV6ZShFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgRXJyb3JEaXNwbGF5RWxlbWVudCBleHRlbmRzIFRlbXBsYXRlRWxlbWVudDxIVE1MRWxlbWVudD4ge1xuICAgIC8vIFRPRE8gTmVlZCB0byBiZSBjb252ZXJ0ZWQgdG8gdHdvIHdpZGdldHNcbiAgICBwdWJsaWMgYm91bmRlZFRvOiBzdHJpbmc7XG4gICAgcHVibGljIHNjb3BlOiBFcnJvclNjb3BlcztcbiAgICBwcml2YXRlIGFsbG93ZWRFcnJvckNvZGVzOiBHU0Vycm9yc1tdO1xuICAgIHByaXZhdGUgYWxsb3dlZEZsYWdzOiBzdHJpbmdbXTtcbiAgICBwcml2YXRlIHBvbGljeTogSUVycm9yRWxlbWVudFBvbGljeTtcbiAgICBwdWJsaWMgX2Zvcm06IEJhc2VGb3JtO1xuICAgIHByaXZhdGUgbGFzdEVycm9yOiBJRXJyb3JJbmZvO1xuXG4gICAgY29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50LCBwcml2YXRlIF9zY3JlZW46IFNjcmVlbikge1xuICAgICAgICBzdXBlcihlbCwgX3NjcmVlbik7XG5cbiAgICAgICAgdGhpcy5ib3VuZGVkVG8gPSBlbC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuYm91bmRlZFRvKTtcblxuICAgICAgICB0aGlzLnNjb3BlID0gRXJyb3JTY29wZXNbZWwuZ2V0QXR0cmlidXRlKEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLnNjb3BlKV0gfHwgRXJyb3JTY29wZXMuYm91bmRPYmplY3RFcnJvcjtcblxuICAgICAgICB2YXIgZXJyb3JDb2RlcyA9IGVsLmdldEF0dHJpYnV0ZShFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUy5lcnJvckNvZGVzKTtcbiAgICAgICAgaWYgKGVycm9yQ29kZXMpIHRoaXMuYWxsb3dlZEVycm9yQ29kZXMgPSBNYXAoZXJyb3JDb2Rlcy5zcGxpdCgnLCcpLCBjb2RlID0+IHBhcnNlSW50KGNvZGUpKTtcbiAgICAgICAgZWxzZSB0aGlzLmFsbG93ZWRFcnJvckNvZGVzID0gW107XG5cbiAgICAgICAgdmFyIGZsYWdzID0gZWwuZ2V0QXR0cmlidXRlKEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmZsYWdzKTtcbiAgICAgICAgaWYgKGZsYWdzKSB0aGlzLmFsbG93ZWRGbGFncyA9IGZsYWdzLnNwbGl0KCcsJyk7XG4gICAgICAgIGVsc2UgdGhpcy5hbGxvd2VkRmxhZ3MgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBjbGFzc05hbWUgaW4gRXJyb3JFbGVtZW50UG9saWNpZXMpIHtcbiAgICAgICAgICAgIGlmIChnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoZWwsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvbGljeSA9IEVycm9yRWxlbWVudFBvbGljaWVzW2NsYXNzTmFtZV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBvbGljeS5oaWRlRXJyb3IoZWwpOyAvLyBjbGVhciBlcnJvciBhcyBpbml0aWFsIGFwcGVhcmFuY2VcblxuICAgICAgICAvLyBXQ0FHOiBTZXQgcm9sZT1hbGVydCBhbmQgYXJpYS1hdG9taWMgc28gdGhhdCBzY3JlZW4gcmVhZGVycyB3aWxsIGF1dG9tYXRpY2FsbHkgcmVhZCB1cGRhdGVkIGVycm9yIHRleHQuXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly93d3cudzMub3JnL1RSL1dDQUcyMC1URUNIUy9BUklBMTkuaHRtbFxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtYXRvbWljJywgJ3RydWUnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNFcnJvckNvZGVBbGxvd2VkKGVycm9yQ29kZTogR1NFcnJvcnMsIGZsYWdzOiBzdHJpbmcgPSBudWxsKSB7XG4gICAgICAgIHZhciBhbGxvd2VkQ29kZSA9XG4gICAgICAgICAgICAodGhpcy5hbGxvd2VkRXJyb3JDb2Rlcy5sZW5ndGggPT09IDAgJiYgZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5EYXRhX1BlbmRpbmcpIHx8IGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodGhpcy5hbGxvd2VkRXJyb3JDb2RlcywgZXJyb3JDb2RlKSAhPT0gLTE7XG5cbiAgICAgICAgdmFyIGFsbG93ZWRGbGFnID0gdGhpcy5hbGxvd2VkRmxhZ3MubGVuZ3RoID09PSAwOyAvLyBBbGxvdyBhbGwgZmxhZ3MgaWYgZmxhZ3MgYXJlIG5vdCBzcGVjaWZpZWRcblxuICAgICAgICBpZiAodGhpcy5hbGxvd2VkRmxhZ3MubGVuZ3RoICYmIGZsYWdzKSB7XG4gICAgICAgICAgICB2YXIgYXJGbGFncyA9IGZsYWdzLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBhbGxvd2VkRmxhZyA9IFNvbWUoYXJGbGFncywgZmxhZyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodGhpcy5hbGxvd2VkRmxhZ3MsIGZsYWcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBhbGxvd2VkRmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhbGxvd2VkQ29kZSAmJiBhbGxvd2VkRmxhZztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2hvd0Vycm9yKGVycm9yOiBJRXJyb3JJbmZvKSB7XG4gICAgICAgIHRoaXMuc2V0TGFzdEVycm9yKGVycm9yKTtcbiAgICAgICAgdGhpcy5wb2xpY3kuc2hvd0Vycm9yKHRoaXMuaW5zdGFuY2VFbGVtZW50LCBlcnJvci5lcnJvck1lc3NhZ2UpO1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuY2VudGVyTW9kYWwoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaGlkZUVycm9yKCkge1xuICAgICAgICB0aGlzLnBvbGljeS5oaWRlRXJyb3IodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgICAgICB0aGlzLnJlbW92ZUxhc3RFcnJvcigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0TGFzdEVycm9yKGVycm9yOiBJRXJyb3JJbmZvKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGFzdEVycm9yKCk7XG4gICAgICAgIHRoaXMubGFzdEVycm9yID0gZXJyb3I7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjbGFzc2VzID0gW1xuICAgICAgICAgICAgICAgIEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmVycm9yQ2xhc3NQcmVmaXggKyBlcnJvci5lcnJvckNvZGUsXG4gICAgICAgICAgICAgICAgZXJyb3IuZXJyb3JUeXBlICYmIGAke0Vycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmVycm9yVHlwZX0ke0Vycm9yVHlwZVtlcnJvci5lcnJvclR5cGVdfWAsXG4gICAgICAgICAgICAgICAgZXJyb3IuaXNXYXJuICYmIEZvcm1JbnB1dF9DT05TVFMud2FybkNsYXNzLFxuICAgICAgICAgICAgICBdO1xuICAgICAgICBcbiAgICAgICAgICAgICAgY2xhc3Nlcy5mb3JFYWNoKChjKSA9PiBjICYmICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIGMpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuY2VudGVyTW9kYWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlTGFzdEVycm9yKCkge1xuICAgICAgICBpZiAodGhpcy5sYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSBbXG4gICAgICAgICAgICAgICAgICAgIEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmVycm9yQ2xhc3NQcmVmaXggKyB0aGlzLmxhc3RFcnJvci5lcnJvckNvZGUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEVycm9yLmVycm9yVHlwZSAmJiBgJHtFcnJvckRpc3BsYXlFbGVtZW50X0NPTlNUUy5lcnJvclR5cGV9JHtFcnJvclR5cGVbdGhpcy5sYXN0RXJyb3IuZXJyb3JUeXBlXX1gLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RFcnJvci5pc1dhcm4gJiYgRm9ybUlucHV0X0NPTlNUUy53YXJuQ2xhc3MsXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNsYXNzZXMuZm9yRWFjaCgoYykgPT4gYyAmJiAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIGMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuY2VudGVyTW9kYWwoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5sYXN0RXJyb3IgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVycm9yVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEVycm9yPy5lcnJvclR5cGU7XG4gICAgfVxuXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuXG4gICAgICAgIHRoaXMuYm91bmRlZFRvID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmJvdW5kZWRUbyk7XG5cbiAgICAgICAgdmFyIGVycm9yQ29kZXMgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuZXJyb3JDb2Rlcyk7XG4gICAgICAgIGlmIChlcnJvckNvZGVzKSB0aGlzLmFsbG93ZWRFcnJvckNvZGVzID0gTWFwKGVycm9yQ29kZXMuc3BsaXQoJywnKSwgY29kZSA9PiBwYXJzZUludChjb2RlKSk7XG4gICAgICAgIGVsc2UgdGhpcy5hbGxvd2VkRXJyb3JDb2RlcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuc2NvcGUgPSBFcnJvclNjb3Blc1t0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuc2NvcGUpXSB8fCBFcnJvclNjb3Blcy5ib3VuZE9iamVjdEVycm9yO1xuICAgICAgICB2YXIgZmxhZ3MgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuZmxhZ3MpO1xuICAgICAgICBpZiAoZmxhZ3MpIHRoaXMuYWxsb3dlZEZsYWdzID0gZmxhZ3Muc3BsaXQoJywnKTtcbiAgICAgICAgZWxzZSB0aGlzLmFsbG93ZWRGbGFncyA9IFtdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IElGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0IHsgSU51bWVyaWNNYXAsIERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IFNjcmVlbk9wdGlvbnNfQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5PcHRpb25zJztcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHtJRm9ybUlucHV0fSBmcm9tIFwiLi9JbnB1dHMvRm9ybUlucHV0XCI7XG5pbXBvcnQge0lGb3JtV2lkZ2V0fSBmcm9tICcuL0Jhc2VGb3JtV2lkZ2V0JztcblxuZXhwb3J0IGVudW0gRXJyb3JUeXBlIHtcbiAgICBjbGllbnQsXG4gICAgY3VzdG9tLFxuICAgIHNlcnZlclxufVxuZXhwb3J0IGludGVyZmFjZSBJRXJyb3JJbmZvIHtcbiAgICBmaWVsZE5hbWU/OiBzdHJpbmc7IC8vIG5vdCBhbGwgZXJyb3JzIGFyZSBmaWVsZCBib3VuZGVkXG4gICAgZmllbGRBcnJheUtleVZhbHVlPzogc3RyaW5nO1xuICAgIGVycm9yQ29kZTogR1NFcnJvcnM7XG4gICAgZXJyb3JUeXBlPzogRXJyb3JUeXBlLFxuICAgIGVycm9yTWVzc2FnZT86IHN0cmluZztcbiAgICBjdXN0b21NZXNzYWdlPzogc3RyaW5nO1xuICAgIGVycm9yRmxhZ3M/OiBzdHJpbmc7XG4gICAgaGFuZGxlZD86IGJvb2xlYW47XG4gICAgZmllbGQ/OiBJRm9ybUlucHV0O1xuICAgIHdpZGdldD86IElGb3JtV2lkZ2V0O1xuICAgIGlzV2Fybj86Ym9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUVycm9yQXR0cmlidXRlSW5mbyB7XG4gICAgbmFtZT86IHN0cmluZztcbiAgICBuZXh0U2NyZWVuPzogKGZvcm06IElGb3JtKSA9PiBQcm9taXNlPHN0cmluZz4gfCBzdHJpbmc7XG4gICAgcmVxdWlyZXNGaW5hbGl6ZT86IGJvb2xlYW47XG4gICAgcmVzZXRGaW5hbGl6ZU5lZWRlZFN0YXRlPzogYm9vbGVhbjtcbn1cbmV4cG9ydCB2YXIgUGVuZGluZ0Vycm9yQXR0cmlidXRlczogSU51bWVyaWNNYXA8SUVycm9yQXR0cmlidXRlSW5mbz4gPSB7fTtcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuQUNDT1VOVFNfTElOS0VEXSA9IHtcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5hY2NvdW50c0xpbmtlZFNjcmVlbixcbiAgICBuZXh0U2NyZWVuOiBmb3JtID0+IGZvcm0uX3NjcmVlbi5hY2NvdW50c0xpbmtlZFNjcmVlbiB8fCAnX2ZpbmlzaCcsIC8vIEFsbG93IG9sZCBzY3JlZW5zZXRzIHRvIGF1dG9tYXRpY2FsbHkgZmluYWxpemUgdGhlIHJlZ2lzdHJhdGlvbiBvZiB0aGUgbmV3bHkgbGlua2VkIGFjY291bnRcbiAgICByZXF1aXJlc0ZpbmFsaXplOiB0cnVlLFxufTtcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1JFR0lTVFJBVElPTl0gPSB7XG4gICAgbmFtZTogU2NyZWVuT3B0aW9uc19DT05TVFMucGVuZGluZ1JlZ2lzdHJhdGlvblNjcmVlbixcbiAgICBuZXh0U2NyZWVuOiBmb3JtID0+IHtcbiAgICAgICAgY29uc3QgYXBpRGF0YSA9IGZvcm0uX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XG4gICAgICAgIGRlbGV0ZSBhcGlEYXRhLmdldFNjaGVtYTsgLy8gY2xlYW5pbmcgY2FjaGVkIHNjaGVtYVxuICAgICAgICByZXR1cm4gZm9ybS5fc2NyZWVuLnBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW47XG4gICAgfSxcbiAgICByZXF1aXJlc0ZpbmFsaXplOiB0cnVlLFxufTtcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuTE9HSU5fSURFTlRJRklFUl9FWElTVFNdID0gUGVuZGluZ0Vycm9yQXR0cmlidXRlc1tHU0Vycm9ycy5PS19XSVRIX0VSUk9SX0xPR0lOX0lERU5USUZJRVJfRVhJU1RTXSA9IHtcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5leGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbixcbiAgICBuZXh0U2NyZWVuOiBmb3JtID0+IHtcbiAgICAgICAgcmV0dXJuIGZvcm0uX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuICYmIGZvcm0uX3NjcmVlbi5leGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbjt9LFxuICAgIHJlcXVpcmVzRmluYWxpemU6IHRydWUsXG59O1xuUGVuZGluZ0Vycm9yQXR0cmlidXRlc1tHU0Vycm9ycy5GT1JDRV9MSU5LX0xPR0lOX0lERU5USUZJRVJfRVhJU1RTXSA9IHtcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5leGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbixcbiAgICBuZXh0U2NyZWVuOiBmb3JtID0+IHtcbiAgICAgICAgY29uc3Qgc2NyZWVuRGF0YSA9IGZvcm0uX3NjcmVlblNldC5kYXRhO1xuICAgICAgICByZXR1cm4gc2NyZWVuRGF0YS5yZWdUb2tlbiAmJiBmb3JtLl9zY3JlZW5TZXQ/LnByb3ZpZGVyU2Vzc2lvbkluZm8gJiYgZm9ybS5fc2NyZWVuLmV4aXN0aW5nTG9naW5JZGVudGlmaWVyU2NyZWVuXG4gICAgfSxcbiAgICByZXF1aXJlc0ZpbmFsaXplOiB0cnVlLFxufVxuUGVuZGluZ0Vycm9yQXR0cmlidXRlc1tHU0Vycm9ycy5BQ0NPVU5UX1BFTkRJTkdfVkVSSUZJQ0FUSU9OXSA9IHtcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nVmVyaWZpY2F0aW9uU2NyZWVuLFxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLnBlbmRpbmdWZXJpZmljYXRpb25TY3JlZW4sXG4gICAgcmVzZXRGaW5hbGl6ZU5lZWRlZFN0YXRlOiB0cnVlLFxufTtcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuQUNDT1VOVF9NSVNTSU5HX0xPR0lOSURdID0ge1xuICAgIG5hbWU6IFNjcmVlbk9wdGlvbnNfQ09OU1RTLm1pc3NpbmdMb2dpbklkU2NyZWVuLFxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLm1pc3NpbmdMb2dpbklkU2NyZWVuLFxufTtcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuUEVORElOR19QQVNTV09SRF9DSEFOR0VdID0ge1xuICAgIG5hbWU6IFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdQYXNzd29yZENoYW5nZVNjcmVlbixcbiAgICBuZXh0U2NyZWVuOiBmb3JtID0+IGZvcm0uX3NjcmVlbi5wZW5kaW5nUGFzc3dvcmRDaGFuZ2VTY3JlZW4sXG4gICAgcmVxdWlyZXNGaW5hbGl6ZTogdHJ1ZSxcbn07XG5QZW5kaW5nRXJyb3JBdHRyaWJ1dGVzW0dTRXJyb3JzLkFDQ09VTlRfUEVORElOR19URkFfVkVSSUZJQ0FUSU9OXSA9IHtcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nVGZhVmVyaWZpY2F0aW9uU2NyZWVuLFxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLnBlbmRpbmdUZmFWZXJpZmljYXRpb25TY3JlZW4sXG4gICAgcmVxdWlyZXNGaW5hbGl6ZTogdHJ1ZSxcbn07XG5QZW5kaW5nRXJyb3JBdHRyaWJ1dGVzW0dTRXJyb3JzLkFDQ09VTlRfUEVORElOR19URkFfUkVHSVNUUkFUSU9OXSA9IHtcbiAgICBuYW1lOiBTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuLFxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLnBlbmRpbmdUZmFSZWdpc3RyYXRpb25TY3JlZW4sXG4gICAgcmVxdWlyZXNGaW5hbGl6ZTogdHJ1ZSxcbn07XG5QZW5kaW5nRXJyb3JBdHRyaWJ1dGVzW0dTRXJyb3JzLkFDQ09VTlRfUEVORElOR19SRUNFTlRfTE9HSU5dID0ge1xuICAgIG5hbWU6IFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdSZUF1dGhlbnRpY2F0aW9uU2NyZWVuLFxuICAgIG5leHRTY3JlZW46IGZvcm0gPT4gZm9ybS5fc2NyZWVuLnBlbmRpbmdSZUF1dGhlbnRpY2F0aW9uU2NyZWVuLFxufTtcblBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbR1NFcnJvcnMuUEVORElOR19DT0RFX1ZFUklGSUNBVElPTl0gPSB7XG4gICAgbmFtZTogU2NyZWVuT3B0aW9uc19DT05TVFMucGVuZGluZ0NvZGVWZXJpZmljYXRpb25TY3JlZW4sXG4gICAgcmVxdWlyZXNGaW5hbGl6ZTogdHJ1ZSxcbiAgICBuZXh0U2NyZWVuOiBhc3luYyBmb3JtID0+IHtcbiAgICAgICAgaWYgKCFnaWd5YS51dGlscy50b2dnbGVzLmlzT24oJ3ByZXZlbnRTZW5kaW5nQ29kZVZlcmlmaWNhdGlvbicpKSB7XG4gICAgICAgICAgICBhd2FpdCBzZW5kVmVyaWZpY2F0aW9uQ29kZShmb3JtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZm9ybS5fc2NyZWVuLnBlbmRpbmdDb2RlVmVyaWZpY2F0aW9uU2NyZWVuO1xuICAgIH1cbn07XG5hc3luYyBmdW5jdGlvbiBzZW5kVmVyaWZpY2F0aW9uQ29kZShmb3JtKSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSBmb3JtLmdldEZvcm1EYXRhICYmIGZvcm0uZ2V0Rm9ybURhdGEoKTtcbiAgICBjb25zdCBhcGlEYXRhID0gZm9ybS5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICBsZXQgYWNjb3VudEluZm8gPSBhcGlEYXRhLmdldEFjY291bnRJbmZvID0gYXBpRGF0YS5nZXRBY2NvdW50SW5mbyB8fCB7fTtcbiAgICBpZighYWNjb3VudEluZm8uZW1haWwgJiYgIShhY2NvdW50SW5mby5wcm9maWxlICYmIGFjY291bnRJbmZvLnByb2ZpbGUuZW1haWwpKSB7XG4gICAgICAgIGFjY291bnRJbmZvID0gYXdhaXQgbmV3IFByb21pc2UociA9PiBmb3JtLl9zY3JlZW5TZXQudXBkYXRlQWNjb3VudEluZm8ocikpO1xuICAgIH1cbiAgICBpZiAoYWNjb3VudEluZm8/LmVtYWlscz8udW52ZXJpZmllZD8uaW5kZXhPZihmb3JtRGF0YT8ubG9naW5JRCkgPj0gMCkge1xuICAgICAgICBhY2NvdW50SW5mby5lbWFpbCA9IGZvcm1EYXRhLmxvZ2luSUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYWNjb3VudEluZm8uZW1haWwgPSBhY2NvdW50SW5mby5lbWFpbCB8fCAoYWNjb3VudEluZm8ucHJvZmlsZSAmJiBhY2NvdW50SW5mby5wcm9maWxlLmVtYWlsKTtcbiAgICB9XG4gICAgZ2lneWEuYWNjb3VudHMub3RwLnNlbmRDb2RlKFxuICAgICAgICB7XG4gICAgICAgICAgICBsYW5nOiBmb3JtLl9zY3JlZW5TZXQucGFyYW1zLmNvbW11bmljYXRpb25MYW5nLFxuICAgICAgICAgICAgcmVnVG9rZW46IGZvcm0uX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuLFxuICAgICAgICAgICAgZW1haWw6IGFjY291bnRJbmZvLmVtYWlsLFxuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsXG4gICAgICAgICAgICBjYWxsYmFjazogKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmKHJlcy5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybS5fc2NyZWVuU2V0LmRhdGEub3RwRGF0YS52VG9rZW4gPSByZXMudlRva2VuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59XG5cbkRlZXBGcmVlemUoUGVuZGluZ0Vycm9yQXR0cmlidXRlcyk7XG5leHBvcnQgZnVuY3Rpb24gbm90SW1wbGVtZW50ZXJBYnN0cmFjdCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05PVCBJTVBMRU1FTlRFRCcpO1xufVxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tIFwiLi4vQmFzZUZvcm1cIjtcbmltcG9ydCB7IElGb3JtQ29udGV4dCB9IGZyb20gXCIuLi9JRm9ybUNvbnRleHRcIjtcbmltcG9ydCB7U3dpdGNoU2NyZWVuX0NPTlNUU30gZnJvbSAnLi4vU3dpdGNoU2NyZWVuV2lkZ2V0JztcblxuY29uc3QgZ2V0QXR0cmlidXRlID0gZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGU7XG5cbmludGVyZmFjZSBJQXV0aE1ldGhvZHMge1xuICAgIG1ldGhvZHM6IHN0cmluZ1tdO1xuICAgIHByZWZlcnJlZE1ldGhvZD86IHN0cmluZztcbn1cblxuZXhwb3J0IHZhciBBdXRoTWV0aG9kc0Zvcm1fQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1hdXRoLW1ldGhvZHMtZm9ybScsXG4gICAgYXV0aE1ldGhvZFNlbGVjdG9yOiAnW2RhdGEtYXV0aC1tZXRob2RdJyxcbiAgICBhdXRoTWV0aG9kOiAnZGF0YS1hdXRoLW1ldGhvZCdcbn07XG5cbkRlZXBGcmVlemUoQXV0aE1ldGhvZHNGb3JtX0NPTlNUUyk7XG5cbmV4cG9ydCBjbGFzcyBBdXRoTWV0aG9kc0Zvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IEF1dGhNZXRob2RzRm9ybV9DT05TVFM7XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9hdXRoTWV0aG9kVG9TY3JlZW5NYXA6IHsgW2F1dGhNZXRob2Q6IHN0cmluZ10gOiBzdHJpbmcgfSA9IHt9O1xuXG4gICAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTEVsZW1lbnQ+KEF1dGhNZXRob2RzRm9ybV9DT05TVFMuYXV0aE1ldGhvZFNlbGVjdG9yKVxuICAgICAgICAgICAgLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHttZXRob2RzfSA9IHRoaXMuZ2V0QXV0aE1ldGhvZHMoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWdpZ3lhLnV0aWxzLmFycmF5LmluY2x1ZGVzKG1ldGhvZHMsIGdldEF0dHJpYnV0ZShlbCwgQXV0aE1ldGhvZHNGb3JtX0NPTlNUUy5hdXRoTWV0aG9kKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUVsZW1lbnQoZWwucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX2F1dGhNZXRob2RUb1NjcmVlbk1hcFtnZXRBdHRyaWJ1dGUoZWwsIEF1dGhNZXRob2RzRm9ybV9DT05TVFMuYXV0aE1ldGhvZCldID0gZ2V0QXR0cmlidXRlKGVsLCBTd2l0Y2hTY3JlZW5fQ09OU1RTLnN3aXRjaFNjcmVlbilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmF1dG9Ta2lwU2NyZWVuID0gdGhpcy5nZXREZWZhdWx0QXV0aFNjcmVlbigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBjYW5BdXRvU2tpcChmb3JtQ29udGV4dDogSUZvcm1Db250ZXh0KSB7XG4gICAgICAgIC8vIHByZWZlcnJlZE1ldGhvZCBleGlzdCBhbmQgZW5hYmxlZCBvciBvbmx5IDEgYWN0aXZlIGF1dGggbWV0aG9kIG9yIG5hdmlnYXRpb24gdG8gc2NyZWVuIHdhc24ndCBleHBsaWNpdCAoZXhwbGljaXQgbWVhbnM6IGNsaWNraW5nIG9uIGEgbGluayB0aGF0IHNheXMgXCJDaGFuZ2UgYXV0aCBtZXRob2RcIilcbiAgICAgICAgY29uc3Qge21ldGhvZHMsIHByZWZlcnJlZE1ldGhvZH0gPSB0aGlzLmdldEF1dGhNZXRob2RzKCk7XG4gICAgICAgIGNvbnN0IGhhc1Bhc3NrZXkgPSBtZXRob2RzLnNvbWUoeCA9PiB4LnN0YXJ0c1dpdGgoJ3Bhc3NrZXknKSk7XG4gICAgICAgIGNvbnN0IGNhblNraXBUb0RlZmF1bHRBdXRoTWV0aG9kID0gbWV0aG9kcy5sZW5ndGggPD0gMSB8fCAocHJlZmVycmVkTWV0aG9kICYmICFmb3JtQ29udGV4dC5leHBsaWNpdFN3aXRjaFNjcmVlbik7XG5cbiAgICAgICAgcmV0dXJuICFoYXNQYXNza2V5ICYmIGNhblNraXBUb0RlZmF1bHRBdXRoTWV0aG9kICYmIChhd2FpdCBzdXBlci5jYW5BdXRvU2tpcChmb3JtQ29udGV4dCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RGVmYXVsdEF1dGhTY3JlZW4oKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qge21ldGhvZHMsIHByZWZlcnJlZE1ldGhvZH0gPSB0aGlzLmdldEF1dGhNZXRob2RzKCk7XG5cbiAgICAgICAgaWYgKCFtZXRob2RzIHx8ICFtZXRob2RzLmxlbmd0aCkge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oJ2NvdWxkIG5vdCBmaW5kIGRlZmF1bHQgYXV0aCBtZXRob2QnKTtcbiAgICAgICAgICAgIHJldHVybiAnX2ZpbmlzaCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWV0aG9kcy5sZW5ndGggPT09IDEpICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXV0aE1ldGhvZFRvU2NyZWVuTWFwW21ldGhvZHNbMF1dO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByZWZlcnJlZE1ldGhvZCAmJiB0aGlzLl9hdXRoTWV0aG9kVG9TY3JlZW5NYXBbcHJlZmVycmVkTWV0aG9kXSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2F1dGhNZXRob2RUb1NjcmVlbk1hcFtwcmVmZXJyZWRNZXRob2RdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRBdXRoTWV0aG9kcygpOiBJQXV0aE1ldGhvZHMge1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICAgICAgY29uc3QgbWV0aG9kcyA9IFsuLi4oYXBpRGF0YT8uYXV0aE1ldGhvZHMgfHwgW10pXVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kcyxcbiAgICAgICAgICAgIHByZWZlcnJlZE1ldGhvZDogdGhpcy5nZXRQcmVmZXJyZWRNZXRob2QobWV0aG9kcywgYXBpRGF0YT8uaWRlbnRpZmllcilcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFByZWZlcnJlZE1ldGhvZChtZXRob2RzOiBzdHJpbmdbXSwgaWRlbnRpZmllcjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgcHJlZmVycmVkTWV0aG9kID0gZ2lneWEuYWNjb3VudHMuYXV0aC5nZXRQcmVmZXJyZWRMb2dpbk1ldGhvZChpZGVudGlmaWVyKTtcblxuICAgICAgICBpZiAoZ2lneWEudXRpbHMuYXJyYXkuaW5jbHVkZXMobWV0aG9kcywgcHJlZmVycmVkTWV0aG9kKSkgcmV0dXJuIHByZWZlcnJlZE1ldGhvZDtcblxuICAgICAgICBpZiAoZ2lneWEudXRpbHMuYXJyYXkuY29udGFpbnNPbmx5KG1ldGhvZHMsIFsncGFzc3dvcmQnLCAncHVzaCddKSkge1xuICAgICAgICAgICAgcmV0dXJuICdwdXNoJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShBdXRoTWV0aG9kc0Zvcm0pO1xuIiwiaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtJRm9ybVJlc3BvbnNlfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbic7XG5pbXBvcnQge0dTRXJyb3JzfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5cbmV4cG9ydCBjbGFzcyBCYXNlTG9naW5Gb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xuICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xuICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLmxvZ2luO1xuICB9XG5cbiAgcHVibGljIGdldEVycm9yS2V5KHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlKTogc3RyaW5nIHtcbiAgICBjb25zdCBlcnJvckNvZGUgPSBOdW1iZXIocmVzcG9uc2UuZXJyb3JDb2RlKTtcbiAgICBpZiAoZXJyb3JDb2RlID09PSBHU0Vycm9ycy5PTERfUEFTU1dPUkRfVVNFRCkge1xuICAgICAgcmV0dXJuICdvbGRfcGFzc3dvcmRfdXNlZCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1cGVyLmdldEVycm9yS2V5KHJlc3BvbnNlKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7QmFzZUZvcm19IGZyb20gXCIuLi9CYXNlRm9ybVwiO1xuaW1wb3J0IHtFcnJvclR5cGUsIElFcnJvckluZm99IGZyb20gXCIuLi9FcnJvcnNcIjtcbmltcG9ydCB7R1NFcnJvcnN9IGZyb20gXCIuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9yc1wiO1xuXG5cbmV4cG9ydCB2YXIgQ2hhbmdlT3JnYW5pemF0aW9uQ29udGV4dEZvcm1Db25zdHMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLWNoYW5nZS1vcmdhbml6YXRpb24tY29udGV4dC1mb3JtJyxcbn07XG5cbkRlZXBGcmVlemUoQ2hhbmdlT3JnYW5pemF0aW9uQ29udGV4dEZvcm1Db25zdHMpO1xuXG5leHBvcnQgY2xhc3MgQ2hhbmdlT3JnYW5pemF0aW9uQ29udGV4dEZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBDaGFuZ2VPcmdhbml6YXRpb25Db250ZXh0Rm9ybUNvbnN0cztcblxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5iMmIuc2V0T3JnYW5pemF0aW9uQ29udGV4dDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgZ2V0Q3VzdG9tVmFsaWRhdGlvbkVycm9ycygpOiBQcm9taXNlPElFcnJvckluZm9bXT4ge1xuICAgICAgICB2YXIgZXJyb3JzID0gYXdhaXQgc3VwZXIuZ2V0Q3VzdG9tVmFsaWRhdGlvbkVycm9ycygpO1xuICAgICAgICBjb25zdCBicGlkID0gdGhpcy5fc2NyZWVuU2V0LmRhdGE/LmFwaURhdGE/LnNlbGVjdGVkQnBpZDtcbiAgICAgICAgaWYgKCFicGlkKSB7XG4gICAgICAgICAgICBpZighZXJyb3JzKVxuICAgICAgICAgICAgICAgIGVycm9ycyA9IFtdO1xuXG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgZmllbGROYW1lOiBudWxsLFxuICAgICAgICAgICAgICAgIGZpZWxkQXJyYXlLZXlWYWx1ZTogbnVsbCxcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlJFUVVJUkVEX1ZBTFVFX1ZBTElEQVRJT05fRVJST1IsXG4gICAgICAgICAgICAgICAgZXJyb3JUeXBlOiBFcnJvclR5cGUuY2xpZW50LFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogdGhpcy5fc2NyZWVuLmdldEVycm9yTWVzc2FnZShHU0Vycm9ycy5SRVFVSVJFRF9WQUxVRV9WQUxJREFUSU9OX0VSUk9SLCBmYWxzZSwgbnVsbClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgcHVibGljIHBlcmZvcm1TdWJtaXQob1BhcmFtczogYW55KSB7XG4gICAgICAgIGNvbnN0IGJwaWQgPSB0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLnNlbGVjdGVkQnBpZDtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnBlcmZvcm1TdWJtaXQoey4uLm9QYXJhbXMsIGJwaWR9KTtcbiAgICB9XG59XG5cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoQ2hhbmdlT3JnYW5pemF0aW9uQ29udGV4dEZvcm0pO1xuIiwiaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuZXhwb3J0IGNvbnN0IEN1c3RvbUZvcm1fQ09OU1RTID0ge1xuICBnaWd5YUNsYXNzOiAnZ2lneWEtY3VzdG9tLWZvcm0nLFxufTtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbUZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG4gIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gQ3VzdG9tRm9ybV9DT05TVFM7XG5cbiAgY29uc3RydWN0b3Ioc2NyZWVuOiBTY3JlZW4sIGVsRm9ybTogSFRNTEZvcm1FbGVtZW50LCBnaWd5YUNsYXNzOiBzdHJpbmcpIHtcbiAgICBzdXBlcihzY3JlZW4sIGVsRm9ybSwgZ2lneWFDbGFzcyk7XG4gIH1cbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShDdXN0b21Gb3JtKTtcbiIsImltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5pbXBvcnQgeyBJRm9ybVJlc3BvbnNlIH0gZnJvbSAnLi4vU2NyZWVuU2V0UGx1Z2luJztcbmltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBlbnVtIFJlZ2lzdGVyRGV2aWNlUmVxdWVzdFBhcmFtIHtcbiAgVXNlckNvZGUgPSAndXNlcl9jb2RlJ1xufVxuXG5leHBvcnQgZW51bSBSZWdpc3RlckRldmljZUZvcm1QYXJhbSB7XG4gIFVzZXJDb2RlID0gJ3VzZXJDb2RlJ1xufVxuXG5leHBvcnQgY29uc3QgRGV2aWNlQ29kZUZvcm1fQ09OU1RTID0ge1xuICBnaWd5YUNsYXNzOiAnZ2lneWEtZGV2aWNlLWNvZGUtZm9ybScsXG59O1xuXG5pbnRlcmZhY2UgRGV2aWNlQ29kZUZvcm1GaWVsZHMge1xuICBbUmVnaXN0ZXJEZXZpY2VGb3JtUGFyYW0uVXNlckNvZGVdOiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIERldmljZUNvZGVSZXF1ZXN0UGFyYW1zIHtcbiAgW1JlZ2lzdGVyRGV2aWNlUmVxdWVzdFBhcmFtLlVzZXJDb2RlXTogc3RyaW5nXG59XG5cbkRlZXBGcmVlemUoRGV2aWNlQ29kZUZvcm1fQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBEZXZpY2VDb2RlRm9ybSBleHRlbmRzIEJhc2VGb3JtIHtcbiAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBEZXZpY2VDb2RlRm9ybV9DT05TVFM7XG5cbiAgcHVibGljIHNwZWNpYWxGaWVsZHMoKSB7XG4gICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICBzdXBlci5zcGVjaWFsRmllbGRzKCksXG4gICAgICB7XG4gICAgICAgIFtSZWdpc3RlckRldmljZUZvcm1QYXJhbS5Vc2VyQ29kZV06IHRydWVcbiAgICAgIH0sXG4gICAgXSk7XG4gIH1cblxuICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhKCk6IERldmljZUNvZGVGb3JtRmllbGRzIHtcbiAgICByZXR1cm4ge1xuICAgICAgW1JlZ2lzdGVyRGV2aWNlRm9ybVBhcmFtLlVzZXJDb2RlXTogdGhpcy5nZXRVc2VyQ29kZUZyb21VUkwoKSA/PyAnJ1xuICAgIH07XG4gIH1cblxuICBwdWJsaWMgc3VibWl0QXBpKCkge1xuICAgIHJldHVybiBnaWd5YS5maWRtLm9pZGMub3AuZGV2aWNlQ29udGludWU7XG4gIH1cblxuICBwdWJsaWMgcGVyZm9ybVN1Ym1pdChmb3JtRGF0YTogRGV2aWNlQ29kZUZvcm1GaWVsZHMpIHtcbiAgICBjb25zdCByZXF1ZXN0UGFyYW1zOiBEZXZpY2VDb2RlUmVxdWVzdFBhcmFtcyA9IHtcbiAgICAgIFtSZWdpc3RlckRldmljZVJlcXVlc3RQYXJhbS5Vc2VyQ29kZV06IGZvcm1EYXRhW1JlZ2lzdGVyRGV2aWNlRm9ybVBhcmFtLlVzZXJDb2RlXVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIucGVyZm9ybVN1Ym1pdChyZXF1ZXN0UGFyYW1zKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFcnJvcktleShyZXNwb25zZTogSUZvcm1SZXNwb25zZSk6IHN0cmluZyB7XG4gICAgY29uc3QgZXJyb3JDb2RlID0gTnVtYmVyKHJlc3BvbnNlLmVycm9yQ29kZSk7XG5cbiAgICBpZiAoZXJyb3JDb2RlID09PSBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRSkge1xuXG4gICAgICByZXR1cm4gJ2RldmljZV9jb2RlX2luY29ycmVjdCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1cGVyLmdldEVycm9yS2V5KHJlc3BvbnNlKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VXNlckNvZGVGcm9tVVJMKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG5cbiAgICBjb25zdCBwYXJhbXMgPSBnaWd5YS51dGlscy5VUkwuZ2V0UGFyYW1zRnJvbVVSTChkb2N1bWVudC5sb2NhdGlvbi5ocmVmKTtcblxuICAgIHJldHVybiBwYXJhbXNbUmVnaXN0ZXJEZXZpY2VSZXF1ZXN0UGFyYW0uVXNlckNvZGVdO1xuXG4gIH1cblxufVxuXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KERldmljZUNvZGVGb3JtKTtcbiIsImltcG9ydCB7RGVlcEZyZWV6ZX0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSAnLi4vQmFzZUZvcm0nO1xuaW1wb3J0IHtPdHBWZXJpZmljYXRpb25CYXNlRm9ybX0gZnJvbSAnLi9PdHBWZXJpZmljYXRpb25CYXNlRm9ybSc7XG5pbXBvcnQge0ZsYWdTZXJ2aWNlfSBmcm9tIFwiLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvU2VydmljZXMvRmxhZ1NlcnZpY2VcIjtcblxuZXhwb3J0IHZhciBFbWFpTENvZGVBdXRoTWV0aG9kRm9ybV9DT05TVFMgPSB7XG4gIGdpZ3lhQ2xhc3M6ICdnaWd5YS1lbWFpbC1jb2RlLWF1dGgtbWV0aG9kLWZvcm0nLFxuICBhdXRoTWV0aG9kOiAnZW1haWxPdHAnXG59O1xuXG5EZWVwRnJlZXplKEVtYWlMQ29kZUF1dGhNZXRob2RGb3JtX0NPTlNUUyk7XG5cbmV4cG9ydCBjbGFzcyBFbWFpbENvZGVBdXRoTWV0aG9kRm9ybSBleHRlbmRzIE90cFZlcmlmaWNhdGlvbkJhc2VGb3JtIHtcbiAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBFbWFpTENvZGVBdXRoTWV0aG9kRm9ybV9DT05TVFM7XG5cbiAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICBjb25zdCBsYW5nID0gRmxhZ1NlcnZpY2Uuc2VuZExhbmdGb3JFbWFpbE9UUCA/IHRoaXMuX3NjcmVlblNldD8ucGFyYW1zPy5sYW5nIDogbnVsbDtcblxuICAgIGlmKGFwaURhdGE/LmlkZW50aWZpZXIpIHtcbiAgICAgIHRoaXMuc2VuZEVtYWlsT1RQKGFwaURhdGE/LmlkZW50aWZpZXIsIGxhbmcpO1xuICAgIH1cbiAgICBnaWd5YS5hY2NvdW50cy5hdXRoLnNldFByZWZlcnJlZExvZ2luTWV0aG9kKEVtYWlMQ29kZUF1dGhNZXRob2RGb3JtX0NPTlNUUy5hdXRoTWV0aG9kLCBhcGlEYXRhPy5pZGVudGlmaWVyKTtcbiAgfVxuXG4gIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLmF1dGgub3RwLmVtYWlsLmxvZ2luO1xuICB9XG5cbiAgcHJpdmF0ZSBzZW5kRW1haWxPVFAoaWRlbnRpZmllcjogc3RyaW5nLCBsYW5nOiBzdHJpbmcpIHtcbiAgICBnaWd5YS5hY2NvdW50cy5hdXRoLm90cC5lbWFpbC5zZW5kQ29kZSh7XG4gICAgICBlbWFpbDogaWRlbnRpZmllcixcbiAgICAgIGxhbmcsXG4gICAgICBjYWxsYmFjazogcmVzID0+IHRoaXMub25Db2RlU2VudChyZXMpXG4gICAgfSk7XG4gIH1cbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShFbWFpbENvZGVBdXRoTWV0aG9kRm9ybSk7XG4iLCJpbXBvcnQge0RlZXBGcmVlemV9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtMb2dpbk1vZGVzfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0xvZ2luTW9kZXMnO1xuaW1wb3J0IHtCYXNlTG9naW5Gb3JtfSBmcm9tICcuL0Jhc2VMb2dpbkZvcm0nO1xuaW1wb3J0IHtwcm9taXNpZnl9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9wcm9taXNlJztcbmltcG9ydCB7SUF1dGhNZXRob2RJZGVudGlmaWVyRGF0YX0gZnJvbSAnLi4vU2NyZWVuU2V0RGF0YSc7XG5pbXBvcnQge1xuICAgIGdldExvZ2luSWQsXG4gICAgZXh0cmFjdFByb3ZpZGVyU2Vzc2lvbnMsXG4gICAgZ2V0T2JmdXNjYXRlZFBob25lXG59IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvVXRpbHMvZ2VuZXJhbC9saW5rQWNjb3VudHNIZWxwZXInO1xuaW1wb3J0IHtMaW5rQWNjb3VudHNEYXRhUHJvdmlkZXJ9IGZyb20gJy4uL0RhdGFQcm92aWRlcnMvTGlua0FjY291bnRzRGF0YVByb3ZpZGVyJztcbmltcG9ydCB7SUxvZ2luRGF0YVByb3ZpZGVyfSBmcm9tICcuLi9EYXRhUHJvdmlkZXJzL0lMb2dpbkRhdGFQcm92aWRlcic7XG5cbmV4cG9ydCB2YXIgTGlua0FjY291bnRzRm9ybV9DT05TVFMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLWxpbmstYWNjb3VudHMtZm9ybSdcbn07XG5EZWVwRnJlZXplKExpbmtBY2NvdW50c0Zvcm1fQ09OU1RTKTtcblxuZXhwb3J0IGNsYXNzIExpbmtBY2NvdW50c0Zvcm0gZXh0ZW5kcyBCYXNlTG9naW5Gb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IExpbmtBY2NvdW50c0Zvcm1fQ09OU1RTO1xuXG4gICAgY29uc3RydWN0b3Ioc2NyZWVuOiBTY3JlZW4sIGVsRm9ybTogSFRNTEZvcm1FbGVtZW50LCBnaWd5YUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoc2NyZWVuLCBlbEZvcm0sIGdpZ3lhQ2xhc3MpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTERpdkVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgICAgICB0aGlzLnNldFNjcmVlblNldERhdGEoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGRhdGFQcm92aWRlcigpOiBJTG9naW5EYXRhUHJvdmlkZXIge1xuICAgICAgICByZXR1cm4gbmV3IExpbmtBY2NvdW50c0RhdGFQcm92aWRlcih0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhKCkge1xuICAgICAgICBjb25zdCBwb3B1bGF0ZURhdGEgPSBzdXBlci5wcmVQb3B1bGF0ZURhdGEoKTtcblxuICAgICAgICBpZiAodGhpcy5sb2dpbklkKSB7XG4gICAgICAgICAgICBwb3B1bGF0ZURhdGEubG9naW5JRCA9IHRoaXMubG9naW5JZDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgcmV0dXJuIHBvcHVsYXRlRGF0YTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3BlY2lhbEZpZWxkcygpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICBzdXBlci5zcGVjaWFsRmllbGRzKCksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbG9naW5JRDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXRlUGFzc3dvcmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZW1haWxDb2RlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHBob25lQ29kZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YSgpIHtcbiAgICAgICAgbGV0IG5lZWRlZERhdGEgPSBzdXBlci5nZXROZWVkZWREYXRhKCk7XG4gICAgICAgIGlmICh0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbikge1xuICAgICAgICAgICAgbmVlZGVkRGF0YSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICAgICAgbmVlZGVkRGF0YSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGdldENvbmZsaWN0aW5nQWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnVG9rZW46IHRoaXMuX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmVlZGVkRGF0YTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVmYXVsdFN1Ym1pdFBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICBzdXBlci5kZWZhdWx0U3VibWl0UGFyYW1zKCksXG4gICAgICAgICAgICB0aGlzLmRhdGFQcm92aWRlci5nZXRQYXNzd29yZExvZ2luUGFyYW1zKCksXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMb2dpblByb3ZpZGVycygpIHtcbiAgICAgICAgcmV0dXJuIExvZ2luTW9kZXMubGluay5nZXRMb2dpblByb3ZpZGVycyh0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLCB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLCB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbik7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIG9uQmVmb3JlU2tpcHBlZCgpIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuc2hvdWxkQ29ubmVjdEFjY291bnRzID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMuX3NjcmVlblNldC5oYXNQcm92aWRlclNlc3Npb25JbmZvKSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5xdWV1ZS5ob2xkKCduZXctYWNjb3VudCcsICdBUEknKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcHJvbWlzaWZ5KGdpZ3lhLmFjY291bnRzLm5vdGlmeVNvY2lhbExvZ2luLCB7XG4gICAgICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsXG4gICAgICAgICAgICAgICAgaWdub3JlSW50ZXJydXB0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsb2dpbk1vZGU6IExvZ2luTW9kZXMuc3RhbmRhcmQubmFtZSxcbiAgICAgICAgICAgICAgICBwcm92aWRlclNlc3Npb25zOiBleHRyYWN0UHJvdmlkZXJTZXNzaW9ucyh0aGlzLl9zY3JlZW5TZXQ/LnByb3ZpZGVyU2Vzc2lvbkluZm8pLFxuICAgICAgICAgICAgICAgIHNlc3Npb25FeHBpcmF0aW9uOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLnNlc3Npb25FeHBpcmF0aW9uXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYXdhaXQgcHJvbWlzaWZ5KGdpZ3lhLmFjY291bnRzLmZpbmFsaXplUmVnaXN0cmF0aW9uLCB7XG4gICAgICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVnVG9rZW46IHJlc3BvbnNlWydyZWdUb2tlbiddLFxuICAgICAgICAgICAgICAgIGFsbG93QWNjb3VudHNMaW5raW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25FeHBpcmF0aW9uOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLnNlc3Npb25FeHBpcmF0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5xdWV1ZS5yZWxlYXNlKCduZXctYWNjb3VudCcsICdBUEknKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBvbkJlZm9yZVN1Ym1pdCgpIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuc2hvdWxkQ29ubmVjdEFjY291bnRzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25Ta2lwcGVkKCkge1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5leHRyYUV2ZW50RGF0YS5hbGxvd0FjY291bnRzTGlua2luZyA9IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRTY3JlZW5TZXREYXRhKCkge1xuICAgICAgICB0aGlzLnNldE90cElkZW50aWZpZXJEYXRhKHtcbiAgICAgICAgICAgIGVtYWlsOiBnZXRMb2dpbklkKHRoaXMuY29uZmxpY3RpbmdBY2NvdW50KSxcbiAgICAgICAgICAgIHBob25lOiBnZXRPYmZ1c2NhdGVkUGhvbmUodGhpcy5jb25mbGljdGluZ0FjY291bnQpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLl9zY3JlZW5TZXQuaGFzUHJvdmlkZXJTZXNzaW9uSW5mbykge1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGNvbmZsaWN0aW5nQWNjb3VudCgpOiB7W2tleTogc3RyaW5nXTogYW55fSB7XG4gICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xuICAgICAgICByZXR1cm4gYXBpRGF0YT8uZ2V0Q29uZmxpY3RpbmdBY2NvdW50Py5jb25mbGljdGluZ0FjY291bnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgbG9naW5JZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZ2V0TG9naW5JZCh0aGlzLmNvbmZsaWN0aW5nQWNjb3VudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRPdHBJZGVudGlmaWVyRGF0YShkYXRhOiBJQXV0aE1ldGhvZElkZW50aWZpZXJEYXRhKSB7XG4gICAgICAgIGlmICh0aGlzLl9zY3JlZW5TZXQuZGF0YT8uYXV0aE1ldGhvZERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLmF1dGhNZXRob2REYXRhLmlkZW50aWZpZXJzID0gZGF0YTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShMaW5rQWNjb3VudHNGb3JtKTtcbiIsImltcG9ydCB7RGVlcEZyZWV6ZX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQge0Jhc2VGb3JtfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcbmltcG9ydCB7U2NyZWVufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5pbXBvcnQge0lTY3JlZW5TZXRQYXJhbXN9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcbmltcG9ydCB7TG9naW5Nb2Rlc30gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Mb2dpbk1vZGVzJztcbmltcG9ydCB7QmFzZUxvZ2luRm9ybX0gZnJvbSAnLi9CYXNlTG9naW5Gb3JtJztcbmltcG9ydCB7QmVoYXZpb3JUcmFja2luZ0NvbnRleHR9IGZyb20gJy4uL0JlaGF2aW9yVHJhY2tpbmcnO1xuXG5leHBvcnQgdmFyIExvZ2luRm9ybV9DT05TVFMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLWxvZ2luLWZvcm0nLFxufTtcbkRlZXBGcmVlemUoTG9naW5Gb3JtX0NPTlNUUyk7XG5cbmV4cG9ydCBjbGFzcyBMb2dpbkZvcm0gZXh0ZW5kcyBCYXNlTG9naW5Gb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IExvZ2luRm9ybV9DT05TVFM7XG5cbiAgICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xuICAgICAgICBzdXBlcihzY3JlZW4sIGVsRm9ybSwgZ2lneWFDbGFzcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHNwZWNpYWxGaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xuICAgICAgICAgICAgc3VwZXIuc3BlY2lhbEZpZWxkcygpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxvZ2luSUQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FwdGNoYVRleHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FwdGNoYVRva2VuOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmJlaGF2aW9yQ29udGV4dCA9IG5ldyBCZWhhdmlvclRyYWNraW5nQ29udGV4dCgpO1xuICAgICAgICB0aGlzLmJlaGF2aW9yQ29udGV4dC5hZGRGaWVsZHMoWydsb2dpbklEJywgJ3Bhc3N3b3JkJ10ubWFwKGZpZWxkID0+IHRoaXMuZ2V0RmllbGQoZmllbGQpKSk7XG4gICAgICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgX2dldFN1Ym1pdEFwaVBhcmFtcyhwYXJhbXM6IElTY3JlZW5TZXRQYXJhbXMpOiBJU2NyZWVuU2V0UGFyYW1zIHtcbiAgICAgICAgcGFyYW1zID0gTG9naW5Nb2Rlcy5zdGFuZGFyZC5maWx0ZXJQYXJhbXMocGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLl9nZXRTdWJtaXRBcGlQYXJhbXMocGFyYW1zKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVmYXVsdFN1Ym1pdFBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICBzdXBlci5kZWZhdWx0U3VibWl0UGFyYW1zKCksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbG9naW5Nb2RlOiBMb2dpbk1vZGVzLnN0YW5kYXJkLm5hbWUsXG4gICAgICAgICAgICAgICAgaW5jbHVkZTogZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMubWVyZ2VDb21tYVNlcGFyYXRlZFZhbHVlcyhcbiAgICAgICAgICAgICAgICAgICAgJ3Byb2ZpbGUsZGF0YSxlbWFpbHMsc3Vic2NyaXB0aW9ucyxwcmVmZXJlbmNlcycsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5wYXJhbXMuaW5jbHVkZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSk7XG4gICAgfVxufVxuXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KExvZ2luRm9ybSk7XG4iLCJpbXBvcnQgeyBHSUdZQV9QQVJBTV9QUkVGSVggfSBmcm9tICcuLy4uLy4uLy4uL2NvbnN0YW50cyc7XG5pbXBvcnQge0RlZXBGcmVlemV9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnLi4vQmFzZUZvcm0nO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHsgTUFHSUNfTElOS19VTkFDQ0VQVEFCTEVfUEFSQU1TX1JFR0VYIH0gZnJvbSAnLi4vQ29uc3RhbnRzL21hZ2ljLWxpbmsnO1xuXG5leHBvcnQgdmFyIE1hZ2ljTGlua01ldGhvZEZvcm1fQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1tYWdpYy1saW5rLWF1dGgtbWV0aG9kLWZvcm0nLFxuICAgIGF1dGhNZXRob2Q6ICdtYWdpY0xpbmsnXG59O1xuXG5EZWVwRnJlZXplKE1hZ2ljTGlua01ldGhvZEZvcm1fQ09OU1RTKTtcblxuZXhwb3J0IGNsYXNzIE1hZ2ljTGlua0F1dGhNZXRob2RGb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gTWFnaWNMaW5rTWV0aG9kRm9ybV9DT05TVFM7XG5cbiAgICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxEaXZFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgY29uc3QgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XG4gICAgICAgIGlmKGFwaURhdGE/LmlkZW50aWZpZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZE1hZ2ljTGluayhhcGlEYXRhPy5pZGVudGlmaWVyKTtcbiAgICAgICAgfVxuICAgICAgICBnaWd5YS5hY2NvdW50cy5hdXRoLnNldFByZWZlcnJlZExvZ2luTWV0aG9kKE1hZ2ljTGlua01ldGhvZEZvcm1fQ09OU1RTLmF1dGhNZXRob2QsIGFwaURhdGE/LmlkZW50aWZpZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2VuZE1hZ2ljTGluayhpZGVudGlmaWVyOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdFBhcmFtID0ge1xuICAgICAgICAgICAgbGFuZzogdGhpcy5fc2NyZWVuU2V0Py5wYXJhbXM/LmxhbmcsXG4gICAgICAgICAgICBlbWFpbDogaWRlbnRpZmllcixcbiAgICAgICAgICAgIGNhbGxiYWNrOiByZXMgPT4gdGhpcy5kaXNwbGF5TWFnaWNMaW5rRXJyb3JzKHJlcylcbiAgICAgICAgfVxuICAgICAgICByZXF1ZXN0UGFyYW1bJ2NvbnRleHQnXSA9IHRoaXMuZ2V0Q29udGV4dE9iamVjdCgpO1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5hdXRoLm1hZ2ljbGluay5lbWFpbC5zZW5kKHJlcXVlc3RQYXJhbSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkaXNwbGF5TWFnaWNMaW5rRXJyb3JzKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChOdW1iZXIocmVzcG9uc2U/LmVycm9yQ29kZSkgIT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGlzcGxheVNlcnZlckVycm9ycyhyZXNwb25zZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENvbnRleHRPYmplY3QoKSB7XG4gICAgICAgIGNvbnN0IHsgbGFuZyB9ID0gdGhpcy5fc2NyZWVuU2V0LnBhcmFtcztcblxuICAgICAgICBjb25zdCBjb250ZXh0ID0gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHsgbGFuZyB9LFxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5jb250ZXh0LFxuICAgICAgICAgICAgZ2lneWEudXRpbHMuVVJMLmdldENvbnRleHRQYXJhbXNGcm9tVXJsKHsgdXJsOiBkb2N1bWVudC5sb2NhdGlvbi5ocmVmLCB1bmFjY2VwdGFibGVQYXJhbXM6IE1BR0lDX0xJTktfVU5BQ0NFUFRBQkxFX1BBUkFNU19SRUdFWCB9KVxuICAgICAgICBdKTtcblxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0LmFkZFByZWZpeFRvUHJvcGVydGllcyhjb250ZXh0LCBHSUdZQV9QQVJBTV9QUkVGSVgpO1xuICAgIH1cbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShNYWdpY0xpbmtBdXRoTWV0aG9kRm9ybSk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplLCBJTWFwIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHsgR1NFcnJvcnMgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5cbmV4cG9ydCB2YXIgTmV3c2xldHRlclNpZ251cF9DT05TVFMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLXN1YnNjcmliZS13aXRoLWVtYWlsLWZvcm0nLFxufTtcbmV4cG9ydCB0eXBlIE5ld3NsZXR0ZXJEYXRhID0ge1xuICAgIGdldFNjaGVtYTogeyBwYXJhbXM6IGFueSB9O1xuICAgIGdldEFjY291bnRJbmZvOiB7IHBhcmFtczogYW55IH07XG4gICAgaW5pdFJlZ2lzdHJhdGlvbj86IHsgcGFyYW1zOiBhbnk7IGNhY2hlOiBib29sZWFuIH07XG59O1xuRGVlcEZyZWV6ZShOZXdzbGV0dGVyU2lnbnVwX0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgTmV3c2xldHRlclNpZ251cEZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBOZXdzbGV0dGVyU2lnbnVwX0NPTlNUUztcblxuICAgIHByb3RlY3RlZCByZWFkb25seSBzZXR0aW5ncyA9IHtcbiAgICAgICAgc3VwcG9ydENvbnNlbnREYXRhOiB0cnVlXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHNjcmVlbjogU2NyZWVuLCBlbEZvcm06IEhUTUxGb3JtRWxlbWVudCwgZ2lneWFDbGFzczogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHJlUG9wdWxhdGVEYXRhRnJvbSgpIHtcbiAgICAgICAgcmV0dXJuIFsnZ2V0QWNjb3VudEluZm8nLCAnZ2V0QWNjb3VudEluZm8ucHJvZmlsZSddO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICBzdXBlci5nZXROZWVkZWREYXRhKCksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2V0U2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRBY2NvdW50SW5mbzoge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGU6ICdlbWFpbHMscHJvZmlsZSxkYXRhLHN1YnNjcmlwdGlvbnMscHJlZmVyZW5jZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZUNvbW11bmljYXRpb25zOiAnYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSkgYXMgTmV3c2xldHRlckRhdGE7XG4gICAgfVxuICAgIHB1YmxpYyBwZXJmb3JtU3VibWl0KG9QYXJhbXM6IGFueSkge1xuICAgICAgICBsZXQgcmVnVG9rID0gdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5yZWdUb2tlbiB8fCB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbjtcblxuICAgICAgICBpZiAodGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKS5nZXRBY2NvdW50SW5mby5zdGF0dXMgPT09ICdPSycgfHwgcmVnVG9rKSB7XG4gICAgICAgICAgICBvUGFyYW1zID0gdGhpcy5zZXRTdWJzY3JpcHRpb25zKG9QYXJhbXMsIHJlZ1Rvayk7XG4gICAgICAgICAgICBzdXBlci5wZXJmb3JtU3VibWl0KG9QYXJhbXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuaW5pdFJlZ2lzdHJhdGlvbih7XG4gICAgICAgICAgICAgICAgaXNMaXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiByZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnJlZ1Rva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvUGFyYW1zID0gdGhpcy5zZXRTdWJzY3JpcHRpb25zKG9QYXJhbXMsIHJlcy5yZWdUb2tlbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3VwZXIucGVyZm9ybVN1Ym1pdChvUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFN1YnNjcmlwdGlvbnMob1BhcmFtczogYW55LCByZWdUb2tlbj86IGFueSkge1xuICAgICAgICBpZiAocmVnVG9rZW4pIHtcbiAgICAgICAgICAgIG9QYXJhbXNbJ3JlZ1Rva2VuJ10gPSByZWdUb2tlbjtcbiAgICAgICAgICAgIC8vIHRoaXMgc2hvdWxkIHN0b3JlIHRoZSByZWdUb2tlbiBmb3IgZnV0dXJlIHNjcmVlbnMgaW4gdGhlIHNhbWUgc2NyZWVuIHNldC4uLlxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5yZWdUb2tlbiA9IHJlZ1Rva2VuO1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW4gPSByZWdUb2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvUGFyYW1zO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5zZXRBY2NvdW50SW5mbztcbiAgICB9XG5cbiAgICBwdWJsaWMgb25BZnRlclN1Ym1pdChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtRGF0YTogYW55ID0gdGhpcy5nZXRGb3JtRGF0YSh0cnVlLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIGlmIChmb3JtRGF0YS5lbWFpbCkge1xuICAgICAgICAgICAgICAgIGlmICghZm9ybURhdGEucHJvZmlsZSkgZm9ybURhdGEucHJvZmlsZSA9IHt9O1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLnByb2ZpbGUuZW1haWwgPSBmb3JtRGF0YS5lbWFpbDtcbiAgICAgICAgICAgICAgICBkZWxldGUgZm9ybURhdGEuZW1haWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5vbkFjY291bnRJbmZvKGZvcm1EYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyLm9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZXF1aXJlZEZpZWxkcygpOiBJTWFwPGJvb2xlYW4+IHtcbiAgICAgICAgbGV0IHJlcXVpcmVkRmllbGRzID0gc3VwZXIucmVxdWlyZWRGaWVsZHMoKTtcbiAgICAgICAgcmVxdWlyZWRGaWVsZHNbJ2VtYWlsJ10gPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiByZXF1aXJlZEZpZWxkcztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2NoZW1hVmFsaWRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KE5ld3NsZXR0ZXJTaWdudXBGb3JtKTtcbiIsImltcG9ydCB7IERlZXBGcmVlemUsIElNYXAgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcblxuZXhwb3J0IHZhciBPbmVBY2NvdW50U3Vic2NyaXB0aW9uX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtc3Vic2NyaWJlLW9uZS1hY2NvdW50LWZvcm0nLFxuICAgIGF1dGhvcml6YXRpb25fZGV0YWlsc19sb2NhdGlvbnM6ICdhY2NvdW50cy91cGRhdGUnLFxuICAgIGF1dGhvcml6YXRpb25fZGV0YWlsc190eXBlOiAnZ3Vlc3Q6c2lnbnVwJyxcbiAgICBhdXRob3JpemF0aW9uX2RldGFpbHNfZ3JhbnRfdHlwZTogJ2dpZ3lhLmNvbS9pZGVudGlmaWVyJ1xufTtcbmV4cG9ydCB0eXBlIE9uZUFjY291bnRHdWVzdERhdGEgPSB7XG4gICAgZ2V0U2NoZW1hOiB7IHBhcmFtczogYW55IH07XG4gICAgZ2V0QWNjb3VudEluZm86IHsgcGFyYW1zOiBhbnkgfTtcbn07XG5EZWVwRnJlZXplKE9uZUFjY291bnRTdWJzY3JpcHRpb25fQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBPbmVBY2NvdW50U3Vic2NyaXB0aW9uRm9ybSBleHRlbmRzIEJhc2VGb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IE9uZUFjY291bnRTdWJzY3JpcHRpb25fQ09OU1RTO1xuXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IHNldHRpbmdzID0ge1xuICAgICAgICBzdXBwb3J0Q29uc2VudERhdGE6IHRydWVcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3Ioc2NyZWVuOiBTY3JlZW4sIGVsRm9ybTogSFRNTEZvcm1FbGVtZW50LCBnaWd5YUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoc2NyZWVuLCBlbEZvcm0sIGdpZ3lhQ2xhc3MpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZURhdGFGcm9tKCkge1xuICAgICAgICByZXR1cm4gWydnZXRBY2NvdW50SW5mbycsICdnZXRBY2NvdW50SW5mby5wcm9maWxlJ107XG4gICAgfVxuICAgIHB1YmxpYyBnZXROZWVkZWREYXRhKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLmdldE5lZWRlZERhdGEoKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBnZXRTY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldEFjY291bnRJbmZvOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogJ2VtYWlscyxwcm9maWxlLGRhdGEsc3Vic2NyaXB0aW9ucyxwcmVmZXJlbmNlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlQ29tbXVuaWNhdGlvbnM6ICdhbGwnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKSBhcyBPbmVBY2NvdW50R3Vlc3REYXRhO1xuICAgIH1cbiAgICBwdWJsaWMgcGVyZm9ybVN1Ym1pdChvUGFyYW1zOiBhbnkpIHtcbiAgICAgICAgbGV0IHJlZ1RvayA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXMucmVnVG9rZW4gfHwgdGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW47XG5cbiAgICAgICAgaWYgKHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCkuZ2V0QWNjb3VudEluZm8uc3RhdHVzID09PSAnT0snIHx8IHJlZ1Rvaykge1xuICAgICAgICAgICAgb1BhcmFtcyA9IHRoaXMuc2V0U3Vic2NyaXB0aW9ucyhvUGFyYW1zLCByZWdUb2spO1xuICAgICAgICAgICAgc3VwZXIucGVyZm9ybVN1Ym1pdChvUGFyYW1zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhOiBhbnkgPSB0aGlzLmdldEZvcm1EYXRhKHRydWUsIGZhbHNlLCB0cnVlKTtcblxuICAgICAgICAgICAgaWYgKGZvcm1EYXRhICYmIGZvcm1EYXRhLnByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5hY2NvdW50cy5pZGVudGl0eS5hdXRob3JpemUoe1xuICAgICAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uX2RldGFpbHM6XG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZvcm1EYXRhLnByb2ZpbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5nZXRWYWx1ZU9yTnVsbChmb3JtRGF0YS5lbWFpbCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IGZvcm1EYXRhLnN1YnNjcmlwdGlvbnMgPyB7IC4uLmZvcm1EYXRhLnN1YnNjcmlwdGlvbnMgfTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBmb3JtRGF0YS5kYXRhID8geyAuLi5mb3JtRGF0YS5kYXRhIH06IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPbmVBY2NvdW50U3Vic2NyaXB0aW9uX0NPTlNUUy5hdXRob3JpemF0aW9uX2RldGFpbHNfbG9jYXRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBPbmVBY2NvdW50U3Vic2NyaXB0aW9uX0NPTlNUUy5hdXRob3JpemF0aW9uX2RldGFpbHNfdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBncmFudF90eXBlOiBPbmVBY2NvdW50U3Vic2NyaXB0aW9uX0NPTlNUUy5hdXRob3JpemF0aW9uX2RldGFpbHNfZ3JhbnRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmFjY2Vzc190b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLl8uYXBpQWRhcHRlcnMud2ViLnRva2VuU3RvcmUuc2V0QmVhcmVyVG9rZW4ocmVzLmFjY2Vzc190b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb1BhcmFtcyA9IHRoaXMuc2V0U3Vic2NyaXB0aW9ucyhvUGFyYW1zLCByZXMuYWNjZXNzX3Rva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cGVyLnBlcmZvcm1TdWJtaXQob1BhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFN1YnNjcmlwdGlvbnMob1BhcmFtczogYW55LCByZWdUb2tlbj86IGFueSkge1xuICAgICAgICBpZiAocmVnVG9rZW4pIHtcbiAgICAgICAgICAgIG9QYXJhbXNbJ3JlZ1Rva2VuJ10gPSByZWdUb2tlbjtcbiAgICAgICAgICAgIC8vIHRoaXMgc2hvdWxkIHN0b3JlIHRoZSByZWdUb2tlbiBmb3IgZnV0dXJlIHNjcmVlbnMgaW4gdGhlIHNhbWUgc2NyZWVuIHNldC4uLlxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5yZWdUb2tlbiA9IHJlZ1Rva2VuO1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEucmVnVG9rZW4gPSByZWdUb2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvUGFyYW1zO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5zZXRBY2NvdW50SW5mbztcbiAgICB9XG5cbiAgICBwdWJsaWMgb25BZnRlclN1Ym1pdChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtRGF0YTogYW55ID0gdGhpcy5nZXRGb3JtRGF0YSh0cnVlLCBmYWxzZSk7XG5cbiAgICAgICAgICAgIGlmIChmb3JtRGF0YS5lbWFpbCkge1xuICAgICAgICAgICAgICAgIGlmICghZm9ybURhdGEucHJvZmlsZSkgZm9ybURhdGEucHJvZmlsZSA9IHt9O1xuICAgICAgICAgICAgICAgIGZvcm1EYXRhLnByb2ZpbGUuZW1haWwgPSBmb3JtRGF0YS5lbWFpbDtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5wcm9maWxlLmZpcnN0TmFtZSA9IHRoaXMuZ2V0VmFsdWVPck51bGwoZm9ybURhdGEuZmlyc3ROYW1lKTtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5wcm9maWxlLmxhc3ROYW1lID0gdGhpcy5nZXRWYWx1ZU9yTnVsbChmb3JtRGF0YS5sYXN0TmFtZSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGZvcm1EYXRhLmVtYWlsO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBmb3JtRGF0YS5maXJzdE5hbWU7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGZvcm1EYXRhLmxhc3ROYW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQub25BY2NvdW50SW5mbyhmb3JtRGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBnaWd5YS5fLmFwaUFkYXB0ZXJzLndlYi50b2tlblN0b3JlLnJlbW92ZUJlYXJlclRva2VuKCk7XG5cbiAgICAgICAgc3VwZXIub25BZnRlclN1Ym1pdChyZXNwb25zZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlcXVpcmVkRmllbGRzKCk6IElNYXA8Ym9vbGVhbj4ge1xuICAgICAgICBsZXQgcmVxdWlyZWRGaWVsZHMgPSBzdXBlci5yZXF1aXJlZEZpZWxkcygpO1xuICAgICAgICByZXF1aXJlZEZpZWxkc1snZW1haWwnXSA9IHRydWU7XG4gICAgICAgIHJlcXVpcmVkRmllbGRzWydmaXJzdGFOYW1lJ10gPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiByZXF1aXJlZEZpZWxkcztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2NoZW1hVmFsaWRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFZhbHVlT3JOdWxsKHZhbHVlOnN0cmluZyk6IHN0cmluZyB8IG51bGwgeyBcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9PSAnJyA/IHZhbHVlIDogbnVsbCBcbiAgICAgICAgfVxuICAgICAgICBcbn1cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoT25lQWNjb3VudFN1YnNjcmlwdGlvbkZvcm0pO1xuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgQmFzZUZvcm0sIElOZWVkZWREYXRhIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5cbmV4cG9ydCB2YXIgT3JnUmVnaXN0ZXJGb3JtX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtb3JnLXJlZ2lzdGVyLWZvcm0nLFxufTtcblxuRGVlcEZyZWV6ZShPcmdSZWdpc3RlckZvcm1fQ09OU1RTKTtcblxuZXhwb3J0IGNsYXNzIE9yZ1JlZ2lzdGVyRm9ybSBleHRlbmRzIEJhc2VGb3JtIHtcblxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gT3JnUmVnaXN0ZXJGb3JtX0NPTlNUUztcblxuICAgIHByb3RlY3RlZCByZWFkb25seSBzZXR0aW5ncyA9IHtcbiAgICAgICAgc3VwcG9ydENvbnNlbnREYXRhOiB0cnVlXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHNjcmVlbjogU2NyZWVuLCBlbEZvcm06IEhUTUxGb3JtRWxlbWVudCwgZ2lneWFDbGFzczogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcbiAgICB9XG5cbiAgICAvLyBtZXJnZXMgdGhlIFwib3JnYW5pemF0aW9uU2NoZW1hXCIgYW5kIFwicmVxdWVzdGVyU2NoZW1hXCIgZmllbGRzXG4gICAgLy8gZnJvbSB0aGUgZ2V0T3JnYW5pemF0aW9uU2NoZW1hIHJlc3BvbnNlXG4gICAgLy8gaW50byB0aGUgXCJnZW5lcmFsXCIgc2NoZW1hIChnZXRTY2hlbWEgcmVzcG9uc2UpXG4gICAgcHJpdmF0ZSBtZXJnZU9yZ1NjaGVtYUludG9NYWluU2NoZW1hKG1haW5TY2hlbWEsIG9yZ1NjaGVtYSl7XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW21haW5TY2hlbWEsIHtcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvblNjaGVtYTogb3JnU2NoZW1hLm9yZ2FuaXphdGlvblNjaGVtYSxcbiAgICAgICAgICAgIHJlcXVlc3RlclNjaGVtYTogb3JnU2NoZW1hLnJlcXVlc3RlclNjaGVtYVxuICAgICAgICB9XSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHByZVBvcHVsYXRlRGF0YUZyb20oKSB7XG4gICAgICAgIHJldHVybiBbJ2dldE9yZ2FuaXphdGlvblNjaGVtYSddO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROZWVkZWREYXRhKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlPElOZWVkZWREYXRhPihbXG4gICAgICAgICAgICBzdXBlci5nZXROZWVkZWREYXRhKCksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZ2V0T3JnYW5pemF0aW9uU2NoZW1hOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcjogb3JnU2NoZW1hID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1haW5TY2hlbWEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpLmdldFNjaGVtYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYWluU2NoZW1hKSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpLmdldFNjaGVtYSA9IHRoaXMubWVyZ2VPcmdTY2hlbWFJbnRvTWFpblNjaGVtYShtYWluU2NoZW1hLCBvcmdTY2hlbWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yZ1NjaGVtYTsgLy8gcmV0dXJuIGdldE9yZ1NjaGVtYVJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRTY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyOiBtYWluU2NoZW1hID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9yZ1NjaGVtYSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCkuZ2V0T3JnYW5pemF0aW9uU2NoZW1hO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVyZ2VPcmdTY2hlbWFJbnRvTWFpblNjaGVtYShtYWluU2NoZW1hLCBvcmdTY2hlbWEgfHwge30pOyAvLyByZXR1cm4gdGhlIG1lcmdlZCBzY2hlbWFcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzY2hlbWFWYWxpZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5iMmIucmVnaXN0ZXJPcmdhbml6YXRpb247XG4gICAgfVxufVxuXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KE9yZ1JlZ2lzdGVyRm9ybSk7XG4iLCJpbXBvcnQge0RlZXBGcmVlemV9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSBcIi4uL0Jhc2VGb3JtXCI7XG5pbXBvcnQge090cFZlcmlmaWNhdGlvbkJhc2VGb3JtfSBmcm9tIFwiLi9PdHBWZXJpZmljYXRpb25CYXNlRm9ybVwiO1xuZXhwb3J0IHZhciBPdHBMb2dpbkZvcm1fQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1vdHAtbG9naW4tZm9ybScsXG59O1xuXG5EZWVwRnJlZXplKE90cExvZ2luRm9ybV9DT05TVFMpO1xuXG5leHBvcnQgY2xhc3MgT3RwTG9naW5Gb3JtIGV4dGVuZHMgT3RwVmVyaWZpY2F0aW9uQmFzZUZvcm0ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gT3RwTG9naW5Gb3JtX0NPTlNUUztcbiAgICBwdWJsaWMgc3VibWl0QXBpKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMub3RwLmxvZ2luO1xuICAgIH1cblxuICAgIHB1YmxpYyBwZXJmb3JtU3VibWl0KG9QYXJhbXM6IGFueSkge1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5maW5hbGl6ZVJlZ2lzdHJhdGlvbk5lZWRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBzdXBlci5wZXJmb3JtU3VibWl0KG9QYXJhbXMpO1xuICAgIH1cbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShPdHBMb2dpbkZvcm0pO1xuXG4vLyByZWdpb24gbW9iaWxlLWxvZ2luIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbi8vIGZvciBvbGQgc2NyZWVuIHNldHMgdGhhdCB1c2VzICdnaWd5YS1tb2JpbGUtdmVyaWZpY2F0aW9uLWZvcm0nXG5leHBvcnQgdmFyIE1vYmlsZUxvZ2luVmVyaWZpY2F0aW9uRm9ybV9DT05TVFMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLW1vYmlsZS12ZXJpZmljYXRpb24tZm9ybScsXG59O1xuXG5EZWVwRnJlZXplKE1vYmlsZUxvZ2luVmVyaWZpY2F0aW9uRm9ybV9DT05TVFMpO1xuXG5leHBvcnQgY2xhc3MgTW9iaWxlTG9naW5WZXJpZmljYXRpb25Gb3JtIGV4dGVuZHMgT3RwTG9naW5Gb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IE1vYmlsZUxvZ2luVmVyaWZpY2F0aW9uRm9ybV9DT05TVFM7XG59XG5cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoTW9iaWxlTG9naW5WZXJpZmljYXRpb25Gb3JtKTtcbi8vIGVuZHJlZ2lvblxuIiwiaW1wb3J0IHsgSU5lZWRlZERhdGEgfSBmcm9tICcuLy4uL0Jhc2VGb3JtJztcbmltcG9ydCB7RGVlcEZyZWV6ZX0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQge0Jhc2VGb3JtfSBmcm9tIFwiLi4vQmFzZUZvcm1cIjtcblxuZXhwb3J0IHZhciBPdHBTZW5kQ29kZUZvcm1fQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1vdHAtc2VuZC1jb2RlLWZvcm0nLFxufTtcblxuRGVlcEZyZWV6ZShPdHBTZW5kQ29kZUZvcm1fQ09OU1RTKTtcblxuZXhwb3J0IGNsYXNzIE90cFNlbmRDb2RlRm9ybSBleHRlbmRzIEJhc2VGb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IE90cFNlbmRDb2RlRm9ybV9DT05TVFM7XG5cbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgc2V0dGluZ3MgPSB7XG4gICAgICAgIHN1cHBvcnRDb25zZW50RGF0YTogdHJ1ZVxuICAgIH07XG5cbiAgICBwdWJsaWMgc3VibWl0QXBpKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMub3RwLnNlbmRDb2RlO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZURhdGFGcm9tKCk6IGFueSB7XG4gICAgICAgIHJldHVybiBbJ2dldEFjY291bnRJbmZvJ107XG4gICAgfVxuXG4gICAgcHVibGljIG9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEub3RwRGF0YS52VG9rZW4gPSByZXNwb25zZVsndlRva2VuJ107XG4gICAgICAgIHN1cGVyLm9uQWZ0ZXJTdWJtaXQocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLnNwZWNpYWxGaWVsZHMoKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHVibGljIHBlcmZvcm1TdWJtaXQob1BhcmFtczogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3NhdmVTcGVjaWFsRmllbGRzSW5DYWNoZSgpO1xuICAgICAgICBzdXBlci5wZXJmb3JtU3VibWl0KG9QYXJhbXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3NhdmVTcGVjaWFsRmllbGRzSW5DYWNoZSgpIHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLmdldEZvcm1EYXRhKHRydWUsIHRydWUsIHRydWUpO1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpLmdldEFjY291bnRJbmZvID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKS5nZXRBY2NvdW50SW5mbyB8fCB7fTtcbiAgICAgICAgY29uc3Qgc3BlY2lhbEZpZWxkcyA9IHRoaXMuc3BlY2lhbEZpZWxkcygpO1xuICAgICAgICBPYmplY3Qua2V5cyhzcGVjaWFsRmllbGRzKVxuICAgICAgICAgICAgLmZpbHRlcihzcGVjaWFsRmllbGQgPT4gQm9vbGVhbihzcGVjaWFsRmllbGRzW3NwZWNpYWxGaWVsZF0pKVxuICAgICAgICAgICAgLmZvckVhY2goc3BlY2lhbEZpZWxkID0+IHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCkuZ2V0QWNjb3VudEluZm8sIHtbc3BlY2lhbEZpZWxkXTogZm9ybURhdGFbc3BlY2lhbEZpZWxkXX0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlZmF1bHRTdWJtaXRQYXJhbXMoKToge30ge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLmRlZmF1bHRTdWJtaXRQYXJhbXMoKSxcbiAgICAgICAgICAgIHtsYW5nOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmNvbW11bmljYXRpb25MYW5nfVxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2NoZW1hVmFsaWRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZTxJTmVlZGVkRGF0YT4oW1xuICAgICAgICAgICAgc3VwZXIuZ2V0TmVlZGVkRGF0YSgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGdldFNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH1cbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShPdHBTZW5kQ29kZUZvcm0pO1xuXG4vLyByZWdpb24gbW9iaWxlLWxvZ2luIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbi8vIGZvciBvbGQgc2NyZWVuIHNldHMgdGhhdCB1c2VzICdnaWd5YS1tb2JpbGUtdmVyaWZpY2F0aW9uLWZvcm0nXG5leHBvcnQgdmFyIE1vYmlsZUxvZ2luRm9ybV9DT05TVFMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLW1vYmlsZS1sb2dpbi1mb3JtJyxcbn07XG5cbkRlZXBGcmVlemUoTW9iaWxlTG9naW5Gb3JtX0NPTlNUUyk7XG5cbmV4cG9ydCBjbGFzcyBNb2JpbGVMb2dpbkZvcm0gZXh0ZW5kcyBPdHBTZW5kQ29kZUZvcm0ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gTW9iaWxlTG9naW5Gb3JtX0NPTlNUUztcbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShNb2JpbGVMb2dpbkZvcm0pO1xuLy8gZW5kcmVnaW9uXG4iLCJpbXBvcnQge0RlZXBGcmVlemV9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSBcIi4uL0Jhc2VGb3JtXCI7XG5pbXBvcnQge090cFZlcmlmaWNhdGlvbkJhc2VGb3JtfSBmcm9tIFwiLi9PdHBWZXJpZmljYXRpb25CYXNlRm9ybVwiO1xuXG5leHBvcnQgdmFyIE90cFVwZGF0ZUZvcm1fQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1vdHAtdXBkYXRlLWZvcm0nLFxufTtcblxuRGVlcEZyZWV6ZShPdHBVcGRhdGVGb3JtX0NPTlNUUyk7XG5cbmV4cG9ydCBjbGFzcyBPdHBVcGRhdGVGb3JtIGV4dGVuZHMgT3RwVmVyaWZpY2F0aW9uQmFzZUZvcm0ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gT3RwVXBkYXRlRm9ybV9DT05TVFM7XG5cbiAgICBwdWJsaWMgc3VibWl0QXBpKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMub3RwLnVwZGF0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGVyZm9ybVN1Ym1pdChvUGFyYW1zOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gc3VwZXIucGVyZm9ybVN1Ym1pdChvUGFyYW1zKTtcbiAgICB9XG59XG5cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoT3RwVXBkYXRlRm9ybSk7XG4iLCJpbXBvcnQge0Jhc2VGb3JtfSBmcm9tIFwiLi4vQmFzZUZvcm1cIjtcbmltcG9ydCB7R1NFcnJvcnN9IGZyb20gXCIuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9yc1wiO1xuaW1wb3J0IHsgSUZvcm1SZXNwb25zZSB9IGZyb20gXCIuLi9TY3JlZW5TZXRQbHVnaW5cIjtcbmltcG9ydCB7ZW5kc1dpdGh9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgT3RwVmVyaWZpY2F0aW9uQmFzZUZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG4gICAgcHVibGljIHNwZWNpYWxGaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xuICAgICAgICAgICAgc3VwZXIuc3BlY2lhbEZpZWxkcygpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvZGU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRFcnJvcktleShyZXNwb25zZTogSUZvcm1SZXNwb25zZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGVycm9yQ29kZSA9IE51bWJlcihyZXNwb25zZS5lcnJvckNvZGUpO1xuXG4gICAgICAgIGlmIChlcnJvckNvZGUgPT09IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFICYmIHJlc3BvbnNlLmVycm9yRGV0YWlscykge1xuICAgICAgICAgICAgaWYgKGVuZHNXaXRoKHJlc3BvbnNlLmVycm9yRGV0YWlscywgJ1Rva2VuIGhhcyBiZWVuIHJldm9rZWQnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnb3RwX2NvZGVfZXhwaXJlZCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbmRzV2l0aChyZXNwb25zZS5lcnJvckRldGFpbHMsICdwaG9uZU51bWJlciBhbHJlYWR5IGV4aXN0cycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdwaG9uZV9udW1iZXJfZXhpc3RzJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVuZHNXaXRoKHJlc3BvbnNlLmVycm9yRGV0YWlscywgJ2NvZGUnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAncGxlYXNlX2VudGVyX2FfdmFsaWRfY29kZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0RXJyb3JLZXkocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWZhdWx0U3VibWl0UGFyYW1zKCk6IHt9IHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICBzdXBlci5kZWZhdWx0U3VibWl0UGFyYW1zKCksXG4gICAgICAgICAgICB7dlRva2VuOiB0aGlzLl9zY3JlZW5TZXQuZGF0YS5vdHBEYXRhLnZUb2tlbn1cbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIG9uQ29kZVNlbnQocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKE51bWJlcihyZXNwb25zZT8uZXJyb3JDb2RlKSAhPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5kaXNwbGF5U2VydmVyRXJyb3JzKHJlc3BvbnNlLCB0aGlzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZT8udlRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5vdHBEYXRhLnZUb2tlbiA9IHJlc3BvbnNlWyd2VG9rZW4nXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NjcmVlblNldC5kaXNwbGF5U2VydmVyRXJyb3JzKHtcbiAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuSU5WQUxJRF9QQVJBTUVURVJfVkFMVUVcbiAgICAgICAgfSwgdGhpcyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7QmFzZUZvcm19IGZyb20gXCIuLi9CYXNlRm9ybVwiO1xuaW1wb3J0IHtPdHBWZXJpZmljYXRpb25CYXNlRm9ybX0gZnJvbSBcIi4vT3RwVmVyaWZpY2F0aW9uQmFzZUZvcm1cIjtcblxuZXhwb3J0IHZhciBPdHBWZXJpZnlGb3JtX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtb3RwLXZlcmlmeS1mb3JtJyxcbn07XG5cbkRlZXBGcmVlemUoT3RwVmVyaWZ5Rm9ybV9DT05TVFMpO1xuXG5leHBvcnQgY2xhc3MgT3RwVmVyaWZ5Rm9ybSBleHRlbmRzIE90cFZlcmlmaWNhdGlvbkJhc2VGb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IE90cFZlcmlmeUZvcm1fQ09OU1RTO1xuXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLmF1dGgub3RwLmF1dGhlbnRpY2F0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25BZnRlclN1Ym1pdChyZXNwb25zZSkge1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5vdHBEYXRhLmFjY2Vzc1Rva2VuID0gcmVzcG9uc2VbJ2FjY2Vzc190b2tlbiddO1xuICAgICAgICBzdXBlci5vbkFmdGVyU3VibWl0KHJlc3BvbnNlKTtcbiAgICB9XG59XG5cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoT3RwVmVyaWZ5Rm9ybSk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHsgSVNjcmVlblNldFBhcmFtcyB9IGZyb20gJy4uL1NjcmVlblNldFBsdWdpbic7XG5pbXBvcnQgeyBMb2dpbkZvcm0gfSBmcm9tICcuL0xvZ2luRm9ybSc7XG5pbXBvcnQge0Jhc2VGb3JtfSBmcm9tICcuLi9CYXNlRm9ybSc7XG5cbmV4cG9ydCB2YXIgUGFzc3dvcmRBdXRoTWV0aG9kRm9ybV9DT05TVFMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLXBhc3N3b3JkLWF1dGgtbWV0aG9kLWZvcm0nLFxuICAgIGF1dGhNZXRob2Q6ICdwYXNzd29yZCdcbn07XG5cbkRlZXBGcmVlemUoUGFzc3dvcmRBdXRoTWV0aG9kRm9ybV9DT05TVFMpO1xuXG5leHBvcnQgY2xhc3MgUGFzc3dvcmRBdXRoTWV0aG9kRm9ybSBleHRlbmRzIExvZ2luRm9ybSB7XG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFBhc3N3b3JkQXV0aE1ldGhvZEZvcm1fQ09OU1RTO1xuXG4gICAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5hdXRoLnNldFByZWZlcnJlZExvZ2luTWV0aG9kKFBhc3N3b3JkQXV0aE1ldGhvZEZvcm1fQ09OU1RTLmF1dGhNZXRob2QsIGFwaURhdGE/LmlkZW50aWZpZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKTogKHBhcmFtczogSVNjcmVlblNldFBhcmFtcywgZm9ybURhdGEsIG9wdGlvbnMsIGRlZmF1bHRQYXJhbXMpID0+IHZvaWQge1xuICAgICAgICByZXR1cm4gKHBhcmFtcywgZm9ybURhdGEsIG9wdGlvbnMsIGRlZmF1bHRQYXJhbXMpOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3NjcmVlblNldD8uZGF0YT8uYVRva2VuKSB7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEgPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2Zvcm1EYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgIGFUb2tlbjogdGhpcy5fc2NyZWVuU2V0Py5kYXRhPy5hVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBmb3JtRGF0YS5wYXNzd29yZFxuICAgICAgICAgICAgICAgIH1dKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEgPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2Zvcm1EYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2luSUQ6IGFwaURhdGE/LmxvZ2luSUQgfHwgYXBpRGF0YT8uaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGZvcm1EYXRhLnBhc3N3b3JkXG4gICAgICAgICAgICAgICAgfV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMubG9naW4ocGFyYW1zLCBmb3JtRGF0YSwgb3B0aW9ucywgZGVmYXVsdFBhcmFtcyk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KFBhc3N3b3JkQXV0aE1ldGhvZEZvcm0pO1xuIiwiXG5pbXBvcnQgeyBJRm9ybVJlc3BvbnNlLCBJU2NyZWVuU2V0UGFyYW1zIH0gZnJvbSBcIi4uL1NjcmVlblNldFBsdWdpblwiO1xuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tIFwiLi4vQmFzZUZvcm1cIjtcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzXCI7XG5cbmV4cG9ydCBjbGFzcyBQYXNzd29yZGxlc3NGb3JtIGV4dGVuZHMgQmFzZUZvcm0ge1xuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLnNwZWNpYWxGaWVsZHMoKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsb2dpbklEOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpOiAocGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zLCBmb3JtRGF0YSwgb3B0aW9ucywgZGVmYXVsdFBhcmFtcykgPT4gdm9pZCB7XG4gICAgICAgIHJldHVybiAocGFyYW1zLCBmb3JtRGF0YSwgb3B0aW9ucywgZGVmYXVsdFBhcmFtcyk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgdGhpcy5zYXZlSW5BcGlEYXRhKHtcbiAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiBmb3JtRGF0YT8ubG9naW5JRCB8fCBmb3JtRGF0YT8uaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICBsb2dpbklEOiBmb3JtRGF0YT8ubG9naW5JRCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuYXV0aC5nZXRNZXRob2RzKHtcbiAgICAgICAgICAgICAgICBhVG9rZW46IHRoaXMuX3NjcmVlblNldD8uZGF0YT8uYVRva2VuLFxuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IGZvcm1EYXRhPy5sb2dpbklEIHx8IGZvcm1EYXRhPy5pZGVudGlmaWVyLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBvcHRpb25zLmNhbGxiYWNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RXJyb3JLZXkocmVzcG9uc2U6IElGb3JtUmVzcG9uc2UpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZXJyb3JDb2RlID09PSBHU0Vycm9ycy5OT1RfRk9VTkRcbiAgICAgICAgICAgID8gJ2ludmFsaWRfbG9naW5faWRlbnRpZmllcidcbiAgICAgICAgICAgIDogc3VwZXIuZ2V0RXJyb3JLZXkocmVzcG9uc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbkFmdGVyU3VibWl0KHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMuc2F2ZUluQXBpRGF0YSh7IGF1dGhNZXRob2RzOiByZXNwb25zZS5tZXRob2RzIH0pO1xuICAgICAgICBzdXBlci5vbkFmdGVyU3VibWl0KHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNhdmVJbkFwaURhdGEob2JqOiB7W2tleTogc3RyaW5nXTogYW55fSkge1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKSB8fCB7fTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihhcGlEYXRhLCBvYmopO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSBcIi4uL0Jhc2VGb3JtXCI7XG5pbXBvcnQge1Bhc3N3b3JkbGVzc0Zvcm19IGZyb20gJy4vUGFzc3dvcmRsZXNzRm9ybSc7XG5cbmV4cG9ydCB2YXIgUGFzc3dvcmRsZXNzTG9naW5Gb3JtX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtcGFzc3dvcmRsZXNzLWxvZ2luLWZvcm0nLFxufTtcblxuRGVlcEZyZWV6ZShQYXNzd29yZGxlc3NMb2dpbkZvcm1fQ09OU1RTKTtcblxuZXhwb3J0IGNsYXNzIFBhc3N3b3JkbGVzc0xvZ2luRm9ybSBleHRlbmRzIFBhc3N3b3JkbGVzc0Zvcm0ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUGFzc3dvcmRsZXNzTG9naW5Gb3JtX0NPTlNUUztcbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShQYXNzd29yZGxlc3NMb2dpbkZvcm0pO1xuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tIFwiLi4vQmFzZUZvcm1cIjtcbmltcG9ydCB7UGFzc3dvcmRsZXNzRm9ybX0gZnJvbSAnLi9QYXNzd29yZGxlc3NGb3JtJztcblxuZXhwb3J0IHZhciBQYXNzd29yZGxlc3NSZWdpc3RlckZvcm1fQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1wYXNzd29yZGxlc3MtcmVnaXN0ZXItZm9ybScsXG59O1xuXG5EZWVwRnJlZXplKFBhc3N3b3JkbGVzc1JlZ2lzdGVyRm9ybV9DT05TVFMpO1xuXG5leHBvcnQgY2xhc3MgUGFzc3dvcmRsZXNzUmVnaXN0ZXJGb3JtIGV4dGVuZHMgUGFzc3dvcmRsZXNzRm9ybSB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBQYXNzd29yZGxlc3NSZWdpc3RlckZvcm1fQ09OU1RTO1xufVxuXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KFBhc3N3b3JkbGVzc1JlZ2lzdGVyRm9ybSk7XG4iLCJpbXBvcnQge0RlZXBGcmVlemV9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgQmFzZUZvcm0sIElOZWVkZWREYXRhIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5pbXBvcnQgeyBMb2dpbk1vZGVzLCBDb25mbGljdEhhbmRsaW5nIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Mb2dpbk1vZGVzJztcbmltcG9ydCB7SUZvcm1SZXNwb25zZX0gZnJvbSBcIi4uL1NjcmVlblNldFBsdWdpblwiO1xuaW1wb3J0IEdTRXJyb3JzID0gZ2lneWEuR1NFcnJvcnM7XG5cbmV4cG9ydCB2YXIgUHJvZmlsZUZvcm1fQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1wcm9maWxlLWZvcm0nLFxuICAgIHNwZWNpYWxGaWVsZHM6IHtcbiAgICAgICAgdXNlcm5hbWU6IHRydWUsXG4gICAgICAgIG9sZFBhc3N3b3JkOiB0cnVlLFxuICAgICAgICBwYXNzd29yZDogdHJ1ZSxcbiAgICAgICAgbmV3UGFzc3dvcmQ6IHRydWUsXG4gICAgICAgIHBhc3N3b3JkUmV0eXBlOiB0cnVlLFxuICAgICAgICBzZWNyZXRRdWVzdGlvbjogdHJ1ZSxcbiAgICAgICAgc2VjcmV0QW5zd2VyOiB0cnVlLFxuICAgICAgICBhZGRMb2dpbkVtYWlsczogdHJ1ZSxcbiAgICAgICAgcmVtb3ZlTG9naW5FbWFpbHM6IHRydWUsXG4gICAgICAgIHBob25lTnVtYmVyOiB0cnVlXG4gICAgfSxcbn07XG5EZWVwRnJlZXplKFByb2ZpbGVGb3JtX0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgUHJvZmlsZUZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBQcm9maWxlRm9ybV9DT05TVFM7XG4gICAgcHJpdmF0ZSByZXF1aXJlZFByb2ZpbGVGaWVsZHMgPSBbJ3NhbWxEYXRhJywgJ2xvY2FsZSddO1xuXG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IHNldHRpbmdzID0ge1xuICAgICAgICBzdXBwb3J0Q29uc2VudERhdGE6IHRydWVcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3Ioc2NyZWVuOiBTY3JlZW4sIGVsRm9ybTogSFRNTEZvcm1FbGVtZW50LCBnaWd5YUNsYXNzOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoc2NyZWVuLCBlbEZvcm0sIGdpZ3lhQ2xhc3MpO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZURhdGFGcm9tKCkge1xuICAgICAgICBpZiAoZ2lneWEudXRpbHMudG9nZ2xlcy5pc09uKCdtYXBwZWRGaWVsZHNOb0NvbmZsaWN0cycpKXtcbiAgICAgICAgICAgIHJldHVybiBbJ2dldEFjY291bnRJbmZvJywgJ2dldEFjY291bnRJbmZvLnByb2ZpbGUnLCAnZ2V0QWNjb3VudEluZm8ubG9naW5JRHMnXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWydnZXRBY2NvdW50SW5mbycsICdnZXRBY2NvdW50SW5mby5wcm9maWxlJywgJ2dldEFjY291bnRJbmZvLnN1YnNjcmlwdGlvbnMnLCAnZ2V0QWNjb3VudEluZm8ubG9naW5JRHMnLCAnZ2V0QWNjb3VudEluZm8ucHJlZmVyZW5jZXMnXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZTxJTmVlZGVkRGF0YT4oW1xuICAgICAgICAgICAgc3VwZXIuZ2V0TmVlZGVkRGF0YSgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGdldFNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0QWNjb3VudEluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiAnbG9naW5JRHMsZW1haWxzLHByb2ZpbGUsZGF0YSxzdWJzY3JpcHRpb25zLHByZWZlcmVuY2VzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVDb21tdW5pY2F0aW9uczogJ2FsbCdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFByb3ZpZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zOiAnYWN0aXZlUHJvdmlkZXJzJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNjaGVtYVZhbGlkYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIHNwZWNpYWxGaWVsZHMoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW3N1cGVyLnNwZWNpYWxGaWVsZHMoKSwgUHJvZmlsZUZvcm1fQ09OU1RTLnNwZWNpYWxGaWVsZHNdKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TG9naW5Qcm92aWRlcnMoKSB7XG4gICAgICAgIHJldHVybiBMb2dpbk1vZGVzLnJlQXV0aC5nZXRMb2dpblByb3ZpZGVycyh0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLCB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLCB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbik7XG4gICAgfVxuXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLmFjY291bnRzLnNldEFjY291bnRJbmZvO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWZhdWx0U3VibWl0UGFyYW1zKCkge1xuICAgICAgICBjb25zdCBjb25mbGljdEhhbmRsaW5nID1cbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY29uZmxpY3RIYW5kbGluZ1xuICAgICAgICAgICAgfHwgQ29uZmxpY3RIYW5kbGluZ1t0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbiA/IENvbmZsaWN0SGFuZGxpbmcuc2F2ZVByb2ZpbGVBbmRGYWlsIDogQ29uZmxpY3RIYW5kbGluZy5mYWlsXTtcblxuICAgICAgICBsZXQgbGFuZyA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXMubGFuZyA/PyBudWxsO1xuICAgICAgICBpZihnaWd5YS51dGlscy50b2dnbGVzLmlzT24oJ3VzZUZ1bGxMYW5nQ29kZScpKSB7XG4gICAgICAgICAgICBpZihsYW5nICE9PSB0aGlzLl9zY3JlZW5TZXQuZ2V0TGFuZ0ZvclNjcmVlblNldCgpKSB7XG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLnJlcG9ydCgndXNlRnVsbExhbmdDb2RlIHVzYWdlIHdpdGggZGlmZmVyZW50IGxhbmd1YWdlJywge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbUxhbmc6IGxhbmcsXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlblNldExhbmc6IHRoaXMuX3NjcmVlblNldC5nZXRMYW5nRm9yU2NyZWVuU2V0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhbmcgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0TGFuZ0ZvclNjcmVlblNldCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICBzdXBlci5kZWZhdWx0U3VibWl0UGFyYW1zKCksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uZmxpY3RIYW5kbGluZyxcbiAgICAgICAgICAgICAgICBsYW5nXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RXJyb3JLZXkocmVzcG9uc2U6IElGb3JtUmVzcG9uc2UpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBlcnJvckNvZGUgPSBOdW1iZXIocmVzcG9uc2UuZXJyb3JDb2RlKTtcblxuICAgICAgICBpZiAoZXJyb3JDb2RlID09PSBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRSAmJiByZXNwb25zZS52YWxpZGF0aW9uRXJyb3JzKSB7XG4gICAgICAgICAgICBjb25zdCBpc1N1YnNjcmlwdGlvbkVycm9yID0gcmVzcG9uc2UudmFsaWRhdGlvbkVycm9ycy5maW5kKGVycm9yID0+IGVycm9yLmZpZWxkTmFtZS5zdGFydHNXaXRoKCdjb21tdW5pY2F0aW9uJykpXG4gICAgICAgICAgICBpZihpc1N1YnNjcmlwdGlvbkVycm9yKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3N1YnNjcmlwdGlvbl9taXNzaW5nX2RlcGVuZHNvbl9maWVsZHMnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldEVycm9yS2V5KHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRFeHRyYVByb2ZpbGVGaWVsZHMobWlzc2luZ09ubHk6IGJvb2xlYW4pIHtcbiAgICAgICAgY29uc3QgbWlzc2luZ0ZpZWxkcyA9IHN1cGVyLmdldEV4dHJhUHJvZmlsZUZpZWxkcyhtaXNzaW5nT25seSk7XG5cbiAgICAgICAgdGhpcy5yZXF1aXJlZFByb2ZpbGVGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICBpZiAoZ2lneWEudXRpbHMuYXJyYXkuaW5kZXhPZihtaXNzaW5nRmllbGRzLCBmaWVsZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZ0ZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1pc3NpbmdGaWVsZHM7XG4gICAgfVxufVxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShQcm9maWxlRm9ybSk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtSZWdpc3RlckZvcm19IGZyb20gXCIuL1JlZ2lzdGVyRm9ybVwiO1xuXG5leHBvcnQgdmFyIFByb2dyZXNzaW9uRm9ybV9DT05TVFMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLWxpdGUtYWNjb3VudC1wcm9ncmVzc2lvbi1mb3JtJyxcbn07XG5EZWVwRnJlZXplKFByb2dyZXNzaW9uRm9ybV9DT05TVFMpO1xuZXhwb3J0IGNsYXNzIFByb2dyZXNzaW9uRm9ybSBleHRlbmRzIFJlZ2lzdGVyRm9ybSB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBQcm9ncmVzc2lvbkZvcm1fQ09OU1RTO1xuICAgIGluaXRBcGlOYW1lID0gXCJpbml0UHJvZ3Jlc3Npb25cIjtcbiAgICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xuICAgICAgICBzdXBlcihzY3JlZW4sIGVsRm9ybSwgZ2lneWFDbGFzcyk7XG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBkZWZhdWx0U3VibWl0UGFyYW1zKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLmRlZmF1bHRTdWJtaXRQYXJhbXMoKSxcbiAgICAgICAgICAgIHtlbWFpbDogdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKS5pbml0UHJvZ3Jlc3Npb24/LmVtYWlsfVxuICAgICAgICBdKTtcbiAgICB9XG59XG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KFByb2dyZXNzaW9uRm9ybSk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgeyBJR2lneWFSZXNwb25zZSwgSVNjcmVlblNldFBhcmFtcyB9IGZyb20gXCIuLi9TY3JlZW5TZXRQbHVnaW5cIjtcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSBcIi4uL0Jhc2VGb3JtXCI7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gXCIuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9yc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTZW5kVmVyaWZpY2F0aW9uUmVzcG9uc2UgZXh0ZW5kcyBJR2lneWFSZXNwb25zZSB7XG4gICAgdlRva2VuPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElJc1ZlcmlmaWVkUmVzcG9uc2UgZXh0ZW5kcyBJR2lneWFSZXNwb25zZSB7XG4gICAgYWNjZXNzVG9rZW4/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCB2YXIgUHVzaEF1dGhNZXRob2RGb3JtX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtcHVzaC1hdXRoLW1ldGhvZC1mb3JtJyxcbiAgICBhdXRoTWV0aG9kOiAncHVzaCdcbn07XG5cbkRlZXBGcmVlemUoUHVzaEF1dGhNZXRob2RGb3JtX0NPTlNUUyk7XG5cbmV4cG9ydCBjbGFzcyBQdXNoQXV0aE1ldGhvZEZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFB1c2hBdXRoTWV0aG9kRm9ybV9DT05TVFM7XG5cbiAgICBwcml2YXRlIF90aW1lb3V0SWQ6IG51bWJlcjtcbiAgICBwcml2YXRlIF9hY2Nlc3NUb2tlbjogc3RyaW5nO1xuICAgIHByaXZhdGUgX3BvbGxpbmdTdGFydFRpbWUgPSAwO1xuICAgIHByaXZhdGUgX3BvbGxpbmdMaW1pdCA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXNbJ2lzVmVyaWZpZWRQb2xsaW5nTGltaXQnXSB8fCAxMDAwICogNjAgKiAyOyAvLyBkZWZhdWx0IDIgbWluXG4gICAgcHJpdmF0ZSBfcG9sbGluZ0ludGVydmFsID0gdGhpcy5fc2NyZWVuU2V0LnBhcmFtc1snaXNWZXJpZmllZFBvbGxpbmdJbnRlcnZhbCddIHx8IDEwMDAgKiAzOyAvLyBkZWZhdWx0IDMgc2VjXG5cbiAgICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxEaXZFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgdGhpcy5zdGFydFB1c2hWZXJpZmljYXRpb25GbG93KCk7XG4gICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5hdXRoLnNldFByZWZlcnJlZExvZ2luTWV0aG9kKFB1c2hBdXRoTWV0aG9kRm9ybV9DT05TVFMuYXV0aE1ldGhvZCwgYXBpRGF0YT8uaWRlbnRpZmllcik7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXJ0UHVzaFZlcmlmaWNhdGlvbkZsb3coKSB7XG4gICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5hdXRoLnB1c2guc2VuZFZlcmlmaWNhdGlvbih7XG4gICAgICAgICAgICBpZGVudGlmaWVyOiBhcGlEYXRhPy5pZGVudGlmaWVyLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHJlcyA9PiB0aGlzLm9uU2VuZFZlcmlmaWNhdGlvblJlc3BvbnNlKHJlcylcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN1Ym1pdEFwaSgpOiAocGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zLCBkYXRhLCBvcHRpb25zLCBkZWZhdWx0UGFyYW1zKSA9PiB2b2lkIHtcbiAgICAgICAgcmV0dXJuIChwYXJhbXMsIGRhdGEsIG9wdGlvbnMsIGRlZmF1bHRQYXJhbXMpOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmF1dGgubG9naW4oe1xuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiB0aGlzLl9hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5jYWxsYmFja1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdG9wUG9sbGluZygpe1xuICAgICAgICB0aGlzLl9wb2xsaW5nU3RhcnRUaW1lID0gMDtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblNlbmRWZXJpZmljYXRpb25SZXNwb25zZShyZXM6IElTZW5kVmVyaWZpY2F0aW9uUmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlcy5lcnJvckNvZGUgPT0gMCAmJiByZXMudlRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTdG9yZS5wdXNoRGF0YS52VG9rZW4gPSByZXMudlRva2VuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmVycm9yKCdnaWd5YS5hY2NvdW50cy5hdXRoLnB1c2guc2VuZFZlcmlmaWNhdGlvbiBmYWlsZWQnLCB7cmVzfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNoZWNrSXNWZXJpZmllZCgpOiB2b2lkIHtcbiAgICAgICAgLy8gdlRva2VuIG1heSBjaGFuZ2UgaW4gdGhlIGRhdGEtc3RvcmUgYnkgdGhlIGZvcm0ncyBjb250cm9scyAoXCJyZXNlbmRcIiBidXR0b24pXG4gICAgICAgIGNvbnN0IHZUb2tlbiA9IHRoaXMuZGF0YVN0b3JlLnB1c2hEYXRhLnZUb2tlbjtcbiAgICAgICAgaWYgKHZUb2tlbikge1xuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuYXV0aC5wdXNoLmlzVmVyaWZpZWQoe3ZUb2tlbiwgY2FsbGJhY2s6IHJlcyA9PiB0aGlzLm9uSXNWZXJpZmllZFJlc3BvbnNlKHJlcyl9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub25Jc1ZlcmlmaWVkUmVzcG9uc2Uoe2Vycm9yQ29kZTogR1NFcnJvcnMuT0t9KVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25QdXNoVmVyaWZpZWQoYWNjZXNzVG9rZW4pe1xuICAgICAgICB0aGlzLl9hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIHRoaXMuc3VibWl0KCk7IC8vIGF1dG9tYXRpY2FsbHkgc3VibWl0cyB0aGUgZm9ybSBzbyBpdCdsbCBzZW5kIHRoZSBhY2NvdW50cy5hdXRoLmxvZ2luIHJlcXVlc3RcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uSXNWZXJpZmllZFJlc3BvbnNlKHJlczogSUlzVmVyaWZpZWRSZXNwb25zZSk6IHZvaWQge1xuXG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgaWYgKHJlcy5hY2Nlc3NUb2tlbilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uUHVzaFZlcmlmaWVkKHJlcy5hY2Nlc3NUb2tlbik7XG5cbiAgICAgICAgLy8gZXJyb3JcbiAgICAgICAgaWYgKHJlcy5lcnJvckNvZGUgIT0gR1NFcnJvcnMuT0spXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ2dpZ3lhLmFjY291bnRzLmF1dGgucHVzaC5pc1ZlcmlmaWVkIGZhaWxlZCcsIHtyZXN9KTtcblxuICAgICAgICAvLyBrZWVwIHBvbGxpbmdcbiAgICAgICAgdGhpcy5fdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkQ29udGludWVQb2xsaW5nKCkpXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja0lzVmVyaWZpZWQoKTtcbiAgICAgICAgfSwgdGhpcy5fcG9sbGluZ0ludGVydmFsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3VsZENvbnRpbnVlUG9sbGluZygpe1xuICAgICAgICBjb25zdCBub3cgPSBnaWd5YS51dGlscy5kYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gKG5vdyAtIHRoaXMuX3BvbGxpbmdTdGFydFRpbWUpIDwgdGhpcy5fcG9sbGluZ0xpbWl0OyAvLyBwb2xsaW5nIGxpbWl0IG5vdCByZWFjaGVkXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydFBvbGxpbmcoKXtcbiAgICAgICAgdGhpcy5fcG9sbGluZ1N0YXJ0VGltZSA9IGdpZ3lhLnV0aWxzLmRhdGUubm93KCk7XG4gICAgICAgIHRoaXMuY2hlY2tJc1ZlcmlmaWVkKCk7XG4gICAgfVxufVxuXG5CYXNlRm9ybS5hZGRGb3JtVG9MaWJyYXJ5KFB1c2hBdXRoTWV0aG9kRm9ybSk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlRm9ybSwgSU5lZWRlZERhdGEgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcbmltcG9ydCB7IExvZ2luTW9kZXMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0xvZ2luTW9kZXMnO1xuXG5leHBvcnQgdmFyIFJlYXV0aGVudGljYXRpb25Gb3JtX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtcmVhdXRoZW50aWNhdGlvbi1mb3JtJyxcbn07XG5EZWVwRnJlZXplKFJlYXV0aGVudGljYXRpb25Gb3JtX0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgUmVhdXRoZW50aWNhdGlvbkZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBSZWF1dGhlbnRpY2F0aW9uRm9ybV9DT05TVFM7XG5cbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgc2V0dGluZ3MgPSB7XG4gICAgICAgIHN1cHBvcnRDb25zZW50RGF0YTogdHJ1ZVxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvcihzY3JlZW46IFNjcmVlbiwgZWxGb3JtOiBIVE1MRm9ybUVsZW1lbnQsIGdpZ3lhQ2xhc3M6IHN0cmluZykge1xuICAgICAgICBzdXBlcihzY3JlZW4sIGVsRm9ybSwgZ2lneWFDbGFzcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHByZVBvcHVsYXRlRGF0YSgpIHtcbiAgICAgICAgdmFyIHBvcHVsYXRlRGF0YSA9IHN1cGVyLnByZVBvcHVsYXRlRGF0YSgpO1xuXG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICAgICAgdmFyIGxvZ2luSURzID0gYXBpRGF0YSAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8ubG9naW5JRHM7XG5cbiAgICAgICAgaWYgKGxvZ2luSURzKSBwb3B1bGF0ZURhdGEubG9naW5JRCA9IGxvZ2luSURzLnVzZXJuYW1lIHx8IChsb2dpbklEcy5lbWFpbHMgJiYgbG9naW5JRHMuZW1haWxzWzBdKTtcblxuICAgICAgICByZXR1cm4gcG9wdWxhdGVEYXRhO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5sb2dpbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZTxJTmVlZGVkRGF0YT4oW1xuICAgICAgICAgICAgc3VwZXIuZ2V0TmVlZGVkRGF0YSgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGdldFNjaGVtYToge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0QWNjb3VudEluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiAnaWRlbnRpdGllcy1hY3RpdmUsbG9naW5JRHMnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRMb2dpblByb3ZpZGVycygpIHtcbiAgICAgICAgcmV0dXJuIExvZ2luTW9kZXMucmVBdXRoLmdldExvZ2luUHJvdmlkZXJzKHRoaXMuX3NjcmVlblNldC5kYXRhLmFwaURhdGEsIHRoaXMuX3NjcmVlblNldC5wYXJhbXMsIHRoaXMuX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVmYXVsdFN1Ym1pdFBhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICBzdXBlci5kZWZhdWx0U3VibWl0UGFyYW1zKCksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbG9naW5Nb2RlOiBMb2dpbk1vZGVzLnJlQXV0aC5uYW1lLFxuICAgICAgICAgICAgICAgIGxvZ2luSUQ6ICduby1vbmUnLCAvLyBUT0RPOiByZW1vdmUgYXMgc29vbiBhcyB0aGUgc2VydmVyIHNpZGUgc3RvcCByZXF1aXJpbmcgdGhpcyBwYXJhbWV0ZXJcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLnNwZWNpYWxGaWVsZHMoKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjYXB0Y2hhVGV4dDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjYXB0Y2hhVG9rZW46IHRydWUsXG4gICAgICAgICAgICAgICAgbG9naW5JRDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH1cbn1cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoUmVhdXRoZW50aWNhdGlvbkZvcm0pO1xuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSwgSU1hcCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgQmFzZUZvcm0sIElOZWVkZWREYXRhIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5cbmV4cG9ydCB2YXIgUmVnaXN0ZXJGb3JtX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtcmVnaXN0ZXItZm9ybScsXG59O1xuRGVlcEZyZWV6ZShSZWdpc3RlckZvcm1fQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBSZWdpc3RlckZvcm0gZXh0ZW5kcyBCYXNlRm9ybSB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBSZWdpc3RlckZvcm1fQ09OU1RTO1xuICAgIHByb3RlY3RlZCBpbml0QXBpTmFtZTogc3RyaW5nID0gJ2luaXRSZWdpc3RyYXRpb24nO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBzZXR0aW5ncyA9IHtcbiAgICAgICAgc3VwcG9ydENvbnNlbnREYXRhOiB0cnVlXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHNjcmVlbjogU2NyZWVuLCBlbEZvcm06IEhUTUxGb3JtRWxlbWVudCwgZ2lneWFDbGFzczogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVxdWlyZWRGaWVsZHMoKTogSU1hcDxib29sZWFuPiB7XG4gICAgICAgIHZhciByZXF1aXJlZEZpZWxkcyA9IHN1cGVyLnJlcXVpcmVkRmllbGRzKCk7XG4gICAgICAgIHJlcXVpcmVkRmllbGRzID0gPElNYXA8Ym9vbGVhbj4+Z2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtyZXF1aXJlZEZpZWxkcywgdGhpcy5zcGVjaWFsRmllbGRzKCldKTtcbiAgICAgICAgcmVxdWlyZWRGaWVsZHNbJ3VzZXJuYW1lJ10gPSByZXF1aXJlZEZpZWxkc1snZW1haWwnXSA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHJlcXVpcmVkRmllbGRzO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZURhdGFGcm9tKCkge1xuICAgICAgICByZXR1cm4gWydnZXRBY2NvdW50SW5mbycsICdnZXRBY2NvdW50SW5mby5wcm9maWxlJywgJ2dldEFjY291bnRJbmZvLmxvZ2luSURzJ107XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRGl2RWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBJbiB0aGUgY2FzZSB3aGVuIHRoZSB1c2VyIHJldHVybnMgdG8gdGhlIHJlZ2lzdHJhdGlvbiBwYWdlIHdpdGhvdXQgY29tcGxldGluZyB0aGUgXCJDb21wbGV0ZSByZWdpc3RyYXRpb25cIiBmbG93LFxuICAgICAgICAvLyB0aGUgXCJDb21wbGV0ZSByZWdpc3RyYXRpb25cIiBmbG93IHN0aWxsIGFjdGl2ZSBhbmQgYmVjYXVzZSBvZiBpdCBcIm9uQWZ0ZXJTdWJtaXRcIiBldmVudCBkb2VzIG5vdCBmaXJlLlxuICAgICAgICAvLyBTaW5jZSB3ZSBkb24ndCBpbnRlcmVzdGluZyBpbiBcIkNvbXBsZXRlIHJlZ2lzdHJhdGlvblwiIGZsb3cgYW55bW9yZSB3ZSBuZWVkIHRvIGNhbmNlbCBpdCwgdG8gZ2V0IFwib25BZnRlclN1Ym1pdFwiIGV2ZW50XG4gICAgICAgIGlmICh0aGlzLmlzRmluYWxpemVSZWdpc3RyYXRpb25GbG93QWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWJvcnRGaW5hbGl6ZVJlZ2lzdHJhdGlvbkZsb3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZTxJTmVlZGVkRGF0YT4oW1xuICAgICAgICAgICAgc3VwZXIuZ2V0TmVlZGVkRGF0YSgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFt0aGlzLmluaXRBcGlOYW1lXToge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge30sXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcjogcmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBjbGVhcmluZyBhY2NvdW50IGluZm8gZnJvbSBzY3JlZW5zZXQgY2FjaGVgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhcGlEYXRhLmdldEFjY291bnRJbmZvO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzOyAvLyBwYXNzIHJlc3VsdCBvbiB0byB0aGUgc2NyZWVuU2V0XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBnZXRTY2hlbWE6IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuICAgICAgICBdKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBzY2hlbWFWYWxpZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLnNwZWNpYWxGaWVsZHMoKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZFJldHlwZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzZWNyZXRRdWVzdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzZWNyZXRBbnN3ZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FwdGNoYVRleHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FwdGNoYVRva2VuOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlZ1NvdXJjZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaXRlVUlEOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHVibGljIHBlcmZvcm1TdWJtaXQob1BhcmFtczogYW55KSB7XG4gICAgICAgIGlmICghdGhpcy5fc2NyZWVuU2V0LmRvZXNTY3JlZW5IYXZlRm9ybXModGhpcy5zdWNjZXNzU2NyZWVuKSkge1xuICAgICAgICAgICAgb1BhcmFtcy5maW5hbGl6ZVJlZ2lzdHJhdGlvbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5maW5hbGl6ZVJlZ2lzdHJhdGlvbk5lZWRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIucGVyZm9ybVN1Ym1pdChvUGFyYW1zKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3VibWl0QXBpKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEuYWNjb3VudHMucmVnaXN0ZXI7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHF1ZXJ5U3RyaW5nVG9TdWJtaXRQYXJhbU1hcCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdpZ19lbWFpbDogJ2VtYWlsJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVmYXVsdFN1Ym1pdFBhcmFtcygpIHtcblxuICAgICAgICAvLyBpbml0aWFsIGFjY291bnRzLnJlZ2lzdGVyIHN1Ym1pdCBwYXJhbXNcbiAgICAgICAgY29uc3QgcmVnaXN0ZXJGb3JtU3VibWl0UGFyYW1zOiB7aW5jbHVkZTogc3RyaW5nLCBsYW5nPzogc3RyaW5nfSA9IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLm1lcmdlQ29tbWFTZXBhcmF0ZWRWYWx1ZXMoXG4gICAgICAgICAgICAgICAgJ3Byb2ZpbGUsZGF0YSxlbWFpbHMsbG9naW5JRHMsc3Vic2NyaXB0aW9ucyxwcmVmZXJlbmNlcycsXG4gICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5pbmNsdWRlKSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gdXNlIGZ1bGwgbGFuZy1jb2RlIGlzIG9wdGVkLWluXG4gICAgICAgIGlmIChnaWd5YS51dGlscy50b2dnbGVzLmlzT24oJ3VzZUZ1bGxMYW5nQ29kZUluUmVnaXN0cmF0aW9uJykgfHwgZ2lneWEudXRpbHMudG9nZ2xlcy5pc09uKCd1c2VGdWxsTGFuZ0NvZGUnKSl7XG4gICAgICAgICAgICBjb25zdCBzY3JlZW5TZXRMYW5nID0gdGhpcy5fc2NyZWVuU2V0LmdldExhbmdGb3JTY3JlZW5TZXQoKTtcbiAgICAgICAgICAgIGlmKHRoaXMuX3NjcmVlblNldC5wYXJhbXMubGFuZyAhPT0gc2NyZWVuU2V0TGFuZykge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoJ3VzZUZ1bGxMYW5nQ29kZSB1c2FnZSB3aXRoIGRpZmZlcmVudCBsYW5ndWFnZScsIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1MYW5nOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmxhbmcsXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlblNldExhbmc6IHNjcmVlblNldExhbmdcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVnaXN0ZXJGb3JtU3VibWl0UGFyYW1zLmxhbmcgPSBzY3JlZW5TZXRMYW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICAgICAgICBzdXBlci5kZWZhdWx0U3VibWl0UGFyYW1zKCksXG4gICAgICAgICAgICByZWdpc3RlckZvcm1TdWJtaXRQYXJhbXNcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0ZpbmFsaXplUmVnaXN0cmF0aW9uRmxvd0FjdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldD8uZGF0YT8uZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhYm9ydEZpbmFsaXplUmVnaXN0cmF0aW9uRmxvdygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgPSBmYWxzZTtcbiAgICB9XG5cbn1cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoUmVnaXN0ZXJGb3JtKTtcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IEJhc2VGb3JtLCBJTmVlZGVkRGF0YSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuXG5leHBvcnQgdmFyIFJlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtcmVzZW5kLXZlcmlmaWNhdGlvbi1jb2RlLWZvcm0nLFxufTtcbkRlZXBGcmVlemUoUmVzZW5kVmVyaWZpY2F0aW9uQ29kZUZvcm1fQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBSZXNlbmRWZXJpZmljYXRpb25Db2RlRm9ybSBleHRlbmRzIEJhc2VGb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFJlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtX0NPTlNUUztcblxuICAgIGNvbnN0cnVjdG9yKHNjcmVlbjogU2NyZWVuLCBlbEZvcm06IEhUTUxGb3JtRWxlbWVudCwgZ2lneWFDbGFzczogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZTxJTmVlZGVkRGF0YT4oW1xuICAgICAgICAgICAgc3VwZXIuZ2V0TmVlZGVkRGF0YSgpLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGdldEFjY291bnRJbmZvOiB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogJ2VtYWlscycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLnNwZWNpYWxGaWVsZHMoKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5yZXNlbmRWZXJpZmljYXRpb25Db2RlO1xuICAgIH1cbn1cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoUmVzZW5kVmVyaWZpY2F0aW9uQ29kZUZvcm0pO1xuIiwiaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7QmFzZUZvcm0sIElGb3JtRGF0YX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHtJRm9ybVJlc3BvbnNlfSBmcm9tICcuLi9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0ICogYXMgYXJyYXlVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvYXJyYXknO1xuXG5leHBvcnQgdmFyIFJlc2V0UGFzc3dvcmRGb3JtX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtcmVzZXQtcGFzc3dvcmQtZm9ybSdcbn07XG5EZWVwRnJlZXplKFJlc2V0UGFzc3dvcmRGb3JtX0NPTlNUUyk7XG5cbmV4cG9ydCBjbGFzcyBSZXNldFBhc3N3b3JkRm9ybSBleHRlbmRzIEJhc2VGb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFJlc2V0UGFzc3dvcmRGb3JtX0NPTlNUUztcblxuICAgIGNvbnN0cnVjdG9yKHNjcmVlbjogU2NyZWVuLCBlbEZvcm06IEhUTUxGb3JtRWxlbWVudCwgZ2lneWFDbGFzczogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKHNjcmVlbiwgZWxGb3JtLCBnaWd5YUNsYXNzKTtcbiAgICAgICAgdGhpcy5maWx0ZXJzLnB1c2goe1xuICAgICAgICAgICAgZmlsdGVyT3V0V2lkZ2V0c1RvU2VuZDogKGZvcm1EYXRhOiBJRm9ybURhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZm9ybURhdGFbJ3NlY3VyaXR5RmllbGRzJ10gJiYgZm9ybURhdGFbJ3NlY3VyaXR5RmllbGRzJ11bJ3Bhc3N3b3JkUmV0eXBlJ10pIGRlbGV0ZSBmb3JtRGF0YVsnc2VjdXJpdHlGaWVsZHMnXVsncGFzc3dvcmRSZXR5cGUnXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybURhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzcGVjaWFsRmllbGRzKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHN1cGVyLnNwZWNpYWxGaWVsZHMoKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsb2dpbklEOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNlY3JldEFuc3dlcjogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RXJyb3JLZXkocmVzcG9uc2U6IElGb3JtUmVzcG9uc2UpOiBzdHJpbmcge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09PSBHU0Vycm9ycy5JTlZBTElEX1RPS0VOKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2ludmFsaWRfcGFzc3dvcmRfcmVzZXRfdG9rZW4nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBlci5nZXRFcnJvcktleShyZXNwb25zZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNjaGVtYVZhbGlkYXRlZCgpIHtcbiAgICAgICAgLy8gTmVjZXNzYXJ5IHRvIHNob3cgZXJyb3IgbWVzc2FnZSBmb3IgcGFzc3dvcmQgY29tcGxleGl0eS5cbiAgICAgICAgLy8gUGFzc3dvcmRJbnB1dHMudHMgd2lsbCBub3QgZ2VuZXJhdGUgcGFzc3dvcmQgY29tcGxleGl0eSBlcnJvciBjYWxsYmFjayBpZiBzY2hlbWFWYWxpZGF0ZWQgcmV0dXJucyBmYWxzZS5cbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRGaWVsZCgnbmV3UGFzc3dvcmQnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHJvZmlsZU9iamVjdE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnc2VjdXJpdHlGaWVsZHMnO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdWJtaXRBcGkoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS5hY2NvdW50cy5yZXNldFBhc3N3b3JkO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTERpdkVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5maW5hbGl6ZVJlZ2lzdHJhdGlvbk5lZWRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZURhdGEoKSB7XG4gICAgICAgIGNvbnN0IHBvcHVsYXRlRGF0YSA9IHN1cGVyLnByZVBvcHVsYXRlRGF0YSgpO1xuXG4gICAgICAgIHBvcHVsYXRlRGF0YS5sb2dpbklEICA9IHRoaXMuX3NjcmVlblNldC5nZXRDb25mbGljdGluZ0FjY291bnQoKSA/IHRoaXMuZ2V0Q29uZmxpY3RpbmdBY2NvdW50TG9naW5JZCgpIDogdGhpcy5nZXRMb2dpbklkKCk7XG5cbiAgICAgICAgcmV0dXJuIHBvcHVsYXRlRGF0YTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVmYXVsdFN1Ym1pdFBhcmFtcygpOiB7IHBhc3N3b3JkUmVzZXRUb2tlbj86IHN0cmluZyB9IHtcbiAgICAgICAgY29uc3QgcGFyYW1zOiB7IHBhc3N3b3JkUmVzZXRUb2tlbj86IHN0cmluZyB9ID0gc3VwZXIuZGVmYXVsdFN1Ym1pdFBhcmFtcygpO1xuXG4gICAgICAgIC8vIENoZWNrIGZvciBwYXNzd29yZCBmaWVsZCBpbiBmb3JtLiBSZXR1cm4gZGVmYXVsdCBzdWJtaXQgcGFyYW1zIGlmIHBhc3N3b3JkIGZpZWxkIGlzIG5vdCBwcmVzZW50IGluIGZvcm0uXG4gICAgICAgIC8vIEluIHRoZSBmdXR1cmUsIHdlIG1heSBkaXZpZGUgaW50byBzZXBhcmF0ZSBmb3Jtcy5cbiAgICAgICAgaWYgKCF0aGlzLmdldEZpZWxkKCduZXdQYXNzd29yZCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGFzc3dvcmQgZmllbGQgaXMgaW4gZm9ybSwgc28gd2UgY2FyZSBhYm91dCB0aGUgcGFzc3dvcmQgcmVzZXQgdG9rZW4uXG4gICAgICAgIGlmICh0aGlzLnBhc3N3b3JkUmVzZXRUb2tlbikge1xuICAgICAgICAgICAgcGFyYW1zLnBhc3N3b3JkUmVzZXRUb2tlbiA9IHRoaXMucGFzc3dvcmRSZXNldFRva2VuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRMb2dpbklkKCkge1xuICAgICAgICBjb25zdCBsb2dpbklEcyA9IHRoaXMuX3NjcmVlblNldC5nZXRMb2dpbklkcygpO1xuXG4gICAgICAgIGlmICghbG9naW5JRHMpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvZmlsZUVtYWlsID0gdGhpcy5fc2NyZWVuU2V0LmdldFByb2ZpbGUoKT8uZW1haWw7XG5cbiAgICAgICAgcmV0dXJuIGxvZ2luSURzLnVzZXJuYW1lID8/IGFycmF5VXRpbHMuZmlyc3QobG9naW5JRHMuZW1haWxzLCBlID0+IGUgPT09IHByb2ZpbGVFbWFpbCkgPz8gbG9naW5JRHMuZW1haWxzWzBdO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q29uZmxpY3RpbmdBY2NvdW50TG9naW5JZCgpIHtcbiAgICAgICAgY29uc3QgY29uZmxpY3RpbmdBY2NvdW50ID0gdGhpcy5fc2NyZWVuU2V0LmdldENvbmZsaWN0aW5nQWNjb3VudCgpO1xuXG4gICAgICAgIHJldHVybiBjb25mbGljdGluZ0FjY291bnQubG9naW5JRCB8fCBjb25mbGljdGluZ0FjY291bnQuZW1haWxzPy5bMF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgcGFzc3dvcmRSZXNldFRva2VuKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JlZW5TZXQ/LnBhcmFtcz8ucGFzc3dvcmRSZXNldFRva2VuIHx8XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQ/LmRhdGE/Lm90cERhdGE/LmFjY2Vzc1Rva2VuIHx8XG4gICAgICAgICAgICBnaWd5YS51dGlscy5VUkwuZ2V0UGFyYW1WYWx1ZUZyb21VUkwoJ3B3cnQnLCB3aW5kb3cubG9jYXRpb24uc2VhcmNoLCB1bmRlZmluZWQpO1xuICAgIH1cbn1cblxuQmFzZUZvcm0uYWRkRm9ybVRvTGlicmFyeShSZXNldFBhc3N3b3JkRm9ybSk7XG4iLCJpbXBvcnQge0Jhc2VGb3JtfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcbmltcG9ydCB7Q3VzdG9tRm9ybX0gZnJvbSAnLi9DdXN0b21Gb3JtJztcbmV4cG9ydCBjb25zdCBUZmFGb3JtX0NPTlNUUyA9IHtcbiAgZ2lneWFDbGFzczogJ2dpZ3lhLXRmYS1mb3JtJyxcbn07XG5cbmV4cG9ydCBjbGFzcyBUZmFGb3JtIGV4dGVuZHMgQ3VzdG9tRm9ybSB7XG4gIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVGZhRm9ybV9DT05TVFM7XG59XG5cbkJhc2VGb3JtLmFkZEZvcm1Ub0xpYnJhcnkoVGZhRm9ybSk7XG4iLCJleHBvcnQgKiBhcyBCYXNlRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcbmV4cG9ydCAqIGFzIExpbmtBY2NvdW50c0Zvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9MaW5rQWNjb3VudHNGb3JtJztcbmV4cG9ydCAqIGFzIExvZ2luRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0xvZ2luRm9ybSc7XG5leHBvcnQgKiBhcyBQYXNzd29yZGxlc3NMb2dpbkZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9QYXNzd29yZGxlc3NMb2dpbkZvcm0nO1xuZXhwb3J0ICogYXMgUGFzc3dvcmRsZXNzUmVnaXN0ZXJGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUGFzc3dvcmRsZXNzUmVnaXN0ZXJGb3JtJztcbmV4cG9ydCAqIGFzIEF1dGhNZXRob2RzRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0F1dGhNZXRob2RzRm9ybSc7XG5leHBvcnQgKiBhcyBQYXNzd29yZEF1dGhNZXRob2RGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUGFzc3dvcmRBdXRoTWV0aG9kRm9ybSc7XG5leHBvcnQgKiBhcyBQdXNoQXV0aE1ldGhvZEZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9QdXNoQXV0aE1ldGhvZEZvcm0nO1xuZXhwb3J0ICogYXMgTWFnaWNMaW5rQXV0aE1ldGhvZEZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9NYWdpY0xpbmtBdXRoTWV0aG9kRm9ybSc7XG5leHBvcnQgKiBhcyBFbWFpbENvZGVBdXRoTWV0aG9kRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0VtYWlsQ29kZUF1dGhNZXRob2RGb3JtJztcbmV4cG9ydCAqIGFzIE5ld3NsZXR0ZXJTaWdudXBGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvTmV3c2xldHRlclNpZ251cEZvcm0nO1xuZXhwb3J0ICogYXMgUHJvZmlsZUZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9Qcm9maWxlRm9ybSc7XG5leHBvcnQgKiBhcyBSZUF1dGhlbnRpY2F0aW9uRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1JlYXV0aGVudGljYXRpb25Gb3JtJztcbmV4cG9ydCAqIGFzIFJlZ2lzdGVyRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1JlZ2lzdGVyRm9ybSc7XG5leHBvcnQgKiBhcyBQcm9ncmVzc2lvbkZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9Qcm9ncmVzc2lvbkZvcm0nO1xuZXhwb3J0ICogYXMgUmVzZW5kVmVyaWZpY2F0aW9uQ29kZUZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9SZXNlbmRWZXJpZmljYXRpb25Db2RlRm9ybSc7XG5leHBvcnQgKiBhcyBSZXNldFBhc3N3b3JkRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Jlc2V0UGFzc3dvcmRGb3JtJztcbmV4cG9ydCAqIGFzIE9yZ1JlZ2lzdGVyRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL09yZ2FuaXphdGlvblJlZ2lzdHJhdGlvbkZvcm0nO1xuZXhwb3J0ICogYXMgT3RwU2VuZENvZGVGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3RwU2VuZENvZGVGb3JtJztcbmV4cG9ydCAqIGFzIE90cFVwZGF0ZUZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9PdHBVcGRhdGVGb3JtJztcbmV4cG9ydCAqIGFzIE90cFZlcmlmeUZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9PdHBWZXJpZnlGb3JtJztcbmV4cG9ydCAqIGFzIE90cExvZ2luRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL090cExvZ2luRm9ybSc7XG5leHBvcnQgKiBhcyBEZXZpY2VDb2RlRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0RldmljZUNvZGVGb3JtJztcbmV4cG9ydCAqIGFzIEN1c3RvbUZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9DdXN0b21Gb3JtJztcbmV4cG9ydCAqIGFzIFRmYUZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9UZmFGb3JtJztcbmV4cG9ydCAqIGFzIE9uZUFjY291bnRTdWJzY3JpcHRpb25Gb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT25lQWNjb3VudFN1YnNjcmlwdGlvbkZvcm0nO1xuIiwiaW1wb3J0IHtTY3JlZW59IGZyb20gXCIuL1NjcmVlblwiO1xuaW1wb3J0IHtGb3JFYWNoUHJvcCwgSU1hcH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCAqIGFzIF9pc0VtcHR5IGZyb20gJ2xvZGFzaC5pc2VtcHR5JztcbmltcG9ydCB7c2l0ZURhdGF9IGZyb20gXCIuLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9TaXRlRGF0YVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElHcm91cFNjcmVlbnMge1xuICAgIFtzY3JlZW5JZDogc3RyaW5nXToge1xuICAgICAgICB3ZWlnaHQ6IG51bWJlcjtcbiAgICAgICAgdGVzdElkOiBzdHJpbmc7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JvdXBWYXJpYW50KFxuICAgIHNjcmVlbnM6IElNYXA8U2NyZWVuPixcbiAgICBzY3JlZW5TZXRJZDogc3RyaW5nLFxuICAgIGlzR3JvdXBBY3RpdmU6IGJvb2xlYW4sXG4gICAgZ3JvdXBJZDogc3RyaW5nXG4pOiBTY3JlZW4ge1xuICAgIGNvbnN0IGdyb3VwU2NyZWVuczogSUdyb3VwU2NyZWVucyA9IHt9O1xuICAgIGxldCBvcmlnaW5hbEdyb3VwU2NyZWVuOiBTY3JlZW47XG5cbiAgICAvLyBFeHRyYWN0IGFsbCBzY3JlZW5zIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ3JvdXBJZFxuICAgIEZvckVhY2hQcm9wKHNjcmVlbnMsIChzY3JlZW4pID0+IHtcbiAgICAgICAgaWYgKHNjcmVlbi52YXJpYW50R3JvdXBJZCA9PT0gZ3JvdXBJZCAmJiBzY3JlZW4udmFyaWFudFBlcmNlbnRhZ2UpIHtcbiAgICAgICAgICAgIGdyb3VwU2NyZWVuc1tzY3JlZW4uSURdID0geyB3ZWlnaHQ6IHNjcmVlbi52YXJpYW50UGVyY2VudGFnZSwgdGVzdElkOiBzY3JlZW4uYWJUZXN0SWR9O1xuXG4gICAgICAgICAgICBpZiAoc2NyZWVuLmlzT3JpZ2luYWxWYXJpYW50KSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxHcm91cFNjcmVlbiA9IHNjcmVlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIHNjcmVlbiByZXR1cm5cbiAgICBpZiAoX2lzRW1wdHkoZ3JvdXBTY3JlZW5zKSlcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgaWYgKCFpc0dyb3VwQWN0aXZlKSB7XG4gICAgICAgIHJldHVybiBvcmlnaW5hbEdyb3VwU2NyZWVuO1xuICAgIH1cblxuICAgIC8vIElmIHZhcmlhbnQgZXhpc3QgaW4gdGhlIHVzZXIgcHJlZmVyZW5jZXMgcmV0dXJuIHRoZSBzY3JlZW5cbiAgICBjb25zdCB0ZXN0SWQgPSBPYmplY3QudmFsdWVzKGdyb3VwU2NyZWVucylbMF0udGVzdElkO1xuICAgIGNvbnN0IHNjcmVlblZhcmlhbnQgPSAgc2l0ZURhdGE/LmdldFNjcmVlblZhcmlhbnQoc2NyZWVuU2V0SWQsIGdyb3VwSWQsIHRlc3RJZCk7XG5cbiAgICBpZiAoc2NyZWVuVmFyaWFudCAmJiBncm91cFNjcmVlbnNbc2NyZWVuVmFyaWFudF0pIHtcbiAgICAgICAgcmV0dXJuIHNjcmVlbnNbc2NyZWVuVmFyaWFudF07XG4gICAgfVxuXG4gICAgLy8gRXZhbHVhdGUgbmV3IHZhcmlhbnQgYW5kIHNhdmUgaXQgaW4gdGhlIHVzZXIgcHJlZmVyZW5jZXNcbiAgICBjb25zdCB2YXJpYW50U2NyZWVuSWQgPSBldmFsdWF0ZU5ld1ZhcmlhbnQoZ3JvdXBTY3JlZW5zKTtcbiAgICBzaXRlRGF0YT8uc2V0U2NyZWVuVmFyaWFudChzY3JlZW5TZXRJZCwgZ3JvdXBJZCwgdGVzdElkLCB2YXJpYW50U2NyZWVuSWQpO1xuXG4gICAgcmV0dXJuIHNjcmVlbnNbdmFyaWFudFNjcmVlbklkXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV2YWx1YXRlTmV3VmFyaWFudChncm91cFNjcmVlbnM6IElHcm91cFNjcmVlbnMpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvdGFsID0gT2JqZWN0LmtleXMoZ3JvdXBTY3JlZW5zKS5yZWR1Y2UoKGFjYywgc2NyZWVuKSA9PiBhY2MgKyBncm91cFNjcmVlbnNbc2NyZWVuXT8ud2VpZ2h0LCAwKTtcbiAgICBjb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbSgpO1xuICAgIGxldCBjdXJyZW50VmFsdWUgPSAwO1xuICAgIGZvciAoY29uc3Qgc2NyZWVuIGluIGdyb3VwU2NyZWVucykge1xuICAgICAgICBpZiAoY3VycmVudFZhbHVlIDwgcmFuZG9tICYmIHJhbmRvbSA8IChjdXJyZW50VmFsdWUgKyBncm91cFNjcmVlbnNbc2NyZWVuXT8ud2VpZ2h0L3RvdGFsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNjcmVlbjtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50VmFsdWUgKz0gZ3JvdXBTY3JlZW5zW3NjcmVlbl0/LndlaWdodC90b3RhbDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0FwaUxpbmtfQ09OU1RTfSBmcm9tIFwiLi4vLi4vV2lkZ2V0cy9BcGlMaW5rV2lkZ2V0XCI7XG5pbXBvcnQge0lHaWd5YVJlc3BvbnNlfSBmcm9tIFwiLi4vLi4vU2NyZWVuU2V0UGx1Z2luXCI7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnLi4vLi4vU2NyZWVuJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VBcGlIYW5kbGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBfaGFuZGxlcnMgPSB7fTtcbiAgICBwcml2YXRlIHN0YXRpYyBfZGVmYXVsdEhhbmRsZXI6IHR5cGVvZiBCYXNlQXBpSGFuZGxlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc2NyZWVuOiBTY3JlZW4sIHByaXZhdGUgX3NlcnZlckFwaTogZ2lneWEuXy5TZXJ2ZXJBcGkpIHt9XG5cbiAgICBwdWJsaWMgYXN5bmMgc2VuZCgpOiBQcm9taXNlPElHaWd5YVJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IHJlcVBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2NyZWVuLl9zY3JlZW5TZXQuZGF0YS5wYXJhbXMgfHwge30sIHRoaXMuZ2V0UmVxdWVzdFBhcmFtcygpKTtcbiAgICAgICAgY29uc3QgY2FwdGNoYURhdGEgPSBhd2FpdCB0aGlzLnNjcmVlbi5nZXRDYXB0Y2hhRGF0YSgpO1xuICAgICAgICBpZiAoY2FwdGNoYURhdGEpIHtcbiAgICAgICAgICAgIHJlcVBhcmFtc1snY2FwdGNoYVR5cGUnXSA9IGNhcHRjaGFEYXRhLnR5cGU7XG4gICAgICAgICAgICByZXFQYXJhbXNbJ2NhcHRjaGFUb2tlbiddID0gY2FwdGNoYURhdGEudG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHJlcVBhcmFtc1snY2FsbGJhY2snXSA9IHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NlcnZlckFwaS5ydW4ocmVxUGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgbWV0aG9kTmFtZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VydmVyQXBpLm1ldGhvZE5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRIYW5kbGVyKG1ldGhvZE5hbWU6IHN0cmluZywgc2NyZWVuOiBTY3JlZW4sIHNlcnZlckFwaXM6IGdpZ3lhLl8uU2VydmVyQXBpW10pOiBCYXNlQXBpSGFuZGxlciB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLl9oYW5kbGVyc1ttZXRob2ROYW1lXSB8fCB0aGlzLl9kZWZhdWx0SGFuZGxlcjtcbiAgICAgICAgaWYoaGFuZGxlcikge1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyQXBpID0gc2VydmVyQXBpcy5maWx0ZXIoYXBpID0+IGFwaS5tZXRob2ROYW1lID09PSBtZXRob2ROYW1lKVswXTtcbiAgICAgICAgICAgIGlmKCFzZXJ2ZXJBcGkpIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIud2FybihgWyR7QXBpTGlua19DT05TVFMuYXR0cmlidXRlTmFtZX1dOiB1bmFibGUgdG8gY3JlYXRlIGFwaSBsaW5rIGZvcjogXCIke21ldGhvZE5hbWV9XCIsIHRoZSBtZXRob2QgaXMgbm90IHN1cHBvcnRlZGApO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBoYW5kbGVyKHNjcmVlbiwgc2VydmVyQXBpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGFkZEhhbmRsZXIobWV0aG9kTmFtZTogc3RyaW5nLCBoYW5kbGVyOiB0eXBlb2YgQmFzZUFwaUhhbmRsZXIpIHtcbiAgICAgICAgaWYodGhpcy5faGFuZGxlcnNbbWV0aG9kTmFtZV0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgcmUtcmVnaXN0ZXIgYXBpIGxpbmsgaGFuZGxlciwgJHttZXRob2ROYW1lfSBoYW5kbGVyIGFscmVhZHkgZXhpc3RgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9oYW5kbGVyc1ttZXRob2ROYW1lXSA9IGhhbmRsZXI7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhZGREZWZhdWx0SGFuZGxlcihoYW5kbGVyOiB0eXBlb2YgQmFzZUFwaUhhbmRsZXIpIHtcbiAgICAgICAgaWYodGhpcy5fZGVmYXVsdEhhbmRsZXIpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcihgQ2FuJ3QgcmVnaXN0ZXIgZGVmYXVsdCBBUEkgaGFuZGxlciwgb25lIGlzIGFscmVhZHkgcmVnaXN0ZXJlZGApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RlZmF1bHRIYW5kbGVyID0gaGFuZGxlcjtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0UmVxdWVzdFBhcmFtcygpOiBvYmplY3Q7XG5cbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgaGFuZGxlUmVzcG9uc2UocmVzcG9uc2U6IG9iamVjdCk7XG5cbn1cbiIsImltcG9ydCB7IEdJR1lBX1BBUkFNX1BSRUZJWCB9IGZyb20gJ3NyYy9hY2NvdW50cy9jb25zdGFudHMnO1xuaW1wb3J0IHsgTUFHSUNfTElOS19VTkFDQ0VQVEFCTEVfUEFSQU1TX1JFR0VYIH0gZnJvbSAnLi4vLi4vQ29uc3RhbnRzL21hZ2ljLWxpbmsnO1xuaW1wb3J0IHsgQmFzZUFwaUhhbmRsZXIgfSBmcm9tIFwiLi9CYXNlQXBpSGFuZGxlclwiO1xuXG5leHBvcnQgY2xhc3MgU2VuZE1hZ2ljTGlua0hhbmRsZXIgZXh0ZW5kcyBCYXNlQXBpSGFuZGxlciB7XG5cbiAgICBwcm90ZWN0ZWQgZ2V0UmVxdWVzdFBhcmFtcygpOiB7ZW1haWw6IHN0cmluZywgY29udGV4dD86IGFueX0ge1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5zY3JlZW4uX3NjcmVlblNldC5nZXRBcGlEYXRhKCkgfHwgIHt9O1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBlbWFpbDogYXBpRGF0YT8uaWRlbnRpZmllclxuICAgICAgICB9O1xuICAgICAgICBwYXJhbXNbJ2NvbnRleHQnXSA9IHRoaXMuZ2V0Q29udGV4dE9iamVjdCgpO1xuXG4gICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDb250ZXh0T2JqZWN0KCkge1xuICAgICAgICBjb25zdCB7IGxhbmcgfSA9IHRoaXMuc2NyZWVuLl9zY3JlZW5TZXQucGFyYW1zO1xuXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW1xuICAgICAgICAgICAgeyBsYW5nIH0sXG4gICAgICAgICAgICB0aGlzLnNjcmVlbi5fc2NyZWVuU2V0LnBhcmFtcy5jb250ZXh0LFxuICAgICAgICAgICAgZ2lneWEudXRpbHMuVVJMLmdldENvbnRleHRQYXJhbXNGcm9tVXJsKHsgdXJsOiBkb2N1bWVudC5sb2NhdGlvbi5ocmVmLCB1bmFjY2VwdGFibGVQYXJhbXM6IE1BR0lDX0xJTktfVU5BQ0NFUFRBQkxFX1BBUkFNU19SRUdFWCB9KVxuICAgICAgICBdKTtcblxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0LmFkZFByZWZpeFRvUHJvcGVydGllcyhjb250ZXh0LCBHSUdZQV9QQVJBTV9QUkVGSVgpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBoYW5kbGVSZXNwb25zZShyZXNwb25zZSkge31cbn1cblxuQmFzZUFwaUhhbmRsZXIuYWRkSGFuZGxlcignYWNjb3VudHMuYXV0aC5tYWdpY2xpbmsuZW1haWwuc2VuZCcsIFNlbmRNYWdpY0xpbmtIYW5kbGVyKTtcbiIsImltcG9ydCB7QmFzZUFwaUhhbmRsZXJ9IGZyb20gXCIuL0Jhc2VBcGlIYW5kbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBTZW5kT3RwQ29kZUhhbmRsZXIgZXh0ZW5kcyBCYXNlQXBpSGFuZGxlciB7XG4gICAgcHJvdGVjdGVkIGdldFJlcXVlc3RQYXJhbXMoKToge30ge1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5zY3JlZW4uX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XG4gICAgICAgIGNvbnN0IGFjY291bnRJbmZvID0gYXBpRGF0YT8uZ2V0QWNjb3VudEluZm8gfHwge307XG4gICAgICAgIGFjY291bnRJbmZvLmVtYWlsID0gYXBpRGF0YT8uaWRlbnRpZmllciB8fCBhY2NvdW50SW5mbz8uZW1haWwgfHwgYWNjb3VudEluZm8/LnByb2ZpbGU/LmVtYWlsO1xuICAgICAgICBjb25zdCByZXFQYXJhbXMgPSB7fTtcblxuICAgICAgICBpZiAoYWNjb3VudEluZm8ucGhvbmVOdW1iZXIpIHtcbiAgICAgICAgICAgIHJlcVBhcmFtc1sncGhvbmVOdW1iZXInXSA9IGFjY291bnRJbmZvLnBob25lTnVtYmVyO1xuICAgICAgICB9IGVsc2UgaWYgKGFjY291bnRJbmZvLmVtYWlsKSB7XG4gICAgICAgICAgICByZXFQYXJhbXNbJ2VtYWlsJ10gPSBhY2NvdW50SW5mby5lbWFpbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXFQYXJhbXM7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlOiB7fSkge1xuICAgICAgICAvLyBPbmx5IG92ZXJyaWRlIHZUb2tlbiB3aGVuIGl0IGlzIHJlY2VpdmVkIGluIHRoZSByZXNwb25zZVxuICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2VbJ3ZUb2tlbiddKVxuICAgICAgICAgICAgdGhpcy5zY3JlZW4uX3NjcmVlblNldC5kYXRhLm90cERhdGEudlRva2VuID0gcmVzcG9uc2VbJ3ZUb2tlbiddO1xuICAgIH1cbn1cblxuQmFzZUFwaUhhbmRsZXIuYWRkSGFuZGxlcignYWNjb3VudHMub3RwLnNlbmRDb2RlJywgU2VuZE90cENvZGVIYW5kbGVyKTtcbkJhc2VBcGlIYW5kbGVyLmFkZEhhbmRsZXIoJ2FjY291bnRzLmF1dGgub3RwLmVtYWlsLnNlbmRDb2RlJywgU2VuZE90cENvZGVIYW5kbGVyKTtcbiIsImltcG9ydCB7QmFzZUFwaUhhbmRsZXJ9IGZyb20gXCIuL0Jhc2VBcGlIYW5kbGVyXCI7XG5pbXBvcnQgeyBJU2VuZFZlcmlmaWNhdGlvblJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL0Zvcm1zL1B1c2hBdXRoTWV0aG9kRm9ybVwiO1xuXG5leHBvcnQgY2xhc3MgU2VuZFZlcmlmaWNhdGlvbkhhbmRsZXIgZXh0ZW5kcyBCYXNlQXBpSGFuZGxlciB7XG5cbiAgICBwcm90ZWN0ZWQgZ2V0UmVxdWVzdFBhcmFtcygpOiB7aWRlbnRpZmllcjogc3RyaW5nfSB7XG4gICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLnNjcmVlbi5fc2NyZWVuU2V0LmdldEFwaURhdGEoKSB8fCAge307XG4gICAgICAgIHJldHVybiB7aWRlbnRpZmllcjogYXBpRGF0YT8uaWRlbnRpZmllcn07XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlOiBJU2VuZFZlcmlmaWNhdGlvblJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gMCAmJiByZXNwb25zZS52VG9rZW4pIHtcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuLl9zY3JlZW5TZXQuZGF0YS5wdXNoRGF0YS52VG9rZW4gPSByZXNwb25zZS52VG9rZW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ2dpZ3lhLmFjY291bnRzLmF1dGgucHVzaC5zZW5kVmVyaWZpY2F0aW9uIGZhaWxlZCcpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5CYXNlQXBpSGFuZGxlci5hZGRIYW5kbGVyKCdhY2NvdW50cy5hdXRoLnB1c2guc2VuZFZlcmlmaWNhdGlvbicsIFNlbmRWZXJpZmljYXRpb25IYW5kbGVyKTtcbiIsImltcG9ydCB7QmFzZUFwaUhhbmRsZXJ9IGZyb20gXCIuL0Jhc2VBcGlIYW5kbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBTdGFuZGFyZEFwaUhhbmRsZXIgZXh0ZW5kcyBCYXNlQXBpSGFuZGxlciB7XG5cbiAgICBwcm90ZWN0ZWQgZ2V0UmVxdWVzdFBhcmFtcygpOiB7fSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaGFuZGxlUmVzcG9uc2UocmVzcG9uc2U6IHt9KSB7IH1cblxufVxuQmFzZUFwaUhhbmRsZXIuYWRkRGVmYXVsdEhhbmRsZXIoU3RhbmRhcmRBcGlIYW5kbGVyKTtcbiIsImV4cG9ydCAqIGZyb20gJy4vQmFzZUFwaUhhbmRsZXInO1xuZXhwb3J0ICogZnJvbSAnLi9TdGFuZGFyZEhhbmRsZXInO1xuZXhwb3J0ICogZnJvbSAnLi9TZW5kT3RwQ29kZUhhbmRsZXInO1xuZXhwb3J0ICogZnJvbSAnLi9TZW5kVmVyaWZpY2F0aW9uSGFuZGxlcic7XG5leHBvcnQgKiBmcm9tICcuL1NlbmRNYWdpY0xpbmtIYW5kbGVyJztcbiIsImltcG9ydCB7IElNYXAgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IGVudW0gQ2FwdGNoYVByb3ZpZGVyIHtcbiAgICBHT09HTEUgPSAnR29vZ2xlJyxcbiAgICBGVU5DQVBUQ0hBID0gJ0Z1bkNhcHRjaGEnLFxufVxuZXhwb3J0IGNvbnN0IENhcHRjaGFIYW5kbGVycyA9IHt9O1xuZXhwb3J0IGVudW0gQ2FwdGNoYU1vZGUge1xuICAgIHZpc2libGUgPSAndmlzaWJsZScsXG4gICAgaW52aXNpYmxlID0gJ2ludmlzaWJsZSdcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUNhcHRjaGFIYW5kbGVyU2V0dGluZ3Mge1xuICAgIGxhbmc6IHN0cmluZztcbiAgICBtb2RlOiBDYXB0Y2hhTW9kZTtcbn1cbmV4cG9ydCB0eXBlIENhcHRjaGFQYXJhbXMgPSBJQ2FwdGNoYUhhbmRsZXJTZXR0aW5ncyAmIElNYXA8c3RyaW5nPjtcbmV4cG9ydCBpbnRlcmZhY2UgSUNhcHRjaGFIYW5kbGVyIHtcbiAgICBpbml0KGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8Ym9vbGVhbj47XG4gICAgcmVzZXQoKTogdm9pZDtcbiAgICBnZXRUb2tlbigpOiBQcm9taXNlPHN0cmluZz47XG4gICAgZ2V0VHlwZSgpOiBzdHJpbmc7XG59XG5sZXQgbmV4dENhcHRjaGFJRCA9IDA7XG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUNhcHRjaGFIYW5kbGVyIGltcGxlbWVudHMgSUNhcHRjaGFIYW5kbGVyIHtcbiAgICBwcm90ZWN0ZWQgY2hhbGxlbmdlRXhlY3V0b3I6IFByb21pc2U8c3RyaW5nPjtcbiAgICBwcm90ZWN0ZWQgY2hhbGxlbmdlUmVmOiBhbnk7XG4gICAgcHJvdGVjdGVkIGNhcHRjaGFUb2tlbjogc3RyaW5nO1xuXG4gICAgcHJpdmF0ZSBfSUQgPSBgZ2lnX2NhcHRjaGFfJHsrK25leHRDYXB0Y2hhSUR9YDtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBwYXJhbXM6IENhcHRjaGFQYXJhbXMgPSB7fSBhcyBDYXB0Y2hhUGFyYW1zKSB7fVxuXG4gICAgcHVibGljIGFzeW5jIGluaXQoaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGlmICghdGhpcy5zaXRlS2V5KSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIud2FybignTWlzc2luZyBjYXB0Y2hhIGNvbmZpZ3VyYXRpb24nKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQcm92aWRlcigpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoaG9zdEVsZW1lbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGUubWVzc2FnZSB8fCBlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRJRCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fSUQ7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFRva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhcHRjaGFUb2tlbiB8fCAoYXdhaXQgdGhpcy5sYXp5RXhlY3V0ZU9yRmFpbCgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VHlwZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jYXB0Y2hhVHlwZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FwdGNoYVRva2VuID0gbnVsbDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHNpdGVLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJbnZpc2libGUgPyB0aGlzLmludmlzaWJsZVNpdGVLZXkgOiB0aGlzLnZpc2libGVTaXRlS2V5O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBsb2FkUHJvdmlkZXIoKTogUHJvbWlzZTx2b2lkPjtcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCByZW5kZXIoaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZDtcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBsYXp5RXhlY3V0ZU9yRmFpbCgpOiBQcm9taXNlPHN0cmluZz47XG5cbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0IHByb3ZpZGVyVVJMKCk6IHN0cmluZztcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXQgaW52aXNpYmxlU2l0ZUtleSgpOiBzdHJpbmc7XG5cbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0IHZpc2libGVTaXRlS2V5KCk6IHN0cmluZztcbiAgICBcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0IGNhcHRjaGFUeXBlKCk6IHN0cmluZztcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXQgcHJvdmlkZXIoKTogQ2FwdGNoYVByb3ZpZGVyO1xuXG4gICAgcHJvdGVjdGVkIGdldCBpc0ludmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLm1vZGUgPT09IENhcHRjaGFNb2RlLmludmlzaWJsZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGNhbGxiYWNrSUQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBnaWdfJHt0aGlzLnByb3ZpZGVyfV9vbkxvYWRgO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEJhc2VDYXB0Y2hhSGFuZGxlciwgQ2FwdGNoYVByb3ZpZGVyLCBDYXB0Y2hhSGFuZGxlcnMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0NhcHRjaGFIYW5kbGVyL0Jhc2VDYXB0Y2hhSGFuZGxlcic7XG5pbXBvcnQgeyBDYXB0Y2hhIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9DYXB0Y2hhJztcblxuY29uc3QgZ2xvYmFsID0gd2luZG93IGFzIFdpbmRvdyAmIGFueTtcbmRlY2xhcmUgbGV0IEZ1bkNhcHRjaGE6IENhcHRjaGE7XG5sZXQgZnVuQ2FwdGNoYUxvYWQ6IFByb21pc2U8dm9pZD47XG5leHBvcnQgY2xhc3MgRnVuQ2FwdGNoYUhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FwdGNoYUhhbmRsZXIge1xuICAgIHByb3RlY3RlZCByZW5kZXIoaG9zdEVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2hhbGxlbmdlRXhlY3V0b3IgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuSW5wdXQgPSBob3N0RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cImZjLXRva2VuXCJdJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcHRjaGFUb2tlbiA9IHRva2VuSW5wdXQgJiYgdG9rZW5JbnB1dC52YWx1ZTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuY2FwdGNoYVRva2VuKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGlkID0gYCR7dGhpcy5nZXRJRCgpfV8ke0RhdGUubm93KCl9YDtcbiAgICAgICAgICAgIGhvc3RFbGVtZW50LmlubmVySFRNTCA9IGA8ZGl2IGlkPVwiJHtpZH1cIj48L2Rpdj5gO1xuICAgICAgICAgICAgdGhpcy5jaGFsbGVuZ2VSZWYgPSBuZXcgRnVuQ2FwdGNoYSh7XG4gICAgICAgICAgICAgICAgcHVibGljX2tleTogdGhpcy5zaXRlS2V5LFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlOiB0aGlzLnBhcmFtcy5sYW5nLFxuICAgICAgICAgICAgICAgIHRhcmdldF9odG1sOiBpZCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjayxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0eXBlb2YgRnVuQ2FwdGNoYSAhPSAndW5kZWZpbmVkJyAmJiB0aGlzLmNoYWxsZW5nZVJlZiAmJiB0aGlzLmNhcHRjaGFUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5jaGFsbGVuZ2VSZWYucmVmcmVzaF9zZXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIucmVzZXQoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgbG9hZFByb3ZpZGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodHlwZW9mIEZ1bkNhcHRjaGEgIT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgICAgIGVsc2UgaWYgKCFmdW5DYXB0Y2hhTG9hZCkge1xuICAgICAgICAgICAgZnVuQ2FwdGNoYUxvYWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsW3RoaXMuY2FsbGJhY2tJRF0gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBnbG9iYWxbdGhpcy5jYWxsYmFja0lEXTtcbiAgICAgICAgICAgICAgICAgICAgdHlwZW9mIEZ1bkNhcHRjaGEgIT09ICd1bmRlZmluZWQnID8gcmVzb2x2ZSgpIDogcmVqZWN0KGBlcnJvciB3aGlsZSB0cnlpbmcgdG8gbG9hZCBGdW5DYXB0Y2hhYCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5zY3JpcHQubG9hZCh0aGlzLnByb3ZpZGVyVVJMLCByZWplY3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bkNhcHRjaGFMb2FkO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBsYXp5RXhlY3V0ZU9yRmFpbCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICAvLyBGdW5DYXB0Y2hhIGRvbid0IGhhdmUgbGF6eSBleGVjdXRpb24gYXMgLSBmb3IgZXhhbXBsZSAtIGdvb2dsZSdzIGludmlzaWJsZSBjYXB0Y2hhXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY2FwdGNoYU5lZWRlZCcpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgcHJvdmlkZXIoKTogQ2FwdGNoYVByb3ZpZGVyIHtcbiAgICAgICAgcmV0dXJuIENhcHRjaGFQcm92aWRlci5GVU5DQVBUQ0hBO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgY2FwdGNoYVR5cGUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBGdW5DYXB0Y2hhYDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHByb3ZpZGVyVVJMKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgLy9mdW5jYXB0Y2hhLmNvbS9mYy9hcGkvP29ubG9hZD0ke3RoaXMuY2FsbGJhY2tJRH1gO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgaW52aXNpYmxlU2l0ZUtleSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZ2lneWEucGFydG5lclNldHRpbmdzLmZ1bkNhcHRjaGEgJiYgZ2lneWEucGFydG5lclNldHRpbmdzLmZ1bkNhcHRjaGEuc2l0ZUtleTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHZpc2libGVTaXRlS2V5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MuZnVuQ2FwdGNoYSAmJiBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MuZnVuQ2FwdGNoYS5zaXRlS2V5O1xuICAgIH1cbn1cbkNhcHRjaGFIYW5kbGVyc1tDYXB0Y2hhUHJvdmlkZXIuRlVOQ0FQVENIQV0gPSBGdW5DYXB0Y2hhSGFuZGxlcjtcbiIsImltcG9ydCB7IEJhc2VDYXB0Y2hhSGFuZGxlciwgQ2FwdGNoYVByb3ZpZGVyLCBDYXB0Y2hhSGFuZGxlcnMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0NhcHRjaGFIYW5kbGVyL0Jhc2VDYXB0Y2hhSGFuZGxlcic7XG5pbXBvcnQgeyBQYXJhbWV0ZXJzLCBCYWRnZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ2FwdGNoYSc7XG5cbmV4cG9ydCBsZXQgZ3JlQ2FwdGNoYUxvYWQ6IFByb21pc2U8dm9pZD47XG5jb25zdCB1bmlxdWVHb29nbGVMb2NhbGVDb2RlcyA9IHtcbiAgICBicjogJ2JnJyxcbiAgICBoZTogJ2l3JyxcbiAgICAnZXMtbXgnOiAnZXMtNDE5JyxcbiAgICB0bDogJ2ZpbCcsXG59O1xuXG5leHBvcnQgY2xhc3MgR29vZ2xlQ2FwdGNoYUhhbmRsZXIgZXh0ZW5kcyBCYXNlQ2FwdGNoYUhhbmRsZXIge1xuXG4gICAgcHJpdmF0ZSBfY2hhbGxlbmdlUmVzb2x2ZXI6ICh0b2tlbjogc3RyaW5nKSA9PiB2b2lkO1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgUkVDQVBUQ0hBX0RPTUFJTiA9ICd3d3cucmVjYXB0Y2hhLm5ldCc7XG4gICAgcHJpdmF0ZSBzdGF0aWMgR09PR0xFX0RPTUFJTiA9ICd3d3cuZ29vZ2xlLmNvbSc7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBDQVBUQ0hBX0VOVEVSUFJJU0VfVFlQRSA9ICdyZUNhcHRjaGFFbnRlcnByaXNlU2NvcmUnO1xuICAgIHByaXZhdGUgc3RhdGljIENBUFRDSEFfVjNfVFlQRSA9ICdyZUNhcHRjaGFWMyc7XG5cbiAgICBwcm90ZWN0ZWQgcmVuZGVyKGhvc3RFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gKHRva2VuOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2FwdGNoYVRva2VuID0gdG9rZW47XG4gICAgICAgICAgICB0aGlzLl9jaGFsbGVuZ2VSZXNvbHZlcih0b2tlbik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlY2FwdGNoYVBhcmFtcyA9IHtcbiAgICAgICAgICAgIHNpdGVrZXk6IHRoaXMuc2l0ZUtleSxcbiAgICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICAgICAgdHlwZTogdGhpcy5wYXJhbXNbJ3R5cGUnXSxcbiAgICAgICAgICAgIHRoZW1lOiB0aGlzLnBhcmFtc1sndGhlbWUnXSxcbiAgICAgICAgICAgIHNpemU6IHRoaXMucGFyYW1zWydzaXplJ10sXG4gICAgICAgICAgICBsYW5nOiB0aGlzLl9sYW5nLFxuICAgICAgICAgICAgJ2V4cGlyZWQtY2FsbGJhY2snOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gYXMgUGFyYW1ldGVycztcblxuICAgICAgICBpZiAodGhpcy5pc0ludmlzaWJsZSkge1xuICAgICAgICAgICAgcmVjYXB0Y2hhUGFyYW1zLmJhZGdlID0gdGhpcy5wYXJhbXNbJ2JhZGdlJ10gYXMgQmFkZ2U7XG4gICAgICAgICAgICByZWNhcHRjaGFQYXJhbXMuc2l6ZSA9ICdpbnZpc2libGUnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaWQgPSBgJHt0aGlzLmdldElEKCl9XyR7RGF0ZS5ub3coKX1gO1xuICAgICAgICBob3N0RWxlbWVudC5pbm5lckhUTUwgPSBgPGRpdiBpZD1cIiR7aWR9XCI+PC9kaXY+YDtcbiAgICAgICAgdGhpcy5fY3JlYXRlQ2hhbGxlbmdlRXhlY3V0b3IoKTtcbiAgICAgICAgdGhpcy5jaGFsbGVuZ2VSZWYgPSBnaWd5YS51dGlscy5yZWNhcHRjaGEuZ2V0SW5zdGFuY2Uoe1xuICAgICAgICAgICAgaXNFbnRlcnByaXNlOiB0aGlzLmlzRW50ZXJwcmlzZVxuICAgICAgICB9KS5yZW5kZXIoaWQsIHJlY2FwdGNoYVBhcmFtcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgICAgICBsZXQgcGFyYW1zID0ge1xuICAgICAgICAgICAgaXNFbnRlcnByaXNlOiB0aGlzLmlzRW50ZXJwcmlzZVxuICAgICAgICB9O1xuICAgICAgICBsZXQgaW5zdGFuY2UgPSBnaWd5YS51dGlscy5yZWNhcHRjaGEuZ2V0SW5zdGFuY2UocGFyYW1zKTtcbiAgICAgICAgaWYgKHR5cGVvZiAoaW5zdGFuY2UpICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdGhpcy5jaGFsbGVuZ2VSZWYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5yZXNldCh0aGlzLmNoYWxsZW5nZVJlZik7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVDaGFsbGVuZ2VFeGVjdXRvcigpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIGxvYWRQcm92aWRlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGdpZ3lhLnV0aWxzLnJlY2FwdGNoYS5sb2FkKHtcbiAgICAgICAgICAgIHNpdGVLZXk6ICB0aGlzLmNhcHRjaGFFbnRlcnByaXNlS2V5IHx8IHRoaXMuY2FwdGNoYVYzS2V5IHx8IHRoaXMuc2l0ZUtleSxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMuTG9hZGluZ0NhcHRjaGFUeXBlLFxuICAgICAgICAgICAgY2FsbGJhY2tJRDogdGhpcy5jYWxsYmFja0lELFxuICAgICAgICAgICAgbGFuZzogdGhpcy5fbGFuZyxcbiAgICAgICAgICAgIGlzRW50ZXJwcmlzZTogdGhpcy5pc0VudGVycHJpc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGxhenlFeGVjdXRlT3JGYWlsKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGlmICh0aGlzLmlzSW52aXNpYmxlKSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5yZWNhcHRjaGEuZ2V0SW5zdGFuY2Uoe1xuICAgICAgICAgICAgICAgIGlzRW50ZXJwcmlzZTogdGhpcy5pc0VudGVycHJpc2VcbiAgICAgICAgICAgIH0pLmV4ZWN1dGUodGhpcy5jaGFsbGVuZ2VSZWYpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhbGxlbmdlRXhlY3V0b3I7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYXB0Y2hhTmVlZGVkJyk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBwcm92aWRlcigpOiBDYXB0Y2hhUHJvdmlkZXIge1xuICAgICAgICByZXR1cm4gQ2FwdGNoYVByb3ZpZGVyLkdPT0dMRTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGNhcHRjaGFUeXBlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzSW52aXNpYmxlID8gJ2ludmlzaWJsZScgOiBgcmVDYXB0Y2hhVjJgO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgTG9hZGluZ0NhcHRjaGFUeXBlKCk6IHN0cmluZyB7XG4gICAgICAgIGlmKHRoaXMuY2FwdGNoYUVudGVycHJpc2VLZXkpe1xuICAgICAgICAgICAgcmV0dXJuIEdvb2dsZUNhcHRjaGFIYW5kbGVyLkNBUFRDSEFfRU5URVJQUklTRV9UWVBFO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuY2FwdGNoYVYzS2V5KXtcbiAgICAgICAgICAgIHJldHVybiBHb29nbGVDYXB0Y2hhSGFuZGxlci5DQVBUQ0hBX1YzX1RZUEU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FwdGNoYVR5cGU7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBwcm92aWRlclVSTCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYC8vJHt0aGlzLl9kb21haW59L3JlY2FwdGNoYS9hcGkuanM/JHt0aGlzLmxvYWRRdWVyeVBhcmFtc31gO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgbG9hZFF1ZXJ5UGFyYW1zKCk6IHN0cmluZyB7XG4gICAgICAgIGlmKHRoaXMuY2FwdGNoYVYzS2V5KXtcbiAgICAgICAgICAgIHJldHVybiBgcmVuZGVyPSR7dGhpcy5jYXB0Y2hhVjNLZXl9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYHJlbmRlcj1leHBsaWNpdCZvbmxvYWQ9JHt0aGlzLmNhbGxiYWNrSUR9JmhsPSR7dGhpcy5fbGFuZ31gO1xuICAgIH1cbiAgICBwcm90ZWN0ZWQgZ2V0IGlzRW50ZXJwcmlzZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jYXB0Y2hhRW50ZXJwcmlzZUtleTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGludmlzaWJsZVNpdGVLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5pbnZpc2libGVSZWNhcHRjaGE/LnNpdGVLZXk/LnRyaW0oKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHZpc2libGVTaXRlS2V5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MucmVjYXB0Y2hhVjI/LnNpdGVLZXk/LnRyaW0oKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGNhcHRjaGFWM0tleSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZ2lneWEucGFydG5lclNldHRpbmdzLnJlY2FwdGNoYVYzPy5zaXRlS2V5Py50cmltKCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBjYXB0Y2hhRW50ZXJwcmlzZUtleSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZ2lneWEucGFydG5lclNldHRpbmdzPy5yZWNhcHRjaGFFbnRlcnByaXNlPy5zaXRlS2V5Py50cmltKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY3JlYXRlQ2hhbGxlbmdlRXhlY3V0b3IoKSB7XG4gICAgICAgIHRoaXMuY2hhbGxlbmdlRXhlY3V0b3IgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2NoYWxsZW5nZVJlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgX2RvbWFpbigpIHtcbiAgICAgICAgY29uc3QgaXNDTkRhdGFDZW50ZXIgPSBnaWd5YS5kYXRhQ2VudGVyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignY24xJykgPT09IDA7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtc1snZ29vZ2xlQ2FwdGNoYURvbWFpbiddIHx8IChpc0NORGF0YUNlbnRlciA/IEdvb2dsZUNhcHRjaGFIYW5kbGVyLlJFQ0FQVENIQV9ET01BSU4gOiBHb29nbGVDYXB0Y2hhSGFuZGxlci5HT09HTEVfRE9NQUlOKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBfbGFuZygpIHtcbiAgICAgICAgcmV0dXJuIHVuaXF1ZUdvb2dsZUxvY2FsZUNvZGVzW3RoaXMucGFyYW1zLmxhbmddIHx8IHRoaXMucGFyYW1zLmxhbmc7XG4gICAgfVxufVxuQ2FwdGNoYUhhbmRsZXJzW0NhcHRjaGFQcm92aWRlci5HT09HTEVdID0gR29vZ2xlQ2FwdGNoYUhhbmRsZXI7XG4iLCJleHBvcnQgKiBmcm9tICcuL0FwaUhhbmRsZXInO1xuZXhwb3J0ICogZnJvbSAnLi9DYXB0Y2hhSGFuZGxlci9CYXNlQ2FwdGNoYUhhbmRsZXInO1xuZXhwb3J0ICogICBmcm9tICcuL0NhcHRjaGFIYW5kbGVyL0Z1bkNhcHRjaGFIYW5kbGVyJztcbmV4cG9ydCAqICBmcm9tICcuL0NhcHRjaGFIYW5kbGVyL0dvb2dsZUNhcHRjaGFIYW5kbGVyJztcbiIsImltcG9ydCB7XG4gIEZvcm1JbnB1dCxcbiAgRm9ybUlucHV0X0NPTlNUUyxcbiAgSUZvcm1JbnB1dENvbnRleHQsXG4gIElWYWxpZGF0aW9uQ2FsbGJhY2ssXG4gIFZhbGlkaXR5U3RhdGVzXG59IGZyb20gXCJzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXRcIjtcbmltcG9ydCB7R1NFcnJvcnN9IGZyb20gXCIuLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9yc1wiO1xuaW1wb3J0IHtFcnJvclR5cGUsIElFcnJvckluZm99IGZyb20gXCIuLi9FcnJvcnNcIjtcbmltcG9ydCB7VHlwZWFoZWFkSW5wdXR9IGZyb20gXCIuLi90eXBlYWhlYWQvdHlwZWFoZWFkLWlucHV0XCI7XG5pbXBvcnQge0dlb0xvY2F0aW9ufSBmcm9tIFwiLi4vdHlwZWFoZWFkL2dlby1sb2NhdGlvblwiO1xuaW1wb3J0IHtpc0RPTVhTU30gZnJvbSBcIi4uL3V0aWxzXCI7XG5cblxuY29uc3QgQWRkcmVzc0lucHV0Q29uc3RzID0ge1xuICBnaWd5YUFkZHJlc3NJbnB1dEF0dHI6IFwidHlwZWFoZWFkXCIsXG4gIGFsbG93VHlwZUFoZWFkTG9jYXRpb246IFwidHlwZWFoZWFkLWxvY2F0aW9uXCIsXG4gIGRlZmF1bHRDb3VudHJ5U2NoZW1hRmllbGQ6IFwidHlwZWFoZWFkLWNvdW50cnktc2NoZW1hXCJcbn1cblxuaW50ZXJmYWNlIElBZGRyZXNzU3VnZ2VzdGlvbiB7XG4gIGFkZHJlc3M6IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbn1cbmV4cG9ydCBjbGFzcyBBZGRyZXNzSW5wdXQgZXh0ZW5kcyBUeXBlYWhlYWRJbnB1dCB7XG4gIHByaXZhdGUgY3VycmVudFN1Z2dlc3Rpb25zOiBJQWRkcmVzc1N1Z2dlc3Rpb25bXSA9IFtdO1xuICBwcml2YXRlIGlzQWRkcmVzc0NoYW5nZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgZ2VvbG9jYXRpb24gPSBuZXcgR2VvTG9jYXRpb24oKTtcbiAgcHJpdmF0ZSBtaW5DaGFyYWN0ZXJzQmVmb3JlU2VydmVyID0gMztcblxuICBwdWJsaWMgc3RhdGljIEZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgIHJldHVybiBjb250ZXh0LmVsZW1lbnQuZ2V0QXR0cmlidXRlKEFkZHJlc3NJbnB1dENvbnN0cy5naWd5YUFkZHJlc3NJbnB1dEF0dHIpID09PSAndHJ1ZSc7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgIHN1cGVyKGNvbnRleHQpO1xuICAgIGNvbnRleHQuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhdXRvY29tcGxldGVcIiwgXCJvZmZcIik7XG4gIH1cblxuICBwdWJsaWMgYWxsb3dHZW9sb2NhdGlvbigpe1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8uZ2V0QXR0cmlidXRlKEFkZHJlc3NJbnB1dENvbnN0cy5hbGxvd1R5cGVBaGVhZExvY2F0aW9uKSA9PT0gJ3RydWUnO1xuICB9XG5cbiAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRm9ybUVsZW1lbnQpIHtcbiAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgaWYoIXRoaXMuaXNTdWJUeXBBZGRyZXNzKXtcbiAgICAgIHRoaXMuZ2VvbG9jYXRpb24gPSBudWxsO1xuICAgICAgLy9ob3cgdG8gZGVhY3RpdmF0ZSB0eXBlYWhlYWRcbiAgICB9XG4gICAgICB0aGlzLmluaXQodGhpcy5pbnN0YW5jZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudCxcbiAgICAgICAgICAoKSA9PiB0aGlzLl9mb3JtLm9uSW5wdXRDaGFuZ2UodGhpcywgZmFsc2UpLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG1pbmltdW1DaGFyYWN0ZXJzOiB0aGlzLm1pbkNoYXJhY3RlcnNCZWZvcmVTZXJ2ZXIsXG4gICAgICAgICAgICBhZnRlclNlbGVjdENhbGxiYWNrOiB0aGlzLm9uQWZ0ZXJTZWxlY3RDYWxsYmFjay5iaW5kKHRoaXMpfSk7XG4gICAgICBpZih0aGlzLmFsbG93R2VvbG9jYXRpb24oKSl7XG4gICAgICAgIHRoaXMuZ2VvbG9jYXRpb24/LmluaXQoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzU3ViVHlwQWRkcmVzcygpOiBib29sZWFue1xuICAgIGNvbnN0IHNjaGVtYUZpZWxkID0gdGhpcy5fZm9ybS5nZXRGaWVsZFNjaGVtYSh0aGlzKTtcbiAgICByZXR1cm4gc2NoZW1hRmllbGQ/LnN1YlR5cGUgPT09IFwiYWRkcmVzc1wiO1xuICB9XG5cbiAgcHVibGljIG9uQWZ0ZXJTZWxlY3RDYWxsYmFjaygpe1xuICAgIGlmKHRoaXMuaXNTZWxlY3RlZEFkZHJlc3ModGhpcy5maWVsZFZhbHVlKSl7XG4gICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5maW5kQWRkcmVzcyh0aGlzLmZpZWxkVmFsdWUpXG4gICAgICB0aGlzLnNlbGVjdGVkQWRkcmVzcyhhZGRyZXNzKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcHJlUG9wdWxhdGUodmFsdWU6IHN0cmluZyB8IGJvb2xlYW4gfCBzdHJpbmdbXSk6IHZvaWQge1xuICAgIHN1cGVyLnByZVBvcHVsYXRlKHZhbHVlIGFzIHN0cmluZyB8IGJvb2xlYW4pO1xuICAgIGlmKHRoaXMuaXNTdWJUeXBBZGRyZXNzKXtcbiAgICAgIHRoaXMuZmV0Y2hTdWdnZXN0aW9ucyh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpO1xuICB9XG5cbiAgcHVibGljIG9uRmllbGRDaGFuZ2Uoc2V0QnlTY3JpcHQ6IGJvb2xlYW4pIHtcbiAgICBpZiAoISF0aGlzLmZpZWxkVmFsdWUgJiYgdGhpcy5maWVsZFZhbHVlICE9PSB0aGlzLnByZXZpb3VzVmFsdWVcbiAgICAgICAgJiYgIXRoaXMuaXNTZWxlY3RlZEFkZHJlc3ModGhpcy5maWVsZFZhbHVlKSkge1xuICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5pc0FkZHJlc3NDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIGlmKHRoaXMuaXNTdWJUeXBBZGRyZXNzKXtcbiAgICAgICAgdGhpcy5mZXRjaFN1Z2dlc3Rpb25zKHRoaXMuZ2V0VmFsdWUoKSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHN1cGVyLm9uRmllbGRDaGFuZ2Uoc2V0QnlTY3JpcHQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgZmllbGRWYWx1ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAodGhpcy5nZXRWYWx1ZSgpIGFzIHN0cmluZykgPz8gXCJcIjtcbiAgfVxuXG4gIHB1YmxpYyBmaW5kQWRkcmVzcyhmaWVsZFZhbHVlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50U3VnZ2VzdGlvbnM/LmZpbmQoKGVudHJ5KSA9PiBlbnRyeS5hZGRyZXNzID09PSBmaWVsZFZhbHVlKTtcbiAgfVxuXG4gIHByaXZhdGUgZmV0Y2hTdWdnZXN0aW9ucyhmaWVsZFZhbHVlOiBhbnksIHNob3dMb2FkaW5nOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5zdGFuY2VFbGVtZW50IHx8IGZpZWxkVmFsdWU/Lmxlbmd0aCA8IHRoaXMubWluQ2hhcmFjdGVyc0JlZm9yZVNlcnZlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnN0YXJ0U2VydmVyUXVlcnkoKTtcbiAgICBpZiAoc2hvd0xvYWRpbmcpIHRoaXMuc2V0TG9hZGluZyh0cnVlKTtcbiAgICB0aGlzLmNsZWFyU2VydmVyRXJyb3IoKTtcblxuICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNlcnZlclZhbGlkYXRpb24pO1xuICAgIGNvbnN0IGNvdW50cnkgPSB0aGlzLmdldERlZmF1bHRMb2NhdGlvblBhcmFtKCk7XG4gICAgY29uc3QgZ2VvTG9jYXRpb24gPSB0aGlzLmdldENvb3JkaW5hdGVzKCk7XG4gICAgZ2lneWEuYWNjb3VudHMuYWRkcmVzcy5zdWdnZXN0aW9ucy5nZXQoe1xuICAgICAgYWRkcmVzczogZmllbGRWYWx1ZSxcbiAgICAgIGNvdW50cnksXG4gICAgICBsb25naXR1ZGU6IGdlb0xvY2F0aW9uPy5sb25naXR1ZGUsXG4gICAgICBsYXRpdHVkZTogZ2VvTG9jYXRpb24/LmxhdGl0dWRlLFxuICAgICAgY2FsbGJhY2s6IChyZXMpID0+IHRoaXMuc2VydmVyUXVlcnlEb25lKHJlcywgZmllbGRWYWx1ZSwgdGhpcy5oYW5kbGVTZXJ2ZXJEYXRhRXJyb3IpLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb29yZGluYXRlcygpe1xuICAgIGlmKHRoaXMuYWxsb3dHZW9sb2NhdGlvbigpKXtcbiAgICAgIHJldHVybiB0aGlzLmdlb2xvY2F0aW9uPy5nZXRQb3NpdGlvbigpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGVmYXVsdExvY2F0aW9uUGFyYW0oKXtcbiAgICBjb25zdCBzY2hlbWFGaWVsZCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShBZGRyZXNzSW5wdXRDb25zdHMuZGVmYXVsdENvdW50cnlTY2hlbWFGaWVsZCk7XG4gICAgY29uc3QgYWNjb3VudEluZm8gPSB0aGlzLl9mb3JtLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhW1wiZ2V0QWNjb3VudEluZm9cIl07XG4gICAgaWYoc2NoZW1hRmllbGQpe1xuICAgICAgY29uc3QgZmllbGQgPSB0aGlzLl9mb3JtLmRhdGFUb1NlcnZlci5maW5kKGZpZWxkID0+IGZpZWxkLmluc3RhbmNlRWxlbWVudD8uZ2V0QXR0cmlidXRlKCduYW1lJykgPT09IHNjaGVtYUZpZWxkKTtcbiAgICAgIGxldCBmaWVsZFZhbHVlID0gZmllbGQ/IGZpZWxkLmdldFZhbHVlKCkgOiAnJztcbiAgICAgIGlmKGZpZWxkVmFsdWUgJiYgdHlwZW9mIGZpZWxkVmFsdWUgPT09ICdzdHJpbmcnICYmIGlzRE9NWFNTKGZpZWxkVmFsdWUpKSB7XG4gICAgICAgICAgZmllbGRWYWx1ZSA9IGdpZ3lhLnV0aWxzLnNhbml0aXplLnNhbml0aXplSFRNTChmaWVsZFZhbHVlKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZpZWxkVmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBhY2NvdW50SW5mbz8ucHJvZmlsZT8uY291bnRyeSA/PyBcIlwiO1xuICB9XG5cblxuICBwcml2YXRlIHNlbGVjdGVkQWRkcmVzcyhzZWxlY3RlZEFkZHJlc3M6IElBZGRyZXNzU3VnZ2VzdGlvbikge1xuICAgIHNlbGVjdGVkQWRkcmVzcyAmJlxuICAgICAgc2VsZWN0ZWRBZGRyZXNzLmlkICYmXG4gICAgICAgIHRoaXMuaXNTdWJUeXBBZGRyZXNzICYmXG4gICAgICBnaWd5YS5hY2NvdW50cy5hZGRyZXNzLnN1Z2dlc3Rpb25zLmdldCh7XG4gICAgICAgIGFkZHJlc3M6IHNlbGVjdGVkQWRkcmVzcy5hZGRyZXNzLFxuICAgICAgICBzdWdnZXN0aW9ucmVwbHk6IFtzZWxlY3RlZEFkZHJlc3MuaWRdLFxuICAgICAgICBjYWxsYmFjazogKHJlcykgPT5cbiAgICAgICAgICB0aGlzLmhhbmRsZVNlcnZlckRhdGFFcnJvcih7XG4gICAgICAgICAgICBlcnJvckNvZGU6IHJlcy5lcnJvckNvZGUsXG4gICAgICAgICAgICBmaWVsZDogdGhpcyxcbiAgICAgICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLnNlcnZlcixcbiAgICAgICAgICB9KSxcbiAgICAgIH0pO1xuICB9XG5cbiAgLy9TZXJ2ZXIgcmVzcG9uc2UgaGFuZGxpbmdcblxuICBwdWJsaWMgc2VydmVyUXVlcnlEb25lKHJlczogYW55LCBjaGVja2VkVmFsdWUsIGNhbGxiYWNrOiBJVmFsaWRhdGlvbkNhbGxiYWNrKSB7XG4gICAgLy8gcmVzcG9uc2UgaXMgbm8gbG9uZ2VyIHJlbGV2YW50IGR1ZSB0byBzY3JlZW4gZ29pbmcgb3V0IG9mIHZpZXdcbiAgICBpZiAoIXRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcmVzcG9uc2UgaXMgbm8gbG9uZ2VyIHJlbGV2YW50IGR1ZSB0byB2YWx1ZSBjaGFuZ2VcbiAgICBpZiAodGhpcy5nZXRWYWx1ZSgpICE9PSBjaGVja2VkVmFsdWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgZXJyb3JDb2RlOiBHU0Vycm9ycyA9IHJlcy5lcnJvckNvZGU7XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgbGV0IG5vRGF0YU1lc3NhZ2UgPSBcIlwiO1xuXG4gICAgc3dpdGNoIChlcnJvckNvZGUpIHtcbiAgICAgIGNhc2UgR1NFcnJvcnMuT0s6XG4gICAgICAgIGlmICghcmVzLnN1Z2dlc3Rpb25zPy5sZW5ndGgpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dChcImRxbV9zZWxlY3Rpb25fZXJyb3JcIik7XG4gICAgICAgICAgbm9EYXRhTWVzc2FnZT0gXCJub19kcW1fcmVzdWx0c19mb3VuZFwiO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBHU0Vycm9ycy5VTkFVVEhPUklaRURfQUNDRVNTX0VSUk9SOlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dChcIm1pc3NpbmdfZHFtX2NyZWRlbnRpYWxzXCIpXG4gICAgICAgIG5vRGF0YU1lc3NhZ2U9IFwiZHFtX2dlbmVyYWxfZXJyb3JcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dChcImRxbV9nZW5lcmFsX2Vycm9yXCIpO1xuICAgICAgICBub0RhdGFNZXNzYWdlID0gZXJyb3JNZXNzYWdlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50U3VnZ2VzdGlvbnMgPSByZXMuc3VnZ2VzdGlvbnMgfHwgW107XG4gICAgY29uc3QgaXNXYXJuaW5nID0gIXRoaXMuY3VycmVudFN1Z2dlc3Rpb25zLmxlbmd0aDtcbiAgICB0aGlzLnNldE9wdGlvbnMoXG4gICAgICAgIHRoaXMuY3VycmVudFN1Z2dlc3Rpb25zLm1hcCgoZSkgPT4gZS5hZGRyZXNzKVxuICAgICk7XG5cbiAgICB0aGlzLm9uU2VydmVyRW5kKGVycm9yQ29kZSk7XG5cbiAgICBjYWxsYmFjayh7XG4gICAgICBlcnJvckNvZGU6IGVycm9yQ29kZSxcbiAgICAgIGZpZWxkOiB0aGlzLFxuICAgICAgZXJyb3JNZXNzYWdlOiB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dChlcnJvck1lc3NhZ2UpLFxuICAgICAgZXJyb3JUeXBlOiBFcnJvclR5cGUuc2VydmVyLFxuICAgICAgaXNXYXJuaW5nLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVTZXJ2ZXJEYXRhRXJyb3IodmFsaWRhdGlvbkluZm8pIHtcbiAgICBjb25zdCBlcnJvckluZm86IElFcnJvckluZm8gPSB7XG4gICAgICBmaWVsZDogdmFsaWRhdGlvbkluZm8uZmllbGQsXG4gICAgICBlcnJvckNvZGU6IHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSxcbiAgICAgIGVycm9yVHlwZTogdmFsaWRhdGlvbkluZm8uZXJyb3JUeXBlLFxuICAgICAgY3VzdG9tTWVzc2FnZTogdmFsaWRhdGlvbkluZm8uZXJyb3JNZXNzYWdlLFxuICAgICAgaXNXYXJuOiB2YWxpZGF0aW9uSW5mby5pc1dhcm5pbmcsXG4gICAgfTtcbiAgICBpZihlcnJvckluZm8uZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5PSyl7XG4gICAgICBnaWd5YS5sb2dnZXIud2FybihcIlJlc3BvbnNlIGZhaWxlZCBmb3IgZmV0Y2ggc3VnZ2VzdGlvblwiLCBlcnJvckluZm8pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFZhbGlkYXRpb25zXG5cbiAgcHVibGljIGlzU2VsZWN0ZWRBZGRyZXNzKGZpZWxkVmFsdWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMuZmluZEFkZHJlc3MoZmllbGRWYWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgc2VydmVyVmFsaWRhdGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyB2YWxpZGF0ZVZhbHVlKGZvcm1EYXRhOiBhbnksIGZpZWxkVmFsdWU6IGFueSwgY2FsbGJhY2s6IElWYWxpZGF0aW9uQ2FsbGJhY2spOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyU2VydmVyRXJyb3IoKTtcbiAgICBpZighdGhpcy5zaG91bGRWYWxpZGF0ZShmaWVsZFZhbHVlKSl7XG4gICAgICB0aGlzLl92YWxpZGl0eVN0YXRlID0gVmFsaWRpdHlTdGF0ZXMuX3VuZGVmaW5lZDtcbiAgICAgIHJldHVybiBjYWxsYmFjayh7IGVycm9yQ29kZTogR1NFcnJvcnMuT0ssIGZpZWxkOiB0aGlzIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNob3VsZFZhbGlkYXRlV2l0aFdhcm5pbmcoZmllbGRWYWx1ZSkpIHtcbiAgICAgIHRoaXMuc2hvd1dhcm5pbmcoKTtcbiAgICAgIHRoaXMuX3ZhbGlkaXR5U3RhdGUgPSBWYWxpZGl0eVN0YXRlcy5lcnJvcjtcbiAgICAgIHJldHVybiBjYWxsYmFjayh7XG4gICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuSU5WQUxJRF9UWVBFX1ZBTElEQVRJT05fRVJST1IsXG4gICAgICAgIGZpZWxkOiB0aGlzLFxuICAgICAgICBlcnJvclR5cGU6IEVycm9yVHlwZS5zZXJ2ZXIsXG4gICAgICAgIGlzV2FybmluZzogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZih0aGlzLnNob3VsZFZhbGlkYXRlV2l0aEVycm9ycygpICYmICF0aGlzLmlzU2VsZWN0ZWRBZGRyZXNzKGZpZWxkVmFsdWUpKXtcbiAgICAgIHRoaXMuX3ZhbGlkaXR5U3RhdGUgPSBWYWxpZGl0eVN0YXRlcy5lcnJvcjtcbiAgICAgIHJldHVybiBjYWxsYmFjayh7XG4gICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuSU5WQUxJRF9UWVBFX1ZBTElEQVRJT05fRVJST1IsXG4gICAgICAgIGZpZWxkOiB0aGlzLFxuICAgICAgICBlcnJvclR5cGU6IEVycm9yVHlwZS5zZXJ2ZXIsXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLnZhbGlkYXRlVmFsdWUoZm9ybURhdGEsIGZpZWxkVmFsdWUsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0QWRkcmVzc1ZhbGlkaXR5U3RhdGUodmFsaWRpdHlTdGF0ZSkge1xuICAgIC8vIGZpZWxkIGlzIGVtcHR5IG9yIGxlc3MgdGhhbiBtaW5pbXVtIGNoYXJhY3RlcnNcbiAgICBpZiAodmFsaWRpdHlTdGF0ZSA9PT0gVmFsaWRpdHlTdGF0ZXMudmFsaWQgJiYgIXRoaXMuaXNTZWxlY3RlZEFkZHJlc3ModGhpcy5maWVsZFZhbHVlKSkge1xuICAgICAgcmV0dXJuIFZhbGlkaXR5U3RhdGVzLl91bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIGZpZWxkIGlzIHBvcHVsYXRlZCB3aXRoIHNlbGVjdGVkIGFkZHJlc3NcbiAgICBpZiAodGhpcy5pc1NlbGVjdGVkQWRkcmVzcyh0aGlzLmdldFZhbHVlKCkgYXMgc3RyaW5nKSkge1xuICAgICAgcmV0dXJuIFZhbGlkaXR5U3RhdGVzLnZhbGlkO1xuICAgIH1cbiAgICAvLyBmaWVsZCBub3QgcG9wdWxhdGVkIHdpdGggc2VsZWN0ZWQgYWRkcmVzcyBhbmQgc3VibWl0IGJ1dHRvbiB3YXMgcHJlc3NlZFxuICAgIGlmICghdGhpcy5pc1NlbGVjdGVkQWRkcmVzcyh0aGlzLmZpZWxkVmFsdWUpICYmIHRoaXMuX2Zvcm0uc3VibWl0QnV0dG9uQ2xpY2tlZCkge1xuICAgICAgcmV0dXJuIFZhbGlkaXR5U3RhdGVzLmVycm9yO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWRpdHlTdGF0ZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRWYWxpZGl0eVN0YXRlKHZhbGlkaXR5U3RhdGU6IFZhbGlkaXR5U3RhdGVzLCBmcm9tU2VydmVyID0gZmFsc2UpIHtcbiAgICB2YWxpZGl0eVN0YXRlID0gdGhpcy5nZXRBZGRyZXNzVmFsaWRpdHlTdGF0ZSh2YWxpZGl0eVN0YXRlKTtcbiAgICBzdXBlci5zZXRWYWxpZGl0eVN0YXRlKHZhbGlkaXR5U3RhdGUsIGZyb21TZXJ2ZXIpO1xuICB9XG4vL3doZW4gY2xpY2sgb24gc3VibWl0IHNob3VsZCBzaG93IGVycm9yXG4gIHB1YmxpYyBzaG91bGRWYWxpZGF0ZVdpdGhFcnJvcnMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm0uc3VibWl0QnV0dG9uQ2xpY2tlZCAmJiAodGhpcy5pc0RpcnR5KCkgfHwgdGhpcy5yZXF1aXJlZCgpKTtcbiAgfVxuICAvLyB3aGVuIGNsaWNrb3V0c2lkZSBzaG91bGQgc2hvdyB3YXJuaW5nXG4gIHB1YmxpYyBzaG91bGRWYWxpZGF0ZVdpdGhXYXJuaW5nKGZpZWxkVmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5pc0RpcnR5KCkgJiYgIXRoaXMuaXNTZWxlY3RlZEFkZHJlc3MoZmllbGRWYWx1ZSkgJiYgdGhpcy5jbGlja2VkT3V0c2lkZSAmJiAhdGhpcy5fZm9ybS5zdWJtaXRCdXR0b25DbGlja2VkO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0RpcnR5KCkge1xuICAgIHJldHVybiB0aGlzLmlzQWRkcmVzc0NoYW5nZWQgJiYgISFTdHJpbmcodGhpcy5maWVsZFZhbHVlKT8ubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRWYWxpZGF0ZShmaWVsZFZhbHVlKXtcbiAgICByZXR1cm4gdGhpcy5pc1N1YlR5cEFkZHJlc3MgJiYgKHRoaXMuc2hvdWxkVmFsaWRhdGVXaXRoRXJyb3JzKCkgfHwgdGhpcy5zaG91bGRWYWxpZGF0ZVdpdGhXYXJuaW5nKGZpZWxkVmFsdWUpKTtcbiAgfVxuXG59XG5Gb3JtSW5wdXQuYWRkSW5wdXRUb0xpYnJhcnkoQWRkcmVzc0lucHV0KTtcbiIsImltcG9ydCB7IEZvcm1JbnB1dCwgSUZvcm1JbnB1dENvbnRleHQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xuXG5leHBvcnQgY2xhc3MgQnV0dG9uSW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LnR5cGUgPT09ICdzdWJtaXQnIHx8IGNvbnRleHQudHlwZSA9PT0gJ3Jlc2V0JyB8fCBjb250ZXh0LnR5cGUgPT09ICdidXR0b24nIHx8IGNvbnRleHQuZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYnV0dG9uJztcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgICAgICBzdXBlcihjb250ZXh0LCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5fZm9ybS5fc3VibWl0QnV0dG9ucy5wdXNoKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuOyAvLyBvdXIgZm9ybSBzaG91bGQgbmV2ZXIgc2V0IHZhbHVlIHRvIGJ1dHRvbnNcbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzYWJsZSgpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQgJiYgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGVuYWJsZSgpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQgJiYgdGhpcy5pbnN0YW5jZUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH1cbn1cbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShCdXR0b25JbnB1dCk7XG4iLCJpbXBvcnQgeyBGb3JtSW5wdXQsIEZvcm1JbnB1dF9DT05TVFMsIElGb3JtSW5wdXRDb250ZXh0LCBJVmFsaWRhdGlvbkNhbGxiYWNrIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHsgaXNDb25zZW50RmllbGQsIGlzQ29uc2VudE1pZ3JhdGVkLCBpc0NvbnNlbnRUeXBlT3RoZXIgfSBmcm9tICcuLi9Db25zZW50RGF0YSc7XG5cbmV4cG9ydCB2YXIgQ2hlY2tib3hJbnB1dF9DT05TVFMgPSB7XG4gICAgZXJyb3JDbGFzczogJ2dpZ3lhLXRlcm1zLWVycm9yJyxcbiAgICB2YWxpZENsYXNzOiAnZ2lneWEtdGVybXMtdmFsaWQnLFxuICAgIGRhdGFWYWx1ZUluQXJyYXk6ICdkYXRhLXZhbHVlLWluLWFycmF5Jyxcbn07XG5leHBvcnQgY2xhc3MgQ2hlY2tib3hJbnB1dCBleHRlbmRzIEZvcm1JbnB1dCB7XG4gICAgcHVibGljIHN0YXRpYyBGT1JNX1RZUEVfQ1JJVEVSSUEoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQudHlwZSA9PT0gJ2NoZWNrYm94JztcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgICAgICBzdXBlcihjb250ZXh0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVxdWlyZWQoKSB7XG4gICAgICAgIC8vIFNlZSAjNDQwMzAuXG4gICAgICAgIGlmICgvXiguK1xcLik/dGVybXMkLy50ZXN0KHRoaXMuZmllbGROYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnJlcXVpcmVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmlzQ2xpZW50UmVxdWlyZWQoKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNDb25zZW50RmllbGQodGhpcy5maWVsZE5hbWUpICYmIFxuICAgICAgICAgIGlzQ29uc2VudFR5cGVPdGhlcih0aGlzLmZpZWxkTmFtZSkgJiZcbiAgICAgICAgICBpc0NvbnNlbnRNaWdyYXRlZCgpXG4gICAgICAgICAgKSB7XG5cbiAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMucmVxdWlyZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBcblxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ2xpZW50UmVxdWlyZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjaGVtYUZvcm1hdD8udG9Mb3dlckNhc2UoKSA9PSAndHJ1ZSc7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIF9pc1ZhbHVlRW1wdHkodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZTsgLy8gb3ZlcnJpZGUgZGVmYXVsdCBoYW5kbGluZyBvZiBjaGVja2JveGVzXG4gICAgfVxuXG4gICAgcHVibGljIHZhbGlkYXRlVmFsdWUoZm9ybURhdGE6IGFueSwgZmllbGRWYWx1ZTogYW55LCBjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5yZXF1aXJlZCgpICYmICFmaWVsZFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuUkVRVUlSRURfVkFMVUVfVkFMSURBVElPTl9FUlJPUixcbiAgICAgICAgICAgICAgICBmaWVsZDogdGhpcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIudmFsaWRhdGVWYWx1ZShmb3JtRGF0YSwgZmllbGRWYWx1ZSwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHB1YmxpYyBfc2hvd1ZhbGlkaXR5T25JbnB1dCgpIHtcbiAgICAgICAgdGhpcy5zZXRWYWxpdGlkeUNsYXNzKHRoaXMuaW5zdGFuY2VFbGVtZW50LnBhcmVudEVsZW1lbnQsIHRoaXMuX3ZhbGlkaXR5U3RhdGUsIENoZWNrYm94SW5wdXRfQ09OU1RTLnZhbGlkQ2xhc3MsIENoZWNrYm94SW5wdXRfQ09OU1RTLmVycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICB0aGlzLnNldFZhbGl0aWR5Q2xhc3ModGhpcy5pbnN0YW5jZUVsZW1lbnQucGFyZW50RWxlbWVudCwgdGhpcy5fdmFsaWRpdHlTdGF0ZSwgQ2hlY2tib3hJbnB1dF9DT05TVFMudmFsaWRDbGFzcywgQ2hlY2tib3hJbnB1dF9DT05TVFMuZXJyb3JDbGFzcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHByZVBvcHVsYXRlKHZhbHVlOiBzdHJpbmcgfCBib29sZWFuIHwgc3RyaW5nW10pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmluc3RhbmNlRWxlbWVudDtcbiAgICAgICAgY29uc3QgZGF0YVZhbHVlSW5BcnJheSA9IGVsLmdldEF0dHJpYnV0ZShDaGVja2JveElucHV0X0NPTlNUUy5kYXRhVmFsdWVJbkFycmF5KTtcbiAgICAgICAgaWYgKCFkYXRhVmFsdWVJbkFycmF5KSBzdXBlci5wcmVQb3B1bGF0ZSh2YWx1ZSBhcyBzdHJpbmcgfCBib29sZWFuKTtcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgY29uc3QgcG9zID0gdmFsdWUuaW5kZXhPZihkYXRhVmFsdWVJbkFycmF5KTtcbiAgICAgICAgICAgIHN1cGVyLnByZVBvcHVsYXRlKHBvcyA+PSAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vdG9kbyA6IHdhcm4gYWJvdXQgaWxsZWdhbCB2YWx1ZSAodW5kZWZpZW5kLCBudWxsLi4pXG4gICAgICAgICAgICBzdXBlci5wcmVQb3B1bGF0ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VmFsdWUoZGF0YVZhbHVlOiBzdHJpbmcgfCBib29sZWFuIHwgYW55LCBzZXRCeVNjcmlwdDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgLy8gU2V0IG5ldyB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgRE9NLlxuICAgICAgICBjb25zdCBlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBkYXRhVmFsdWUgJiYgZGF0YVZhbHVlICE9PSAnZmFsc2UnOyAvLyBCb29sZWFuIGNhbiBiZSBzYXZlZCBhcyBcInRydWVcIiBvciBcImZhbHNlXCIgKHN0cmluZykuXG5cbiAgICAgICAgLy8gVHJpZ2dlciBjaGFuZ2UuXG4gICAgICAgIHRoaXMub25GaWVsZENoYW5nZShzZXRCeVNjcmlwdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFZhbHVlKGVsID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudCwgY3VycmVudFZhbHVlPzogYW55KTogYW55IHtcbiAgICAgICAgbGV0IHZhbHVlOiBzdHJpbmdbXSB8IGJvb2xlYW4gPSBlbC5jaGVja2VkO1xuICAgICAgICBsZXQgYXJyYXlJdGVtVmFsdWUgPSBlbC5nZXRBdHRyaWJ1dGUoQ2hlY2tib3hJbnB1dF9DT05TVFMuZGF0YVZhbHVlSW5BcnJheSk7XG5cbiAgICAgICAgaWYgKGFycmF5SXRlbVZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRWYWx1ZSkgY3VycmVudFZhbHVlID0gW107XG4gICAgICAgICAgICBjb25zdCBwb3MgPSBjdXJyZW50VmFsdWUuaW5kZXhPZihhcnJheUl0ZW1WYWx1ZSk7XG4gICAgICAgICAgICBpZiAoZWwuY2hlY2tlZCAmJiBwb3MgPCAwKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFZhbHVlLnB1c2goYXJyYXlJdGVtVmFsdWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICghZWwuY2hlY2tlZCAmJiBwb3MgPj0gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZS5zcGxpY2UocG9zLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5Gb3JtSW5wdXQuYWRkSW5wdXRUb0xpYnJhcnkoQ2hlY2tib3hJbnB1dCk7XG4iLCJpbXBvcnQge0Zvcm1JbnB1dCwgRm9ybUlucHV0UHJpb3JpdGllcywgSUZvcm1JbnB1dENvbnRleHRcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7Q2hlY2tib3hJbnB1dH0gZnJvbSBcIi4vQ2hlY2tib3hJbnB1dFwiO1xuaW1wb3J0IHtcbiAgICBDaGFubmVsX1N0YXR1cyxcbiAgICBDb21tdW5pY2F0aW9uU3RhdHVzLFxuICAgIENvbW11bmljYXRpb25XaWRnZXRfQ09OU1RTLFxuICAgIElDb21tdW5pY2F0aW9uT2JqZWN0XG59IGZyb20gXCIuLi9XaWRnZXRzL0NvbW11bmljYXRpb25XaWRnZXRcIjtcbmltcG9ydCB7Rm9ybV9DT05TVFN9IGZyb20gXCIuLi9CYXNlRm9ybVwiO1xuXG5leHBvcnQgY2xhc3MgQ29tbXVuaWNhdGlvbkNoZWNrYm94SW5wdXQgZXh0ZW5kcyBDaGVja2JveElucHV0IHtcbiAgICBwdWJsaWMgc3RhdGljIEZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgICAgICByZXR1cm4gY29udGV4dD8uZmllbGROYW1lPy5zdGFydHNXaXRoKENvbW11bmljYXRpb25XaWRnZXRfQ09OU1RTLmNvbW11bmljYXRpb25zUHJlZml4KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VmFsdWUoZGF0YVZhbHVlOiBhbnksIHNldEJ5U2NyaXB0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgICAgICBjb25zdCBlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGVsLmNoZWNrZWQgPSB0aGlzLmlzQ2hlY2tlZChkYXRhVmFsdWUsIGVsKTtcbiAgICAgICAgdGhpcy5vbkZpZWxkQ2hhbmdlKHNldEJ5U2NyaXB0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VmFsdWUoZWwgPSB0aGlzLmluc3RhbmNlRWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50LCBjdXJyZW50VmFsdWU/OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNoYW5uZWw6IGVsPy5nZXRBdHRyaWJ1dGUoQ29tbXVuaWNhdGlvbldpZGdldF9DT05TVFMuY2hhbm5lbCksXG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMuZXZhbHVhdGVTdGF0dXMoZWwpLFxuICAgICAgICAgICAgdG9waWM6IGVsPy5nZXRBdHRyaWJ1dGUoQ29tbXVuaWNhdGlvbldpZGdldF9DT05TVFMudG9waWMpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZXZhbHVhdGVTdGF0dXMoZWwpOiBDb21tdW5pY2F0aW9uU3RhdHVzIHtcbiAgICAgICAgbGV0IGNoZWNrZWQ6IHN0cmluZ1tdIHwgYm9vbGVhbiA9IGVsLmNoZWNrZWQ7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzU3RhdHVzID0gZWw/LmdldEF0dHJpYnV0ZShDb21tdW5pY2F0aW9uV2lkZ2V0X0NPTlNUUy5zdGF0dXMpO1xuICAgICAgICB0aGlzLnNlbmRMb2dnZXJSZXBvcnQocHJldmlvdXNTdGF0dXMpO1xuICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgcmV0dXJuIENoYW5uZWxfU3RhdHVzLm9wdEluO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQ2hhbm5lbFN0YXR1c09wdEluIChwcmV2aW91c1N0YXR1cykgJiYgIWNoZWNrZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBDaGFubmVsX1N0YXR1cy5vcHRPdXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENoYW5uZWxfU3RhdHVzLm5vdGljZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZW5kTG9nZ2VyUmVwb3J0KHByZXZpb3VzU3RhdHVzKXtcbiAgICAgICAgaWYocHJldmlvdXNTdGF0dXMgPT09IENoYW5uZWxfU3RhdHVzLk9wdEluIHx8IHByZXZpb3VzU3RhdHVzID09PSBDaGFubmVsX1N0YXR1cy5PcHRPdXQpe1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLnJlcG9ydCgnUmVjZWl2ZWQgY29tbXVuaWNhdGlvbiBzdGF0dXMgdXBwZXJjYXNlJywgcHJldmlvdXNTdGF0dXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0NoYW5uZWxTdGF0dXNPcHRJbihzdGF0dXM6IENvbW11bmljYXRpb25TdGF0dXMpOiBib29sZWFue1xuICAgICAgICByZXR1cm4gc3RhdHVzICYmIChzdGF0dXMgPT09IENoYW5uZWxfU3RhdHVzLm9wdEluIHx8ICBzdGF0dXMgPT09IENoYW5uZWxfU3RhdHVzLk9wdEluKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ2hlY2tlZChkYXRhVmFsdWU6IElDb21tdW5pY2F0aW9uT2JqZWN0LCBlbDogSFRNTElucHV0RWxlbWVudCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmdldENvbW11bmljYXRpb25XaWRnZXRBdHRyaWJ1dGUoZGF0YVZhbHVlLCAnc3RhdHVzJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmlzQ2hhbm5lbFN0YXR1c09wdEluKHN0YXR1cykgfHxcbiAgICAgICAgICAgIChlbD8uaGFzQXR0cmlidXRlKEZvcm1fQ09OU1RTLmRlZmF1bHRDaGVja2VkQXR0cmlidXRlKSAmJiAhc3RhdHVzKTtcbiAgICB9XG5cbiAgICBnZXRDb21tdW5pY2F0aW9uV2lkZ2V0QXR0cmlidXRlKG9iaiwga2V5KSB7XG4gICAgICAgIHJldHVybiBvYmpba2V5XSB8fCBvYmpbdGhpcy5jYXBpdGFsaXplKGtleSldO1xuICAgIH1cblxuICAgIGNhcGl0YWxpemUoc3RyOnN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBzdHI/LmNoYXJBdCgwKT8udG9VcHBlckNhc2UoKSArIHN0cj8uc2xpY2UoMSlcbiAgICB9XG5cbn1cbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShDb21tdW5pY2F0aW9uQ2hlY2tib3hJbnB1dCwgRm9ybUlucHV0UHJpb3JpdGllcy5JbXBvcnRhbnQpO1xuIiwiaW1wb3J0IHsgRm9ybUlucHV0LCBJRm9ybUlucHV0Q29udGV4dCwgSVZhbGlkYXRpb25DYWxsYmFjayB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XG5pbXBvcnQgeyBMb2dpbkZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0xvZ2luRm9ybSc7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcblxuZXhwb3J0IGNsYXNzIEVtYWlsSW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiAhKGNvbnRleHQuZm9ybSBpbnN0YW5jZW9mIExvZ2luRm9ybSkgJiYgKGNvbnRleHQuZmllbGROYW1lID09PSAnZW1haWwnIHx8IGNvbnRleHQudHlwZSA9PT0gJ2VtYWlsJyk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcbiAgICAgICAgc3VwZXIoY29udGV4dCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZhbGlkYXRlVmFsdWUoZm9ybURhdGE6IGFueSwgZmllbGRWYWx1ZTogYW55LCBjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjayk6IHZvaWQge1xuICAgICAgICBpZiAoZmllbGRWYWx1ZSAmJiAhZ2lneWEucGx1Z2luVXRpbHMudmFsaWRhdGlvbi5pc1ZhbGlkRW1haWxMb2dpbklEKGZpZWxkVmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFLFxuICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLnZhbGlkYXRlVmFsdWUoZm9ybURhdGEsIGZpZWxkVmFsdWUsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5Gb3JtSW5wdXQuYWRkSW5wdXRUb0xpYnJhcnkoRW1haWxJbnB1dCk7XG4iLCJpbXBvcnQge1xuICAgIERlZXBGcmVlemUsXG4gICAgRm9yRWFjaCxcbiAgICBJRW51bWVyYWJsZSxcbiAgICBJTWFwLFxuICAgIElOdW1lcmljTWFwLFxuICAgIGlzRmllbGRJbkhpZGRlbkNvbnRhaW5lcixcbiAgICBpc0hpZGRlbixcbiAgICBpc0tleUNvZGVEaXNwbGF5YWJsZSxcbiAgICBTb21lLFxufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7QmFzZUZvcm0sIFNjaGVtYU5hbWV9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHtJU2NyZWVuU2V0UGFyYW1zfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbic7XG5pbXBvcnQge0lDb25kaXRpb25hbEF0dHJpYnV0ZSwgVGVtcGxhdGVFbGVtZW50fSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudCc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtjb25zZW50RmllbGROYW1lLCBuYW1lc3BhY2V9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ29uc2VudCc7XG5pbXBvcnQge0FycmF5TWFuYWdlcl9DT05TVH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0FycmF5TWFuYWdlcldpZGdldCc7XG5pbXBvcnQge0Vycm9yVHlwZSwgSUVycm9ySW5mbywgbm90SW1wbGVtZW50ZXJBYnN0cmFjdH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvcnMnO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHtJbnB1dFZhbHVlVHlwZSwgU2NoZW1hVHlwZSwgU2NoZW1hU3ViVHlwZSwgc2NoZW1hVHlwZVRvQ29udmVydGVyfSBmcm9tICcuLi9TY2hlbWFUeXBlQ29udmVydGVyJztcbmltcG9ydCB7SUZvcm1XaWRnZXR9IGZyb20gJy4uL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7U2VydmVyRG9uZUZpZWxkQ2FsbGJhY2t9IGZyb20gXCIuL1NlcnZlckZvcm1JbnB1dFwiO1xuaW1wb3J0IHBhc3NrZXlTZXJ2aWNlIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9QYXNza2V5L1Bhc3NrZXlTZXJ2aWNlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIElGaWVsZE5hbWVzIHtcbiAgICBhdXRvRmlsbE5hbWU6IHN0cmluZztcbiAgICBwYXJhbU5hbWU6IHN0cmluZztcbn1cbmV4cG9ydCBlbnVtIFZhbGlkaXR5U3RhdGVzIHtcbiAgICBfdW5kZWZpbmVkLFxuICAgIHZhbGlkLFxuICAgIGVycm9yLFxuICAgIHBlbmRpbmcsXG59XG5cbkRlZXBGcmVlemUoVmFsaWRpdHlTdGF0ZXMpO1xuZXhwb3J0IGludGVyZmFjZSBJVmFsaWRhdGlvbkluZm8ge1xuICAgIGVycm9yQ29kZTogR1NFcnJvcnM7XG4gICAgZmllbGQ/OiBJRm9ybUlucHV0O1xuICAgIHdpZGdldD86IElGb3JtV2lkZ2V0O1xuICAgIGVycm9yVHlwZT86IEVycm9yVHlwZTtcbiAgICBzZXRCeVNjcmlwdD86IGJvb2xlYW47XG4gICAgZXJyb3JNZXNzYWdlPzogc3RyaW5nO1xuICAgIGlzV2FybmluZz86Ym9vbGVhbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSVZhbGlkYXRpb25DYWxsYmFjayBleHRlbmRzIEZ1bmN0aW9uIHtcbiAgICAodmFsaWRhdGlvbkluZm86IElWYWxpZGF0aW9uSW5mbyk6IHZvaWQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIElWYWxpZGl0eVN0YXRlTGlzdGVuZXIgZXh0ZW5kcyBGdW5jdGlvbiB7XG4gICAgKHZhbGlkaXR5U3RhdGVzOiBWYWxpZGl0eVN0YXRlcywgZnJvbVNlcnZlcjogYm9vbGVhbiwgZm9ybUlucHV0OiBGb3JtSW5wdXQpOiB2b2lkO1xufVxuZXhwb3J0IHZhciBmaWVsZHNOYW1lRGF0YTogSU1hcDxJRmllbGROYW1lcz4gPSB7XG4gICAgbG9naW5JRDogeyBhdXRvRmlsbE5hbWU6ICd1c2VybmFtZScsIHBhcmFtTmFtZTogJ2xvZ2luSUQnIH0sXG4gICAgcGFzc3dvcmRSZXR5cGU6IHsgYXV0b0ZpbGxOYW1lOiAnJywgcGFyYW1OYW1lOiAnJyB9LFxufTtcbkRlZXBGcmVlemUoZmllbGRzTmFtZURhdGEpO1xudmFyIGZpZWxkc0Rpc3BsYXlOYW1lcyA9IHtcbiAgICBsb2dpbklEOiAndXNlcm5hbWUnLFxuICAgIHNlY3JldFF1ZXN0aW9uOiAnc2VjcmV0IHF1ZXN0aW9uJyxcbiAgICBzZWNyZXRBbnN3ZXI6ICdzZWNyZXQgYW5zd2VyJyxcbn07XG5EZWVwRnJlZXplKGZpZWxkc0Rpc3BsYXlOYW1lcyk7XG5leHBvcnQgaW50ZXJmYWNlIElTY2hlbWFGaWVsZEJhc2Uge1xuICAgIGZpZWxkTmFtZXNwYWNlOiBTY2hlbWFOYW1lO1xuICAgIGZpZWxkQmFzZU5hbWU6IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUZvcm1JbnB1dCBleHRlbmRzIElTY2hlbWFGaWVsZEJhc2V7XG4gICAgaXNDYXB0Y2hhOiBib29sZWFuO1xuICAgIGdldFZhbHVlKGVsPzogSFRNTEVsZW1lbnQsIGN1cnJlbnRWYWx1ZT86IGFueSk6IElucHV0VmFsdWVUeXBlO1xuICAgIGdldE5hbWUoaXNOb3JtYWxpemVkOiBib29sZWFuLCBmbGF0dGVuPzogYm9vbGVhbik6IHN0cmluZ1xuICAgIGFycmF5S2V5RmllbGQ6IHN0cmluZztcbiAgICBhcnJheUtleVZhbHVlOiBzdHJpbmc7XG4gICAgZ2V0QXJyYXlSb290KGZsYXR0ZW4/OiBib29sZWFuKTogc3RyaW5nO1xuICAgIGZpZWxkTmFtZTogc3RyaW5nO1xuICAgIG5vcm1hbGl6ZWRGaWVsZE5hbWU6IHN0cmluZzsgICAgXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcbiAgICBpc0luSGlkZGVuQ29udGFpbmVyKCk6IGJvb2xlYW47XG4gICAgaXNIaWRkZW4oKTogYm9vbGVhbjtcbiAgICByZXF1aXJlZCgpOiBib29sZWFuO1xuICAgIGRpc2FibGVkKCk6IGJvb2xlYW47XG4gICAgYWxsb3dFbXB0eSgpOiBib29sZWFuO1xuICAgIGluc3RhbmNlRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgdmFsaWRhdGUoY2FsbGJhY2s6IElWYWxpZGF0aW9uQ2FsbGJhY2ssIGZvcm1EYXRhPzogYW55KTogdm9pZDtcbiAgICB2YWxpZGF0ZUFzeW5jKGZvcm1EYXRhPzogYW55KTogUHJvbWlzZTxJVmFsaWRhdGlvbkluZm8+O1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKTtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbik7XG4gICAgZ2V0VmFsaWRpdHlTdGF0ZSgpOiBWYWxpZGl0eVN0YXRlcztcbiAgICBzZXRWYWxpZGl0eVN0YXRlKHZhbGlkaXR5U3RhdGU6IFZhbGlkaXR5U3RhdGVzKTtcbiAgICBhZGRWYWxpZGl0eVN0YXRlTGlzdGVuZXIobGlzdGVuZXI6IElWYWxpZGl0eVN0YXRlTGlzdGVuZXIpO1xuICAgIHJlbW92ZVZhbGlkaXR5U3RhdGVMaXN0ZW5lcihsaXN0ZW5lcjogSVZhbGlkaXR5U3RhdGVMaXN0ZW5lcik7XG4gICAgdXBkYXRlKGVsZW1lbnQ/OiBIVE1MRWxlbWVudCwgZmllbGROYW1lPzogc3RyaW5nLCBpc0RhdGFGaWVsZD86IGJvb2xlYW4pOiB2b2lkO1xuICAgIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk6IHZvaWQ7XG4gICAgZ2V0TWV0YWRhdGEoKToge307XG4gICAgc2V0VmFsdWUoZGF0YVZhbHVlOiBzdHJpbmcgfCBib29sZWFuLCBzZXRCeVNjcmlwdDogYm9vbGVhbik6IHZvaWQ7XG4gICAgcnVuT25TZXJ2ZXJEb25lKGNhbGxiYWNrOiBTZXJ2ZXJEb25lRmllbGRDYWxsYmFjayk6IHZvaWQ7XG59XG5leHBvcnQgZW51bSBXcml0ZUFjY2Vzc01vZGVzIHtcbiAgICBjbGllbnRNb2RpZnksXG4gICAgY2xpZW50Q3JlYXRlLFxufVxuZXhwb3J0IHZhciBGb3JtSW5wdXRfQ09OU1RTID0ge1xuICAgIGZpZWxkTmFtZTogJ2RhdGEtZ2lneWEtbmFtZScsXG4gICAgZGlzcGxheU5hbWU6ICdkYXRhLWRpc3BsYXktbmFtZScsXG4gICAgY2FwdGNoYTogJ2dpZ3lhLWNhcHRjaGEnLFxuICAgIGFsbG93RW1wdHk6ICdkYXRhLWFsbG93LWVtcHR5JyxcbiAgICByZXF1aXJlZDogJ2RhdGEtcmVxdWlyZWQnLFxuICAgIG9yaWdpbmFsVmFsdWU6ICdkYXRhLW9yaWdpbmFsLXZhbHVlJyxcbiAgICBzZXJ2ZXJWYWxpZGF0aW9uOiAnZGF0YS1pbnZhbGlkLWVycm9yLWNvZGUnLFxuICAgIHNob3dWYWxpZENoZWNrbWFyazogJ3Nob3ctdmFsaWQtY2hlY2ttYXJrJyxcbiAgICBzaG93Q2hlY2ttYXJrQ2xhc3M6ICdnaWd5YS1zaG93LWNoZWNrbWFyaycsXG4gICAgZXJyb3JDbGFzczogJ2dpZ3lhLWVycm9yJyxcbiAgICB3YXJuQ2xhc3M6ICdnaWd5YS13YXJuJyxcbiAgICB2YWxpZENsYXNzOiAnZ2lneWEtdmFsaWQnLFxuICAgIHBlbmRpbmdDbGFzczogJ2dpZ3lhLXBlbmRpbmcnLFxuICAgIGVtcHR5Q2xhc3M6ICdnaWd5YS1lbXB0eScsXG4gICAgcGxhY2Vob2xkZXJBdHRyaWJ1dGU6ICdkYXRhLWdpZ3lhLXBsYWNlaG9sZGVyJyxcbiAgICBhcnJheVJvb3RBdHRyaWJ1dGU6ICdkYXRhLWFycmF5LXJvb3QnLFxuICAgIGFycmF5S2V5RmllbGRBdHRyaWJ1dGU6ICdkYXRhLWFycmF5LWtleS1maWVsZCcsXG4gICAgYXJyYXlLZXlWYWx1ZUF0dHJpYnV0ZTogJ2RhdGEtYXJyYXkta2V5LXZhbHVlJyxcbiAgICBpZGVudGlmaWVyVHlwZTogJ2RhdGEtaWRlbnRpZmllci10eXBlJ1xufTtcbkRlZXBGcmVlemUoRm9ybUlucHV0X0NPTlNUUyk7XG5pbnRlcmZhY2UgU2NoZW1hQ2hlY2sgZXh0ZW5kcyBGdW5jdGlvbiB7XG4gICAgKHZhbHVlOiBhbnkpOiBHU0Vycm9ycztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUZvcm1JbnB1dENvbnRleHQge1xuICAgIGZvcm06IEJhc2VGb3JtO1xuICAgIGZpZWxkTmFtZTogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwYXJhbXM6IElTY3JlZW5TZXRQYXJhbXM7XG59XG5leHBvcnQgaW50ZXJmYWNlIElGb3JtSW5wdXRUeXBlIHtcbiAgICBuZXcgKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KTogRm9ybUlucHV0O1xuXG4gICAgRk9STV9UWVBFX0NSSVRFUklBOiAoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpID0+IGJvb2xlYW47XG59XG52YXIgRm9ybUlucHV0c0xpYnJhcnk6IElOdW1lcmljTWFwPElGb3JtSW5wdXRUeXBlW10+ID0ge307XG5leHBvcnQgZW51bSBGb3JtSW5wdXRQcmlvcml0aWVzIHtcbiAgICBfc3RhcnQsXG4gICAgSW1wb3J0YW50LFxuICAgIE5vcm1hbCxcbiAgICBGYWxsYmFjayxcbiAgICBfZW5kLFxufVxuZXhwb3J0IGludGVyZmFjZSBJU2NoZW1hRmllbGRzPFQgZXh0ZW5kcyBJRmllbGRTY2hlbWE+IHtcbiAgICBbZmllbGROYW1lOiBzdHJpbmddOiBUO1xufVxuZXhwb3J0IGludGVyZmFjZSBJRmllbGRTY2hlbWEge1xuICAgIHdyaXRlQWNjZXNzPzogc3RyaW5nO1xuICAgIHR5cGU/OiBTY2hlbWFUeXBlO1xuICAgIHN1YlR5cGU/OiBTY2hlbWFTdWJUeXBlO1xuICAgIHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBmb3JtYXQ/OiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkTm9uU2VhcmNoYWJsZT86IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIElDb25zZW50RmllbGRTY2hlYW0gZXh0ZW5kcyBJRmllbGRTY2hlbWEge1xuICAgIGN1cnJlbnREb2NWZXJzaW9uPzogbnVtYmVyO1xuICAgIGN1cnJlbnREb2NEYXRlPzogc3RyaW5nO1xufVxuZXhwb3J0IGNsYXNzIEZvcm1JbnB1dCBleHRlbmRzIFRlbXBsYXRlRWxlbWVudDxIVE1MRWxlbWVudD4gaW1wbGVtZW50cyBJRm9ybUlucHV0IHtcbiAgICBwdWJsaWMgX2Zvcm06IEJhc2VGb3JtO1xuICAgIHB1YmxpYyBmaWVsZE5hbWU6IHN0cmluZztcbiAgICBwdWJsaWMgZHluYW1pY0ZpZWxkID0gZmFsc2U7XG4gICAgcHVibGljIG5vcm1hbGl6ZWRGaWVsZE5hbWU6IHN0cmluZztcbiAgICBwdWJsaWMgZmllbGRCYXNlTmFtZTogc3RyaW5nO1xuICAgIHB1YmxpYyBmaWVsZE5hbWVzcGFjZTogU2NoZW1hTmFtZTtcbiAgICBwdWJsaWMgcGFyYW1OYW1lOiBzdHJpbmc7XG4gICAgcHVibGljIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gICAgcHVibGljIHR5cGU6IHN0cmluZztcbiAgICBwdWJsaWMgaXNDYXB0Y2hhID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBvbkZpZWxkQ2hhbmdlRGVib3VuY2VkOiAoKSA9PiB2b2lkO1xuICAgIHByaXZhdGUga2V5VXBIYW5kbGVyOiAoZTogS2V5Ym9hcmRFdmVudCkgPT4gdm9pZDtcbiAgICBwcml2YXRlIGNoYW5nZUhhbmRsZXI6ICgpID0+IHZvaWQ7XG4gICAgcHVibGljIF9zY2hlbWE6IElGaWVsZFNjaGVtYTtcbiAgICBwcml2YXRlIHNjaGVtYUNoZWNrczogU2NoZW1hQ2hlY2tbXTtcbiAgICBwcml2YXRlIF9zY2hlbWFSZXF1aXJlZDogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9zY2hlbWFXcml0ZUFjY2Vzc01vZGU6IFdyaXRlQWNjZXNzTW9kZXM7XG4gICAgcHVibGljIF9zY3JlZW46IFNjcmVlbjtcbiAgICBwdWJsaWMgX3ZhbGlkaXR5U3RhdGUgPSBWYWxpZGl0eVN0YXRlcy5fdW5kZWZpbmVkO1xuICAgIHB1YmxpYyBwbGFjZUhvbGRlckVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfc2hvd1ZhbGlkaXR5TWFya2VyOiBJTnVtZXJpY01hcDxib29sZWFuPiA9IHt9O1xuICAgIHByaXZhdGUgaXNDdXJybmV0VmFsdWVQbGFjZWhvbGRlclRleHQ6IGJvb2xlYW4gPSB0cnVlO1xuICAgIHByaXZhdGUgaXNDdHJsS2V5VXA6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIGlzVGV4dFNlbGVjdGVkOiBib29sZWFuO1xuICAgIHByaXZhdGUgS0VZX0NPREVfREVMRVRFID0gNDY7XG4gICAgcHJpdmF0ZSBLRVlfQ09ERV9CQUNLU1BBQ0UgPSA4O1xuICAgIHByb3RlY3RlZCBLRVlDT0RFX0xFVFRFUl9YOiBudW1iZXIgPSA4ODtcbiAgICBwcm90ZWN0ZWQgcHJldmlvdXNWYWx1ZTogSW5wdXRWYWx1ZVR5cGUgPSBudWxsO1xuICAgIHByaXZhdGUgaW50ZXJ2YWxJRDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIHZhbHVlQ29udmVydGVyOiAodmFsOiBzdHJpbmcpID0+IGFueSA9IHNjaGVtYVR5cGVUb0NvbnZlcnRlcignc3RyaW5nJyk7XG5cbiAgICBwdWJsaWMgaGFzUHJldmlvdXNWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0VmFsaWRpdHlNYXJrZXIoa2V5OlZhbGlkaXR5U3RhdGVzLCB2YWw6Ym9vbGVhbil7ICAgICAgICBcbiAgICAgICAgdGhpcy5fc2hvd1ZhbGlkaXR5TWFya2VyW2tleV0gPXZhbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGFycmF5S2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5hcnJheUtleUZpZWxkQXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGFycmF5S2V5VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5hcnJheUtleVZhbHVlQXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHNjaGVtYUZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjaGVtYT8uZm9ybWF0Py50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgYXV0b2NvbXBsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhdXRvY29tcGxldGUnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGlzU2NoZW1hVmFsaWQoKSB7XG4gICAgICAgIHJldHVybiAhU29tZSh0aGlzLnNjaGVtYUNoZWNrcywgYyA9PiBjKHRoaXMuZ2V0VmFsdWUoKSkgIT09IEdTRXJyb3JzLk9LKVxuICAgIH1cblxuICAgIC8vI3JlZ2lvbiBmb3JtSW5wdXQgbGlicmFyeVxuXG4gICAgc3RhdGljIGFkZElucHV0VG9MaWJyYXJ5KHR5cGU6IElGb3JtSW5wdXRUeXBlLCBwcmlvcml0eSA9IEZvcm1JbnB1dFByaW9yaXRpZXMuTm9ybWFsKSB7XG4gICAgICAgIHZhciBpbnB1dExpc3QgPSBGb3JtSW5wdXRzTGlicmFyeVtwcmlvcml0eV0gfHwgW107XG4gICAgICAgIGlucHV0TGlzdC5wdXNoKHR5cGUpO1xuICAgICAgICBGb3JtSW5wdXRzTGlicmFyeVtwcmlvcml0eV0gPSBpbnB1dExpc3Q7XG4gICAgfVxuXG4gICAgc3RhdGljIGlucHV0TGlicmFyeUJ5UHJpb3JpdHkoKSB7XG4gICAgICAgIHZhciBsaWIgPSBuZXcgQXJyYXk8SUZvcm1JbnB1dFR5cGU+KCk7XG5cbiAgICAgICAgZm9yICh2YXIgcHJpb3JpdHkgPSBGb3JtSW5wdXRQcmlvcml0aWVzLl9zdGFydDsgcHJpb3JpdHkgPD0gRm9ybUlucHV0UHJpb3JpdGllcy5fZW5kOyArK3ByaW9yaXR5KSB7XG4gICAgICAgICAgICB2YXIgcHJpb3JpdHlMaXN0ID0gRm9ybUlucHV0c0xpYnJhcnlbcHJpb3JpdHldO1xuICAgICAgICAgICAgaWYgKHByaW9yaXR5TGlzdCkgbGliID0gbGliLmNvbmNhdChwcmlvcml0eUxpc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxpYjtcbiAgICB9XG5cbiAgICBzdGF0aWMgcmVnaXN0ZXJGb3JtSW5wdXRzKGVsZW1lbnRzOiBJRW51bWVyYWJsZTxFbGVtZW50PiwgcGFyZW50OiBCYXNlRm9ybSkge1xuICAgICAgICB2YXIgaW5wdXRzID0gbmV3IEFycmF5PEZvcm1JbnB1dD4oKTtcbiAgICAgICAgdmFyIGxpYiA9IEZvcm1JbnB1dC5pbnB1dExpYnJhcnlCeVByaW9yaXR5KCk7XG4gICAgICAgIHZhciBpZ25vcmVkRmllbGRzID0gcGFyZW50Lmlnbm9yZWRGaWVsZHMoKTtcblxuICAgICAgICBGb3JFYWNoKGVsZW1lbnRzLCAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB2YXIgdHlwZTogSUZvcm1JbnB1dFR5cGU7XG4gICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZWwuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuZmllbGROYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcblxuICAgICAgICAgICAgLy8gaWdub3JlIGZpZWxkcyB0aGF0IGFyZSBvbiB0aGUgZm9ybSBpZ25vcmUgbGlzdFxuICAgICAgICAgICAgaWYgKGlnbm9yZWRGaWVsZHNbZmllbGROYW1lXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWdub3JlIGZpZWxkcyB0aGF0IGFyZSBwYXJ0IG9mIGEgZmllbGRzZXQgKGluIGNhc2Ugb2YgY29tcG9zaXRpb24gb2YgaW5wdXRzIHRoZSBmaWVsZHNldCB3aWxsIHJlcHJlc2VudCBpdHMgaW5wdXRzIGFzIGEgd2hvbGUpXG4gICAgICAgICAgICBpZihnaWd5YS51dGlscy5ET00uaXNCZWxvbmdUb0dpZ3lhRmllbGRzZXQoZWwpKXtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIGZvcm06IHBhcmVudCxcbiAgICAgICAgICAgICAgICBmaWVsZE5hbWU6IGZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBlbCxcbiAgICAgICAgICAgICAgICB0eXBlOiBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmVudC5fc2NyZWVuU2V0LnBhcmFtcyxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIFNvbWUobGliLCB0ID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSB0LkZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0KTtcblxuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkgdHlwZSA9IHQ7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHR5cGUpIGlucHV0cy5wdXNoKG5ldyB0eXBlKGNvbnRleHQpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGlucHV0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIEZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyNlbmRyZWdpb25cblxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0LCBwdWJsaWMgaXNEYXRhRmllbGQgPSB0cnVlLCBrZXlwcmVzc1ZhbGlkYXRpb25EZWxheSA9IDEwMDApIHtcbiAgICAgICAgc3VwZXIoY29udGV4dC5lbGVtZW50LCBjb250ZXh0LmZvcm0pO1xuICAgICAgICB0aGlzLl9mb3JtID0gY29udGV4dC5mb3JtO1xuICAgICAgICB0aGlzLnR5cGUgPSBjb250ZXh0LnR5cGU7XG5cbiAgICAgICAgdGhpcy5fc2NyZWVuID0gdGhpcy5fZm9ybS5fc2NyZWVuO1xuICAgICAgICBcbiAgICAgICAgdGhpcy51cGRhdGUoY29udGV4dC5lbGVtZW50LCBjb250ZXh0LmZpZWxkTmFtZSwgaXNEYXRhRmllbGQpO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3dWYWxpZENoZWNrbWFyayh0aGlzLnRlbXBsYXRlRWxlbWVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dWYWxpZGl0eU1hcmtlcltWYWxpZGl0eVN0YXRlcy52YWxpZF0gPSB0aGlzLl9zaG93VmFsaWRpdHlNYXJrZXJbVmFsaWRpdHlTdGF0ZXMucGVuZGluZ10gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW5zdXJlIHRoZSBvbkZpZWxkQ2hhbmdlZCBldmVudCBpc24ndCBmaXJlZCBmb3IgZXZlcnkga2V5cHJlc3MuXG4gICAgICAgIHRoaXMub25GaWVsZENoYW5nZURlYm91bmNlZCA9IGdpZ3lhLnV0aWxzLmZ1bmN0aW9ucy5kZWJvdW5jZShcbiAgICAgICAgICAgICgpID0+IHRoaXMub25GaWVsZENoYW5nZSgpLFxuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtc1snZGVib3VuY2VEZWxheSddIHx8IGtleXByZXNzVmFsaWRhdGlvbkRlbGF5LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBvbktleVVwKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gSWdub3JlIHRhYiwgY3RybCwgd2luZG93cyBrZXksIGVzY2FwZSwgY2FwcyBsb2NrLCBldGMuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGUua2V5Q29kZSAhPT0gOSAmJlxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSAxMyAmJlxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSAxNiAmJlxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSAxNyAmJlxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSA5MSAmJlxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSA5MiAmJlxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSAyMCAmJlxuICAgICAgICAgICAgZS5rZXlDb2RlICE9PSAyN1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMub25GaWVsZENoYW5nZURlYm91bmNlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW4gYW4gZWxlbWVudCdzIHZhbHVlIE1BWSBoYXZlIGNoYW5nZWQuXG4gICAgICovXG4gICAgcHVibGljIG9uRmllbGRDaGFuZ2Uoc2V0QnlTY3JpcHQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgICAgICAvLyBNYXkgYmUgY2FsbGVkIGFmdGVyIGEgc21hbGwgZGVsYXksIGVuc3VyZSB0aGUgZWxlbWVudCBzdGlsbCBleGlzdHMuXG4gICAgICAgIC8vIFNwZWNpZmljYWxseSBjaGVjayB0byBlbnN1cmUgdGhlIHNjcmVlbi1zZXQgY29udGFpbmVyIHN0aWxsIGV4aXN0cyB0byBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgY29udGFpbmVyIGlzIGtpbGxlZCB3aXRoIHRoZSBlc2NhcGUga2V5LlxuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VFbGVtZW50IHx8ICF0aGlzLl9zY3JlZW5TZXQuY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBdm9pZCB0cmlnZ2VyaW5nIHR3aWNlIHdoZW4gYSB1c2VyIGZpbmlzaGVzIHR5cGluZyAodHJpZ2dlcmluZyBrZXlkb3duKSBhbmQgdGhlbiBsZWF2ZXMgdGhlIGZpZWxkICh0cmlnZ2VyaW5nIGNoYW5nZSkuXG4gICAgICAgIC8vIEV4ZW1wdCByYWRpbyB0eXBlIGJlY2F1c2UgZWFjaCBpbmRpdmlkdWFsIGVsZW1lbnQgaXMgdW5pcXVlIGluc3RhbmNlLCBzbyBpdCBjYW4ndCB0cmFjayBzdGF0ZS4gUmVnYXJkbGVzcywgaXQncyBub3QgbmVjZXNzYXJ5LlxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKHRoaXMucHJldmlvdXNWYWx1ZSA9PT0gdmFsdWUgJiYgdGhpcy50eXBlICE9PSAncmFkaW8nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gdmFsdWU7XG5cbiAgICAgICAgLy8gVHJpZ2dlcmVkIHdoZW4gZmllbGQgaXMgY2hhbmdlZDpcbiAgICAgICAgdGhpcy51cGRhdGVDc3NDbGFzc2VzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ub25JbnB1dENoYW5nZSh0aGlzLCBzZXRCeVNjcmlwdCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZUNzc0NsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBGb3JtSW5wdXRfQ09OU1RTLmVtcHR5Q2xhc3MpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIEZvcm1JbnB1dF9DT05TVFMuZW1wdHlDbGFzcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlKGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQsIGZpZWxkTmFtZTogc3RyaW5nID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJyksIGlzRGF0YUZpZWxkPzogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmZpZWxkTmFtZSA9IGZpZWxkTmFtZTtcbiAgICAgICAgdGhpcy5ub3JtYWxpemVkRmllbGROYW1lID0gdGhpcy5fZm9ybS5nZXROb3JtYWxpemVkRmllbGROYW1lKHRoaXMuZmllbGROYW1lKTtcblxuICAgICAgICBpZiAodGhpcy5ub3JtYWxpemVkRmllbGROYW1lKSB7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgZmllbGQgbmFtZSBwYXJ0c1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZVBhcnRzID0gdGhpcy5ub3JtYWxpemVkRmllbGROYW1lLnNwbGl0KCcuJyk7XG5cbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWVQYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWVsZE5hbWVzcGFjZSA9IGZpZWxkTmFtZVBhcnRzLnNoaWZ0KCkgYXMgU2NoZW1hTmFtZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gd2hlbiBiaW5kaW5nIHRvIHRoZSBjb25zZW50J3MgZ3JhbnQgZmllbGQsIHdlIG5lZWQgdG8gdHJlYXQgdGhlIGJhc2UgbmFtZSBhcyB0aGUgY29uc2VudCBpdHNlbGYgKHNjaGVtYSB2YWxpZGF0aW9ucyBtYWlubHkpXG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZE5hbWVzcGFjZSA9PSBuYW1lc3BhY2UgJiYgZmllbGROYW1lUGFydHNbZmllbGROYW1lUGFydHMubGVuZ3RoIC0gMV0gPT0gY29uc2VudEZpZWxkTmFtZSkge1xuICAgICAgICAgICAgICAgIGZpZWxkTmFtZVBhcnRzLnBvcCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmZpZWxkQmFzZU5hbWUgPSBmaWVsZE5hbWVQYXJ0cy5qb2luKCcuJykucmVwbGFjZShBcnJheU1hbmFnZXJfQ09OU1QuaW5kZXhNYXRjaGVyLCAnJyk7XG5cbiAgICAgICAgICAgIC8vIEtlZXAgbmFtZSBzYXZlZCBmb3IgZnV0dXJlIHNjcmVlbnNldCBpbnN0YW5jZXNcbiAgICAgICAgICAgIGlmICh0aGlzLmZpZWxkTmFtZSAhPT0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5maWVsZE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5maWVsZE5hbWUsIHRoaXMuZmllbGROYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmaWVsZERhdGEgPSBmaWVsZHNOYW1lRGF0YVt0aGlzLmZpZWxkQmFzZU5hbWVdO1xuXG4gICAgICAgIHRoaXMucGFyYW1OYW1lID0gZmllbGREYXRhID8gZmllbGREYXRhLnBhcmFtTmFtZSA6IHRoaXMubm9ybWFsaXplZEZpZWxkTmFtZTtcblxuICAgICAgICBpZiAoZmllbGREYXRhICYmIGZpZWxkRGF0YS5hdXRvRmlsbE5hbWUpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCduYW1lJywgZmllbGREYXRhLmF1dG9GaWxsTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNEYXRhRmllbGQgJiYgdGhpcy5ub3JtYWxpemVkRmllbGROYW1lKSB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtLmFkZERhdGFGaWVsZCh0aGlzKTtcblxuICAgICAgICAgICAgLy8gc2F2ZSB0aGUgb3JpZ2luYWwgdmFsdWVcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMub3JpZ2luYWxWYWx1ZSwgU3RyaW5nKHRoaXMuZ2V0VmFsdWUoZWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50KSkpO1xuXG4gICAgICAgICAgICB0aGlzLmtleVVwSGFuZGxlciA9IGUgPT4gdGhpcy5vbktleVVwKGUpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMua2V5VXBIYW5kbGVyKTtcblxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VIYW5kbGVyID0gKCkgPT4gdGhpcy5vbkZpZWxkQ2hhbmdlKCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuY2hhbmdlSGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXlOYW1lKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB1cGRhdGVEaXNwbGF5TmFtZShlbGVtZW50OiBIVE1MRWxlbWVudCA9IHRoaXMudGVtcGxhdGVFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmRpc3BsYXlOYW1lKSB8fCB0aGlzLmZpZWxkQmFzZU5hbWU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFycmF5Um9vdChmbGF0dGVuOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IGFycmF5Um9vdCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50ID8gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYXJyYXlSb290QXR0cmlidXRlKSA6ICcnO1xuICAgICAgICBpZiAoYXJyYXlSb290ICYmIGZsYXR0ZW4pIHtcbiAgICAgICAgICAgIGFycmF5Um9vdCA9IGFycmF5Um9vdC5yZXBsYWNlKEFycmF5TWFuYWdlcl9DT05TVC5pbmRleE1hdGNoZXIsICcuJDEnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXJyYXlSb290O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROYW1lKGlzTm9ybWFsaXplZDogYm9vbGVhbiwgZmxhdHRlbjogYm9vbGVhbiA9IGZhbHNlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgbmFtZSA9ICFpc05vcm1hbGl6ZWQgPyB0aGlzLmZpZWxkTmFtZSA6IHRoaXMubm9ybWFsaXplZEZpZWxkTmFtZTtcbiAgICAgICAgcmV0dXJuIGZsYXR0ZW4gPyBuYW1lLnJlcGxhY2UoQXJyYXlNYW5hZ2VyX0NPTlNULmluZGV4TWF0Y2hlciwgJy4kMScpIDogbmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNFbXB0eSh2YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNWYWx1ZUVtcHR5KHZhbHVlKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgX2lzVmFsdWVFbXB0eSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gIXZhbHVlIHx8IHZhbHVlID09PSBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWxsb3dFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5pbnN0YW5jZUVsZW1lbnQgJiYgdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYWxsb3dFbXB0eSkpOyAvLyBoYXNBdHRyaWJ1dGUgaXMgbm90IHN1cHBvcnRlZCBpbiBJRTlcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0VHJ1bmNhdGVkVmFsdWUodmFsKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLnRyaW0oU3RyaW5nKHZhbCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2YWxpZGF0ZShjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjaywgZm9ybURhdGEgPSB0aGlzLl9mb3JtLmdldEZsYXRGb3JtRGF0YShmYWxzZSwgdHJ1ZSkpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNJbkhpZGRlbkNvbnRhaW5lcigpKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXG4gICAgICAgICAgICAgICAgZmllbGQ6IHRoaXNcbiAgICAgICAgICAgIH0gYXMgSVZhbGlkYXRpb25JbmZvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudmFsaWRhdGVWYWx1ZShmb3JtRGF0YSwgdGhpcy5nZXRWYWxpZGF0ZVZhbHVlKGZvcm1EYXRhKSwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIGFzeW5jIHZhbGlkYXRlQXN5bmMoZm9ybURhdGEgPSB0aGlzLl9mb3JtLmdldEZsYXRGb3JtRGF0YShmYWxzZSwgdHJ1ZSkpOiBQcm9taXNlPElWYWxpZGF0aW9uSW5mbz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKCh2YWxpZGF0aW9uSW5mbzogSVZhbGlkYXRpb25JbmZvKSA9PiByZXNvbHZlKHZhbGlkYXRpb25JbmZvKSwgZm9ybURhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VmFsaWRhdGVWYWx1ZShmb3JtRGF0YTogYW55KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNsZWFyU2VydmVyRXJyb3IoKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNlcnZlclZhbGlkYXRpb24pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTZXJ2ZXJFcnJvcigpOiBHU0Vycm9ycyB7XG4gICAgICAgIHZhciBjb2RlID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuc2VydmVyVmFsaWRhdGlvbik7XG4gICAgICAgIGlmIChjb2RlKSByZXR1cm4gcGFyc2VJbnQoY29kZSk7XG5cbiAgICAgICAgcmV0dXJuIEdTRXJyb3JzLk9LO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRTZXJ2ZXJFcnJvcihlcnJvckNvZGU6IEdTRXJyb3JzKSB7XG4gICAgICAgIGxldCB2YWxpZGl0eVN0YXRlID0gZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LID8gVmFsaWRpdHlTdGF0ZXMudmFsaWQgOiBWYWxpZGl0eVN0YXRlcy5lcnJvcjtcbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuc2VydmVyVmFsaWRhdGlvbiwgZXJyb3JDb2RlICsgJycpO1xuICAgICAgICB0aGlzLnNldFZhbGlkaXR5U3RhdGUodmFsaWRpdHlTdGF0ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZhbGlkYXRlVmFsdWUoZm9ybURhdGE6IGFueSwgZmllbGRWYWx1ZTogYW55LCBjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjaykge1xuICAgICAgICBsZXQgZmllbGRJc0VtcHR5ID0gZmllbGRWYWx1ZSA9PSBudWxsIHx8IHRoaXMuZ2V0VHJ1bmNhdGVkVmFsdWUoZmllbGRWYWx1ZSkgPT09ICcnO1xuICAgICAgICBpZiAodGhpcy5yZXF1aXJlZCgpICYmIGZpZWxkSXNFbXB0eSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5SRVFVSVJFRF9WQUxVRV9WQUxJREFUSU9OX0VSUk9SLFxuICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLFxuICAgICAgICAgICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLnNlcnZlclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gc2NoZW1hIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKHRoaXMuX3NjaGVtYSkge1xuICAgICAgICAgICAgdmFyIHNjaGVtYUVycm9yID0gR1NFcnJvcnMuT0s7XG5cbiAgICAgICAgICAgIFNvbWUodGhpcy5zY2hlbWFDaGVja3MsIGNoZWNrID0+IHtcbiAgICAgICAgICAgICAgICBzY2hlbWFFcnJvciA9IGNoZWNrKGZpZWxkVmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNjaGVtYUVycm9yICE9IEdTRXJyb3JzLk9LO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzY2hlbWFFcnJvciAhPT0gR1NFcnJvcnMuT0spXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBzY2hlbWFFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLnNlcnZlclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VydmVyIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgc2VydmVyQ29kZSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNlcnZlclZhbGlkYXRpb24pOyAvLyBoYXNBdHRyaWJ1dGUgaXMgbm90IHN1cHBvcnRlZCBpbiBJRTlcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJDb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gc2VydmVyVmFsaWRhdGlvbiBhbHJlYWR5IHJldHVybmVkXG4gICAgICAgICAgICAgICAgdmFyIHNlcnZlclZhbGlkYXRpb25FcnJvckNvZGUgPSB0aGlzLmdldFNlcnZlckVycm9yKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZSAhPSBHU0Vycm9ycy5PSylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogc2VydmVyVmFsaWRhdGlvbkVycm9yQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JUeXBlOiBFcnJvclR5cGUuc2VydmVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBpbml0aWF0ZSBzZXJ2ZXIgdmFsaWRhdGlvblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlcnZlclZhbGlkYXRlZCgpKSByZXR1cm4gdGhpcy5zdGFydFNlcnZlclZhbGlkYXRpb24oZmllbGRWYWx1ZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXG4gICAgICAgICAgICBmaWVsZDogdGhpc1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2VydmVyVmFsaWRhdGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0U2VydmVyVmFsaWRhdGlvbihmaWVsZFZhbHVlOiBhbnksIGNhbGxiYWNrOiBJVmFsaWRhdGlvbkNhbGxiYWNrKTogdm9pZCB7XG4gICAgICAgIG5vdEltcGxlbWVudGVyQWJzdHJhY3QoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVxdWlyZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIFNjaGVtYSByZXF1aXJlcyB0aGlzIGZpZWxkLlxuICAgICAgICBpZiAodGhpcy5fc2NoZW1hUmVxdWlyZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9ybSByZXF1aXJlcyB0aGlzIGZpZWxkLlxuICAgICAgICBpZiAoIXRoaXMuYWxsb3dFbXB0eSgpICYmIHRoaXMuX2Zvcm0ucmVxdWlyZWRGaWVsZHMoKVt0aGlzLmZpZWxkTmFtZV0pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmllbGQgaXMgcmVxdWlyZWQgb24gdGhpcyBzY3JlZW4uXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5yZXF1aXJlZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgLy8jcmVnaW9uIHNob3cgZXJyb3JcblxuICAgIHB1YmxpYyBzaG93VmFsaWRDaGVja21hcmsoZWxlbWVudCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBCb29sZWFuKGVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuc2hvd1ZhbGlkQ2hlY2ttYXJrKSkgJiYgLy8gaWU5IGhhcyBubyBoYXNBdHRyaWJ1dGVcbiAgICAgICAgICAgICFnaWd5YS51dGlscy52YWxpZGF0aW9uLmlzRXhwbGljaXRGYWxzZShlbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNob3dWYWxpZENoZWNrbWFyaykpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2YWxpZGl0eVN0YXRlTGlzdGVuZXJzID0gbmV3IEFycmF5PElWYWxpZGl0eVN0YXRlTGlzdGVuZXI+KCk7XG5cbiAgICBwdWJsaWMgYWRkVmFsaWRpdHlTdGF0ZUxpc3RlbmVyKGxpc3RlbmVyOiBJVmFsaWRpdHlTdGF0ZUxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lcikgdGhpcy52YWxpZGl0eVN0YXRlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVWYWxpZGl0eVN0YXRlTGlzdGVuZXIobGlzdGVuZXI6IElWYWxpZGl0eVN0YXRlTGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyKSB0aGlzLnZhbGlkaXR5U3RhdGVMaXN0ZW5lcnMuc3BsaWNlKGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodGhpcy52YWxpZGl0eVN0YXRlTGlzdGVuZXJzLCBsaXN0ZW5lciksIDEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJpZ2dlclZhbGlkaXR5U3RhdGVDaGFuZ2UodmFsaWRpdHlTdGF0ZTogVmFsaWRpdHlTdGF0ZXMsIGZyb21TZXJ2ZXI6IGJvb2xlYW4pIHtcbiAgICAgICAgRm9yRWFjaCh0aGlzLnZhbGlkaXR5U3RhdGVMaXN0ZW5lcnMsIGxpc3RlbmVyID0+IGxpc3RlbmVyKHZhbGlkaXR5U3RhdGUsIGZyb21TZXJ2ZXIsIHRoaXMpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VmFsaWRpdHlTdGF0ZSgpOiBWYWxpZGl0eVN0YXRlcyB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWxpZGl0eVN0YXRlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRWYWxpZGl0eVN0YXRlKHZhbGlkaXR5U3RhdGU6IFZhbGlkaXR5U3RhdGVzLCBmcm9tU2VydmVyID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHZhbGlkaXR5U3RhdGUgIT09IHRoaXMuX3ZhbGlkaXR5U3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkaXR5U3RhdGUgPSB2YWxpZGl0eVN0YXRlO1xuXG4gICAgICAgICAgICB0aGlzLl9zaG93VmFsaWRpdHlPbklucHV0KCk7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJWYWxpZGl0eVN0YXRlQ2hhbmdlKHRoaXMuX3ZhbGlkaXR5U3RhdGUsIGZyb21TZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIF9zaG93VmFsaWRpdHlPbklucHV0KGVsZW1lbnQ6IEhUTUxFbGVtZW50ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQsIHZhbGlkaXR5U3RhdGU6IFZhbGlkaXR5U3RhdGVzID0gdGhpcy5fdmFsaWRpdHlTdGF0ZSwgYWxsb3dWYWxpZGl0eU1hcmtlciA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5zZXRWYWxpdGlkeUNsYXNzKGVsZW1lbnQsIHZhbGlkaXR5U3RhdGUpO1xuXG4gICAgICAgIGlmICh0aGlzLl9zaG93VmFsaWRpdHlNYXJrZXJbdmFsaWRpdHlTdGF0ZV0gJiYgYWxsb3dWYWxpZGl0eU1hcmtlcilcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudChlbGVtZW50LCBGb3JtSW5wdXRfQ09OU1RTLnNob3dDaGVja21hcmtDbGFzcyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KGVsZW1lbnQsIEZvcm1JbnB1dF9DT05TVFMuc2hvd0NoZWNrbWFya0NsYXNzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VmFsaXRpZHlDbGFzcyhcbiAgICAgICAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgICAgIHZhbGlkaXR5U3RhdGU6IFZhbGlkaXR5U3RhdGVzLFxuICAgICAgICB2YWxpZENsYXNzID0gRm9ybUlucHV0X0NPTlNUUy52YWxpZENsYXNzLFxuICAgICAgICBlcnJvckNsYXNzID0gRm9ybUlucHV0X0NPTlNUUy5lcnJvckNsYXNzLFxuICAgICAgICBwZW5kaW5nQ2xhc3MgPSBGb3JtSW5wdXRfQ09OU1RTLnBlbmRpbmdDbGFzcyxcbiAgICApIHtcbiAgICAgICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG5cbiAgICAgICAgdmFyIGN1cnJlbnRDbGFzczogc3RyaW5nO1xuXG4gICAgICAgIHN3aXRjaCAodmFsaWRpdHlTdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBWYWxpZGl0eVN0YXRlcy52YWxpZDpcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2xhc3MgPSB2YWxpZENsYXNzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWYWxpZGl0eVN0YXRlcy5lcnJvcjpcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2xhc3MgPSBlcnJvckNsYXNzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWYWxpZGl0eVN0YXRlcy5wZW5kaW5nOlxuICAgICAgICAgICAgICAgIGN1cnJlbnRDbGFzcyA9IHBlbmRpbmdDbGFzcztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0RWxlbWVudFZhbGlkYXRpb25DbGFzcyhlbGVtZW50LCBjdXJyZW50Q2xhc3MsIHZhbGlkQ2xhc3MsIGVycm9yQ2xhc3MsIHBlbmRpbmdDbGFzcyk7XG5cbiAgICAgICAgaWYgKHRoaXMucGxhY2VIb2xkZXJFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNldEVsZW1lbnRWYWxpZGF0aW9uQ2xhc3ModGhpcy5wbGFjZUhvbGRlckVsZW1lbnQsIGN1cnJlbnRDbGFzcywgdmFsaWRDbGFzcywgZXJyb3JDbGFzcywgcGVuZGluZ0NsYXNzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0RWxlbWVudFZhbGlkYXRpb25DbGFzcyhcbiAgICAgICAgZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgICAgIHZhbGlkYXRpb25DbGFzczogc3RyaW5nLFxuICAgICAgICB2YWxpZENsYXNzID0gRm9ybUlucHV0X0NPTlNUUy52YWxpZENsYXNzLFxuICAgICAgICBlcnJvckNsYXNzID0gRm9ybUlucHV0X0NPTlNUUy5lcnJvckNsYXNzLFxuICAgICAgICBwZW5kaW5nQ2xhc3MgPSBGb3JtSW5wdXRfQ09OU1RTLnBlbmRpbmdDbGFzcyxcbiAgICApIHtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQoZWxlbWVudCwgdmFsaWRDbGFzcyk7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KGVsZW1lbnQsIGVycm9yQ2xhc3MpO1xuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudChlbGVtZW50LCBwZW5kaW5nQ2xhc3MpO1xuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uQ2xhc3MpIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudChlbGVtZW50LCB2YWxpZGF0aW9uQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25DbGFzcyA9PT0gZXJyb3JDbGFzcykge1xuICAgICAgICAgICAgLy8gVmFsaWRhdGlvbiBmYWlsZWQuXG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ3RydWUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGVycm9ycyBkZXRlY3RlZC5cbiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAnZmFsc2UnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHVibGljIHVubGlua1RlbXBsYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5jaGFuZ2VIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuY2hhbmdlSGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMua2V5VXBIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmtleVVwSGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIudW5saW5rVGVtcGxhdGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICAgICAgdGhpcy5fc2NoZW1hV3JpdGVBY2Nlc3NNb2RlID0gV3JpdGVBY2Nlc3NNb2Rlcy5jbGllbnRNb2RpZnk7XG4gICAgICAgIHRoaXMuX3NjaGVtYVJlcXVpcmVkID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZm9ybS5zY2hlbWFWYWxpZGF0ZWQoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVtYSA9IHRoaXMuX2Zvcm0uZ2V0RmllbGRTY2hlbWEodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ29udmVydGVyID0gc2NoZW1hVHlwZVRvQ29udmVydGVyKHRoaXMuX3NjaGVtYS50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2hlbWFDaGVja3MgPSBuZXcgQXJyYXk8U2NoZW1hQ2hlY2s+KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVtYS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZUNoZWNrID0gU2NoZW1hVHlwZUNoZWNrc1t0aGlzLl9zY2hlbWEudHlwZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlQ2hlY2spIHRoaXMuc2NoZW1hQ2hlY2tzLnB1c2godHlwZUNoZWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnRseSB3ZSBzdXBwb3J0IG9ubHkgcmVnZXggZm9ybWF0IGNoZWNrcyAtIHdpbGwgY2hhbmdlLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zY2hlbWFGb3JtYXQ/Lm1hdGNoKGZvcm1hdFBhdHRlcm4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjaGVtYUNoZWNrcy5wdXNoKHNjaGVtYUZvcm1hdENoZWNrKHRoaXMuc2NoZW1hRm9ybWF0KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY2hlbWFSZXF1aXJlZCA9IHRoaXMuX3NjaGVtYS5yZXF1aXJlZCB8fCBTb21lKHRoaXMuc2NoZW1hQ2hlY2tzLCBjaGVjayA9PiBjaGVjaygnJykgIT0gR1NFcnJvcnMuT0spOyAvLyBzY2hlbWEgZGVmaW5lIHRoaXMgZmllbGQgYXMgcmVxdWlyZWQgLy8gc2NoZW1hIGNoZWNrcyBkbyBub3QgcGFzcyBpZiB0aGVyZSBpcyBubyB2YWx1ZVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVtYVdyaXRlQWNjZXNzTW9kZSA9IFdyaXRlQWNjZXNzTW9kZXNbdGhpcy5fc2NoZW1hLndyaXRlQWNjZXNzXSB8fCBXcml0ZUFjY2Vzc01vZGVzLmNsaWVudE1vZGlmeTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyVmFsdWUoKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRBcmlhUmVxdWlyZWQoKTtcblxuICAgICAgICAgICAgdGhpcy53Y2FnRXZhbHVhdGlvbigpO1xuXG4gICAgICAgICAgICB0aGlzLmluaXRQYXNza2V5QXV0b0NvbXBsZXRlKHRydWUpO1xuXG4gICAgICAgICAgICAvLyBTZXQgaW5wdXQncyBkZWZhdWx0IHZhbHVlIGFzIHByZXZpb3VzIHZhbHVlLlxuICAgICAgICAgICAgLy8gcHJlUG9wdWxhdGUgd2lsbCBvdmVycmlkZSB0aGlzIGlmIGEgdmFsdWUgZXhpc3RzLlxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0UGFzc2tleUF1dG9Db21wbGV0ZShhYm9ydCA9IGZhbHNlKSB7XG4gICAgICAgIGxldCBzaG91bGRSZWluaXQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hdXRvY29tcGxldGU/LmluZGV4T2YoJ3dlYmF1dGhuJykgPj0gMCAmJiBhd2FpdCBwYXNza2V5U2VydmljZS5pc0NvbmRpdGlvbmFsTWVkaWF0aW9uQXZhaWxhYmxlKCkgJiYgKGdpZ3lhLmxvY2FsSW5mby5pc0Nocm9tZSB8fCBnaWd5YS5sb2NhbEluZm8uaXNJT1NDaHJvbWUpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBhc3NrZXlTZXJ2aWNlLmF1dGhlbnRpY2F0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lZGlhdGlvbjogJ2NvbmRpdGlvbmFsJyBhcyBDcmVkZW50aWFsTWVkaWF0aW9uUmVxdWlyZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGFib3J0Q3VycmVudENlcmVtb255OiBhYm9ydCxcbiAgICAgICAgICAgICAgICAgICAgZG9udEhhbmRsZVNjcmVlblNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25FeHBpcmF0aW9uOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLnNlc3Npb25FeHBpcmF0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0Lm9uU2NyZWVuUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAuLi5yZXN1bHRcbiAgICAgICAgICAgICAgICB9LCB0aGlzLl9mb3JtKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXJyLmVycm9yQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlBBU1NLRVlfQUJPUlRFRDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEdTRXJyb3JzLk5PVF9TVVBQT1JURUQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuSU5WQUxJRF9TSVRFX0NPTkZJR1VSQVRJT05fRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRSZWluaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyci5lcnJvck1lc3NhZ2UgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0RXJyb3JNZXNzYWdlTmV3KGVyci5lcnJvckNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0Lm9uU2NyZWVuUmVzcG9uc2UoZXJyLCB0aGlzLl9mb3JtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2hvdWxkUmVpbml0ICYmIHRoaXMuaW5zdGFuY2VFbGVtZW50ICYmIGRvY3VtZW50LmJvZHkuY29udGFpbnModGhpcy5pbnN0YW5jZUVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0UGFzc2tleUF1dG9Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHdjYWdFdmFsdWF0aW9uKCkge1xuICAgICAgICBjb25zdCBoYXNNdWx0aXBsZUlucHV0cyA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LnBhcmVudEVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5pbnN0YW5jZUVsZW1lbnQudGFnTmFtZSk/Lmxlbmd0aCA+IDE7XG4gICAgICAgIGlmKHRoaXMudHlwZSAhPSAnc3VibWl0JyAmJiAhaGFzTXVsdGlwbGVJbnB1dHMpIHtcbiAgICAgICAgICAgIHRoaXMuZml4TGFiZWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBmaXhMYWJlbCgpIHtcbiAgICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5wYXJlbnRFbGVtZW50Py5xdWVyeVNlbGVjdG9yKCdsYWJlbCcpIGFzIEhUTUxMYWJlbEVsZW1lbnQ7XG4gICAgICAgIGlmIChsYWJlbCAmJiBsYWJlbC5odG1sRm9yICE9PSB0aGlzLklEKSB7XG4gICAgICAgICAgICBsYWJlbC5odG1sRm9yID0gdGhpcy5JRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLklEID09PSAnZ2lneWEtdGV4dGJveC1jb2RlJykge1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ0NvZGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgZm9yIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgbmF0aXZlIHBsYWNlaG9sZGVycy5cbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZVBsYWNlaG9sZGVyRWxlbWVudChlbE5hbWU6IHN0cmluZywgZWxUeXBlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKGVsTmFtZSA9PT0gJ2lucHV0JyAmJiBlbFR5cGUgIT09ICdjaGVja2JveCcgJiYgZWxUeXBlICE9PSAncmFkaW8nKSB7XG4gICAgICAgICAgICB0aGlzLnBsYWNlSG9sZGVyRWxlbWVudCA9IGdpZ3lhLnV0aWxzLkRPTS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsICcnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB9IGVsc2UgaWYgKGVsTmFtZSA9PT0gJ3RleHRhcmVhJykge1xuICAgICAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQgPSBnaWd5YS51dGlscy5ET00uY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnLCAnJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2lneWEubG9jYWxJbmZvLmlzSUU4KSB7XG4gICAgICAgICAgICB0aGlzLnBsYWNlSG9sZGVyRWxlbWVudC5zdHlsZS53aWR0aCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50WydjdXJyZW50U3R5bGUnXS53aWR0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50LnN0eWxlLndpZHRoID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5pbnN0YW5jZUVsZW1lbnQpLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbE5hbWUgPT09ICdpbnB1dCcgfHwgZWxOYW1lID09PSAndGV4dGFyZWEnKSB7XG4gICAgICAgICAgICB0aGlzLnBsYWNlSG9sZGVyRWxlbWVudFsnc2NyZWVuU2V0SW5zdGFuY2VPZiddID0gW3RoaXNdO1xuICAgICAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHRoaXMucGxhY2Vob2xkZXJBdHRyaWJ1dGVWYWx1ZSk7XG4gICAgICAgICAgICB0aGlzLnBsYWNlSG9sZGVyRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdzdHlsZScpKTtcbiAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLmdldEF0dHJpYnV0ZSh0aGlzLmluc3RhbmNlRWxlbWVudCwgJ2NsYXNzJykgKyAnIGdpZ3lhLXBsYWNlaG9sZGVyJyk7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlSG9sZGVyRWxlbWVudCwgdGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgICAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBsaW5lIGlzIGZvciB2ZXJ0aWNhbGx5IGFsaWduaW5nIHRoZSB0ZXh0IGluc2lkZSB0aGUgZWxlbWVudFxuICAgICAgICAgICAgZ2lneWEucGx1Z2luVXRpbHMuRE9NLmhpZGVFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF0dGFjaCBldmVudHMuXG4gICAgICAgIGlmIChlbE5hbWUgPT09ICd0ZXh0YXJlYScgfHwgKGVsTmFtZSA9PT0gJ2lucHV0JyAmJiBlbFR5cGUgIT09ICdjaGVja2JveCcgJiYgZWxUeXBlICE9PSAncmFkaW8nKSkge1xuICAgICAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnRbJ2F0dGFjaEV2ZW50J10oJ29ua2V5ZG93bicsIHRoaXMub25QbGFjZWhvbGRlcktleURvd24pO1xuICAgICAgICAgICAgLy90aGlzLnBsYWNlSG9sZGVyRWxlbWVudC5hdHRhY2hFdmVudCgnb25zZWxlY3RzdGFydCcsIHRoaXMub25UZXh0U2VsZWN0aW9uU3RhcnQpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd25Gb3JQbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLm9uQmx1ckZvclBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50WydhdHRhY2hFdmVudCddKCdvbmNvbnRleHRtZW51JywgdGhpcy5vbkNvbnRleHRNZW51T3BlbmVkKTtcbiAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50WydhdHRhY2hFdmVudCddKCdvbmZvY3VzJywgdGhpcy5vblBsYWNlaG9sZGVyRm9jdXNlZCk7XG4gICAgICAgICAgICAvL3RoaXMuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0JywgdGhpcy5vblRleHRTZWxlY3RlZCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbktleVVwRm9yUGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVQbGFjZWhvbGRlclN0YXRlVmlldyh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdDQUc6IEhpZGUgcGxhY2Vob2xkZXIgaW5wdXQgZnJvbSBzY3JlZW4gcmVhZGVycy5cbiAgICAgICAgdGhpcy5wbGFjZUhvbGRlckVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9zY2hlbWFSZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5zY2hlbWFDaGVja3MgPSB0aGlzLl9zY2hlbWEgPSBudWxsO1xuXG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKCcnKTtcbiAgICAgICAgICAgIHRoaXMuc2V0VmFsaWRpdHlTdGF0ZShWYWxpZGl0eVN0YXRlcy5fdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhc3NrZXlTZXJ2aWNlLmFib3J0Q3VycmVudENlcmVtb255KCk7XG5cbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFZhbHVlKGVsID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudCwgY3VycmVudFZhbHVlPzogYW55KTogSW5wdXRWYWx1ZVR5cGUge1xuICAgICAgICBpZiAoZWwudmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuICcnO1xuICAgICAgICBsZXQgdmFsID0gZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMudHJpbShlbC52YWx1ZSk7XG4gICAgICAgIGlmKHZhbCAmJiB0aGlzLl9zY2hlbWE/LmVuY3J5cHRlZE5vblNlYXJjaGFibGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsID0gdGhpcy52YWx1ZUNvbnZlcnRlcih2YWwpO1xuICAgICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oYGZhaWxlZCB0byBjb252ZXJ0IHZhbHVlIHRvIHNjaGVtYSB0eXBlYCwge3ZhbHVlOiB2YWx9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBwcmVQb3B1bGF0ZSh2YWx1ZTogc3RyaW5nIHwgYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAvLyBIaWRkZW4gZmllbGRzIGFyZSBub3QgcHJlLXBvcHVsYXRlZCBiZWNhdXNlIGl0IG1heSBvdmVyd3JpdGUgYSBzdGF0aWMgdmFsdWUuXG4gICAgICAgIGlmICh0aGlzLnR5cGUgIT09ICdoaWRkZW4nKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlKHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9zY2hlbWFXcml0ZUFjY2Vzc01vZGUgPT09IFdyaXRlQWNjZXNzTW9kZXMuY2xpZW50Q3JlYXRlICYmICF0aGlzLmlzRW1wdHkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuaW5zdGFuY2VFbGVtZW50ICYmIHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFZhbHVlKGRhdGFWYWx1ZTogc3RyaW5nIHwgYm9vbGVhbiwgc2V0QnlTY3JpcHQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgICAgIC8vIFNldCBuZXcgdmFsdWUgZGlyZWN0bHkgb24gdGhlIERPTS5cbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmluc3RhbmNlRWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgICAgIGlmIChlbC52YWx1ZSAhPT0gZGF0YVZhbHVlKSB7XG4gICAgICAgICAgICBlbC52YWx1ZSA9IFN0cmluZyhkYXRhVmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJpZ2dlciBjaGFuZ2UuXG4gICAgICAgIHRoaXMub25GaWVsZENoYW5nZShzZXRCeVNjcmlwdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBwbGFjZWhvbGRlckF0dHJpYnV0ZVZhbHVlKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyVGV4dCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnBsYWNlaG9sZGVyQXR0cmlidXRlKTtcbiAgICAgICAgaWYgKHBsYWNlaG9sZGVyVGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIHBsYWNlaG9sZGVyVGV4dCArICh0aGlzLnJlcXVpcmVkKCkgPyAnIConIDogJycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNIaWRkZW4oKSB7XG4gICAgICAgIHJldHVybiBpc0hpZGRlbih0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgfVxuXG4gICAgcHVibGljIGlzSW5IaWRkZW5Db250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiBpc0ZpZWxkSW5IaWRkZW5Db250YWluZXIodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZURpc3BsYXlOYW1lKHRoaXMuaW5zdGFuY2VFbGVtZW50IHx8IHRoaXMudGVtcGxhdGVFbGVtZW50KTtcblxuICAgICAgICBpZiAodGhpcy5zaG93VmFsaWRDaGVja21hcmsodGhpcy50ZW1wbGF0ZUVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93VmFsaWRpdHlNYXJrZXJbVmFsaWRpdHlTdGF0ZXMudmFsaWRdID0gdGhpcy5fc2hvd1ZhbGlkaXR5TWFya2VyW1ZhbGlkaXR5U3RhdGVzLnBlbmRpbmddID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dWYWxpZGl0eU9uSW5wdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmdldFZhbGlkaXR5U3RhdGUoKSA9PT0gVmFsaWRpdHlTdGF0ZXMuZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGUodmFsaWRhdGlvbkluZm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9ySW5mbzogSUVycm9ySW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHZhbGlkYXRpb25JbmZvLmZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JUeXBlOiB2YWxpZGF0aW9uSW5mby5lcnJvclR5cGVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuX2Zvcm0ucmVuZGVyRmllbGRFcnJvcihlcnJvckluZm8sIHRydWUsIHVuZGVmaW5lZCwgRXJyb3JUeXBlLnNlcnZlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBleGVjdXRlQ29uZGl0aW9uYWxSZXN1bHQoZXZhbHVhdGlvblJlc3VsdDogc3RyaW5nLCBjb25kaXRpb25hbEF0dDogSUNvbmRpdGlvbmFsQXR0cmlidXRlLCBlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICAvLyBHcmFiIHRoZSBsYXN0IGF0dHJpYnV0ZSB2YWx1ZSBiZWZvcmUgaXQncyBzZXQgdG8gdGhlIG5ldyB2YWx1ZS5cbiAgICAgICAgY29uc3QgbGFzdEF0dHJpYnV0ZVZhbHVlID0gY29uZGl0aW9uYWxBdHQubGFzdEF0dHJpYnV0ZVZhbHVlO1xuXG4gICAgICAgIC8vIFNldCBuZXcgYXR0cmlidXRlcyBpbiB0aGUgRE9NLlxuICAgICAgICBldmFsdWF0aW9uUmVzdWx0ID0gc3VwZXIuZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0KGV2YWx1YXRpb25SZXN1bHQsIGNvbmRpdGlvbmFsQXR0LCBlbGVtZW50KTtcblxuICAgICAgICAvLyBPbmx5IGludGVyZXN0ZWQgaW4gY2hhbmdlcy5cbiAgICAgICAgaWYgKGV2YWx1YXRpb25SZXN1bHQgPT09IGxhc3RBdHRyaWJ1dGVWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxhc3RBdHRyaWJ1dGVWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25kaXRpb25hbEF0dC5hdHRyaWJ1dGVOYW1lID09PSBGb3JtSW5wdXRfQ09OU1RTLnJlcXVpcmVkKSB7XG4gICAgICAgICAgICAvLyBUaGUgZmllbGQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcmVxdWlyZWQgaW4gdGhlIFVJIGFuZCB0cmlnZ2VyZWQgYW4gZXJyb3IuXG4gICAgICAgICAgICAvLyBUcmlnZ2VyaW5nIHRoZSBmaWVsZCBjaGFuZ2UgZXZlbnQgd2lsbCBjbGVhciB0aGUgZXJyb3IgaWYgaXQgd2FzIGNhdXNlZCBieSB0aGUgcmVxdWlyZWQgc3RhdHVzLlxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VmFsaWRpdHlTdGF0ZSgpID09PSBWYWxpZGl0eVN0YXRlcy5lcnJvcikge1xuICAgICAgICAgICAgICAgIHRoaXMub25GaWVsZENoYW5nZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBXQ0FHIGNvbXBsaWFuY2UuXG4gICAgICAgICAgICB0aGlzLnNldEFyaWFSZXF1aXJlZCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBsYWNlaG9sZGVyIHZhbHVlIHVwZGF0ZWQgdmlhIGNvbmRpdGlvbmFsIGF0dHJpYnV0ZS5cbiAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlclZhbHVlKCk7XG5cbiAgICAgICAgcmV0dXJuIGV2YWx1YXRpb25SZXN1bHQ7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEFyaWFSZXF1aXJlZCgpOiB2b2lkIHtcbiAgICAgICAgLy8gIzY5NTMzXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdzdWJtaXQnIHx8IHRoaXMudHlwZSA9PT0gJ2J1dHRvbicgfHwgdGhpcy50eXBlID09PSAnZ2lneWEtcGhvbmUtbnVtYmVyLWlucHV0Jykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLXJlcXVpcmVkJywgdGhpcy5yZXF1aXJlZCgpID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFBsYWNlaG9sZGVyVmFsdWUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyQXR0cmlidXRlVmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnROYW1lID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudFR5cGUgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcbiAgICAgICAgICAgIGlmIChnaWd5YS5sb2NhbEluZm8uaXNJRTggfHwgZ2lneWEubG9jYWxJbmZvLmlzSUU5KSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBsYWNlSG9sZGVyRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVBsYWNlaG9sZGVyRWxlbWVudChlbGVtZW50TmFtZSwgZWxlbWVudFR5cGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uc2V0QXR0cmlidXRlKHRoaXMucGxhY2VIb2xkZXJFbGVtZW50LCAndmFsdWUnLCB0aGlzLnBsYWNlaG9sZGVyQXR0cmlidXRlVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKChlbGVtZW50TmFtZSA9PT0gJ2lucHV0JyAmJiBlbGVtZW50VHlwZSAhPT0gJ2NoZWNrYm94JyAmJiBlbGVtZW50VHlwZSAhPT0gJ3JhZGlvJykgfHwgZWxlbWVudE5hbWUgPT09ICd0ZXh0YXJlYScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsIHRoaXMucGxhY2Vob2xkZXJBdHRyaWJ1dGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uS2V5VXBGb3JQbGFjZWhvbGRlcihlOiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIHZhciBpbnB1dCA9IGUuc3JjRWxlbWVudFsnc2NyZWVuU2V0SW5zdGFuY2VPZiddWzBdIGFzIEZvcm1JbnB1dDtcbiAgICAgICAgaWYgKGlucHV0LmlzQ3RybEtleVVwKSB7XG4gICAgICAgICAgICB2YXIga2V5Y29kZSA9IGUua2V5Q29kZTtcbiAgICAgICAgICAgIGlmIChrZXljb2RlID09PSB0aGlzLktFWUNPREVfTEVUVEVSX1gpIHtcbiAgICAgICAgICAgICAgICAvLyB4IGNoYXJhY3RlciwgYmFja3NwYWNlIG9yIGRlbGV0ZVxuICAgICAgICAgICAgICAgIGlucHV0LnRvZ2dsZVBsYWNlaG9sZGVyU3RhdGVWaWV3KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uQmx1ckZvclBsYWNlaG9sZGVyKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGVsID0gZXZlbnQuc3JjRWxlbWVudDtcbiAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gZWxbJ3ZhbHVlJ107XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuc3JjRWxlbWVudFsnc2NyZWVuU2V0SW5zdGFuY2VPZiddWzBdIGFzIEZvcm1JbnB1dDtcbiAgICAgICAgaWYgKCFjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIGlucHV0LnRvZ2dsZVBsYWNlaG9sZGVyU3RhdGVWaWV3KHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGhpcyBoYW5kbGVyIGlzIGZvciBzdXBwcmVzc2luZyB0aGUgdGV4dCBzZWxlY3Rpb24gb24gdGhlIHBsYWNlaG9sZGVyXG4gICAgLy9wdWJsaWMgb25UZXh0U2VsZWN0aW9uU3RhcnQoZSlcbiAgICAvL3tcbiAgICAvLyAgICB2YXIgaW5wdXQgPSBlLnNyY0VsZW1lbnRbJ3NjcmVlblNldEluc3RhbmNlT2YnXVswXSBhcyBGb3JtSW5wdXQ7XG4gICAgLy8gICAgaWYgKGlucHV0LmlzQ3Vycm5ldFZhbHVlUGxhY2Vob2xkZXJUZXh0KSB7XG4gICAgLy8gICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgLy8gICAgfVxuICAgIC8vfVxuICAgIHB1YmxpYyBvbkNvbnRleHRNZW51T3BlbmVkKGU6IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25QbGFjZWhvbGRlckZvY3VzZWQoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZS5zcmNFbGVtZW50O1xuICAgICAgICBjb25zdCBpbnB1dCA9IGVsZW1lbnRbJ3NjcmVlblNldEluc3RhbmNlT2YnXVswXSBhcyBGb3JtSW5wdXQ7XG4gICAgICAgIGlucHV0LnRvZ2dsZVBsYWNlaG9sZGVyU3RhdGVWaWV3KGZhbHNlLCBlKTtcbiAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgaWYgKGlucHV0Ll9zY3JlZW5TZXQuX3BsYWNlaG9sZGVySW50ZXJ2YWxJRCA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlucHV0LnRvZ2dsZVBsYWNlaG9sZGVyU3RhdGVWaWV3KGZhbHNlLCBlKTtcbiAgICAgICAgICAgIGlucHV0Ll9zY3JlZW5TZXQuX3BsYWNlaG9sZGVySW50ZXJ2YWxJRCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuX3NjcmVlblNldC5fcGxhY2Vob2xkZXJJbnRlcnZhbElEID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC50b2dnbGVQbGFjZWhvbGRlclN0YXRlVmlldyhmYWxzZSwgZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnB1dC5fc2NyZWVuU2V0Ll9wbGFjZWhvbGRlckludGVydmFsSUQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMCkgYXMgYW55O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy90aGlzIGhhbmRsZXIgaXMgZm9yIGNhc2VzIHdoZXJlIHRoZSB1c2VyIHNlbGVjdHMgdGhlIHRleHQgaW5zaWRlIHRoZSBlbGVtZW50IChpbiBvcmRlciB0byBkZWxldGUgcGFydCBvZiBpdClcbiAgICAvL3B1YmxpYyBvblRleHRTZWxlY3RlZCgpIHtcbiAgICAvLyAgICB2YXIgZWwgPSBldmVudC5zcmNFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgIC8vICAgIHZhciBpbnB1dCA9IGV2ZW50LnNyY0VsZW1lbnRbJ3NjcmVlblNldEluc3RhbmNlT2YnXVswXSBhcyBGb3JtSW5wdXQ7XG4gICAgLy8gICAgaW5wdXQuaXNUZXh0U2VsZWN0ZWQgPSB0cnVlO1xuICAgIC8vfVxuXG4gICAgcHVibGljIG9uUGxhY2Vob2xkZXJLZXlEb3duKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgdmFyIGtleWNvZGUgPSBlLmtleUNvZGU7XG4gICAgICAgIHZhciBpc0VudGVyZWRWYWx1ZURpc3BsYXlhYmxlOiBib29sZWFuID0gaXNLZXlDb2RlRGlzcGxheWFibGUoa2V5Y29kZSk7XG4gICAgICAgIHZhciBlbGVtZW50ID0gZS5zcmNFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICB2YXIgaW5wdXQgPSBlbGVtZW50WydzY3JlZW5TZXRJbnN0YW5jZU9mJ11bMF0gYXMgRm9ybUlucHV0O1xuICAgICAgICBpZiAoaXNFbnRlcmVkVmFsdWVEaXNwbGF5YWJsZSkge1xuICAgICAgICAgICAgLy8gaGlkZSB0aGUgcGxhY2Vob2xkZXIgZWxlbWVudCBhbmQgc2hvdyB0aGUgYWN0dWFsIGVsZW1lbnRcbiAgICAgICAgICAgIGlucHV0LnRvZ2dsZVBsYWNlaG9sZGVyU3RhdGVWaWV3KGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXljb2RlID09PSBpbnB1dC5LRVlfQ09ERV9CQUNLU1BBQ0UgfHwga2V5Y29kZSA9PT0gaW5wdXQuS0VZX0NPREVfREVMRVRFKSB7XG4gICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uS2V5RG93bkZvclBsYWNlaG9sZGVyKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgdmFyIGtleWNvZGU6IG51bWJlciA9IGUua2V5Q29kZTtcbiAgICAgICAgdmFyIGlzRW50ZXJlZFZhbHVlRGlzcGxheWFibGU6IGJvb2xlYW4gPSBpc0tleUNvZGVEaXNwbGF5YWJsZShrZXljb2RlKTtcbiAgICAgICAgdmFyIGlucHV0ID0gZS5zcmNFbGVtZW50WydzY3JlZW5TZXRJbnN0YW5jZU9mJ11bMF0gYXMgRm9ybUlucHV0O1xuICAgICAgICB2YXIgbGFzdFZhbHVlID0gaW5wdXQuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcblxuICAgICAgICBpZiAoIWlzRW50ZXJlZFZhbHVlRGlzcGxheWFibGUgJiYgaW5wdXQuaXNDdXJybmV0VmFsdWVQbGFjZWhvbGRlclRleHQgJiYga2V5Y29kZSA9PSBpbnB1dC5LRVlfQ09ERV9CQUNLU1BBQ0UpIHtcbiAgICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAobGFzdFZhbHVlICYmIGxhc3RWYWx1ZS5sZW5ndGggPT0gMSAmJiBrZXljb2RlID09IGlucHV0LktFWV9DT0RFX0JBQ0tTUEFDRSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgZS5zcmNFbGVtZW50LnNldEF0dHJpYnV0ZSgndmFsdWUnLCAnJyk7XG4gICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmlzVGV4dFNlbGVjdGVkICYmIChrZXljb2RlID09IGlucHV0LktFWV9DT0RFX0RFTEVURSB8fCBrZXljb2RlID09IGlucHV0LktFWV9DT0RFX0JBQ0tTUEFDRSkpIHtcbiAgICAgICAgICAgIGlucHV0LmlzVGV4dFNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpbnB1dC50b2dnbGVQbGFjZWhvbGRlclN0YXRlVmlldyh0cnVlLCBldmVudCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICBpbnB1dC5pc0N0cmxLZXlVcCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNFbnRlcmVkVmFsdWVEaXNwbGF5YWJsZSAmJiBpbnB1dC5pc0N1cnJuZXRWYWx1ZVBsYWNlaG9sZGVyVGV4dCkge1xuICAgICAgICAgICAgaW5wdXQudG9nZ2xlUGxhY2Vob2xkZXJTdGF0ZVZpZXcoZmFsc2UpO1xuICAgICAgICB9IGVsc2UgaWYgKGlucHV0LmlzQ3Vycm5ldFZhbHVlUGxhY2Vob2xkZXJUZXh0ICYmIGtleWNvZGUgPT0gaW5wdXQuS0VZX0NPREVfREVMRVRFKSB7XG4gICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b2dnbGVQbGFjZWhvbGRlclN0YXRlVmlldyhzaG93UGxhY2Vob2xkZXI6IGJvb2xlYW4sIGU6IGFueSA9IG51bGwpIHtcbiAgICAgICAgLy8gZTogTVNFdmVudE9ialxuICAgICAgICBpZiAoc2hvd1BsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIC8vdGhpcyBpcyB0byBoYW5kbGUgdGhlIHNlbGVjdCBldmVudCB3aGVyZSB0aGUgdGV4dCBpcyBlcmFzZWQgYW5kIHRoZSBwbGFjZWhvbGRlciB2YWx1ZSBpc24ndCBzZXRcbiAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnaWd5YS5wbHVnaW5VdGlscy5ET00uc2hvd0VsZW1lbnQodGhpcy5wbGFjZUhvbGRlckVsZW1lbnQpO1xuICAgICAgICAgICAgZ2lneWEucGx1Z2luVXRpbHMuRE9NLmhpZGVFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcbiAgICAgICAgICAgIGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uc2V0QXR0cmlidXRlKHRoaXMuaW5zdGFuY2VFbGVtZW50LCAndmFsdWUnLCAnJyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGxhY2VIb2xkZXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2VIb2xkZXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS5wbHVnaW5VdGlscy5ET00uaGlkZUVsZW1lbnQodGhpcy5wbGFjZUhvbGRlckVsZW1lbnQpO1xuICAgICAgICAgICAgZ2lneWEucGx1Z2luVXRpbHMuRE9NLnNob3dFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcbiAgICAgICAgICAgIGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uc2V0QXR0cmlidXRlKHRoaXMucGxhY2VIb2xkZXJFbGVtZW50LCAndmFsdWUnLCB0aGlzLnBsYWNlaG9sZGVyQXR0cmlidXRlVmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQ3Vycm5ldFZhbHVlUGxhY2Vob2xkZXJUZXh0ID0gc2hvd1BsYWNlaG9sZGVyO1xuICAgICAgICB0aGlzLmlzQ3RybEtleVVwID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNUZXh0U2VsZWN0ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0TG9nZ2VyTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGROYW1lIHx8IHN1cGVyLmdldExvZ2dlck5hbWUoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0QXJyYXlLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5S2V5RmllbGRBdHRyaWJ1dGUpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRBcnJheUtleVZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1JbnB1dF9DT05TVFMuYXJyYXlLZXlWYWx1ZUF0dHJpYnV0ZSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldFN0b3JlZEluQXJyYXlWYWx1ZSgpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZ2V0U3RvcmVkSW5BcnJheUl0ZW0oKTtcbiAgICAgICAgY29uc3QgZmllbGROYW1lID0gdGhpcy5nZXRTdG9yZWRJbkFycmF5RmllbGROYW1lKCk7XG5cbiAgICAgICAgcmV0dXJuIGl0ZW0/LltmaWVsZE5hbWVdO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRTdG9yZWRJbkFycmF5RmllbGROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZE5hbWUuc3BsaXQoJy4nKT8ucG9wKClcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0U3RvcmVkSW5BcnJheUl0ZW0oKSB7XG4gICAgICAgIGNvbnN0IGFycmF5S2V5VmFsdWUgPSB0aGlzLmdldEFycmF5S2V5VmFsdWUoKTtcbiAgICAgICAgY29uc3QgYXJyYXlLZXlGaWVsZCA9IHRoaXMuZ2V0QXJyYXlLZXlGaWVsZCgpO1xuXG4gICAgICAgIGNvbnN0IGFycmF5RGF0YSA9IHRoaXMuZ2V0UGFyZW50QXJyYXkoKTtcblxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMuYXJyYXkuZmlyc3QoYXJyYXlEYXRhLCBvYmogPT4gb2JqW2FycmF5S2V5RmllbGRdID09PSBhcnJheUtleVZhbHVlKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0UGFyZW50QXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IG5lc3RlZEZvcm1EYXRhID0gdGhpcy5fZm9ybS5nZXRGb3JtRGF0YShmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IGFycmF5Um9vdCA9IHRoaXMuZ2V0QXJyYXlSb290KHRydWUpO1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0LmdldFByb3BlcnR5QnlTZXJpYWxpemVkTmFtZShuZXN0ZWRGb3JtRGF0YSwgYXJyYXlSb290LCB0cnVlKTtcbiAgICB9XG4gICAgcHVibGljIHJ1bk9uU2VydmVyRG9uZShjYWxsYmFjazogU2VydmVyRG9uZUZpZWxkQ2FsbGJhY2spIHtcbiAgICAgICAgbm90SW1wbGVtZW50ZXJBYnN0cmFjdCgpO1xuICAgIH1cblxufVxuZnVuY3Rpb24gaW50ZWdlckNoZWNrKGZpZWxkVmFsdWUpIHtcbiAgICBpZiAoZmllbGRWYWx1ZSAmJiBpc05hTihwYXJzZUludChmaWVsZFZhbHVlKSkpIHJldHVybiBHU0Vycm9ycy5WQUxJREFUSU9OX0VSUk9SO1xuXG4gICAgcmV0dXJuIEdTRXJyb3JzLk9LO1xufVxuZnVuY3Rpb24gZmxvYXRDaGVjayhmaWVsZFZhbHVlKSB7XG4gICAgaWYgKGZpZWxkVmFsdWUgJiYgaXNOYU4ocGFyc2VGbG9hdChmaWVsZFZhbHVlKSkpIHJldHVybiBHU0Vycm9ycy5WQUxJREFUSU9OX0VSUk9SO1xuXG4gICAgcmV0dXJuIEdTRXJyb3JzLk9LO1xufVxuZnVuY3Rpb24gYm9vbGVhbkNoZWNrKGZpZWxkVmFsdWUpIHtcbiAgICBpZiAoZmllbGRWYWx1ZSA9PSBudWxsKSByZXR1cm4gR1NFcnJvcnMuVkFMSURBVElPTl9FUlJPUjtcblxuICAgIHJldHVybiBHU0Vycm9ycy5PSztcbn1cbmZ1bmN0aW9uIGRhdGVDaGVjayhmaWVsZFZhbHVlKSB7XG4gICAgaWYgKGZpZWxkVmFsdWUpIHtcbiAgICAgICAgdmFyIGRhdGVSZXN1bHQgPSBnaWd5YS5nbG9iYWwuZGF0ZS5nZXRJU09EYXRlKGZpZWxkVmFsdWUpOyAvLyBGb3JtYXQgaXMgYWx3YXlzIElTT1xuXG4gICAgICAgIGlmICghZGF0ZVJlc3VsdCkgcmV0dXJuIEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1I7XG4gICAgfVxuXG4gICAgcmV0dXJuIEdTRXJyb3JzLk9LO1xufVxudmFyIFNjaGVtYVR5cGVDaGVja3M6IElNYXA8U2NoZW1hQ2hlY2s+ID0ge1xuICAgIGludGVnZXI6IGludGVnZXJDaGVjayxcbiAgICBsb25nOiBpbnRlZ2VyQ2hlY2ssXG4gICAgZmxvYXQ6IGZsb2F0Q2hlY2ssXG4gICAgYm9vbGVhbjogYm9vbGVhbkNoZWNrLFxuICAgIGRhdGU6IGRhdGVDaGVjayxcbn07XG5EZWVwRnJlZXplKFNjaGVtYVR5cGVDaGVja3MpO1xuY29uc3QgZm9ybWF0UGF0dGVybiA9IC8oLio/KVxcKFsnXCJdKC4qPylbJ1wiXVxcKSQvO1xuZnVuY3Rpb24gc2NoZW1hRm9ybWF0Q2hlY2soZm9ybWF0OiBzdHJpbmcpOiBTY2hlbWFDaGVjayB7XG4gICAgY29uc3QgYXJGb3JtYXQgPSBmb3JtYXQubWF0Y2goZm9ybWF0UGF0dGVybik7XG4gICAgaWYgKGFyRm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdFR5cGUgPSBhckZvcm1hdFsxXTtcbiAgICAgICAgY29uc3QgZm9ybWF0VmFsdWUgPSBhckZvcm1hdFsyXTtcbiAgICAgICAgaWYgKGZvcm1hdFR5cGUgJiYgZm9ybWF0VmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChmb3JtYXRUeXBlID09PSAncmVnZXgnKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyByZWdleCA9IC9eXFwvPyguKj8pKD86XFwvKCg/OltkZ2ltc3V5XSg/IS4qXFwxKSkqKT8pPyQvIGlzIGZpbmRpbmcgaWYgYSBnaXZlbiB2YWx1ZSBpcyBvbmUgb2YgdGhlIGZvbGxvd2luZyBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgLy8ge3JlZ2V4X2V4cHJlc3Npb259IG9yIC97cmVnZXhfZXhwcmVzc2lvbn0vIG9yIC97cmVnZXhfZXhwcmVzc2lvbn0ve2ZsYWdzfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdleFBhcnRzID0gZm9ybWF0VmFsdWUubWF0Y2goL15cXC8/KC4qPykoPzpcXC8oKD86W2RnaW1zdXldKD8hLipcXDEpKSopPyk/JC8pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdleEV4cCA9IHJlZ2V4UGFydHNbMV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4RmxhZ3MgPSByZWdleFBhcnRzWzJdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdleEZvcm1hdCA9IG5ldyBSZWdFeHAocmVnZXhFeHAsIHJlZ2V4RmxhZ3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlZ2V4Rm9ybWF0LnRlc3QoJycpOyAvLyBSdW4gcmVnZXggdG8gbWFrZSBzdXJlIHRoYXQgcmVnZXggd2lsbCBjcnVzaCBpZiBuZWNlc2FyeSBkdXJpbmcgc2NoZW1hIGxvYWRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVnZXhGb3JtYXQuZ2xvYmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4Rm9ybWF0Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVzdCA9IHJlZ2V4Rm9ybWF0LnRlc3QoZmllbGRWYWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlc3QpIHJldHVybiBHU0Vycm9ycy5WQUxJREFUSU9OX0VSUk9SO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gR1NFcnJvcnMuT0s7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHJlZ0V4IHBhdHRlcm46ICcgKyBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGZvcm1hdDogJyArIGZvcm1hdCk7XG59XG5Gb3JtSW5wdXQuYWRkSW5wdXRUb0xpYnJhcnkoRm9ybUlucHV0LCBGb3JtSW5wdXRQcmlvcml0aWVzLkZhbGxiYWNrKTtcbiIsImltcG9ydCB7XG4gICAgRm9ybUlucHV0LFxuICAgIEZvcm1JbnB1dF9DT05TVFMsXG4gICAgRm9ybUlucHV0UHJpb3JpdGllcyxcbiAgICBJRm9ybUlucHV0Q29udGV4dCxcbiAgICBJVmFsaWRhdGlvbkNhbGxiYWNrLFxuICAgIFZhbGlkaXR5U3RhdGVzXG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XG5pbXBvcnQge1JlZ2lzdGVyRm9ybX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9SZWdpc3RlckZvcm0nO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHtFcnJvclR5cGV9IGZyb20gXCIuLi9FcnJvcnNcIjtcbmltcG9ydCB7U2VydmVyRm9ybUlucHV0fSBmcm9tIFwiLi9TZXJ2ZXJGb3JtSW5wdXRcIjtcblxuZXhwb3J0IGNsYXNzIExvZ2luSWRJbnB1dCBleHRlbmRzIFNlcnZlckZvcm1JbnB1dCB7XG4gICAgcHJpdmF0ZSBfc2VydmVyVmFsaWRhdGVBdmFsaWFiaWxpdHk6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBsYXN0Q2hlY2s6IHN0cmluZztcbiAgICBwcml2YXRlIGlzU2VydmVyVmFsaWRhdGlvbkVuYWJsZWQ6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBsb2dpbklkTXVzdEJlRW1haWw6IGJvb2xlYW47XG5cbiAgICBwdWJsaWMgc3RhdGljIEZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5mb3JtIGluc3RhbmNlb2YgUmVnaXN0ZXJGb3JtICYmIChjb250ZXh0LmZpZWxkTmFtZSA9PT0gJ2VtYWlsJyB8fCBjb250ZXh0LmZpZWxkTmFtZSA9PT0gJ3VzZXJuYW1lJyk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcbiAgICAgICAgc3VwZXIoY29udGV4dCk7XG5cbiAgICAgICAgdGhpcy5pc1NlcnZlclZhbGlkYXRpb25FbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2VydmVyVmFsaWRhdGVBdmFsaWFiaWxpdHkgPSB0aGlzLnNob3dWYWxpZENoZWNrbWFyayhjb250ZXh0LmVsZW1lbnQpO1xuICAgICAgICB0aGlzLmxvZ2luSWRNdXN0QmVFbWFpbCA9IGNvbnRleHQuZmllbGROYW1lID09PSAnZW1haWwnO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBzaG93RGF0YVBlbmRpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5fZm9ybS5yZW5kZXJGaWVsZEVycm9yKHtmaWVsZDogdGhpcywgZXJyb3JDb2RlOiBHU0Vycm9ycy5EYXRhX1BlbmRpbmd9LCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBvbktleVVwKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmFsdWUoKSAhPT0gdGhpcy5wcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgICAgICAvLyBGb3JjZSBhbGwgZXZlbnRzIHRvIGJlIGZpcmVkIGJlY2F1c2Ugd2UndmUgdG91Y2hlZCB0aGUgZmllbGQgZXJyb3Igc3RhdHVzLlxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5sYXN0Q2hlY2sgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhcnRTZXJ2ZXJRdWVyeSgpO1xuICAgICAgICAgICAgdGhpcy5zaG93RGF0YVBlbmRpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5vbktleVVwKGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgY29uc3QgZW1haWwgPSB0aGlzLmdldEVtYWlsRnJvbVF1ZXJ5UGFyYW1zKCk7XG4gICAgICAgIGlmIChlbWFpbCkge1xuICAgICAgICAgICAgdGhpcy5wcmVQb3B1bGF0ZShlbWFpbCk7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICAgICAgdGhpcy5sYXN0Q2hlY2sgPSBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXJ2ZXJWYWxpZGF0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXJ2ZXJWYWxpZGF0ZUF2YWxpYWJpbGl0eTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhcnRTZXJ2ZXJWYWxpZGF0aW9uKGZpZWxkVmFsdWU6IGFueSwgY2FsbGJhY2s6IElWYWxpZGF0aW9uQ2FsbGJhY2spOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHRoaXMubGFzdENoZWNrKSB7XG4gICAgICAgICAgICAvLyBOb3RoaW5nIGhhcyBjaGFuZ2VkIHNpbmNlIGxhc3QgY2hlY2ssIG5vIG5lZWQgdG8gcXVlcnkgdGhlIHNlcnZlciBhZ2FpblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zaG93RGF0YVBlbmRpbmcoKTtcblxuICAgICAgICB0aGlzLmxhc3RDaGVjayA9IGZpZWxkVmFsdWU7XG4gICAgICAgIHRoaXMuY2xlYXJTZXJ2ZXJFcnJvcigpO1xuXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLnNlcnZlclZhbGlkYXRpb24pO1xuICAgICAgICB0aGlzLnNldFZhbGlkaXR5U3RhdGUoVmFsaWRpdHlTdGF0ZXMucGVuZGluZyk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNTZXJ2ZXJWYWxpZGF0aW9uRW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIFdlJ3ZlIGFscmVhZHkgdHJpZWQgdG8gdXNlIHRoZSBzZXJ2ZXItc2lkZSB2YWxpZGF0aW9uIGFuZCBkaXNjb3ZlcmVkIHRoYXQgaXQncyBkaXNhYmxlZC5cbiAgICAgICAgICAgIC8vIFNhdmUgQVBJIGNhbGxzIGFuZCBkb24ndCB0cnkgYWdhaW4uXG4gICAgICAgICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5PSyxcbiAgICAgICAgICAgICAgICBmaWVsZDogdGhpc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS5hY2NvdW50cy5pc0F2YWlsYWJsZUxvZ2luSUQoe1xuICAgICAgICAgICAgICAgIGxvZ2luSUQ6IGZpZWxkVmFsdWUsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHJlcyA9PiB0aGlzLnNlcnZlclF1ZXJ5RG9uZShyZXMsIGZpZWxkVmFsdWUsIGNhbGxiYWNrKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHNlcnZlclF1ZXJ5RG9uZShyZXM6IGFueSwgY2hlY2tlZFZhbHVlLCBjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjaykge1xuICAgICAgICAvLyByZXNwb25zZSBpcyBubyBsb25nZXIgcmVsZXZhbnQgZHVlIHRvIHNjcmVlbiBnb2luZyBvdXQgb2Ygdmlld1xuICAgICAgICBpZiAoIXRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXNwb25zZSBpcyBubyBsb25nZXIgcmVsZXZhbnQgZHVlIHRvIHZhbHVlIGNoYW5nZVxuICAgICAgICBpZiAodGhpcy5nZXRWYWx1ZSgpICE9PSBjaGVja2VkVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlcnJvckNvZGU6IEdTRXJyb3JzID0gcmVzLmVycm9yQ29kZTtcbiAgICAgICAgc3dpdGNoIChlcnJvckNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuT0s6XG4gICAgICAgICAgICAgICAgaWYgKCFnaWd5YS51dGlscy52YWxpZGF0aW9uLmlzRXhwbGljaXRUcnVlKHJlcy5pc0F2YWlsYWJsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gR1NFcnJvcnMuVU5JUVVFX0lERU5USUZJRVJfRVhJU1RTO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgLy8gQ29uc29sZSBTaXRlIFNldHRpbmdzIGhhcyBcIlByb3RlY3QgYWdhaW5zdCBsb2dpbiBpZGVudGlmaWVyIGhhcnZlc3RpbmdcIiBvcHRpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGNhdXNlcyBlcnJvciBjb2RlIDQwMzAyNiB0byBiZSByZXR1cm5lZCBmb3IgYWxsIGlzQXZhaWxhYmxlTG9naW5JRCBjYWxscy5cbiAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkbid0IHNob3cgYW55IGVycm9yIHRvIHRoZSBjbGllbnQsIHNvIHRyYW5zZm9ybSB0byBhbiBcIk9LXCIgcmVzcG9uc2UuXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlVOQVVUSE9SSVpFRF9BQ0NFU1NfRVJST1I6XG4gICAgICAgICAgICAgICAgdGhpcy5pc1NlcnZlclZhbGlkYXRpb25FbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gR1NFcnJvcnMuT0s7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFNlcnZlckVycm9yKGVycm9yQ29kZSk7XG4gICAgICAgIHRoaXMub25TZXJ2ZXJFbmQoZXJyb3JDb2RlKTtcbiAgICAgICAgdGhpcy5fZm9ybS5vbklucHV0Q2hhbmdlKHRoaXMsIGZhbHNlKTsgLy8gdHJpZ2dlcnMgcmV2YWxpZGF0aW9uXG4gICAgICAgIGNhbGxiYWNrKHtcbiAgICAgICAgICAgIGVycm9yQ29kZTogZXJyb3JDb2RlLFxuICAgICAgICAgICAgZmllbGQ6IHRoaXMsXG4gICAgICAgICAgICBlcnJvclR5cGU6IEVycm9yVHlwZS5zZXJ2ZXJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHZhbGlkYXRlVmFsdWUoZm9ybURhdGE6IGFueSwgZmllbGRWYWx1ZTogYW55LCBjYWxsYmFjazogSVZhbGlkYXRpb25DYWxsYmFjayk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc1NlcnZlclZhbGlkYXRpb25FbmFibGVkICYmXG4gICAgICAgICAgICBmaWVsZFZhbHVlICE9PSB0aGlzLmxhc3RDaGVjaykge1xuICAgICAgICAgICAgdGhpcy5jbGVhclNlcnZlckVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMubG9naW5JZE11c3RCZUVtYWlsICYmXG4gICAgICAgICAgICAgICAgKCF0aGlzLnNjaGVtYUZvcm1hdCkgJiYgLy8gY29udGludWUgdG8gaGFyZCBjb2RlZCBlbWFpbCB2YWxpZGF0aW9uIG9ubHkgaWYgc2NoZW1hIGxhY2tzIGZvcm1hdFxuICAgICAgICAgICAgICAgICFnaWd5YS5wbHVnaW5VdGlscy52YWxpZGF0aW9uLmlzVmFsaWRFbWFpbExvZ2luSUQoZmllbGRWYWx1ZSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogNDAwMDA2IC8qIElOVkFMSURfUEFSQU1FVEVSX1ZBTFVFICovLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZDogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JUeXBlOiBFcnJvclR5cGUuY2xpZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLnZhbGlkYXRlVmFsdWUoZm9ybURhdGEsIGZpZWxkVmFsdWUsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEVtYWlsRnJvbVF1ZXJ5UGFyYW1zKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMuVVJMLmdldFBhcmFtVmFsdWVGcm9tVVJMKCdnaWdfZW1haWwnLCB3aW5kb3cubG9jYXRpb24uc2VhcmNoLCB1bmRlZmluZWQpO1xuICAgIH1cbn1cbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShMb2dpbklkSW5wdXQsIEZvcm1JbnB1dFByaW9yaXRpZXMuSW1wb3J0YW50KTtcbiIsImltcG9ydCB7IERlZXBGcmVlemUsIEZvckVhY2ggfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7XG4gICAgRm9ybUlucHV0LFxuICAgIElGb3JtSW5wdXRDb250ZXh0LFxuICAgIElWYWxpZGF0aW9uQ2FsbGJhY2tcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7XG4gICAgQnViYmxlT3JpZW50YXRpb25zLFxuICAgIFBhc3N3b3JkU3RyZW5ndGhXaWRnZXQsXG4gICAgZ2V0UGFzc3dvcmRTdHJlbmd0aERhdGEsXG4gICAgaXNQYXNzd29yZFN0cmVuZ3RoVmFsaWQsXG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QYXNzd29yZFN0cmVuZ3RoV2lkZ2V0JztcbmltcG9ydCB7IElDb25kaXRpb25hbEF0dHJpYnV0ZSwgVGVtcGxhdGVFbGVtZW50IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xuaW1wb3J0IHsgU2NyZWVuX0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuQ29uc3RzJztcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHtJbnB1dFZhbHVlVHlwZX0gZnJvbSAnLi4vU2NoZW1hVHlwZUNvbnZlcnRlcic7XG5cbmV4cG9ydCB2YXIgQmFzZVBhc3N3b3JkSW5wdXRfQ09OU1RTID0ge1xuICAgIHNob3dQYXNzd29yZFN0cmVuZ3RoOiAnc2hvdy1wYXNzd29yZC1zdHJlbmd0aCcsXG59O1xuRGVlcEZyZWV6ZShCYXNlUGFzc3dvcmRJbnB1dF9DT05TVFMpO1xuZXhwb3J0IGNsYXNzIEJhc2VQYXNzd29yZElucHV0IGV4dGVuZHMgRm9ybUlucHV0IHtcbiAgICBwcml2YXRlIHNob3dQYXNzd29yZFN0cmVuZ3RoOiBib29sZWFuO1xuICAgIHByaXZhdGUgcGFzc3dvcmRTdHJlbmd0aE9yaWVudGF0aW9uOiBCdWJibGVPcmllbnRhdGlvbnM7XG4gICAgcHJpdmF0ZSBwYXNzd29yZFN0cmVuZ3RoV2lkZ2V0OiBQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0O1xuICAgIHByaXZhdGUgc2hvd1Bhc3N3b3JkU3RyZW5ndGhDb25kaXRpb25hbEV4aXN0cyA9IGZhbHNlO1xuICAgIHByaXZhdGUgc2hvd1Bhc3N3b3JkU3RyZW5ndGhDb25kaXRpb25hbDogSUNvbmRpdGlvbmFsQXR0cmlidXRlO1xuICAgIHByaXZhdGUgc2hvd1Bhc3N3b3JkU3RyZW5ndGhBdHRyaWJ1dGU6IHN0cmluZyA9ICcnO1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKGNvbnRleHQpO1xuXG4gICAgICAgIEZvckVhY2godGhpcy5jb25kaXRpb25hbEV4cHJlc3Npb25zLCAoZWw6IElDb25kaXRpb25hbEF0dHJpYnV0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVsLmF0dHJpYnV0ZU5hbWUgPT0gQmFzZVBhc3N3b3JkSW5wdXRfQ09OU1RTLnNob3dQYXNzd29yZFN0cmVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aENvbmRpdGlvbmFsRXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoQ29uZGl0aW9uYWwgPSBlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aEF0dHJpYnV0ZSA9IGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uZ2V0QXR0cmlidXRlKHRoaXMudGVtcGxhdGVFbGVtZW50LCBCYXNlUGFzc3dvcmRJbnB1dF9DT05TVFMuc2hvd1Bhc3N3b3JkU3RyZW5ndGgpO1xuICAgICAgICBpZiAodGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aEF0dHJpYnV0ZSAhPSBudWxsICYmIHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhBdHRyaWJ1dGUubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhPcmllbnRhdGlvbiA9IEJ1YmJsZU9yaWVudGF0aW9uc1t0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoQXR0cmlidXRlXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXNzd29yZFN0cmVuZ3RoT3JpZW50YXRpb24gPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmRTdHJlbmd0aE9yaWVudGF0aW9uID0gdGhpcy5fc2NyZWVuU2V0LmlzTW9kYWwgPyBCdWJibGVPcmllbnRhdGlvbnMubGVmdCA6IEJ1YmJsZU9yaWVudGF0aW9ucy51cDtcblxuICAgICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aCA9XG4gICAgICAgICAgICAgICAgKHR5cGVvZiB0aGlzLnBhc3N3b3JkU3RyZW5ndGhPcmllbnRhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5wYXNzd29yZFN0cmVuZ3RoT3JpZW50YXRpb24gIT0gQnViYmxlT3JpZW50YXRpb25zLm5vbmUpIHx8XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aENvbmRpdGlvbmFsRXhpc3RzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRm9ybUVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgYnViYmxlSHRtbCA9ICcnO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhBdHRyaWJ1dGUgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgdGhpcy5wYXNzd29yZFN0cmVuZ3RoT3JpZW50YXRpb24gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZFN0cmVuZ3RoT3JpZW50YXRpb24gIT09IEJ1YmJsZU9yaWVudGF0aW9ucy5ub25lXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBidWJibGVIdG1sID0gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGhpcy5fc2NyZWVuU2V0LmdldFRlbXBsYXRlcygpLmlubGluZWRQYXNzd29yZFN0cmVuZ3RoLCB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBCdWJibGVPcmllbnRhdGlvbnNbdGhpcy5wYXNzd29yZFN0cmVuZ3RoT3JpZW50YXRpb25dLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidWJibGVIdG1sID0gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGhpcy5fc2NyZWVuU2V0LmdldFRlbXBsYXRlcygpLmlubGluZWRQYXNzd29yZFN0cmVuZ3RoLCB7XG4gICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBCdWJibGVPcmllbnRhdGlvbnNbQnViYmxlT3JpZW50YXRpb25zLm5vbmVdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgYnViYmxlSHRtbCk7XG4gICAgICAgICAgICB2YXIgYnViYmxlRWxlbWVudCA9ICh0aGlzLmluc3RhbmNlRWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmdcbiAgICAgICAgICAgICAgICA/IHRoaXMuaW5zdGFuY2VFbGVtZW50Lm5leHRFbGVtZW50U2libGluZ1xuICAgICAgICAgICAgICAgIDogdGhpcy5pbnN0YW5jZUVsZW1lbnQubmV4dFNpYmxpbmcpIGFzIEhUTUxEaXZFbGVtZW50OyAvLyBJRTggY29tcGF0YWJpbGl0eVxuXG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQgPSBuZXcgUGFzc3dvcmRTdHJlbmd0aFdpZGdldCh0aGlzLl9mb3JtLCBidWJibGVFbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoQ29uZGl0aW9uYWxFeGlzdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQudGVtcGxhdGVFbGVtZW50LnNldEF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAgICAgU2NyZWVuX0NPTlNUUy5jb25kaXRpb25hbEF0dHJpYnV0ZVByZWZpeCArICdkYXRhLWJ1YmJsZS1vcmllbnRhdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhDb25kaXRpb25hbC5jb25kaXRpb24sXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uYWw6IElDb25kaXRpb25hbEF0dHJpYnV0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogJ2RhdGEtYnViYmxlLW9yaWVudGF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uOiB0aGlzLnNob3dQYXNzd29yZFN0cmVuZ3RoQ29uZGl0aW9uYWwuY29uZGl0aW9uLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGhDb25kaXRpb25hbC5kZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RBdHRyaWJ1dGVWYWx1ZTogdGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aENvbmRpdGlvbmFsLmRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNXaWRnZXRQYXJhbVRhZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQuY29uZGl0aW9uYWxFeHByZXNzaW9ucy5wdXNoKGNvbmRpdGlvbmFsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXNzd29yZFN0cmVuZ3RoV2lkZ2V0Ll9wYXNzd29yZEZpZWxkID0gdGhpczsgLy8gYmluZCB0byB0aGlzIHBhc3N3b3JkIGZpZWxkXG4gICAgICAgICAgICBUZW1wbGF0ZUVsZW1lbnQucHJlcGFyZVRlbXBsYXRlSW5zdGFuY2VFbGVtZW50KGJ1YmJsZUVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMucGFzc3dvcmRTdHJlbmd0aFdpZGdldC5saW5rSW5zdGFuY2VFbGVtZW50KGJ1YmJsZUVsZW1lbnQucGFyZW50RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5zaG93UGFzc3dvcmRTdHJlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZFN0cmVuZ3RoV2lkZ2V0LnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgICAgICAgICAgdGhpcy5wYXNzd29yZFN0cmVuZ3RoV2lkZ2V0LnVubGlua1RlbXBsYXRlKCk7XG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldFRydW5jYXRlZFZhbHVlKHZhbCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdmFsaWRhdGVWYWx1ZShmb3JtRGF0YTogYW55LCBmaWVsZFZhbHVlOiBhbnksIGNhbGxiYWNrOiBJVmFsaWRhdGlvbkNhbGxiYWNrKSB7XG4gICAgICAgIHN1cGVyLnZhbGlkYXRlVmFsdWUoZm9ybURhdGEsIGZpZWxkVmFsdWUsIHZhbGlkYXRpb25JbmZvID0+IHtcbiAgICAgICAgICAgIGlmICh2YWxpZGF0aW9uSW5mby5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LKSByZXR1cm4gY2FsbGJhY2sodmFsaWRhdGlvbkluZm8pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Bhc3N3b3JkU2NoZW1hVmFsaWRhdGVkKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXBpRGF0YS5nZXRQb2xpY2llcyAmJiBhcGlEYXRhLmdldFBvbGljaWVzLnBhc3N3b3JkQ29tcGxleGl0eSAmJiB0aGlzLnNob3VsZFZhbGlkYXRlUGFzc3dvcmRDb21wbGV4aXR5KGZpZWxkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvQ29tcGxleGl0eSA9IGFwaURhdGEuZ2V0UG9saWNpZXMucGFzc3dvcmRDb21wbGV4aXR5IHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICB2YXIgb1Bhc3NTdHJlbmd0aCA9IGdldFBhc3N3b3JkU3RyZW5ndGhEYXRhKGZpZWxkVmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQYXNzd29yZFN0cmVuZ3RoVmFsaWQoZmllbGRWYWx1ZSwgb1Bhc3NTdHJlbmd0aCwgb0NvbXBsZXhpdHkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlZBTElEQVRJT05fRVJST1IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHRoaXMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKHZhbGlkYXRpb25JbmZvKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFZhbHVlKGVsOiBIVE1MSW5wdXRFbGVtZW50ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQgYXMgSFRNTElucHV0RWxlbWVudCwgY3VycmVudFZhbHVlPzogYW55KTogSW5wdXRWYWx1ZVR5cGUge1xuICAgICAgICByZXR1cm4gZWwudmFsdWUgPT09IHVuZGVmaW5lZCA/ICcnIDogZWwudmFsdWU7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm0uaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICBpZiAodGhpcy5wYXNzd29yZFN0cmVuZ3RoV2lkZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLnBhc3N3b3JkU3RyZW5ndGhXaWRnZXQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpc1Bhc3N3b3JkU3RyZW5ndGhXaWRnZXRCb3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd1Bhc3N3b3JkU3RyZW5ndGg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG91bGRWYWxpZGF0ZVBhc3N3b3JkQ29tcGxleGl0eShmaWVsZFZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWlyZWQoKSB8fCAhdGhpcy5pc0VtcHR5KGZpZWxkVmFsdWUpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQYXNzd29yZElucHV0IGV4dGVuZHMgQmFzZVBhc3N3b3JkSW5wdXQge1xuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkTmFtZSA9PT0gJ3Bhc3N3b3JkJztcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgICAgICBzdXBlcihjb250ZXh0KTtcblxuICAgICAgICB0aGlzLl9mb3JtLl9wYXNzd29yZElucHV0cy5wdXNoKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc1Bhc3N3b3JkU2NoZW1hVmFsaWRhdGVkKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuaXNQYXNzd29yZFNjaGVtYVZhbGlkYXRlZCgpO1xuICAgIH1cbn1cbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShQYXNzd29yZElucHV0KTtcbmV4cG9ydCBjbGFzcyBOZXdQYXNzd29yZElucHV0IGV4dGVuZHMgQmFzZVBhc3N3b3JkSW5wdXQge1xuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkTmFtZSA9PT0gJ25ld1Bhc3N3b3JkJztcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgICAgICBzdXBlcihjb250ZXh0KTtcblxuICAgICAgICB0aGlzLl9mb3JtLl9wYXNzd29yZElucHV0cy51bnNoaWZ0KHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc1Bhc3N3b3JkU2NoZW1hVmFsaWRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5Gb3JtSW5wdXQuYWRkSW5wdXRUb0xpYnJhcnkoTmV3UGFzc3dvcmRJbnB1dCk7XG4iLCJpbXBvcnQge0Zvcm1JbnB1dCwgSUZvcm1JbnB1dENvbnRleHQsIElWYWxpZGF0aW9uQ2FsbGJhY2ssIElWYWxpZGF0aW9uSW5mbywgVmFsaWRpdHlTdGF0ZXN9IGZyb20gJy4vRm9ybUlucHV0JztcbmltcG9ydCB7R1NFcnJvcnN9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7Z2V0Q29uZGl0aW9uYWxBdHRyaWJ1dGVFeHByZXNzaW9uc30gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1NlcnZpY2VzL0ZsYWdTZXJ2aWNlJztcblxuY29uc3QgZXh0ZW5kZWRSZWdleCA9IC9eXFwrP1sxLTldezEsNH0/KFxcKFxcZHsxLDN9P1xcKSk/Wy0gXT9cXGR7MSw0fShbLSBdP1xcZHsxLDR9Wy0gXT9cXGR7MSw5fSk/JC87XG5jb25zdCBub1NwZWNpYWxTeW1ib2xzUmVnZXggPSAvXlxcKz9bMS05XVxcZHsxLDE0fSQvO1xuXG5leHBvcnQgY29uc3QgZ2lneWFQaG9uZU51bWJlcklucHV0ID0gJ2dpZ3lhLXBob25lLW51bWJlci1pbnB1dCc7XG5cbmV4cG9ydCBjb25zdCBQaG9uZUlucHV0X0F0dHJpYnV0ZXMgPSB7XG4gICAgY291bnRyeUNvZGVzU2VsZWN0aW9uOiAnZGF0YS1jb3VudHJ5LWNvZGVzLXNlbGVjdGlvbicsXG4gICAgY291bnRyeUNvZGVzOiAnZGF0YS1jb3VudHJ5LWNvZGVzJ1xufVxuZXhwb3J0IGNvbnN0IGVudW0gQ291bnRyeUNvZGVTZWxlY3Rpb24ge1xuICAgIEFsbCA9ICdhbGwnLFxuICAgIFNwZWNpZmljID0gJ3NwZWNpZmljJyxcbn1cblxuZXhwb3J0IGNsYXNzIFBob25lTnVtYmVySW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xuICAgIHByaXZhdGUgY291bnRyeUNvZGVTZWxlY3RIYWRDaGFuZ2VkOiBib29sZWFuO1xuICAgIHByaXZhdGUgc3Vic2NyaWJlck51bWJlckhhZENoYW5nZWQ6IGJvb2xlYW47XG5cbiAgICBwcml2YXRlIGNvdW50cnlDb2RlU2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudDtcbiAgICBwcml2YXRlIHN1YnNjcmliZXJOdW1iZXI6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjb3VudHJ5Q29kZXNEYXRhU3RydWN0dXJlID0ge307XG4gICAgcHJpdmF0ZSBjb3VudHJ5Q29kZXNMaXN0ID0gW107XG4gICAgcHJpdmF0ZSBjb3VudHJ5Q29kZVNlbGVjdFByZXZpb3VzVmFsdWU6IHN0cmluZztcbiAgICBwcml2YXRlIHN1YnNjcmliZXJOdW1iZXJQcmV2aW91c1ZhbHVlOiBzdHJpbmc7XG5cbiAgICBwdWJsaWMgaGFzQ291bnRyeUNvZGVTZWxlY3RDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3VudHJ5Q29kZVNlbGVjdEhhZENoYW5nZWQ7XG4gICAgfVxuXG4gICAgcHVibGljIGhhc1N1YnNjcmliZXJOdW1iZXJDaGFuZ2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmVyTnVtYmVySGFkQ2hhbmdlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIEZPUk1fVFlQRV9DUklURVJJQShjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29udGV4dC5lbGVtZW50IGluc3RhbmNlb2YgSFRNTEZpZWxkU2V0RWxlbWVudFxuICAgICAgICAgICAgJiYgY29udGV4dC50eXBlID09PSBnaWd5YVBob25lTnVtYmVySW5wdXQ7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFBsYWNlaG9sZGVyVmFsdWUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnNjcmliZXJOdW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlck51bWJlci5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgdGhpcy5wbGFjZWhvbGRlckF0dHJpYnV0ZVZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgaWYgKHRoaXMuaXNTcGVjaWZpY0NvdW50cnlDb2Rlcykge1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJDb3VudHJ5Q29kZXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlck51bWJlciA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgICAgIGlmKCF0aGlzLmNvdW50cnlDb2RlU2VsZWN0IHx8ICF0aGlzLnN1YnNjcmliZXJOdW1iZXIpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGBQaG9uZSBOdW1iZXIgSW5wdXQ6IG1pc3NpbmcgY291bnRyeSBzZWxlY3Qgb3IgbW9iaWxlIHBob25lIHRleHQgYm94YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldENvdW50cnlDb2RlU2VsZWN0QXJpYUxhYmVsKCk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVDb3VudHJ5Q29kZXNEYXRhU3RydWN0dXJlKCk7XG4gICAgICAgIHRoaXMuc2V0dXBDaGFuZ2VFdmVudEhhbmRsZXIoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgX3Nob3dWYWxpZGl0eU9uSW5wdXQoZWxlbWVudDogSFRNTEVsZW1lbnQgPSB0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkVmFsaWRhdGUoKSlcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBjb25zdCBjb3VudHJ5Q29kZVZhbGlkaXR5U3RhdGUgPSB0aGlzLmdldENvdW50cnlDb2RlVmFsaWRpdHlTdGF0ZSgpO1xuICAgICAgICBzdXBlci5fc2hvd1ZhbGlkaXR5T25JbnB1dCh0aGlzLmNvdW50cnlDb2RlU2VsZWN0LCBjb3VudHJ5Q29kZVZhbGlkaXR5U3RhdGUsIGZhbHNlKTtcbiAgICAgICAgaWYoY291bnRyeUNvZGVWYWxpZGl0eVN0YXRlID09PSBWYWxpZGl0eVN0YXRlcy5lcnJvcil7XG4gICAgICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0LmJsdXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJOdW1iZXJWYWxpZGl0eVN0YXRlID0gdGhpcy5nZXRTdWJzY3JpYmVyTnVtYmVyVmFsaWRpdHlTdGF0ZSgpO1xuICAgICAgICBjb25zdCBhbGxvd1ZhbGlkaXR5TWFya2VyID0gKGNvdW50cnlDb2RlVmFsaWRpdHlTdGF0ZSA9PT0gIFZhbGlkaXR5U3RhdGVzLnZhbGlkICYmIHN1YnNjcmliZXJOdW1iZXJWYWxpZGl0eVN0YXRlID09PSAgVmFsaWRpdHlTdGF0ZXMudmFsaWQpO1xuICAgICAgICBzdXBlci5fc2hvd1ZhbGlkaXR5T25JbnB1dCh0aGlzLnN1YnNjcmliZXJOdW1iZXIsIHN1YnNjcmliZXJOdW1iZXJWYWxpZGl0eVN0YXRlLCBhbGxvd1ZhbGlkaXR5TWFya2VyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVDaGFuZ2VFdmVudEhhbmRsZXIoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VmFsaWRpdHlTdGF0ZSh2YWxpZGl0eVN0YXRlOiBWYWxpZGl0eVN0YXRlcywgZnJvbVNlcnZlciA9IGZhbHNlKSB7XG5cbiAgICAgICAgaWYodGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZSAhPT0gdGhpcy5jb3VudHJ5Q29kZVNlbGVjdFByZXZpb3VzVmFsdWVcbiAgICAgICAgICAgIHx8IHRoaXMuc3Vic2NyaWJlck51bWJlci52YWx1ZSAhPT0gdGhpcy5zdWJzY3JpYmVyTnVtYmVyUHJldmlvdXNWYWx1ZSl7XG4gICAgICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0UHJldmlvdXNWYWx1ZSA9IHRoaXMuY291bnRyeUNvZGVTZWxlY3QudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZXJOdW1iZXJQcmV2aW91c1ZhbHVlID0gdGhpcy5zdWJzY3JpYmVyTnVtYmVyLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fdmFsaWRpdHlTdGF0ZSA9IFZhbGlkaXR5U3RhdGVzLl91bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci5zZXRWYWxpZGl0eVN0YXRlKHZhbGlkaXR5U3RhdGUsIGZyb21TZXJ2ZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2YWxpZGF0ZVZhbHVlKGZvcm1EYXRhOiBhbnksIGZpZWxkVmFsdWU6IHN0cmluZywgY2FsbGJhY2s6IElWYWxpZGF0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgaWYoIXRoaXMuc2hvdWxkVmFsaWRhdGUoKSlcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh7ZXJyb3JDb2RlOiBHU0Vycm9ycy5PSywgZmllbGQ6IHRoaXN9KTtcblxuICAgICAgICBpZighdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZSB8fCB0aGlzLmNvdW50cnlDb2RlU2VsZWN0LnZhbHVlID09PSAnMCcgfHwgIXRoaXMuc3Vic2NyaWJlck51bWJlci52YWx1ZSlcbiAgICAgICAgICAgIGZpZWxkVmFsdWUgPSAnJztcblxuICAgICAgICByZXR1cm4gc3VwZXIudmFsaWRhdGVWYWx1ZShmb3JtRGF0YSwgZmllbGRWYWx1ZSwgKHZhbGlkYXRpb25JbmZvOiBJVmFsaWRhdGlvbkluZm8pID0+IHtcblxuICAgICAgICAgICAgaWYgKHZhbGlkYXRpb25JbmZvLmVycm9yQ29kZSAhPT0gR1NFcnJvcnMuT0sgfHwgdGhpcy5zY2hlbWFGb3JtYXQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHZhbGlkYXRpb25JbmZvKTsgLy8gYmFzaWMgdmFsaWRhdGlvbiBmYWlsZWRcblxuICAgICAgICAgICAgY29uc3QgZXJyb3JDb2RlID0gdGhpcy5yZWdFeE1hdGNoaW5nRm9yRTE2NC50ZXN0KGZpZWxkVmFsdWUpID9cbiAgICAgICAgICAgICAgICBHU0Vycm9ycy5PSyA6IC8vIHZhbGlkIHBob25lIG51bWJlciBpbiBlLjE2NCBmb3JtYXRcbiAgICAgICAgICAgICAgICBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRTtcblxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICBlcnJvckNvZGUsIGZpZWxkOiB0aGlzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRWYWx1ZShlbDogSFRNTElucHV0RWxlbWVudCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQsIGN1cnJlbnRWYWx1ZT86IGFueSk6IHN0cmluZyB7XG5cbiAgICAgICAgaWYoIXRoaXMuY291bnRyeUNvZGVTZWxlY3QgfHwgIXRoaXMuc3Vic2NyaWJlck51bWJlcilcbiAgICAgICAgICAgIHJldHVybiAnJztcblxuICAgICAgICBjb25zdCBjb3VudHJ5Q29kZSA9IHRoaXMuY291bnRyeUNvZGVTZWxlY3QudmFsdWUgPT09ICcwJyA/IFwiXCIgOiB0aGlzLmNvdW50cnlDb2RlU2VsZWN0LnZhbHVlO1xuICAgICAgICBsZXQgc3Vic2NyaWJlck51bWJlciA9IHRoaXMuc3Vic2NyaWJlck51bWJlci52YWx1ZS5yZXBsYWNlKC9cXHMvZ20sJycpOyAvLyByZW1vdmVzIGFueSB3aGl0ZXNwYWNlIGNoYXJhY3RlclxuICAgICAgICBpZihjb3VudHJ5Q29kZSAhPT0gJyszOScpIHsgLy8gSXRhbHkgKHBob25lIG11c3Qgc3RhcnQgd2l0aCAwKVxuICAgICAgICAgICAgc3Vic2NyaWJlck51bWJlciA9IHN1YnNjcmliZXJOdW1iZXIucmVwbGFjZSgvXjArLywnJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYCR7Y291bnRyeUNvZGV9JHtzdWJzY3JpYmVyTnVtYmVyfWA7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFZhbHVlKHBob25lTnVtYmVyOiBzdHJpbmcsIHNldEJ5U2NyaXB0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuXG4gICAgICAgIGlmKCF0aGlzLmNvdW50cnlDb2RlU2VsZWN0IHx8ICF0aGlzLnN1YnNjcmliZXJOdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmdldFZhbHVlKCkgIT09IHBob25lTnVtYmVyKSB7XG4gICAgICAgICAgICBjb25zdCBjb3VudHJ5Q29kZSA9IHRoaXMuZ2V0Q291bnRyeUNvZGUocGhvbmVOdW1iZXIpO1xuICAgICAgICAgICAgY29uc3Qgc3Vic2NyaWJlck51bWJlciA9IHRoaXMuZ2V0U3Vic2NyaWJlck51bWJlcihwaG9uZU51bWJlciwgY291bnRyeUNvZGUpO1xuICAgICAgICAgICAgdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZSA9IGNvdW50cnlDb2RlO1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyTnVtYmVyLnZhbHVlID0gc3Vic2NyaWJlck51bWJlcjtcbiAgICAgICAgICAgIHRoaXMub25Db3VudHJ5Q29kZVNlbGVjdGVkKHNldEJ5U2NyaXB0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBtYXJrQXNEaXJ0eSgpIHtcbiAgICAgICAgdGhpcy5jb3VudHJ5Q29kZVNlbGVjdEhhZENoYW5nZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJOdW1iZXJIYWRDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbWFya0FzUHJpc3RpbmUoKSB7XG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3RIYWRDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlck51bWJlckhhZENoYW5nZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2hvdWxkVmFsaWRhdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLnNjaGVtYUZvcm1hdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5yZXF1aXJlZCgpICYmICh0aGlzLl9mb3JtLnN1Ym1pdEJ1dHRvbkNsaWNrZWQgfHwgdGhpcy5hcmVCb3RoSW5wdXRzRGlydHkoKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUHJldmlvdXNWYWx1ZSgpICYmIHRoaXMuX2Zvcm0uc3VibWl0QnV0dG9uQ2xpY2tlZCAmJiB0aGlzLmlzRGlydHkoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9jdXMoKSB7XG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3Q/LmZvY3VzKCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldENvbmRpdGlvbmFsRXhwcmVzc2lvbihlbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLnN1cGVyLmdldENvbmRpdGlvbmFsRXhwcmVzc2lvbihlbCksXG4gICAgICAgICAgICAuLi5nZXRDb25kaXRpb25hbEF0dHJpYnV0ZUV4cHJlc3Npb25zKHRoaXMuc3Vic2NyaWJlck51bWJlciksXG4gICAgICAgICAgICAuLi5nZXRDb25kaXRpb25hbEF0dHJpYnV0ZUV4cHJlc3Npb25zKHRoaXMuY291bnRyeUNvZGVTZWxlY3QpXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUNvdW50cnlDb2Rlc0RhdGFTdHJ1Y3R1cmUoKSB7XG4gICAgICAgIC8vIGdldCBhbGwgb3B0aW9uIHdpdGggdmFsdWUgYXR0ciBleGNlcHQgdGhlIG9uZSB3aXRoIHZhbHVlIFwiMFwiXG4gICAgICAgIGNvbnN0IGNvdW50cnlDb2RlT3B0aW9ucyA9IHRoaXMuY291bnRyeUNvZGVTZWxlY3Q/LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTE9wdGlvbkVsZW1lbnQ+KCdvcHRpb25bdmFsdWVdOm5vdChbdmFsdWU9XCIwXCJdKScpO1xuICAgICAgICBjb3VudHJ5Q29kZU9wdGlvbnM/LmZvckVhY2goY291bnRyeUNvZGVPcHRpb24gID0+IHtcbiAgICAgICAgICAgIGxldCBkcyA9IHRoaXMuY291bnRyeUNvZGVzRGF0YVN0cnVjdHVyZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGlnaXQgb2YgY291bnRyeUNvZGVPcHRpb24udmFsdWUpe1xuICAgICAgICAgICAgICAgIGlmKCFkc1tkaWdpdF0pe1xuICAgICAgICAgICAgICAgICAgICBkc1tkaWdpdF0gPSB7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkcyA9IGRzW2RpZ2l0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVzTGlzdCA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvdW50cnlDb2RlT3B0aW9ucylcbiAgICAgICAgICAgIC5tYXAob3B0aW9uID0+IG9wdGlvbi52YWx1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaWx0ZXJDb3VudHJ5Q29kZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zcGVjaWZpY0NvdW50cnlDb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNwZWNpZmljQ291bnRyeUNvZGVzID0gWycwJ10uY29uY2F0KHRoaXMuc3BlY2lmaWNDb3VudHJ5Q29kZXMpOyAvLyAgYWRkIGRlZmF1bHQgdmFsdWUgYW5kIHNwbGl0IHRoZSBzcGVjaWZpYyBjb3VudHJ5IGNvZGVzXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ29wdGdyb3VwJykucmVtb3ZlKCk7IC8vIFJlbW92ZSB0aGUgZmlyc3Qgb3B0aW9ucyBncm91cFxuXG4gICAgICAgIGZvciAoY29uc3QgY291bnRyeUNvZGVzT3B0aW9uIG9mIHRoaXMuY291bnRyeUNvZGVzT3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKGNvdW50cnlDb2Rlc09wdGlvbi52YWx1ZSAmJiBzcGVjaWZpY0NvdW50cnlDb2Rlcy5pbmRleE9mKGNvdW50cnlDb2Rlc09wdGlvbi52YWx1ZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGVzT3B0aW9uLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgaXNTcGVjaWZpY0NvdW50cnlDb2RlcygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50XG4gICAgICAgICAgICA/LmdldEF0dHJpYnV0ZShQaG9uZUlucHV0X0F0dHJpYnV0ZXMuY291bnRyeUNvZGVzU2VsZWN0aW9uKSA9PT0gQ291bnRyeUNvZGVTZWxlY3Rpb24uU3BlY2lmaWM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgc3BlY2lmaWNDb3VudHJ5Q29kZXMoKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCBzcGVjaWZpY0NvdW50cnlDb2RlcyA9IHRoaXMuaW5zdGFuY2VFbGVtZW50Py5nZXRBdHRyaWJ1dGUoUGhvbmVJbnB1dF9BdHRyaWJ1dGVzLmNvdW50cnlDb2Rlcyk7XG4gICAgICAgIHJldHVybiBzcGVjaWZpY0NvdW50cnlDb2Rlcy5sZW5ndGggPyBzcGVjaWZpY0NvdW50cnlDb2Rlcz8uc3BsaXQoJywnKSA6IFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGNvdW50cnlDb2Rlc09wdGlvbnMoKTogSFRNTE9wdGlvbkVsZW1lbnRbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VFbGVtZW50Py5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKT8ub3B0aW9ucyB8fCBbXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDb3VudHJ5Q29kZShwaG9uZU51bWJlcjogc3RyaW5nKSB7XG4gICAgICAgIGxldCByZXMgPSBcIlwiO1xuICAgICAgICBsZXQgdGVtcCA9IFwiXCI7XG4gICAgICAgIGxldCBkcyA9IHRoaXMuY291bnRyeUNvZGVzRGF0YVN0cnVjdHVyZTtcbiAgICAgICAgZm9yIChjb25zdCBkaWdpdCBvZiBwaG9uZU51bWJlcikge1xuICAgICAgICAgICAgaWYoIWRzW2RpZ2l0XSl7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZW1wID0gYCR7dGVtcH0ke2RpZ2l0fWA7XG4gICAgICAgICAgICBpZih0aGlzLmNvdW50cnlDb2Rlc0xpc3QuaW5jbHVkZXModGVtcCkpe1xuICAgICAgICAgICAgICAgIHJlcyA9IHRlbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcyA9IGRzW2RpZ2l0XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0U3Vic2NyaWJlck51bWJlcihwaG9uZU51bWJlcjogc3RyaW5nLCBjb3VudHJ5Q29kZTogc3RyaW5nKSB7XG4gICAgICAgIGNvdW50cnlDb2RlID0gY291bnRyeUNvZGUucmVwbGFjZSgnXFwrJywgJ1xcXFwrJyk7XG4gICAgICAgIGNvbnN0IHJlZ0V4cCA9IG5ldyBSZWdFeHAoYF4ke2NvdW50cnlDb2RlfWApO1xuICAgICAgICByZXR1cm4gcGhvbmVOdW1iZXIucmVwbGFjZShyZWdFeHAsJycpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Db3VudHJ5Q29kZVNlbGVjdGVkID0gKHNldEJ5U2NyaXB0KSA9PiB7XG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3RIYWRDaGFuZ2VkID0gdHJ1ZTtcblxuICAgICAgICBjb25zdCBzZWxlY3RlZFZhbHVlID0gdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZTtcbiAgICAgICAgaWYoc2VsZWN0ZWRWYWx1ZSA9PT0gJzAnKSAvLyB0aGUgZGVmYXVsdCB2YWx1ZSAtIGl0IHJlcHJlc2VudHMgbm8gdmFsdWVcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0Lm9wdGlvbnNbMF0udmFsdWUgPSBzZWxlY3RlZFZhbHVlO1xuICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0Lm9wdGlvbnNbMF0udGV4dCA9IHNlbGVjdGVkVmFsdWU7XG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3Quc2VsZWN0ZWRJbmRleCA9IDA7XG5cbiAgICAgICAgLy8gVHJpZ2dlciBjaGFuZ2UuXG4gICAgICAgIHRoaXMub25GaWVsZENoYW5nZShzZXRCeVNjcmlwdCk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25TdWJzY3JpYmVyTnVtYmVyQ2hhbmdlZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyTnVtYmVySGFkQ2hhbmdlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIHByaXZhdGUgc2V0dXBDaGFuZ2VFdmVudEhhbmRsZXIoKSB7XG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vbkNvdW50cnlDb2RlU2VsZWN0ZWQpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJOdW1iZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLm9uU3Vic2NyaWJlck51bWJlckNoYW5nZWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlQ2hhbmdlRXZlbnRIYW5kbGVyKCkge1xuICAgICAgICB0aGlzLmNvdW50cnlDb2RlU2VsZWN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25Db3VudHJ5Q29kZVNlbGVjdGVkKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyTnVtYmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5vblN1YnNjcmliZXJOdW1iZXJDaGFuZ2VkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENvdW50cnlDb2RlVmFsaWRpdHlTdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ZhbGlkaXR5U3RhdGUgPT09IFZhbGlkaXR5U3RhdGVzLl91bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBWYWxpZGl0eVN0YXRlcy5fdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoIXRoaXMuY291bnRyeUNvZGVTZWxlY3QudmFsdWUgfHwgdGhpcy5jb3VudHJ5Q29kZVNlbGVjdC52YWx1ZSA9PT0gJzAnKVxuICAgICAgICAgICAgPyBWYWxpZGl0eVN0YXRlcy5lcnJvclxuICAgICAgICAgICAgOiBWYWxpZGl0eVN0YXRlcy52YWxpZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFN1YnNjcmliZXJOdW1iZXJWYWxpZGl0eVN0YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5fdmFsaWRpdHlTdGF0ZSA9PT0gVmFsaWRpdHlTdGF0ZXMuX3VuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIFZhbGlkaXR5U3RhdGVzLl91bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmliZXJOdW1iZXIudmFsdWUgfHwgdGhpcy5nZXRDb3VudHJ5Q29kZVZhbGlkaXR5U3RhdGUoKSAhPT0gVmFsaWRpdHlTdGF0ZXMudmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBWYWxpZGl0eVN0YXRlcy5lcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zY2hlbWFGb3JtYXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzU2NoZW1hVmFsaWQgP1xuICAgICAgICAgICAgICAgIFZhbGlkaXR5U3RhdGVzLnZhbGlkOlxuICAgICAgICAgICAgICAgIFZhbGlkaXR5U3RhdGVzLmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ0V4TWF0Y2hpbmdGb3JFMTY0LnRlc3QodGhpcy5nZXRWYWx1ZSgpKSA/XG4gICAgICAgICAgICBWYWxpZGl0eVN0YXRlcy52YWxpZDpcbiAgICAgICAgICAgIFZhbGlkaXR5U3RhdGVzLmVycm9yO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXJlQm90aElucHV0c0RpcnR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNDb3VudHJ5Q29kZVNlbGVjdENoYW5nZWQoKSAmJiB0aGlzLmhhc1N1YnNjcmliZXJOdW1iZXJDaGFuZ2VkKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0RpcnR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNDb3VudHJ5Q29kZVNlbGVjdENoYW5nZWQoKSB8fCB0aGlzLmhhc1N1YnNjcmliZXJOdW1iZXJDaGFuZ2VkKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRDb3VudHJ5Q29kZVNlbGVjdEFyaWFMYWJlbCgpIHtcbiAgICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLmNvdW50cnlDb2RlU2VsZWN0Py5xdWVyeVNlbGVjdG9yKCdbdmFsdWU9XCIwXCJdJykgYXMgSFRNTE9wdGlvbkVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY291bnRyeUNvZGVTZWxlY3Q/LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGxhYmVsPy5pbm5lclRleHQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHJlZ0V4TWF0Y2hpbmdGb3JFMTY0KCkge1xuICAgICAgICByZXR1cm4gRmxhZ1NlcnZpY2UudXNlRXh0ZW5kZWRQaG9uZU51bWJlclJlZ2V4ID8gZXh0ZW5kZWRSZWdleCA6IG5vU3BlY2lhbFN5bWJvbHNSZWdleDtcbiAgICB9XG59XG5cbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShQaG9uZU51bWJlcklucHV0KTtcbiIsImltcG9ydCB7XG4gICAgRm9ybUlucHV0LFxuICAgIEZvcm1JbnB1dF9DT05TVFMsXG4gICAgSUZvcm1JbnB1dENvbnRleHRcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7Z2V0Q2xvc2VzdEVsZW1lbnR9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL0RPTSc7XG5pbXBvcnQge1NjcmVlbl9DT05TVFN9IGZyb20gJy4uL1NjcmVlbkNvbnN0cyc7XG5cbmV4cG9ydCB2YXIgUmFkaW9JbnB1dF9DT05TVFMgPSB7XG4gICAgd3JhcHBlclNlbGVjdG9yOiAnLmdpZ3lhLWNvbXBvc2l0ZS1jb250cm9sLW11bHRpLWNob2ljZScsXG4gICAgZGlzcGxheU5hbWVFeHByZXNzaW9uQXR0cjogYCR7U2NyZWVuX0NPTlNUUy5leHByZXNzaW9uQXR0cmlidXRlUHJlZml4fToke0Zvcm1JbnB1dF9DT05TVFMuZGlzcGxheU5hbWV9YFxufTtcblxuZXhwb3J0IGNsYXNzIFJhZGlvSW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LnR5cGUgPT09ICdyYWRpbyc7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcbiAgICAgICAgc3VwZXIoY29udGV4dCk7XG4gICAgfVxuXG4gICAgLy8gZ2V0VmFsdWUgb25seSByZXR1cm5zIHZhbHVlIG9mIGN1cnJlbnQgc2luZ2xlIHJhZGlvIGJ1dHRvbi5cbiAgICAvLyBUbyB2YWxpZGF0ZSByYWRpbyBncm91cCwgd2UgbmVlZCB0byBnZXQgdmFsdWUgb2YgdGhlIHNlbGVjdGVkIGJ1dHRvbiAtIHZhbHVlIHRoZSBmaWVsZCBtYXBwZWQgdG8gcmFkaW8gZ3JvdXAgY3VycmVudGx5IGhhc1xuICAgIHB1YmxpYyBnZXRWYWxpZGF0ZVZhbHVlKGZvcm1EYXRhOiBhbnkpIHtcbiAgICAgICAgY29uc3QgYXJyYXlLZXlWYWx1ZSA9IHRoaXMuZ2V0QXJyYXlLZXlWYWx1ZSgpO1xuICAgICAgICBjb25zdCBhcnJheUtleUZpZWxkID0gdGhpcy5nZXRBcnJheUtleUZpZWxkKCk7XG5cbiAgICAgICAgaWYgKGFycmF5S2V5VmFsdWUgJiYgYXJyYXlLZXlGaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RvcmVkSW5BcnJheVZhbHVlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZm9ybURhdGFbdGhpcy5nZXROYW1lKGZhbHNlLCB0cnVlKV07XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRm9ybUVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIHRoaXMuX3NjaGVtYSA9IHVuZGVmaW5lZDsgLy8gZGlzYWJsZSBzY2hlbWEgY2hlY2tzIGZvciByYWRpbyBidXR0b25zXG4gICAgICAgIHRoaXMuZ3JvdXBSYWRpb0J1dHRvbkFycmF5RmllbGRzKCk7XG4gICAgICAgIHRoaXMuYWRkRGlzcGxheU5hbWUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VmFsdWUoZGF0YVZhbHVlOiBzdHJpbmcgfCBib29sZWFuLCBzZXRCeVNjcmlwdDogYm9vbGVhbiA9IHRydWUpOiB2b2lkIHtcbiAgICAgICAgLy8gU2V0IG5ldyB2YWx1ZSBkaXJlY3RseSBvbiB0aGUgRE9NLlxuICAgICAgICBjb25zdCBlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBkYXRhVmFsdWUudG9TdHJpbmcoKSA9PT0gZWwudmFsdWU7XG4gICAgICAgIC8vIFRyaWdnZXIgY2hhbmdlLlxuICAgICAgICB0aGlzLm9uRmllbGRDaGFuZ2Uoc2V0QnlTY3JpcHQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRWYWx1ZShlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50IGFzIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBzdXBlci5nZXRWYWx1ZShlbCk7XG4gICAgICAgIHJldHVybiBlbC5jaGVja2VkID8gdmFsdWUgOiBudWxsO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBncm91cFJhZGlvQnV0dG9uQXJyYXlGaWVsZHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgLy8gIzQ0MzY2IC0gR3JvdXAgcmFkaW8gYnV0dG9ucyBieSBzY2hlbWEgZmllbGQgbmFtZSBhbmQgYXJyYXkga2V5IGZpZWxkLlxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICAgICAgY29uc3QgYXJyYXlLZXlWYWx1ZSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5S2V5VmFsdWVBdHRyaWJ1dGUpO1xuICAgICAgICAgICAgaWYgKG5hbWUgJiYgYXJyYXlLZXlWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnNldEF0dHJpYnV0ZSgnbmFtZScsIGAke25hbWV9WyR7YXJyYXlLZXlWYWx1ZX1dYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYWRkRGlzcGxheU5hbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgcmFkaW9XcmFwcGVyID0gZ2V0Q2xvc2VzdEVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIFJhZGlvSW5wdXRfQ09OU1RTLndyYXBwZXJTZWxlY3Rvcik7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFJhZGlvSW5wdXQgPSByYWRpb1dyYXBwZXI/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGZpcnN0UmFkaW9JbnB1dD8uZ2V0QXR0cmlidXRlKFJhZGlvSW5wdXRfQ09OU1RTLmRpc3BsYXlOYW1lRXhwcmVzc2lvbkF0dHIpO1xuXG4gICAgICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoUmFkaW9JbnB1dF9DT05TVFMuZGlzcGxheU5hbWVFeHByZXNzaW9uQXR0ciwgZGlzcGxheU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5Gb3JtSW5wdXQuYWRkSW5wdXRUb0xpYnJhcnkoUmFkaW9JbnB1dCk7XG4iLCJpbXBvcnQgeyBDaGVja2JveElucHV0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvQ2hlY2tib3hJbnB1dCc7XG5pbXBvcnQgeyBJRm9ybUlucHV0Q29udGV4dCwgRm9ybUlucHV0LCBGb3JtSW5wdXRQcmlvcml0aWVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcblxuZXhwb3J0IGNsYXNzIFJlbWVtZWJlcklucHV0IGV4dGVuZHMgQ2hlY2tib3hJbnB1dCB7XG4gICAgcHVibGljIHN0YXRpYyBGT1JNX1RZUEVfQ1JJVEVSSUEoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZmllbGROYW1lID09PSAncmVtZW1iZXInO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKGNvbnRleHQpO1xuXG4gICAgICAgIHRoaXMuX2Zvcm0uX3JlbWVtYmVyTWUgPSB0aGlzO1xuICAgIH1cbn1cbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShSZW1lbWViZXJJbnB1dCwgRm9ybUlucHV0UHJpb3JpdGllcy5JbXBvcnRhbnQpO1xuIiwiaW1wb3J0IHsgRm9ybUlucHV0LCBJRm9ybUlucHV0Q29udGV4dCwgSVZhbGlkYXRpb25DYWxsYmFjayB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcblxuZXhwb3J0IGNsYXNzIFJldHlwZVBhc3N3b3JkSW5wdXQgZXh0ZW5kcyBGb3JtSW5wdXQge1xuICAgIHB1YmxpYyBzdGF0aWMgRk9STV9UWVBFX0NSSVRFUklBKGNvbnRleHQ6IElGb3JtSW5wdXRDb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0LmZpZWxkTmFtZSA9PT0gJ3Bhc3N3b3JkUmV0eXBlJztcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgICAgICBzdXBlcihjb250ZXh0KTtcblxuICAgICAgICB0aGlzLl9mb3JtLl9wYXNzd29yZFJldHlwZXMucHVzaCh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdmFsaWRhdGVWYWx1ZShmb3JtRGF0YTogYW55LCBmaWVsZFZhbHVlOiBhbnksIGNhbGxiYWNrOiBJVmFsaWRhdGlvbkNhbGxiYWNrKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9mb3JtLl92YWxpZGF0ZWRQYXNzd29yZCkge1xuICAgICAgICAgICAgdmFyIHBhc3N3b3JkVmFsdWUgPSB0aGlzLl9mb3JtLl92YWxpZGF0ZWRQYXNzd29yZC5nZXRWYWx1ZSgpO1xuXG4gICAgICAgICAgICBpZiAocGFzc3dvcmRWYWx1ZSAhPT0gJycgJiYgcGFzc3dvcmRWYWx1ZSAhPT0gZmllbGRWYWx1ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5WQUxJREFUSU9OX0VSUk9SLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIudmFsaWRhdGVWYWx1ZShmb3JtRGF0YSwgZmllbGRWYWx1ZSwgY2FsbGJhY2spO1xuICAgIH1cbn1cbkZvcm1JbnB1dC5hZGRJbnB1dFRvTGlicmFyeShSZXR5cGVQYXNzd29yZElucHV0KTtcbiIsImltcG9ydCB7IEZvckVhY2ggfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7Rm9ybUlucHV0LCBJRm9ybUlucHV0Q29udGV4dCB9IGZyb20gXCIuL0Zvcm1JbnB1dFwiO1xuaW1wb3J0IEdTRXJyb3JzID0gZ2lneWEuR1NFcnJvcnM7XG5cbmV4cG9ydCBlbnVtIFNlcnZlckZpZWxkU3RhdGVzIHtcbiAgICBOb3RTdGFydGVkLFxuICAgIEluUHJvZ3Jlc3MsXG4gICAgRG9uZSxcbiAgICBFcnJvcixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXJ2ZXJEb25lRmllbGRDYWxsYmFjayBleHRlbmRzIEZ1bmN0aW9uIHtcbiAgICAoc3RhdHVzOiBTZXJ2ZXJGaWVsZFN0YXRlcywgZmllbGQ6IFNlcnZlckZvcm1JbnB1dCk6IHZvaWQ7XG59XG5leHBvcnQgY2xhc3MgU2VydmVyRm9ybUlucHV0IGV4dGVuZHMgRm9ybUlucHV0IHtcbiAgICBwdWJsaWMgc2VydmVyU3RhdGUgPSBTZXJ2ZXJGaWVsZFN0YXRlcy5Ob3RTdGFydGVkO1xuICAgIHByaXZhdGUgY2FsbGJhY2tzID0gbmV3IEFycmF5PFNlcnZlckRvbmVGaWVsZENhbGxiYWNrPigpO1xuXG4gICAgY29uc3RydWN0b3IoY29udGV4dDogSUZvcm1JbnB1dENvbnRleHQpIHtcbiAgICAgICAgc3VwZXIoY29udGV4dCk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhcnRTZXJ2ZXJRdWVyeSgpIHtcbiAgICAgICAgdGhpcy5zZXJ2ZXJTdGF0ZSA9IFNlcnZlckZpZWxkU3RhdGVzLkluUHJvZ3Jlc3M7XG4gICAgfVxuXG4gICAgcHVibGljIG9uU2VydmVyRW5kKGVycm9yQ29kZSl7XG5cbiAgICAgICAgdGhpcy5zZXJ2ZXJTdGF0ZSA9IGVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSyA/IFNlcnZlckZpZWxkU3RhdGVzLkRvbmUgOiBTZXJ2ZXJGaWVsZFN0YXRlcy5FcnJvcjtcbiAgICAgICAgaWYodGhpcy5jYWxsYmFja3MubGVuZ3RoKXtcbiAgICAgICAgICAgIEZvckVhY2godGhpcy5jYWxsYmFja3MsIGNhbGxiYWNrID0+IGNhbGxiYWNrKHRoaXMuc2VydmVyU3RhdGUsIHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzID0gbmV3IEFycmF5PFNlcnZlckRvbmVGaWVsZENhbGxiYWNrPigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHJ1bk9uU2VydmVyRG9uZShjYWxsYmFjazogU2VydmVyRG9uZUZpZWxkQ2FsbGJhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuc2VydmVyU3RhdGUgIT09IFNlcnZlckZpZWxkU3RhdGVzLkluUHJvZ3Jlc3MpIGNhbGxiYWNrKHRoaXMuc2VydmVyU3RhdGUsIHRoaXMpO1xuICAgICAgICBlbHNlIHRoaXMuY2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbn1cbiIsImV4cG9ydCAqIGFzIFBhc3N3b3JkSW5wdXRzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1Bhc3N3b3JkSW5wdXRzJztcbmV4cG9ydCAqIGFzIEJ1dHRvbklucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0J1dHRvbklucHV0JztcbmV4cG9ydCAqIGFzIENoZWNrYm94SW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvQ2hlY2tib3hJbnB1dCc7XG5leHBvcnQgKiBhcyBDb21tdW5pY2F0aW9uQ2hlY2tib3hJbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Db21tdW5pY2F0aW9uQ2hlY2tib3hJbnB1dCc7XG5leHBvcnQgKiBhcyBFbWFpbElucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0VtYWlsSW5wdXQnO1xuZXhwb3J0ICogYXMgRm9ybUlucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XG5leHBvcnQgKiBhcyBBZGRyZXNzSW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvQWRkcmVzc0lucHV0JztcbmV4cG9ydCAqIGFzIExvZ2luSWRJbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Mb2dpbklkSW5wdXQnO1xuZXhwb3J0ICogYXMgUGhvbmVOdW1iZXJJbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9QaG9uZU51bWJlcklucHV0JztcbmV4cG9ydCAqIGFzIFJhZGlvSW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUmFkaW9JbnB1dCc7XG5leHBvcnQgKiBhcyBSZW1lbWJlcklucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1JlbWVtZWJlcklucHV0JztcbmV4cG9ydCAqIGFzIFJldHlwZVBhc3N3b3JkSW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUmV0eXBlUGFzc3dvcmRJbnB1dCc7XG5cbiIsImltcG9ydCB7IElTY3JlZW5TZXRQYXJhbXMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbic7XG5pbXBvcnQgeyBGb3JFYWNoLCBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5cbmV4cG9ydCBlbnVtIENvbmZsaWN0SGFuZGxpbmcge1xuICAgIGZhaWwsXG4gICAgc2F2ZVByb2ZpbGVBbmRGYWlsLFxufVxuZXhwb3J0IGludGVyZmFjZSBJTG9naW5Nb2RlIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZ2V0TG9naW5Qcm92aWRlcnMoYXBpRGF0YTogYW55LCBwYXJhbXM6IGFueSwgcmVnVG9rZW46IHN0cmluZyk6IHN0cmluZztcbiAgICBmaWx0ZXJQYXJhbXMocGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zKTogSVNjcmVlblNldFBhcmFtcztcbn1cbmludGVyZmFjZSBJSWRlbnRpdHkge1xuICAgIGFsbG93c0xvZ2luOiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG59XG5leHBvcnQgdmFyIExvZ2luTW9kZXMgPSB7XG4gICAgY29ubmVjdDp7XG4gICAgICAgIG5hbWU6ICdjb25uZWN0J1xuICAgIH0sXG4gICAgc3RhbmRhcmQ6IHtcbiAgICAgICAgbmFtZTogJ3N0YW5kYXJkJyxcbiAgICAgICAgZ2V0TG9naW5Qcm92aWRlcnM6IChhcGlEYXRhLCBwYXJhbXMsIHJlZ1Rva2VuKTogc3RyaW5nID0+IHtcbiAgICAgICAgICAgIHZhciBlbmFibGVkUHJvdmlkZXJzOiBzdHJpbmcgPSBwYXJhbXNbJ2VuYWJsZWRQcm92aWRlcnMnXTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbmFibGVkUHJvdmlkZXJzICE9PSAnc3RyaW5nJykgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiBlbmFibGVkUHJvdmlkZXJzLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZpbHRlclBhcmFtczogcGFyYW1zID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXMucmVnVG9rZW47XG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zLmluc3RhbmNlSUQ7XG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zLmdldEluc3RhbmNlO1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIHJlQXV0aDoge1xuICAgICAgICBuYW1lOiAncmVBdXRoJyxcbiAgICAgICAgZ2V0TG9naW5Qcm92aWRlcnM6IChhcGlEYXRhLCBwYXJhbXMsIHJlZ1Rva2VuKTogc3RyaW5nID0+IHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UHJvdmlkZXJzOiBzdHJpbmcgPSBhcGlEYXRhLmdldEFjY291bnRJbmZvICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8uc29jaWFsUHJvdmlkZXJzO1xuICAgICAgICAgICAgdmFyIGlkZW50aXRpZXM6IEFycmF5PElJZGVudGl0eT4gPSBhcGlEYXRhLmdldEFjY291bnRJbmZvICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8uaWRlbnRpdGllcztcblxuICAgICAgICAgICAgaWYgKCFjdXJyZW50UHJvdmlkZXJzKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgY3VycmVudFByb3ZpZGVycyA9IGN1cnJlbnRQcm92aWRlcnMudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgdmFyIHByb3ZpZGVycyA9IGN1cnJlbnRQcm92aWRlcnMuc3BsaXQoJywnKTtcblxuICAgICAgICAgICAgaWYgKGlkZW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgaWRlbnRpdGllcyB0aGF0IGFyZSBhbGxvd0xvZ2luIGZhbHNlXG4gICAgICAgICAgICAgICAgRm9yRWFjaChpZGVudGl0aWVzLCBpZGVudGl0eSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaWRlbnRpdHkuYWxsb3dzTG9naW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBwcm92aWRlcnMuaW5kZXhPZihpZGVudGl0eS5wcm92aWRlci50b0xvd2VyQ2FzZSgpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCA+IC0xKSBwcm92aWRlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVycy5qb2luKCcsJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGZpbHRlclBhcmFtczogcGFyYW1zID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXMuaW5zdGFuY2VJRDtcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXMuZ2V0SW5zdGFuY2U7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgICAgICB9LFxuICAgIH0sXG4gICAgbGluazoge1xuICAgICAgICBuYW1lOiAnbGluaycsXG4gICAgICAgIGdldExvZ2luUHJvdmlkZXJzOiAoYXBpRGF0YSwgcGFyYW1zLCByZWdUb2tlbik6IHN0cmluZyA9PiB7XG4gICAgICAgICAgICBpZiAoIXJlZ1Rva2VuKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuICBhcGlEYXRhPy5nZXRDb25mbGljdGluZ0FjY291bnQ/LmNvbmZsaWN0aW5nQWNjb3VudD8ubG9naW5Qcm92aWRlcnM/LmpvaW4oJywnKT8udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZmlsdGVyUGFyYW1zOiBwYXJhbXMgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5pbnN0YW5jZUlEO1xuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5nZXRJbnN0YW5jZTtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICAgIH0sXG4gICAgfSxcbn07XG5EZWVwRnJlZXplKExvZ2luTW9kZXMpO1xuIiwiZXhwb3J0IHR5cGUgSW5wdXRWYWx1ZVR5cGUgPSBzdHJpbmcgfCBzdHJpbmdbXSB8IGJvb2xlYW4gfCBudW1iZXIgfCBudWxsIHwgb2JqZWN0O1xuZXhwb3J0IHR5cGUgU2NoZW1hVHlwZSA9ICdzdHJpbmcnIHwgJ2Jhc2ljLXN0cmluZycgfCAnZW5jcnlwdGVkLXN0cmluZycgfCAndGV4dCcgfCAnZGF0ZScgfCAnaW50ZWdlcicgfCAnbG9uZycgfCAnZmxvYXQnIHwgJ2Jvb2xlYW4nO1xuZXhwb3J0IHR5cGUgU2NoZW1hU3ViVHlwZSA9ICdub25lJyB8ICdwaG9uZScgfCAnYWRkcmVzcyc7XG5cbmNvbnN0IHN0cmluZ0NvbnZlcnRlciA9IHZhbHVlID0+ICBnaWd5YS51dGlscy5zdHJpbmdVdGlscy50cmltKHZhbHVlKTtcbmNvbnN0IG51bWJlckNvbnZlcnRlciA9IHZhbHVlID0+IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5jb25zdCBmbG9hdENvbnZlcnRlciA9IHZhbHVlID0+IHBhcnNlRmxvYXQodmFsdWUpO1xuY29uc3QgYm9vbGVhbkNvbnZlcnRlciA9IHZhbHVlID0+IFN0cmluZyh2YWx1ZSkgPT09ICd0cnVlJztcblxuY29uc3Qgc2NoZW1hVHlwZUNvbnZlcnRlck1hcHBpbmcgPSB7XG4gICAgJ3N0cmluZycgOiBzdHJpbmdDb252ZXJ0ZXIsXG4gICAgJ2Jhc2ljLXN0cmluZyc6IHN0cmluZ0NvbnZlcnRlcixcbiAgICAnZW5jcnlwdGVkLXN0cmluZyc6IHN0cmluZ0NvbnZlcnRlcixcbiAgICAndGV4dCc6IHN0cmluZ0NvbnZlcnRlcixcbiAgICAnZGF0ZSc6IHN0cmluZ0NvbnZlcnRlcixcbiAgICAnaW50ZWdlcic6IG51bWJlckNvbnZlcnRlcixcbiAgICAnbG9uZyc6IG51bWJlckNvbnZlcnRlcixcbiAgICAnZmxvYXQnOiBmbG9hdENvbnZlcnRlcixcbiAgICAnYm9vbGVhbic6IGJvb2xlYW5Db252ZXJ0ZXIsXG59O1xuXG5leHBvcnQgY29uc3Qgc2NoZW1hVHlwZVRvQ29udmVydGVyID0gKHNjaGVtYVR5cGU6IFNjaGVtYVR5cGUpID0+IHtcbiAgICByZXR1cm4gc2NoZW1hVHlwZUNvbnZlcnRlck1hcHBpbmdbc2NoZW1hVHlwZV0gfHwgc3RyaW5nQ29udmVydGVyO1xufVxuIiwiaW1wb3J0IHtUZW1wbGF0ZUVsZW1lbnQsIFRlbXBsYXRlRWxlbWVudF9DT05TVFN9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvVGVtcGxhdGVFbGVtZW50JztcbmltcG9ydCB7IElTY3JlZW5PcHRpb25zLCBTY3JlZW5PcHRpb25zLCBTY3JlZW5PcHRpb25zX0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuT3B0aW9ucyc7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHtcbiAgICBJTWFwLFxuICAgIEZvckVhY2gsXG4gICAgZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZSxcbiAgICBnZXRFbGVtZW50c0J5SGF2aW5nQXR0cmlidXRlUHJlZml4LFxuICAgIEZvckVhY2hQcm9wLFxuICAgIFNvbWUsXG4gICAgZ2V0VW5pdE1lYXN1cmVtZW50VHlwZSxcbiAgICByZXBsYWNlQXR0cmlidXRlLFxuICAgIFVuaXRNZWFzdXJlbWVudFR5cGUsXG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgRXJyb3JEaXNwbGF5RWxlbWVudCwgRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMsIEVycm9yU2NvcGVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvckRpc3BsYXlFbGVtZW50JztcbmltcG9ydCB7IFByb2ZpbGVQaG90b1dpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Qcm9maWxlUGhvdG9XaWRnZXQnO1xuaW1wb3J0IHsgQ2FwdGNoYVdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9DYXB0Y2hhV2lkZ2V0JztcbmltcG9ydCB7IElTY3JlZW5XaWRnZXQsIEJhc2VTY3JlZW5XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IHsgU2NyZWVuU2V0UGx1Z2luIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0IHsgU2NyZWVuX0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuQ29uc3RzJztcbmltcG9ydCB7IElGb3JtSW5wdXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xuaW1wb3J0IHsgSUJhc2VGb3JtRXZlbnQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0V2ZW50cy5kJztcbmltcG9ydCB7IElFcnJvckluZm8gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Vycm9ycyc7XG5pbXBvcnQgeyBJQWJUZXN0aW5nRGF0YSwgSUVsZW1lbnRTaXplIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0ludGVyZmFjZXMnO1xuaW1wb3J0IHsgUGx1Z2luU3R5bGUgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL1BsdWdpblN0eWxlcyc7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7IElGb3JtQ29udGV4dCB9IGZyb20gXCIuL0lGb3JtQ29udGV4dFwiO1xuaW1wb3J0IHtCYXNlRm9ybVdpZGdldCwgSUZvcm1XaWRnZXR9IGZyb20gJy4vQmFzZUZvcm1XaWRnZXQnO1xuXG5leHBvcnQgY2xhc3MgU2NyZWVuIGV4dGVuZHMgVGVtcGxhdGVFbGVtZW50PEhUTUxEaXZFbGVtZW50PiBpbXBsZW1lbnRzIElTY3JlZW5PcHRpb25zIHtcbiAgICBwdWJsaWMgYWNjb3VudHNMaW5rZWRTY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgcGVuZGluZ1RmYVJlZ2lzdHJhdGlvblNjcmVlbjogc3RyaW5nO1xuICAgIHB1YmxpYyBwZW5kaW5nVGZhVmVyaWZpY2F0aW9uU2NyZWVuOiBzdHJpbmc7XG4gICAgcHVibGljIHBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgZXhpc3RpbmdMb2dpbklkZW50aWZpZXJTY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgcGVuZGluZ1ZlcmlmaWNhdGlvblNjcmVlbjogc3RyaW5nO1xuICAgIHB1YmxpYyBtaXNzaW5nTG9naW5JZFNjcmVlbjogc3RyaW5nO1xuICAgIHB1YmxpYyBwZW5kaW5nUGFzc3dvcmRDaGFuZ2VTY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgcGVuZGluZ1JlQXV0aGVudGljYXRpb25TY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgcGVuZGluZ0NvZGVWZXJpZmljYXRpb25TY3JlZW46IHN0cmluZztcblxuICAgIHB1YmxpYyBfaGFzVGZhOiBib29sZWFuO1xuICAgIHByaXZhdGUgX2Zvcm1zOiBCYXNlRm9ybVtdO1xuICAgIHB1YmxpYyBfZXJyb3JEaXNwbGF5RWxlbWVudHM6IElNYXA8QXJyYXk8RXJyb3JEaXNwbGF5RWxlbWVudD4+ID0ge307XG4gICAgcHVibGljIF9wcm9maWxlUGhvdG9zID0gbmV3IEFycmF5PFByb2ZpbGVQaG90b1dpZGdldD4oKTtcbiAgICBwdWJsaWMgX2NhcHRjaGFzID0gbmV3IEFycmF5PENhcHRjaGFXaWRnZXQ+KCk7XG4gICAgcHJpdmF0ZSBfd2lkZ2V0czogSVNjcmVlbldpZGdldFtdO1xuICAgIHByaXZhdGUgX290aGVycyA9IG5ldyBBcnJheTxUZW1wbGF0ZUVsZW1lbnQ8SFRNTEVsZW1lbnQ+PigpO1xuXG4gICAgcHVibGljIHdpZHRoOiBzdHJpbmc7XG4gICAgcHVibGljIGhlaWdodDogc3RyaW5nO1xuICAgIHB1YmxpYyBjYXB0aW9uOiBzdHJpbmc7XG4gICAgcHVibGljIHJlcXVlc3RlZFNjcmVlbklkOiBzdHJpbmc7XG5cbiAgICAvLyBPdmVycmlkYWJsZSBkZXBlbmRlbmNpZXMgLy8vXG4gICAgcHVibGljIHN0YXRpYyB1dGlscyA9IHtcbiAgICAgICAgRm9yRWFjaCxcbiAgICAgICAgZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZSxcbiAgICAgICAgZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZVByZWZpeCxcbiAgICAgICAgRm9yRWFjaFByb3AsXG4gICAgICAgIFNvbWUsXG4gICAgICAgIGdldFVuaXRNZWFzdXJlbWVudFR5cGUsXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBfc2NyZWVuU2V0OiBTY3JlZW5TZXRQbHVnaW4sIHB1YmxpYyB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKHRlbXBsYXRlRWxlbWVudCwgX3NjcmVlblNldCBhcyBhbnkpO1xuXG4gICAgICAgIGlmICghdGhpcy5JRCkgdGhpcy53YXJuKCdzY3JlZW4gaXMgbWlzc2luZyBhbiBpZCcpO1xuXG4gICAgICAgIGlmICgvW14tXzAtOWEtekEtWl0vLnRlc3QodGhpcy5JRCkpIHRoaXMud2Fybignc2NyZWVuIGlkIGNvbnRhaW5zIHNwZWNpYWwgY2hhcmFjdGVycyB0aGF0IG1heSBjb250YWluIHNwZWNpYWwgbWVhbmluZycpO1xuXG4gICAgICAgIFNjcmVlbk9wdGlvbnMuY2FsbCh0aGlzLCB0ZW1wbGF0ZUVsZW1lbnQsIF9zY3JlZW5TZXQuc2NyZWVuT3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5wcmVwYXJlQm91bmRlZFRvRm9ybUVsZW1lbnRzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1zID0gQmFzZUZvcm0ucmVnaXN0ZXJGb3Jtcyh0aGlzKTtcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IEJhc2VTY3JlZW5XaWRnZXQucmVnaXN0ZXJXaWRnZXRzKHRoaXMpO1xuXG4gICAgICAgIC8vIGhhbmRsaW5nIG9mIG5vcm1hbCBET00gZWxlbWVudHMgdGhhdCB1c2UgZ2lneWEgbG9naWNcbiAgICAgICAgLy8gQW5vdGhlciBjaGVjayBpZiB0aGUgZ3JvdXAgaXMgYWN0aXZlIGZyb20gdGhlIHNjcmVlbnNldCBwbHVnaW5cblxuICAgICAgICB0aGlzLnByZXBhcmVPdGhlckVsZW1lbnRzKCk7XG4gICAgICAgIHRoaXMuc2V0Q3NzQ2xhc3MoKTtcblxuICAgICAgICAvLyByZXBsYWNpbmcgYWxsIFwiZm9yXCIgYXR0cmlidXRlIGZyb20gdGhlIHNjcmVlbiB0ZW1wbGF0ZVxuICAgICAgICByZXBsYWNlQXR0cmlidXRlKHRoaXMudGVtcGxhdGVFbGVtZW50LCAnZm9yJywgVGVtcGxhdGVFbGVtZW50X0NPTlNUUy5lbGVtZW50Rm9yKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByZXBhcmVCb3VuZGVkVG9Gb3JtRWxlbWVudHMoKSB7XG4gICAgICAgIHZhciBib3VuZGVkRWxlbWVudHMgPSBuZXcgQXJyYXk8SFRNTEVsZW1lbnQ+KCk7XG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmdpZ3lhQ2xhc3NlcywgZ2lneWFDbGFzcyA9PiB7XG4gICAgICAgICAgICBib3VuZGVkRWxlbWVudHMgPSBib3VuZGVkRWxlbWVudHMuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMudGVtcGxhdGVFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2dpZ3lhQ2xhc3N9YCkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKGJvdW5kZWRFbGVtZW50cywgZWwgPT4ge1xuICAgICAgICAgICAgdmFyIGJvdW5kZWRFbGVtZW50ID0gbmV3IEVycm9yRGlzcGxheUVsZW1lbnQoZWwsIHRoaXMpO1xuXG4gICAgICAgICAgICB2YXIgYm91bmRlZExpc3QgPSB0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tib3VuZGVkRWxlbWVudC5ib3VuZGVkVG9dO1xuXG4gICAgICAgICAgICBpZiAoIWJvdW5kZWRMaXN0KSBib3VuZGVkTGlzdCA9IHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzW2JvdW5kZWRFbGVtZW50LmJvdW5kZWRUb10gPSBbXTtcblxuICAgICAgICAgICAgYm91bmRlZExpc3QucHVzaChib3VuZGVkRWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgdmFyaWFudEdyb3VwSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Py5nZXRBdHRyaWJ1dGUoU2NyZWVuX0NPTlNUUy5kYXRhVmFyaWFudEdyb3VwKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGFiVGVzdElkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRWxlbWVudD8uZ2V0QXR0cmlidXRlKFNjcmVlbl9DT05TVFMuZGF0YVZhcmlhbnRUZXN0SWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgYWJUZXN0aW5nRGF0YSgpOiBJQWJUZXN0aW5nRGF0YSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZXN0SWQ6IHRoaXMuYWJUZXN0SWQsXG4gICAgICAgICAgICB2YXJpYW50SWQ6IHRoaXMuSUQsXG4gICAgICAgICAgICByZXF1ZXN0ZWRTY3JlZW5JZDogdGhpcy5yZXF1ZXN0ZWRTY3JlZW5JZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgdmFyaWFudFBlcmNlbnRhZ2UoKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgdmFyaWFudFBlcmNlbnRhZ2UgPSBwYXJzZUludCh0aGlzLnRlbXBsYXRlRWxlbWVudD8uZ2V0QXR0cmlidXRlKFNjcmVlbl9DT05TVFMuZGF0YVZhcmlhbnRQZXJjZW50YWdlKSk7XG4gICAgICAgIGlmICghaXNOYU4odmFyaWFudFBlcmNlbnRhZ2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFyaWFudFBlcmNlbnRhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBpc09yaWdpbmFsVmFyaWFudCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVFbGVtZW50Py5oYXNBdHRyaWJ1dGUoU2NyZWVuX0NPTlNUUy5kYXRhVmFyaWFudE9yaWdpbmFsU2NyZWVuKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGlzU2NyZWVuVmFyaWFudCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdGVkU2NyZWVuICE9PSB0aGlzLklEO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgcmVxdWVzdGVkU2NyZWVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0ZWRTY3JlZW5JZCB8fCB0aGlzLklEO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRTcGVjaWZpY0Vycm9yQmluZHMoYm91bmRlZEVsZW1lbnRzOiBBcnJheTxIVE1MRWxlbWVudD4gPSBbXSk6IEFycmF5PEVycm9yRGlzcGxheUVsZW1lbnQ+IHtcbiAgICAgICAgbGV0IGJvdW5kZWRFcnJvckVsZW1lbnRzOiBBcnJheTxFcnJvckRpc3BsYXlFbGVtZW50PiA9IFtdO1xuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChib3VuZGVkRWxlbWVudHMsIGVsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kZWRFbGVtZW50ID0gbmV3IEVycm9yRGlzcGxheUVsZW1lbnQoZWwsIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHNbYm91bmRlZEVsZW1lbnQuYm91bmRlZFRvXSA9ICh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tib3VuZGVkRWxlbWVudC5ib3VuZGVkVG9dIHx8IFtdKS5jb25jYXQoW2JvdW5kZWRFbGVtZW50XSk7XG4gICAgICAgICAgICBib3VuZGVkRXJyb3JFbGVtZW50cy5wdXNoKGJvdW5kZWRFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJvdW5kZWRFcnJvckVsZW1lbnRzLmZvckVhY2goZWwgPT4gZWwubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCkpO1xuICAgICAgICByZXR1cm4gYm91bmRlZEVycm9yRWxlbWVudHM7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVNwZWNpZmljRXJyb3JCaW5kcyhib3VuZGVkRXJyb3JzOiBBcnJheTxFcnJvckRpc3BsYXlFbGVtZW50PiA9IFtdKSB7XG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKGJvdW5kZWRFcnJvcnMsIGVycm9yRGlzcGxheSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHNbZXJyb3JEaXNwbGF5LmJvdW5kZWRUb107XG4gICAgICAgICAgICBlcnJvckRpc3BsYXkudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGREeW5hbWljV2lkZ2V0cyhyb290RWw6IEhUTUxFbGVtZW50LCBwYXJhbXM6IHtleGNsdWRlPzogYW55W119ID0ge30pIHtcbiAgICAgICAgbGV0IG5ld1dpZGdldHMgPSBCYXNlU2NyZWVuV2lkZ2V0LnJlZ2lzdGVyRHluYW1pY1dpZGdldHModGhpcywgcm9vdEVsKTtcblxuICAgICAgICBpZiAocGFyYW1zPy5leGNsdWRlKSB7XG4gICAgICAgICAgICBuZXdXaWRnZXRzID0gbmV3V2lkZ2V0c1xuICAgICAgICAgICAgICAuZmlsdGVyKHcgPT4gIXBhcmFtcz8uZXhjbHVkZT8uc29tZSgodCkgPT4gdyBpbnN0YW5jZW9mIHQpKVxuICAgICAgICB9XG5cbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2gobmV3V2lkZ2V0cywgdyA9PiB3LmxpbmtJbnN0YW5jZUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQpKTtcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IHRoaXMuX3dpZGdldHMuY29uY2F0KG5ld1dpZGdldHMpO1xuICAgICAgICByZXR1cm4gbmV3V2lkZ2V0cztcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkRHluYW1pY1dpZGdldHNCeVR5cGUocm9vdEVsOiBIVE1MRWxlbWVudCwgd2lkZ2V0VHlwZXM6IGFueVtdKTogQXJyYXk8SVNjcmVlbldpZGdldD4ge1xuICAgICAgICBsZXQgbmV3V2lkZ2V0cyA9IEJhc2VTY3JlZW5XaWRnZXQucmVnaXN0ZXJEeW5hbWljV2lkZ2V0cyh0aGlzLCByb290RWwpO1xuICAgICAgICBuZXdXaWRnZXRzID0gbmV3V2lkZ2V0c1xuICAgICAgICAgIC5maWx0ZXIodyA9PiB3aWRnZXRUeXBlcz8uc29tZSgodCkgPT4gdyBpbnN0YW5jZW9mIHQpKVxuXG4gICAgICAgIG5ld1dpZGdldHMuZm9yRWFjaCh3ID0+IHcubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCkpO1xuICAgICAgICB0aGlzLl93aWRnZXRzID0gdGhpcy5fd2lkZ2V0cy5jb25jYXQobmV3V2lkZ2V0cyk7XG4gICAgICAgIHJldHVybiBuZXdXaWRnZXRzO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVEeW5hbWljV2lkZ2V0cyh3aWRnZXRzVG9SZW1vdmU6IEFycmF5PElTY3JlZW5XaWRnZXQ+KSB7XG4gICAgICAgIGlmICghdGhpcy5fd2lkZ2V0cyB8fCAhdGhpcy5fd2lkZ2V0cy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IHRoaXMuX3dpZGdldHMuZmlsdGVyKHcgPT4gd2lkZ2V0c1RvUmVtb3ZlLmluZGV4T2YodykgPCAwKTtcbiAgICAgICAgd2lkZ2V0c1RvUmVtb3ZlLmZvckVhY2god2lkZ2V0ID0+IHtcbiAgICAgICAgICAgIHdpZGdldC51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICAgICAgICAgIHdpZGdldC51bmxpbmtUZW1wbGF0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByZXBhcmVPdGhlckVsZW1lbnRzKCkge1xuICAgICAgICAvLyBUaGVzZSBlbGVtZW50cyBhcmUgZXZhbHVhdGVkIGJlY2F1c2UgdGhleSBoYXZlIGFuIElELlxuICAgICAgICBjb25zdCBvdGhlckVsZW1lbnRzID0gU2NyZWVuLnV0aWxzLmdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGUodGhpcy50ZW1wbGF0ZUVsZW1lbnQsICcqJywgJ2lkJyk7XG5cbiAgICAgICAgLy8gVGhlc2UgZWxlbWVudHMgYXJlIGV2YWx1YXRlZCBiZWNhdXNlIHRoZXkgaGF2ZSBjb25kaXRpb25hbCBhdHRyaWJ1dGVzLlxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVQcmVmaXhlcyA9IFtTY3JlZW5fQ09OU1RTLmNvbmRpdGlvbmFsQXR0cmlidXRlUHJlZml4LCBTY3JlZW5fQ09OU1RTLmV4cHJlc3Npb25BdHRyaWJ1dGVQcmVmaXhdO1xuICAgICAgICBjb25zdCBjb25kaXRpb25hbEVsZW1lbnRzID0gU2NyZWVuLnV0aWxzLmdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGVQcmVmaXgodGhpcy50ZW1wbGF0ZUVsZW1lbnQsIGF0dHJpYnV0ZVByZWZpeGVzLCBbJ3BhcmFtJ10pO1xuXG4gICAgICAgIC8vIENvbWJpbmUgYW5kIGRlLWR1cCBhcnJheXMuXG4gICAgICAgIGZvciAoY29uc3QgY29uZGl0aW9uYWxFbGVtZW50IG9mIGNvbmRpdGlvbmFsRWxlbWVudHMpIHtcbiAgICAgICAgICAgIGlmIChnaWd5YS51dGlscy5hcnJheS5pbmRleE9mKG90aGVyRWxlbWVudHMsIGNvbmRpdGlvbmFsRWxlbWVudCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgb3RoZXJFbGVtZW50cy5wdXNoKGNvbmRpdGlvbmFsRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgVGVtcGxhdGVFbGVtZW50IHRvIG90aGVyIGVsZW1lbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIG90aGVyRWxlbWVudHMpIHtcbiAgICAgICAgICAgIGlmICghVGVtcGxhdGVFbGVtZW50LmlzVGVtcGxhdGVJbnN0YW5jZShlbCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vdGhlcnMucHVzaChuZXcgVGVtcGxhdGVFbGVtZW50KGVsLCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgb3ZlcnJpZGVUZW1wbGF0ZUNhcHRpb24oY2FwdGlvbjogc3RyaW5nKSB7XG4gICAgICAgIC8vIG92ZXJyaWRlIGNhcHRpb24gYXR0cmlidXRlcyBhbmQgcmVtb3ZlIHRoZSBjYXB0aW9uIGV4cHJlc3Npb24sIE5PVElDRTogdGhpcyBtZWFuIHRoYXQgaXQgd2lsbCBubyBsb25nZXIgYmUgZXZhbHVhdGVkXG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShgJHtTY3JlZW5fQ09OU1RTLmV4cHJlc3Npb25BdHRyaWJ1dGVQcmVmaXh9OiR7U2NyZWVuT3B0aW9uc19DT05TVFMuY2FwdGlvbn1gKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLmNhcHRpb24sIGNhcHRpb24pO1xuICAgICAgICB0aGlzLmNhcHRpb24gPSBjYXB0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBoYXZlRm9ybXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3Jtcy5sZW5ndGggfHwgdGhpcy5faGFzVGZhO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGb3JtQnlFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogQmFzZUZvcm0gfCB1bmRlZmluZWQge1xuICAgICAgICBmb3IgKGNvbnN0IGZvcm0gb2YgdGhpcy5fZm9ybXMpIHtcbiAgICAgICAgICAgIGlmIChmb3JtLmluc3RhbmNlRWxlbWVudD8uY29udGFpbnMoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm9ybTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzZXRDc3NDbGFzcygpIHtcbiAgICAgICAgdGhpcy5jc3NDbGFzcyA9IHRoaXMudGVtcGxhdGVFbGVtZW50LmdldEF0dHJpYnV0ZShTY3JlZW5fQ09OU1RTLmNzc0NsYXNzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rVGVtcGxhdGUoKSB7XG4gICAgICAgIHZhciB1bmxpbmtJdGVtID0gaSA9PiBpLnVubGlua1RlbXBsYXRlKCk7XG5cbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIHVubGlua0l0ZW0pO1xuXG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoUHJvcCh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50cywgYm91bmRlZEVsZW1lbnRzID0+IHtcbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKGJvdW5kZWRFbGVtZW50cywgdW5saW5rSXRlbSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX290aGVycywgdW5saW5rSXRlbSk7XG5cbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fd2lkZ2V0cywgdW5saW5rSXRlbSk7XG5cbiAgICAgICAgc3VwZXIudW5saW5rVGVtcGxhdGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiAge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBsaW5rSXRlbSA9IGkgPT4gaS5saW5rSW5zdGFuY2VFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCB3aWRnZXQgb2YgdGhpcy5fd2lkZ2V0cykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxpbmtJdGVtKHdpZGdldClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3RoZXJzIG9mIHRoaXMuX290aGVycykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxpbmtJdGVtKG90aGVycylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChjb25zdCBlcnJvckRpc3BsYXlFbGVtZW50IGluIHRoaXMuX2Vycm9yRGlzcGxheUVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBib3VuZGVkRWxlbWVudCBvZiB0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tlcnJvckRpc3BsYXlFbGVtZW50XSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsaW5rSXRlbShib3VuZGVkRWxlbWVudClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZm9ybSBvZiB0aGlzLl9mb3Jtcykge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxpbmtJdGVtKGZvcm0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2lneWEubG9jYWxJbmZvLmlzSUU5IHx8IGdpZ3lhLmxvY2FsSW5mby5pc0lFOCkge1xuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIChmb3JtOiBCYXNlRm9ybSkgPT4ge1xuICAgICAgICAgICAgICAgIGZvcm0uZmlsdGVycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyT3V0V2lkZ2V0c1RvU2VuZDogZGF0YVRvRmlsdGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhVG9GaWx0ZXIucHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkYXRhVG9GaWx0ZXIucHJvZmlsZS5fcHJvZmlsZVBob3RvO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGFUb0ZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGxlZ2FjeUxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkgIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGxpbmtJdGVtID0gaSA9PiBpLmxpbmtJbnN0YW5jZUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl93aWRnZXRzLCBsaW5rSXRlbSk7XG5cbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX290aGVycywgbGlua0l0ZW0pO1xuXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaFByb3AodGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHMsIGJvdW5kZWRFbGVtZW50cyA9PiB7XG4gICAgICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2goYm91bmRlZEVsZW1lbnRzLCBsaW5rSXRlbSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIGxpbmtJdGVtKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdpZ3lhLmxvY2FsSW5mby5pc0lFOSB8fCBnaWd5YS5sb2NhbEluZm8uaXNJRTgpIHtcbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX2Zvcm1zLCAoZm9ybTogQmFzZUZvcm0pID0+IHtcbiAgICAgICAgICAgICAgICBmb3JtLmZpbHRlcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck91dFdpZGdldHNUb1NlbmQ6IGRhdGFUb0ZpbHRlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVRvRmlsdGVyLnByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGF0YVRvRmlsdGVyLnByb2ZpbGUuX3Byb2ZpbGVQaG90bztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhVG9GaWx0ZXI7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBwbGFjZUNvbnRlbnRJbkVsZW1lbnQoaW5zdGFuY2VFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLnRlbXBsYXRlRWxlbWVudC5hdHRyaWJ1dGVzLCBhID0+IGluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoYS5uYW1lLCBhLnZhbHVlKSk7XG4gICAgICAgIGluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlRWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgIHJlcGxhY2VBdHRyaWJ1dGUoaW5zdGFuY2VFbGVtZW50LCBUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmVsZW1lbnRGb3IsICdmb3InKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciB1bmxpbmtJdGVtID0gaSA9PiBpLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgdW5saW5rSXRlbSk7XG5cbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoUHJvcCh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50cywgYm91bmRlZEVsZW1lbnRzID0+IHtcbiAgICAgICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChib3VuZGVkRWxlbWVudHMsIHVubGlua0l0ZW0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX290aGVycywgdW5saW5rSXRlbSk7XG5cbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX3dpZGdldHMsIHVubGlua0l0ZW0pO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVycm9yTWVzc2FnZShlcnJvckNvZGU6IEdTRXJyb3JzLCBpc0JvdW5kVG9GaWVsZDogYm9vbGVhbiwgZmllbGQ6IElGb3JtSW5wdXQpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NyZWVuU2V0LmdldEVycm9yTWVzc2FnZShlcnJvckNvZGUsIGlzQm91bmRUb0ZpZWxkLCBmaWVsZD8uZmllbGROYW1lLCBmaWVsZD8uZGlzcGxheU5hbWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkaXNwYXRjaEV2ZW50KGV2ZW50TmFtZTogc3RyaW5nLCBldmVudDogSUJhc2VGb3JtRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5kaXNwYXRjaFBsdWdpbkV2ZW50KGV2ZW50TmFtZSwgZXZlbnQpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IG1ha2UgYXN5bmMgc3RhY2tcbiAgICBwdWJsaWMgYXN5bmMgcGVyZm9ybUF1dG9Ta2lwKGZvcm1Db250ZXh0OiBJRm9ybUNvbnRleHQpOiBQcm9taXNlPEJhc2VGb3JtPiB7XG4gICAgICAgIGlmICghdGhpcy5fZm9ybXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm1zOiBCYXNlRm9ybVtdID0gW107XG5cbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIGFzeW5jKGZvcm0pID0+IHtcbiAgICAgICAgICAgIGZvcm1zLnB1c2goZm9ybSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKGZvcm1zLm1hcChmb3JtID0+IGZvcm0uY2FuQXV0b1NraXAoZm9ybUNvbnRleHQpKSlcblxuICAgICAgICBjb25zdCBjYW5Ta2lwQWxsRm9ybXMgPSByZXN1bHQuZXZlcnkoY2FuU2tpcEZvcm0gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNhblNraXBGb3JtID09PSB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY2FuU2tpcEFsbEZvcm1zID8gdGhpcy5fZm9ybXNbMF0gOiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBoaWRlRXJyb3JzKCkge1xuICAgICAgICB0aGlzLl9mb3Jtcy5tYXAoKGY6QmFzZUZvcm0pPT5cbiAgICAgICAgICAgICh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50c1tmLmJpbmRJRF0gfHwgW10pLmZvckVhY2goZWxCb3VuZCA9PlxuICAgICAgICAgICAgICAgIGVsQm91bmQuaGlkZUVycm9yKCkpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2hvd0Vycm9ycyhmb3JtOiBCYXNlRm9ybSwgYXJFcnJvcnM6IElFcnJvckluZm9bXSwgaXNTZXJ2ZXJFcnJvcjogYm9vbGVhbikge1xuICAgICAgICB2YXIgYXJCb3VuZEVsZW1lbnRzID0gdGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHNbZm9ybS5iaW5kSURdIHx8IFtdO1xuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChhckJvdW5kRWxlbWVudHMsIGVsQm91bmQgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc1NlcnZlckVycm9yICYmIGVsQm91bmQuc2NvcGUgIT09IEVycm9yU2NvcGVzLmZpcnN0RXJyb3IgJiYgZWxCb3VuZC5zY29wZSAhPT0gRXJyb3JTY29wZXMuYW55RXJyb3IgJiYgZWxCb3VuZC5zY29wZSAhPT0gRXJyb3JTY29wZXMuYWxsRXJyb3JzKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIGZpcnN0RXJyb3I6IEdTRXJyb3JzO1xuICAgICAgICAgICAgdmFyIGFyRXJyb3JNZXNzYWdlcyA9IG5ldyBBcnJheTxzdHJpbmc+KCk7XG4gICAgICAgICAgICB2YXIgc2hvdWxkRGlzcGxheSA9IGZhbHNlO1xuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2goYXJFcnJvcnMsIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZWxCb3VuZC5pc0Vycm9yQ29kZUFsbG93ZWQoZXJyb3IuZXJyb3JDb2RlLCBlcnJvci5lcnJvckZsYWdzKSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5oYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IGVycm9yLmN1c3RvbU1lc3NhZ2UgfHwgZXJyb3IuZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0RXJyb3IpIGZpcnN0RXJyb3IgPSBlcnJvci5lcnJvckNvZGU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IGZvcm0uZ2V0RmllbGQoZXJyb3IuZmllbGROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZCkgZXJyb3JNZXNzYWdlID0gdGhpcy5fc2NyZWVuU2V0LmdldEVycm9yTWVzc2FnZShlcnJvci5lcnJvckNvZGUsIGZhbHNlLCBmaWVsZC5maWVsZE5hbWUsIGZpZWxkLmRpc3BsYXlOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZERpc3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJFcnJvck1lc3NhZ2VzLnB1c2goZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoc2hvdWxkRGlzcGxheSkge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvck1zZzogc3RyaW5nO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsQm91bmQuc2NvcGUgPT09IEVycm9yU2NvcGVzLmZpcnN0RXJyb3IgfHwgaXNTZXJ2ZXJFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZyA9IGFyRXJyb3JNZXNzYWdlc1swXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1zZyA9ICc8dWw+PGxpPicgKyBhckVycm9yTWVzc2FnZXMuam9pbignPC9saT48bGk+JykgKyAnPC9saT48L3VsPic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxCb3VuZC5zaG93RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IGZpcnN0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JNc2csXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsQm91bmQuaGlkZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChTY3JlZW4udXRpbHMuU29tZShhckVycm9ycywgZXJyb3IgPT4gIWVycm9yLmhhbmRsZWQpKSB7XG4gICAgICAgICAgICBmb3JtLndhcm4oJ01pc3NpbmcgZXJyb3ItbXNnIG9yIGVycm9yLWRpc3BsYXkgZm9yIGZvcm0nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBkaW1TY3JlZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JlZW5TZXQuZGltU2NyZWVuU2V0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVuZGltU2NyZWVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NyZWVuU2V0LnVuZGltU2NyZWVuU2V0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFByb2ZpbGVQaG90byh0aHVtYm5haWxVcmw6IHN0cmluZykge1xuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9wcm9maWxlUGhvdG9zLCBwUGhvdG8gPT4gcFBob3RvLnNldFRodW1ibmFpbFVybCh0aHVtYm5haWxVcmwpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RXh0cmFQcm9maWxlRmllbGRzKG1pc3NpbmdPbmx5OiBib29sZWFuKSB7XG4gICAgICAgIHZhciBtaXNzaW5nRmllbGRzID0gbmV3IEFycmF5PHN0cmluZz4oKTtcblxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgZiA9PiAobWlzc2luZ0ZpZWxkcyA9IG1pc3NpbmdGaWVsZHMuY29uY2F0KGYuZ2V0RXh0cmFQcm9maWxlRmllbGRzKG1pc3NpbmdPbmx5KSkpKTtcblxuICAgICAgICByZXR1cm4gbWlzc2luZ0ZpZWxkcztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmVlZGVkRGF0YShmb3JtQ29udGV4dDogSUZvcm1Db250ZXh0KSB7XG4gICAgICAgIHZhciBuZWVkZWREYXRhOiBJTWFwPGFueT4gPSB7fTtcblxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgZiA9PiB7XG4gICAgICAgICAgICB2YXIgZm9ybU5lZWRlZERhdGEgPSBmLmdldE5lZWRlZERhdGEoZm9ybUNvbnRleHQpO1xuXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaFByb3AoZm9ybU5lZWRlZERhdGEsICh2YWwsIG5hbWUpID0+IChuZWVkZWREYXRhW25hbWVdID0gdmFsKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZWVkZWREYXRhO1xuICAgIH1cblxuICAgIC8vLyBPdmVycmlkZSBUZW1wbGF0ZUVsZW1lbnQncyBoYXNDb25kaXRpb25hbEF0dHJpYnV0ZXNcbiAgICBwdWJsaWMgaGFzQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoc3VwZXIuaGFzQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHZhciBjaGlsZHJlbjogVGVtcGxhdGVFbGVtZW50PEhUTUxFbGVtZW50PltdID0gW10uY29uY2F0KHRoaXMuX2Zvcm1zLCB0aGlzLl93aWRnZXRzLCB0aGlzLl9jYXB0Y2hhcywgdGhpcy5fcHJvZmlsZVBob3RvcywgdGhpcy5fb3RoZXJzKTtcblxuICAgICAgICBnaWd5YS51dGlscy5hcnJheS5mb3JFYWNoUHJvcCh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50cywgdGVtcGxhdGVFbGVtZW50cyA9PiBjaGlsZHJlbi5jb25jYXQodGVtcGxhdGVFbGVtZW50cykpO1xuXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5hcnJheS5zb21lKGNoaWxkcmVuLCBjaGlsZCA9PiBjaGlsZC5oYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMuaGFzQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5ncm91cChgc2NyZWVuIGNvbmRpdGlvbmFsIGF0dHJpYnV0ZXMgZXZhbHVhdGlvbmApLmVuZFdoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdmFyIGxhc3REYXRhV2lkdGhBdHRyaWJ1dGVWYWx1ZSA9IHRoaXMud2lkdGg7XG4gICAgICAgICAgICB2YXIgbGFzdERhdGFIZWlnaHRBdHRyaWJ1dGVWYWx1ZSA9IHRoaXMuaGVpZ2h0O1xuXG4gICAgICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgU2NyZWVuT3B0aW9ucy5jYWxsKHRoaXMsIHRoaXMuaW5zdGFuY2VFbGVtZW50LCB0aGlzLl9zY3JlZW5TZXQuc2NyZWVuT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIEFzc2lnbiB0aGUgJ2RhdGEtJyBhdHRyaWJ1dGVzIG9mIHRoZSBzY3JlZW4uXG4gICAgICAgICAgICAvLyBOb3RlOiB0aGUgc2NyZWVuJ3MgJ2RhdGEtJyBhdHRyaWJ1dGVzIHdpbGwgb3ZlcnJpZGUgQ1NTIHByb3BlcnRpZXMgYW5kIHdpbGwgdGFrZSBwcmVjZWRlbmNlXG4gICAgICAgICAgICAvLyBpbiBjYXNlIHRoZSBjdXJyZW50IGRhdGEtd2lkdGggaXMgJ2F1dG8nLCBubyB3aWR0aCB2YWx1ZSB3aWxsIGJlIHNldCB0byB0aGUgJ1NjcmVlbicgZWxlbWVudC5cbiAgICAgICAgICAgIHZhciBjdXJyZW50RGF0YVdpZHRoQXR0cmlidXRlVmFsdWUgPSB0aGlzLndpZHRoO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRhSGVpZ2h0QXR0cmlidXRlVmFsdWUgPSB0aGlzLmhlaWdodDtcblxuICAgICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBsaW5lIGlzIGZvciBhIHNjZW5hcmlvIHRoYXQgY29uZGl0aW9uYWwgYXR0cmlidXRlcyB3ZXJlIGV2YWx1YXRlZCBvbiB0aGUgc2NyZWVuIGxldmVsXG4gICAgICAgICAgICAvLyBhbmQgdGhlcmUncyBhIGNoYW5jZSB0aGF0IHRoZSBtb2RhbCBhbHNvIG5lZWRzIHRvIGJlIHJlc2l6ZWQgYWNjb3JkaW5nbHlcbiAgICAgICAgICAgIHZhciBzY3JlZW5EaW1lbnNpb25zOiBJRWxlbWVudFNpemUgPSB0aGlzLmdldFNjcmVlbkRpbWVuc2lvbnNXaXRoVW5pdFR5cGUoKTtcblxuICAgICAgICAgICAgaWYgKGxhc3REYXRhV2lkdGhBdHRyaWJ1dGVWYWx1ZSAhPSBjdXJyZW50RGF0YVdpZHRoQXR0cmlidXRlVmFsdWUgfHwgbGFzdERhdGFIZWlnaHRBdHRyaWJ1dGVWYWx1ZSAhPSBjdXJyZW50RGF0YUhlaWdodEF0dHJpYnV0ZVZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnJlc2l6ZU1vZGFsKHsgd2lkdGg6IHNjcmVlbkRpbWVuc2lvbnMud2lkdGgsIGhlaWdodDogc2NyZWVuRGltZW5zaW9ucy5oZWlnaHQgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjYXB0aW9uV2lkdGggPSB0aGlzLmluc3RhbmNlRWxlbWVudCA/IHRoaXMuaW5zdGFuY2VFbGVtZW50Lm9mZnNldFdpZHRoICsgJ3B4JyA6ICcnO1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnNldENhcHRpb24odGhpcy5jYXB0aW9uLCBjYXB0aW9uV2lkdGgpO1xuXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9mb3JtcywgZm9ybSA9PiB7XG4gICAgICAgICAgICAgICAgZm9ybS5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoUHJvcCh0aGlzLl9lcnJvckRpc3BsYXlFbGVtZW50cywgYm91bmRlZEVsZW1lbnRzID0+IHtcbiAgICAgICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChib3VuZGVkRWxlbWVudHMsIGJvdW5kZWRFbGVtZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYm91bmRlZEVsZW1lbnQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9vdGhlcnMsIG90aCA9PiB7XG4gICAgICAgICAgICAgICAgb3RoLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fd2lkZ2V0cywgd2lkZ2V0ID0+IHtcbiAgICAgICAgICAgICAgICB3aWRnZXQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgcmVzZXR0aW5nIGNvbmRpdGlvbmFsIHZhbHVlc2ApO1xuXG4gICAgICAgIHN1cGVyLnJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XG5cbiAgICAgICAgU2NyZWVuLnV0aWxzLkZvckVhY2godGhpcy5fZm9ybXMsIGZvcm0gPT4ge1xuICAgICAgICAgICAgZm9ybS5yZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaFByb3AodGhpcy5fZXJyb3JEaXNwbGF5RWxlbWVudHMsIGJvdW5kZWRFbGVtZW50cyA9PiB7XG4gICAgICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaChib3VuZGVkRWxlbWVudHMsIGJvdW5kZWRFbGVtZW50ID0+IHtcbiAgICAgICAgICAgICAgICBib3VuZGVkRWxlbWVudC5yZXNldExhc3RDb25kaXRpb25hbFZhbHVlcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBTY3JlZW4udXRpbHMuRm9yRWFjaCh0aGlzLl9vdGhlcnMsIG90aCA9PiB7XG4gICAgICAgICAgICBvdGgucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFNjcmVlbi51dGlscy5Gb3JFYWNoKHRoaXMuX3dpZGdldHMsIHdpZGdldCA9PiB7XG4gICAgICAgICAgICB3aWRnZXQucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEJlZm9yZUxvYWREYXRhKGV2ZW50RGF0YTogYW55KSB7XG4gICAgICAgIHRoaXMuX2Zvcm1zLmZvckVhY2goZm9ybSA9PiBmb3JtLnNldEJlZm9yZUxvYWREYXRhKGV2ZW50RGF0YSkpXG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldENhcHRjaGFEYXRhKCkge1xuICAgICAgICBsZXQgY2FwdGNoYSA9IHRoaXMuX2NhcHRjaGFzLmZpbHRlcihjYXB0Y2hhID0+IEJvb2xlYW4oY2FwdGNoYSkgJiYgIWNhcHRjaGEuaXNIaWRkZW4oKSlbMF07XG4gICAgICAgIGlmKCFjYXB0Y2hhKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRva2VuOiBhd2FpdCBjYXB0Y2hhLmdldFRva2VuKCksXG4gICAgICAgICAgICB0eXBlOiBjYXB0Y2hhLmdldFR5cGUoKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0U2NyZWVuRGltZW5zaW9uc1dpdGhVbml0VHlwZSgpOiBJRWxlbWVudFNpemUge1xuICAgICAgICB2YXIgaXNMZWdhY3kgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0UGx1Z2luU3R5bGUoKSA9PSBQbHVnaW5TdHlsZS5sZWdhY3k7XG5cbiAgICAgICAgdmFyIHdpZHRoVmFsOiBzdHJpbmc7XG4gICAgICAgIGlmICh0aGlzLndpZHRoKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGhVbml0czogc3RyaW5nO1xuICAgICAgICAgICAgd2lkdGhVbml0cyA9IFNjcmVlbi51dGlscy5nZXRVbml0TWVhc3VyZW1lbnRUeXBlKHRoaXMud2lkdGgpO1xuICAgICAgICAgICAgaWYgKHdpZHRoVW5pdHMgIT09IFVuaXRNZWFzdXJlbWVudFR5cGUuYXV0byAmJiAoIWlzTGVnYWN5IHx8IHdpZHRoVW5pdHMgIT0gVW5pdE1lYXN1cmVtZW50VHlwZS5wZXJjZW50YWdlKSkge1xuICAgICAgICAgICAgICAgIHdpZHRoVmFsID0gcGFyc2VGbG9hdCh0aGlzLndpZHRoKSArIHdpZHRoVW5pdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGVpZ2h0VmFsOiBzdHJpbmc7XG4gICAgICAgIGlmICh0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgdmFyIGhlaWdodFVuaXRzOiBzdHJpbmc7XG4gICAgICAgICAgICBoZWlnaHRVbml0cyA9IFNjcmVlbi51dGlscy5nZXRVbml0TWVhc3VyZW1lbnRUeXBlKHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChoZWlnaHRVbml0cyAhPT0gVW5pdE1lYXN1cmVtZW50VHlwZS5hdXRvICYmICghaXNMZWdhY3kgfHwgaGVpZ2h0VW5pdHMgIT0gVW5pdE1lYXN1cmVtZW50VHlwZS5wZXJjZW50YWdlKSkge1xuICAgICAgICAgICAgICAgIGhlaWdodFZhbCA9IHBhcnNlRmxvYXQodGhpcy5oZWlnaHQpICsgaGVpZ2h0VW5pdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgd2lkdGg6IHdpZHRoVmFsLCBoZWlnaHQ6IGhlaWdodFZhbCB9O1xuICAgIH1cbn1cbiIsImV4cG9ydCB2YXIgU2NyZWVuX0NPTlNUUyA9IHtcbiAgICBnaWd5YUNsYXNzOiAnZ2lneWEtc2NyZWVuJyxcbiAgICBjb25kaXRpb25hbEF0dHJpYnV0ZVByZWZpeDogJ2dpZ3lhLWNvbmRpdGlvbmFsJyxcbiAgICBleHByZXNzaW9uQXR0cmlidXRlUHJlZml4OiAnZ2lneWEtZXhwcmVzc2lvbicsXG4gICAgY3NzQ2xhc3M6ICdkYXRhLWNzcy1jbGFzcycsXG4gICAgZGF0YVZhcmlhbnRQZXJjZW50YWdlOiAnZGF0YS12YXJpYW50LXBlcmNlbnRhZ2UnLFxuICAgIGRhdGFWYXJpYW50R3JvdXA6ICdkYXRhLXZhcmlhbnQtZ3JvdXAnLFxuICAgIGRhdGFWYXJpYW50T3JpZ2luYWxTY3JlZW46ICdkYXRhLXZhcmlhbnQtb3JpZ2luYWwtc2NyZWVuJyxcbiAgICBkYXRhVmFyaWFudFRlc3RJZDogJ2RhdGEtdmFyaWFudC10ZXN0LWlkJyxcbn07XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNjcmVlbk9wdGlvbnMge1xuICAgIGFjY291bnRzTGlua2VkU2NyZWVuPzogc3RyaW5nO1xuICAgIHBlbmRpbmdSZWdpc3RyYXRpb25TY3JlZW4/OiBzdHJpbmc7XG4gICAgZXhpc3RpbmdMb2dpbklkZW50aWZpZXJTY3JlZW4/OiBzdHJpbmc7XG4gICAgcGVuZGluZ1ZlcmlmaWNhdGlvblNjcmVlbj86IHN0cmluZztcbiAgICBwZW5kaW5nQ29kZVZlcmlmaWNhdGlvblNjcmVlbj86IHN0cmluZztcbiAgICBtaXNzaW5nTG9naW5JZFNjcmVlbj86IHN0cmluZztcbiAgICBwZW5kaW5nUGFzc3dvcmRDaGFuZ2VTY3JlZW4/OiBzdHJpbmc7XG4gICAgcGVuZGluZ1JlQXV0aGVudGljYXRpb25TY3JlZW4/OiBzdHJpbmc7XG4gICAgcGVuZGluZ1RmYVJlZ2lzdHJhdGlvblNjcmVlbj86IHN0cmluZztcbiAgICBwZW5kaW5nVGZhVmVyaWZpY2F0aW9uU2NyZWVuPzogc3RyaW5nO1xuXG4gICAgd2lkdGg/OiBzdHJpbmc7XG4gICAgaGVpZ2h0Pzogc3RyaW5nO1xuICAgIGNhcHRpb24/OiBzdHJpbmc7XG59XG5leHBvcnQgdmFyIFNjcmVlbk9wdGlvbnNfQ09OU1RTID0ge1xuICAgIGFjY291bnRzTGlua2VkU2NyZWVuOiAnZGF0YS1vbi1hY2NvdW50cy1saW5rZWQtc2NyZWVuJyxcbiAgICBwZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuOiAnZGF0YS1vbi1wZW5kaW5nLXRmYS1yZWdpc3RyYXRpb24tc2NyZWVuJyxcbiAgICBwZW5kaW5nVGZhVmVyaWZpY2F0aW9uU2NyZWVuOiAnZGF0YS1vbi1wZW5kaW5nLXRmYS12ZXJpZmljYXRpb24tc2NyZWVuJyxcbiAgICBwZW5kaW5nUmVnaXN0cmF0aW9uU2NyZWVuOiAnZGF0YS1vbi1wZW5kaW5nLXJlZ2lzdHJhdGlvbi1zY3JlZW4nLFxuICAgIGV4aXN0aW5nTG9naW5JZGVudGlmaWVyU2NyZWVuOiAnZGF0YS1vbi1leGlzdGluZy1sb2dpbi1pZGVudGlmaWVyLXNjcmVlbicsXG4gICAgcGVuZGluZ1ZlcmlmaWNhdGlvblNjcmVlbjogJ2RhdGEtb24tcGVuZGluZy12ZXJpZmljYXRpb24tc2NyZWVuJyxcbiAgICBwZW5kaW5nQ29kZVZlcmlmaWNhdGlvblNjcmVlbjogJ2RhdGEtb24tcGVuZGluZy1lbWFpbC12ZXJpZmljYXRpb24tY29kZScsXG4gICAgbWlzc2luZ0xvZ2luSWRTY3JlZW46ICdkYXRhLW9uLW1pc3NpbmctbG9naW5pZC1zY3JlZW4nLFxuICAgIHBlbmRpbmdQYXNzd29yZENoYW5nZVNjcmVlbjogJ2RhdGEtb24tcGVuZGluZy1wYXNzd29yZC1jaGFuZ2Utc2NyZWVuJyxcbiAgICBwZW5kaW5nUmVBdXRoZW50aWNhdGlvblNjcmVlbjogJ2RhdGEtb24tcGVuZGluZy1yZWNlbnQtbG9naW4tc2NyZWVuJyxcblxuICAgIHdpZHRoOiAnZGF0YS13aWR0aCcsXG4gICAgaGVpZ2h0OiAnZGF0YS1oZWlnaHQnLFxuICAgIGNhcHRpb246ICdkYXRhLWNhcHRpb24nLFxufTtcbkRlZXBGcmVlemUoU2NyZWVuT3B0aW9uc19DT05TVFMpO1xuZXhwb3J0IGNsYXNzIFNjcmVlbk9wdGlvbnMgaW1wbGVtZW50cyBJU2NyZWVuT3B0aW9ucyB7XG4gICAgcHVibGljIGFjY291bnRzTGlua2VkU2NyZWVuOiBzdHJpbmc7XG4gICAgcHVibGljIHBlbmRpbmdUZmFSZWdpc3RyYXRpb25TY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgcGVuZGluZ1RmYVZlcmlmaWNhdGlvblNjcmVlbjogc3RyaW5nO1xuICAgIHB1YmxpYyBwZW5kaW5nUmVnaXN0cmF0aW9uU2NyZWVuOiBzdHJpbmc7XG4gICAgcHVibGljIGV4aXN0aW5nTG9naW5JZGVudGlmaWVyU2NyZWVuOiBzdHJpbmc7XG4gICAgcHVibGljIHBlbmRpbmdWZXJpZmljYXRpb25TY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgcGVuZGluZ0NvZGVWZXJpZmljYXRpb25TY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgbWlzc2luZ0xvZ2luSWRTY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgcGVuZGluZ1Bhc3N3b3JkQ2hhbmdlU2NyZWVuOiBzdHJpbmc7XG4gICAgcHVibGljIHBlbmRpbmdSZUF1dGhlbnRpY2F0aW9uU2NyZWVuOiBzdHJpbmc7XG5cbiAgICBwdWJsaWMgd2lkdGg6IHN0cmluZztcbiAgICBwdWJsaWMgaGVpZ2h0OiBzdHJpbmc7XG4gICAgcHVibGljIGNhcHRpb246IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgcGFyZW50PzogSVNjcmVlbk9wdGlvbnMpIHtcbiAgICAgICAgcGFyZW50ID0gcGFyZW50IHx8IHt9O1xuXG4gICAgICAgIHRoaXMuYWNjb3VudHNMaW5rZWRTY3JlZW4gPSBlbC5nZXRBdHRyaWJ1dGUoU2NyZWVuT3B0aW9uc19DT05TVFMuYWNjb3VudHNMaW5rZWRTY3JlZW4pIHx8IHBhcmVudC5hY2NvdW50c0xpbmtlZFNjcmVlbjtcbiAgICAgICAgdGhpcy5wZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLnBlbmRpbmdUZmFSZWdpc3RyYXRpb25TY3JlZW4pIHx8IHBhcmVudC5wZW5kaW5nVGZhUmVnaXN0cmF0aW9uU2NyZWVuO1xuICAgICAgICB0aGlzLnBlbmRpbmdUZmFWZXJpZmljYXRpb25TY3JlZW4gPSBlbC5nZXRBdHRyaWJ1dGUoU2NyZWVuT3B0aW9uc19DT05TVFMucGVuZGluZ1RmYVZlcmlmaWNhdGlvblNjcmVlbikgfHwgcGFyZW50LnBlbmRpbmdUZmFWZXJpZmljYXRpb25TY3JlZW47XG4gICAgICAgIHRoaXMucGVuZGluZ1JlZ2lzdHJhdGlvblNjcmVlbiA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nUmVnaXN0cmF0aW9uU2NyZWVuKSB8fCBwYXJlbnQucGVuZGluZ1JlZ2lzdHJhdGlvblNjcmVlbjtcbiAgICAgICAgdGhpcy5leGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbiA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5leGlzdGluZ0xvZ2luSWRlbnRpZmllclNjcmVlbikgfHwgcGFyZW50LmV4aXN0aW5nTG9naW5JZGVudGlmaWVyU2NyZWVuO1xuICAgICAgICB0aGlzLnBlbmRpbmdWZXJpZmljYXRpb25TY3JlZW4gPSBlbC5nZXRBdHRyaWJ1dGUoU2NyZWVuT3B0aW9uc19DT05TVFMucGVuZGluZ1ZlcmlmaWNhdGlvblNjcmVlbikgfHwgcGFyZW50LnBlbmRpbmdWZXJpZmljYXRpb25TY3JlZW47XG4gICAgICAgIHRoaXMucGVuZGluZ0NvZGVWZXJpZmljYXRpb25TY3JlZW4gPSBlbC5nZXRBdHRyaWJ1dGUoU2NyZWVuT3B0aW9uc19DT05TVFMucGVuZGluZ0NvZGVWZXJpZmljYXRpb25TY3JlZW4pIHx8IHBhcmVudC5wZW5kaW5nQ29kZVZlcmlmaWNhdGlvblNjcmVlbjtcbiAgICAgICAgdGhpcy5taXNzaW5nTG9naW5JZFNjcmVlbiA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5taXNzaW5nTG9naW5JZFNjcmVlbikgfHwgcGFyZW50Lm1pc3NpbmdMb2dpbklkU2NyZWVuO1xuICAgICAgICB0aGlzLnBlbmRpbmdQYXNzd29yZENoYW5nZVNjcmVlbiA9IGVsLmdldEF0dHJpYnV0ZShTY3JlZW5PcHRpb25zX0NPTlNUUy5wZW5kaW5nUGFzc3dvcmRDaGFuZ2VTY3JlZW4pIHx8IHBhcmVudC5wZW5kaW5nUGFzc3dvcmRDaGFuZ2VTY3JlZW47XG4gICAgICAgIHRoaXMucGVuZGluZ1JlQXV0aGVudGljYXRpb25TY3JlZW4gPSBlbC5nZXRBdHRyaWJ1dGUoU2NyZWVuT3B0aW9uc19DT05TVFMucGVuZGluZ1JlQXV0aGVudGljYXRpb25TY3JlZW4pIHx8IHBhcmVudC5wZW5kaW5nUmVBdXRoZW50aWNhdGlvblNjcmVlbjtcblxuICAgICAgICB0aGlzLndpZHRoID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLndpZHRoKSB8fCBwYXJlbnQud2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLmhlaWdodCkgfHwgcGFyZW50LmhlaWdodDtcbiAgICAgICAgdGhpcy5jYXB0aW9uID0gZWwuZ2V0QXR0cmlidXRlKFNjcmVlbk9wdGlvbnNfQ09OU1RTLmNhcHRpb24pIHx8IHBhcmVudC5jYXB0aW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IElTY3JlZW5TZXRQYXJhbXMsIElFeHRyYUV2ZW50RGF0YSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcbmltcG9ydCB7IElGb3JtRGF0YSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgSVByb3ZpZGVyU2Vzc2lvbkluZm8gfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVByb3ZpZGVyU2Vzc2lvbkluZm8nO1xuaW1wb3J0IHtJVGZhUGhvbmVJdGVtLCBJVGZhUHJvdmlkZXJJbmZvfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL3R5cGVzJztcblxuZXhwb3J0IGludGVyZmFjZSBJT3RwRGF0YSB7XG4gICAgdlRva2VuPzogc3RyaW5nO1xuICAgIGFjY2Vzc1Rva2VuPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElBdXRoTWV0aG9kSWRlbnRpZmllckRhdGEge1xuICAgIGVtYWlsPzogc3RyaW5nO1xuICAgIHBob25lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElQdXNoRGF0YSB7XG4gICAgdlRva2VuPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElBdXRoTWV0aG9kRGF0YSB7XG4gICAgaWRlbnRpZmllcnM/OiBJQXV0aE1ldGhvZElkZW50aWZpZXJEYXRhO1xuICAgIGN1cnJlbnRNZXRob2Q/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbnNlbnRTdGF0ZW1lbnRzIHtcbiAgICBbbmFtZTogc3RyaW5nXToge1xuICAgICAgICB1cmw6IHN0cmluZztcbiAgICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBhc3NrZXkge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgYnJvd3Nlcj86IHN0cmluZztcbiAgICBjaXR5Pzogc3RyaW5nO1xuICAgIGNvdW50cnk/OiBzdHJpbmc7XG4gICAgc3RhdGU/OiBzdHJpbmc7XG4gICAgaXBBZGRyZXNzPzogc3RyaW5nO1xuICAgIGlzTW9iaWxlPzogYm9vbGVhbjtcbiAgICBsYXN0TG9naW4/OiBzdHJpbmc7XG4gICAgcGxhdGZvcm0/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRmYVByb3ZpZGVycyB7XG4gICAgcGhvbmVzPzogSVRmYVBob25lSXRlbVtdO1xuICAgIGVtYWlscz86IGFueVtdO1xuICAgIHRvdHBEZXZpY2VzPzogYW55W107XG4gICAgYWN0aXZlUHJvdmlkZXJzOiBJVGZhUHJvdmlkZXJJbmZvW107XG4gICAgYXNzZXJ0aW9uPzogc3RyaW5nO1xuICAgIHBodlRva2VuPzogc3RyaW5nO1xuICAgIGhpZ2hlc3RSaXNrUHJvdmlkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBTY3JlZW5TZXREYXRhIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgcGFyYW1zOiBJU2NyZWVuU2V0UGFyYW1zKSB7XG4gICAgICAgIHRoaXMucmVnVG9rZW4gPSBwYXJhbXMucmVnVG9rZW47XG4gICAgICAgIHRoaXMuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgPSBwYXJhbXMuZmluYWxpemVSZWdpc3RyYXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGFwaURhdGE6IGFueSA9IHt9OyAvLyBFYWNoIGZvcm0gY2FuIGhhdmUgaXRzIG93biBzZXJ2ZXIgQVBJIGRhdGFcbiAgICBwdWJsaWMgbGFzdFN1Ym1pdHRlZEZvcm1JRDogc3RyaW5nO1xuICAgIHB1YmxpYyBsYXN0U3VibWl0dGVkRm9ybVJlc3BvbnNlOiBhbnkgPSB7fTtcbiAgICBwdWJsaWMgZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwdWJsaWMgbmVlZGVkRGF0YTogSUZvcm1EYXRhID0ge307XG4gICAgcHVibGljIGV4dHJhRXZlbnREYXRhOiBJRXh0cmFFdmVudERhdGEgPSB7fTtcbiAgICBwdWJsaWMgcmVnVG9rZW46IHN0cmluZztcbiAgICBwdWJsaWMgYVRva2VuOiBzdHJpbmc7XG4gICAgcHVibGljIG90cERhdGE6IElPdHBEYXRhICA9IHt9O1xuICAgIHB1YmxpYyBwdXNoRGF0YTogSVB1c2hEYXRhICA9IHt9O1xuICAgIHB1YmxpYyBjb25zZW50U3RhdGVtZW50czogSUNvbnNlbnRTdGF0ZW1lbnRzO1xuICAgIHB1YmxpYyBhdXRoTWV0aG9kRGF0YTogSUF1dGhNZXRob2REYXRhID0ge1xuICAgICAgICBpZGVudGlmaWVyczoge31cbiAgICB9O1xuICAgIHB1YmxpYyBzaG91bGRDb25uZWN0QWNjb3VudHM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwdWJsaWMgcHJvdmlkZXJTZXNzaW9uSW5mbz86IElQcm92aWRlclNlc3Npb25JbmZvO1xuICAgIHB1YmxpYyBwcm92aWRlclNlc3Npb25JbmZvQWZ0ZXJSZWRpcmVjdD86IElQcm92aWRlclNlc3Npb25JbmZvO1xuICAgIHB1YmxpYyBwYXNza2V5czogSVBhc3NrZXlbXTtcblxuICAgIHB1YmxpYyB0ZmFQcm92aWRlcnM6IElUZmFQcm92aWRlcnMgPSB7XG4gICAgICAgIGFjdGl2ZVByb3ZpZGVyczogW11cbiAgICB9O1xufVxuIiwiaW1wb3J0IHtcbiAgICBEZWVwRnJlZXplLFxuICAgIGZpcnN0UGFydCxcbiAgICBGb3JFYWNoLFxuICAgIEZvckVhY2hQcm9wLFxuICAgIGdldFVuaXRNZWFzdXJlbWVudFR5cGUsXG4gICAgSUVUZW1wbGF0ZUVsZW1lbnRQb2x5ZmlsbCxcbiAgICBJTWFwLFxuICAgIFNvbWUsXG4gICAgVW5pdE1lYXN1cmVtZW50VHlwZSxcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQge0lQbHVnaW5UZW1wbGF0ZXN9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUGx1Z2luVGVtcGxhdGVzJztcbmltcG9ydCB7SVBsdWdpbkNTU30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9pbnRlcmZhY2VzL0lQbHVnaW5DU1MnO1xuaW1wb3J0IHtJUGx1Z2luUGFyYW1zfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpblBhcmFtcyc7XG5pbXBvcnQge1NjcmVlblNldERhdGF9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0RGF0YSc7XG5pbXBvcnQge0lQcm92aWRlclNlc3Npb25JbmZvfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVByb3ZpZGVyU2Vzc2lvbkluZm8nO1xuaW1wb3J0IHtDbG9zZVJlYXNvbnN9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvQ2xvc2VSZWFzb25zJztcbmltcG9ydCB7U2NyZWVufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5pbXBvcnQge0Jhc2VGb3JtLCBJRm9ybURhdGEsIElOZWVkZWREYXRhTWV0aG9kQ29uZmlnfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcbmltcG9ydCB7XG4gICAgSUVycm9yQXR0cmlidXRlSW5mbyxcbiAgICBJRXJyb3JJbmZvLFxuICAgIFBlbmRpbmdFcnJvckF0dHJpYnV0ZXNcbn0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvcnMnO1xuaW1wb3J0IHtJVGVtcGxhdGVFbGVtZW50UGFyZW50LCBUZW1wbGF0ZUVsZW1lbnR9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvVGVtcGxhdGVFbGVtZW50JztcbmltcG9ydCB7SUVsZW1lbnRBY3R1YWxTaXplLCBJRWxlbWVudFNpemUsIElWaWV3cG9ydFNpemV9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9JbnRlcmZhY2VzJztcbmltcG9ydCB7U2NyZWVuT3B0aW9uc30gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5PcHRpb25zJztcbmltcG9ydCB7SVBsdWdpbkNvbmZpZ30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9pbnRlcmZhY2VzL0lQbHVnaW5Db25maWcnO1xuaW1wb3J0IHtEZXZpY2VUeXBlc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0Jhc2VPYmplY3QvSUJhc2VPYmplY3RDb25maWcnO1xuaW1wb3J0IHtQbHVnaW5TdHlsZX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9QbHVnaW5TdHlsZXMnO1xuaW1wb3J0IHtcbiAgICBJQWZ0ZXJMb2FkRXZlbnQsXG4gICAgSUFmdGVyU3VibWl0RXZlbnQsXG4gICAgSUJhc2VGb3JtRXZlbnQsXG4gICAgSUJlZm9yZUxvYWRFdmVudCxcbiAgICBJSGlkZUV2ZW50LFxufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0V2ZW50cy5kJztcbmltcG9ydCB7TmV3c2xldHRlclNpZ251cEZvcm19IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvTmV3c2xldHRlclNpZ251cEZvcm0nO1xuaW1wb3J0IHtTY3JlZW5fQ09OU1RTfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbkNvbnN0cyc7XG5pbXBvcnQge0VkaXRhYmxlVGZhUHJvdmlkZXJzVHlwZXN9IGZyb20gJ3NyYy9hY2NvdW50cy9jb25zdGFudHMnO1xuaW1wb3J0IHtJSW5qZWN0aW9uSW5mb30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0FQSS9VaUFwaSc7XG5pbXBvcnQge0dTRXJyb3JEZXRhaWxzLCBHU0Vycm9yc30gZnJvbSAnLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHtUcmFuc2xhdGlvbnNDb250YWluZXJ9IGZyb20gXCIuLi8uLi8uLi9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvVXRpbHMvbGFuZ3VhZ2VzL2xhbmd1YWdlXCI7XG5pbXBvcnQge0NvbmZsaWN0SGFuZGxpbmcsIExvZ2luTW9kZXN9IGZyb20gJy4vTG9naW5Nb2Rlcyc7XG5pbXBvcnQge0lGb3JtQ29udGV4dH0gZnJvbSBcIi4vSUZvcm1Db250ZXh0XCI7XG5pbXBvcnQgKiBhcyBHcm91cFZhcmlhbnRQcm92aWRlciBmcm9tIFwiLi9Hcm91cFZhcmlhbnRQcm92aWRlclwiO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSAnLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvU2VydmljZXMvRmxhZ1NlcnZpY2UnO1xuaW1wb3J0IHtjb25uZWN0QWNjb3VudHMsIGdldFByb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50c0FmdGVyUmVkaXJlY3QsIGhhc1Byb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50c0luUGFyYW1zQWZ0ZXJSZWRpcmVjdH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9VdGlscy9nZW5lcmFsL2xpbmtBY2NvdW50c0hlbHBlcic7XG5pbXBvcnQgKiBhcyB2YWxpZGF0aW9uVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3ZhbGlkYXRpb24nO1xuXG5leHBvcnQgdHlwZSBTY3JlZW5TZXQgPSB7XG4gICAgaHRtbDogc3RyaW5nO1xuICAgIGNzczogc3RyaW5nO1xuICAgIGphdmFzY3JpcHQ6IHN0cmluZztcbiAgICB0cmFuc2xhdGlvbnM6IFRyYW5zbGF0aW9uc0NvbnRhaW5lclxufTtcblxudmFyIFNjcmVlblNldFBsdWdpbl9DT05TVFMgPSB7XG4gICAgbmFtZXNwYWNlOiAnYWNjb3VudHMnLFxuICAgIHBsdWdpbk5hbWU6ICdzY3JlZW5TZXQnLFxuXG4gICAgc2hvd1NjcmVlblNldE5hbWU6ICdzaG93U2NyZWVuU2V0JyxcbiAgICBzd2l0Y2hTY3JlZW5OYW1lOiAnc3dpdGNoU2NyZWVuJyxcbiAgICBoaWRlU2NyZWVuU2V0TmFtZTogJ2hpZGVTY3JlZW5TZXQnLFxuICAgIHN0YXlPblNjcmVlbjogJ19zdGF5Jyxcbn07XG5EZWVwRnJlZXplKFNjcmVlblNldFBsdWdpbl9DT05TVFMpO1xuXG5leHBvcnQgaW50ZXJmYWNlIElTY3JlZW5TZXRUZW1wbGF0ZXMgZXh0ZW5kcyBJUGx1Z2luVGVtcGxhdGVzIHtcbiAgICBjYXB0Y2hhOiBzdHJpbmc7XG4gICAgaW52aXNpYmxlUmVjYXB0Y2hhOiBzdHJpbmc7XG4gICAgaW5saW5lZFBhc3N3b3JkU3RyZW5ndGg6IHN0cmluZztcbiAgICBwYXNzd29yZFN0cmVuZ3RoX21pbmltdW1SZXF1aXJlbWVudHM6IHN0cmluZztcbiAgICBwYXNzd29yZFN0cmVuZ3RoOiBzdHJpbmc7XG4gICAgcGFzc3dvcmRTdHJlbmd0aF9zdHJlbmd0aE1ldGVyOiBzdHJpbmc7XG4gICAgcGhvdG9VcGxvYWRfZm9ybTogc3RyaW5nO1xuICAgIHBob3RvVXBsb2FkX3VpOiBzdHJpbmc7XG4gICAgc2NyZWVuU2V0OiBzdHJpbmc7XG4gICAgc2NyZWVuU2V0X2RpYWxvZzogc3RyaW5nO1xuICAgIGNvbnNlbnQ6IHN0cmluZztcbiAgICBjb21tdW5pY2F0aW9uQ2hlY2tib3g6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU2NyZWVuU2V0Q1NTIGV4dGVuZHMgSVBsdWdpbkNTUyB7XG4gICAgZGVmYXVsdENTUzogc3RyaW5nO1xuICAgIGllOFBhdGNoOiBzdHJpbmc7XG4gICAgaWU5UGF0Y2g6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQmFzZVNjcmVlblBhcmFtcyBleHRlbmRzIElQbHVnaW5QYXJhbXMge1xuICAgIHNjcmVlblNldDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTd2l0Y2hTY3JlZW5QYXJhbXMgZXh0ZW5kcyBJQmFzZVNjcmVlblBhcmFtcyB7XG4gICAgc2NyZWVuOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUhpZGVTY3JlZW5TZXRQYXJhbXMgZXh0ZW5kcyBJQmFzZVNjcmVlblBhcmFtcyB7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNjcmVlblNldFBhcmFtcyBleHRlbmRzIElCYXNlU2NyZWVuUGFyYW1zIHtcbiAgICBjb250ZXh0PzogYW55O1xuICAgIGNpZD86IHN0cmluZztcbiAgICBvbkJlZm9yZVN1Ym1pdD86IChlKSA9PiB2b2lkO1xuICAgIG9uQWZ0ZXJTdWJtaXQ/OiAoZSkgPT4gdm9pZDtcbiAgICBvblN1Ym1pdD86IChlKSA9PiB2b2lkO1xuICAgIG9uQWZ0ZXJWYWxpZGF0aW9uPzogKGUpID0+IHZvaWQ7XG4gICAgb25CZWZvcmVWYWxpZGF0aW9uPzogKGUpID0+IHZvaWQ7XG4gICAgb25CZWZvcmVTY3JlZW5Mb2FkPzogKGUpID0+IHZvaWQ7XG4gICAgb25BZnRlclNjcmVlbkxvYWQ/OiAoZSkgPT4gdm9pZDtcbiAgICBvbkZpZWxkQ2hhbmdlZD86IChlKSA9PiB2b2lkO1xuICAgIG9uSGlkZT86IChlKSA9PiB2b2lkO1xuICAgIGFwaURvbWFpbj86IHN0cmluZztcbiAgICByZWdTb3VyY2U/OiBzdHJpbmc7XG4gICAgcmVnVG9rZW4/OiBzdHJpbmc7XG4gICAgYVRva2VuPzogc3RyaW5nO1xuICAgIGZpbmFsaXplUmVnaXN0cmF0aW9uPzogYm9vbGVhbjtcbiAgICBwYXNzd29yZFJlc2V0VG9rZW4/OiBzdHJpbmc7XG4gICAgbW9iaWxlU2NyZWVuU2V0Pzogc3RyaW5nO1xuICAgIHN0YXJ0U2NyZWVuPzogc3RyaW5nO1xuICAgIGluaXRpYWxSZXNwb25zZT86IElGb3JtUmVzcG9uc2U7XG4gICAgaW5pdGlhbE1ldGhvZD86IHN0cmluZztcbiAgICByZW1lbWJlcj86IGJvb2xlYW47XG4gICAgYWxsb3dBY2NvdW50c0xpbmtpbmc/OiBib29sZWFuO1xuICAgIHJlbWVtYmVyU2Vzc2lvbkV4cGlyYXRpb24/OiBhbnk7IC8vIFRPRE8gZmluZCB0eXBlIC0gcG9zc2libHkgYm9vbGVhblxuICAgIHNlc3Npb25FeHBpcmF0aW9uPzogYW55OyAvLyBUT0RPIGZpbmQgdHlwZVxuICAgIGlzQ2hpbGQ/OiBib29sZWFuO1xuICAgIHBhcmVudERhdGE/OiBTY3JlZW5TZXREYXRhO1xuICAgIGNzc1ByZWZpeD86IHN0cmluZztcbiAgICBpZ25vcmVBcGlRdWV1ZT86IGJvb2xlYW47XG4gICAgcGFyZW50VHJhbnNsYXRpb25zPzogb2JqZWN0O1xuICAgIGNvbmZsaWN0SGFuZGxpbmc/OiBDb25mbGljdEhhbmRsaW5nO1xuICAgIHByb3ZpZGVyU2Vzc2lvbkluZm8/OiBJUHJvdmlkZXJTZXNzaW9uSW5mbztcbn1cblxuRGVlcEZyZWV6ZShDbG9zZVJlYXNvbnMpO1xuZXhwb3J0IHZhciBFbmRGbG93U2NyZWVuczogSU1hcDxDbG9zZVJlYXNvbnM+ID0ge1xuICAgIF9za2lwOiBDbG9zZVJlYXNvbnMuc2tpcCxcbiAgICBfZmluaXNoOiBDbG9zZVJlYXNvbnMuZmluaXNoZWQsXG4gICAgX2NhbmNlbDogQ2xvc2VSZWFzb25zLmNhbmNlbCxcbn07XG5EZWVwRnJlZXplKEVuZEZsb3dTY3JlZW5zKTtcblxuZXhwb3J0IGludGVyZmFjZSBJRm9ybSB7XG4gICAgX3NjcmVlblNldDogU2NyZWVuU2V0UGx1Z2luO1xuICAgIF9zY3JlZW46IFNjcmVlbjtcbiAgICBJRDogc3RyaW5nO1xuICAgIGJpbmRJRDogc3RyaW5nO1xuICAgIGdldEVycm9yRGlzcGxheUZvcm0/OiAoKSA9PiBCYXNlRm9ybTtcbiAgICBzdWNjZXNzU2NyZWVuPzogc3RyaW5nO1xuICAgIGF1dG9Ta2lwU2NyZWVuPzogc3RyaW5nO1xuICAgIHNjcmVlblNldFNraXBwZWRTY3JlZW4/OiBzdHJpbmc7XG4gICAgb25Ta2lwcGVkPzogKHJlc3BvbnNlPzogSUZvcm1SZXNwb25zZSkgPT4gdm9pZDtcbiAgICBvbkJlZm9yZVNraXBwZWQ/OiAoKSA9PiBQcm9taXNlPHZvaWQ+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUdpZ3lhUmVzcG9uc2Uge1xuICAgIGVycm9yQ29kZT86IEdTRXJyb3JzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElGb3JtUmVzcG9uc2UgZXh0ZW5kcyBJR2lneWFSZXNwb25zZSB7XG4gICAgcmVzcG9uc2U/OiBJRm9ybVJlc3BvbnNlO1xuICAgIHJlZ1Rva2VuPzogc3RyaW5nO1xuICAgIGFUb2tlbj86IHN0cmluZztcbiAgICBldmVudD86IGFueTtcbiAgICBhdXRvU2tpcD86IGJvb2xlYW47XG4gICAgb3BlcmF0aW9uPzogc3RyaW5nO1xuICAgIHByb2ZpbGU/OiBJRm9ybURhdGE7XG4gICAgZGF0YT86IElGb3JtRGF0YTtcbiAgICBlcnJvckRldGFpbHM/OiBzdHJpbmc7XG4gICAgZXJyb3JNZXNzYWdlPzogc3RyaW5nW107XG4gICAgY3VzdG9tTWVzc2FnZT86IHN0cmluZztcbiAgICB1c2VyPzogc3RyaW5nO1xuICAgIHNlY3JldFF1ZXN0aW9uPzogc3RyaW5nO1xuICAgIGVycm9yRGV0YWlsc0NvZGU/OiBudW1iZXI7XG4gICAgdmFsaWRhdGlvbkVycm9ycz86IElFcnJvckluZm9bXTtcbiAgICBlcnJvckZsYWdzPzogc3RyaW5nO1xuICAgIGxvZ2luSUQ/OiBzdHJpbmc7XG4gICAgY2hpbGRTY3JlZW5TZXRDbG9zZVJlYXNvbj86IHN0cmluZzsgLy8gb25lIG9mIHRoZSBDbG9zZVJlYXNvbnMgdmFsdWUgbmFtZXNcbiAgICBwcm92aWRlclNlc3Npb25JbmZvPzogSVByb3ZpZGVyU2Vzc2lvbkluZm87XG4gICAgZ2lnX3Byb3ZpZGVyPzogc3RyaW5nOyAvLyBQcm92aWRlciBzZXNzaW9uIGZvciBsaW5rIGFjY291bnRzIGFmdGVyIHNvY2lhbCBsb2dpbiB3aXRoIGF1dGhGbG93IHJlZGlyZWN0XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV4dHJhRXZlbnREYXRhIHtcbiAgICByZW1lbWJlck1lPzogYm9vbGVhbjtcbiAgICBhbGxvd0FjY291bnRzTGlua2luZz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9hZFRlbXBsYXRlQ2FsbGJhY2sge1xuICAgIChpc1N1Y2Nlc3M6IHRydWUsIHRyYW5zbGF0aW9ucz86IHsgW3RyYW5zbGF0aW9uS2V5OiBzdHJpbmddOiBzdHJpbmcgfSwgc2VydmVyUGFyYW1zPzogYW55KTogdm9pZDtcblxuICAgIChpc1N1Y2Nlc3M6IGZhbHNlLCBlcnJvclJlc3BvbnNlPzogeyBlcnJvckNvZGU6IG51bWJlciB9KTogdm9pZDtcbn1cblxuZXhwb3J0IHZhciBTY3JlZW5TZXRfQ09OU1RTID0ge1xuICAgIGdpZ3lhQ2xhc3M6ICdnaWd5YS1zY3JlZW4tc2V0JyxcbiAgICBtb2JpbGVEaWFsb2dDbGFzczogJ2dpZ3lhLXNjcmVlbi1kaWFsb2ctbW9iaWxlJyxcbiAgICB3ZWJEaWFsb2dDbGFzczogJ2dpZ3lhLXNjcmVlbi1kaWFsb2cnLFxuICAgIGNvbnRlbnRDbGFzczogJ2dpZ3lhLXNjcmVlbi1kaWFsb2ctY29udGVudCcsXG4gICAgdG9wRWxlbWVudENsYXNzOiAnZ2lneWEtc2NyZWVuLWRpYWxvZy10b3AnLFxuICAgIGNhbGN1bGF0ZVNpemVDbGFzczogJ2dpZ3lhLWNhbGN1bGF0ZS1zaXplJyxcbiAgICBnaWd5YUhpZGRlbjogJ2dpZ3lhLWhpZGRlbicsXG5cbiAgICBzdGFydFNjcmVlbjogJ2RhdGEtc3RhcnQtc2NyZWVuJyxcbiAgICBpc1Jlc3BvbnNpdmU6ICdkYXRhLXJlc3BvbnNpdmUnLFxuICAgIGRpYWxvZ1N0eWxlOiAnZGF0YS1kaWFsb2ctc3R5bGUnLFxuICAgIGRhdGFBY3RpdmVHcm91cHM6ICdkYXRhLWFjdGl2ZS1ncm91cHMnLFxufTtcbkRlZXBGcmVlemUoU2NyZWVuU2V0X0NPTlNUUyk7XG5cbmV4cG9ydCBjbGFzcyBTY3JlZW5TZXRQbHVnaW4gZXh0ZW5kcyBnaWd5YS5fLnBsdWdpbnMuQmFzZVBsdWdpbjxJU2NyZWVuU2V0UGFyYW1zLCBJU2NyZWVuU2V0VGVtcGxhdGVzLCBJU2NyZWVuU2V0Q1NTPiBpbXBsZW1lbnRzIElUZW1wbGF0ZUVsZW1lbnRQYXJlbnQge1xuICAgIC8qKlxuICAgICAqIFVzZWQgdG8gY2FjaGUgcmVmZXJlbmNlIHRvIEphdmFTY3JpcHQgYW5kIHRyYW5zbGF0aW9ucyBkb3dubG9hZGVkIGZvciBlYWNoIHNjcmVlbi1zZXQuXG4gICAgICpcbiAgICAgKiBUaGUgb2JqZWN0IHJlZmVyZW5jZSBpcyBwbGFjZWQgb24gdGhlIGdpZ3lhIG9iamVjdCBkaXJlY3RseSB0byBhdm9pZCBiZWluZyBjbGVhcmVkIHdoZW4gdGhpcyBmaWxlIGlzIHJlbG9hZGVkIGJ5IGEgc2l0ZSBzd2l0Y2hpbmcgbGFuZ3VhZ2VzLlxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENBQ0hFOiB7XG4gICAgICAgIFtzY3JlZW5TZXRJRDogc3RyaW5nXToge1xuICAgICAgICAgICAgamF2YXNjcmlwdD86IHN0cmluZztcbiAgICAgICAgICAgIHRyYW5zbGF0aW9ucz86IFRyYW5zbGF0aW9uc0NvbnRhaW5lcjtcbiAgICAgICAgfTtcbiAgICB9ID0gKGdpZ3lhWydfX3NjcmVlblNldFBsdWdpbkNhY2hlJ10gPSBnaWd5YVsnX19zY3JlZW5TZXRQbHVnaW5DYWNoZSddIHx8IHt9KTtcblxuICAgIHByaXZhdGUgdGVtcGxhdGVFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIF9pbnN0YW5jZUlkOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfb3JpZ2luYWxDdXN0b21MYW5nOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfTtcbiAgICBwcml2YXRlIGlzUmVzcG9uc2l2ZTogYm9vbGVhbjtcbiAgICBwcml2YXRlIF9hZGRlZENTUyA9IGZhbHNlO1xuICAgIHByaXZhdGUgX2xvYWRlZFNjcmVlbnNldENzczogc3RyaW5nO1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gU2NyZWVuU2V0X0NPTlNUUztcblxuICAgIC8vIFNjcmVlblNldCBkYXRhXG4gICAgcHJpdmF0ZSBfc3RhcnRTY3JlZW46IHN0cmluZztcbiAgICBwdWJsaWMgX2VsQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwdWJsaWMgX2VsQ2hpbGRDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHB1YmxpYyBsYXN0U2NyZWVuU2V0U2l6ZTogSUVsZW1lbnRBY3R1YWxTaXplO1xuICAgIHByaXZhdGUgX3NjcmVlbnM6IElNYXA8U2NyZWVuPiA9IHt9O1xuICAgIHByaXZhdGUgX2N1cnJlbnRTY3JlZW46IFNjcmVlbjtcbiAgICBwcml2YXRlIF9uZXh0U2NyZWVuOiBTY3JlZW47IC8vIE5lZWRlZCBzaW5jZSBzd2l0Y2hpbmcgc2NyZWVucyBjYW4gY2F1c2UgYXN5bmMgbG9hZGluZyBvZiBkYXRhIGZyb20gdGhlIHNlcnZlclxuXG4gICAgcHVibGljIHNjcmVlbk9wdGlvbnM6IFNjcmVlbk9wdGlvbnM7XG4gICAgcHVibGljIF9yYW5kb20gPSBNYXRoLnJhbmRvbSgpO1xuICAgIHB1YmxpYyBkYXRhOiBTY3JlZW5TZXREYXRhO1xuXG4gICAgcHJpdmF0ZSBfY2hpbGQ6IFNjcmVlblNldFBsdWdpbjtcbiAgICBwcml2YXRlIF9pc0NoaWxkOiBib29sZWFuO1xuICAgIHB1YmxpYyBfSUQ6IHN0cmluZztcbiAgICBwdWJsaWMgX3BsYWNlaG9sZGVySW50ZXJ2YWxJRDogbnVtYmVyID0gLTE7XG4gICAgcHJpdmF0ZSBvblVzZXJTdGF0ZUNoYW5nZSA9IChyZXM6IE9iamVjdCkgPT4gdGhpcy5vbkFjY291bnRJbmZvKHJlcyk7XG5cbiAgICBwdWJsaWMgZ2V0Q29uZmlnKCk6IElQbHVnaW5Db25maWc8SVNjcmVlblNldFBhcmFtcz4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVxdWlyZWRQYXJhbXM6IFsnc2NyZWVuU2V0J10sXG4gICAgICAgICAgICBkZWZhdWx0UGFyYW1zOiB7c2NyZWVuU2V0OiAnJ30sXG4gICAgICAgICAgICBkZWZhdWx0TW9kYWxQYXJhbXM6IHtcbiAgICAgICAgICAgICAgICBzY3JlZW5TZXQ6ICcnLFxuICAgICAgICAgICAgICAgIC8vLCBkaW1EaWFsb2dCYWNrZ3JvdW5kIDogdHJ1ZSAvLyBlbmFibGUgdGhpcyB3aGVuIHN0b3Agc3VwcG9ydGluZyBsZWdhY3lcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0RGV2aWNlVHlwZTogRGV2aWNlVHlwZXMuYXV0byxcbiAgICAgICAgICAgIGhhc01vYmlsZVVJOiB0cnVlLFxuICAgICAgICAgICAgYWxsb3dNb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgIGRpc2FibGVNb2RhbENvbnRhaW5lckluaXQ6IHRydWUsXG4gICAgICAgICAgICBkZWZhdWx0RGlhbG9nU3R5bGU6IFBsdWdpblN0eWxlLmxlZ2FjeSxcbiAgICAgICAgICAgIHN1cHBvcnRzUmVzcG9uc2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIGVuYWJsZVNpemVQb2xsaW5nOiB0cnVlLFxuICAgICAgICAgICAgZW5hYmxlVmlld3BvcnRQb2xsaW5nOiB0cnVlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaW5qZWN0aW9uSW5mbygpOiBJSW5qZWN0aW9uSW5mbyB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiAnc2NyZWVuU2V0JyxcbiAgICAgICAgICAgIG5hbWVzcGFjZTogJ2FjY291bnRzJyxcbiAgICAgICAgICAgIG1ldGhvZE5hbWU6ICdzaG93U2NyZWVuU2V0JyxcbiAgICAgICAgICAgIGpzTmFtZTogJ2dpZ3lhLnNlcnZpY2VzLmFjY291bnRzLnBsdWdpbnMuc2NyZWVuU2V0JyxcbiAgICAgICAgICAgIHB1YmxpY01ldGhvZHM6IHtcbiAgICAgICAgICAgICAgICBoaWRlU2NyZWVuU2V0OiB7aW5zdGFuY2VNZXRob2Q6ICdjYW5jZWwnLCBhcmdOYW1lczogW119LFxuICAgICAgICAgICAgICAgIHN3aXRjaFNjcmVlbjoge2luc3RhbmNlTWV0aG9kOiAnc3dpdGNoU2NyZWVuJywgYXJnTmFtZXM6IFsnc2NyZWVuJ119LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJVGVtcGxhdGVFbGVtZW50UGFyZW50IGltcGxlbWVudGF0aW9uXG4gICAgcHVibGljIF9zY3JlZW5TZXQgPSB0aGlzO1xuXG4gICAgcHVibGljIGRpc3BhdGNoUGx1Z2luRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50T2JqOiBJQmFzZUZvcm1FdmVudCB8IE9iamVjdCA9IHt9KSB7XG4gICAgICAgIGV2ZW50T2JqWydzY3JlZW5TZXRJRCddID0gdGhpcy5fSUQ7XG4gICAgICAgIHJldHVybiBzdXBlci5kaXNwYXRjaFBsdWdpbkV2ZW50KGV2ZW50TmFtZSwgZXZlbnRPYmopO1xuICAgIH1cblxuICAgIC8vI3JlZ2lvbiBzdGF0aWMgbWV0aG9kc1xuXG4gICAgLy8gVE9ETzogd2lsbCBoYXZlIGEgc3VwcG9ydCBzdHJ1Y3R1cmUgaW4gQmFzZVBsdWdpbiB0aGF0IHdpbGwgZmluZCB0aGUgaW5zdGFuY2VcbiAgICBwcml2YXRlIHN0YXRpYyBfY2FsY3VsYXRlSW5zdGFuY2VJZChwOiBJQmFzZVNjcmVlblBhcmFtcykge1xuICAgICAgICB2YXIgY29udGFpbmVySUQgPSBwLmNvbnRhaW5lcklEIHx8ICcnO1xuXG4gICAgICAgIHJldHVybiBwLnNjcmVlblNldCArICdfJyArIGNvbnRhaW5lcklEO1xuICAgIH1cblxuICAgIC8vI2VuZHJlZ2lvblxuXG4gICAgcHVibGljIGluaXQoY2FsbGJhY2s6IChpc1N1Y2Nlc3M6IGJvb2xlYW4pID0+IHZvaWQpIHtcbiAgICAgICAgY29uc3QgZ2lnUGFyYW1zID0gZ2lneWEudXRpbHMub2JqZWN0LmV4dHJhY3RQcm9wZXJ0aWVzKFxuICAgICAgICAgICAgZ2lneWEudXRpbHMuVVJMLmdldEdpZ1BhcmFtc0Zyb21VUkwoeyB1cmw6IGRvY3VtZW50LmxvY2F0aW9uLmhyZWYsIHJlbW92ZVByZWZpeDogdHJ1ZSB9KSwgbnVsbCwgJ2xhbmd8cmVnVG9rZW4nXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGdpZ1BhcmFtc1snbGFuZyddKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5fZXhwbGljaXRMYW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMucGFyYW1zLCBnaWdQYXJhbXMpO1xuXG4gICAgICAgIHRoaXMubG9hZFRlbXBsYXRlKChzdWNjZXNzLCB0cmFuc2xhdGlvbnM/LCBzZXJ2ZXJQYXJhbXM/KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ2ZhaWxlZCBsb2FkaW5nIHNjcmVlbnNldCB0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbygnc2NyZWVuc2V0IHRlbXBsYXRlIGxvYWRlZCcpO1xuXG4gICAgICAgICAgICAgICAgSUVUZW1wbGF0ZUVsZW1lbnRQb2x5ZmlsbCgpO1xuICAgICAgICAgICAgICAgIC8vIFJlLWNyZWF0ZSBwYXJhbWV0ZXJzIHVzaW5nIHNlcnZlci1sb2FkZWQgcGFyYW1zLlxuICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXJQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTWVyZ2UgdGhlIGV4cGxpY2l0IHBhcmFtcyBvbiB0b3Agb2YgdGhlIHNlcnZlci1wcm92aWRlZCBwYXJhbXMgdG8gY3JlYXRlIGEgbmV3IHNldCBvZiBleHBsaWNpdCBwYXJhbXMuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwbGljaXRQYXJhbXMgPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW3NlcnZlclBhcmFtcywgdGhpcy5leHBsaWNpdFBhcmFtc10sIGZhbHNlKSBhcyBhbnk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHNldCBvZiBwYXJhbXMgYnkgbWVyZ2luZyB3aXRoIGdsb2JhbCBjb25mLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcyA9IGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbdGhpcy5wYXJhbXMsIGdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZiwgdGhpcy5leHBsaWNpdFBhcmFtc10sIGZhbHNlKSBhcyBhbnk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvLyBOb3JtYWxpemluZyB0cmFuc2xhdGlvbiBhbmQgY3VzdG9tTGFuZyBrZXlzIGJlZm9yZSBtZXJnaW5nXG4gICAgICAgICAgICAgICAgLy8gTWVyZ2UgdHJhbnNsYXRpb25zIGZyb20gcGFyYW1ldGVycyB0byBzdXBwb3J0IHRyYW5zbGF0aW9ucyBiZWluZyBvdmVycmlkZGVuIG9uIHRoZSBjbGllbnQtc2lkZS5cblxuICAgICAgICAgICAgICAgIHRoaXMuX29yaWdpbmFsQ3VzdG9tTGFuZyA9IHsuLi5naWd5YS51dGlscy5vYmplY3Qubm9ybWFsaXplT2JqZWN0S2V5c1RvTG93ZXJDYXNlKHRoaXMucGFyYW1zLmN1c3RvbUxhbmcpIHx8IHt9fTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5jdXN0b21MYW5nID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLm9iamVjdC5ub3JtYWxpemVPYmplY3RLZXlzVG9Mb3dlckNhc2UodGhpcy5wYXJhbXMucGFyZW50VHJhbnNsYXRpb25zIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLm9iamVjdC5ub3JtYWxpemVPYmplY3RLZXlzVG9Mb3dlckNhc2UodHJhbnNsYXRpb25zIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29yaWdpbmFsQ3VzdG9tTGFuZ1xuICAgICAgICAgICAgICAgICAgICApIGFzIHtba2V5OiBzdHJpbmddOiBzdHJpbmd9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMucGFyZW50RGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2lzQ2hpbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHRoaXMucGFyYW1zLnBhcmVudERhdGE7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMucm9vdENvbnRhaW5lcklkID0gdGhpcy5wYXJhbXMucGFyZW50RGF0YS5wYXJhbXM/LnJvb3RDb250YWluZXJJZDtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wYXJhbXMucGFyZW50RGF0YTsgLy8gcmVtb3ZlIHRvIHByZXZlbnQgY2lyY3VsYXIgcmVmcmVuY2VzIGluc2lkZSBwYXJhbXNcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faXNDaGlsZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IG5ldyBTY3JlZW5TZXREYXRhKHRoaXMucGFyYW1zKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5yZWdUb2tlbiA9IHRoaXMuZGF0YS5yZWdUb2tlbjtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5yb290Q29udGFpbmVySWQgPSB0aGlzLmNvbnRhaW5lcklEO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5pc0NoaWxkID0gdGhpcy5faXNDaGlsZDsgLy8gbWFrZSB0aGUgaXMgY2hpbGQgYWNjZXNzaWJsZSB0byBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLmNvbW11bmljYXRpb25MYW5nICA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY29tbXVuaWNhdGlvbkxhbmdCeVNjcmVlblNldCAhPT0gZmFsc2UgPyB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmxhbmcgOiBudWxsO1xuXG4gICAgICAgICAgICAvLyBwYXJlbnQgc2NyZWVuU2V0IHNob3VsZCBsaXN0ZW4gdG8gZ2xvYmFsIGxvZ2luL291dCBldmVudHNcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNDaGlsZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJHbG9iYWxFdmVudHMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmFtcy5yZWdTb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5yZWdTb3VyY2UgPSBmaXJzdFBhcnQoZmlyc3RQYXJ0KGRvY3VtZW50LmxvY2F0aW9uLmhyZWYsICc/JyksICcjJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlSWQgPSBTY3JlZW5TZXRQbHVnaW4uX2NhbGN1bGF0ZUluc3RhbmNlSWQodGhpcy5wYXJhbXMpO1xuXG4gICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdENvbnRhaW5lcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNjcmVlbnMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEVycm9yRnJvbVJlc3BvbnNlKHRyYW5zbGF0aW9ucyk7IC8vIHNlY29uZCBhcmd1bWVudCBpcyB1c2VkIGFzIGVycm9yIHJlc3BvbnNlIGluIGNhc2Ugb2YgZmFpbHVyZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5pbm5lclRleHQgPSAnQW4gZXJyb3IgaGFzIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWxsYmFjayhzdWNjZXNzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlcmUgYXJlIHR3byB3YXlzIHRvIHByb3ZpZGUgYSBzY3JlZW4tc2V0IHRlbXBsYXRlLlxuICAgICAqIDEuIFBsYWNlIHRoZSBzY3JlZW4tc2V0IHRlbXBsYXRlIGVsZW1lbnQgb24gdGhlIHBhZ2Ugd2l0aCB0aGUgc2NyZWVuLXNldCBJRC4gSW4gdGhpcyBjYXNlLCBpdCBpcyBhc3N1bWVkIENTUyBhbmQgSlMgYXJlIHByb3ZpZGVkLlxuICAgICAqIDIuIExvYWQgc2NyZWVuLXNldCBmcm9tIEdpZ3lhIHNlcnZlcnMsIHdoaWNoIGluY2x1ZGVzIENTUyBhbmQgZXh0cmEgSlMgcGFyYW1ldGVycy4gQWZ0ZXIgbG9hZCwgdGhlIHNjcmVlbi1zZXQgaXMgY2FjaGVkIGluIGEgRE9NIGVsZW1lbnQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBsb2FkVGVtcGxhdGUoY2FsbGJhY2s6IExvYWRUZW1wbGF0ZUNhbGxiYWNrKSB7XG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB3ZSd2ZSBhbHJlYWR5IGxvYWRlZCB0aGUgdGVtcGxhdGUuXG4gICAgICAgIGlmICh0aGlzLnRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgc2NyZWVuLXNldCBJRC5cbiAgICAgICAgY29uc3Qgc2NyZWVuU2V0SUQgPSAodGhpcy5fSUQgPSB0aGlzLmlzTW9iaWxlVUkgJiYgdGhpcy5wYXJhbXMubW9iaWxlU2NyZWVuU2V0ID8gdGhpcy5wYXJhbXMubW9iaWxlU2NyZWVuU2V0IDogdGhpcy5wYXJhbXMuc2NyZWVuU2V0KTtcblxuICAgICAgICAvLyBGaW5kIChjcmVhdGUgaWYgbmVlZGVkKSBzY3JlZW4tc2V0IHRlbXBsYXRlIGNvbnRhaW5lciBvbiB0aGUgcGFnZS5cbiAgICAgICAgY29uc3Qgc2NyZWVuU2V0VGVtcGxhdGVDb250YWluZXJJRCA9IGBfX2dpZ3lhU2NyZWVuU2V0XyR7c2NyZWVuU2V0SUR9YDtcbiAgICAgICAgbGV0IHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2NyZWVuU2V0VGVtcGxhdGVDb250YWluZXJJRCk7XG4gICAgICAgIGlmICghc2NyZWVuU2V0VGVtcGxhdGVDb250YWluZXIpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBzaXRlLXByb3ZpZGVkIHNjcmVlbi1zZXQgdGVtcGxhdGUgZWxlbWVudCBvbiB0aGUgcGFnZS4gVXNlIGluc3RlYWQgb2YgbG9hZGluZyBmcm9tIEdpZ3lhIHNlcnZlcnMuXG4gICAgICAgICAgICAvLyBObyBKYXZhU2NyaXB0IGlzIGxvYWRlZCBpbiB0aGlzIGNhc2UgYmVjYXVzZSB0aGUgc2NyZWVuLXNldCB3YXMgcHJvdmlkZWQgYnkgdGhlIHNpdGUuXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNjcmVlblNldElEKSBhcyBIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgLy8gIzUyNjQxIC0gRW5zdXJlIGxvY2FsIHNjcmVlbi1zZXQgdGVtcGxhdGUgaXMgbm90IGxvYWRlZCBmcm9tIGluc2lkZSBhIEdpZ3lhLWNyZWF0ZWQgc2NyZWVuLXNldCB0ZW1wbGF0ZSBjb250YWluZXIuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgJiZcbiAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudC5wYXJlbnRFbGVtZW50ICYmXG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQucGFyZW50RWxlbWVudC5pZCAmJlxuICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50LnBhcmVudEVsZW1lbnQuaWQuaW5kZXhPZignX19naWd5YVNjcmVlblNldF8nKSA9PT0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy50ZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBzY3JlZW5TZXRUZW1wbGF0ZUNvbnRhaW5lci5pZCA9IHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVySUQ7XG4gICAgICAgICAgICBzY3JlZW5TZXRUZW1wbGF0ZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnByZXBlbmRUb0JvZHkoc2NyZWVuU2V0VGVtcGxhdGVDb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGFuZyA9IHRoaXMuZ2V0TGFuZ0ZvclNjcmVlblNldCgpO1xuXG4gICAgICAgIC8vIExvb2sgd2l0aGluIHRoZSB0ZW1wbGF0ZSBmb3IgY2FjaGVkIHNjcmVlbi1zZXQgZWxlbWVudC5cbiAgICAgICAgLy8gSXQgbWF5IGhhdmUgYmVlbiBwb3B1bGF0ZWQgYnkgYSBwcmV2aW91cyBjYWxsLlxuICAgICAgICBjb25zdCBzY3JlZW5TZXRFbCA9IHNjcmVlblNldFRlbXBsYXRlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYGRpdi4ke1NjcmVlblNldF9DT05TVFMuZ2lneWFDbGFzc31gKSBhcyBIVE1MRGl2RWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHNjcmVlblNldEVsKSB7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudCA9IHNjcmVlblNldEVsO1xuXG4gICAgICAgICAgICBpZiAoIVNjcmVlblNldFBsdWdpbi5DQUNIRVtzY3JlZW5TZXRJRF0pIHtcbiAgICAgICAgICAgICAgICBTY3JlZW5TZXRQbHVnaW4uQ0FDSEVbc2NyZWVuU2V0SURdID0ge1xuICAgICAgICAgICAgICAgICAgICBqYXZhc2NyaXB0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uczoge30sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgamF2YXNjcmlwdCA9IFNjcmVlblNldFBsdWdpbi5DQUNIRVtzY3JlZW5TZXRJRF0uamF2YXNjcmlwdFxuICAgICAgICAgICAgICAgID8gZ2lneWEudXRpbHMuSlNPTi5kZXNlcmlhbGl6ZShTY3JlZW5TZXRQbHVnaW4uQ0FDSEVbc2NyZWVuU2V0SURdLmphdmFzY3JpcHQpXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIC8vIEZpcnN0LCBjaGVjayB0byBzZWUgaWYgd2UndmUgY2FjaGVkIHRyYW5zbGF0aW9ucyBmcm9tIHRoZSBzZXJ2ZXIgaW4gdGhlIGxhbmd1YWdlIHJlcXVlc3RlZC5cbiAgICAgICAgICAgIC8vIChkb24ndCBmYWxsYmFjayB0byByb290L2RlZmF1bHQgbGFuZyB3aGVuIHRyeWluZyB0byBnZXQgdHJhbnNsYXRpb25zIGZyb20gY2FjaGUpXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRUcmFuc2xhdGlvbnMgPSBnaWd5YS5wbHVnaW5VdGlscy5sYW5nLmdldFRyYW5zbGF0aW9uc0Zyb21Db250YWluZXIoU2NyZWVuU2V0UGx1Z2luLkNBQ0hFW3NjcmVlblNldElEXSwgbGFuZywgZmFsc2UpO1xuICAgICAgICAgICAgaWYgKGNhY2hlZFRyYW5zbGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUsIGNhY2hlZFRyYW5zbGF0aW9ucy50cmFuc2xhdGlvbnMsIGphdmFzY3JpcHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGZldGNoIHRyYW5zbGF0aW9ucyBmb3IgdGhpcyBsYW5ndWFnZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHJhcmUgY2FzZSB0aGF0J3MgaGl0IG9ubHkgd2hlbiB0aGUgdXNlciBhbHJlYWR5IGxvYWRlZCB0aGUgc2NyZWVuLXNldCBpbiBvbmUgbGFuZ3VhZ2UgYW5kIG5vdyBpdCdzIGJlaW5nIHJlbmRlcmVkIGluIGEgZGlmZmVyZW50IGxhbmd1YWdlLlxuICAgICAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmdldFNjcmVlblNldHModGhpcy5wYXJhbXMsIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZyxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogJ3RyYW5zbGF0aW9ucycsXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlblNldElEczogc2NyZWVuU2V0SUQsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiB0aGlzLnByZXBhcmVDYWxsYmFjaygocmVzOiB7IGVycm9yQ29kZTogbnVtYmVyOyBzY3JlZW5TZXRzOiBBcnJheTxTY3JlZW5TZXQ+IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZXJyb3JDb2RlICE9IDAgfHwgIXJlcy5zY3JlZW5TZXRzIHx8ICFyZXMuc2NyZWVuU2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhY2hlIHRyYW5zbGF0aW9ucyBmcm9tIHNlcnZlci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9TY3JlZW5TZXQgPSByZXMuc2NyZWVuU2V0c1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHtsYW5nS2V5LCB0cmFuc2xhdGlvbnN9ID0gZ2lneWEucGx1Z2luVXRpbHMubGFuZy5nZXRUcmFuc2xhdGlvbnNGcm9tQ29udGFpbmVyKG9TY3JlZW5TZXQsIGxhbmcpIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZpbmcgdGhlIHRyYW5zbGF0aW9ucyBpbiBjYWNoZSB3aXRoIHt7bGFuZ319IGFzIHRoZSBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSB0cmFuc2xhdGlvbnMgYXJlIGZhbGxiYWNrIGZyb20gcm9vdC9kZWZhdWx0IGxhbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIGVuYWJsZSBsb2FkaW5nIHRoZSBzYW1lIHNjcmVlbi1zZXQgd2l0aCBhIGRpZmZlcmVudCBtaXNzaW5nIGxhbmcvdmFyaWF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBTY3JlZW5TZXRQbHVnaW4uQ0FDSEVbc2NyZWVuU2V0SURdLnRyYW5zbGF0aW9uc1tsYW5nS2V5XSA9IHRyYW5zbGF0aW9ucztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgdHJhbnNsYXRpb25zLCBqYXZhc2NyaXB0KTtcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBMb2FkIHNjcmVlbi1zZXQgZnJvbSBzZXJ2ZXIuXG4gICAgICAgICAgICAvLyBOT1RFOiBUaGlzIGNhbiBiZSB0cmlnZ2VyZWQgdHdpY2UgaWYgMiBzY3JlZW4tc2V0cyBsb2FkIGF0IHRoZSBzYW1lIHRpbWUuXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBnaWd5YS5hY2NvdW50cy5nZXRTY3JlZW5TZXRzKHRoaXMucGFyYW1zLCB7XG4gICAgICAgICAgICAgICAgbGFuZyxcbiAgICAgICAgICAgICAgICBpbmNsdWRlOiAnaHRtbCxjc3MsamF2YXNjcmlwdCx0cmFuc2xhdGlvbnMnLFxuICAgICAgICAgICAgICAgIHNjcmVlblNldElEczogc2NyZWVuU2V0SUQsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMucHJlcGFyZUNhbGxiYWNrKFxuICAgICAgICAgICAgICAgICAgICAocmVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IG51bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlblNldHM6IEFycmF5PFNjcmVlblNldD47XG4gICAgICAgICAgICAgICAgICAgIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoJ2dldFNjcmVlblNldHMgcmVzcG9uc2UgdGltZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVRpbWU6IERhdGUubm93KCkgLSBjdXJyZW50VGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmVycm9yQ29kZSAhPSAwIHx8ICFyZXMuc2NyZWVuU2V0cyB8fCAhcmVzLnNjcmVlblNldHMubGVuZ3RoIHx8ICFyZXMuc2NyZWVuU2V0c1swXS5odG1sKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VydmVyUGFyYW1zID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb1NjcmVlblNldCA9IHJlcy5zY3JlZW5TZXRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge2xhbmdLZXksIHRyYW5zbGF0aW9uc30gPSBnaWd5YS5wbHVnaW5VdGlscy5sYW5nLmdldFRyYW5zbGF0aW9uc0Zyb21Db250YWluZXIob1NjcmVlblNldCwgbGFuZykgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFuZ0tleSAmJiBsYW5nS2V5ICE9PSB0aGlzLnBhcmFtcy5sYW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBtaXNzaW5nIHRyYW5zbGF0aW9uIGZvciAke2xhbmd9LCBmYWxsYmFjayB0byAke2xhbmdLZXl9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLmxhbmcgPSBsYW5nS2V5IHx8IHRoaXMucGFyYW1zLmxhbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBTY3JlZW5TZXRQbHVnaW4uQ0FDSEVbc2NyZWVuU2V0SURdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGphdmFzY3JpcHQ6IG9TY3JlZW5TZXQuamF2YXNjcmlwdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2xhbmdLZXldOiB0cmFuc2xhdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIGJlIHN1cmUgdGhlIHNjcmVlbi1zZXQgRE9NIHdhc24ndCBhbHJlYWR5IGNyZWF0ZWQgd2hpbGUgd2FpdGluZyBmb3IgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCBpcyB2aXRhbCB3ZSBkb24ndCByZS1yZW5kZXIgaXQgb3IgSUUxMSB3aWxsIGJyZWFrLiBTZWUgIzQ3MTgxLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzY3JlZW5TZXRUZW1wbGF0ZUNvbnRhaW5lci5pbm5lckhUTUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JlZW5TZXRUZW1wbGF0ZUNvbnRhaW5lci5pbm5lckhUTUwgPSBvU2NyZWVuU2V0Lmh0bWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBjb21wYXRpYmlsaXR5LCBzdG9yaW5nIHRoaXMgZm9yIGluamVjdGlvbiBBRlRFUiBtb2RhbERpYWxvZydzIGNzcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvYWRlZFNjcmVlbnNldENzcyA9IG9TY3JlZW5TZXQuY3NzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGVtcGxhdGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50ID0gc2NyZWVuU2V0VGVtcGxhdGVDb250YWluZXIucXVlcnlTZWxlY3RvcignZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIEphdmFTY3JpcHQgaXMgcHJlc2VudCwgYWxzbyBzdG9yZSBhcyBhbiBhdHRyaWJ1dGUgb24gdGhlIHRlbXBsYXRlIGNvbnRhaW5lciBmb3IgZnV0dXJlIHNjcmVlbi1zZXQgY2FsbHMuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob1NjcmVlblNldC5qYXZhc2NyaXB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyUGFyYW1zID0gZ2lneWEudXRpbHMuSlNPTi5kZXNlcmlhbGl6ZShvU2NyZWVuU2V0LmphdmFzY3JpcHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlLCB0cmFuc2xhdGlvbnMsIHNlcnZlclBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbmplY3RTY3JlZW5TZXRDU1MoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYWRkZWRDU1MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zdHlsZSAhPSBQbHVnaW5TdHlsZS5ub25lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNzcyA9IGdpZ3lhLnV0aWxzLnRlbXBsYXRlcy5maWxsKHRoaXMuZ2V0Q3NzKCkuZGVmYXVsdENTUywge2ltZ0Jhc2U6IHRoaXMuX2ltZ0Jhc2V9KTtcbiAgICAgICAgICAgICAgICBnaWd5YS5fLnBsdWdpbnMudXRpbHMuY3NzLmFkZENzcyhjc3MsIHRoaXMucGFyYW1zLmNzc1ByZWZpeCwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5fbG9hZGVkU2NyZWVuc2V0Q3NzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXhDb2xvckNvbnRyYXN0SWZOZWVkZWQoKTtcbiAgICAgICAgICAgICAgICBnaWd5YS5fLnBsdWdpbnMudXRpbHMuY3NzLmFkZENzcyh0aGlzLl9sb2FkZWRTY3JlZW5zZXRDc3MpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9sb2FkZWRTY3JlZW5zZXRDc3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9hZGRlZENTUyA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGZpeENvbG9yQ29udHJhc3RJZk5lZWRlZCgpIHtcbiAgICAgICAgaWYoRmxhZ1NlcnZpY2Uud2NhZ0NvbnRyYXN0Rml4KSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvcnNPbGRUb05ld01hcCA9IHtcbiAgICAgICAgICAgICAgICAnZTc2NDY4JzogJ2NlNDYzNScsXG4gICAgICAgICAgICAgICAgJzFkODdmZic6ICcwMDcwZjAnLFxuICAgICAgICAgICAgICAgICcwMDY4ZGUnOiAnMDA1NmI4JyxcbiAgICAgICAgICAgICAgICAnODdiOWVhJzogJzIzNzhDRCcsXG4gICAgICAgICAgICAgICAgJ2I2YmRjNSc6ICc2RTc3ODEnLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGAke09iamVjdC5rZXlzKGNvbG9yc09sZFRvTmV3TWFwKS5qb2luKCd8Jyl9YCwgJ2dtaScpO1xuICAgICAgICAgICAgdGhpcy5fbG9hZGVkU2NyZWVuc2V0Q3NzID0gdGhpcy5fbG9hZGVkU2NyZWVuc2V0Q3NzLnJlcGxhY2UocmVnZXgsIG1hdGNoID0+IChjb2xvcnNPbGRUb05ld01hcFttYXRjaD8udG9Mb3dlckNhc2UoKV0gfHwgbWF0Y2gpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vLyBPdmVycmlkZSBmcm9tIEJhc2VQbHVnaW4uXG4gICAgcHJvdGVjdGVkIGluaXRDb250YWluZXIoKSB7XG4gICAgICAgIC8vIEJhc2VQbHVnaW4ncyBpbml0Q29udGFpbmVyIG1ldGhvZCBpcyBpbnZva2VkIGluIGl0cyBzeW5jIHJ1biBwcm9jZXNzLFxuICAgICAgICAvLyBidXQgaGVyZSB3ZSB3YW50IHRvIGluaXRpYWxpemUgdGhlIGNvbnRhaW5lciBbaW4gcGFnZSBvciBtb2RhbF0gb25seSBhZnRlciB0aGUgdGVtcGxhdGUgYXN5bmMgbG9hZCBpcyBjb21wbGV0ZWQgW25lZWRlZCBmb3IgZ2V0UGx1Z2luU3R5bGUgbWV0aG9kXS5cbiAgICAgICAgaWYgKHRoaXMudGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgaXNNb2RhbExlZ2FjeSA9IHRoaXMuaXNNb2RhbCAmJiB0aGlzLmdldFBsdWdpblN0eWxlKCkgPT0gUGx1Z2luU3R5bGUubGVnYWN5O1xuXG4gICAgICAgICAgICAvLyBwcmUtaW5pdCBjb250YWluZXJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmRlZmF1bHRNb2RhbFBhcmFtcy5kaW1EaWFsb2dCYWNrZ3JvdW5kID0gIWlzTW9kYWxMZWdhY3k7XG5cbiAgICAgICAgICAgIHN1cGVyLmluaXRDb250YWluZXIoKTtcblxuICAgICAgICAgICAgLy8gcG9zdC1pbml0IGNvbnRhaW5lclxuICAgICAgICAgICAgaWYgKGlzTW9kYWxMZWdhY3kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5lbmFibGVWaWV3cG9ydFBvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb2RhbERpYWxvZy5nZXRNb2RhbERpYWxvZ0NvbnRhaW5lcigpLnNldEF0dHJpYnV0ZSgnZ2lnaWQnLCB0aGlzLmNvbmZpZy5tZXRob2ROYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBCYXNpYyBzeW5jIGluLXBhZ2UgaW5pdGlhbGl6aW5nLiAtLWxlZ2FjeVxuICAgICAgICBlbHNlIGlmICghdGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uc2V0U2l6ZSh0aGlzLmNvbnRhaW5lciwgdGhpcy5wYXJhbXMud2lkdGgsIHRoaXMucGFyYW1zLmhlaWdodCwgZmFsc2UpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJhbXMucmVzcG9uc2l2ZSkgdGhpcy5jb250YWluZXIuc3R5bGUud2lkdGggPSAnYXV0byc7XG5cbiAgICAgICAgICAgIHRoaXMuX2xvYWRpbmdJbmRpY2F0b3IgPSBuZXcgZ2lneWEuXy5wbHVnaW5zLkxvYWREaW1tZXIodGhpcy5jb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGluaXRTY3JlZW5zKCkge1xuICAgICAgICB0aGlzLmlzUmVzcG9uc2l2ZSA9IHRoaXMudGVtcGxhdGVFbGVtZW50LmdldEF0dHJpYnV0ZShTY3JlZW5TZXRfQ09OU1RTLmlzUmVzcG9uc2l2ZSkgPT0gJ3RydWUnO1xuICAgICAgICB0aGlzLnNjcmVlbk9wdGlvbnMgPSBuZXcgU2NyZWVuT3B0aW9ucyh0aGlzLnRlbXBsYXRlRWxlbWVudCk7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBzY3JlZW5zZXQgc2NyZWVuczpgLCB0aGlzLnNjcmVlbk9wdGlvbnMpO1xuICAgICAgICB0aGlzLmluamVjdFNjcmVlblNldENTUygpO1xuXG4gICAgICAgIGlmICghdGhpcy5faXNDaGlsZCkge1xuICAgICAgICAgICAgLy8gQ2hpbGQgc2NyZWVuU2V0IGRvZXMgbm90IG5lZWQgdG8gbGlzdGVuLCBwYXJlbnQgYWxyZWFkeSBsaXN0ZW5zXG4gICAgICAgICAgICB0aGlzLmFkZEdsb2JhbEV2ZW50SGFuZGxlcignb25Mb2dpbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wcmVwYXJlU2NyZWVuU2V0Q29udGFpbmVyKCk7XG5cbiAgICAgICAgdGhpcy5wcmVwYXJlU2NyZWVucygpO1xuXG4gICAgICAgIHRoaXMuX3N0YXJ0U2NyZWVuID1cbiAgICAgICAgICAgIHRoaXMucGFyYW1zLnN0YXJ0U2NyZWVuIHx8IC8vIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVFbGVtZW50LmdldEF0dHJpYnV0ZShTY3JlZW5TZXRQbHVnaW4uQ09OU1RTLnN0YXJ0U2NyZWVuKSB8fCAvLyBzY3JlZW4gc2V0IGRlZmluaXRpb25cbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0U2NyZWVuOyAvLyBmaXJzdCBzY3JlZW4gdGhhdCB3YXMgc2V0IHdoZW4gc2NyZWVucyB3aGVyZSBwYXJzZWRcblxuICAgICAgICBpZiAodGhpcy5pc01vYmlsZVVJICYmIHRoaXMuaXNNb2RhbCkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLmluaXRpYWxSZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmFtcy5pbml0aWFsUmVzcG9uc2Uub3BlcmF0aW9uICYmIHRoaXMucGFyYW1zLmluaXRpYWxNZXRob2QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5pbml0aWFsUmVzcG9uc2Uub3BlcmF0aW9uID0gYC8ke3RoaXMucGFyYW1zLmluaXRpYWxNZXRob2R9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5vblNjcmVlblJlc3BvbnNlKHRoaXMucGFyYW1zLmluaXRpYWxSZXNwb25zZSwge1xuICAgICAgICAgICAgICAgIElEOiB0aGlzLl9JRCxcbiAgICAgICAgICAgICAgICBiaW5kSUQ6IHRoaXMuX0lELFxuICAgICAgICAgICAgICAgIF9zY3JlZW46IHRoaXMuX3NjcmVlbnNbdGhpcy5fc3RhcnRTY3JlZW5dLFxuICAgICAgICAgICAgICAgIF9zY3JlZW5TZXQ6IHRoaXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3dpdGNoU2NyZWVuKHRoaXMuX3N0YXJ0U2NyZWVuLCB0aGlzLnBhcmFtcy5mb3JtQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLy8gT3ZlcnJpZGluZyBCYXNlUGx1Z2luJ3NcbiAgICBwdWJsaWMgZ2V0UGx1Z2luU3R5bGUoKTogUGx1Z2luU3R5bGUge1xuICAgICAgICAvLy8gcHJpb3JpdHk6IHBhcmFtcyA+IHNjcmVlbnNldCB0ZW1wbGF0ZSBhdHRyID4gY29uZmlnXG4gICAgICAgIC8vLyBpZiB0ZW1wbGF0ZSBoYXNuJ3QgbG9hZGVkIHlldCAtIHJldHVybiB1bmRlZmluZWQgc3R5bGUuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBQbHVnaW5TdHlsZVt0aGlzLnBhcmFtcy5kaWFsb2dTdHlsZV0gfHxcbiAgICAgICAgICAgICh0aGlzLnRlbXBsYXRlRWxlbWVudCAmJiAoUGx1Z2luU3R5bGVbdGhpcy50ZW1wbGF0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFNjcmVlblNldF9DT05TVFMuZGlhbG9nU3R5bGUpXSB8fCB0aGlzLmdldENvbmZpZygpLmRlZmF1bHREaWFsb2dTdHlsZSkpIHx8XG4gICAgICAgICAgICBQbHVnaW5TdHlsZS5fdW5kZWZpbmVkXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlU2NyZWVuU2V0Q29udGFpbmVyKCkge1xuICAgICAgICB2YXIgY29udGFpbmVySUQgPSB0aGlzLmNvbnRhaW5lcklEO1xuXG4gICAgICAgIHZhciB0ZW1wbGF0ZTtcblxuICAgICAgICBpZiAodGhpcy5pc01vZGFsKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IHRoaXMuZ2V0VGVtcGxhdGVzKCkuc2NyZWVuU2V0X2RpYWxvZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRlbXBsYXRlID0gdGhpcy5nZXRUZW1wbGF0ZXMoKS5zY3JlZW5TZXQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW5uZXJDb250YWluZXJJRCA9IGNvbnRhaW5lcklEICsgJ19jb250ZW50JztcbiAgICAgICAgdmFyIGNoaWxkQ29udGFpbmVySUQgPSBjb250YWluZXJJRCArICdfY2hpbGQnO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcbiAgICAgICAgICAgICdiZWZvcmVlbmQnLFxuICAgICAgICAgICAgZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGVtcGxhdGUsIHtcbiAgICAgICAgICAgICAgICBpbm5lckNvbnRhaW5lcklEOiBpbm5lckNvbnRhaW5lcklELFxuICAgICAgICAgICAgICAgIGNoaWxkQ29udGFpbmVySUQ6IGNoaWxkQ29udGFpbmVySUQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgKTtcblxuICAgICAgICAvLy8gVE9ETzogZm9yIGllOCBzdXBwb3J0LCBuZWVkIHRvIGJlIGFzeW5jIGluIG9yZGVyIHRvIGdldCBlbGVtZW50cyB0aGF0IHdlcmUgYWRkZWQgYnkgdGhlIGFib3ZlLlxuXG4gICAgICAgIGlmICghdGhpcy5fY2FwdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcHRpb25FbGVtZW50SWQgPSB0aGlzLmdldENhcHRpb25FbGVtZW50SWQoaW5uZXJDb250YWluZXJJRCwgdGhpcy5faXNDaGlsZCwgdGhpcy5wYXJhbXMucm9vdENvbnRhaW5lcklkKTtcbiAgICAgICAgICAgIHRoaXMuX2NhcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FwdGlvbkVsZW1lbnRJZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9lbENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlubmVyQ29udGFpbmVySUQpO1xuICAgICAgICBpZiAodGhpcy5pc01vZGFsICYmIHRoaXMuX3N0eWxlID09IFBsdWdpblN0eWxlLmxlZ2FjeSkgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuX2VsQ29udGFpbmVyLCBTY3JlZW5TZXRfQ09OU1RTLmNvbnRlbnRDbGFzcyk7XG5cbiAgICAgICAgLy8gQWRkIGNsYXNzIHdpdGggY3VycmVudCBsb2NhbGUuXG4gICAgICAgIC8vIFRoaXMgaXMgdXNlZCBieSBDU1MgaW4gdGhlIGRlZmF1bHQgc2NyZWVuLXNldHMgZm9yIFJUTCBsYW5ndWFnZXMuXG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLl9lbENvbnRhaW5lciwgYGdpZ3lhLWxvY2FsZS0ke2dpZ3lhLnRoaXNTY3JpcHQubGFuZy5sYW5nQ29kZX1gKTtcblxuICAgICAgICB0aGlzLl9lbENoaWxkQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2hpbGRDb250YWluZXJJRCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDYXB0aW9uRWxlbWVudElkKGlubmVyQ29udGFpbmVySUQ6IHN0cmluZywgaXNDaGlsZDogYm9vbGVhbiwgcm9vdENvbnRhaW5lcklkOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgY2FwdGlvbklkO1xuICAgICAgICBjb25zdCBpbm5lckNhcHRpb25JZCA9IGlubmVyQ29udGFpbmVySUQgKyAnX2NhcHRpb24nO1xuXG4gICAgICAgIC8vIENoaWxkIHNjcmVlbi1zZXQgdGFrZXMgb3ZlciBwYXJlbnQncyBjYXB0aW9uLlxuICAgICAgICBpZiAoaXNDaGlsZCkge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlubmVyQ2FwdGlvbklkKSlcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbm5lckNhcHRpb25JZCkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGNhcHRpb25JZCA9IHJvb3RDb250YWluZXJJZCArICdfY29udGVudF9jYXB0aW9uJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhcHRpb25JZCA9IGlubmVyQ2FwdGlvbklkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhcHRpb25JZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QXBpRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5hcGlEYXRhO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQcm9maWxlKCkge1xuICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuZ2V0QXBpRGF0YSgpO1xuXG4gICAgICAgIHZhciBwcm9maWxlID0gYXBpRGF0YSAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8ucHJvZmlsZTtcblxuICAgICAgICByZXR1cm4gcHJvZmlsZSB8fCB7fTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TG9naW5JZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFwaURhdGEoKT8uZ2V0QWNjb3VudEluZm8/LmxvZ2luSURzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb25mbGljdGluZ0FjY291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFwaURhdGEoKT8uZ2V0Q29uZmxpY3RpbmdBY2NvdW50Py5jb25mbGljdGluZ0FjY291bnQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBwcm92aWRlclNlc3Npb25JbmZvKCk6IElQcm92aWRlclNlc3Npb25JbmZvIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmRhdGE/LnByb3ZpZGVyU2Vzc2lvbkluZm8gfHwgdGhpcy5kYXRhPy5wYXJhbXM/LnByb3ZpZGVyU2Vzc2lvbkluZm8pID8/IHt9O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTY2hlbWFEYXRhKCkge1xuICAgICAgICB2YXIgYXBpRGF0YSA9IHRoaXMuZ2V0QXBpRGF0YSgpO1xuXG4gICAgICAgIHZhciBkYXRhID0gYXBpRGF0YSAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8uZGF0YTtcblxuICAgICAgICByZXR1cm4gZGF0YSB8fCB7fTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3ViU2NyaXB0aW9ucygpIHtcbiAgICAgICAgdmFyIGFwaURhdGEgPSB0aGlzLmdldEFwaURhdGEoKTtcblxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IGFwaURhdGEgJiYgYXBpRGF0YS5nZXRBY2NvdW50SW5mbyAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvLnN1YnNjcmlwdGlvbnM7XG5cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbnMgfHwge307XG4gICAgfVxuXG4gICAgcHVibGljIGdldENvbW11bmljYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBcGlEYXRhKCk/LmdldEFjY291bnRJbmZvPy5jb21tdW5pY2F0aW9ucyB8fCB7fTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UHJlZmVyZW5jZXMoKSB7XG4gICAgICAgIHZhciBhcGlEYXRhID0gdGhpcy5nZXRBcGlEYXRhKCk7XG5cbiAgICAgICAgdmFyIHByZWZlcmVuY2VzID0gYXBpRGF0YSAmJiBhcGlEYXRhLmdldEFjY291bnRJbmZvICYmIGFwaURhdGEuZ2V0QWNjb3VudEluZm8ucHJlZmVyZW5jZXM7XG5cbiAgICAgICAgcmV0dXJuIHByZWZlcmVuY2VzIHx8IHt9O1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVSZWdUb2tlbigpIHtcbiAgICAgICAgdGhpcy5kYXRhLnJlZ1Rva2VuID0gdGhpcy5wYXJhbXMucmVnVG9rZW4gPSBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBlc3RhYmxpc2hSZWdUb2tlbihyZWdUb2tlbjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMucGFyYW1zLnJlZ1Rva2VuID0gdGhpcy5kYXRhLnJlZ1Rva2VuID0gcmVnVG9rZW47XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgZXN0YWJsaXNoQVRva2VuKGFUb2tlbjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMucGFyYW1zLmFUb2tlbiA9IHRoaXMuZGF0YS5hVG9rZW4gPSBhVG9rZW47XG4gICAgfVxuXG4gICAgLy8gVE9ETyBwZXJoYXBzIHRoZSBmb3JtIGNvdWxkIGFsc28gYmUgdGhlIHdpZGdldCB0aGF0IG9yaWdpbmF0ZWQgdGhlIHNjcmVlblNldCByZXF1ZXN0IChsaWtlIGFuY2hvciB3aWRnZXQgb3IgdGhlIFRGQSB3aWRnZXQpXG4gICAgcHVibGljIGFzeW5jIG9uU2NyZWVuUmVzcG9uc2UocmVzcG9uc2U6IElGb3JtUmVzcG9uc2UsIGZvcm06IElGb3JtLCBhZnRlckZpbmFsaXplUmVnaXN0cmF0aW9uPzogYm9vbGVhbikge1xuICAgICAgICBpZiAoIWZvcm0pIGZvcm0gPSB7fSBhcyBJRm9ybTtcblxuICAgICAgICB0aGlzLmRhdGEubGFzdFN1Ym1pdHRlZEZvcm1JRCA9IGZvcm0uSUQ7XG4gICAgICAgIHRoaXMuZGF0YS5sYXN0U3VibWl0dGVkRm9ybVJlc3BvbnNlID0gcmVzcG9uc2U7XG5cbiAgICAgICAgbGV0IG5leHRTY3JlZW4gPSBmb3JtLnN1Y2Nlc3NTY3JlZW47XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3BvbnNlKSByZXNwb25zZSA9IHJlc3BvbnNlLnJlc3BvbnNlO1xuXG4gICAgICAgIGNvbnN0IG5lZWRlZERhdGEgPSB0aGlzLl9jdXJyZW50U2NyZWVuPy5nZXROZWVkZWREYXRhKHJlc3BvbnNlIGFzIElGb3JtQ29udGV4dCkgfHwge31cblxuICAgICAgICBpZiAocmVzcG9uc2UuYXV0b1NraXApXG4gICAgICAgIC8vIGF1dG9Ta2lwIGlzIGJlaW5nIHNldCBvbiB0aGUgY2FuQXV0b1NraXAgYW5kIHNlbnQgYmFjayBoZXJlIGluIGEgZHVtbXkgcmVzcG9uc2VcbiAgICAgICAgICAgIG5leHRTY3JlZW4gPSBmb3JtLmF1dG9Ta2lwU2NyZWVuO1xuICAgICAgICBpZiAoQ2xvc2VSZWFzb25zW3Jlc3BvbnNlLmNoaWxkU2NyZWVuU2V0Q2xvc2VSZWFzb25dID09PSBDbG9zZVJlYXNvbnMuc2tpcCkgbmV4dFNjcmVlbiA9IGZvcm0uc2NyZWVuU2V0U2tpcHBlZFNjcmVlbjtcblxuICAgICAgICBpZiAobmV4dFNjcmVlbiA9PT0gJ19maW5pc2gnKSB7XG4gICAgICAgICAgICAvLyBSZXNldHRpbmcgJ25leHRTY3JlZW4nIHRvIGJlIHVuZGVmaW5lZCBpbiBvcmRlciB0byBwcmV2ZW50IHNpZGUgZWZmZWN0cyBzdWNoIGFzICdvbkFmdGVyU3VibWl0JyBldmVudCBiZWluZyBmaXJlZCB0d2ljZSAoIzY5ODE5KVxuICAgICAgICAgICAgLy8gVGhpcyBpcyBiZWNhdXNlIFVJLUJ1aWxkZXIgaW5jb25zaXN0ZW50bHkgc2V0cyB0aGUgbmV4dC1zY3JlZW4gdmFsdWUgdG8gJ19maW5pc2gnL3VuZGVmaW5lZFxuICAgICAgICAgICAgbmV4dFNjcmVlbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5yZWdUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5lc3RhYmxpc2hSZWdUb2tlbihyZXNwb25zZS5yZWdUb2tlbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UucHJvdmlkZXJTZXNzaW9uSW5mbykge1xuICAgICAgICAgICAgdGhpcy5kYXRhLnByb3ZpZGVyU2Vzc2lvbkluZm8gPSByZXNwb25zZS5wcm92aWRlclNlc3Npb25JbmZvO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc1Byb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50c0luUGFyYW1zQWZ0ZXJSZWRpcmVjdChyZXNwb25zZSkpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5wcm92aWRlclNlc3Npb25JbmZvQWZ0ZXJSZWRpcmVjdCA9IGdldFByb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50c0FmdGVyUmVkaXJlY3QocmVzcG9uc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkFjY291bnRJbmZvKHJlc3BvbnNlKTsgLy93aWxsIHVwZGF0ZSB0aGUgcHJvZmlsZS9kYXRhIGNhY2hlIGZyb20gdGhlIHJlc3BvbnNlXG5cbiAgICAgICAgaWYgKGFmdGVyRmluYWxpemVSZWdpc3RyYXRpb24gfHwgKHRoaXMuZGF0YS5sYXN0U3VibWl0dGVkRm9ybUlEICYmIChuZXh0U2NyZWVuIHx8ICF0aGlzLmVuZEZsb3dJc1BlbmRpbmcoKSkpKSB7XG4gICAgICAgICAgICAvL0EgZm9ybSB3YXMgc3VibWl0dGVkLCB3ZSBuZWVkIHRvIGludm9rZSBhZnRlclN1Ym1pdC5cbiAgICAgICAgICAgIC8vSWYgdGhlIGZsb3cgaXMgZW5kaW5nIGFuZCBmaW5hbGl6ZVJlZ2lzdHJhdGlvbiBpcyBuZWVkZWQsIHRoZSBmaW5hbGl6ZVJlZ2lzdHJhdGlvbiByZXNwb25zZSB3aWxsIGZpcmUgdGhlIGV2ZW50XG5cbiAgICAgICAgICAgIC8vLyB3aGlsZSBzdWJtaXR0aW5nIGlzIGFzeW5jLCB0aGUgc2NyZWVuc2V0J3MgZmxvdyBpcyBzeW5jIGFuZCBjYW4gZW5kIGJlZm9yZSByZXNwb25zZSBoYXMgcmV0dXJuZWQuXG4gICAgICAgICAgICAvLy8gaW4gdGhpcyBjYXNlLCB0aGUgcGx1Z2luIGRpc3Bvc2VzIHdoaWNoIGNhdXNlcyB1cyB0byBsb3NlIHRoZSBoYW5kbGVyIFtoZW5jZSBzdG9yaW5nIGl0IGhlcmVdLlxuICAgICAgICAgICAgLy8vIFRPRE86IGZpeCB0aGUgZmxvdywgc28gaXQnbGwgY29udGludWUgb25seSBBRlRFUiBzdWJtaXQuXG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxBZnRlclN1Ym1pdEhhbmRsZXIgPSB0aGlzLnBhcmFtcy5vbkFmdGVyU3VibWl0O1xuXG4gICAgICAgICAgICBjb25zdCBmbk9uSW5mb1VwZGF0ZWQgPSByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VibWl0UmVzcG9uc2UgPSB0aGlzLnVud3JhcFJlc3BvbnNlKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGFmdGVyU3VibWl0RXZlbnQ6IElBZnRlclN1Ym1pdEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdhZnRlclN1Ym1pdCcsXG4gICAgICAgICAgICAgICAgICAgIHNjcmVlbjogZm9ybS5fc2NyZWVuPy5yZXF1ZXN0ZWRTY3JlZW4sXG4gICAgICAgICAgICAgICAgICAgIGZvcm06IGZvcm0uYmluZElELFxuICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiB0aGlzLmdldFByb2ZpbGUoKSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRTY2hlbWFEYXRhKCksXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcmVuY2VzOiB0aGlzLmdldFByZWZlcmVuY2VzKCksXG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHRoaXMuZ2V0U3ViU2NyaXB0aW9ucygpLFxuICAgICAgICAgICAgICAgICAgICBjb21tdW5pY2F0aW9uczogdGhpcy5nZXRDb21tdW5pY2F0aW9ucygpLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZTogc3VibWl0UmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoZm9ybS5fc2NyZWVuPy5pc1NjcmVlblZhcmlhbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXJTdWJtaXRFdmVudC5hYlRlc3RpbmcgPSBmb3JtLl9zY3JlZW4uYWJUZXN0aW5nRGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmFtcy5vbkFmdGVyU3VibWl0KSB0aGlzLnBhcmFtcy5vbkFmdGVyU3VibWl0ID0gb3JpZ2luYWxBZnRlclN1Ym1pdEhhbmRsZXI7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoUGx1Z2luRXZlbnQoYWZ0ZXJTdWJtaXRFdmVudC5ldmVudE5hbWUsIGFmdGVyU3VibWl0RXZlbnQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGZvcm0gaW5zdGFuY2VvZiBOZXdzbGV0dGVyU2lnbnVwRm9ybSkge1xuICAgICAgICAgICAgICAgIGZuT25JbmZvVXBkYXRlZChyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBOZWVkIHRvIGdldCB0aGUgdXBkYXRlZCBpbmZvIHNpbmNlIHNldEFjY291bnRJbmZvIHVwZGF0ZWQgaXQuXG4gICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5vcGVyYXRpb24gPT09ICcvYWNjb3VudHMuc2V0QWNjb3VudEluZm8nICYmIHJlc3BvbnNlLmVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSyAmJiAoIXJlc3BvbnNlLnByb2ZpbGUgfHwgIXJlc3BvbnNlLmRhdGEpKSB7XG4gICAgICAgICAgICAgIEZsYWdTZXJ2aWNlLnVwZGF0ZUFjY291bnRJbmZvQXN5bmMgPT09IHRydWVcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMudXBkYXRlQWNjb3VudEluZm9Bc3luYyhhY2NvdW50SW5mb1Jlc3BvbnNlID0+IGZuT25JbmZvVXBkYXRlZChhY2NvdW50SW5mb1Jlc3BvbnNlKSwgbmVlZGVkRGF0YT8uZ2V0QWNjb3VudEluZm8/LnBhcmFtcz8uaW5jbHVkZSlcbiAgICAgICAgICAgICAgICA6IHRoaXMudXBkYXRlQWNjb3VudEluZm8oYWNjb3VudEluZm9SZXNwb25zZSA9PiBmbk9uSW5mb1VwZGF0ZWQoYWNjb3VudEluZm9SZXNwb25zZSksIG5lZWRlZERhdGE/LmdldEFjY291bnRJbmZvPy5wYXJhbXM/LmluY2x1ZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgbWlzc2luZyBpbmZvXG4gICAgICAgICAgICBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICB0aGlzLmlzQWNjb3VudEluZm9SZXF1aXJlZChyZXNwb25zZS5vcGVyYXRpb24pICYmXG4gICAgICAgICAgICAgICAgKCF0aGlzLmdldEFwaURhdGEoKS5nZXRBY2NvdW50SW5mbyB8fCAhdGhpcy5nZXRBcGlEYXRhKCkuZ2V0QWNjb3VudEluZm8ucHJvZmlsZSB8fCAhdGhpcy5nZXRBcGlEYXRhKCkuZ2V0QWNjb3VudEluZm8uZGF0YSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBGbGFnU2VydmljZS51cGRhdGVBY2NvdW50SW5mb0FzeW5jID09PSB0cnVlXG4gICAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLnVwZGF0ZUFjY291bnRJbmZvQXN5bmMoYWNjb3VudEluZm9SZXNwb25zZSA9PiBmbk9uSW5mb1VwZGF0ZWQocmVzcG9uc2UpKVxuICAgICAgICAgICAgICAgIDogdGhpcy51cGRhdGVBY2NvdW50SW5mb0FzeW5jKGFjY291bnRJbmZvUmVzcG9uc2UgPT4gZm5PbkluZm9VcGRhdGVkKHJlc3BvbnNlKSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm5PbkluZm9VcGRhdGVkKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spIHtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuZEZsb3dJc1BlbmRpbmcoKSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNMaW5rQWNjb3VudHNWMkluUHJvZ3Jlc3MpIHtcblxuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0QWNjb3VudHMocmVzcG9uc2UsIGZvcm0sIHRoaXMucHJvdmlkZXJTZXNzaW9uSW5mbyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2hvdWxkRmluYWxpemVMaW5rQWNjb3VudHNWMkFmdGVyUmVkaXJlY3QpIHtcblxuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0QWNjb3VudHMocmVzcG9uc2UsIGZvcm0sIHRoaXMuZGF0YS5wcm92aWRlclNlc3Npb25JbmZvQWZ0ZXJSZWRpcmVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGFwaURhdGEgPSB0aGlzLmdldEFwaURhdGEoKTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9wZXJhdGlvbiA9PSAnL2FjY291bnRzLnJlZ2lzdGVyJyAmJiBhcGlEYXRhLmluaXRSZWdpc3RyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBhIHN1Y2Nlc3NmdWwgY2FsbCB0byBhY2NvdW50cy5yZWdpc3RlciByZXZva2VzIHRoZSBwcmV2aW91cyBpbml0UmVnaXN0cmF0aW9uIHJlc3BvbnNlIHNvIHRoYXQgYSBuZXcgcmVnVG9rZW4gd2lsbCBiZSBnZW5lcmF0ZWQgZm9yIG90aGVyIHJlZ2lzdGVyIGZvcm1zXG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGNsZWFyaW5nIHNjcmVlbnNldCBpbml0UmVnaXN0cmF0aW9uIGNhY2hlIChyZWdUb2tlbilgKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgYXBpRGF0YS5pbml0UmVnaXN0cmF0aW9uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U2NyZWVuICYmIHRoaXMuX2N1cnJlbnRTY3JlZW4uaGlkZUVycm9ycygpO1xuICAgICAgICAgICAgaWYgKG5leHRTY3JlZW4gJiYgKCF0aGlzLl9jdXJyZW50U2NyZWVuIHx8IG5leHRTY3JlZW4gIT0gdGhpcy5fY3VycmVudFNjcmVlbi5JRCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaFNjcmVlbihuZXh0U2NyZWVuLCByZXNwb25zZSwgZm9ybSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFuZXh0U2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYG5vIG5leHQgc2NyZWVuIHNvLi4uYCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJhbXMucmVtZW1iZXIgPSB0aGlzLmRhdGEuZXh0cmFFdmVudERhdGEucmVtZW1iZXJNZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZEZsb3cocmVzcG9uc2UsIGZvcm0sIENsb3NlUmVhc29ucy5maW5pc2hlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBSZXNwb25zZSBpbmRpY2F0ZSBhbiBlcnJvclxuICAgICAgICAgICAgaWYgKFBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbcmVzcG9uc2UuZXJyb3JDb2RlXSAmJiBhd2FpdCB0aGlzLmhhbmRsZVBlbmRpbmdFcnJvcnMocmVzcG9uc2UsIGZvcm0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAjNjI4NDQgLSBnZXRCYXNlRm9ybSBpcyBhIG1ldGhvZCB0aGF0IHNjcmVlbiB3aWRnZXRzIGNhbiBpbXBsZW1lbnQgdG8gbG9jYXRlIHRoZSBmb3JtIHRoZXkgc2hvdWxkIGJlIHRpZWQgdG8uXG4gICAgICAgICAgICAvLyBCZWNhdXNlIHNjcmVlbiB3aWRnZXRzIGRvIG5vdCBoYXZlIHRvIGJlIHRpZWQgdG8gYSBmb3JtLCBpdCBtYXkgcmV0dXJuIG5vIGZvcm0uXG4gICAgICAgICAgICBjb25zdCBlcnJvckZvcm0gPSBmb3JtIGluc3RhbmNlb2YgQmFzZUZvcm0gPyBmb3JtIDogZm9ybS5nZXRFcnJvckRpc3BsYXlGb3JtID8gZm9ybS5nZXRFcnJvckRpc3BsYXlGb3JtKCkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoZXJyb3JGb3JtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5U2VydmVyRXJyb3JzKHJlc3BvbnNlLCBlcnJvckZvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjb25uZWN0QWNjb3VudHMocmVzcG9uc2UsIGZvcm0sIHByb3ZpZGVyU2Vzc2lvbkluZm86IElQcm92aWRlclNlc3Npb25JbmZvKSB7XG4gICAgICAgIGNvbnN0IGNvbm5lY3RBY2NvdW50c1JlcyA9IGF3YWl0IGNvbm5lY3RBY2NvdW50cyhwcm92aWRlclNlc3Npb25JbmZvLCB7XG4gICAgICAgICAgICBzZXNzaW9uRXhwaXJhdGlvbjogdGhpcy5wYXJhbXMuc2Vzc2lvbkV4cGlyYXRpb25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGNvbm5lY3RBY2NvdW50c1Jlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgIHRoaXMub25Db25uZWN0QWNjb3VudHNDb21wbGV0ZSgpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaExvZ2luRXZlbnRGcm9tUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5vblNjcmVlblJlc3BvbnNlKGNvbm5lY3RBY2NvdW50c1JlcywgZm9ybSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkaXNwYXRjaExvZ2luRXZlbnRGcm9tUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICAgICAgY29uc3QgbG9naW5FdmVudCA9IHtcbiAgICAgICAgICAgIGV2ZW50TmFtZTogJ2xvZ2luLGFjY291bnRzLmxvZ2luJyxcbiAgICAgICAgICAgIHByb3ZpZGVyOiAgcmVzcG9uc2VbJ2xvZ2luUHJvdmlkZXInXSxcbiAgICAgICAgICAgIGxvZ2luTW9kZTogTG9naW5Nb2Rlcy5saW5rLm5hbWUsXG4gICAgICAgICAgICByZW1lbWJlcjogdmFsaWRhdGlvblV0aWxzLmlzRXhwbGljaXRUcnVlKHRoaXMuZGF0YS5leHRyYUV2ZW50RGF0YS5yZW1lbWJlck1lKVxuICAgICAgICB9O1xuXG4gICAgICAgIGdpZ3lhLnV0aWxzLm9iamVjdC5leHRyYWN0UHJvcGVydGllcyhcbiAgICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgICAgbG9naW5FdmVudCxcbiAgICAgICAgICAgICduZXdVc2VyfHNpZ25hdHVyZXxVSURTaWd8dGltZXN0YW1wfFVJRFNpZ25hdHVyZXxzaWduYXR1cmVUaW1lc3RhbXB8VUlEfHByb2ZpbGV8ZGF0YXxzaWduS2V5c1VJRFNpZ25hdHVyZXxkYXRhQ2VudGVyfGlkX3Rva2VufHBhc3N3b3JkfCcsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5kaXNwYXRjaEdsb2JhbEV2ZW50KGxvZ2luRXZlbnQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNBY2NvdW50SW5mb1JlcXVpcmVkKG1ldGhvZDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgLy8gbWV0aG9kIHRoYXQgRE9OJ1QgcmVxdWlyZSBhY2NvdW50IGluZm9cbiAgICAgICAgICAgICAgICAnL2FjY291bnRzLnJlc2V0UGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgICcvYWNjb3VudHMucmVzZW5kVmVyaWZpY2F0aW9uQ29kZScsXG4gICAgICAgICAgICAgICAgJy9hY2NvdW50cy50ZmEuaW5pdFRGQScsXG4gICAgICAgICAgICBdLmluZGV4T2YobWV0aG9kKSA9PSAtMVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdW53cmFwUmVzcG9uc2UocmVzcG9uc2U6IHsgZXZlbnQ/OiB7IHJlc3BvbnNlPzogT2JqZWN0IH0gfSkge1xuICAgICAgICBsZXQgc3VibWl0UmVzcG9uc2U7XG4gICAgICAgIGlmIChyZXNwb25zZS5ldmVudCAmJiByZXNwb25zZS5ldmVudC5yZXNwb25zZSkge1xuICAgICAgICAgICAgLy8gdW53cmFwIHNvY2lhbCBsb2dpbiByZXNwb25zZVxuICAgICAgICAgICAgc3VibWl0UmVzcG9uc2UgPSByZXNwb25zZS5ldmVudC5yZXNwb25zZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Ym1pdFJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMub2JqZWN0LmNsb25lKHN1Ym1pdFJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICAvLy8gVE9ETzogbW92ZSB0byBCYXNlUGx1Z2luP1xuICAgIHB1YmxpYyBkaXNwbGF5U2VydmVyRXJyb3JzKHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlLCBmb3JtOiBCYXNlRm9ybSkge1xuXG4gICAgICAgIGlmIChyZXNwb25zZS5zZWNyZXRRdWVzdGlvbikge1xuICAgICAgICAgICAgRm9yRWFjaChmb3JtLl9zZWNyZXRRdWVzdGlvbnMsIHNlY3JldFF1ZXN0aW9uV2lkZ2V0ID0+IHNlY3JldFF1ZXN0aW9uV2lkZ2V0LnNldFF1ZXN0aW9uKHJlc3BvbnNlLnNlY3JldFF1ZXN0aW9uKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUT0RPIHdoeSBlbHNlIC0gY2FuJ3QgYW4gZXJyb3IgYmUgaW5kaWNhdGVkIGFsb25nIHdpdGggdGhlIG5lZWQgZm9yIHNlY3JldCBxdWVzdGlvbj8gKHZhbGlkYXRpb24gZXJyb3IgZm9yIGV4YW1wbGUpXG4gICAgICAgICAgICBjb25zdCBlcnJvcktleSA9IGZvcm0uZ2V0RXJyb3JLZXkocmVzcG9uc2UpO1xuICAgICAgICAgICAgaWYgKGVycm9yS2V5KSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3JNZXNzYWdlID0gdGhpcy5nZXRUZXh0KGVycm9yS2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBlcnJvckRldGFpbHM7XG4gICAgICAgICAgICBzd2l0Y2ggKFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmVycm9yRGV0YWlsc0NvZGUgLy8gVE9ETyBXaHkgdGhpcyBpcyBub3QgZGVwZW5kYW50IG9uIGEgc3BlY2lmaWMgbWFpbiBlcnJvciBjb2RlP1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNhc2UgR1NFcnJvckRldGFpbHMuU2FtZV9wYXNzd29yZDpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzID0gdGhpcy5nZXRUZXh0KCdvbGRfcGFzc3dvcmRfY2Fubm90X2JlX3RoZV9zYW1lX2FzX25ld19wYXNzd29yZCcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgR1NFcnJvckRldGFpbHMuSW52YWxpZF9wYXNzd29yZDpcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzID0gdGhpcy5nZXRUZXh0KCd3cm9uZ19wYXNzd29yZCcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3dpdGNoIChyZXNwb25zZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkV4dGVuc2lvbl9Qb2ludF9DdXN0b21fRXJyb3I6XG4gICAgICAgICAgICAgICAgICAgIGVycm9yRGV0YWlscyA9IHJlc3BvbnNlLmVycm9yRGV0YWlscyB8fCByZXNwb25zZS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBldmVudFJlc3VsdCA9IHRoaXMuZXJyb3IocmVzcG9uc2UuZXJyb3JNZXNzYWdlLCByZXNwb25zZS5lcnJvckNvZGUsIHtcbiAgICAgICAgICAgICAgICBzY3JlZW46IGZvcm0uX3NjcmVlbi5JRCxcbiAgICAgICAgICAgICAgICBmb3JtOiBmb3JtLklELFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBnaWd5YS51dGlscy5vYmplY3QuY2xvbmUodGhpcy5kYXRhLmxhc3RTdWJtaXR0ZWRGb3JtUmVzcG9uc2UpLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5leHRTY3JlZW4gPSB0aGlzLnNjcmVlblBhcnRzKGV2ZW50UmVzdWx0Py5uZXh0U2NyZWVuKTtcbiAgICAgICAgICAgIGlmIChldmVudFJlc3VsdD8ubmV4dFNjcmVlbiAmJiBuZXh0U2NyZWVuLnNjcmVlbklkICE9PSBmb3JtLl9zY3JlZW4uSUQgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hTY3JlZW4oZXZlbnRSZXN1bHQubmV4dFNjcmVlbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBlcnJvciB3aGVuIG5vIHNjcmVlbiBpcyBsb2FkZWQgLSBwcmVyZXF1aXNpdGVzIHdoZXJlIG5vdCBtZXRcbiAgICAgICAgICAgIGlmICghdGhpcy5fY3VycmVudFNjcmVlbikge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZShDbG9zZVJlYXNvbnNbQ2xvc2VSZWFzb25zLmVycm9yXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgcmVsb2FkaW5nIGNhcHRjaGFzYCk7XG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMuX2N1cnJlbnRTY3JlZW4uX2NhcHRjaGFzLCBjID0+IGMucmVsb2FkKCkpO1xuXG4gICAgICAgICAgICB2YXIgc2VydmVyRXJyb3I6IElFcnJvckluZm8gPSB7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiByZXNwb25zZS5lcnJvckNvZGUsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiByZXNwb25zZS5jdXN0b21NZXNzYWdlIHx8IGVycm9yRGV0YWlscyB8fCByZXNwb25zZS5lcnJvck1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgZXJyb3JGbGFnczogcmVzcG9uc2UuZXJyb3JGbGFncyxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBhckZvcm1FcnJvcnMgPSBuZXcgQXJyYXk8SUVycm9ySW5mbz4oKTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnZhbGlkYXRpb25FcnJvcnMpIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuZ3JvdXAoYHNjcmVlbnNldCB2YWxpZGF0aW9uIGVycm9yc2ApLmVuZFdoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBGb3JFYWNoKHJlc3BvbnNlLnZhbGlkYXRpb25FcnJvcnMsIChlcnJvcjogSUVycm9ySW5mbywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkID0gZm9ybS5nZXRGaWVsZChlcnJvci5maWVsZE5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkTmFtZXNwYWNlID0gZmlyc3RQYXJ0KGVycm9yLmZpZWxkTmFtZSwgJy4nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZE5hbWVzcGFjZSA9PT0gJ3Byb2ZpbGUnKSBmaWVsZCA9IGZvcm0uZ2V0RmllbGQoZXJyb3IuZmllbGROYW1lLnJlcGxhY2UoJ3Byb2ZpbGUuJywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDAgJiYgZmllbGQuaW5zdGFuY2VFbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcnN0IHZhbGlkYXRpb24gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuaW5zdGFuY2VFbGVtZW50LmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWRhdGlvbkVycm9yID0gZ2lneWEudXRpbHMub2JqZWN0LmNsb25lKGVycm9yKTsgLy8gVE9ETyByZW1vdmUgdGhlIGNsb25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJGb3JtRXJyb3JzLnB1c2godmFsaWRhdGlvbkVycm9yKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtLnJlbmRlckZpZWxkRXJyb3IoZXJyb3IsIHRydWUsIGVycm9yLmN1c3RvbU1lc3NhZ2UpKSBlcnJvci5oYW5kbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VydmVyIHJlcG9ydGVkIGVycm9yIHdpdGggbm8gbWF0Y2hpbmcgZmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IuZmllbGROYW1lID09PSAnY2FwdGNoYVRleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2FybignQ2FwdGNoYSBpcyByZXF1aXJlZCBidXQgY2FwdGNoYSB3aWRnZXQgaXMgbWlzc2luZyBmcm9tIHRoZSBzdWJtaXR0ZWQgZm9ybScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2FybihlcnJvci5maWVsZE5hbWUgKyAnIGlzIG1hbmRhdG9yeS9pbnZhbGlkIGJ1dCBpdHMgZmllbGQgaXMgbWlzc2luZyBmcm9tIHRoZSBzdWJtaXR0ZWQgZm9ybScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFyRm9ybUVycm9ycy5wdXNoKHNlcnZlckVycm9yKTtcbiAgICAgICAgICAgIGZvcm0uc2hvd0Vycm9ycyhbc2VydmVyRXJyb3JdLCB0cnVlKTtcbiAgICAgICAgICAgIGZvcm0uc2hvd0Vycm9ycyhhckZvcm1FcnJvcnMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBoaWRlRXJyb3IoKSB7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRTY3JlZW4uaGlkZUVycm9ycygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJlcGFyZVNjcmVlbnMoKSB7XG4gICAgICAgIGNvbnN0IHNjcmVlbkVsZW1lbnRzID0gdGhpcy50ZW1wbGF0ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7U2NyZWVuX0NPTlNUUy5naWd5YUNsYXNzfWApO1xuICAgICAgICBsZXQgZmlyc3RTY3JlZW4gPSB0cnVlO1xuXG4gICAgICAgIEZvckVhY2goc2NyZWVuRWxlbWVudHMsIChzY3JlZW5FbGVtZW50LCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY3JlZW4gPSBuZXcgU2NyZWVuKHRoaXMsIHNjcmVlbkVsZW1lbnQgYXMgSFRNTERpdkVsZW1lbnQpO1xuXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5zW3NjcmVlbi5JRF0gPSBzY3JlZW47XG4gICAgICAgICAgICBpZiAoZmlyc3RTY3JlZW4pIHtcbiAgICAgICAgICAgICAgICBmaXJzdFNjcmVlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXJ0U2NyZWVuID0gc2NyZWVuPy52YXJpYW50R3JvdXBJZCA/PyBzY3JlZW4uSUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vY2FsbGVkIHdoZW4gbW9kYWwgZGlhbG9nIGlzIGNsb3NlIHRvIHVubGluayB3aWRnZXRzIGluIHNjcmVlblxuICAgIHB1YmxpYyBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuY2VsKCkge1xuICAgICAgICB0aGlzLmhpZGUoQ2xvc2VSZWFzb25zW0Nsb3NlUmVhc29ucy5jYW5jZWxlZF0sIG51bGwsIHRydWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBoaWRlKHJlYXNvbj86IHN0cmluZywgcmVzcG9uc2U/OiBJRm9ybVJlc3BvbnNlLCBhbHdheXNDbGVhckNvbnRhaW5lcj86IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy51bmRpbVNjcmVlblNldCgpO1xuXG4gICAgICAgIGNvbnN0IGFiVGVzdGluZyA9IHRoaXMuX2N1cnJlbnRTY3JlZW4/LmlzU2NyZWVuVmFyaWFudCAmJiB0aGlzLl9jdXJyZW50U2NyZWVuPy5hYlRlc3RpbmdEYXRhO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTW9kYWwgJiYgdGhpcy5fY3VycmVudFNjcmVlbikge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNjcmVlbi51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTY3JlZW4gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFsd2F5c0NsZWFyQ29udGFpbmVyICYmIHRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyLmNsb3NlKFxuICAgICAgICAgICAgcmVhc29uLFxuICAgICAgICAgICAgZ2lneWEudXRpbHMub2JqZWN0LnJlbW92ZVVuZGVmaW5lZCh7XG4gICAgICAgICAgICAgICAgdXNlcjogcmVzcG9uc2UgJiYgcmVzcG9uc2UudXNlcixcbiAgICAgICAgICAgICAgICBpc0Zsb3dGaW5hbGl6ZWQgOiAhdGhpcy5faXNDaGlsZCxcbiAgICAgICAgICAgICAgICBhYlRlc3RpbmdcbiAgICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBkaXNwb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5faXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VDaGlsZFNjcmVlblNldCgpO1xuXG5cbiAgICAgICAgRm9yRWFjaFByb3AodGhpcy5fc2NyZWVucywgcyA9PiBzLnVubGlua1RlbXBsYXRlKCkpO1xuXG4gICAgICAgIGlmICghdGhpcy5fY2hpbGQpIHtcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3Rlckdsb2JhbEV2ZW50cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2Rpc3Bvc2VDaGlsZFNjcmVlblNldCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NoaWxkKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZC5oaWRlKENsb3NlUmVhc29uc1tDbG9zZVJlYXNvbnMuY2FuY2VsZWRCeVBhcmVudF0pO1xuICAgICAgICAgICAgdGhpcy5fY2hpbGQuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5fY2hpbGQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3Rlckdsb2JhbEV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5hZGRHbG9iYWxFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgICAgIG9uTG9naW46IHRoaXMub25Vc2VyU3RhdGVDaGFuZ2UsXG4gICAgICAgICAgICBvbkxvZ291dDogdGhpcy5vblVzZXJTdGF0ZUNoYW5nZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1bnJlZ2lzdGVyR2xvYmFsRXZlbnRzKCkge1xuICAgICAgICB0aGlzLnJlbW92ZUdsb2JhbEV2ZW50SGFuZGxlcnMoe1xuICAgICAgICAgICAgb25Mb2dpbjogdGhpcy5vblVzZXJTdGF0ZUNoYW5nZSxcbiAgICAgICAgICAgIG9uTG9nb3V0OiB0aGlzLm9uVXNlclN0YXRlQ2hhbmdlLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLy8gVE9ETzogbW92ZSB0byBCYXNlUGx1Z2luP1xuICAgIHB1YmxpYyBnZXRFcnJvck1lc3NhZ2UoZXJyb3JDb2RlOiBHU0Vycm9ycywgaXNCb3VuZFRvRmllbGQ6IGJvb2xlYW4sIGZpZWxkTmFtZTogc3RyaW5nLCBmaWVsZERpc3BsYXlOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAoZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LKSByZXR1cm4gJyc7XG4gICAgICAgIHN3aXRjaCAoZXJyb3JDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlJFUVVJUkVEX1ZBTFVFX1ZBTElEQVRJT05fRVJST1I6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWlyZWRWYWx1ZVZhbGlkYXRpb25FcnJvck1lc3NhZ2UoaXNCb3VuZFRvRmllbGQsIGZpZWxkRGlzcGxheU5hbWUpO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5VTklRVUVfSURFTlRJRklFUl9FWElTVFM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VW5pcXVlSWRlbnRpZmllclZhbGlkYXRpb25FcnJvck1lc3NhZ2UoZmllbGROYW1lKTtcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuTkVUV09SS19FUlJPUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCduZXR3b3JrX2Vycm9yJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLklOVkFMSURfVFlQRV9WQUxJREFUSU9OX0VSUk9SOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ2RxbV9zZWxlY3Rpb25fZXJyb3InKTtcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuVkFMSURBVElPTl9FUlJPUjpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsaWRhdGlvbkVycm9yTWVzc2FnZShmaWVsZE5hbWUsIGZpZWxkRGlzcGxheU5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVycm9yTWVzc2FnZU5ldyhlcnJvckNvZGU6IEdTRXJyb3JzKTogc3RyaW5nIHtcbiAgICAgICAgc3dpdGNoIChlcnJvckNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuTk9UX1NVUFBPUlRFRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdub3Rfc3VwcG9ydGVkJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlBBU1NLRVlfQVVUSEVOVElDQVRPUl9SRUdJU1RFUkVEOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ3Bhc3NrZXlfYXV0aGVudGljYXRvcl9hbHJlYWR5X3JlZ2lzdGVyZWQnKTtcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuT1BFUkFUSU9OX0NBTkNFTEVEOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ29wZXJhdGlvbl9jYW5jZWxlZCcpO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5JTlZBTElEX1NJVEVfQ09ORklHVVJBVElPTl9FUlJPUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdpbnZhbGlkX3NpdGVfY29uZmlndXJhdGlvbicpO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5QQVNTS0VZX0VSUk9SOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ3Bhc3NrZXlfYXV0aGVudGljYXRvcl9lcnJvcicpO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5VTkFVVEhPUklaRURfVVNFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCd1bmF1dGhvcml6ZWRfdXNlcicpO1xuXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkFDQ09VTlRfRElTQUJMRUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgnYWNjb3VudF9pc19kaXNhYmxlZCcpO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdwZXJtaXNzaW9uX2RlbmllZCcpO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5BQ0NPVU5UX1RFTVBPUkFSSUxZX0xPQ0tFRF9PVVQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgnYWNjb3VudF90ZW1wb3JhcmlseV9sb2NrZWRfb3V0Jyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkxPR0lOX0ZBSUxFRF9DQVBUQ0hBX1JFUVVJUkVEOlxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5MT0dJTl9GQUlMRURfV1JPTkdfQ0FQVENIQTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdsb2dpbl9jYXB0Y2hhX2Vycm9yJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlJFUVVFU1RfRkFJTEVEX0NBUFRDSEFfUkVRVUlSRUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgncmVxdWVzdF9jYXB0Y2hhX2Vycm9yJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkxPR0lOX0lERU5USUZJRVJfRVhJU1RTOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ2xvZ2luX2lkZW50aWZpZXJfZXhpc3RzJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlVOSVFVRV9JREVOVElGSUVSX0VYSVNUUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCd1bmlxdWVfaWRlbnRpZmllcl9leGlzdHMnKTtcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuVU5ERVJBR0VfVVNFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdzb3JyeV93ZV9hcmVfbm90X2FibGVfdG9fcHJvY2Vzc195b3VyX3JlZ2lzdHJhdGlvbicpOyAvL0NPUFBBXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLklOVkFMSURfTE9HSU5JRDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdpbnZhbGlkX2xvZ2luX29yX3Bhc3N3b3JkJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkxPR0lOSURfRE9FU19OT1RfRVhJU1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgndGhlcmVfaXNfbm9fdXNlcl93aXRoX3RoYXRfdXNlcm5hbWVfb3JfZW1haWwnKTtcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuSU5WQUxJRF9QQVJBTUVURVJfVkFMVUU6IC8vIGludmFsaWQgcGFyYW1ldGVyIHZhbHVlXG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkRVUExJQ0FURV9OT05DRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCd0aGVyZV9hcmVfZXJyb3JzX2luX3lvdXJfZm9ybV9wbGVhc2VfdHJ5X2FnYWluJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLk9MRF9QQVNTV09SRF9VU0VEOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ29sZF9wYXNzd29yZF9jYW5ub3RfYmVfdGhlX3NhbWVfYXNfbmV3X3Bhc3N3b3JkJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLk5FVFdPUktfRVJST1I6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgnbmV0d29ya19lcnJvcicpO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5GT1JCSURERU46XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgnZm9yYmlkZGVuX2Vycm9yJyk7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLkZSRVFVRU5DWV9MSU1JVF9SRUFDSEVEOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ2NvZGVfZnJlcXVlbmN5X2xpbWl0X3JlYWNoZWQnKTtcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1JFR0lTVFJBVElPTjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdhY2NvdW50X3BlbmRpbmdfcmVnaXN0cmF0aW9uJyk7XG5cbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuT0s6XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdnZW5lcmFsX2Vycm9yJylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UmVxdWlyZWRWYWx1ZVZhbGlkYXRpb25FcnJvck1lc3NhZ2UoaXNCb3VuZFRvRmllbGQ6IGJvb2xlYW4sIGZpZWxkRGlzcGxheU5hbWU6IHN0cmluZykge1xuICAgICAgICBpZiAoaXNCb3VuZFRvRmllbGQpIHtcbiAgICAgICAgICAgIC8vICM0OTk2OCAtIFJlcGxhY2UgJWZpZWxkbmFtZSBldmVuIHRob3VnaCB0aGUgZGVmYXVsdHMgZG9uJ3QgdXNlIGl0IHRvIHN1cHBvcnQgJWZpZWxkbmFtZSBpbiBjdXN0b21MYW5nLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgndGhpc19maWVsZF9pc19yZXF1aXJlZCcsICclZmllbGRuYW1lJywgZmllbGREaXNwbGF5TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgncGxlYXNlX2VudGVyX2ZpZWxkbmFtZScsICclZmllbGRuYW1lJywgZmllbGREaXNwbGF5TmFtZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRVbmlxdWVJZGVudGlmaWVyVmFsaWRhdGlvbkVycm9yTWVzc2FnZShmaWVsZE5hbWU6IHN0cmluZykge1xuICAgICAgICBzd2l0Y2ggKGZpZWxkTmFtZSkge1xuICAgICAgICAgICAgY2FzZSAndXNlcm5hbWUnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRleHQoJ3VzZXJuYW1lX2FscmVhZHlfZXhpc3RzJyk7XG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgnZW1haWxfYWxyZWFkeV9leGlzdHMnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRWYWxpZGF0aW9uRXJyb3JNZXNzYWdlKGZpZWxkTmFtZTogc3RyaW5nLCBmaWVsZERpc3BsYXlOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgc3dpdGNoIChmaWVsZE5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2VtYWlsJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdlbWFpbF9hZGRyZXNzX2lzX2ludmFsaWQnKTtcbiAgICAgICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzpcbiAgICAgICAgICAgIGNhc2UgJ25ld1Bhc3N3b3JkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdwYXNzd29yZF9kb2VzX25vdF9tZWV0X2NvbXBsZXhpdHlfcmVxdWlyZW1lbnRzJyk7XG4gICAgICAgICAgICBjYXNlICdwYXNzd29yZFJldHlwZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgncGFzc3dvcmRzX2RvX25vdF9tYXRjaCcpO1xuICAgICAgICAgICAgY2FzZSAnbG9naW5JRCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGV4dCgnaW52YWxpZF9sb2dpbl9vcl9wYXNzd29yZCcpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCdpbnZhbGlkX2ZpZWxkbmFtZScsICclZmllbGRuYW1lJywgZmllbGREaXNwbGF5TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVE9ETzogUmVtb3ZlIHdoZW4gdXBkYXRlQWNjb3VudEluZm9Bc3luYyB3aWxsIGJlIHJlbGVhc2VkIGFuZCB1cGRhdGVBY2NvdW50SW5mb0FzeW5jIGZsYWcgZGVsZXRlZFxuICAgIHB1YmxpYyB1cGRhdGVBY2NvdW50SW5mbyhmbkNhbGxiYWNrOiAocmVzcG9uc2U6IGFueSkgPT4gdm9pZCwgaW5jbHVkZSA9ICdwcm9maWxlLGRhdGEnKSB7XG4gICAgICAgIGdpZ3lhLmFjY291bnRzLmdldEFjY291bnRJbmZvKHRoaXMucGFyYW1zLCB7XG4gICAgICAgICAgICBpbmNsdWRlOiBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKHRoaXMucGFyYW1zLmluY2x1ZGUsIGluY2x1ZGUpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWNjb3VudEluZm8ocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGZuQ2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHVwZGF0ZUFjY291bnRJbmZvQXN5bmMoZm5DYWxsYmFjazogKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQsIGluY2x1ZGUgPSAncHJvZmlsZSxkYXRhJykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGdpZ3lhLmFjY291bnRzLmdldEFjY291bnRJbmZvKHRoaXMucGFyYW1zLCB7XG4gICAgICAgICAgICBpbmNsdWRlOiBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKHRoaXMucGFyYW1zLmluY2x1ZGUsIGluY2x1ZGUpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQWNjb3VudEluZm8ocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGZuQ2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcHVibGljIG9uQWNjb3VudEluZm8ocmVzcG9uc2UpIHtcblxuICAgICAgICBjb25zdCBhY2NvdW50SW5mbyA9IHJlc3BvbnNlLmFjY291bnRJbmZvIHx8IHJlc3BvbnNlO1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5nZXRBcGlEYXRhKCk7XG4gICAgICAgIGlmICghYXBpRGF0YS5nZXRBY2NvdW50SW5mbykge1xuICAgICAgICAgICAgYXBpRGF0YS5nZXRBY2NvdW50SW5mbyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgRm9yRWFjaChbJ3Byb2ZpbGUnLCAnZGF0YScsICdwcmVmZXJlbmNlcycsICdzdWJzY3JpcHRpb25zJywgJ2VtYWlscycsICdsb2dpbklEcyddLCBwcm9wID0+IHtcbiAgICAgICAgICAgIGlmIChhY2NvdW50SW5mb1twcm9wXSkge1xuICAgICAgICAgICAgICAgIGFwaURhdGEuZ2V0QWNjb3VudEluZm9bcHJvcF0gPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2FwaURhdGEuZ2V0QWNjb3VudEluZm9bcHJvcF0gfHwge30sIGFjY291bnRJbmZvW3Byb3BdXSk7XG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHNjcmVlbnNldCBhY2NvdW50SW5mby4ke3Byb3B9IGNhY2hlIHVwZGF0ZWQ6YCwgYXBpRGF0YS5nZXRBY2NvdW50SW5mb1twcm9wXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVuc3VyZSBhbnkgY29uZGl0aW9ucyB0aGF0IHJlbHkgb24gYWNjb3VudCBpbmZvIGFyZSB1cGRhdGVkLlxuICAgICAgICBpZiAodGhpcy5fY3VycmVudFNjcmVlbikge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNjcmVlbi5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1JlcXVlc3RQYXJhbVZhbHVlc01hdGNoKGNhY2hlZFZhbHVlOiBhbnksIGV4cGVjdGVkVmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuXG4gICAgICAgIGlmICh0eXBlb2YgZXhwZWN0ZWRWYWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBleHBlY3RlZFZhbHVlID09PSBjYWNoZWRWYWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxvb2tJbk9iaiA9IGNhY2hlZFZhbHVlLnNwbGl0KCcsJykucmVkdWNlKChwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByZXZpb3VzVmFsdWUsIHtbY3VycmVudFZhbHVlXTogY3VycmVudFZhbHVlfSk7XG4gICAgICAgIH0sIHt9KTtcblxuICAgICAgICBleHBlY3RlZFZhbHVlLnNwbGl0KCcsJykuZm9yRWFjaCh4ID0+IHtcbiAgICAgICAgICAgIGlmICghbG9va0luT2JqLmhhc093blByb3BlcnR5KHgpIHx8IGxvb2tJbk9ialt4XSAhPT0geClcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFzUmVxdWlyZWRBcGlEYXRhKG1ldGhvZE5hbWU6IHN0cmluZywgcGFyYW1zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge30pOiBib29sZWFuIHtcblxuICAgICAgICBjb25zdCBjYWNoZWRSZXNwb25zZSA9IHRoaXMuZGF0YS5hcGlEYXRhW21ldGhvZE5hbWVdO1xuICAgICAgICBpZiAoIWNhY2hlZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAoIWNhY2hlZFJlc3BvbnNlLnJlcXVlc3RQYXJhbXM/Lmhhc093blByb3BlcnR5KGtleSkgLy8ga2V5IGRvZXNuJ3QgZXhpc3RzIGluIHJlcXVlc3QgcGFyYW1zXG4gICAgICAgICAgICAgICAgfHwgIXRoaXMuaXNSZXF1ZXN0UGFyYW1WYWx1ZXNNYXRjaChjYWNoZWRSZXNwb25zZS5yZXF1ZXN0UGFyYW1zW2tleV0sIHBhcmFtc1trZXldKSkgeyAvLyB2YWx1ZXMgZG9lcyBub3QgbWF0Y2hcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uQXBpRGF0YShyZXNwb25zZSwgZm9ybUNvbnRleHQ6IElGb3JtQ29udGV4dCwgcHJldkZvcm06IElGb3JtKSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgdXBkYXRpbmcgc2NyZWVuc2V0IGNhY2hlIG9mICR7cmVzcG9uc2Uub3BlcmF0aW9ufWApO1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5nZXRBcGlEYXRhKCk7XG4gICAgICAgIGNvbnN0IGFwaU1ldGhvZEtleSA9IHRoaXMuZ2V0QXBpTWV0aG9kRnJvbUZ1bGxOYW1lc3BhY2UocmVzcG9uc2Uub3BlcmF0aW9uKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9wZXJhdGlvbi5pbmRleE9mKCdnZXRQcm92aWRlcnMnKSA+IC0xKSB7XG4gICAgICAgICAgICBhcGlEYXRhW2FwaU1ldGhvZEtleV0gPSBPYmplY3QuYXNzaWduKHJlc3BvbnNlLCB7YWN0aXZlUHJvdmlkZXJzOiB0aGlzLmdldEVkaXRhYmxlVGZhUHJvdmlkZXIocmVzcG9uc2UuYWN0aXZlUHJvdmlkZXJzKX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYoYXBpTWV0aG9kS2V5KXtcbiAgICAgICAgICAgICAgYXBpRGF0YVthcGlNZXRob2RLZXldID0gcmVzcG9uc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzcG9uc2UucmVnVG9rZW4pIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGB1cGRhdGluZyBzY3JlZW5zZXQgcmVnVG9rZW5gKTtcbiAgICAgICAgICAgIHRoaXMuZXN0YWJsaXNoUmVnVG9rZW4ocmVzcG9uc2UucmVnVG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGdvdEFsbE5lZWRlZERhdGEgPSB0cnVlO1xuICAgICAgICBmb3IgKGxldCBtZXRob2ROYW1lIGluIHRoaXMuZGF0YS5uZWVkZWREYXRhKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLm5lZWRlZERhdGEuaGFzT3duUHJvcGVydHkobWV0aG9kTmFtZSkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5oYXNSZXF1aXJlZEFwaURhdGEobWV0aG9kTmFtZSwgdGhpcy5kYXRhLm5lZWRlZERhdGFbbWV0aG9kTmFtZV0ucGFyYW1zKSkge1xuICAgICAgICAgICAgICAgIGdvdEFsbE5lZWRlZERhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZ290QWxsTmVlZGVkRGF0YSkge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGdvdCBhbGwgcmVxdWlyZWQgZGF0YWApO1xuICAgICAgICAgICAgdGhpcy5sb2FkTmV4dFNjcmVlbihmb3JtQ29udGV4dCwgcHJldkZvcm0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNob29zZU5leHRTY3JlZW4obmV4dFNjcmVlblZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCFuZXh0U2NyZWVuVmFsdWUpIHJldHVybjtcblxuICAgICAgICB2YXIgcG9zc2libGVTY3JlZW5zID0gbmV4dFNjcmVlblZhbHVlLnNwbGl0KCcsJyk7XG5cbiAgICAgICAgLy8gV2VpZ2h0ZWQgc2NyZWVuIHBvc3NpYmlsaXRpZXNcbiAgICAgICAgdmFyIHdlaWdodFN1bSA9IDA7XG4gICAgICAgIHZhciB3ZWlnaHRlZFBhcnRzID0gW107XG4gICAgICAgIEZvckVhY2gocG9zc2libGVTY3JlZW5zLCBzY3JlZW4gPT4ge1xuICAgICAgICAgICAgdmFyIHBhcnRzID0gc2NyZWVuLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICB2YXIgd2VpZ2h0ID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnNlSW50KHBhcnRzWzFdKSA6IDE7XG5cbiAgICAgICAgICAgIHdlaWdodFN1bSArPSB3ZWlnaHQ7XG5cbiAgICAgICAgICAgIHdlaWdodGVkUGFydHMucHVzaCh7XG4gICAgICAgICAgICAgICAgc2NyZWVuOiBwYXJ0c1swXSxcbiAgICAgICAgICAgICAgICB3ZWlnaHQ6IHdlaWdodCwgLy8gdG90YWwgd2VpZ2h0IHVwIHRvIHRoaXMgc2NyZWVuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHJhbmRvbSA9IHRoaXMuX3JhbmRvbSAqIHdlaWdodFN1bTtcbiAgICAgICAgdmFyIHNlbGVjdGVkU2NyZWVuOiBzdHJpbmc7XG5cbiAgICAgICAgU29tZSh3ZWlnaHRlZFBhcnRzLCB3ID0+IHtcbiAgICAgICAgICAgIHJhbmRvbSAtPSB3LndlaWdodDtcblxuICAgICAgICAgICAgaWYgKHJhbmRvbSA+IDApIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgc2VsZWN0ZWRTY3JlZW4gPSB3LnNjcmVlbjtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRTY3JlZW47XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRFZGl0YWJsZVRmYVByb3ZpZGVyKGFjdGl2ZVByb3ZpZGVycyA9IFtdKTogc3RyaW5nW10ge1xuICAgICAgICB2YXIgZWRpdGFibGVQcm92aWRlcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3RpdmVQcm92aWRlcnMubGVuZ3RoIC0gMDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaXNFZGl0YWJsZSA9IHRoaXMuaXNUZmFQcm92aWRlckVkaXRhYmxlKGFjdGl2ZVByb3ZpZGVyc1tpXS5uYW1lKTtcbiAgICAgICAgICAgIGlmIChpc0VkaXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgZWRpdGFibGVQcm92aWRlcnMucHVzaChhY3RpdmVQcm92aWRlcnNbaV0ubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVkaXRhYmxlUHJvdmlkZXJzO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNUZmFQcm92aWRlckVkaXRhYmxlKHByb3ZpZGVyVG9DaGVjayk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBnbyBvdmVyIHRoZSBsaXN0IG9mIGVkaXRhYmxlIHByb3ZpZGVyc1xuICAgICAgICByZXR1cm4gRWRpdGFibGVUZmFQcm92aWRlcnNUeXBlc1twcm92aWRlclRvQ2hlY2tdICE9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEFwaU1ldGhvZEZyb21GdWxsTmFtZXNwYWNlKG9wZXJhdGlvbikge1xuICAgICAgICBjb25zdCBhcGlVcmxTZWdtZW50cyA9IG9wZXJhdGlvbi5zcGxpdCgnLicpO1xuICAgICAgICByZXR1cm4gYXBpVXJsU2VnbWVudHNbYXBpVXJsU2VnbWVudHMubGVuZ3RoIC0gMV07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzd2l0Y2hUb0NoaWxkU2NyZWVuU2V0KHNjcmVlblNldE5hbWU6IHN0cmluZywgc2NyZWVuSUQ6IHN0cmluZywgZm9ybTogSUZvcm0pOiBib29sZWFuIHtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYG9wZW5pbmcgY2hpbGQgc2NyZWVuc2V0OiAke3NjcmVlblNldE5hbWV9LyR7c2NyZWVuSUR9YCk7XG5cbiAgICAgICAgdmFyIGhpZGVDaGlsZEhhbmRsZXIgPSAoZTogSUhpZGVFdmVudCkgPT4ge1xuXG4gICAgICAgICAgICB0aGlzLnBhcmFtcy5yZWdUb2tlbiA9IHRoaXMuZGF0YS5yZWdUb2tlbjtcblxuICAgICAgICAgICAgc3dpdGNoIChDbG9zZVJlYXNvbnNbZS5yZWFzb25dKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBDbG9zZVJlYXNvbnMuY2FuY2VsZWRCeVBhcmVudDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBDbG9zZVJlYXNvbnMuZXJyb3I6XG4gICAgICAgICAgICAgICAgY2FzZSBDbG9zZVJlYXNvbnMuY2FuY2VsZWQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZShlLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2xvc2VSZWFzb25zLnBlbmRpbmdFcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNjcmVlblJlc3BvbnNlKHRoaXMuZGF0YS5sYXN0U3VibWl0dGVkRm9ybVJlc3BvbnNlLCBmb3JtLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgQ2xvc2VSZWFzb25zLmZpbmlzaGVkOlxuICAgICAgICAgICAgICAgIGNhc2UgQ2xvc2VSZWFzb25zLnNraXA6XG4gICAgICAgICAgICAgICAgY2FzZSBDbG9zZVJlYXNvbnMubWlzc2luZzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAvLyBBbnkgYXJiaXRyYXJ5IHJlYXNvbiB3aWxsIGJlIHRyZWF0ZWQgYXMgZmluaXNoZWQgZmxvd1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kaXNwb3NlQ2hpbGRTY3JlZW5TZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNjcmVlblJlc3BvbnNlKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRTY3JlZW5TZXRDbG9zZVJlYXNvbjogZS5yZWFzb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogZS51c2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9uRXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcy5vbkVycm9yKSB0aGlzLnBhcmFtcy5vbkVycm9yKGUpO1xuXG4gICAgICAgICAgICB0aGlzLmhpZGUoQ2xvc2VSZWFzb25zW0Nsb3NlUmVhc29ucy5lcnJvcl0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBjaGlsZFBhcmFtczogSVNjcmVlblNldFBhcmFtcyA9IHtcbiAgICAgICAgICAgIHNjcmVlblNldDogc2NyZWVuU2V0TmFtZSxcbiAgICAgICAgICAgIGxhbmc6IHRoaXMuZ2V0TGFuZ0ZvclNjcmVlblNldCgpLFxuICAgICAgICAgICAgY3VzdG9tTGFuZzogdGhpcy5fb3JpZ2luYWxDdXN0b21MYW5nLFxuICAgICAgICAgICAgcGFyZW50VHJhbnNsYXRpb25zOiB0aGlzLnBhcmFtcy5jdXN0b21MYW5nLFxuICAgICAgICAgICAgd2lkdGg6IHRoaXMucGFyYW1zLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnBhcmFtcy5oZWlnaHQsXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLnBhcmFtcy5jb250ZXh0LFxuICAgICAgICAgICAgY2lkOiB0aGlzLnBhcmFtcy5jaWQsXG4gICAgICAgICAgICByZWdTb3VyY2U6IHRoaXMucGFyYW1zLnJlZ1NvdXJjZSxcbiAgICAgICAgICAgIHJlZ1Rva2VuOiB0aGlzLnBhcmFtcy5yZWdUb2tlbixcbiAgICAgICAgICAgIG9uRXJyb3I6IHRoaXMucGFyYW1zLm9uRXJyb3IsXG4gICAgICAgICAgICBvbkJlZm9yZVN1Ym1pdDogdGhpcy5wYXJhbXMub25CZWZvcmVTdWJtaXQsXG4gICAgICAgICAgICBvbkFmdGVyU3VibWl0OiB0aGlzLnBhcmFtcy5vbkFmdGVyU3VibWl0LFxuICAgICAgICAgICAgb25TdWJtaXQ6IHRoaXMucGFyYW1zLm9uU3VibWl0LFxuICAgICAgICAgICAgb25CZWZvcmVTY3JlZW5Mb2FkOiB0aGlzLnBhcmFtcy5vbkJlZm9yZVNjcmVlbkxvYWQsXG4gICAgICAgICAgICBvbkFmdGVyU2NyZWVuTG9hZDogdGhpcy5wYXJhbXMub25BZnRlclNjcmVlbkxvYWQsXG4gICAgICAgICAgICBvbkFmdGVyVmFsaWRhdGlvbjogdGhpcy5wYXJhbXMub25BZnRlclZhbGlkYXRpb24sXG4gICAgICAgICAgICBvbkJlZm9yZVZhbGlkYXRpb246IHRoaXMucGFyYW1zLm9uQmVmb3JlVmFsaWRhdGlvbixcbiAgICAgICAgICAgIG9uRmllbGRDaGFuZ2VkOiB0aGlzLnBhcmFtcy5vbkZpZWxkQ2hhbmdlZCxcbiAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0aGlzLnBhcmFtcy5pZ25vcmVBcGlRdWV1ZSxcbiAgICAgICAgICAgIG9uSGlkZTogaGlkZUNoaWxkSGFuZGxlcixcbiAgICAgICAgICAgIHBhcmVudERhdGE6IHRoaXMuZGF0YSxcbiAgICAgICAgICAgIGdldEluc3RhbmNlOiBjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hpbGQgPSBjaGlsZCBhcyBhbnk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FsbG93TXVsdGlwbGVJbnN0YW5jZXM6IHRydWUsXG4gICAgICAgICAgICBzZXNzaW9uRXhwaXJhdGlvbjogdGhpcy5wYXJhbXMuc2Vzc2lvbkV4cGlyYXRpb25cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc2NyZWVuSUQpIGNoaWxkUGFyYW1zLnN0YXJ0U2NyZWVuID0gc2NyZWVuSUQ7XG5cbiAgICAgICAgdGhpcy5oaWRlU2NyZWVuU2V0Q29udGFpbmVyKCk7XG4gICAgICAgIGlmICh0aGlzLmlzTW9kYWwpIHtcbiAgICAgICAgICAgIGNoaWxkUGFyYW1zLm5ld01vZGFsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoaWxkUGFyYW1zLmNvbnRhaW5lcklEID0gdGhpcy5fZWxDaGlsZENvbnRhaW5lci5pZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGdpZ3lhW1NjcmVlblNldFBsdWdpbl9DT05TVFMubmFtZXNwYWNlXVtTY3JlZW5TZXRQbHVnaW5fQ09OU1RTLnNob3dTY3JlZW5TZXROYW1lXShjaGlsZFBhcmFtcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFJldHVybnMgd2hldGhlciBzY3JlZW4gd2FzIHN3aXRjaGVkXG4gICAgcHVibGljIHN3aXRjaFNjcmVlbihzY3JlZW5JRDogc3RyaW5nLCByZXNwb25zZT86IElGb3JtUmVzcG9uc2UsIG9Gb3JtPzogSUZvcm0pOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHtzY3JlZW5JZCwgc2NyZWVuU2V0TmFtZX0gPSB0aGlzLnNjcmVlblBhcnRzKHNjcmVlbklEKTtcblxuICAgICAgICAvLyBpZiB5b3UgcmVxdWVzdCB0aGUgc2FtZSBzY3JlZW4gc2V0IC0ganVzdCB3b3JrIHdpdGhpbiB0aGUgY3VycmVudCBzY3JlZW5TZXRcbiAgICAgICAgaWYgKHNjcmVlblNldE5hbWUgPT09IHRoaXMucGFyYW1zLnNjcmVlblNldCkge1xuICAgICAgICAgICAgc2NyZWVuU2V0TmFtZSA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICghc2NyZWVuSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndhcm4oJ0F0dGVtcHQgdG8gb3BlbiBzY3JlZW4tc2V0IFwiJyArIHNjcmVlblNldE5hbWUgKyAnXCIgZnJvbSB3aXRoaW4gdGhlIHNhbWUgc2NyZWVuLXNldCwgd2l0aG91dCBzcGVjaWZ5aW5nIHNjcmVlbiB0byBtb3ZlIHRvLicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzY3JlZW5TZXROYW1lKSByZXR1cm4gdGhpcy5zd2l0Y2hUb0NoaWxkU2NyZWVuU2V0KHNjcmVlblNldE5hbWUsIHNjcmVlbklkLCBvRm9ybSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3dpdGNoVG9Mb2NhbFNjcmVlbihzY3JlZW5JZCwgcmVzcG9uc2UsIG9Gb3JtKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc3dpdGNoVG9Mb2NhbFNjcmVlbihzY3JlZW5JRDogc3RyaW5nLCByZXNwb25zZT86IElGb3JtUmVzcG9uc2UsIG9Gb3JtPzogSUZvcm0pOiBib29sZWFuIHtcblxuICAgICAgICBpZiAoRW5kRmxvd1NjcmVlbnNbc2NyZWVuSURdKSB7XG4gICAgICAgICAgICB0aGlzLmVuZEZsb3cocmVzcG9uc2UsIG9Gb3JtLCBFbmRGbG93U2NyZWVuc1tzY3JlZW5JRF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjcmVlbklEID09PSBTY3JlZW5TZXRQbHVnaW5fQ09OU1RTLnN0YXlPblNjcmVlbikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIUZsYWdTZXJ2aWNlLnNraXBTYW1lU2NyZWVuQ2hlY2tPblN3aXRjaCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRTY3JlZW4gJiYgdGhpcy5fY3VycmVudFNjcmVlbi5JRCA9PT0gc2NyZWVuSUQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgc3dpdGNoaW5nIHRvIHNjcmVlbjogJHtzY3JlZW5JRH1gKTtcblxuICAgICAgICB0aGlzLl9uZXh0U2NyZWVuID0gdGhpcy5fc2NyZWVuc1tzY3JlZW5JRF0gfHwgR3JvdXBWYXJpYW50UHJvdmlkZXIuZ2V0R3JvdXBWYXJpYW50KHRoaXMuX3NjcmVlbnMsIHRoaXMuX0lELCB0aGlzLmlzQWN0aXZlR3JvdXAoc2NyZWVuSUQpLCBzY3JlZW5JRCk7XG4gICAgICAgIGlmICghdGhpcy5fbmV4dFNjcmVlbikge1xuICAgICAgICAgICAgdGhpcy53YXJuKCdNaXNzaW5nIHNjcmVlbiBcIicgKyBzY3JlZW5JRCArICdcIicpO1xuICAgICAgICAgICAgdGhpcy5oaWRlKENsb3NlUmVhc29uc1tDbG9zZVJlYXNvbnMubWlzc2luZ10pO1xuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0U2NyZWVuLnJlcXVlc3RlZFNjcmVlbklkID0gc2NyZWVuSUQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkICYmICF0aGlzLl9uZXh0U2NyZWVuLmhhdmVGb3JtcygpKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBXaHkgbm90IGFsbG93IGEgc2NyZWVuIHRoYXQgY29udGFpbnMgb25seSBhbiBhZCBhbmQgc2NyZWVuIGxpbmtzP1xuICAgICAgICAgICAgdGhpcy5lbmRGbG93KHJlc3BvbnNlLCBvRm9ybSwgQ2xvc2VSZWFzb25zLmZpbmlzaGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fY3VycmVudFNjcmVlbikgdGhpcy5zZXROZXh0U2NyZWVuU2l6ZSgpOyAvLyBkcmF3IGFuIGVtcHR5IHNjcmVlbiB3aXRoIGEgcHJvZ3Jlc3NcblxuICAgICAgICBsZXQgc2hvdWxkV2FpdEZvckRhdGEgPSBmYWxzZTtcblxuICAgICAgICBsZXQgZXh0cmFQcm9maWxlRmllbGRzID0gdGhpcy5fbmV4dFNjcmVlbi5nZXRFeHRyYVByb2ZpbGVGaWVsZHMoZmFsc2UpLmpvaW4oJywnKTtcblxuICAgICAgICBjb25zdCBmb3JtQ29udGV4dCA9IHJlc3BvbnNlIGFzIElGb3JtQ29udGV4dDtcblxuICAgICAgICB0aGlzLmRhdGEubmVlZGVkRGF0YSA9IHRoaXMuX25leHRTY3JlZW4uZ2V0TmVlZGVkRGF0YShmb3JtQ29udGV4dCk7XG5cbiAgICAgICAgY29uc3QgYXBpRGF0YSA9IHRoaXMuZ2V0QXBpRGF0YSgpO1xuXG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5wcmVwYXJlQ2FsbGJhY2socmVzID0+IHRoaXMub25BcGlEYXRhKHJlcywgZm9ybUNvbnRleHQsIG9Gb3JtKSk7XG5cbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlcXVpcmVkIGRhdGEgZm9yIHRoZSBzY3JlZW46YCwgdGhpcy5kYXRhLm5lZWRlZERhdGEpO1xuICAgICAgICBGb3JFYWNoUHJvcDxJTmVlZGVkRGF0YU1ldGhvZENvbmZpZz4odGhpcy5kYXRhLm5lZWRlZERhdGEsIChtZXRob2RJbmZvLCBtZXRob2ROYW1lKSA9PiB7XG4gICAgICAgICAgICB2YXIgZGlzYWJsZUNhY2hlID0gZ2lneWEudXRpbHMudmFsaWRhdGlvbi5pc0V4cGxpY2l0RmFsc2UobWV0aG9kSW5mby5jYWNoZSk7XG4gICAgICAgICAgICBpZiAoZGlzYWJsZUNhY2hlICYmIGFwaURhdGEpIGRlbGV0ZSBhcGlEYXRhW21ldGhvZE5hbWVdO1xuXG4gICAgICAgICAgICBpZiAoIWFwaURhdGFbbWV0aG9kTmFtZV0gfHwgKG1ldGhvZE5hbWUgPT09ICdnZXRBY2NvdW50SW5mbycgJiYgZXh0cmFQcm9maWxlRmllbGRzICE9PSAnJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBpRGF0YVttZXRob2ROYW1lXSkgZGVsZXRlIGFwaURhdGFbbWV0aG9kTmFtZV07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRpbVNjcmVlblNldCgpO1xuICAgICAgICAgICAgICAgIHNob3VsZFdhaXRGb3JEYXRhID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJhUGFyYW1zID0ge2NhbGxiYWNrfTtcbiAgICAgICAgICAgICAgICBpZiAobWV0aG9kSW5mby5yZXNwb25zZUhhbmRsZXIpXG4gICAgICAgICAgICAgICAgLy8gSWYgbWV0aG9kIGhhcyBhIHNwZWNpZmljIHJlc3BvbnNlIGhhbmRsZXIsIGdvIHRocm91Z2ggaXQgYmVmb3JlIHBhc3NpbmcgdGhlIGRhdGEgdG8gdGhlIHNjcmVlblNldFxuICAgICAgICAgICAgICAgICAgICBleHRyYVBhcmFtcy5jYWxsYmFjayA9IHJlcyA9PiB0aGlzLm9uQXBpRGF0YShtZXRob2RJbmZvLnJlc3BvbnNlSGFuZGxlcihyZXMpLCBmb3JtQ29udGV4dCwgb0Zvcm0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZE5hbWUgPT09ICdnZXRBY2NvdW50SW5mbycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJhUHJvZmlsZUZpZWxkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFQYXJhbXNbJ2V4dHJhUHJvZmlsZUZpZWxkcyddID0gZXh0cmFQcm9maWxlRmllbGRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gZ2lneWEudXRpbHMub2JqZWN0LmV4cHJlc3Npb25IZWxwZXIoZ2lneWEuYWNjb3VudHMpLmdldEZpZWxkKG1ldGhvZE5hbWUpXG4gICAgICAgICAgICAgICAgICAgIHx8IGdpZ3lhLnNvY2lhbGl6ZVttZXRob2ROYW1lXSB8fCBnaWd5YS5hY2NvdW50cy50ZmFbbWV0aG9kTmFtZV0gfHwgZ2lneWEuYWNjb3VudHMuYjJiW21ldGhvZE5hbWVdO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kUGFyYW1zID0gZ2lneWEudXRpbHMub2JqZWN0LnJlbW92ZVVuZGVmaW5lZChtZXRob2RJbmZvLnBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGhvZFBhcmFtcyAmJiBtZXRob2RQYXJhbXNbJ2luY2x1ZGUnXSAmJiB0aGlzLnBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2RQYXJhbXNbJ2luY2x1ZGUnXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZFBhcmFtc1snaW5jbHVkZSddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zWydpbmNsdWRlJ10pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKG1ldGhvZEluZm8uc2hvdWxkRXhlY3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2RJbmZvLnNob3VsZEV4ZWN1dGUoKS50aGVuKChzaG91bGRFeGVjdXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkRXhlY3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZCh0aGlzLnBhcmFtcywgbWV0aG9kUGFyYW1zLCBleHRyYVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBtZXRob2Qgc2hvdWxkIG5vdCBiZSBleGVjdXRlZCBhbmQgdGhlIG9uQXBpRGF0YSBjYWxsYmFjayB3aWxsIG5vdCBvY2N1ciBhZnRlciB0aGUgcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byByZW1vdmUgdGhpcyBtZXRob2QgZnJvbSB0aGUgbmVlZGVkIGRhdGEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tTmVlZGVkRGF0YSh0aGlzLmRhdGEubmVlZGVkRGF0YSwgbWV0aG9kTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgY2FsbCBvbkFwaURhdGEgbWFudWFsbHkgd2l0aCBhbiBlbXB0eSBtZXRob2QgbmFtZSB0byBjb250aW51ZSB0aGUgZmxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25BcGlEYXRhKHtvcGVyYXRpb246ICcnfSwgZm9ybUNvbnRleHQsIG9Gb3JtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kKHRoaXMucGFyYW1zLCBtZXRob2RQYXJhbXMsIGV4dHJhUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHNob3VsZFdhaXRGb3JEYXRhKSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgd2FpdGluZyBmb3IgcmVxdWlyZWQgZGF0YWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkTmV4dFNjcmVlbihmb3JtQ29udGV4dCwgb0Zvcm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNob3VsZENsb3NlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pc01vZGFsO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBsb2FkTmV4dFNjcmVlbihmb3JtQ29udGV4dDogSUZvcm1Db250ZXh0LCBwcmV2Rm9ybTogSUZvcm0pIHtcbiAgICAgICAgY29uc3Qgc2NyZWVuSUQgPSB0aGlzLl9uZXh0U2NyZWVuLklEO1xuICAgICAgICBjb25zdCBsb2dnZXIgPSBnaWd5YS5sb2dnZXIuZ3JvdXAoYGxvYWRpbmcgc2NyZWVuICR7c2NyZWVuSUR9YCk7XG5cbiAgICAgICAgY29uc3QgYmVmb3JlTG9hZEV2ZW50ID0gZ2lneWEudXRpbHMub2JqZWN0LnJlbW92ZVVuZGVmaW5lZCh7XG4gICAgICAgICAgICBldmVudE5hbWU6ICdiZWZvcmVTY3JlZW5Mb2FkJyxcbiAgICAgICAgICAgIGN1cnJlbnRTY3JlZW46IHRoaXMuX2N1cnJlbnRTY3JlZW4/LnJlcXVlc3RlZFNjcmVlbixcbiAgICAgICAgICAgIGZvcm06IHRoaXMuZGF0YS5sYXN0U3VibWl0dGVkRm9ybUlELFxuICAgICAgICAgICAgcmVzcG9uc2U6IGdpZ3lhLnV0aWxzLm9iamVjdC5jbG9uZSh0aGlzLmRhdGEubGFzdFN1Ym1pdHRlZEZvcm1SZXNwb25zZSksXG4gICAgICAgICAgICBwcm9maWxlOiB0aGlzLmdldFByb2ZpbGUoKSxcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuZ2V0U2NoZW1hRGF0YSgpLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uczogdGhpcy5nZXRTdWJTY3JpcHRpb25zKCksXG4gICAgICAgICAgICBjb21tdW5pY2F0aW9uczogdGhpcy5nZXRDb21tdW5pY2F0aW9ucygpLFxuICAgICAgICAgICAgcHJlZmVyZW5jZXM6IHRoaXMuZ2V0UHJlZmVyZW5jZXMoKSxcbiAgICAgICAgICAgIG5leHRTY3JlZW46IHRoaXMuX25leHRTY3JlZW4/LnJlcXVlc3RlZFNjcmVlbixcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcy5nZXRBcGlEYXRhKCkuZ2V0U2NoZW1hLFxuICAgICAgICB9KSBhcyBJQmVmb3JlTG9hZEV2ZW50O1xuICAgICAgICBpZiAodGhpcy5fbmV4dFNjcmVlbj8uaXNTY3JlZW5WYXJpYW50KSBiZWZvcmVMb2FkRXZlbnQuYWJUZXN0aW5nID0gdGhpcy5fbmV4dFNjcmVlbj8uYWJUZXN0aW5nRGF0YTtcblxuICAgICAgICBjb25zdCBldmVudFJlc3VsdCA9IHRoaXMuZGlzcGF0Y2hQbHVnaW5FdmVudChiZWZvcmVMb2FkRXZlbnQuZXZlbnROYW1lLCBiZWZvcmVMb2FkRXZlbnQpO1xuXG4gICAgICAgIHRoaXMudW5kaW1TY3JlZW5TZXQoKTtcblxuICAgICAgICBpZiAoIWV2ZW50UmVzdWx0KSByZXR1cm47XG5cbiAgICAgICAgaWYgKHR5cGVvZiBldmVudFJlc3VsdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIC8vIHBvcHVsYXRlIHRoZSBjdXJyZW50IHNjcmVlbiB3aXRoIHRoZSBldmVudCBkYXRhIGZvciBwb3B1bGF0aW9uXG4gICAgICAgICAgICB0aGlzLl9uZXh0U2NyZWVuLnNldEJlZm9yZUxvYWREYXRhKGV2ZW50UmVzdWx0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5leHRTY3JlZW4gPSB0aGlzLnNjcmVlblBhcnRzKGV2ZW50UmVzdWx0Py5uZXh0U2NyZWVuKTtcbiAgICAgICAgY29uc3QgYWN0dWFsU2NyZWVuSWQgPSB0aGlzLl9uZXh0U2NyZWVuPy5pc1NjcmVlblZhcmlhbnQgPyB0aGlzLl9uZXh0U2NyZWVuLnZhcmlhbnRHcm91cElkIDogc2NyZWVuSUQ7XG4gICAgICAgIGlmIChldmVudFJlc3VsdD8ubmV4dFNjcmVlbiAmJiBuZXh0U2NyZWVuPy5zY3JlZW5JZCAhPT0gYWN0dWFsU2NyZWVuSWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3dpdGNoU2NyZWVuKGV2ZW50UmVzdWx0Lm5leHRTY3JlZW4pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXROZXh0U2NyZWVuU2l6ZSh0aGlzLl9uZXh0U2NyZWVuKTtcbiAgICAgICAgdGhpcy5fZWxDb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRTY3JlZW4pIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgdW5saW5raW5nIGN1cnJlbnQgc2NyZWVuOiAke3RoaXMuX2N1cnJlbnRTY3JlZW4uSUR9YCk7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U2NyZWVuLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNjcmVlbiA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0ZW1wRWxDb250YWluZXIgPSBhd2FpdCB0aGlzLnByZXBhcmVOZXh0U2NyZWVuKCk7XG5cbiAgICAgICAgdGhpcy5fbmV4dFNjcmVlbi5wZXJmb3JtQXV0b1NraXAoZm9ybUNvbnRleHQpLnRoZW4oKHNraXBwZWRGb3JtOiBCYXNlRm9ybSkgPT4ge1xuICAgICAgICAgICAgaWYoc2tpcHBlZEZvcm0gJiYgc2tpcHBlZEZvcm0gPT0gcHJldkZvcm0pe1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGBVbmFibGUgdG8gcHJvY2VlZCB0byBuZXh0IHNjcmVlbjogbWlzc2luZyByZXF1aXJlZCBkYXRhIGZvciBzdWJtaXNzaW9uJ2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNraXBwZWRGb3JtICYmIHNraXBwZWRGb3JtICE9IHByZXZGb3JtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbmV4dFNjcmVlbi51bmRpbVNjcmVlbigpO1xuICAgICAgICAgICAgICAgIHRoaXMuX25leHRTY3JlZW4udW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB7ZXJyb3JDb2RlOiBHU0Vycm9ycy5PSywgYXV0b1NraXA6IHRydWV9O1xuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKHJlc3BvbnNlLCBza2lwcGVkRm9ybSk7IC8vIEJlaGF2ZXMgYXMgaWYgdGhlIGZpcnN0IGZvcm0gd2FzIHN1Ym1pdHRlZCAoaWYgdGhlcmUgaXMgb25lKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRlbXBFbENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cbiAgICAgICAgICAgIHRlbXBFbENvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJyc7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLl9lbENvbnRhaW5lciAmJiB0aGlzLl9lbENvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZWxDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9lbENvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZW1wRWxDb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5fZWxDb250YWluZXIgPSB0ZW1wRWxDb250YWluZXI7XG5cbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTY3JlZW4gPSB0aGlzLl9uZXh0U2NyZWVuO1xuICAgICAgICAgICAgdGhpcy5fbmV4dFNjcmVlbiA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTY3JlZW4ucmVzZXRMYXN0Q29uZGl0aW9uYWxWYWx1ZXMoKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTY3JlZW4uZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICAgICAgY29uc3Qgc2NyZWVuV2lkdGggPSB0aGlzLl9jdXJyZW50U2NyZWVuLmluc3RhbmNlRWxlbWVudCA/IHRoaXMuX2N1cnJlbnRTY3JlZW4uaW5zdGFuY2VFbGVtZW50Lm9mZnNldFdpZHRoICsgJ3B4JyA6ICcnO1xuICAgICAgICAgICAgdGhpcy5zZXRDYXB0aW9uKHRoaXMuX2N1cnJlbnRTY3JlZW4uY2FwdGlvbiwgc2NyZWVuV2lkdGgpO1xuICAgICAgICAgICAgdGhpcy5zaG93U2NyZWVuU2V0Q29udGFpbmVyKCk7XG5cblxuICAgICAgICAgICAgY29uc3QgYWZ0ZXJMb2FkRXZlbnQgPSBnaWd5YS51dGlscy5vYmplY3QucmVtb3ZlVW5kZWZpbmVkKHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdhZnRlclNjcmVlbkxvYWQnLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRTY3JlZW46IHRoaXMuX2N1cnJlbnRTY3JlZW4/LnJlcXVlc3RlZFNjcmVlbixcbiAgICAgICAgICAgICAgICBmb3JtOiB0aGlzLmRhdGEubGFzdFN1Ym1pdHRlZEZvcm1JRCxcbiAgICAgICAgICAgICAgICByZXNwb25zZTogZ2lneWEudXRpbHMub2JqZWN0LmNsb25lKHRoaXMuZGF0YS5sYXN0U3VibWl0dGVkRm9ybVJlc3BvbnNlKSxcbiAgICAgICAgICAgICAgICBwcm9maWxlOiB0aGlzLmdldFByb2ZpbGUoKSxcbiAgICAgICAgICAgICAgICBwcmVmZXJlbmNlczogdGhpcy5fc2NyZWVuU2V0LmdldFByZWZlcmVuY2VzKCksXG4gICAgICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRTY2hlbWFEYXRhKCksXG4gICAgICAgICAgICB9KSBhcyBJQWZ0ZXJMb2FkRXZlbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudFNjcmVlbj8uaXNTY3JlZW5WYXJpYW50KSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkRXZlbnQuYWJUZXN0aW5nID0gdGhpcy5fY3VycmVudFNjcmVlbi5hYlRlc3RpbmdEYXRhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoUGx1Z2luRXZlbnQoYWZ0ZXJMb2FkRXZlbnQuZXZlbnROYW1lLCBhZnRlckxvYWRFdmVudCk7XG4gICAgICAgICAgICBsb2dnZXIuZW5kKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGFjdGl2ZUdyb3VwcygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlRWxlbWVudD8uZ2V0QXR0cmlidXRlKFNjcmVlblNldF9DT05TVFMuZGF0YUFjdGl2ZUdyb3Vwcyk/LnNwbGl0KCcsJykgfHwgW107XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0FjdGl2ZUdyb3VwKGdyb3VwSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVHcm91cHM/LmluY2x1ZGVzKGdyb3VwSWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZU5leHRTY3JlZW4oKTogUHJvbWlzZTxIVE1MRGl2RWxlbWVudD4ge1xuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgcHJlcGFyaW5nIG5leHQgc2NyZWVuOiAke3RoaXMuX25leHRTY3JlZW4uSUR9YCk7XG4gICAgICAgIGNvbnN0IGVsU2NyZWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICBlbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIEZvckVhY2godGhpcy5fZWxDb250YWluZXIuYXR0cmlidXRlcywgYSA9PiBlbENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoYS5uYW1lLCBhLnZhbHVlKSk7XG4gICAgICAgIGVsQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgICBlbENvbnRhaW5lci5hcHBlbmRDaGlsZChlbFNjcmVlbik7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxDb250YWluZXIpO1xuICAgICAgICB0aGlzLl9uZXh0U2NyZWVuLnBsYWNlQ29udGVudEluRWxlbWVudChlbFNjcmVlbik7XG4gICAgICAgIFRlbXBsYXRlRWxlbWVudC5wcmVwYXJlVGVtcGxhdGVJbnN0YW5jZXMoZWxDb250YWluZXIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9uZXh0U2NyZWVuLmxpbmtJbnN0YW5jZUVsZW1lbnQoZWxDb250YWluZXIpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcihgRXJyb3Igd2hpbGUgcHJlcGFyaW5nIG5leHQgc2NyZWVuYCwgZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbENvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Q2FwdGlvbihjYXB0aW9uOiBzdHJpbmcsIHdpZHRoPzogc3RyaW5nKSB7XG4gICAgICAgIC8vIERvIG5vdCBhdHRlbXB0IHRvIHNldCBjYXB0aW9uIGlmIHRoZXJlIGlzIG5vIGVsZW1lbnQuXG4gICAgICAgIC8vIERvIG5vdCBhdHRlbXB0IHRvIHNldCBjYXB0aW9uIGlmIHdlIGFyZSBub3QgaW4gYSBtb2RhbCBhbmQgdGhlcmUgaXMgYSBjaGlsZCBzY3JlZW4tc2V0IChjaGlsZCB3aWxsIGNvbnRyb2wgY2FwdGlvbikuXG4gICAgICAgIGlmICghdGhpcy5fY2FwdGlvbkVsZW1lbnQgfHwgKCF0aGlzLmlzTW9kYWwgJiYgdGhpcy5fY2hpbGQpIHx8IHRoaXMuaXNDb250YWluZXJDb250ZW50SGlkZGVuKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY2FwdGlvbikge1xuICAgICAgICAgICAgLy8gVE9ETyB3aHkgdGhpcyBiZWhhdmlvcj8gd2h5IGlmIGl0IGlzIGVtcHR5IGFuZCBvbiBtb2JpbGUgdG8gc2V0IGNvbnRlbnQgd2l0aCBoaWRkZW4gc3R5bGU/XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNNb2RhbCkgdGhpcy5fY2FwdGlvbkVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LmlubmVySFRNTCA9IGNhcHRpb24gfHwgJyZuYnNwOyc7XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzTW9kYWwgJiYgIXRoaXMuaXNNb2JpbGVVSSAmJiB3aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9jYXB0aW9uRWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXROZXh0U2NyZWVuU2l6ZShuZXh0U2NyZWVuPzogU2NyZWVuKSB7XG4gICAgICAgIHRoaXMuX2VsQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnJztcblxuICAgICAgICB2YXIgdztcbiAgICAgICAgdmFyIGg7XG5cbiAgICAgICAgaWYgKG5leHRTY3JlZW4pIHtcbiAgICAgICAgICAgIHcgPSBuZXh0U2NyZWVuLndpZHRoO1xuICAgICAgICAgICAgaCA9IG5leHRTY3JlZW4uaGVpZ2h0O1xuXG4gICAgICAgICAgICBpZiAoIXcgfHwgIWgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxUZW1wU2NyZWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgICAgICAgICBuZXh0U2NyZWVuLnBsYWNlQ29udGVudEluRWxlbWVudChlbFRlbXBTY3JlZW4pO1xuXG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KGVsVGVtcFNjcmVlbiwgU2NyZWVuU2V0X0NPTlNUUy5jYWxjdWxhdGVTaXplQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnNldFNpemUoZWxUZW1wU2NyZWVuLCB3LCBoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGVsVGVtcFNjcmVlbik7XG4gICAgICAgICAgICAgICAgdmFyIGJucCA9IGdpZ3lhLmdsb2JhbC5nZXRCb3JkZXJzQW5kUGFkZGluZ3MoZWxUZW1wU2NyZWVuKTtcbiAgICAgICAgICAgICAgICBpZiAoIXcpIHcgPSBTdHJpbmcoZWxUZW1wU2NyZWVuLm9mZnNldFdpZHRoICsgTWF0aC5jZWlsKGJucC53KSArIDMwKTtcbiAgICAgICAgICAgICAgICBpZiAoIWgpIGggPSBTdHJpbmcoZWxUZW1wU2NyZWVuLm9mZnNldEhlaWdodCArIDEpO1xuICAgICAgICAgICAgICAgIGVsVGVtcFNjcmVlbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsVGVtcFNjcmVlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTW9iaWxlVUkgJiYgKHRoaXMuaXNNb2RhbCB8fCAhdGhpcy5pc1Jlc3BvbnNpdmUpKSB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IHNldCB3aWR0aCBpbiAlIHVuaXRzIGZvciBsZWdhY3kuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0UGx1Z2luU3R5bGUoKSAhPSBQbHVnaW5TdHlsZS5sZWdhY3kgfHwgZ2V0VW5pdE1lYXN1cmVtZW50VHlwZSh3KSAhPSBVbml0TWVhc3VyZW1lbnRUeXBlLnBlcmNlbnRhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnNldFNpemUodGhpcy5fZWxDb250YWluZXIsIHcsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF4V2lkdGggPSB3ID09ICdhdXRvJyA/ICdub25lJyA6ICcnICsgKCgnJyArIHcpLmluZGV4T2YoJyUnKSA+IDAgPyB3IDogdyArICdweCcpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxDb250YWluZXIuc3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDtcblxuICAgICAgICAgICAgICAgIGlmIChnaWd5YS5sb2NhbEluZm8uaXNJRTcgfHwgZ2lneWEubG9jYWxJbmZvLmlzSUU4IHx8IChnaWd5YS5sb2NhbEluZm8uaXNJRSAmJiBnaWd5YS5sb2NhbEluZm8ucXVpcmtzTW9kZSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VsQ29udGFpbmVyLnN0eWxlWydfd2lkdGgnXSA9IG1heFdpZHRoOyAvLyBGaXggZm9yIG9sZCBJRSB0aGF0IGRvZXMgbm90IHJlY29nbml6ZSBtYXhXaWR0aFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNNb2RhbCAmJiAhdGhpcy5pc01vYmlsZVVJKSB7XG4gICAgICAgICAgICAvL2lmIChoKSB7XG4gICAgICAgICAgICAvLyAgICB0aGlzLl9lbENvbnRhaW5lci5zdHlsZS5taW5IZWlnaHQgPSBoICsgJ3B4JztcbiAgICAgICAgICAgIC8vICAgIGlmIChnaWd5YS5sb2NhbEluZm8uaXNJRTcgfHwgZ2lneWEubG9jYWxJbmZvLmlzSUU4IHx8IChnaWd5YS5sb2NhbEluZm8uaXNJRSAmJiBnaWd5YS5sb2NhbEluZm8ucXVpcmtzTW9kZSkpXG4gICAgICAgICAgICAvLyAgICAgICAgdGhpcy5fZWxDb250YWluZXIuc3R5bGVbJ19oZWlnaHQnXSA9IGggKyAncHgnOyAvLyBXb3JrYXJvdW5kIGZvciBvbGQgSUUgdGhhdCBkb2VzIG5vdCBzdXBwb3J0IG1pbkhlaWdodFxuICAgICAgICAgICAgLy99XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3VsZEZpbmFsaXplRmxvdyhyZWFzb246IENsb3NlUmVhc29ucyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXRoaXMuX2lzQ2hpbGQgJiYgdGhpcy5lbmRGbG93SXNQZW5kaW5nKCkgJiYgcmVhc29uICE9PSBDbG9zZVJlYXNvbnMuY2FuY2VsO1xuICAgIH1cblxuICAgIHB1YmxpYyBkb2VzU2NyZWVuSGF2ZUZvcm1zKHNjcmVlbklkOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHNjcmVlbklkICYmIHRoaXMuX3NjcmVlbnNbc2NyZWVuSWRdICYmIHRoaXMuX3NjcmVlbnNbc2NyZWVuSWRdLmhhdmVGb3JtcygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkaW1TY3JlZW5TZXQoKSB7XG4gICAgICAgIHRoaXMuX2xvYWRpbmdJbmRpY2F0b3IgJiYgdGhpcy5fbG9hZGluZ0luZGljYXRvci5zaG93KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVuZGltU2NyZWVuU2V0KCkge1xuICAgICAgICB0aGlzLl9sb2FkaW5nSW5kaWNhdG9yICYmIHRoaXMuX2xvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBoYW5kbGVQZW5kaW5nRXJyb3JzKHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlLCBvRm9ybTogSUZvcm0pIHtcbiAgICAgICAgdmFyIGVycm9ySW5mbzogSUVycm9yQXR0cmlidXRlSW5mbyA9IFBlbmRpbmdFcnJvckF0dHJpYnV0ZXNbcmVzcG9uc2UuZXJyb3JDb2RlXSB8fCB7fTtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHNjcmVlbnNldCByb3V0aW5nIGVycm9yIGNvZGUgJHtyZXNwb25zZS5lcnJvckNvZGV9IC0tPiAke2Vycm9ySW5mby5uYW1lfWApO1xuXG4gICAgICAgIHZhciBuZXh0U2NyZWVuO1xuICAgICAgICBpZiAoZXJyb3JJbmZvLm5leHRTY3JlZW4pIG5leHRTY3JlZW4gPSBhd2FpdCBlcnJvckluZm8ubmV4dFNjcmVlbihvRm9ybSk7XG5cbiAgICAgICAgaWYgKG5leHRTY3JlZW4pIHtcbiAgICAgICAgICAgIGlmIChlcnJvckluZm8ucmVxdWlyZXNGaW5hbGl6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5maW5hbGl6ZVJlZ2lzdHJhdGlvbk5lZWRlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9ySW5mby5yZXNldEZpbmFsaXplTmVlZGVkU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETyBhZGQgYSB3YXJuaW5nIHRoYXQgdGhlIHBlbmRpbmcgc2NyZWVuIGRvZXMgbm90IGhhdmUgYSBmb3JtIGFuZCBjYW4gbm90IGRlYWwgd2l0aCB0aGUgcGVuZGluZyBpc3N1ZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3dpdGNoU2NyZWVuKG5leHRTY3JlZW4sIHJlc3BvbnNlLCBvRm9ybSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNDaGlsZCkge1xuICAgICAgICAgICAgICAgIC8vIGFsbG93IHBhcmVudCB0byBoYW5kbGUgcGVuZGluZyBlcnJvclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZShDbG9zZVJlYXNvbnNbQ2xvc2VSZWFzb25zLnBlbmRpbmdFcnJvcl0sIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBwYXJlbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIud2FybihgTWlzc2luZyBTY3JlZW5TZXQgYXR0cmlidXRlICR7ZXJyb3JJbmZvLm5hbWV9IGZvciBwZW5kaW5nIGVycm9yOiAke3Jlc3BvbnNlLmVycm9yQ29kZX1gKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGVuZEZsb3dJc1BlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgJiYgdGhpcy5kYXRhLnJlZ1Rva2VuO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBlbmRGbG93KHJlcz86IElGb3JtUmVzcG9uc2UsIG9Gb3JtPzogSUZvcm0sIHJlYXNvbj86IENsb3NlUmVhc29ucykge1xuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgZW5kaW5nIHNjcmVlbnNldCBmbG93YCk7XG5cbiAgICAgICAgaWYgKHJlYXNvbiA9PT0gQ2xvc2VSZWFzb25zLnNraXApIHtcbiAgICAgICAgICAgIGlmIChvRm9ybSAmJiBvRm9ybS5vbkJlZm9yZVNraXBwZWQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBvRm9ybS5vbkJlZm9yZVNraXBwZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVhc29uID09PSBDbG9zZVJlYXNvbnMuc2tpcCkge1xuICAgICAgICAgICAgaWYgKG9Gb3JtICYmIG9Gb3JtLm9uU2tpcHBlZCkge1xuICAgICAgICAgICAgICAgIG9Gb3JtLm9uU2tpcHBlZChyZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkRmluYWxpemVGbG93KHJlYXNvbikpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmV4dHJhRXZlbnREYXRhLmFsbG93QWNjb3VudHNMaW5raW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyYW1zLmFsbG93QWNjb3VudHNMaW5raW5nID0gdGhpcy5kYXRhLmV4dHJhRXZlbnREYXRhLmFsbG93QWNjb3VudHNMaW5raW5nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZWdUb2tlbiA9IHRoaXMuZGF0YS5yZWdUb2tlbiB8fCB0aGlzLnBhcmFtcy5yZWdUb2tlbjtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUmVnVG9rZW4oKTtcbiAgICAgICAgICAgIHRoaXMuZGltU2NyZWVuU2V0KCk7XG5cbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBzY3JlZW5zZXQgZmluYWxpemluZyByZWdpc3RyYXRpb25gKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsaXplUmVnaXN0cmF0aW9uUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIGluY2x1ZGU6IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLm1lcmdlQ29tbWFTZXBhcmF0ZWRWYWx1ZXMoXG4gICAgICAgICAgICAgICAgICAgICdwcm9maWxlLGRhdGEsZW1haWxzLHN1YnNjcmlwdGlvbnMscHJlZmVyZW5jZXMnLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmluY2x1ZGUpLFxuICAgICAgICAgICAgICAgIGRvbnRIYW5kbGVTY3JlZW5TZXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVnVG9rZW4sXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChyZXNwb25zZTogSUZvcm1SZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuZGltU2NyZWVuU2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlZ2lzdHJhdGlvbiBmaW5hbGl6ZWQgLSBjbGVhcmluZyBjYWNoZWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuYXBpRGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlZ2lzdHJhdGlvbiBmYWlsZWQgZmluYWxpemluZyAtIHJlLXVzaW5nIGV4aXN0aW5nIHJlZ1Rva2VuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEucmVnVG9rZW4gPSB0aGlzLnBhcmFtcy5yZWdUb2tlbiA9IHJlZ1Rva2VuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TY3JlZW5SZXNwb25zZShyZXNwb25zZSwgb0Zvcm0sIHRydWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTGlua0FjY291bnRzVjJJblByb2dyZXNzIHx8IHRoaXMuc2hvdWxkRmluYWxpemVMaW5rQWNjb3VudHNWMkFmdGVyUmVkaXJlY3QpIHtcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZVJlZ2lzdHJhdGlvblBhcmFtc1snc3VwcHJlc3NMb2dpbkV2ZW50J10gPSB0cnVlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmZpbmFsaXplUmVnaXN0cmF0aW9uKHRoaXMucGFyYW1zLCBmaW5hbGl6ZVJlZ2lzdHJhdGlvblBhcmFtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoQ2xvc2VSZWFzb25zW3JlYXNvbl0sIHJlcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBCYXNlUGx1Z2luIE92ZXJyaWRlXG5cbiAgICBwdWJsaWMgcmVzaXplTW9kYWwoc2l6ZTogSUVsZW1lbnRTaXplKSB7XG4gICAgICAgIC8vIFRPRE8gbm90IHN1cmUgd2UgbmVlZCB0aGlzIGF0IGFsbFxuICAgICAgICBpZiAodGhpcy5nZXRQbHVnaW5TdHlsZSgpICE9PSBQbHVnaW5TdHlsZS5sZWdhY3kpIHtcbiAgICAgICAgICAgIGlmIChzaXplLmhlaWdodCkgdGhpcy5fZWxDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gc2l6ZS5oZWlnaHQ7XG4gICAgICAgICAgICBpZiAoc2l6ZS53aWR0aCkgdGhpcy5fZWxDb250YWluZXIuc3R5bGUud2lkdGggPSBzaXplLndpZHRoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLyogbGVnYWN5IGFkanVzdG1lbnRzICovXG4gICAgICAgICAgICBpZiAoZ2V0VW5pdE1lYXN1cmVtZW50VHlwZShzaXplLndpZHRoKSA9PSBVbml0TWVhc3VyZW1lbnRUeXBlLnBlcmNlbnRhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2l6ZS53aWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbENvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZ2V0VW5pdE1lYXN1cmVtZW50VHlwZShzaXplLmhlaWdodCkgPT0gVW5pdE1lYXN1cmVtZW50VHlwZS5wZXJjZW50YWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNpemUuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMuX2VsQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIucmVzaXplTW9kYWwoc2l6ZSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHJlc2l6ZVBsdWdpbihvbGQ/OiBJRWxlbWVudEFjdHVhbFNpemUsIGN1cnI/OiBJRWxlbWVudEFjdHVhbFNpemUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vblZpZXdwb3J0U2l6ZUNoYW5nZWQoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgb25WaWV3cG9ydFNpemVDaGFuZ2VkKG9sZFZpZXdwb3J0U2l6ZT86IElWaWV3cG9ydFNpemUsIGN1cnJlbnRWaWV3cG9ydFNpemU/OiBJVmlld3BvcnRTaXplKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50U2NyZWVuKSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50U2NyZWVuLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dTY3JlZW5TZXRDb250YWluZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tb2RhbERpYWxvZykge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5fbW9kYWxEaWFsb2cuZ2V0TW9kYWxEaWFsb2dDb250YWluZXIoKSwgU2NyZWVuU2V0X0NPTlNUUy5naWd5YUhpZGRlbik7XG4gICAgICAgICAgICB0aGlzLl9tb2RhbERpYWxvZy5zaG93QWxsKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBpbiBwbGFjZSBzY3JlZW4tc2V0XG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLl9lbENvbnRhaW5lciwgU2NyZWVuU2V0X0NPTlNUUy5naWd5YUhpZGRlbik7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5fZWxDaGlsZENvbnRhaW5lciwgU2NyZWVuU2V0X0NPTlNUUy5naWd5YUhpZGRlbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhpZGVTY3JlZW5TZXRDb250YWluZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tb2RhbERpYWxvZykge1xuICAgICAgICAgICAgdGhpcy5fbW9kYWxEaWFsb2cuaGlkZUFsbCgpO1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuX21vZGFsRGlhbG9nLmdldE1vZGFsRGlhbG9nQ29udGFpbmVyKCksIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaW4gcGxhY2Ugc2NyZWVuLXNldFxuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuX2VsQ29udGFpbmVyLCBTY3JlZW5TZXRfQ09OU1RTLmdpZ3lhSGlkZGVuKTtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuX2VsQ2hpbGRDb250YWluZXIsIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldExhbmdGb3JTY3JlZW5TZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmFtcy5fZXhwbGljaXRMYW5nXG4gICAgICAgICAgICA/IHRoaXMucGFyYW1zLmxhbmc/LnNwbGl0KC8oPzosfFxccykrL2cpPy5maWx0ZXIoQm9vbGVhbik/LmpvaW4oJywnKSAvLyB1c2UgZXhwbGljaXQgbGFuZyBwYXJhbSBpZiBzdXBwbGllZFxuICAgICAgICAgICAgOiBnaWd5YS50aGlzU2NyaXB0Lmxhbmcub3JpZ2luYWxMYW5nOyAvLyBvdGhlcndpc2UsIHVzZSB0aGUgb3JpZ2luYWwgKGZ1bGwpIGxhbmcgZnJvbSBnbG9iYWxDb25mXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0NvbnRhaW5lckNvbnRlbnRIaWRkZW4oKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3ModGhpcy5fZWxDb250YWluZXIsIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2NyZWVuUGFydHMoc2NyZWVuSUQ6IHN0cmluZyA9ICcnKToge3NjcmVlbklkOiBzdHJpbmcsIHNjcmVlblNldE5hbWU/OiBzdHJpbmd9IHtcbiAgICAgICAgY29uc3Qgc2NyZWVuUGFydHMgPSBzY3JlZW5JRD8uc3BsaXQoJy8nKTtcbiAgICAgICAgbGV0IHNjcmVlblNldE5hbWU7XG4gICAgICAgIGlmIChzY3JlZW5QYXJ0cz8ubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgc2NyZWVuU2V0TmFtZSA9IHNjcmVlblBhcnRzLnNoaWZ0KClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY3JlZW5JZCA9IHNjcmVlblBhcnRzPy5qb2luKCcvJyk7XG4gICAgICAgIHJldHVybiB7c2NyZWVuSWQsIHNjcmVlblNldE5hbWV9XG4gICAgfVxuXG4gICAgcHVibGljIGdldCByZWdUb2tlbigpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhPy5yZWdUb2tlbiB8fCB0aGlzLnBhcmFtcz8ucmVnVG9rZW47XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBoYXNQcm92aWRlclNlc3Npb25JbmZvKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5wcm92aWRlclNlc3Npb25JbmZvIHx8IHt9KS5sZW5ndGggPiAwO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbkNvbm5lY3RBY2NvdW50c0NvbXBsZXRlKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEucHJvdmlkZXJTZXNzaW9uSW5mbyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmRhdGEuc2hvdWxkQ29ubmVjdEFjY291bnRzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRhdGEucHJvdmlkZXJTZXNzaW9uSW5mb0FmdGVyUmVkaXJlY3QgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgaXNMaW5rQWNjb3VudHNWMkluUHJvZ3Jlc3MoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc1Byb3ZpZGVyU2Vzc2lvbkluZm8gJiYgdGhpcy5kYXRhPy5zaG91bGRDb25uZWN0QWNjb3VudHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgc2hvdWxkRmluYWxpemVMaW5rQWNjb3VudHNWMkFmdGVyUmVkaXJlY3QoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuZGF0YT8ucHJvdmlkZXJTZXNzaW9uSW5mb0FmdGVyUmVkaXJlY3QpXG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUZyb21OZWVkZWREYXRhKGRhdGE6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LCBtZXRob2ROYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIGRlbGV0ZSBkYXRhW21ldGhvZE5hbWVdXG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IHBhc3N3b3JkU3RyZW5ndGggPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9wYXNzd29yZFN0cmVuZ3RoLmh0bWwnKTtcbmV4cG9ydCBjb25zdCBwYXNzd29yZFN0cmVuZ3RoX3N0cmVuZ3RoTWV0ZXIgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9wYXNzd29yZFN0cmVuZ3RoX3N0cmVuZ3RoTWV0ZXIuaHRtbCcpO1xuZXhwb3J0IGNvbnN0IHBhc3N3b3JkU3RyZW5ndGhfbWluaW11bVJlcXVpcmVtZW50cyA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3Bhc3N3b3JkU3RyZW5ndGhfbWluaW11bVJlcXVpcmVtZW50cy5odG1sJyk7XG5leHBvcnQgY29uc3Qgc2NyZWVuU2V0X2RpYWxvZyA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3NjcmVlblNldF9kaWFsb2cuaHRtbCcpO1xuZXhwb3J0IGNvbnN0IHNjcmVlblNldCA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3NjcmVlblNldC5odG1sJyk7XG5leHBvcnQgY29uc3QgcGhvdG9VcGxvYWRfdWkgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9waG90b1VwbG9hZF91aS5odG1sJyk7XG5leHBvcnQgY29uc3QgcGhvdG9VcGxvYWRfZm9ybSA9IHJlcXVpcmUoJy4vdGVtcGxhdGVzL3Bob3RvVXBsb2FkX2Zvcm0uaHRtbCcpO1xuZXhwb3J0IGNvbnN0IGlubGluZWRQYXNzd29yZFN0cmVuZ3RoID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMvaW5saW5lZFBhc3N3b3JkU3RyZW5ndGguaHRtbCcpO1xuZXhwb3J0IGNvbnN0IGNvbnNlbnQgPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9jb25zZW50Lmh0bWwnKTtcbmV4cG9ydCBjb25zdCBjb21tdW5pY2F0aW9uQ2hlY2tib3ggPSByZXF1aXJlKCcuL3RlbXBsYXRlcy9jb21tdW5pY2F0aW9uQ2hlY2tib3guaHRtbCcpO1xuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtCYXNlU2NyZWVuV2lkZ2V0fSBmcm9tIFwiLi9CYXNlU2NyZWVuV2lkZ2V0XCI7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gXCIuLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9yc1wiO1xuaW1wb3J0IHsgSUZvcm1Db250ZXh0IH0gZnJvbSBcIi4vSUZvcm1Db250ZXh0XCI7XG5cbmV4cG9ydCB2YXIgU3dpdGNoU2NyZWVuX0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJ1tkYXRhLXN3aXRjaC1zY3JlZW5dJyxcbiAgICBzd2l0Y2hTY3JlZW46ICdkYXRhLXN3aXRjaC1zY3JlZW4nLFxuICAgIHN1Y2Nlc3NTY3JlZW46ICdkYXRhLW9uLXN1Y2Nlc3Mtc2NyZWVuJyxcbiAgICBzY3JlZW5TZXRTa2lwcGVkU2NyZWVuOiAnZGF0YS1vbi1zY3JlZW5zZXQtc2tpcHBlZC1zY3JlZW4nLFxufTtcbkRlZXBGcmVlemUoU3dpdGNoU2NyZWVuX0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgU3dpdGNoU2NyZWVuV2lkZ2V0IGV4dGVuZHMgQmFzZVNjcmVlbldpZGdldDxIVE1MQW5jaG9yRWxlbWVudD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gU3dpdGNoU2NyZWVuX0NPTlNUUztcbiAgICBwdWJsaWMgYmluZElEOiBzdHJpbmc7XG4gICAgcHVibGljIHN3aXRjaFNjcmVlbjogc3RyaW5nO1xuICAgIHByaXZhdGUgY2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgX3NjcmVlbjogU2NyZWVuLCBlbDogSFRNTEFuY2hvckVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoX3NjcmVlbiwgZWwsIGZhbHNlKTtcblxuICAgICAgICAvLyBObyBkZWZpbml0aW9uIG9mIHdoYXQgc2hvdWxkIGJlIHRoZSBpZCBpbiBjYXNlIHRoYXQgbm8gSUQgaXMgcHVibGlzaGVkLlxuICAgICAgICB0aGlzLmJpbmRJRCA9IHRoaXMuSUQ7XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUF0dHJpYnV0ZXMoKTtcblxuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9IGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9zY3JlZW4uZ2V0Rm9ybUJ5RWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgICAgICBjb25zdCBmb3JtQ29udGV4dDogSUZvcm1Db250ZXh0ID0ge1xuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXG4gICAgICAgICAgICAgICAgZXhwbGljaXRTd2l0Y2hTY3JlZW46IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuc3dpdGNoU2NyZWVuKHRoaXMuc3dpdGNoU2NyZWVuLCBmb3JtQ29udGV4dCwgZm9ybSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tIYW5kbGVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcblxuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUF0dHJpYnV0ZXMoKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgdXBkYXRlQXR0cmlidXRlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlRWxlbWVudClcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RhcmdldCcpO1xuICAgICAgICB0aGlzLnN3aXRjaFNjcmVlbiA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShTd2l0Y2hTY3JlZW5fQ09OU1RTLnN3aXRjaFNjcmVlbik7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudD8ubm9kZU5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09ICdhJyAmJiAhdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9YnV0dG9uXScpKSB7XG4gICAgICAgICAgICB0aGlzLnNldEFjY2Vzc2liaWxpdHlBdHRyaWJ1dGVzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUFjY2Vzc2liaWxpdHlBdHRyaWJ1dGVzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgcmVtb3ZlQWNjZXNzaWJpbGl0eUF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgncm9sZScpO1xuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3RpdGxlJyk7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2V0QWNjZXNzaWJpbGl0eUF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIGNvbnN0IHRhYkluZGV4ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpO1xuICAgICAgICBpZiAoIXRhYkluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudD8uc2V0QXR0cmlidXRlKCdocmVmJywgJ2phdmFzY3JpcHQ6dm9pZCgwKScpO1xuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lclRleHQpO1xuICAgIH1cbn1cblxuQmFzZVNjcmVlbldpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoU3dpdGNoU2NyZWVuV2lkZ2V0KTtcbiIsImltcG9ydCB7IERlZXBGcmVlemUsIElNYXAsIExhc3RJbmRleE9mLCBnZXRDb25kaXRpb25hbEF0dHJpYnV0ZUV4cHJlc3Npb25zLCBNYXAsIEZvckVhY2hQcm9wLCBGb3JFYWNoIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBJV2FybmFibGUsIHdhcm4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0RlYnVnJztcbmltcG9ydCB7IFNjcmVlblNldFBsdWdpbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcbmltcG9ydCB7IElFbGVtZW50QWN0dWFsU2l6ZSwgSVZpZXdwb3J0U2l6ZSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9JbnRlcmZhY2VzJztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnLi9CYXNlRm9ybSc7XG5cbmV4cG9ydCBlbnVtIEVsZW1lbnRSb2xlcyB7XG4gICAgX3VuZGVmaW5lZCxcbiAgICB0ZW1wbGF0ZSxcbiAgICBpbnN0YW5jZSxcbn1cbnZhciBnZW5lcmF0ZWRJZE51bWJlciA9IDA7XG5leHBvcnQgdmFyIFRlbXBsYXRlRWxlbWVudF9DT05TVFMgPSB7XG4gICAgZWxlbWVudElkOiAnZGF0YS1zY3JlZW5zZXQtZWxlbWVudC1pZCcsXG4gICAgZWxlbWVudEZvcjogJ2RhdGEtc2NyZWVuc2V0LWVsZW1lbnQtZm9yJyxcbiAgICBwdWJsaXNoRWxlbWVudElkOiAnZGF0YS1zY3JlZW5zZXQtZWxlbWVudC1pZC1wdWJsaXNoJyxcbiAgICB0ZW1wbGF0ZUZvckFycmF5OiAnc2NyZWVuU2V0VGVtcGxhdGVGb3InLFxuICAgIGluc3RhbmNlT2ZBcnJheTogJ3NjcmVlblNldEluc3RhbmNlT2YnLFxuICAgIHNjcmVlblNldFJvbGVzOiAnZGF0YS1zY3JlZW5zZXQtcm9sZXMnLFxufTtcbkRlZXBGcmVlemUoVGVtcGxhdGVFbGVtZW50X0NPTlNUUyk7XG5leHBvcnQgaW50ZXJmYWNlIElUZW1wbGF0ZUVsZW1lbnRQYXJlbnQgZXh0ZW5kcyBJV2FybmFibGUge1xuICAgIF9zY3JlZW5TZXQ6IFNjcmVlblNldFBsdWdpbjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSVNjcmVlblNldFNpemUge1xuICAgIHdpZHRoOiBudW1iZXI7XG4gICAgaGVpZ2h0OiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIElUZW1wbGF0ZUVsZW1lbnQgZXh0ZW5kcyBJVGVtcGxhdGVFbGVtZW50UGFyZW50IHtcbiAgICBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpO1xuICAgIHVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgIF9wYXJlbnQ6IElUZW1wbGF0ZUVsZW1lbnRQYXJlbnQ7XG4gICAgdW5saW5rVGVtcGxhdGUoKTtcbiAgICBldmFsdWF0ZUV4cHJlc3Npb24oY29uZGl0aW9uYWxFeHByZXNzaW9uOiBJQ29uZGl0aW9uYWxFeHByZXNzaW9uKTtcbiAgICBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgIHJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCk7XG59XG5leHBvcnQgaW50ZXJmYWNlIElDb25kaXRpb25hbEV4cHJlc3Npb24ge1xuICAgIGNvbmRpdGlvbjogc3RyaW5nO1xuICAgIGRlZmF1bHRWYWx1ZT86IGFueTtcbiAgICBpZ25vcmVFcnJvcj86IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIElDb25kaXRpb25hbEF0dHJpYnV0ZSBleHRlbmRzIElDb25kaXRpb25hbEV4cHJlc3Npb24ge1xuICAgIGF0dHJpYnV0ZU5hbWU6IHN0cmluZztcbiAgICBsYXN0QXR0cmlidXRlVmFsdWU6IHN0cmluZztcbiAgICBpc1dpZGdldFBhcmFtVGFnOiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBDb25kaXRpb25hbFNjcmVlblNldCBleHRlbmRzIElFbGVtZW50QWN0dWFsU2l6ZSB7XG4gICAgdHJhbnNsYXRpb25zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgIGxhbmc6IHN0cmluZztcbn1cbmludGVyZmFjZSBDb25kaXRpb25hbEZ1bmN0aW9uIGV4dGVuZHMgRnVuY3Rpb24ge1xuICAgIChcbiAgICAgICAgc2NyZWVuc2V0OiBDb25kaXRpb25hbFNjcmVlblNldCxcbiAgICAgICAgcGFzc2tleXM6IGFueVtdLFxuICAgICAgICB2aWV3cG9ydDogSVZpZXdwb3J0U2l6ZSxcbiAgICAgICAgZm9ybURhdGE6IGFueSxcbiAgICAgICAgcHJvZmlsZTogYW55LFxuICAgICAgICBkYXRhOiBhbnksXG4gICAgICAgIHN1YnNjcmlwdGlvbnM6IGFueSxcbiAgICAgICAgY29tbXVuaWNhdGlvbnM6IGFueSxcbiAgICAgICAgcHJlZmVyZW5jZXM6IGFueSxcbiAgICAgICAgYWNjb3VudEluZm86IGFueSxcbiAgICAgICAgdGZhUHJvdmlkZXJzOiBhbnksXG4gICAgICAgIGF1dGhNZXRob2RzOiBhbnksXG4gICAgICAgIGNvbmZsaWN0aW5nQWNjb3VudDogYW55LFxuICAgICAgICBjb25zZW50U3RhdGVtZW50czogYW55LFxuICAgICAgICBpZGVudGlmaWVyOiBhbnksXG4gICAgICAgIHNjaGVtYTogYW55LFxuICAgICAgICBfYWNjb3VudDogYW55LFxuICAgICAgICB2YWx1ZTogc3RyaW5nLFxuICAgICk6IGFueTtcbn1cbmNvbnN0IGNvbmRpdGlvbmFsRnVuY3Rpb24gPSBuZXcgRnVuY3Rpb24oXG4gICAgJ3NjcmVlbnNldCcsXG4gICAgJ3Bhc3NrZXlzJyxcbiAgICAndmlld3BvcnQnLFxuICAgICdmb3JtRGF0YScsXG4gICAgJ3Byb2ZpbGUnLFxuICAgICdkYXRhJyxcbiAgICAnc3Vic2NyaXB0aW9ucycsXG4gICAgJ2NvbW11bmljYXRpb25zJyxcbiAgICAncHJlZmVyZW5jZXMnLFxuICAgICdhY2NvdW50SW5mbycsXG4gICAgJ3RmYVByb3ZpZGVycycsXG4gICAgJ2F1dGhNZXRob2RzJyxcbiAgICAnY29uZmxpY3RpbmdBY2NvdW50JyxcbiAgICAnY29uc2VudFN0YXRlbWVudHMnLFxuICAgICdpZGVudGlmaWVyJyxcbiAgICAnc2NoZW1hJyxcbiAgICAnX2FjY291bnQnLFxuICAgICd2YWx1ZScsXG4gICAgJ3JldHVybiBldmFsKHZhbHVlKTsnLFxuKSBhcyBDb25kaXRpb25hbEZ1bmN0aW9uO1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlRWxlbWVudDxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IGltcGxlbWVudHMgSVRlbXBsYXRlRWxlbWVudCB7XG4gICAgcHJpdmF0ZSBldmVudEhhbmRsZXJzOiBJTWFwPEZ1bmN0aW9uW10+ID0ge307XG4gICAgcHVibGljIElEOiBzdHJpbmc7XG4gICAgcHVibGljIHB1Ymxpc2hJRDogYm9vbGVhbjtcbiAgICBwdWJsaWMgaW5zdGFuY2VFbGVtZW50OiBUO1xuICAgIHB1YmxpYyBjb25kaXRpb25hbEV4cHJlc3Npb25zID0gbmV3IEFycmF5PElDb25kaXRpb25hbEF0dHJpYnV0ZT4oKTtcbiAgICBwdWJsaWMgY3NzQ2xhc3M6IHN0cmluZztcbiAgICBwdWJsaWMgX3NjcmVlblNldDogU2NyZWVuU2V0UGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIHRlbXBsYXRlRWxlbWVudDogVCwgcHVibGljIF9wYXJlbnQ6IElUZW1wbGF0ZUVsZW1lbnRQYXJlbnQpIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0ID0gX3BhcmVudC5fc2NyZWVuU2V0O1xuXG4gICAgICAgIGlmIChUZW1wbGF0ZUVsZW1lbnQuaXNUZW1wbGF0ZUluc3RhbmNlKHRoaXMudGVtcGxhdGVFbGVtZW50KSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRpbmcgbXVsdGlwbGUgVGVtcGxhdGVFbGVtZW50IGluc3RhbmNlcyBvbiB0aGUgc2FtZSBlbGVtZW50XG4gICAgICAgICAgICB0aGlzLklEID0gdGhpcy50ZW1wbGF0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMuZWxlbWVudElkKSB8fCAnJztcbiAgICAgICAgICAgIHRoaXMucHVibGlzaElEID0gdGhpcy50ZW1wbGF0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMucHVibGlzaEVsZW1lbnRJZCkgPT09ICd0cnVlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIENyZWF0aW5nIHRoZSBmaXJzdCBUZW1wbGF0ZUVsZW1lbnQgaW5zdGFuY2UgZm9yIHRoaXMgZWxlbWVudFxuICAgICAgICAgICAgdGhpcy5JRCA9IHRoaXMudGVtcGxhdGVFbGVtZW50LmlkIHx8ICcnO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5JRCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hJRCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdpZCcpOyAvLyBlbGltaW5hdGUgdGhlIGlkIGZyb20gdGhlIHRlbXBsYXRlIHRvIG1ha2Ugc3VyZSB0aGF0IGlkIG9ubHkgZXhpc3RzIG9uIHRoZSBydW5uaW5nIGluc3RhbmNlIG9mIHRoZSBlbGVtZW50XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBnZW5lcmF0ZWROdW1iZXIgPSArK2dlbmVyYXRlZElkTnVtYmVyICsgJ18nICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7IC8vIG1ha2Ugc3VyZSBldmVyeSBJRCBpcyBhcyB1bmlxdWUgYXMgcG9zc2libGVcbiAgICAgICAgICAgICAgICB0aGlzLklEID0gJ19fZ2lnX3RlbXBsYXRlX2VsZW1lbnRfJyArIGdlbmVyYXRlZE51bWJlcjtcbiAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hJRCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoVGVtcGxhdGVFbGVtZW50X0NPTlNUUy5lbGVtZW50SWQsIHRoaXMuSUQpO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMucHVibGlzaEVsZW1lbnRJZCwgU3RyaW5nKHRoaXMucHVibGlzaElEKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLklEID0gdGhpcy5JRC50cmltKCk7XG5cbiAgICAgICAgLy8gbWFyayByb2xlIG9uIHRoZSBlbGVtZW50XG4gICAgICAgIGNvbnN0IGN1cnJlbnRSb2xlcyA9IFRlbXBsYXRlRWxlbWVudC5nZXRSb2xlcyh0aGlzLnRlbXBsYXRlRWxlbWVudCk7XG4gICAgICAgIGN1cnJlbnRSb2xlcy5wdXNoKEVsZW1lbnRSb2xlcy50ZW1wbGF0ZSk7XG4gICAgICAgIFRlbXBsYXRlRWxlbWVudC5zZXRSb2xlcyh0aGlzLnRlbXBsYXRlRWxlbWVudCwgY3VycmVudFJvbGVzKTtcblxuICAgICAgICAvLyBsaW5rIEpTIG9iamVjdCB0byB0ZW1wbGF0ZSBlbGVtZW50XG4gICAgICAgIGxldCB0ZW1wbGF0ZUZvcjogVGVtcGxhdGVFbGVtZW50PEhUTUxFbGVtZW50PltdID0gdGVtcGxhdGVFbGVtZW50W1RlbXBsYXRlRWxlbWVudF9DT05TVFMudGVtcGxhdGVGb3JBcnJheV07XG4gICAgICAgIGlmICghdGVtcGxhdGVGb3IpIHtcbiAgICAgICAgICAgIHRlbXBsYXRlRm9yID0gbmV3IEFycmF5PFRlbXBsYXRlRWxlbWVudDxIVE1MRWxlbWVudD4+KCk7XG4gICAgICAgICAgICB0ZW1wbGF0ZUVsZW1lbnRbVGVtcGxhdGVFbGVtZW50X0NPTlNUUy50ZW1wbGF0ZUZvckFycmF5XSA9IHRlbXBsYXRlRm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb25kaXRpb25hbEV4cHJlc3Npb25zID0gdGhpcy5nZXRDb25kaXRpb25hbEV4cHJlc3Npb24odGhpcy50ZW1wbGF0ZUVsZW1lbnQpO1xuICAgICAgICB0ZW1wbGF0ZUZvci5wdXNoKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1bmxpbmtUZW1wbGF0ZSgpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGluc3RhbmNlIGxpbmtcbiAgICAgICAgdmFyIHRlbXBsYXRlRm9yOiBUZW1wbGF0ZUVsZW1lbnQ8SFRNTEVsZW1lbnQ+W10gPSB0aGlzLnRlbXBsYXRlRWxlbWVudFtUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLnRlbXBsYXRlRm9yQXJyYXldO1xuICAgICAgICBpZiAodGVtcGxhdGVGb3IpIHtcbiAgICAgICAgICAgIHZhciBpID0gTGFzdEluZGV4T2YodGVtcGxhdGVGb3IsIHRoaXMpO1xuICAgICAgICAgICAgdGVtcGxhdGVGb3Iuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVtb3ZlIHJvbGVcbiAgICAgICAgdmFyIGN1cnJlbnRSb2xlcyA9IFRlbXBsYXRlRWxlbWVudC5nZXRSb2xlcyh0aGlzLnRlbXBsYXRlRWxlbWVudCk7XG4gICAgICAgIHZhciBsYXN0Um9sZSA9IGN1cnJlbnRSb2xlcy5wb3AoKTtcbiAgICAgICAgaWYgKGxhc3RSb2xlID09PSBFbGVtZW50Um9sZXMudGVtcGxhdGUpIFRlbXBsYXRlRWxlbWVudC5zZXRSb2xlcyh0aGlzLnRlbXBsYXRlRWxlbWVudCwgY3VycmVudFJvbGVzKTtcbiAgICAgICAgZWxzZSB0aGlzLndhcm4oJ3VubGlua1RlbXBsYXRlIHdpdGhvdXQgbWF0Y2hpbmcgcm9sZScpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRDb25kaXRpb25hbEV4cHJlc3Npb24oZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGxldCBjb25kaXRpb25hbEV4cHJlc3Npb25zID0gW107XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25kaXRpb25hbEV4cHJlc3Npb25zID0gZ2V0Q29uZGl0aW9uYWxBdHRyaWJ1dGVFeHByZXNzaW9ucyhlbCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMud2FybignRXJyb3IgcGFyc2luZyBjb25kaXRpb25hbCBleHByZXNzaW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29uZGl0aW9uYWxFeHByZXNzaW9ucztcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBnZXRSb2xlcyhlbGVtZW50OiBIVE1MRWxlbWVudCk6IEVsZW1lbnRSb2xlc1tdIHtcbiAgICAgICAgdmFyIHJvbGVOYW1lcyA9IChlbGVtZW50LmdldEF0dHJpYnV0ZShUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLnNjcmVlblNldFJvbGVzKSB8fCAnJykuc3BsaXQoJywnKTtcblxuICAgICAgICBpZiAocm9sZU5hbWVzWzBdID09PSAnJykgcm9sZU5hbWVzLnBvcCgpO1xuXG4gICAgICAgIHJldHVybiBNYXAocm9sZU5hbWVzLCByb2xlTmFtZSA9PiBFbGVtZW50Um9sZXNbcm9sZU5hbWVdIHx8IEVsZW1lbnRSb2xlcy5fdW5kZWZpbmVkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBzZXRSb2xlcyhlbGVtZW50OiBIVE1MRWxlbWVudCwgcm9sZXM6IEVsZW1lbnRSb2xlc1tdKSB7XG4gICAgICAgIHZhciByb2xlc05hbWVzID0gTWFwKHJvbGVzLCByb2xlID0+IEVsZW1lbnRSb2xlc1tyb2xlXSk7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMuc2NyZWVuU2V0Um9sZXMsIHJvbGVzTmFtZXMuam9pbignLCcpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgd2Fybihtc2c6IHN0cmluZywgaWQ/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5fcGFyZW50Lndhcm4obXNnLCBpZCA/IHRoaXMuSUQgKyAnLicgKyBpZCA6IHRoaXMuSUQpO1xuICAgIH1cblxuICAgIC8vIEFzc3VtZXMgdGhhdCBwcmVwYXJlVGVtcGxhdGVJbnN0YW5jZSB3YXMgY2FsbGVkIG9uIHRoZSB0ZW1wbGF0ZSBpbnN0YW5jZSBiZWZvcmUgdGhpcyBjYWxsXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICB2YXIgaW5zdGFuY2VFbGVtZW50cyA9IGdpZ3lhLnV0aWxzLkRPTS5nZXRFbGVtZW50c0J5QXR0cmlidXRlKHBhcmVudCwgJyonLCBUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmVsZW1lbnRJZCwgdGhpcy5JRCk7XG5cbiAgICAgICAgaWYgKCFpbnN0YW5jZUVsZW1lbnRzIHx8ICFpbnN0YW5jZUVsZW1lbnRzLmxlbmd0aCB8fCAhaW5zdGFuY2VFbGVtZW50c1swXSkge1xuICAgICAgICAgICAgdGhpcy53YXJuKCdGYWlsZWQgdG8gZmluZCB0aGUgaW5zdGFuY2UgZWxlbWVudCB0byBsaW5rIHRvJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudCA9IGluc3RhbmNlRWxlbWVudHNbMF0gYXMgVDtcblxuICAgICAgICAvLyBtYXJrIHJvbGVzXG4gICAgICAgIHZhciBjdXJyZW50Um9sZXMgPSBUZW1wbGF0ZUVsZW1lbnQuZ2V0Um9sZXModGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgICAgICBjdXJyZW50Um9sZXMucHVzaChFbGVtZW50Um9sZXMuaW5zdGFuY2UpO1xuICAgICAgICBUZW1wbGF0ZUVsZW1lbnQuc2V0Um9sZXModGhpcy5pbnN0YW5jZUVsZW1lbnQsIGN1cnJlbnRSb2xlcyk7XG5cbiAgICAgICAgLy8gbGluayBKUyBvYmplY3QgdG8gaW5zdGFuY2UgZWxlbWVudFxuICAgICAgICB2YXIgaW5zdGFuY2VPZjogVGVtcGxhdGVFbGVtZW50PEhUTUxFbGVtZW50PltdID0gdGhpcy5pbnN0YW5jZUVsZW1lbnRbVGVtcGxhdGVFbGVtZW50X0NPTlNUUy5pbnN0YW5jZU9mQXJyYXldO1xuXG4gICAgICAgIGlmICghaW5zdGFuY2VPZikge1xuICAgICAgICAgICAgaW5zdGFuY2VPZiA9IG5ldyBBcnJheTxUZW1wbGF0ZUVsZW1lbnQ8SFRNTEVsZW1lbnQ+PigpO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnRbVGVtcGxhdGVFbGVtZW50X0NPTlNUUy5pbnN0YW5jZU9mQXJyYXldID0gaW5zdGFuY2VPZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICBGb3JFYWNoUHJvcCh0aGlzLmV2ZW50SGFuZGxlcnMsIChoYW5kbGVycywgZXZlbnROYW1lKSA9PlxuICAgICAgICAgICAgRm9yRWFjaChoYW5kbGVycywgaGFuZGxlciA9PiBnaWd5YS51dGlscy5ET00uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmluc3RhbmNlRWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKSksXG4gICAgICAgICk7XG5cbiAgICAgICAgaW5zdGFuY2VPZi5wdXNoKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuaW5pdEZyb21JbnN0YW5jZUVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIHVucmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAgICAgICBGb3JFYWNoUHJvcCh0aGlzLmV2ZW50SGFuZGxlcnMsIChoYW5kbGVycywgZXZlbnROYW1lKSA9PlxuICAgICAgICAgICAgICAgIEZvckVhY2goaGFuZGxlcnMsIGhhbmRsZXIgPT4gZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5pbnN0YW5jZUVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikpLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIHJvbGVcbiAgICAgICAgICAgIHZhciBjdXJyZW50Um9sZXMgPSBUZW1wbGF0ZUVsZW1lbnQuZ2V0Um9sZXModGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGxhc3RSb2xlID0gY3VycmVudFJvbGVzLnBvcCgpO1xuICAgICAgICAgICAgaWYgKGxhc3RSb2xlID09PSBFbGVtZW50Um9sZXMuaW5zdGFuY2UpIFRlbXBsYXRlRWxlbWVudC5zZXRSb2xlcyh0aGlzLmluc3RhbmNlRWxlbWVudCwgY3VycmVudFJvbGVzKTtcbiAgICAgICAgICAgIGVsc2UgdGhpcy53YXJuKCd1bmxpbmtJbnN0YW5jZUVsZW1lbnQgd2l0aG91dCBtYXRjaGluZyByb2xlJyk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBsaW5rIHRvIEpTIG9iamVjdCBmcm9tIGluc3RhbmNlIGVsZW1lbnRcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZU9mOiBUZW1wbGF0ZUVsZW1lbnQ8SFRNTEVsZW1lbnQ+W10gPSB0aGlzLmluc3RhbmNlRWxlbWVudFtUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmluc3RhbmNlT2ZBcnJheV07XG4gICAgICAgICAgICBpZiAoaW5zdGFuY2VPZikgaW5zdGFuY2VPZi5zcGxpY2UoZ2lneWEudXRpbHMuYXJyYXkuaW5kZXhPZihpbnN0YW5jZU9mLCB0aGlzKSwgMSk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaXNUZW1wbGF0ZUluc3RhbmNlKGVsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWwuZ2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMuZWxlbWVudElkKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHByZXBhcmVUZW1wbGF0ZUluc3RhbmNlRWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgcmVtb3ZlVGVtcGxhdGVSb2xlOiBib29sZWFuKSB7XG4gICAgICAgIHZhciBJRCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMuZWxlbWVudElkKTtcbiAgICAgICAgdmFyIHB1Ymxpc2hJZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFRlbXBsYXRlRWxlbWVudF9DT05TVFMucHVibGlzaEVsZW1lbnRJZCkgPT09ICd0cnVlJztcblxuICAgICAgICBpZiAoIUlEKSB7XG4gICAgICAgICAgICB3YXJuKCcnLCAnRmFpbGVkIHRvIGZpbmQgZWxlbWVudElkJyk7IC8vIFRPRE8gcGVyaGFwcyBtZXNzYWdlIHNob3VsZCBpbmNsdWRlIG1vcmUgaW5mb3JtYXRpb25cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwdWJsaXNoSWQpIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIElEKTtcblxuICAgICAgICAvLyByZW1vdmUgdGhlIHRlbXBsYXRlIHJvbGVcbiAgICAgICAgaWYgKHJlbW92ZVRlbXBsYXRlUm9sZSkge1xuICAgICAgICAgICAgdmFyIHJvbGVzID0gVGVtcGxhdGVFbGVtZW50LmdldFJvbGVzKGVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHJvbGVzLnBvcCgpID09PSBFbGVtZW50Um9sZXMudGVtcGxhdGUpIFRlbXBsYXRlRWxlbWVudC5zZXRSb2xlcyhlbGVtZW50LCByb2xlcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHByZXBhcmVUZW1wbGF0ZUluc3RhbmNlcyh0ZW1wbGF0ZVJvb3Q6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVscyA9IHRlbXBsYXRlUm9vdC5xdWVyeVNlbGVjdG9yQWxsKGAqWyR7VGVtcGxhdGVFbGVtZW50X0NPTlNUUy5lbGVtZW50SWR9XWApO1xuICAgICAgICBGb3JFYWNoKGVscywgZSA9PiBUZW1wbGF0ZUVsZW1lbnQucHJlcGFyZVRlbXBsYXRlSW5zdGFuY2VFbGVtZW50KGUgYXMgSFRNTEVsZW1lbnQsIHRydWUpKTtcbiAgICB9XG5cbiAgICAvLyNyZWdpb24gZXZlbnRzXG5cbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV07XG4gICAgICAgIGlmICghaGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGhhbmRsZXJzID0gbmV3IEFycmF5PEZ1bmN0aW9uPigpO1xuICAgICAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0gPSBoYW5kbGVycztcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5pbnN0YW5jZUVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5pbnN0YW5jZUVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG5cbiAgICAgICAgdmFyIGhhbmRsZXJzID0gdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV07XG4gICAgICAgIGlmIChoYW5kbGVycykge1xuICAgICAgICAgICAgdmFyIGkgPSBMYXN0SW5kZXhPZihoYW5kbGVycywgaGFuZGxlcik7XG5cbiAgICAgICAgICAgIGlmIChpID4gLTEpIGhhbmRsZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRMb2dnZXJOYW1lKCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gRXZhbHVhdGUgY29uZGl0aW9uYWwgYXR0cmlidXRlXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xuICAgICAgICB0aGlzLmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMgPSB0aGlzLmdldENvbmRpdGlvbmFsRXhwcmVzc2lvbih0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgIGlmICghdGhpcy5oYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5ncm91cChgY29uZGl0aW9uYWwgZXhwcmVzc2lvbnMgZm9yICR7dGhpcy5jb25zdHJ1Y3RvclsnbmFtZSddIHx8IHRoaXMuSUR9ICR7dGhpcy5nZXRMb2dnZXJOYW1lKCl9YC50cmltKCkpLmVuZFdoZW4oKCkgPT4ge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oJ3RlbXBsYXRlIGVsZW1lbnQ6JywgdGhpcyk7XG4gICAgICAgICAgICBGb3JFYWNoKHRoaXMuY29uZGl0aW9uYWxFeHByZXNzaW9ucywgKGNvbmRpdGlvbmFsQXR0OiBJQ29uZGl0aW9uYWxBdHRyaWJ1dGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBldmFsdWF0aW9uUmVzdWx0ID0gdGhpcy5ldmFsdWF0ZUV4cHJlc3Npb24oY29uZGl0aW9uYWxBdHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0KGV2YWx1YXRpb25SZXN1bHQsIGNvbmRpdGlvbmFsQXR0LCB0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5pbml0RnJvbUluc3RhbmNlRWxlbWVudCgpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBpbml0RnJvbUluc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgLy8vIFZpcnR1YWwgbWV0aG9kIHRvIGJlIG92ZXJyaWRlbiBieSBkZXJpdmVkIGNsYXNzLlxuICAgIH1cblxuICAgIHB1YmxpYyBoYXNDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbmFsRXhwcmVzc2lvbnMgJiYgdGhpcy5jb25kaXRpb25hbEV4cHJlc3Npb25zLmxlbmd0aCA+IDA7XG4gICAgfVxuXG4gICAgcHVibGljIGV2YWx1YXRlRXhwcmVzc2lvbihjb25kaXRpb25hbEV4cHJlc3Npb246IElDb25kaXRpb25hbEV4cHJlc3Npb24pIHtcblxuICAgICAgICBjb25zdCBleHByZXNzaW9uRGF0YSA9IHRoaXMuZ2V0RXhwcmVzc2lvbkRhdGEoKTtcblxuICAgICAgICBnaWd5YS5sb2dnZXIuZGVidWcoYGV2YWx1YXRpbmc6YCwgeyBjb25kaXRpb25hbEV4cHJlc3Npb24sIGV4cHJlc3Npb25EYXRhIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmRpdGlvbmFsRnVuY3Rpb24oXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEuc2NyZWVuc2V0LFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLnBhc3NrZXlzLFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLnZpZXdwb3J0LFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLmZvcm1EYXRhLFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLnByb2ZpbGUsXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEuZGF0YSxcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRGF0YS5zdWJzY3JpcHRpb25zLFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLmNvbW11bmljYXRpb25zLFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLnByZWZlcmVuY2VzLFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLmFjY291bnRJbmZvLFxuICAgICAgICAgICAgICAgIGV4cHJlc3Npb25EYXRhLnRmYVByb3ZpZGVycyxcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRGF0YS5hdXRoTWV0aG9kcyxcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRGF0YS5jb25mbGljdGluZ0FjY291bnQsXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEuY29uc2VudFN0YXRlbWVudHMsXG4gICAgICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEuaWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICBleHByZXNzaW9uRGF0YS5zY2hlbWEsXG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMub2JqZWN0LmV4cHJlc3Npb25IZWxwZXIoZXhwcmVzc2lvbkRhdGEpLFxuICAgICAgICAgICAgICAgIGNvbmRpdGlvbmFsRXhwcmVzc2lvbi5jb25kaXRpb24sXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoIWNvbmRpdGlvbmFsRXhwcmVzc2lvbi5pZ25vcmVFcnJvcikge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGBTY3JlZW5zZXQgZXhjZXB0aW9uIGluIGNvbmRpdGlvbmFsIGV4cHJlc3Npb24hYCwge1xuICAgICAgICAgICAgICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvbmFsRXhwcmVzc2lvbi5jb25kaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29uZGl0aW9uYWxFeHByZXNzaW9uLmRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXRFeHByZXNzaW9uRGF0YSgpIHtcbiAgICAgICAgY29uc3QgYXBpRGF0YSA9IHRoaXMuX3NjcmVlblNldC5nZXRBcGlEYXRhKCk7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0U2l6ZSA9IGdpZ3lhLnV0aWxzLnZpZXdwb3J0LmdldElubmVyU2l6ZSgpO1xuICAgICAgICBjb25zdCB2aWV3cG9ydE91dGVyU2l6ZSA9IGdpZ3lhLnV0aWxzLnZpZXdwb3J0LmdldE91dGVyU2l6ZSgpO1xuXG4gICAgICAgIGxldCBleHByZXNzaW9uRGF0YSA9IHtcbiAgICAgICAgICAgIC8vIEZvcm0gZGF0YSBjb250YWlucyBzcGVjaWFsIGZpZWxkIHZhbHVlcyAobGlrZSBsb2dpbklEKSBhbmQgbG9jYWwgZmllbGRzLlxuICAgICAgICAgICAgZm9ybURhdGE6IHt9LFxuXG4gICAgICAgICAgICAvLyBUaGlzIHJlZmxlY3RzIHRoZSBhY2NvdW50IGluZm8gcmVzcG9uc2UgKGZvciBsb2dnZWQgaW4gdXNlcikgd2l0aCB0aGUgZm9ybSBkYXRhIG1lcmdlZCBvbiB0b3Agb2YgaXQuXG4gICAgICAgICAgICAvLyBVc2VyIGlzIG5vdCBsb2dnZWQgaW4sIHN0YXJ0IHdpdGggYmxhbmsgYWNjb3VudCBpbmZvLlxuICAgICAgICAgICAgcHJvZmlsZToge30sXG4gICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgIHByZWZlcmVuY2VzOiB7fSxcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnM6IHt9LFxuICAgICAgICAgICAgY29tbXVuaWNhdGlvbnM6IHt9LFxuICAgICAgICAgICAgYXV0aE1ldGhvZHM6IGFwaURhdGEuYXV0aE1ldGhvZHMgfHwgW10sXG5cbiAgICAgICAgICAgIC8vIGFwaSBkYXRhXG4gICAgICAgICAgICBzY2hlbWE6IGFwaURhdGEuZ2V0U2NoZW1hIHx8IHt9LFxuICAgICAgICAgICAgYWNjb3VudEluZm86IGFwaURhdGEuZ2V0QWNjb3VudEluZm8gfHwge30sXG4gICAgICAgICAgICB0ZmFQcm92aWRlcnM6IHRoaXMuZ2V0UHJvdmlkZXJzKCksXG4gICAgICAgICAgICBjb25mbGljdGluZ0FjY291bnQ6IGFwaURhdGEuZ2V0Q29uZmxpY3RpbmdBY2NvdW50IHx8IHt9LFxuXG4gICAgICAgICAgICBjb25zZW50U3RhdGVtZW50czogdGhpcy5fc2NyZWVuU2V0LmRhdGE/LmNvbnNlbnRTdGF0ZW1lbnRzIHx8IHt9LFxuICAgICAgICAgICAgaWRlbnRpZmllcjogdGhpcy5fc2NyZWVuU2V0LmRhdGE/LmF1dGhNZXRob2REYXRhPy5pZGVudGlmaWVycyB8fCB7fSxcbiAgICAgICAgICAgIHBhc3NrZXlzOiB0aGlzLl9zY3JlZW5TZXQuZGF0YT8ucGFzc2tleXMgfHwgW10sXG5cbiAgICAgICAgICAgIC8vIFByZXBhcmUgc2NyZWVuc2V0IG9iamVjdC5cbiAgICAgICAgICAgIC8vIFRyYW5zbGF0aW9ucyBhcmUgbWFkZSBhdmFpbGFibGUgc3BlY2lmaWNhbGx5IGZvciBhdHRyaWJ1dGVzIHRoYXQgbmVlZCB0byBiZSBsb2NhbGl6ZWQsIHN1Y2ggYXMgdGhlIHBsYWNlaG9sZGVyIGF0dHJpYnV0ZS5cbiAgICAgICAgICAgIHNjcmVlbnNldDoge1xuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLl9zY3JlZW5TZXQuY29udGFpbmVyLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5fc2NyZWVuU2V0LmNvbnRhaW5lci5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRpb25zOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmN1c3RvbUxhbmcgfHwge30sXG4gICAgICAgICAgICAgICAgbGFuZzogdGhpcy5fc2NyZWVuU2V0LmxhbmcsXG4gICAgICAgICAgICAgICAgaXNNb2RhbDogdGhpcy5fc2NyZWVuU2V0LmlzTW9kYWwsXG4gICAgICAgICAgICAgICAgaXNNb2JpbGU6IHRoaXMuX3NjcmVlblNldC5pc01vYmlsZVVJLFxuICAgICAgICAgICAgfSBhcyBDb25kaXRpb25hbFNjcmVlblNldCxcblxuICAgICAgICAgICAgdmlld3BvcnQ6IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdmlld3BvcnRTaXplLncsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB2aWV3cG9ydFNpemUuaCxcbiAgICAgICAgICAgICAgICBvdXRlcldpZHRoOiB2aWV3cG9ydE91dGVyU2l6ZS53LFxuICAgICAgICAgICAgICAgIG91dGVySGVpZ2h0OiB2aWV3cG9ydE91dGVyU2l6ZS5oLFxuICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBnaWd5YS51dGlscy52aWV3cG9ydC5nZXRPcmllbnRhdGlvbigpLFxuICAgICAgICAgICAgfSBhcyBJVmlld3BvcnRTaXplLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEZpcnN0LCBhdHRlbXB0IHRvIGdldCB0aGUgYWNjb3VudCBpbmZvLiBUaGUgdXNlciBtYXkgbm90IGJlIGxvZ2dlZCBpbi5cbiAgICAgICAgaWYgKGFwaURhdGEuZ2V0QWNjb3VudEluZm8pIHtcbiAgICAgICAgICAgIC8vIFNldCBtZXJnZWQgZGF0YSB0byBhY2NvdW50IGluZm8uXG4gICAgICAgICAgICBleHByZXNzaW9uRGF0YSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5jbG9uZShcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5vYmplY3QuZXh0cmFjdFByb3BlcnRpZXMoYXBpRGF0YS5nZXRBY2NvdW50SW5mbywgZXhwcmVzc2lvbkRhdGEsICdwcm9maWxlfGRhdGF8cHJlZmVyZW5jZXN8c3Vic2NyaXB0aW9uc3xhdXRoTWV0aG9kcycpLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUG9wdWxhdGUgZm9ybSBkYXRhIGlmIGVsZW1lbnQgaXMgd2l0aGluIGZvcm0uIE90aGVyd2lzZSwgcHJvZmlsZS9kYXRhIGZpZWxkcyBhcmUgcG9wdWxhdGVkIGJ5IEFQSSBkYXRhLlxuICAgICAgICAvLyBQYXJlbnQgaXMgdHlwaWNhbGx5IGVpdGhlciBmb3JtIG9yIHNjcmVlbiBlbGVtZW50LlxuICAgICAgICBpZiAoLyp0aGlzLl9wYXJlbnQgaW5zdGFuY2VvZiBCYXNlRm9ybSAmJiAqLyB0aGlzLl9wYXJlbnRbJ2lzUG9wdWxhdGVkJ10pIHtcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGZsYXQgZm9ybSBkYXRhIGluIHRoZSBzYW1lIHdheSBpdCdzIGdlbmVyYXRlZCBmb3Igb3RoZXIgZXZlbnRzLlxuICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEuZm9ybURhdGEgPSAodGhpcy5fcGFyZW50IGFzIEJhc2VGb3JtKS5nZXRGbGF0Rm9ybURhdGEodHJ1ZSwgZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBEZWVwIG1lcmdlIGZvcm0gZGF0YSBvbiB0b3Agb2YgYWNjb3VudCBpbmZvIEFQSSBkYXRhLlxuICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSAodGhpcy5fcGFyZW50IGFzIEJhc2VGb3JtKS5nZXRGb3JtRGF0YShmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgZXhwcmVzc2lvbkRhdGEgPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2V4cHJlc3Npb25EYXRhLCBmb3JtRGF0YV0sIHRydWUpIGFzIGFueTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleHByZXNzaW9uRGF0YTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZXhlY3V0ZUNvbmRpdGlvbmFsUmVzdWx0KGV2YWx1YXRpb25SZXN1bHQ6IHN0cmluZywgY29uZGl0aW9uYWxBdHQ6IElDb25kaXRpb25hbEF0dHJpYnV0ZSwgZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZXZhbHVhdGlvblJlc3VsdCA9IGdpZ3lhLnV0aWxzLnZhbGlkYXRpb24uaXNFeHBsaWNpdEZhbHNlKGV2YWx1YXRpb25SZXN1bHQpID8gZXZhbHVhdGlvblJlc3VsdCA6IGV2YWx1YXRpb25SZXN1bHQgfHwgY29uZGl0aW9uYWxBdHQuZGVmYXVsdFZhbHVlO1xuXG4gICAgICAgIGlmIChldmFsdWF0aW9uUmVzdWx0ID09PSBjb25kaXRpb25hbEF0dC5sYXN0QXR0cmlidXRlVmFsdWUpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBhdHRyaWJ1dGUgJyR7Y29uZGl0aW9uYWxBdHQuYXR0cmlidXRlTmFtZX0nIHJlbWFpbmVkIHRoZSBzYW1lOiAke2V2YWx1YXRpb25SZXN1bHR9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhcbiAgICAgICAgICAgICAgICBgYXR0cmlidXRlICcke2NvbmRpdGlvbmFsQXR0LmF0dHJpYnV0ZU5hbWV9JyBjaGFuZ2VkOiAke0pTT04uc3RyaW5naWZ5KGNvbmRpdGlvbmFsQXR0Lmxhc3RBdHRyaWJ1dGVWYWx1ZSl9ID0+ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICAgICAgICAgIGV2YWx1YXRpb25SZXN1bHQsXG4gICAgICAgICAgICAgICAgKX1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbmRpdGlvbmFsQXR0Lmxhc3RBdHRyaWJ1dGVWYWx1ZSA9IGV2YWx1YXRpb25SZXN1bHQ7XG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uYWxBdHQuYXR0cmlidXRlTmFtZSA9PT0gJ2NsYXNzJyAmJiB0aGlzLmNzc0NsYXNzKSB7XG4gICAgICAgICAgICAgICAgZXZhbHVhdGlvblJlc3VsdCA9IGAke2V2YWx1YXRpb25SZXN1bHQgfHwgJyd9ICR7dGhpcy5jc3NDbGFzc31gLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhZXZhbHVhdGlvblJlc3VsdCAmJiAvLyB2YWx1ZSBpcyBmYWxzeSBhbmRcbiAgICAgICAgICAgICAgICAoIWdpZ3lhLnV0aWxzLnZhbGlkYXRpb24uaXNFeHBsaWNpdEZhbHNlKGV2YWx1YXRpb25SZXN1bHQpIHx8IC8vIGl0J3Mgbm90IGV4cGxpY2l0IGZhbHNlIChpLmUgbnVsbCwgdW5kZWZpbmVkLCAnJylcbiAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmlzSFRNTEJvb2xlYW5BdHRyaWJ1dGUoY29uZGl0aW9uYWxBdHQuYXR0cmlidXRlTmFtZSkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyBvciBpdCdzIGFuIGh0bWwgYm9vbGVhbiBhdHRyaWJ1dGUgKGZhbHNlIHZhbHVlIHJlcXVpcmVzIHRvIGZ1bGx5IHJlbW92ZSBpdClcbiAgICAgICAgICAgICAgICBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLnNldEF0dHJpYnV0ZShlbGVtZW50LCBjb25kaXRpb25hbEF0dC5hdHRyaWJ1dGVOYW1lLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0clZhbCA9IHR5cGVvZiBldmFsdWF0aW9uUmVzdWx0ID09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkoZXZhbHVhdGlvblJlc3VsdCkgOiBldmFsdWF0aW9uUmVzdWx0O1xuICAgICAgICAgICAgICAgIGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uc2V0QXR0cmlidXRlKGVsZW1lbnQsIGNvbmRpdGlvbmFsQXR0LmF0dHJpYnV0ZU5hbWUsIGF0dHJWYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGV2YWx1YXRpb25SZXN1bHQ7XG4gICAgfVxuXG4gICAgcHVibGljIHJlc2V0TGFzdENvbmRpdGlvbmFsVmFsdWVzKCkge1xuICAgICAgICBGb3JFYWNoKHRoaXMuY29uZGl0aW9uYWxFeHByZXNzaW9ucywgKGNvbmRpdGlvbmFsQXR0OiBJQ29uZGl0aW9uYWxBdHRyaWJ1dGUpID0+IHtcbiAgICAgICAgICAgIGNvbmRpdGlvbmFsQXR0Lmxhc3RBdHRyaWJ1dGVWYWx1ZSA9ICcnO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWV0YWRhdGEoKToge30ge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmluc3RhbmNlRWxlbWVudC5hdHRyaWJ1dGVzLCAoe25hbWUsIHZhbHVlfSkgPT4gKHtbbmFtZV06IHZhbHVlfSkpXG4gICAgICAgICAgICAucmVkdWNlKChhY2MsIGF0dHJpYnV0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKGFjYywgYXR0cmlidXRlKTtcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UHJvdmlkZXJzKCk6IHt9e1xuICAgICAgICBjb25zdCBhcGlEYXRhID0gdGhpcy5fc2NyZWVuU2V0LmdldEFwaURhdGEoKTtcbiAgICAgICAgaWYodGhpcy5fc2NyZWVuU2V0LmRhdGE/LnRmYVByb3ZpZGVycz8uYWN0aXZlUHJvdmlkZXJzPy5sZW5ndGgpe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5kYXRhPy50ZmFQcm92aWRlcnNcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBpRGF0YS5nZXRQcm92aWRlcnMgfHwge31cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIHBhc3N3b3JkU3RyZW5ndGgsXG4gICAgcGFzc3dvcmRTdHJlbmd0aF9zdHJlbmd0aE1ldGVyLFxuICAgIHBhc3N3b3JkU3RyZW5ndGhfbWluaW11bVJlcXVpcmVtZW50cyxcbiAgICBzY3JlZW5TZXRfZGlhbG9nLFxuICAgIHNjcmVlblNldCxcbiAgICBwaG90b1VwbG9hZF91aSxcbiAgICBwaG90b1VwbG9hZF9mb3JtLFxuICAgIGlubGluZWRQYXNzd29yZFN0cmVuZ3RoLFxuICAgIGNvbnNlbnQsXG4gICAgY29tbXVuaWNhdGlvbkNoZWNrYm94XG59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UmVzb3VyY2VzJztcblxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlc0NhY2hlIHtcbiAgICBwcml2YXRlIF9tYXA6IHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xuICAgIH0gPSB7fTtcblxuICAgIHB1YmxpYyBnZXQoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXBba2V5XTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgICAgIC8vIFRPRE86IHZhbHVlIG5lZWQgdG8gc3VwcG9ydCBib3RoIHN0cmluZyBhbmQgc3RyaW5nIGFycmF5IHBlcmhhcHMgd2l0aCB0ZW1wbGF0ZXMgdGhpcyBpcyBub3QgbmVlZGVkIGFueW1vcmVcbiAgICAgICAgdGhpcy5fbWFwW2tleV0gPSB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5ID8gdmFsdWUuam9pbignJykgOiB2YWx1ZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVmYXVsdFRlbXBsYXRlcygpIHtcbiAgICB2YXIgdGVtcGxhdGVzID0gbmV3IFRlbXBsYXRlc0NhY2hlKCk7XG5cbiAgICB0ZW1wbGF0ZXMuc2V0KCdwYXNzd29yZFN0cmVuZ3RoJywgcGFzc3dvcmRTdHJlbmd0aCk7XG4gICAgdGVtcGxhdGVzLnNldCgncGFzc3dvcmRTdHJlbmd0aC1zdHJlbmd0aE1ldGVyJywgcGFzc3dvcmRTdHJlbmd0aF9zdHJlbmd0aE1ldGVyKTtcbiAgICB0ZW1wbGF0ZXMuc2V0KCdwYXNzd29yZFN0cmVuZ3RoLW1pbmltdW1SZXF1aXJlbWVudHMnLCBwYXNzd29yZFN0cmVuZ3RoX21pbmltdW1SZXF1aXJlbWVudHMpO1xuICAgIHRlbXBsYXRlcy5zZXQoJ3NjcmVlblNldC1kaWFsb2cnLCBzY3JlZW5TZXRfZGlhbG9nKTtcbiAgICB0ZW1wbGF0ZXMuc2V0KCdzY3JlZW5TZXQnLCBzY3JlZW5TZXQpO1xuICAgIHRlbXBsYXRlcy5zZXQoJ3Bob3RvVXBsb2FkX3VpJywgcGhvdG9VcGxvYWRfdWkpO1xuICAgIHRlbXBsYXRlcy5zZXQoJ3Bob3RvVXBsb2FkX2Zvcm0nLCBwaG90b1VwbG9hZF9mb3JtKTtcbiAgICB0ZW1wbGF0ZXMuc2V0KCdpbmxpbmVkUGFzc3dvcmRTdHJlbmd0aCcsIGlubGluZWRQYXNzd29yZFN0cmVuZ3RoKTtcbiAgICB0ZW1wbGF0ZXMuc2V0KCdjb25zZW50JywgY29uc2VudCk7XG4gICAgdGVtcGxhdGVzLnNldCgnY29tbXVuaWNhdGlvbkNoZWNrQm94JywgY29tbXVuaWNhdGlvbkNoZWNrYm94KTtcblxuICAgIHJldHVybiB0ZW1wbGF0ZXM7XG59XG4iLCJpbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gJy4uL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IHtTY3JlZW59IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcbmltcG9ydCB7QmFzZUFwaUhhbmRsZXJ9IGZyb20gJy4uL0hhbmRsZXJzJztcbmltcG9ydCB7VHJhbnNsYXRlZFdpZGdldH0gZnJvbSAnLi9UcmFuc2xhdGVkV2lkZ2V0JztcbmltcG9ydCB7R1NFcnJvcnN9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcblxuZXhwb3J0IGNvbnN0IEFwaUxpbmtfQ09OU1RTID0ge1xuICBzZWxlY3RvcjogJ1tkYXRhLWdpZ3lhLWFwaS1saW5rXScsXG4gIGF0dHJpYnV0ZU5hbWU6ICdkYXRhLWdpZ3lhLWFwaS1saW5rJyxcbiAgZGlzYWJsZVRpbWVvdXRJblNlY29uZHM6ICdkYXRhLWRpc2FibGUtdGltZW91dCcsXG4gIGRpc2FibGVPblJlbmRlcjogJ2RhdGEtZGlzYWJsZS1vbi1yZW5kZXInLFxuICBkaXNhYmxlZENsYXNzOiAnZ2lneWEtZGlzYWJsZWQnLFxuICBkZXBzOiBbVHJhbnNsYXRlZFdpZGdldF0gLy9kZXBzIGRvZXNuJ3QgZG8gYW55dGhpbmcsIG9ubHkgbWFrZSBzdXJlIFRyYW5zbGF0ZWRXaWRnZXQgaXMgcmVnaXN0ZXJlZCBiZWZvcmUgdGhpcyBvbmUgKGJ5IGltcG9ydGluZyBpdClcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFwaUxpbmtXaWRnZXRDb25maWcge1xuICBkZWZhdWx0RGlzYWJsZVRpbWVvdXQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIEFwaUxpbmtXaWRnZXQgZXh0ZW5kcyBCYXNlU2NyZWVuV2lkZ2V0PEhUTUxTcGFuRWxlbWVudD4ge1xuICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IEFwaUxpbmtfQ09OU1RTO1xuICBwcml2YXRlIF9kaXNhYmxlVGltZTogbnVtYmVyO1xuICBwcml2YXRlIF9kaXNhYmxlVGltZW91dDtcbiAgcHJpdmF0ZSBfYXBpSGFuZGxlcjogQmFzZUFwaUhhbmRsZXI7XG5cbiAgY29uc3RydWN0b3IoX3NjcmVlbjogU2NyZWVuLCBlbDogSFRNTFNwYW5FbGVtZW50LFxuICAgICAgICAgICAgICBwcml2YXRlIF9hcGlMaXN0ID0gZ2lneWEuXy5hckFwaUxpc3QsXG4gICAgICAgICAgICAgIHByaXZhdGUgX2RvbVV0aWxzID0gZ2lneWEudXRpbHMuRE9NLFxuICAgICAgICAgICAgICBwcml2YXRlIF9jb25maWc6IElBcGlMaW5rV2lkZ2V0Q29uZmlnID0geyBkZWZhdWx0RGlzYWJsZVRpbWVvdXQ6IDEwIH0pIHtcbiAgICBzdXBlcihfc2NyZWVuLCBlbCwgZmFsc2UpO1xuICB9XG5cbiAgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgIHRoaXMuX2FwaUhhbmRsZXIgPSB0aGlzLl9nZXRBcGlIYW5kbGVyKCk7XG5cbiAgICBpZiAoIXRoaXMuX2FwaUhhbmRsZXIpIHJldHVybjtcblxuICAgIHRoaXMuX3NldERpc2FibGVUaW1lb3V0KCk7XG4gICAgdGhpcy5fYWRkQ2xpY2tIYW5kbGVyKCk7XG4gICAgdGhpcy5fZGlzYWJsZWRPblJlbmRlcigpO1xuICB9XG5cbiAgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgIHRoaXMuX3JlbW92ZUNsaWNrSGFuZGxlcigpO1xuICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY2xpY2tIYW5kbGVyID0gYXN5bmMgKCkgPT4ge1xuICAgIHRoaXMuX2Rpc2FibGUoKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9hcGlIYW5kbGVyLnNlbmQoKTtcblxuICAgIGNvbnN0IGhvc3RGb3JtID0gdGhpcy5fc2NyZWVuLmdldEZvcm1CeUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgIGlmICghaG9zdEZvcm0pIHJldHVybjtcblxuICAgIGlmIChyZXM/LmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0spIHtcbiAgICAgIHRoaXMuX3NjcmVlblNldC5oaWRlRXJyb3IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2NyZWVuU2V0LmRpc3BsYXlTZXJ2ZXJFcnJvcnMocmVzLCBob3N0Rm9ybSk7XG4gICAgICAvLyBlbmFibGVkIHRoZSBsaW5rIGZvciBlcnJvcnMgb3RoZXIgdGhlbiBmcmVxdWVuY3kgYW5kIGZvcmJpZGRlblxuICAgICAgaWYgKHJlcz8uZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5GUkVRVUVOQ1lfTElNSVRfUkVBQ0hFRCAmJiByZXM/LmVycm9yQ29kZSAhPT0gR1NFcnJvcnMuRk9SQklEREVOKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9kaXNhYmxlVGltZW91dCk7XG4gICAgICAgIHRoaXMuX2VuYWJsZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIF9nZXRBcGlIYW5kbGVyKCk6IEJhc2VBcGlIYW5kbGVyIHtcbiAgICBjb25zdCBtZXRob2ROYW1lID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEFwaUxpbmtfQ09OU1RTLmF0dHJpYnV0ZU5hbWUpO1xuICAgIGlmICghbWV0aG9kTmFtZSkge1xuICAgICAgZ2lneWEubG9nZ2VyLndhcm4oYFske0FwaUxpbmtfQ09OU1RTLmF0dHJpYnV0ZU5hbWV9XTogbWlzc2luZyBhcGkgbWV0aG9kIG5hbWVgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcnZlckFwaXMgPSA8Z2lneWEuXy5TZXJ2ZXJBcGlbXT50aGlzLl9hcGlMaXN0LmZpbHRlcihhcGkgPT4gYXBpIGluc3RhbmNlb2YgZ2lneWEuXy5TZXJ2ZXJBcGkpO1xuXG4gICAgcmV0dXJuIEJhc2VBcGlIYW5kbGVyLmdldEhhbmRsZXIobWV0aG9kTmFtZSwgdGhpcy5fc2NyZWVuLCBzZXJ2ZXJBcGlzKTtcbiAgfVxuXG4gIHByaXZhdGUgX2FkZENsaWNrSGFuZGxlcigpIHtcbiAgICB0aGlzLl9kb21VdGlscy5hZGRFdmVudExpc3RlbmVyKHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnY2xpY2snLCB0aGlzLl9jbGlja0hhbmRsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVtb3ZlQ2xpY2tIYW5kbGVyKCkge1xuICAgIHRoaXMuX2RvbVV0aWxzLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdjbGljaycsIHRoaXMuX2NsaWNrSGFuZGxlcik7XG4gIH1cblxuICBwcml2YXRlIF9zZXREaXNhYmxlVGltZW91dCgpIHtcbiAgICBsZXQgZGlzYWJsZVRpbWVvdXQgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoQXBpTGlua19DT05TVFMuZGlzYWJsZVRpbWVvdXRJblNlY29uZHMpO1xuICAgIGlmICghZGlzYWJsZVRpbWVvdXQgfHwgaXNOYU4oTnVtYmVyKGRpc2FibGVUaW1lb3V0KSkpIHtcbiAgICAgIGRpc2FibGVUaW1lb3V0ID0gU3RyaW5nKHRoaXMuX2NvbmZpZy5kZWZhdWx0RGlzYWJsZVRpbWVvdXQpO1xuICAgIH1cbiAgICB0aGlzLl9kaXNhYmxlVGltZSA9IE51bWJlcihkaXNhYmxlVGltZW91dCkgKiAxMDAwO1xuICB9XG5cbiAgcHJpdmF0ZSBfZGlzYWJsZSgpIHtcbiAgICB0aGlzLl9yZW1vdmVDbGlja0hhbmRsZXIoKTtcbiAgICB0aGlzLl9kb21VdGlscy5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgQXBpTGlua19DT05TVFMuZGlzYWJsZWRDbGFzcyk7XG4gICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAndHJ1ZScpO1xuXG4gICAgdGhpcy5fZGlzYWJsZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuX2VuYWJsZSgpO1xuICAgIH0sIHRoaXMuX2Rpc2FibGVUaW1lKTtcbiAgfVxuXG4gIHByaXZhdGUgX2VuYWJsZSgpIHtcbiAgICB0aGlzLl9hZGRDbGlja0hhbmRsZXIoKTtcbiAgICB0aGlzLl9kb21VdGlscy5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBBcGlMaW5rX0NPTlNUUy5kaXNhYmxlZENsYXNzKTtcbiAgICB0aGlzLmluc3RhbmNlRWxlbWVudD8ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZGlzYWJsZWRPblJlbmRlcigpIHtcbiAgICBjb25zdCBzaG91bGREaXNhYmxlID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEFwaUxpbmtfQ09OU1RTLmRpc2FibGVPblJlbmRlcik7XG4gICAgaWYgKHNob3VsZERpc2FibGUgJiYgc2hvdWxkRGlzYWJsZSAhPT0gJ2ZhbHNlJykge1xuICAgICAgdGhpcy5fZGlzYWJsZSgpO1xuICAgIH1cbiAgfVxufVxuXG5CYXNlU2NyZWVuV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShBcGlMaW5rV2lkZ2V0KTtcbiIsImltcG9ydCB7RGVlcEZyZWV6ZSwgU29tZX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHsgSVNjcmVlbldpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNjcmVlbldpZGdldCc7XG5pbXBvcnQgeyBGb3JtSW5wdXQsIEZvcm1JbnB1dF9DT05TVFMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xuaW1wb3J0IHsgSUZvcm1XaWRnZXQsIEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XG5pbXBvcnQgeyBFcnJvckRpc3BsYXlFbGVtZW50IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvckRpc3BsYXlFbGVtZW50JztcbmltcG9ydCB7Z2V0RXJyb3JCaW5kaW5nc30gZnJvbSAnLi4vZXJyb3JCaW5kaW5nSGVscGVyJztcblxuZXhwb3J0IGNvbnN0IEFycmF5TWFuYWdlcl9DT05TVCA9IHtcbiAgICBzZWxlY3RvcjogJy5naWd5YS1jb21wb3NpdGUtY29udHJvbC1hcnJheS13aWRnZXQnLFxuICAgIGNvbnRhaW5lclNlbGVjdG9yOiAnLmdpZ3lhLWFycmF5LW1hbmFnZXInLFxuICAgIGZvcm1FbFNlbGVjdG9yOiAnaW5wdXQsc2VsZWN0LCBmaWVsZHNldCwgLmdpZ3lhLWFycmF5LW1hbmFnZXInLFxuICAgIGFkZEJ1dHRvblNlbGVjdG9yOiAnYnV0dG9uLmdpZ3lhLWFycmF5LWFkZC1idG4nLFxuICAgIHJlbW92ZUJ1dHRvblNlbGVjdG9yOiAnYnV0dG9uLmdpZ3lhLWFycmF5LXJlbW92ZS1idG4nLFxuICAgIGl0ZW1XcmFwcGVyQ2xhc3M6ICdnaWd5YS1hcnJheS10ZW1wbGF0ZScsXG4gICAgaW5wdXRzV3JhcHBlckNsYXNzOiAnaW5wdXRzLXdyYXBwZXInLFxuICAgIGJ1dHRvbnNXcmFwcGVyQ2xhc3M6ICdidXR0b25zLXdyYXBwZXInLFxuICAgIHRlbXBsYXRlSXRlbUF0dHI6ICdkYXRhLWFycmF5LXRlbXBsYXRlLWlkJyxcbiAgICBhcnJheU1hbmFnZXJSb290QXR0cjogJ2RhdGEtYXJyYXktbWFuYWdlci1yb290JyxcbiAgICBkZWxldGVEaXNhYmxlZENsYXNzOiAnZGlzYWJsZS1kZWxldGUnLFxuICAgIGluZGV4TWF0Y2hlcjogL1xcWyhbMC05XSspXS9nLFxufTtcbkRlZXBGcmVlemUoQXJyYXlNYW5hZ2VyX0NPTlNUKTtcbmxldCBfaWRHZW5lcmF0b3IgPSAwO1xuZXhwb3J0IGNsYXNzIEFycmF5TWFuYWdlckl0ZW0ge1xuICAgIHByaXZhdGUgX3VuaXF1ZUl0ZW1JRDtcbiAgICBwcml2YXRlIF9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwcml2YXRlIF9pbnB1dHNXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcHJpdmF0ZSBfYnV0dG9uc1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBwcml2YXRlIF9mb3JtOiBCYXNlRm9ybTtcbiAgICBwcml2YXRlIF9zY3JlZW46IFNjcmVlbjtcblxuICAgIHB1YmxpYyBvbkRpc3Bvc2U6IEFycmF5PCgpID0+IHZvaWQ+ID0gW107XG4gICAgcHVibGljIHNjcmVlbldpZGdldHM6IEFycmF5PElTY3JlZW5XaWRnZXQ+ID0gW107XG4gICAgcHVibGljIGZvcm1JbnB1dHM6IEFycmF5PEZvcm1JbnB1dD4gPSBbXTtcbiAgICBwdWJsaWMgZm9ybVdpZGdldHM6IEFycmF5PElGb3JtV2lkZ2V0PiA9IFtdO1xuICAgIHB1YmxpYyBib3VuZGVkRXJyb3JzOiBBcnJheTxFcnJvckRpc3BsYXlFbGVtZW50PiA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IocHVibGljIGFycmF5TWFuYWdlcjogQXJyYXlNYW5hZ2VyV2lkZ2V0LCBwcml2YXRlIF9pbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSBhcnJheU1hbmFnZXIuX2Zvcm07XG4gICAgICAgIHRoaXMuX3NjcmVlbiA9IGFycmF5TWFuYWdlci5fc2NyZWVuO1xuXG4gICAgICAgIHRoaXMuX3VuaXF1ZUl0ZW1JRCA9IGBhcnJheS10ZW1wbGF0ZS0ke0RhdGUubm93KCl9LSR7X2luZGV4fWA7XG5cbiAgICAgICAgdGhpcy5fYnV0dG9uc1dyYXBwZXIuaWQgPSBgJHt0aGlzLl91bmlxdWVJdGVtSUR9XyR7QXJyYXlNYW5hZ2VyX0NPTlNULmJ1dHRvbnNXcmFwcGVyQ2xhc3N9YDtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuX2J1dHRvbnNXcmFwcGVyLCBBcnJheU1hbmFnZXJfQ09OU1QuYnV0dG9uc1dyYXBwZXJDbGFzcyk7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLl9pbnB1dHNXcmFwcGVyLCBBcnJheU1hbmFnZXJfQ09OU1QuaW5wdXRzV3JhcHBlckNsYXNzKTtcblxuICAgICAgICB0aGlzLl9pbnB1dHNXcmFwcGVyLmFwcGVuZENoaWxkKGFycmF5TWFuYWdlci5jcmVhdGVJbnB1dHNXcmFwcGVyKCkpO1xuXG4gICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IGFycmF5TWFuYWdlci5hdHRhY2hSZW1vdmVCdXR0b24odGhpcyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbnNXcmFwcGVyLmFwcGVuZENoaWxkKHJlbW92ZUJ1dHRvbik7XG5cbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2lucHV0c1dyYXBwZXIpO1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fYnV0dG9uc1dyYXBwZXIpO1xuXG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLl9jb250YWluZXIsIEFycmF5TWFuYWdlcl9DT05TVC5pdGVtV3JhcHBlckNsYXNzKTtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnNldEF0dHJpYnV0ZShBcnJheU1hbmFnZXJfQ09OU1QudGVtcGxhdGVJdGVtQXR0ciwgdGhpcy5fdW5pcXVlSXRlbUlEKTtcblxuICAgICAgICAvLyBtYXAgb2xkIGlkcyB0byB0aGUgbmV3IGlkcywgd2UgaGF2ZSB0byBkbyB0aGlzIHNpbmNlIGVhY2ggaWQgbXVzdCBhbHdheXMgbWFwIHRvIHRoZSBzYW1lIG5ldyBpZFxuICAgICAgICBjb25zdCBpZHNNYXAgPSB0aGlzLl9nZXRBbGxFbGVtZW50cygpXG4gICAgICAgICAgICAuZmlsdGVyKGVsID0+IEJvb2xlYW4oZWwuaWQpKVxuICAgICAgICAgICAgLnJlZHVjZSgob2JqLCBlbCkgPT4ge1xuICAgICAgICAgICAgICAgIG9ialtlbC5pZF0gPSBgJHtlbC5pZH1fJHsrK19pZEdlbmVyYXRvcn1gO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgLy8gcmVwbGFjZSBhbnkgb2NjdXJyZW5jZSBvZiB0aGUgaWQgd2l0aCB0aGUgbmV3bHkgZ2VuZXJhdGVkIGlkXG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5tYW5pcHVsYXRlQXR0cmlidXRlcyh0aGlzLl9nZXRBbGxFbGVtZW50cygpLCBuZXcgUmVnRXhwKE9iamVjdC5rZXlzKGlkc01hcCkuam9pbignfCcpLCAnZycpLCBpZCA9PiBpZHNNYXBbaWRdKTtcblxuICAgICAgICB0aGlzLl9pbmRleE5hbWVCaW5kaW5ncygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJRCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fdW5pcXVlSXRlbUlEO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbmRleCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5kZXg7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEluZGV4KGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXR0YWNoQWRkQnV0dG9uKGFkZEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uc1dyYXBwZXIuaW5zZXJ0QmVmb3JlKGFkZEJ1dHRvbiwgdGhpcy5fYnV0dG9uc1dyYXBwZXIuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZSgpIHtcbiAgICAgICAgdGhpcy5fbGlua1RvU2NyZWVuKCk7XG4gICAgICAgIHRoaXMuX2xpbmtUb0Zvcm0oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29udGFpbmVyKCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5vbkRpc3Bvc2UuZm9yRWFjaChjYiA9PiBjYigpKTtcbiAgICAgICAgdGhpcy5fdW5saW5rU2NyZWVuKCk7XG4gICAgICAgIHRoaXMuX3VubGlua0Zvcm0oKTtcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRhaW5lci5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9jb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5faW5kZXhOYW1lQmluZGluZ3MoKTtcbiAgICAgICAgdGhpcy5fc2NyZWVuLnJlbW92ZVNwZWNpZmljRXJyb3JCaW5kcyh0aGlzLmJvdW5kZWRFcnJvcnMpO1xuICAgICAgICB0aGlzLmJvdW5kZWRFcnJvcnMgPSB0aGlzLl9zY3JlZW4uYWRkU3BlY2lmaWNFcnJvckJpbmRzKGdldEVycm9yQmluZGluZ3ModGhpcy5faW5wdXRzV3JhcHBlcikpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlZ2lzdGVyQm91bmRlZEVycm9yRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5mb3JtSW5wdXRzLmZvckVhY2goaSA9PiBpLnVwZGF0ZSgpKTtcbiAgICAgICAgdGhpcy5mb3JtV2lkZ2V0cy5mb3JFYWNoKHcgPT4gdy51cGRhdGUoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0QWxsRWxlbWVudHMoKTogRWxlbWVudFtdIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2lucHV0c1dyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnKicpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pbmRleE5hbWVCaW5kaW5ncygpIHtcbiAgICAgICAgY29uc3QgbmFtZXNUb01hcCA9IHRoaXMuYXJyYXlNYW5hZ2VyLmdldEZpZWxkc05hbWVzKCkuY29uY2F0KHRoaXMuYXJyYXlNYW5hZ2VyLmdldFN0b3JlQXNBcnJheVJvb3RzKCkpO1xuICAgICAgICBjb25zdCByb290TmFtZSA9IHRoaXMuYXJyYXlNYW5hZ2VyLmdldFJvb3ROYW1lKCk7XG4gICAgICAgIGNvbnN0IGJhc2VSb290TmFtZSA9IHJvb3ROYW1lLnJlcGxhY2UoQXJyYXlNYW5hZ2VyX0NPTlNULmluZGV4TWF0Y2hlciwgJycpO1xuXG4gICAgICAgIC8vIG1hdGNoIGFueSBvY2N1cnJlbmNlIG9mIGFueSBiaW5kaW5nLCB3aXRoIG9yIHdpdGhvdXQgaW5kZXggY2xhdXNlLlxuICAgICAgICAvLyBhbiBleGFtcGxlIG9mIHRoZSBvdXRwdXQ6IFwiYW5jZXN0b3JSb290KGluZGV4KT8ucm9vdChpbmRleCk/LmZpZWxkTmFtZTF8YW5jZXN0b3JSb290KGluZGV4KT8ucm9vdChpbmRleCk/LmZpZWxkTmFtZTJcIlxuICAgICAgICBjb25zdCBiaW5kaW5nTWF0Y2hlciA9IG5hbWVzVG9NYXBcbiAgICAgICAgICAgIC5maWx0ZXIobmFtZSA9PiBCb29sZWFuKG5hbWUpKVxuICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICBuYW1lID0+XG4gICAgICAgICAgICAgICAgICAgIHJvb3ROYW1lLnJlcGxhY2UoQXJyYXlNYW5hZ2VyX0NPTlNULmluZGV4TWF0Y2hlciwgJyg/OlxcXFxbWzAtOV0rXSk/JykgKyAvLyBjb252ZXJ0IGFueSBleGlzdGluZyBpbmRleCBpbiBcInJvb3ROYW1lXCIgdG8gYmUgb3B0aW9uYWwgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgJyg/OlxcXFxbWzAtOV0rXSk/JyArIC8vIG9wdGlvbmFsIGN1cnJlbnQgaW5kZXhcbiAgICAgICAgICAgICAgICAgICAgbmFtZS5zdWJzdHIoYmFzZVJvb3ROYW1lLmxlbmd0aCksXG4gICAgICAgICAgICApIC8vIGFjdHVhbCBmaWVsZCBuYW1lXG4gICAgICAgICAgICAuam9pbignfCcpO1xuXG4gICAgICAgIC8vIGFkZCBjdXJyZW50IGluZGV4IHRvIGVhY2ggZmllbGQgbmFtZVxuICAgICAgICBnaWd5YS51dGlscy5ET00ubWFuaXB1bGF0ZUF0dHJpYnV0ZXMoXG4gICAgICAgICAgICB0aGlzLl9nZXRBbGxFbGVtZW50cygpLFxuICAgICAgICAgICAgbmV3IFJlZ0V4cChiaW5kaW5nTWF0Y2hlciwgJ2cnKSxcbiAgICAgICAgICAgIG1hdGNoID0+IGFkZEluZGV4KG1hdGNoLCByb290TmFtZSwgdGhpcy5faW5kZXgpLFxuICAgICAgICAgICAgYXR0ciA9PiAvXm5hbWV8XmRhdGEtfF5naWd5YS9pLnRlc3QoYXR0ci5uYW1lKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9saW5rVG9TY3JlZW4oKSB7XG4gICAgICAgIHRoaXMuc2NyZWVuV2lkZ2V0cyA9IHRoaXMuX3NjcmVlbi5hZGREeW5hbWljV2lkZ2V0cyh0aGlzLl9jb250YWluZXIpO1xuICAgICAgICB0aGlzLmJvdW5kZWRFcnJvcnMgPSB0aGlzLl9zY3JlZW4uYWRkU3BlY2lmaWNFcnJvckJpbmRzKGdldEVycm9yQmluZGluZ3ModGhpcy5faW5wdXRzV3JhcHBlcikpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3VubGlua1NjcmVlbigpIHtcbiAgICAgICAgdGhpcy5fc2NyZWVuLnJlbW92ZUR5bmFtaWNXaWRnZXRzKHRoaXMuc2NyZWVuV2lkZ2V0cyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbGlua1RvRm9ybSgpIHtcbiAgICAgICAgdGhpcy5mb3JtSW5wdXRzID0gdGhpcy5fZm9ybS5hZGREeW5hbWljSW5wdXRzKHRoaXMuX2lucHV0c1dyYXBwZXIpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlZ2lzdGVyQm91bmRlZEVycm9yRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5mb3JtV2lkZ2V0cyA9IHRoaXMuX2Zvcm0uYWRkRHluYW1pY1dpZGdldHModGhpcy5faW5wdXRzV3JhcHBlcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdW5saW5rRm9ybSgpIHtcbiAgICAgICAgdGhpcy5fZm9ybS5yZW1vdmVEeW5hbWljV2lkZ2V0cyh0aGlzLmZvcm1XaWRnZXRzKTtcbiAgICAgICAgdGhpcy5fZm9ybS5yZWdpc3RlckJvdW5kZWRFcnJvckVsZW1lbnRzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVtb3ZlRHluYW1pY0lucHV0cyh0aGlzLmZvcm1JbnB1dHMpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBcnJheU1hbmFnZXJXaWRnZXQgZXh0ZW5kcyBCYXNlRm9ybVdpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gQXJyYXlNYW5hZ2VyX0NPTlNUO1xuICAgIHB1YmxpYyBvbkRpc3Bvc2UgPSBuZXcgQXJyYXk8KCkgPT4gdm9pZD4oKTtcblxuICAgIHByaXZhdGUgX2FycmF5Um9vdE5hbWU6IHN0cmluZztcbiAgICBwcml2YXRlIF9pbnB1dHNUZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICBwcml2YXRlIF9idXR0b25zVGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfYXJyYXlDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgX21pbmltdW1JdGVtczogbnVtYmVyO1xuICAgIHByaXZhdGUgX2FkZEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfaXRlbXM6IEFycmF5PEFycmF5TWFuYWdlckl0ZW0+ID0gW107XG4gICAgcHJpdmF0ZSBfZmllbGRzTmFtZXM6IHN0cmluZ1tdO1xuICAgIHByaXZhdGUgX3N0b3JlQXNBcnJheVJvb3RzOiBzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKF9mb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKF9mb3JtLCBlbCwgZmFsc2UpO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZXMgPSB0aGlzLnRlbXBsYXRlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgICAgICB0aGlzLl9pbnB1dHNUZW1wbGF0ZSA9IHRlbXBsYXRlc1swXSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xuICAgICAgICB0aGlzLl9idXR0b25zVGVtcGxhdGUgPSB0ZW1wbGF0ZXNbMV0gYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcblxuICAgICAgICBpZiAoIXRoaXMuX2lucHV0c1RlbXBsYXRlICYmIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4oJ2dpZ3lhOiBBcnJheSBNYW5hZ2VyIGlzIHByb3ZpZGVkIHdpdGggaW52YWxpZCB0ZW1wbGF0ZScpO1xuXG4gICAgICAgIHRoaXMuX21pbmltdW1JdGVtcyA9IE51bWJlcih0aGlzLnBhcmFtc1snbWluaW11bSddKSB8fCAxO1xuICAgICAgICB0aGlzLl9maWVsZHNOYW1lcyA9IHRoaXMuZ2V0RmllbGRzTmFtZXNOb3JtYWxpemVkKCk7XG4gICAgICAgIHRoaXMuX3N0b3JlQXNBcnJheVJvb3RzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlXG4gICAgICAgICAgICAuY2FsbCh0aGlzLl9pbnB1dHNUZW1wbGF0ZS5jb250ZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYFske0Zvcm1JbnB1dF9DT05TVFMuYXJyYXlSb290QXR0cmlidXRlfV1gKSlcbiAgICAgICAgICAgIC5tYXAoaSA9PiBpLmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmFycmF5Um9vdEF0dHJpYnV0ZSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGaWVsZHNOYW1lc05vcm1hbGl6ZWQoKXtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZVxuICAgICAgICAgICAgLmNhbGwodGhpcy5faW5wdXRzVGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKEFycmF5TWFuYWdlcl9DT05TVC5mb3JtRWxTZWxlY3RvcikpXG4gICAgICAgICAgICAuZmlsdGVyKGVsID0+ICF0aGlzLmZpbHRlckVsZW1lbnRzKGVsKSlcbiAgICAgICAgICAgIC5tYXAoaSA9PiB0aGlzLl9mb3JtLmdldE5vcm1hbGl6ZWRGaWVsZE5hbWUoaS5nZXRBdHRyaWJ1dGUoJ25hbWUnKSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZmlsdGVyRWxlbWVudHMoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBpZ25vcmVQaG9uZUlucHV0U2VsZWN0b3JzID0gW1xuICAgICAgICAgICAgJ3NlbGVjdC5naWd5YS1jb3VudHJ5LWNvZGUtc2VsZWN0JyxcbiAgICAgICAgICAgICdpbnB1dC5naWd5YS1pbnB1dC10ZXh0LmdpZ3lhLXN1YnNjcmliZXItcGhvbmUtbnVtYmVyLWlucHV0JyxcbiAgICAgICAgICAgICdmaWVsZHNldC5naWd5YS1maWVsZHNldC5naWd5YS1waG9uZS1udW1iZXItdmVyaWZpY2F0aW9uJyxcbiAgICAgICAgICAgICdpbnB1dC5naWd5YS1pbnB1dC10ZXh0LmdpZ3lhLXBob25lLW51bWJlci12ZXJpZmljYXRpb24tY29kZScsXG4gICAgICAgICAgICAnZmllbGRzZXQuZ2lneWEtZmllbGRzZXQuZ2lneWEtcGhvbmUtbnVtYmVyLXZlcmlmaWVkJyxcbiAgICAgICAgICAgICdnaWd5YS1pbnB1dC10ZXh0LmdpZ3lhLXN1YnNjcmliZXItcGhvbmUtbnVtYmVyLWlucHV0J1xuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gISFpZ25vcmVQaG9uZUlucHV0U2VsZWN0b3JzLmZpbmQoc2VsZWN0b3IgPT4gZWxlbWVudC5tYXRjaGVzKHNlbGVjdG9yKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZUlucHV0c1dyYXBwZXIoKTogRG9jdW1lbnRGcmFnbWVudCB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMuX2lucHV0c1RlbXBsYXRlLmNvbnRlbnQsIHRydWUpIGFzIERvY3VtZW50RnJhZ21lbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIGF0dGFjaFJlbW92ZUJ1dHRvbihpdGVtOiBBcnJheU1hbmFnZXJJdGVtKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xuICAgICAgICBjb25zdCBsaXN0ZW5lciA9ICgpID0+IHRoaXMucmVtb3ZlSXRlbShpdGVtLmdldElEKCkpLFxuICAgICAgICAgICAgYnV0dG9uID0gdGhpcy5fZ2V0QnV0dG9uKCdyZW1vdmUnLCBsaXN0ZW5lcik7XG4gICAgICAgIGl0ZW0ub25EaXNwb3NlLnB1c2goKCkgPT4gYnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlzdGVuZXIpKTtcbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIHRoaXMuX2FycmF5Q29udGFpbmVyID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcihBcnJheU1hbmFnZXJfQ09OU1QuY29udGFpbmVyU2VsZWN0b3IpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBjb25zdCBhZGRMaXN0ZW5lciA9ICgpID0+IHRoaXMuYWRkSXRlbSgpO1xuICAgICAgICB0aGlzLl9hZGRCdXR0b24gPSB0aGlzLl9nZXRCdXR0b24oJ2FkZCcsIGFkZExpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5vbkRpc3Bvc2UucHVzaCgoKSA9PiB0aGlzLl9hZGRCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRMaXN0ZW5lcikpO1xuICAgICAgICB0aGlzLl9hcnJheVJvb3ROYW1lID0gdGhpcy5fYXJyYXlDb250YWluZXIuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG5cbiAgICAgICAgLy9BcnJhbmdlIHByZS1wb3B1bGF0ZSBkYXRhIGZpZWxkc1xuICAgICAgICBjb25zdCBwb3B1bGF0ZURhdGEgPSB0aGlzLl9mb3JtLnByZVBvcHVsYXRlRGF0YSgpLFxuICAgICAgICAgICAgYXJyYXlSb290ID0gZ2lneWEudXRpbHMub2JqZWN0LmdldFByb3BlcnR5QnlTZXJpYWxpemVkTmFtZShwb3B1bGF0ZURhdGEsIHRoaXMuX2FycmF5Um9vdE5hbWUsIGZhbHNlKTtcblxuICAgICAgICBsZXQgbGVuID0gdGhpcy5fbWluaW11bUl0ZW1zO1xuICAgICAgICBpZiAoYXJyYXlSb290ICYmIGFycmF5Um9vdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICBsZW4gPSBNYXRoLm1heCh0aGlzLl9taW5pbXVtSXRlbXMsIGFycmF5Um9vdC5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hZGRJdGVtKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuLnJlbW92ZVNwZWNpZmljRXJyb3JCaW5kcyhpdGVtLmJvdW5kZWRFcnJvcnMpO1xuICAgICAgICAgICAgdGhpcy5fZm9ybS5yZWdpc3RlckJvdW5kZWRFcnJvckVsZW1lbnRzKCk7XG4gICAgICAgICAgICBpdGVtLmRpc3Bvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2l0ZW1zID0gW107XG4gICAgICAgIHRoaXMub25EaXNwb3NlLmZvckVhY2goY2IgPT4gY2IoKSk7XG4gICAgICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRJdGVtKCkge1xuICAgICAgICBjb25zdCBpdGVtID0gbmV3IEFycmF5TWFuYWdlckl0ZW0odGhpcywgdGhpcy5faXRlbXMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5fYXJyYXlDb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbS5nZXRDb250YWluZXIoKSk7XG4gICAgICAgIGl0ZW0uYXR0YWNoQWRkQnV0dG9uKHRoaXMuX2FkZEJ1dHRvbik7XG4gICAgICAgIGl0ZW0ubGlua0luc3RhbmNlKCk7XG4gICAgICAgIHRoaXMuX2l0ZW1zLnB1c2goaXRlbSk7XG5cbiAgICAgICAgdGhpcy5fYXBwbHlDdXJyZW50U3RhdGUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSXRlbShpdGVtSUQ6IHN0cmluZykge1xuICAgICAgICBsZXQgcmVtb3ZlSW5kZXggPSAtMSxcbiAgICAgICAgICAgIGl0ZW1Ub1JlbW92ZSA9IG51bGw7XG4gICAgICAgIFNvbWUodGhpcy5faXRlbXMsIChpdGVtLCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5nZXRJRCgpID09PSBpdGVtSUQpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgaXRlbVRvUmVtb3ZlID0gaXRlbTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghaXRlbVRvUmVtb3ZlKSByZXR1cm47XG4gICAgICAgIHRoaXMuX3NjcmVlbi5yZW1vdmVTcGVjaWZpY0Vycm9yQmluZHMoaXRlbVRvUmVtb3ZlLmJvdW5kZWRFcnJvcnMpO1xuICAgICAgICB0aGlzLl9mb3JtLnJlZ2lzdGVyQm91bmRlZEVycm9yRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKHJlbW92ZUluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5fcmVpbmRleEl0ZW1zKHJlbW92ZUluZGV4KTtcbiAgICAgICAgaXRlbVRvUmVtb3ZlLmRpc3Bvc2UoKTtcbiAgICAgICAgaWYgKHRoaXMuX2l0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aCAtIDFdLmF0dGFjaEFkZEJ1dHRvbih0aGlzLl9hZGRCdXR0b24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2FwcGx5Q3VycmVudFN0YXRlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZpZWxkc05hbWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmllbGRzTmFtZXM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFN0b3JlQXNBcnJheVJvb3RzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmVBc0FycmF5Um9vdHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcmVpbmRleEl0ZW1zKHN0YXJ0SW5kZXg6IG51bWJlcikge1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IHRoaXMuX2l0ZW1zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl9pdGVtc1tpXS5zZXRJbmRleChpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX2FwcGx5Q3VycmVudFN0YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5faXRlbXMubGVuZ3RoIDw9IHRoaXMuX21pbmltdW1JdGVtcykge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuX2FycmF5Q29udGFpbmVyLCBBcnJheU1hbmFnZXJfQ09OU1QuZGVsZXRlRGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLl9hcnJheUNvbnRhaW5lciwgQXJyYXlNYW5hZ2VyX0NPTlNULmRlbGV0ZURpc2FibGVkQ2xhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmNlbnRlck1vZGFsKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJvb3ROYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcnJheVJvb3ROYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2FycmF5Um9vdE5hbWUgPSB0aGlzLl9hcnJheUNvbnRhaW5lci5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaChpdGVtID0+IGl0ZW0udXBkYXRlKCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldEJ1dHRvbih0eXBlOiAnYWRkJyB8ICdyZW1vdmUnLCBsaXN0ZW5lcj86ICgpID0+IHZvaWQpOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmltcG9ydE5vZGUoXG4gICAgICAgICAgICB0aGlzLl9idXR0b25zVGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKEFycmF5TWFuYWdlcl9DT05TVFtgJHt0eXBlfUJ1dHRvblNlbGVjdG9yYF0pWzBdLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ0bjtcbiAgICB9XG59XG5CYXNlRm9ybVdpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoQXJyYXlNYW5hZ2VyV2lkZ2V0KTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEluZGV4KG9yaWdpbmFsOiBzdHJpbmcsIGFycmF5Um9vdDogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoIW9yaWdpbmFsIHx8ICFhcnJheVJvb3QpIHJldHVybiAnJztcbiAgICBvcmlnaW5hbCA9IG9yaWdpbmFsLnJlcGxhY2UoQXJyYXlNYW5hZ2VyX0NPTlNULmluZGV4TWF0Y2hlciwgJycpO1xuICAgIGNvbnN0IGJhc2VBcnJheVJvb3QgPSBhcnJheVJvb3QucmVwbGFjZShBcnJheU1hbmFnZXJfQ09OU1QuaW5kZXhNYXRjaGVyLCAnJyk7XG5cbiAgICByZXR1cm4gYCR7YXJyYXlSb290fVske2luZGV4fV0uJHtvcmlnaW5hbC5zdWJzdHIoYmFzZUFycmF5Um9vdC5sZW5ndGggKyAxKX1gO1xufVxuIiwiaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IEJhc2VTY3JlZW5XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHsgVHJhbnNsYXRlZFdpZGdldCB9IGZyb20gJy4vVHJhbnNsYXRlZFdpZGdldCc7XG5cbmV4cG9ydCBjb25zdCBCaW5kaW5nX0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJypbZGF0YS1iaW5kaW5nXScsXG4gICAgZGF0YUJpbmRpbmdBdHRyaWJ1dGU6ICdkYXRhLWJpbmRpbmcnLFxufTtcbkRlZXBGcmVlemUoQmluZGluZ19DT05TVFMpO1xuZXhwb3J0IGNsYXNzIEJpbmRpbmdXaWRnZXQgZXh0ZW5kcyBCYXNlU2NyZWVuV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XG4gICAgcHVibGljIGRlcHMgPSBbVHJhbnNsYXRlZFdpZGdldF07XG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IEJpbmRpbmdfQ09OU1RTO1xuICAgIHByaXZhdGUgc3VwcG9ydEludGVycG9sYXRpb246IGJvb2xlYW47XG4gICAgcHJvdGVjdGVkIG9yaWdpbmFsU3RyaW5nOiBzdHJpbmc7XG4gICAgcHJvdGVjdGVkIGxhc3RWYWx1ZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoX3NjcmVlbjogU2NyZWVuLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgLy8gVHVybiByZXNldENTUyBvZmYuXG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgICAgIHRoaXMuc3VwcG9ydEludGVycG9sYXRpb24gPSB0aGlzLnRlbXBsYXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoQmluZGluZ1dpZGdldC5DT05TVFMuZGF0YUJpbmRpbmdBdHRyaWJ1dGUpID09ICd0cnVlJztcbiAgICAgICAgdGhpcy5vcmlnaW5hbFN0cmluZyA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEJpbmRpbmdLZXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luYWxTdHJpbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IFZhbHVlIGZyb20gYXBpRGF0YVxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZXRWYWx1ZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5nZXRCaW5kaW5nS2V5KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnN1cHBvcnRJbnRlcnBvbGF0aW9uID8gdGhpcy5ldmFsdWF0ZSh0ZXh0KSA6IHRleHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGJvdW5kZWQgdGV4dC5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdXBkYXRlVmFsdWUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpO1xuICAgICAgICBpZiAoKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpICYmIHRoaXMubGFzdFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy51bmxpbmtXaWRnZXRzKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5sYXN0VmFsdWU7XG4gICAgICAgICAgICB0aGlzLmxpbmtXaWRnZXRzKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5CYXNlU2NyZWVuV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShCaW5kaW5nV2lkZ2V0KTtcbiIsImltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XG5pbXBvcnQgeyBJQ2FwdGNoYUhhbmRsZXIsIENhcHRjaGFNb2RlLCBDYXB0Y2hhSGFuZGxlcnMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzL0NhcHRjaGFIYW5kbGVyL0Jhc2VDYXB0Y2hhSGFuZGxlcic7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgUmVnaXN0ZXJGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9SZWdpc3RlckZvcm0nO1xuaW1wb3J0IHsgaXNIaWRkZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IENhcHRjaGFXaWRnZXRfQ09OU1RTID0ge1xuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLWNhcHRjaGEnXG59O1xuZXhwb3J0IGNsYXNzIENhcHRjaGFXaWRnZXQgZXh0ZW5kcyBCYXNlRm9ybVdpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gQ2FwdGNoYVdpZGdldF9DT05TVFM7XG5cbiAgICBwcml2YXRlIF9jYXB0Y2hhSGFuZGxlcjogSUNhcHRjaGFIYW5kbGVyO1xuICAgIHByaXZhdGUgX2luZGV4OiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3Rvcihmb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKGZvcm0sIGVsKTtcbiAgICAgICAgdGhpcy5faW5kZXggPSBmb3JtLl9zY3JlZW4uX2NhcHRjaGFzLmxlbmd0aDtcbiAgICAgICAgZm9ybS5fc2NyZWVuLl9jYXB0Y2hhcy5wdXNoKHRoaXMpO1xuICAgICAgICBjb25zdCBoYW5kbGVyQ29uZmlnID0gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtcbiAgICAgICAgICAgIHRoaXMucGFyYW1zLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhbmc6IHRoaXMuX3NjcmVlblNldC5wYXJhbXNbJ2xhbmcnXSxcbiAgICAgICAgICAgICAgICBtb2RlOiB0aGlzLmNhcHRjaGFNb2RlKGZvcm0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUhhbmRsZXIgPSBDYXB0Y2hhSGFuZGxlcnNbZ2lneWEucGFydG5lclNldHRpbmdzLmNhcHRjaGFQcm92aWRlcl07XG4gICAgICAgIGlmIChhY3RpdmVIYW5kbGVyICYmIHR5cGVvZiBhY3RpdmVIYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLl9jYXB0Y2hhSGFuZGxlciA9IG5ldyBhY3RpdmVIYW5kbGVyKGhhbmRsZXJDb25maWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbR2lneWFdOiB1bnN1cHBvcnRlZCBjYXB0Y2hhIHByb3ZpZGVyYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNhcHRjaGFNb2RlKGZvcm06IEJhc2VGb3JtKTogQ2FwdGNoYU1vZGUge1xuICAgICAgICBpZiAodGhpcy5wYXJhbXM/Lm1vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBDYXB0Y2hhTW9kZVt0aGlzLnBhcmFtcy5tb2RlXVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3JtIGluc3RhbmNlb2YgUmVnaXN0ZXJGb3JtID8gQ2FwdGNoYU1vZGUuaW52aXNpYmxlIDogQ2FwdGNoYU1vZGUudmlzaWJsZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgY29uc3QgaW5pdFJlc3BvbnNlID0gYXdhaXQgdGhpcy5fY2FwdGNoYUhhbmRsZXIuaW5pdCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgIGlmICghaW5pdFJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgICAgICAgICAgdGhpcy5fZm9ybS5fc2NyZWVuLl9jYXB0Y2hhcy5zcGxpY2UodGhpcy5faW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzSGlkZGVuKCkge1xuICAgICAgICByZXR1cm4gaXNIaWRkZW4odGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZWxvYWQoKSB7XG4gICAgICAgIHRoaXMuX2NhcHRjaGFIYW5kbGVyLnJlc2V0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFRva2VuKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYXB0Y2hhSGFuZGxlci5nZXRUb2tlbigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUeXBlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYXB0Y2hhSGFuZGxlci5nZXRUeXBlKCk7XG4gICAgfVxufVxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KENhcHRjaGFXaWRnZXQpO1xuIiwiaW1wb3J0IHtDYXJkTGlzdF9DT05TVFN9IGZyb20gJy4vQ2FyZExpc3RXaWRnZXQnO1xuaW1wb3J0IHtCYXNlRm9ybVdpZGdldCwgSUZvcm1XaWRnZXR9IGZyb20gJy4uL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7QmFzZUZvcm19IGZyb20gJy4uL0Jhc2VGb3JtJztcbmltcG9ydCB7QmluZGluZ1dpZGdldH0gZnJvbSAnLi9CaW5kaW5nV2lkZ2V0JztcbmltcG9ydCB7Z2V0RXJyb3JCaW5kaW5nc30gZnJvbSAnLi4vZXJyb3JCaW5kaW5nSGVscGVyJztcbmltcG9ydCB7SVNjcmVlbldpZGdldH0gZnJvbSBcIi4uL0Jhc2VTY3JlZW5XaWRnZXRcIjtcbmltcG9ydCB7Rm9ybUlucHV0fSBmcm9tIFwiLi4vSW5wdXRzL0Zvcm1JbnB1dFwiO1xuXG5leHBvcnQgY29uc3QgQ2FyZExpc3RJdGVtX0NPTlNUUyA9IHtcbiAgZGF0YVBhdGhBdHRyaWJ1dGU6ICdkYXRhLXNjcmVlbi1zZXQtZGF0YS1wYXRoJyxcbiAgYmluZGluZ1ByZWZpeEF0dHJpYnV0ZTogJ2RhdGEtYmluZGluZy1wcmVmaXgnLFxufTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENhcmRMaXN0SXRlbVdpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxMSUVsZW1lbnQ+IHtcbiAgcHVibGljIHNjcmVlbkR5bmFtaWNXaWRnZXRzOiBBcnJheTxJU2NyZWVuV2lkZ2V0PiA9IFtdO1xuICBwdWJsaWMgZm9ybVdpZGdldHM6IEFycmF5PElGb3JtV2lkZ2V0PiA9IFtdO1xuICBwdWJsaWMgZm9ybUlucHV0czogQXJyYXk8Rm9ybUlucHV0PiA9IFtdO1xuICBwcm90ZWN0ZWQgZ2V0IGJpbmRpbmdQcmVmaXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5nZXRBdHRyaWJ1dGUoQ2FyZExpc3RJdGVtX0NPTlNUUy5iaW5kaW5nUHJlZml4QXR0cmlidXRlKSB8fCB0aGlzLmRhdGFQYXRoO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBkYXRhUGF0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LmdldEF0dHJpYnV0ZShDYXJkTGlzdEl0ZW1fQ09OU1RTLmRhdGFQYXRoQXR0cmlidXRlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgaW5kZXhTdHIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LmdldEF0dHJpYnV0ZShDYXJkTGlzdF9DT05TVFMuaW5kZXhBdHRyaWJ1dGUpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBpbmRleEludCgpOiBudW1iZXIge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmluZGV4U3RyLCAxMCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGVsZW1lbnRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LmdldEF0dHJpYnV0ZShDYXJkTGlzdF9DT05TVFMuaWRBdHRyaWJ1dGUpO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHVibGljIF9mb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxMSUVsZW1lbnQsIHJlc2V0Q1NTPzogYm9vbGVhbikge1xuICAgIHN1cGVyKF9mb3JtLCBlbCwgcmVzZXRDU1MpO1xuICB9XG5cbiAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICB0aGlzLnJlZ2lzdGVyU2NyZWVuRWxlbWVudHMoKTtcbiAgICB0aGlzLnJlZ2lzdGVyRm9ybUVsZW1lbnRzKCk7XG4gICAgdGhpcy5saW5rT3RoZXJFbGVtZW50cygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHJlZ2lzdGVyRm9ybUVsZW1lbnRzKCkge1xuICAgIHRoaXMudXBkYXRlRm9ybUVsZW1lbnRzV2l0aENhcmRJbmRleCgpO1xuICAgIHRoaXMuZm9ybVdpZGdldHMgPSB0aGlzLl9mb3JtLmFkZER5bmFtaWNXaWRnZXRzKHRoaXMuaW5zdGFuY2VFbGVtZW50KTtcbiAgICB0aGlzLmZvcm1JbnB1dHMgPSB0aGlzLl9mb3JtLmFkZER5bmFtaWNJbnB1dHModGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgIHRoaXMuYWRkRHluYW1pY0Vycm9yQmluZGluZ3MoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZWdpc3RlclNjcmVlbkVsZW1lbnRzKCkge1xuICAgIC8vIFdlIHdhbnQgdG8gYWRkIGNhcmQgaW5kZXggdG8gc29tZSBvZiB0aGUgaW50ZXJwb2xhdGlvbnMsIGZvciBleGFtcGxlIHRmYS5waG9uZU51bWJlciAtPiB0ZmFbaV0ucGhvbmVOdW1iZXJcbiAgICAvLyBGb3IgdGhhdCB3ZSBuZWVkIHRvIHBlcmZvcm0gZm9sbG93aW5nIHN0ZXBzOlxuXG4gICAgLy8gQWRkIHdpZGdldHMsIGluY2x1ZGluZyBUcmFuc2xhdGlvbiB3aWRnZXQsIGJ1dCBub3QgcGVyZm9ybSBpbnRlcnBvbGF0aW9uIChiaW5kaW5nKSB5ZXRcbiAgICB0aGlzLnNjcmVlbkR5bmFtaWNXaWRnZXRzID0gdGhpcy5fc2NyZWVuLmFkZER5bmFtaWNXaWRnZXRzKHRoaXMuaW5zdGFuY2VFbGVtZW50LCB7ZXhjbHVkZTogW0JpbmRpbmdXaWRnZXRdfSk7XG5cbiAgICAvLyBVcGRhdGUgYmluZGluZ3M6IGFkZCBpbmRleCBhbmQgd2hhdGV2ZXIgZWxzZSB3ZSBuZWVkXG4gICAgdGhpcy51cGRhdGVDYXJkQmluZGluZ3ModGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuXG4gICAgLy8gQWRkIG9ubHkgYmluZGluZyB3aWRnZXQsIHRvIHBlcmZvcm0gaW50ZXJwb2xhdGlvblxuICAgIGNvbnN0IHNjcmVlbldpZGdldHMgPSB0aGlzLl9zY3JlZW4uYWRkRHluYW1pY1dpZGdldHNCeVR5cGUodGhpcy5pbnN0YW5jZUVsZW1lbnQsIFtCaW5kaW5nV2lkZ2V0XSk7XG5cbiAgICB0aGlzLnNjcmVlbkR5bmFtaWNXaWRnZXRzID0gWy4uLnRoaXMuc2NyZWVuRHluYW1pY1dpZGdldHMsIC4uLnNjcmVlbldpZGdldHNdO1xuICB9XG5cbiAgcHJvdGVjdGVkIHVwZGF0ZUNhcmRCaW5kaW5ncyhlbDogSFRNTExJRWxlbWVudCkge1xuICAgIGlmICghdGhpcy5iaW5kaW5nUHJlZml4IHx8ICF0aGlzLmRhdGFQYXRoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJlZml4ID0gdGhpcy5iaW5kaW5nUHJlZml4O1xuICAgIGNvbnN0IGRhdGFQYXRoID0gdGhpcy5kYXRhUGF0aDtcbiAgICBjb25zdCBjYXJkSW5kZXggPSB0aGlzLmluZGV4U3RyO1xuICAgIGVsLmlubmVySFRNTCA9IGVsLmlubmVySFRNTC5yZXBsYWNlKG5ldyBSZWdFeHAoYHt7JHtwcmVmaXh9XFwuKC4rPyl9fWAsICdnJyksXG4gICAgICBge3ske2RhdGFQYXRofVske2NhcmRJbmRleH1dLiQxfX1gKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhZGREeW5hbWljRXJyb3JCaW5kaW5ncygpIHtcbiAgICBjb25zdCBlcnJvckJpbmRpbmdzID0gZ2V0RXJyb3JCaW5kaW5ncyh0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgaWYgKGVycm9yQmluZGluZ3MpIHtcbiAgICAgIHRoaXMuX3NjcmVlbi5hZGRTcGVjaWZpY0Vycm9yQmluZHMoZXJyb3JCaW5kaW5ncyk7XG4gICAgICB0aGlzLl9mb3JtLnJlZ2lzdGVyQm91bmRlZEVycm9yRWxlbWVudHMoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgIHRoaXMudW5saW5rRHluYW1pY1dpZGdldHMoKTtcbiAgfVxuXG4gIHByaXZhdGUgdW5saW5rRHluYW1pY1dpZGdldHMoKXtcbiAgICB0aGlzLl9zY3JlZW4ucmVtb3ZlRHluYW1pY1dpZGdldHModGhpcy5zY3JlZW5EeW5hbWljV2lkZ2V0cyk7XG4gICAgdGhpcy5fZm9ybS5yZW1vdmVEeW5hbWljV2lkZ2V0cyh0aGlzLmZvcm1XaWRnZXRzKTtcbiAgICB0aGlzLl9mb3JtLnJlZ2lzdGVyQm91bmRlZEVycm9yRWxlbWVudHMoKTtcbiAgICB0aGlzLl9mb3JtLnJlbW92ZUR5bmFtaWNJbnB1dHModGhpcy5mb3JtSW5wdXRzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCB1cGRhdGVGb3JtRWxlbWVudHNXaXRoQ2FyZEluZGV4KCkge31cbn1cbiIsImltcG9ydCB7QmFzZVNjcmVlbldpZGdldH0gZnJvbSAnLi4vQmFzZVNjcmVlbldpZGdldCc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnLi4vU2NyZWVuJztcblxuZXhwb3J0IGNvbnN0IENhcmRMaXN0X0NPTlNUUyA9IHtcbiAgICBsaXN0U2VsZWN0b3I6ICd1bC5naWd5YS1jYXJkLWxpc3QnLFxuICAgIGNhcmRTZWxlY3RvcjogJ2xpLmdpZ3lhLWNhcmQnLFxuICAgIGVtcHR5TGlzdEl0ZW1TZWxlY3RvcjogJy5naWd5YS1lbXB0eS1saXN0JyxcbiAgICBlbXB0eUxpc3RJdGVtQWN0aXZlQ2xhc3M6ICdnaWd5YS1lbXB0eS1saXN0LWFjdGl2ZScsXG4gICAgaW5kZXhBdHRyaWJ1dGU6ICdkYXRhLWNhcmQtZWxlbWVudC1pbmRleCcsXG4gICAgaWRBdHRyaWJ1dGU6ICdkYXRhLWNhcmQtZWxlbWVudC1pZCdcbn07XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDYXJkTGlzdFdpZGdldCBleHRlbmRzIEJhc2VTY3JlZW5XaWRnZXQ8SFRNTFVMaXN0RWxlbWVudD4ge1xuICAgIHByb3RlY3RlZCBpdGVtSWQ6IHN0cmluZztcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBhc3luYyByZWxvYWREYXRhKCkgOiBQcm9taXNlPGFueVtdPjtcblxuICAgIHByb3RlY3RlZCBnZXQgZW1wdHlJdGVtRWxlbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5xdWVyeVNlbGVjdG9yKENhcmRMaXN0X0NPTlNUUy5lbXB0eUxpc3RJdGVtU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgaXRlbVRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJyk/LmlubmVySFRNTDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGNhcmRMaXN0RWxlbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5xdWVyeVNlbGVjdG9yKENhcmRMaXN0X0NPTlNUUy5saXN0U2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvckFsbChDYXJkTGlzdF9DT05TVFMuY2FyZFNlbGVjdG9yKTtcbiAgICB9XG5cblxuICAgIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxVTGlzdEVsZW1lbnQsIHByaXZhdGUgX2RvbVV0aWxzID0gZ2lneWEudXRpbHMuRE9NKSB7XG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuY3JlYXRlSXRlbVRlbXBsYXRlKGVsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWxvYWRMaXN0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZUl0ZW1UZW1wbGF0ZShlbDogSFRNTFVMaXN0RWxlbWVudCkge1xuICAgICAgICBpZiAoIWVsLnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJykpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBlbC5xdWVyeVNlbGVjdG9yKENhcmRMaXN0X0NPTlNUUy5jYXJkU2VsZWN0b3IpO1xuXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICAgICAgdGVtcGxhdGVFbGVtLmNvbnRlbnQuYXBwZW5kKGl0ZW0/LmNsb25lTm9kZSh0cnVlKSk7XG5cbiAgICAgICAgICAgIGVsLmFwcGVuZCh0ZW1wbGF0ZUVsZW0pO1xuICAgICAgICAgICAgaXRlbS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICAgICAgdGhpcy51bmxpbmtXaWRnZXRzKCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIHJlbG9hZExpc3QoKSB7XG4gICAgICAgIHRoaXMuX3NjcmVlbi5kaW1TY3JlZW4oKTtcblxuICAgICAgICBsZXQgaXRlbXMgPSBhd2FpdCB0aGlzLnJlbG9hZERhdGEoKTtcbiAgICAgICAgdGhpcy5jbGVhckxpc3QoKTtcblxuICAgICAgICBpZiAoaXRlbXM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5lbXB0eUl0ZW1FbGVtPy5jbGFzc0xpc3QucmVtb3ZlKENhcmRMaXN0X0NPTlNUUy5lbXB0eUxpc3RJdGVtQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLl9kb21VdGlscy5jcmVhdGVFbGVtZW50RnJvbVRlbXBsYXRlKHRoaXMuaXRlbVRlbXBsYXRlKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgICAgICBjYXJkLnNldEF0dHJpYnV0ZShDYXJkTGlzdF9DT05TVFMuaW5kZXhBdHRyaWJ1dGUsIGkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgY2FyZC5zZXRBdHRyaWJ1dGUoQ2FyZExpc3RfQ09OU1RTLmlkQXR0cmlidXRlLCBpdGVtc1tpXVt0aGlzLml0ZW1JZF0pO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FyZExpc3RFbGVtLmFwcGVuZChjYXJkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGlua1dpZGdldHMoKTtcbiAgICAgICAgICAgIHRoaXMubGlua090aGVyRWxlbWVudHMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NjcmVlbi51bmRpbVNjcmVlbigpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBjbGVhckxpc3QoKSB7XG4gICAgICAgIHRoaXMuY2FyZExpc3RFbGVtXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoQ2FyZExpc3RfQ09OU1RTLmNhcmRTZWxlY3RvcilcbiAgICAgICAgICAuZm9yRWFjaChlbGVtID0+IGVsZW0ucmVtb3ZlKCkpO1xuICAgICAgICB0aGlzLmVtcHR5SXRlbUVsZW0/LmNsYXNzTGlzdC5hZGQoQ2FyZExpc3RfQ09OU1RTLmVtcHR5TGlzdEl0ZW1BY3RpdmVDbGFzcyk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNob3dMaXN0KCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgQmFzZUZvcm1XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7Rm9ybV9DT05TVFN9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuXG5leHBvcnQgdHlwZSBPbGRDb21tdW5pY2F0aW9uQ2hhbm5lbHMgPSAnZW1haWwnIHwgJ1NNUycgfCAnc21zJztcbmV4cG9ydCB0eXBlIENvbW11bmljYXRpb25TdGF0dXMgPSAnbm90aWNlZCcgfCBvcHRJbiB8IG9wdE91dDtcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbW11bmljYXRpb25PYmplY3Qge1xuICAgIHRvcGljOiBzdHJpbmc7XG4gICAgY2hhbm5lbDogc3RyaW5nO1xuICAgIHN0YXR1cz86IENvbW11bmljYXRpb25TdGF0dXM7XG4gICAgU3RhdHVzPzogQ29tbXVuaWNhdGlvblN0YXR1cztcbiAgICBjb21tdW5pY2F0aW9uS2V5OiBzdHJpbmc7XG59XG5leHBvcnQgZW51bSBDaGFubmVsX1N0YXR1cyB7XG4gICAgbm90aWNlZCA9ICdub3RpY2VkJyxcbiAgICBPcHRJbiA9ICdPcHRJbicsXG4gICAgb3B0SW4gPSAnb3B0SW4nLFxuICAgIE9wdE91dCA9ICdPcHRPdXQnLFxuICAgIG9wdE91dCA9ICdvcHRPdXQnXG59XG5cbnR5cGUgb3B0SW4gPSAnb3B0SW4nfCdPcHRJbic7XG50eXBlIG9wdE91dCA9ICdvcHRPdXQnfCdPcHRPdXQnO1xuXG5leHBvcnQgY29uc3QgQ29tbXVuaWNhdGlvbldpZGdldF9DT05TVFMgPSB7XG4gICAgc2VsZWN0b3I6ICdkaXYuZ2lneWEtY29tbXVuaWNhdGlvbicsXG4gICAgY2hhbm5lbDogJ2RhdGEtY29tbXVuaWNhdGlvbi1jaGFubmVsJyxcbiAgICB0b3BpYzogJ2RhdGEtY29tbXVuaWNhdGlvbi10b3BpYycsXG4gICAgc3RhdHVzOiAnZGF0YS1jb21tdW5pY2F0aW9uLXN0YXR1cycsXG4gICAgc3Vic2NyaXB0aW9uTmFtZTogJ25hbWUnLFxuICAgIGNvbW11bmljYXRpb25zUHJlZml4OiAnY29tbXVuaWNhdGlvbnMuJyxcbiAgICBzdWJzY3JpcHRpb25UeXBlOiAnZGF0YS1zdWJzY3JpcHRpb24tdHlwZScsXG4gICAgc3Vic2NyaXB0aW9uVG9waWM6ICdkYXRhLXN1YnNjcmlwdGlvbi10b3BpYycsXG4gICAgY29tbXVuaWNhdGlvbkNoYW5uZWw6ICdkYXRhLXN1YnNjcmlwdGlvbi1jaGFubmVsJ1xufTtcbkRlZXBGcmVlemUoQ29tbXVuaWNhdGlvbldpZGdldF9DT05TVFMpO1xuZXhwb3J0IGNsYXNzIENvbW11bmljYXRpb25XaWRnZXQgZXh0ZW5kcyBCYXNlRm9ybVdpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gQ29tbXVuaWNhdGlvbldpZGdldF9DT05TVFM7XG4gICAgcHJpdmF0ZSBjb21tdW5pY2F0aW9uRGF0YTogSUNvbW11bmljYXRpb25PYmplY3Q7XG5cbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyV2lkZ2V0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFiZWwnKTtcbiAgICAgICAgdGhpcy5jb21tdW5pY2F0aW9uRGF0YSA9IHRoaXMuZ2V0Q29tbXVuaWNhdGlvbkRhdGEoKTtcbiAgICAgICAgY29uc3QgY2hlY2tlZEJ5RGVmYXVsdCA9IHRoaXMudGVtcGxhdGVFbGVtZW50Lmhhc0F0dHJpYnV0ZShGb3JtX0NPTlNUUy5kZWZhdWx0Q2hlY2tlZEF0dHJpYnV0ZSk7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IGdpZ3lhLnV0aWxzLnRlbXBsYXRlcy5maWxsKHRoaXMuX3NjcmVlblNldC5nZXRUZW1wbGF0ZXMoKS5jb21tdW5pY2F0aW9uQ2hlY2tib3gsIHtcbiAgICAgICAgICAgIHRvcGljOiB0aGlzLmNvbW11bmljYXRpb25EYXRhLnRvcGljLFxuICAgICAgICAgICAgY2hhbm5lbDogdGhpcy5jb21tdW5pY2F0aW9uRGF0YS5jaGFubmVsLFxuICAgICAgICAgICAgc3RhdHVzOiB0aGlzLmNvbW11bmljYXRpb25EYXRhLnN0YXR1cyxcbiAgICAgICAgICAgIGdpZ3lhTmFtZTogYCR7Q29tbXVuaWNhdGlvbldpZGdldC5DT05TVFMuY29tbXVuaWNhdGlvbnNQcmVmaXh9JHt0aGlzLmNvbW11bmljYXRpb25EYXRhLmNvbW11bmljYXRpb25LZXl9YCxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmV2YWx1YXRlKHRleHQpLFxuICAgICAgICAgICAgY2hlY2tlZDogY2hlY2tlZEJ5RGVmYXVsdCA/IEZvcm1fQ09OU1RTLmRlZmF1bHRDaGVja2VkQXR0cmlidXRlIDogJycsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q29tbXVuaWNhdGlvbkRhdGEoKTogSUNvbW11bmljYXRpb25PYmplY3Qge1xuICAgICAgICBjb25zdCBhY2NvdW50SW5mbzogYW55ID0gdGhpcy5fc2NyZWVuU2V0Py5nZXRBcGlEYXRhKCk/LmdldEFjY291bnRJbmZvO1xuICAgICAgICBjb25zdCBjaGFubmVsID0gdGhpcy5nZXRDb21tdW5pY2F0aW9uQ2hhbm5lbCgpO1xuICAgICAgICBjb25zdCB0b3BpYyA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShDb21tdW5pY2F0aW9uV2lkZ2V0LkNPTlNUUy5zdWJzY3JpcHRpb25Ub3BpYyk7XG4gICAgICAgIGNvbnN0IGNvbW11bmljYXRpb25LZXkgPSBgJHt0b3BpY31fJHtjaGFubmVsfWA7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHRoaXMuZ2V0Q29tbXVuaWNhdGlvblN0YXR1cyhhY2NvdW50SW5mbyxjb21tdW5pY2F0aW9uS2V5KTtcbiAgICAgICAgcmV0dXJuIHtjaGFubmVsLCB0b3BpYywgc3RhdHVzLCBjb21tdW5pY2F0aW9uS2V5fVxuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDb21tdW5pY2F0aW9uU3RhdHVzKGFjY291bnRJbmZvLCBjb21tdW5pY2F0aW9uS2V5KXtcbiAgICAgICAgcmV0dXJuIGFjY291bnRJbmZvPy5jb21tdW5pY2F0aW9ucz8uW2NvbW11bmljYXRpb25LZXldPy5zdGF0dXMgfHwgYWNjb3VudEluZm8/LmNvbW11bmljYXRpb25zPy5bY29tbXVuaWNhdGlvbktleV0/LlN0YXR1c1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q29tbXVuaWNhdGlvbkNoYW5uZWwoKSB7XG4gICAgICAvLyBTdXBwb3J0IGZhbGxiYWNrIGZvciBzdWJzY3JpcHRpb24gdHlwZVxuICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShDb21tdW5pY2F0aW9uV2lkZ2V0LkNPTlNUUy5jb21tdW5pY2F0aW9uQ2hhbm5lbCkgPz9cbiAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoQ29tbXVuaWNhdGlvbldpZGdldC5DT05TVFMuc3Vic2NyaXB0aW9uVHlwZSkgYXMgT2xkQ29tbXVuaWNhdGlvbkNoYW5uZWxzO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXJXaWRnZXQoKSB7XG4gICAgICAgIHN1cGVyLnJlbmRlcldpZGdldCgpO1xuICAgICAgICBpZih0aGlzLmluc3RhbmNlRWxlbWVudCl7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWxhYmVsJyk7XG4gICAgICAgICAgICBjb25zdCBsYWJlbDpIVE1MRWxlbWVudCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7XG4gICAgICAgICAgICBpZihsYWJlbClcbiAgICAgICAgICAgICAgICBsYWJlbC5pbm5lckhUTUwgPSB0aGlzLmV2YWx1YXRlKHRleHQpO1xuICAgICAgICB9XG4gICAgfVxufVxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KENvbW11bmljYXRpb25XaWRnZXQpO1xuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgQmFzZUZvcm1XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5cbmV4cG9ydCBjb25zdCBDb25zZW50X0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJ2Rpdi5naWd5YS1jb25zZW50JyxcbiAgICB0aXRsZUF0dHI6ICdkYXRhLWxhYmVsJyxcbiAgICBhcHByb3ZlZE9uTGFiZWxBdHRyOiAnZGF0YS1hcHByb3ZlZC1vbi1sYWJlbCcsXG4gICAgdmVyc2lvbkF0dHI6ICdkYXRhLXZlcnNpb24nLFxuICAgIHZlcnNpb25MYWJlbEF0dHI6ICdkYXRhLXZlcnNpb24tdGl0bGUtbGFiZWwnLFxuICAgIGxvY2FsZUxhYmVsQXR0cjogJ2RhdGEtbG9jYWxlLWxhYmVsJyxcbn07XG5cbmNvbnN0IFRFTVBMQVRFX0lEX09MRF9WRVJTSU9OOiBzdHJpbmcgPSAndjEnO1xuXG5EZWVwRnJlZXplKENvbnNlbnRfQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBDb25zZW50V2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IENvbnNlbnRfQ09OU1RTO1xuXG4gICAgY29uc3RydWN0b3IoX2Zvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgLy8gVHVybiByZXNldENTUyBvZmYuXG4gICAgICAgIHN1cGVyKF9mb3JtLCBlbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgICAgICB0aGlzLmxvYWRXaWRnZXQoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHN1cGVyLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XG4gICAgICAgIHRoaXMubG9hZFdpZGdldCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbG9hZFdpZGdldCgpIHtcbiAgICAgICAgY29uc3QgYWNjb3VudEluZm8gPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpLmdldEFjY291bnRJbmZvO1xuICAgICAgICBjb25zdCB0ZXJtTmFtZSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xuICAgICAgICBjb25zdCBjb25zZW50ID0gZ2lneWEudXRpbHMub2JqZWN0LmV4cHJlc3Npb25IZWxwZXIoYWNjb3VudEluZm8pLmdldEZpZWxkKHRlcm1OYW1lKTtcbiAgICAgICAgaWYgKGNvbnNlbnQgJiYgY29uc2VudC5pc0NvbnNlbnRHcmFudGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBkb2NJZCA9IGNvbnNlbnQuZG9jRGF0ZSA/IHRoaXMuZm9ybWF0VGltZShjb25zZW50LmRvY0RhdGUpIDogY29uc2VudC5kb2NWZXJzaW9uO1xuICAgICAgICAgICAgY29uc3QgbGFzdENvbnNlbnRNb2RpZmllZCA9IHRoaXMuZm9ybWF0VGltZShjb25zZW50Lmxhc3RDb25zZW50TW9kaWZpZWQpO1xuICAgICAgICAgICAgY29uc3QgbGFiZWxUZXh0ID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKENvbnNlbnRfQ09OU1RTLnRpdGxlQXR0cilcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmVkT25MYWJlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShDb25zZW50X0NPTlNUUy5hcHByb3ZlZE9uTGFiZWxBdHRyKSB8fCAnQXBwcm92ZWQgb24nXG5cbiAgICAgICAgICAgIGNvbnN0IHdpZGdldFZlcnNpb24gPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoQ29uc2VudF9DT05TVFMudmVyc2lvbkF0dHIpXG5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsZSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5leHByZXNzaW9uSGVscGVyKGNvbnNlbnQpPy5nZXRGaWVsZCgnbGFuZycpXG4gICAgICAgICAgICBjb25zdCBsb2NhbGVMYWJlbCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShDb25zZW50X0NPTlNUUy5sb2NhbGVMYWJlbEF0dHIpIHx8ICdMb2NhbGU6J1xuICAgICAgICAgICAgY29uc3QgdmVyc2lvbkxhYmVsID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKENvbnNlbnRfQ09OU1RTLnZlcnNpb25MYWJlbEF0dHIpIHx8ICdWZXJzaW9uOidcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5nZXRUZW1wbGF0ZSh3aWRnZXRWZXJzaW9uKVxuXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSBnaWd5YS51dGlscy50ZW1wbGF0ZXMuZmlsbCh0ZW1wbGF0ZSwge1xuICAgICAgICAgICAgICBsYWJlbDogdGhpcy5ldmFsdWF0ZShsYWJlbFRleHQpLFxuICAgICAgICAgICAgICBkb2NJZCxcbiAgICAgICAgICAgICAgYXBwcm92ZWRPbkxhYmVsOiB0aGlzLmV2YWx1YXRlKGFwcHJvdmVkT25MYWJlbCksXG4gICAgICAgICAgICAgIGFwcHJvdmVkOiBsYXN0Q29uc2VudE1vZGlmaWVkLFxuICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgIGxvY2FsZUxhYmVsOiB0aGlzLmV2YWx1YXRlKGxvY2FsZUxhYmVsKSxcbiAgICAgICAgICAgICAgdmVyc2lvbkxhYmVsOiB0aGlzLmV2YWx1YXRlKHZlcnNpb25MYWJlbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VGVtcGxhdGUod2lkZ2V0VmVyc2lvbjogc3RyaW5nIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcblxuICAgICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpXG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlSWQgPSB3aWRnZXRWZXJzaW9uID8gYHYke3dpZGdldFZlcnNpb259YCA6IFRFTVBMQVRFX0lEX09MRF9WRVJTSU9OXG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlczogc3RyaW5nID0gdGhpcy5fc2NyZWVuU2V0LmdldFRlbXBsYXRlcygpLmNvbnNlbnQ7XG5cbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh0ZW1wbGF0ZXMsICd0ZXh0L2h0bWwnKVxuXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlkPVwiJHt0ZW1wbGF0ZUlkfVwiXWApID8/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWlkPVwiJHtURU1QTEFURV9JRF9PTERfVkVSU0lPTn1cIl1gKVxuXG4gICAgICByZXR1cm4gdGVtcGxhdGUub3V0ZXJIVE1MXG5cbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdFRpbWUoZGF0ZVN0cmluZykge1xuICAgICAgICB2YXIgZGF0ZSA9IERhdGUucGFyc2UoZGF0ZVN0cmluZyk7IC8vIHJldHVybnMgTmFOIGlmIGl0IGNhbid0IHBhcnNlXG4gICAgICAgIHJldHVybiBpc05hTihkYXRlKSA/ICcnIDogbmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG4gICAgfVxufVxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KENvbnNlbnRXaWRnZXQpO1xuIiwiaW1wb3J0IHtcbiAgICBEZWVwRnJlZXplLFxuICAgIEV2ZXJ5LFxuICAgIGdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGUsXG4gICAgU29tZSxcbiAgICBGb3JFYWNoUHJvcCxcbiAgICBGb3JFYWNoLFxufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgRm9ybUlucHV0X0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XG5pbXBvcnQge1xuICAgIHNob3dBdXRoTWV0aG9kQWNjb3JkaW5nVG9FeGlzdGluZ0xvZ2luUHJvdmlkZXJzLFxuICAgIHNob3dJZGVudGl0eUFjY29yZGluZ1RvRXhpc3RpbmdMb2dpblByb3ZpZGVyc1xufSBmcm9tICcuLi92aXNibGVXaGVuSGVscGVyJztcblxuaW50ZXJmYWNlIElSZXF1aXJlZEZpZWxkUmVzdWx0cyB7XG4gICAgaGFzUmVxdWlyZWRFbXB0eUZpZWxkczogYm9vbGVhbjtcbn1cbmludGVyZmFjZSBJQ29udGFpbmVyQ29uZGl0aW9uIGV4dGVuZHMgRnVuY3Rpb24ge1xuICAgIChjb250YWluZXI6IENvbnRhaW5lcldpZGdldCwgZmllbGRzOiBJUmVxdWlyZWRGaWVsZFJlc3VsdHMpOiBib29sZWFuO1xufVxuZXhwb3J0IGNvbnN0IENvbnRhaW5lcldpZGdldF9DT05TVFMgPSB7XG4gICAgc2VsZWN0b3I6ICdkaXYuZ2lneWEtY29udGFpbmVyJyxcbiAgICBhY3RpdmVDbGFzczogJ2dpZ3lhLWNvbnRhaW5lci1lbmFibGVkJyxcbiAgICBlbXB0eUZpZWxkczogJ2RhdGEtZW1wdHktZmllbGRzJyxcbiAgICBsb2dpbklkZW50aXRpZXM6ICdkYXRhLWxvZ2luLWlkZW5pdGllcycsXG4gICAgY29uZGl0aW9uQXR0cjogJ2RhdGEtY29uZGl0aW9uJyxcbiAgICBvblJlbmRlckF0dHI6ICdkYXRhLW9uLXJlbmRlcicsXG59O1xuRGVlcEZyZWV6ZShDb250YWluZXJXaWRnZXRfQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBDb250YWluZXJXaWRnZXQgZXh0ZW5kcyBCYXNlRm9ybVdpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gICAgcHVibGljIHZhbGlkYXRpb25QYXNzZWQ6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBvcmlnaW5hbFJlbmRlcmluZ1N0YXR1czogYm9vbGVhbjtcbiAgICBwcml2YXRlIGNvbmRpdGlvblN0YXR1czogYm9vbGVhbjtcbiAgICBwcml2YXRlIGVtcHR5RmllbGRzOiBzdHJpbmc7XG5cbiAgICBwcml2YXRlIHJlbmRlcmluZ0NvbmRpdGlvbnM6IElDb250YWluZXJDb25kaXRpb25bXTtcbiAgICBwcml2YXRlIHZhbGlkYXRpb25Db25kaXRpb25zOiBJQ29udGFpbmVyQ29uZGl0aW9uW107XG5cbiAgICBwcml2YXRlIG9uRWxlbWVudENoYW5nZSA9ICgpID0+IHRoaXMucmVmcmVzaCgpO1xuXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBDb250YWluZXJXaWRnZXRfQ09OU1RTO1xuXG4gICAgY29uc3RydWN0b3IoX2Zvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoX2Zvcm0sIGVsLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gZWwuZ2V0QXR0cmlidXRlKCduYW1lJyk7XG4gICAgICAgIHRoaXMuZW1wdHlGaWVsZHMgPSBlbC5nZXRBdHRyaWJ1dGUoQ29udGFpbmVyV2lkZ2V0X0NPTlNUUy5lbXB0eUZpZWxkcyk7XG5cbiAgICAgICAgaWYgKHRoaXMuZW1wdHlGaWVsZHMpIF9mb3JtLl9hdXRvU2tpcENvbnRhaW5lcnMucHVzaCh0aGlzKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZShlbCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZShlbDogSFRNTERpdkVsZW1lbnQgPSB0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICB0aGlzLnJlbmRlcmluZ0NvbmRpdGlvbnMgPSByZWdpc3RlcmVkQ29uZGl0aW9ucyhlbCwgY29uZGl0aW9uU2V0cy5yZW5kZXJpbmcpO1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25Db25kaXRpb25zID0gcmVnaXN0ZXJlZENvbmRpdGlvbnMoZWwsIGNvbmRpdGlvblNldHMudmFsaWRhdGlvbik7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbkF1dG9Ta2lwKCkge1xuICAgICAgICByZXR1cm4gIWRhdGFFbXB0eUZpZWxkcyh0aGlzLmVtcHR5RmllbGRzLCB0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICAgICAgdmFyIHNob3VsZERpc3BsYXkgPSB0aGlzLnRlc3RSZW5kZXJpbmcoKTtcbiAgICAgICAgdGhpcy5vcmlnaW5hbFJlbmRlcmluZ1N0YXR1cyA9IHRoaXMuY29uZGl0aW9uU3RhdHVzID0gc2hvdWxkRGlzcGxheTtcbiAgICAgICAgaWYgKHRoaXMub3JpZ2luYWxSZW5kZXJpbmdTdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMub25FbGVtZW50Q2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZnJlc2goKSB7XG4gICAgICAgIHZhciBzaG91bGREaXNwbGF5ID0gKHRoaXMudmFsaWRhdGlvblBhc3NlZCA9IHRoaXMudGVzdFZhbGlkYXRpb25zKCkpO1xuICAgICAgICB0aGlzLmNvbmRpdGlvblN0YXR1cyA9IHRoaXMub3JpZ2luYWxSZW5kZXJpbmdTdGF0dXMgJiYgc2hvdWxkRGlzcGxheTtcblxuICAgICAgICBpZiAodGhpcy5jb25kaXRpb25TdGF0dXMpIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgQ29udGFpbmVyV2lkZ2V0X0NPTlNUUy5hY3RpdmVDbGFzcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgQ29udGFpbmVyV2lkZ2V0X0NPTlNUUy5hY3RpdmVDbGFzcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHRlc3RSZW5kZXJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlc3RDb250YWluZXIodGhpcy5yZW5kZXJpbmdDb25kaXRpb25zKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRlc3RWYWxpZGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVzdENvbnRhaW5lcih0aGlzLnZhbGlkYXRpb25Db25kaXRpb25zKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRlc3RDb250YWluZXIoY29uZGl0aW9uczogSUNvbnRhaW5lckNvbmRpdGlvbltdKSB7XG4gICAgICAgIC8vIFRlc3RpbmcgaWYgdGhlcmUncyBhbiBlbXB0eSByZXF1aXJlZCBmaWVsZCBpbiB0aGUgY29udGFpbmVyIChzdHJvbmdlciB0aGFuIGFsbCB0ZXN0cyBleGNlcHQgdGhvc2UgdGhhdCBvdmVycmlkZSBpdClcbiAgICAgICAgdmFyIGZpZWxkczogSVJlcXVpcmVkRmllbGRSZXN1bHRzID0ge1xuICAgICAgICAgICAgaGFzUmVxdWlyZWRFbXB0eUZpZWxkczogdGhpcy5jb250YWluc0VtcHR5UmVxdWlyZWRGaWVsZHMoKSxcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZmlsdGVyUmVzdWx0cyA9IEV2ZXJ5KGNvbmRpdGlvbnMsIGNvbmQgPT4gY29uZCh0aGlzLCBmaWVsZHMpKTtcblxuICAgICAgICByZXR1cm4gZmllbGRzLmhhc1JlcXVpcmVkRW1wdHlGaWVsZHMgfHwgZmlsdGVyUmVzdWx0cztcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbnRhaW5zRW1wdHlSZXF1aXJlZEZpZWxkcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9mb3JtLmlzUG9wdWxhdGVkKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgdmFyIGZpZWxkcyA9IGdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGUodGhpcy5pbnN0YW5jZUVsZW1lbnQsICcqJywgRm9ybUlucHV0X0NPTlNUUy5maWVsZE5hbWUpO1xuXG4gICAgICAgIHZhciBjb250YWluc1JlcXVpcmVkID0gU29tZShmaWVsZHMsIChmaWVsZDogSFRNTElucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGZpZWxkLmdldEF0dHJpYnV0ZShGb3JtSW5wdXRfQ09OU1RTLmZpZWxkTmFtZSk7XG5cbiAgICAgICAgICAgIGlmIChmaWVsZE5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNSZXF1aXJlZCA9IHRoaXMuX2Zvcm0uaXNSZXF1aXJlZEZpZWxkKGZpZWxkTmFtZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNSZXF1aXJlZCAmJiAhZmllbGQudmFsdWUpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluc1JlcXVpcmVkO1xuICAgIH1cblxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcbiAgICAgICAgdGhpcy51cGRhdGUodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuXG4gICAgICAgIHRoaXMuZW1wdHlGaWVsZHMgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoQ29udGFpbmVyV2lkZ2V0X0NPTlNUUy5lbXB0eUZpZWxkcyk7XG4gICAgICAgIGlmICh0aGlzLm9yaWdpbmFsUmVuZGVyaW5nU3RhdHVzKSB7XG4gICAgICAgICAgICB0aGlzLm9uRWxlbWVudENoYW5nZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGhhc0NvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KENvbnRhaW5lcldpZGdldCk7XG5mdW5jdGlvbiByZWdpc3RlcmVkQ29uZGl0aW9ucyhlbDogSFRNTERpdkVsZW1lbnQsIGNvbmRpdGlvblNldDogSUNvbmRpdGlvblNldCkge1xuICAgIGZ1bmN0aW9uIGJpbmRDb25kaXRpb24odmFsdWUsIGNvbmRpdGlvbiwgb25lVGltZSA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiAoY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQsIGZpZWxkczogSVJlcXVpcmVkRmllbGRSZXN1bHRzKSA9PiBjb25kaXRpb24odmFsdWUsIGNvbnRhaW5lciwgb25lVGltZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJpbmRPdmVycml0ZUZpZWxkc0NvbmRpdGlvbih2YWx1ZSwgY29uZGl0aW9uKSB7XG4gICAgICAgIHJldHVybiAoY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQsIGZpZWxkczogSVJlcXVpcmVkRmllbGRSZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29uZGl0aW9uKHZhbHVlLCBjb250YWluZXIpO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkgZmllbGRzLmhhc1JlcXVpcmVkRW1wdHlGaWVsZHMgPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZWN0ZWRDb25kaXRpb25zID0gbmV3IEFycmF5PElDb250YWluZXJDb25kaXRpb24+KCk7XG5cbiAgICBGb3JFYWNoUHJvcChjb25kaXRpb25TZXQsIChjb25kaXRpb24sIGF0dHIpID0+IHtcbiAgICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZShhdHRyKSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZWwuZ2V0QXR0cmlidXRlKGF0dHIpO1xuICAgICAgICAgICAgdmFyIG9uZVRpbWVDb25kaXRpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiBlbC5nZXRBdHRyaWJ1dGUoQ29udGFpbmVyV2lkZ2V0LkNPTlNUUy5vblJlbmRlckF0dHIpID09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIG9uZVRpbWVDb25kaXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbmRpdGlvblsnb3ZlcndyaXRlRmllbGRzJ10pIHNlbGVjdGVkQ29uZGl0aW9ucy5wdXNoKGJpbmRPdmVycml0ZUZpZWxkc0NvbmRpdGlvbih2YWx1ZSwgY29uZGl0aW9uKSk7XG4gICAgICAgICAgICBlbHNlIHNlbGVjdGVkQ29uZGl0aW9ucy5wdXNoKGJpbmRDb25kaXRpb24odmFsdWUsIGNvbmRpdGlvbiwgb25lVGltZUNvbmRpdGlvbikpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2VsZWN0ZWRDb25kaXRpb25zO1xufVxuaW50ZXJmYWNlIElDb25kaXRpb25GdW5jdGlvbiBleHRlbmRzIEZ1bmN0aW9uIHtcbiAgICAodmFsdWU6IGFueSwgY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQpOiBib29sZWFuO1xufVxuaW50ZXJmYWNlIElDb25kaXRpb25TZXQge1xuICAgIFtjb25kOiBzdHJpbmddOiBJQ29uZGl0aW9uRnVuY3Rpb247XG59XG5leHBvcnQgaW50ZXJmYWNlIElDb250YWluZXJIaXN0b3J5IHtcbiAgICBkaXNwbGF5Q291bnQ6IG51bWJlcjtcbiAgICBsYXN0RGlzcGxheTogbnVtYmVyO1xuICAgIHdhc1VwZGF0ZWQ/OiBib29sZWFuO1xufVxuZnVuY3Rpb24gZGF0YURvbWFpbnModmFsdWU6IHN0cmluZykge1xuICAgIHZhciBhbGxvd2VkRG9tYWlucyA9IHZhbHVlLnNwbGl0KCcsJyk7XG5cbiAgICByZXR1cm4gU29tZShhbGxvd2VkRG9tYWlucywgZG9tYWluID0+IGdpZ3lhLnBsdWdpblV0aWxzLmRvbWFpbi5pc0luRG9tYWluKGRvbWFpbikpO1xufVxuZnVuY3Rpb24gZGF0YUFwaWtleXModmFsdWU6IHN0cmluZykge1xuICAgIHZhciBhcGlrZXlzID0gdmFsdWUuc3BsaXQoJywnKTtcbiAgICByZXR1cm4gZ2lneWEudXRpbHMuYXJyYXkuaW5kZXhPZihhcGlrZXlzLCBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkgIT0gLTE7XG59XG5mdW5jdGlvbiBkYXRhUHJvYih2YWx1ZTogc3RyaW5nLCBjb250YWluZXI6IENvbnRhaW5lcldpZGdldCkge1xuICAgIC8vIFNob3cgY29udGFpbmVyIGJhc2VkIG9uIHByb2JhYmlsaXR5XG4gICAgcmV0dXJuIGNvbnRhaW5lci5fc2NyZWVuU2V0Ll9yYW5kb20gPD0gcGFyc2VGbG9hdCh2YWx1ZSk7XG59XG5mdW5jdGlvbiBkYXRhQWZ0ZXJEYXRlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB2YXIgdGltZVZhbHVlID0gZ2lneWEuZ2xvYmFsLmRhdGUuZ2V0SVNPRGF0ZSh2YWx1ZSkgYXMgRGF0ZTsgLy8gUGFydG5lciBwbGFjZSBkYXRlIGluIElTTyBmb3JtYXRcbiAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCkgPiB0aW1lVmFsdWUuZ2V0VGltZSgpO1xufVxuZnVuY3Rpb24gZGF0YUJlZm9yZURhdGUodmFsdWU6IHN0cmluZykge1xuICAgIHZhciB0aW1lVmFsdWUgPSBnaWd5YS5nbG9iYWwuZGF0ZS5nZXRJU09EYXRlKHZhbHVlKSBhcyBEYXRlOyAvLyBQYXJ0bmVyIHBsYWNlIGRhdGUgaW4gSVNPIGZvcm1hdFxuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSA8PSB0aW1lVmFsdWUuZ2V0VGltZSgpO1xufVxuZnVuY3Rpb24gZGF0YUVtcHR5RmllbGRzKHZhbHVlOiBzdHJpbmcsIGNvbnRhaW5lcjogQ29udGFpbmVyV2lkZ2V0KSB7XG4gICAgLy8gVE9ETyBwZXJoYXBzIGdldCB0aGUgZmllbGQgaW5zdGFuY2VzIGZyb20gdGhlIGZvcm1cbiAgICB2YXIgY2hlY2tFbXB0eUZpZWxkcyA9IG5ldyBBcnJheTxIVE1MSW5wdXRFbGVtZW50PigpO1xuXG4gICAgaWYgKHZhbHVlID09PSAnKicpIHtcbiAgICAgICAgLy8gYWxsIGZpZWxkc1xuICAgICAgICB2YXIgaW5wdXRzID0gZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZShjb250YWluZXIuaW5zdGFuY2VFbGVtZW50LCAnKicsIEZvcm1JbnB1dF9DT05TVFMuZmllbGROYW1lKTtcblxuICAgICAgICBGb3JFYWNoKGlucHV0cywgKGk6IEhUTUxJbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gaS5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5maWVsZE5hbWUpO1xuXG4gICAgICAgICAgICBpZiAobmFtZSkgY2hlY2tFbXB0eUZpZWxkcy5wdXNoKGkpO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuYW1lZCBmaWVsZHNcbiAgICAgICAgRm9yRWFjaCh2YWx1ZS5zcGxpdCgnLCcpLCBmaWVsZE5hbWUgPT4ge1xuICAgICAgICAgICAgdmFyIGZpZWxkID0gZ2lneWEudXRpbHMuRE9NLmdldEVsZW1lbnRzQnlBdHRyaWJ1dGUoY29udGFpbmVyLmluc3RhbmNlRWxlbWVudCwgJyonLCBGb3JtSW5wdXRfQ09OU1RTLmZpZWxkTmFtZSwgZmllbGROYW1lKVswXSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgY2hlY2tFbXB0eUZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFNvbWUoY2hlY2tFbXB0eUZpZWxkcywgZmllbGQgPT4gIWZpZWxkLnZhbHVlKTtcbn1cblxubG9naW5JZGVudGl0aWVzWydvdmVyd3JpdGVGaWVsZHMnXSA9IHRydWU7XG5kYXRhQXV0aE1ldGhvZFsnb3ZlcndyaXRlRmllbGRzJ10gPSB0cnVlO1xuXG5mdW5jdGlvbiBsb2dpbklkZW50aXRpZXModmFsdWU6IHN0cmluZywgY29udGFpbmVyOiBDb250YWluZXJXaWRnZXQpIHtcbiAgICBjb25zdCB3aWRnZXRTaXRlSWRlbnRpdGllcyA9IHZhbHVlLnNwbGl0KCcsJyk7XG4gICAgY29uc3QgYXZhaWxhYmxlTG9naW5Qcm92aWRlcnMgPSBnZXRBdmFpbGFibGVMb2dpblByb3ZpZGVycyhjb250YWluZXIpO1xuXG4gICAgcmV0dXJuIHNob3dJZGVudGl0eUFjY29yZGluZ1RvRXhpc3RpbmdMb2dpblByb3ZpZGVycyh3aWRnZXRTaXRlSWRlbnRpdGllcywgYXZhaWxhYmxlTG9naW5Qcm92aWRlcnMpO1xufVxuXG5mdW5jdGlvbiBkYXRhQXV0aE1ldGhvZCh2YWx1ZTogc3RyaW5nLCBjb250YWluZXI6IENvbnRhaW5lcldpZGdldCkge1xuICAgIGNvbnN0IGF2YWlsYWJsZUxvZ2luUHJvdmlkZXJzID0gZ2V0QXZhaWxhYmxlTG9naW5Qcm92aWRlcnMoY29udGFpbmVyKTtcblxuICAgIHJldHVybiBzaG93QXV0aE1ldGhvZEFjY29yZGluZ1RvRXhpc3RpbmdMb2dpblByb3ZpZGVycyh2YWx1ZSwgYXZhaWxhYmxlTG9naW5Qcm92aWRlcnMpO1xufVxuXG5mdW5jdGlvbiBnZXRBdmFpbGFibGVMb2dpblByb3ZpZGVycyhjb250YWluZXIpIHtcbiAgICBjb25zdCBsb2dpblByb3ZpZGVyc0xpc3QgPSBjb250YWluZXIuX2Zvcm0uZ2V0TG9naW5Qcm92aWRlcnMoKTtcblxuICAgIHJldHVybiB0eXBlb2YobG9naW5Qcm92aWRlcnNMaXN0KSA9PT0gJ3N0cmluZycgPyBsb2dpblByb3ZpZGVyc0xpc3Quc3BsaXQoJywnKSA6IFtdO1xufVxuXG5mdW5jdGlvbiBkYXRhQ29uZGl0aW9uKHZhbHVlOiBzdHJpbmcsIGNvbnRhaW5lcjogQ29udGFpbmVyV2lkZ2V0LCBvbmVUaW1lID0gZmFsc2UpIHtcbiAgICBpZiAob25lVGltZSAmJiBjb250YWluZXIudmFsaWRhdGlvblBhc3NlZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIEJvb2xlYW4oY29udGFpbmVyLmV2YWx1YXRlRXhwcmVzc2lvbih7IGNvbmRpdGlvbjogdmFsdWUgfSkpO1xufVxuXG52YXIgY29uZGl0aW9uU2V0cyA9IHtcbiAgICByZW5kZXJpbmc6IHtcbiAgICAgICAgJ2RhdGEtZG9tYWlucyc6IGRhdGFEb21haW5zLFxuICAgICAgICAnZGF0YS1hcGlrZXlzJzogZGF0YUFwaWtleXMsXG4gICAgICAgICdkYXRhLXByb2InOiBkYXRhUHJvYixcbiAgICAgICAgJ2RhdGEtYWZ0ZXItZGF0ZSc6IGRhdGFBZnRlckRhdGUsXG4gICAgICAgICdkYXRhLWJlZm9yZS1kYXRlJzogZGF0YUJlZm9yZURhdGUsXG4gICAgICAgICdkYXRhLWVtcHR5LWZpZWxkcyc6IGRhdGFFbXB0eUZpZWxkcyxcbiAgICAgICAgJ2RhdGEtbG9naW4taWRlbnRpdGllcyc6IGxvZ2luSWRlbnRpdGllcyxcbiAgICAgICAgJ2RhdGEtYXV0aC1tZXRob2QtcmVuZGVyJzogZGF0YUF1dGhNZXRob2RcbiAgICB9IGFzIElDb25kaXRpb25TZXQsXG4gICAgdmFsaWRhdGlvbjoge1xuICAgICAgICAnZGF0YS1jb25kaXRpb24nOiBkYXRhQ29uZGl0aW9uXG4gICAgfSBhcyBJQ29uZGl0aW9uU2V0LFxufTtcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7QXV0aE1ldGhvZF9DT05TVFN9IGZyb20gJy4uL0Jhc2VBdXRoTWV0aG9kV2lkZ2V0JztcbmltcG9ydCB7QmFzZUZvcm1XaWRnZXR9IGZyb20gJy4uL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7QmFzZU90cEF1dGhNZXRob2RXaWRnZXR9IGZyb20gJy4uL0Jhc2VPdHBBdXRoTWV0aG9kV2lkZ2V0JztcblxuZXhwb3J0IHZhciBFbWFpbE90cEF1dGhNZXRob2RPdHBXaWRnZXRfQ09OU1RTID0ge1xuICAuLi5BdXRoTWV0aG9kX0NPTlNUUyxcbiAgc2VsZWN0b3I6ICcuZ2lneWEtbGluay1hY2NvdW50cy1mb3JtIC5naWd5YS1hdXRoLW1ldGhvZFtkYXRhLWF1dGgtbWV0aG9kPVwiZW1haWxPdHBcIl0nLFxufTtcbkRlZXBGcmVlemUoRW1haWxPdHBBdXRoTWV0aG9kT3RwV2lkZ2V0X0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgRW1haWxPdHBBdXRoTWV0aG9kV2lkZ2V0IGV4dGVuZHMgQmFzZU90cEF1dGhNZXRob2RXaWRnZXQge1xuICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IEVtYWlsT3RwQXV0aE1ldGhvZE90cFdpZGdldF9DT05TVFM7XG5cbiAgcHJvdGVjdGVkIGdldCBpbml0QXBpUGFyYW1zKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsYW5nOiB0aGlzLmRhdGFQcm92aWRlci5sYW5nLFxuICAgICAgZW1haWw6IHRoaXMuZGF0YVByb3ZpZGVyLmxvZ2luSUQsXG4gICAgICByZWdUb2tlbjogbnVsbFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgZmllbGROYW1lID0gJ2VtYWlsQ29kZSc7XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShFbWFpbE90cEF1dGhNZXRob2RXaWRnZXQpO1xuIiwiaW1wb3J0IHsgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgQmFzZUZvcm1XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBTY3JlZW5TZXRfQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xuXG5leHBvcnQgY29uc3QgSW1hZ2VfQ09OU1RTID0ge1xuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLWltYWdlJyxcbiAgICBzcmNBdHRyaWJ1dGU6ICdkYXRhLXNyYycsXG4gICAgd2lkdGhBdHRyaWJ1dGU6ICdkYXRhLXdpZHRoJyxcbiAgICBoZWlnaHRBdHRyaWJ1dGU6ICdkYXRhLWhlaWdodCcsXG4gICAgYmFja2dyb3VuZFNpemVBdHRyaWJ1dGU6ICdkYXRhLWJhY2tncm91bmQtc2l6ZScsXG59O1xuRGVlcEZyZWV6ZShJbWFnZV9DT05TVFMpO1xuZXhwb3J0IGNsYXNzIEltYWdlV2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IEltYWdlX0NPTlNUUztcbiAgICBwcm90ZWN0ZWQgcHJldlNyYzogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoX2Zvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgLy8gVHVybiByZXNldENTUyBvZmYuXG4gICAgICAgIHN1cGVyKF9mb3JtLCBlbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgICAgICB0aGlzLnNldEJhY2tncm91bmRJbWFnZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBhdHRyaWJ1dGVzIGFyZSB1cGRhdGVkIHZpYSBjb25kaXRpb25hbCBhdHRyLlxuICAgICAgICB0aGlzLnNldEJhY2tncm91bmRJbWFnZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBiYWNrZ3JvdW5kIGltYWdlIGFuZCBoYW5kbGUgSFRUUFMgcHJveHlpbmcuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIHNldEJhY2tncm91bmRJbWFnZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmluc3RhbmNlRWxlbWVudDtcblxuICAgICAgICAvLyBHZXQgYXR0cmlidXRlcyBmcm9tIGVsZW1lbnRzLlxuICAgICAgICBsZXQgc3JjID0gZWwuZ2V0QXR0cmlidXRlKEltYWdlV2lkZ2V0LkNPTlNUUy5zcmNBdHRyaWJ1dGUpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IGVsLmdldEF0dHJpYnV0ZShJbWFnZVdpZGdldC5DT05TVFMud2lkdGhBdHRyaWJ1dGUpO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSBlbC5nZXRBdHRyaWJ1dGUoSW1hZ2VXaWRnZXQuQ09OU1RTLmhlaWdodEF0dHJpYnV0ZSk7XG4gICAgICAgIGNvbnN0IGJhY2tncm91bmRTaXplID0gZWwuZ2V0QXR0cmlidXRlKEltYWdlV2lkZ2V0LkNPTlNUUy5iYWNrZ3JvdW5kU2l6ZUF0dHJpYnV0ZSk7XG5cbiAgICAgICAgLy8gSGlkZSBlbGVtZW50IGlmIG5vIHNyYyBwcm92aWRlZC5cbiAgICAgICAgaWYgKCFzcmMpIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgU2NyZWVuU2V0X0NPTlNUUy5naWd5YUhpZGRlbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xuXG4gICAgICAgIC8vIFNldCB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgICAgICBpZiAod2lkdGgpIHtcbiAgICAgICAgICAgIGVsLnN0eWxlLndpZHRoID0gdGhpcy5nZXRTaXplKHdpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVpZ2h0KSB7XG4gICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmdldFNpemUoaGVpZ2h0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCBkZWZhdWx0IGJhY2tncm91bmQgc2l6ZSBpZiBub25lIHNldC5cbiAgICAgICAgaWYgKCFiYWNrZ3JvdW5kU2l6ZSkge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKEltYWdlV2lkZ2V0LkNPTlNUUy5iYWNrZ3JvdW5kU2l6ZUF0dHJpYnV0ZSwgJ2ZpdCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBwcm9jZXNzZWQgb24gZXZlcnkgY29uZGl0aW9uYWwgZXhwcmVzc2lvbiwgd2UgZG9uJ3Qgd2FudCB0byByZS1jYWxjdWxhdGUgc2VjdXJlIHBob3RvIFVSTHMgZXZlcnkgdGltZS5cbiAgICAgICAgLy8gVGhlIENETiByb3RhdGVzIGFuZCB3ZSdsbCBnZXQgYSBuZXcgVVJMIGVhY2ggdGltZSwgbGVhZGluZyB0byB0aGUgaW1hZ2UgYmVpbmcgcmVsb2FkZWQuXG4gICAgICAgIGlmICh0aGlzLnByZXZTcmMgIT09IHNyYykge1xuICAgICAgICAgICAgdGhpcy5wcmV2U3JjID0gc3JjO1xuXG4gICAgICAgICAgICAvLyBBdm9pZCBib3RoIEhUVFBTIGFuZCBlbWJlZGRlZCBpbWFnZXMuXG4gICAgICAgICAgICBpZiAoZ2lneWEubG9jYWxJbmZvLnByb3RvY29sID09PSAnaHR0cHMnICYmIHNyYy5pbmRleE9mKCdodHRwOi8vJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzcmMgPSBnaWd5YS5nbG9iYWwuZ2V0UGhvdG9VUkwoc3JjKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IGJhY2tncm91bmQgaW1hZ2UuXG4gICAgICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtzcmN9XCIpYDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSB3aWR0aC9oZWlnaHQgdG8gQ1NTLXJlYWR5IHZhbHVlLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBnZXRTaXplKHNpemU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHNpemVOdW1iZXIgPSBOdW1iZXIoc2l6ZSk7XG4gICAgICAgIGlmIChpc05hTihzaXplTnVtYmVyKSkge1xuICAgICAgICAgICAgLy8gU2l6ZSBpbmNsdWRlZCBkaW1lbnNpb24gYWxyZWFkeS5cbiAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSnVzdCBhIG51bWJlciB3YXMgcGFzc2VkLiBBZGQgXCJweFwiIHRvIGl0LlxuICAgICAgICAgICAgcmV0dXJuIHNpemUgKyAncHgnO1xuICAgICAgICB9XG4gICAgfVxufVxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KEltYWdlV2lkZ2V0KTtcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XG5pbXBvcnQgeyBJRm9ybUlucHV0LCBJVmFsaWRpdHlTdGF0ZUxpc3RlbmVyLCBWYWxpZGl0eVN0YXRlcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuXG5leHBvcnQgdmFyIExvZ2luQXZhaWxhYmlsaXR5V2lkZ2V0X0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJ2Rpdi5naWd5YS1sb2dpbklELWF2YWlsYWJpbGl0eScsXG4gICAgYm91bmRUbzogJ2RhdGEtYm91bmQtdG8nLFxufTtcbkRlZXBGcmVlemUoTG9naW5BdmFpbGFiaWxpdHlXaWRnZXRfQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBMb2dpbkF2YWlsYWJpbGl0eVdpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XG4gICAgcHJpdmF0ZSBib3VuZGVkRmllbGQ6IElGb3JtSW5wdXQ7XG4gICAgcHJpdmF0ZSBvcmlnaW5hbERpc3BsYXk6IHN0cmluZztcbiAgICBwcml2YXRlIGxvZ2luSWRTdGF0ZUxpc3RlbmVyOiBJVmFsaWRpdHlTdGF0ZUxpc3RlbmVyO1xuXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBMb2dpbkF2YWlsYWJpbGl0eVdpZGdldF9DT05TVFM7XG5cbiAgICBjb25zdHJ1Y3Rvcihmb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKGZvcm0sIGVsKTtcbiAgICAgICAgdGhpcy5pbml0KGZvcm0sIGVsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXQoZm9ybTogQmFzZUZvcm0sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xuICAgICAgICB0aGlzLmxvZ2luSWRTdGF0ZUxpc3RlbmVyID0gc3RhdGUgPT4gdGhpcy5vbkxvZ2luSWRTdGF0ZUNoYW5nZShzdGF0ZSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxEaXNwbGF5ID0gZWwuc3R5bGUuZGlzcGxheTtcblxuICAgICAgICB0aGlzLnJlc2V0KGVsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0KGVsOiBIVE1MRGl2RWxlbWVudCkge1xuICAgICAgICB0aGlzLmJvdW5kZWRGaWVsZCA9XG4gICAgICAgICAgICB0aGlzLl9mb3JtLmdldEZpZWxkKGVsLmdldEF0dHJpYnV0ZShMb2dpbkF2YWlsYWJpbGl0eVdpZGdldC5DT05TVFMuYm91bmRUbykpIHx8XG4gICAgICAgICAgICB0aGlzLl9mb3JtLmdldEZpZWxkKCdsb2dpbklEJykgfHxcbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uZ2V0RmllbGQoJ3VzZXJuYW1lJykgfHxcbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uZ2V0RmllbGQoJ2VtYWlsJyk7XG5cbiAgICAgICAgaWYgKHRoaXMuYm91bmRlZEZpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLmJvdW5kZWRGaWVsZFsnX3NlcnZlclZhbGlkYXRlQXZhbGlhYmlsaXR5J10gPSB0cnVlOyAvLyB0cmlnZ2VyIHRoZSBzZXJ2ZXIgdmFsaWRhdGlvbiBvZiB0aGUgbG9naW5JZFxuICAgICAgICAgICAgdGhpcy5ib3VuZGVkRmllbGQuYWRkVmFsaWRpdHlTdGF0ZUxpc3RlbmVyKHRoaXMubG9naW5JZFN0YXRlTGlzdGVuZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy53YXJuKExvZ2luQXZhaWxhYmlsaXR5V2lkZ2V0X0NPTlNUUy5zZWxlY3RvciArICcgaXMgbWlzc2luZyBhIGZpZWxkIHRvIGJvdW5kIHRvJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcblxuICAgICAgICBpZiAodGhpcy5ib3VuZGVkRmllbGQpIHRoaXMub25Mb2dpbklkU3RhdGVDaGFuZ2UodGhpcy5ib3VuZGVkRmllbGQuZ2V0VmFsaWRpdHlTdGF0ZSgpLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua1RlbXBsYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5ib3VuZGVkRmllbGQpIHRoaXMuYm91bmRlZEZpZWxkLnJlbW92ZVZhbGlkaXR5U3RhdGVMaXN0ZW5lcih0aGlzLmxvZ2luSWRTdGF0ZUxpc3RlbmVyKTtcblxuICAgICAgICBzdXBlci51bmxpbmtUZW1wbGF0ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Mb2dpbklkU3RhdGVDaGFuZ2Uoc3RhdGU6IFZhbGlkaXR5U3RhdGVzLCBmcm9tU2VydmVyOiBib29sZWFuKSB7XG4gICAgICAgIGlmICghZnJvbVNlcnZlcilcbiAgICAgICAgICAgIC8vIHRyZWF0IGxvY2FsIHZhbGlkYXRpb25zIGFzIG5vIHJlbGV2YW50IHRvIHdpZGdldFxuICAgICAgICAgICAgc3RhdGUgPSBWYWxpZGl0eVN0YXRlcy5fdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZUVsZW1lbnQpIHJldHVybjtcblxuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgJ2dpZ3lhLWxvZ2luSUQtYXZhaWxhYmlsaXR5LXByb2dyZXNzJyk7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnZ2lneWEtbG9naW5JRC1hdmFpbGFiaWxpdHktbm90LWF2YWlsYWJsZScpO1xuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlQ2xhc3NGcm9tRWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCwgJ2dpZ3lhLWxvZ2luSUQtYXZhaWxhYmlsaXR5LWF2YWlsYWJsZScpO1xuXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgVmFsaWRpdHlTdGF0ZXMudmFsaWQ6XG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMub3JpZ2luYWxEaXNwbGF5O1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdhdmFpbGFibGUnKTtcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdnaWd5YS1sb2dpbklELWF2YWlsYWJpbGl0eS1hdmFpbGFibGUnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVmFsaWRpdHlTdGF0ZXMuZXJyb3I6XG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMub3JpZ2luYWxEaXNwbGF5O1xuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdub3RfYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCAnZ2lneWEtbG9naW5JRC1hdmFpbGFiaWxpdHktbm90LWF2YWlsYWJsZScpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBWYWxpZGl0eVN0YXRlcy5wZW5kaW5nOlxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB0aGlzLm9yaWdpbmFsRGlzcGxheTtcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgnY2hlY2tpbmcnKTtcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsICdnaWd5YS1sb2dpbklELWF2YWlsYWJpbGl0eS1wcm9ncmVzcycpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCkge1xuICAgICAgICBzdXBlci5ldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpO1xuICAgICAgICAvLy8gaWYgW2ZvciBzb21lIHJlYXNvbl0gdGhpcyB3aWRnZXQgbmVlZCB0byBzdXBwb3J0IGNvbmRpdGlvbmFsIGF0dHJzLi4uXG4gICAgICAgIC8vIHRoaXMucmVzZXQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgIH1cbn1cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShMb2dpbkF2YWlsYWJpbGl0eVdpZGdldCk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlU2NyZWVuV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlU2NyZWVuV2lkZ2V0JztcbmltcG9ydCB7IElQbHVnaW5QYXJhbXMgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpblBhcmFtcyc7XG5pbXBvcnQgeyBJUGx1Z2luVGVtcGxhdGVzIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9pbnRlcmZhY2VzL0lQbHVnaW5UZW1wbGF0ZXMnO1xuaW1wb3J0IHsgSVBsdWdpbkNTUyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUGx1Z2luQ1NTJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcbmltcG9ydCB7IEJhc2VQbHVnaW4gfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL0Jhc2VQbHVnaW4nO1xuXG52YXIgbmV4dEdlbmVyYXRlZENvbnRhaW5lcklkID0gMDtcbmV4cG9ydCB2YXIgTXlQaG90b1dpZGdldF9DT05TVFMgPSB7XG4gICAgc2VsZWN0b3I6ICdkaXYuZ2lneWEtbXlQaG90bycsXG59O1xuRGVlcEZyZWV6ZShNeVBob3RvV2lkZ2V0X0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgTXlQaG90b1dpZGdldCBleHRlbmRzIEJhc2VTY3JlZW5XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcklkOiBzdHJpbmc7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBNeVBob3RvV2lkZ2V0X0NPTlNUUztcbiAgICBwcml2YXRlIF9pbnN0YW5jZTogQmFzZVBsdWdpbjxJUGx1Z2luUGFyYW1zLCBJUGx1Z2luVGVtcGxhdGVzLCBJUGx1Z2luQ1NTPjtcblxuICAgIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsKTtcbiAgICAgICAgdGhpcy5jb250YWluZXJJZCA9IHRoaXMuX3NjcmVlblNldC5jb250YWluZXJJRCArICdfbXlQaG90b18nICsgbmV4dEdlbmVyYXRlZENvbnRhaW5lcklkKys7XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9ICc8ZGl2IGlkPVwiJyArIHRoaXMuY29udGFpbmVySWQgKyAnXCI+PC9kaXY+JztcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJhbXNbJ2NvbnRhaW5lcklEJ10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpZGdldFBhcmFtcyA9IHRoaXMucGFyYW1zO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyV2lkZ2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9ICcnOyAvLyBUbyBtYWtlIHN1cmUgbm8gSUQgY29uZmxpY3RzIHdpbGwgYmUgZ2VuZXJhdGVkXG5cbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlKSB0aGlzLl9pbnN0YW5jZS5kaXNwb3NlKCk7XG5cbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHJlbmRlcldpZGdldCgpOiB2b2lkIHtcbiAgICAgICAgLy9yZS1yZW5kZXIgdGhlIHBsdWdpbiB3aXRoIHRoZSBuZXcgbmV3IGNvbmRpdGlvbmFsIHZhbHVlcy5cbiAgICAgICAgZ2lneWEuYWNjb3VudHMuc2hvd015UGhvdG9VSSh0aGlzLndpZGdldFBhcmFtcywge1xuICAgICAgICAgICAgY29udGFpbmVySUQ6IHRoaXMuY29udGFpbmVySWQsXG4gICAgICAgICAgICBsYW5nOiB0aGlzLl9zY3JlZW5TZXQubGFuZyxcbiAgICAgICAgICAgIGN1c3RvbUxhbmc6IHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY3VzdG9tTGFuZyxcbiAgICAgICAgICAgIHJlZ1Rva2VuOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zWydyZWdUb2tlbiddLFxuICAgICAgICAgICAgZ2V0SW5zdGFuY2U6IGluc3RhbmNlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uTG9hZDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5jZW50ZXJNb2RhbCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVuZGVyV2lkZ2V0VUkgPSBmYWxzZTtcbiAgICB9XG59XG5CYXNlU2NyZWVuV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShNeVBob3RvV2lkZ2V0KTtcbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgU2NyZWVuU2V0X0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcbmltcG9ydCBHU0Vycm9ycyA9IGdpZ3lhLkdTRXJyb3JzO1xuaW1wb3J0IHtFcnJvckNvZGUsIEdpZ3lhUmVzcG9uc2V9IGZyb20gXCJnaWd5YVwiO1xuaW1wb3J0IHtDaGFuZ2VPcmdhbml6YXRpb25Db250ZXh0Rm9ybX0gZnJvbSBcIi4uL0Zvcm1zL0NoYW5nZU9yZ2FuaXphdGlvbkNvbnRleHRGb3JtXCI7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHtJRmllbGRDaGFuZ2VFdmVudH0gZnJvbSBcIi4uL0V2ZW50c1wiO1xuXG5leHBvcnQgY29uc3QgT3JnYW5pemF0aW9uQ29udGV4dENvbnN0cyA9IHtcbiAgICBzZWxlY3RvcjogJy5naWd5YS1vcmdhbml6YXRpb24tY29udGV4dC13aWRnZXQnLFxuICAgIGRyb3Bkb3duU2VsZWN0b3I6ICcuZ2lneWEtb3JnYW5pemF0aW9uLWNvbnRleHQtZHJvcGRvd24nLFxuICAgIGJ1dHRvblNlbGVjdG9yOiAnLmdpZ3lhLW9yZ2FuaXphdGlvbi1jb250ZXh0LWNvbnRyb2wtbGluay1idXR0b24nLFxuICAgIGVycm9yRGlzcGxheUNsYXNzOiAnLmdpZ3lhLWVycm9yLWRpc3BsYXknLFxuICAgIGVycm9yTWVzc2FnZUNsYXNzOiAnLmdpZ3lhLWVycm9yLW1zZycsXG4gICAgZXJyb3JBY3RpdmVDbGFzczogJ2dpZ3lhLWVycm9yLWRpc3BsYXktYWN0aXZlJyxcbiAgICBkaXNhYmxlZENsYXNzOiAnZ2lneWEtZGlzYWJsZWQnLFxuICAgIG5vRGF0YUF2YWlsYWJsZU1lc3NhZ2U6ICdub19kYXRhX2F2YWlsYWJsZSdcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU9yZ2FuaXphdGlvbkluZm8ge1xuICAgIG9yZ0lkOiBzdHJpbmc7XG4gICAgYnBpZD86IHN0cmluZztcbiAgICBvcmdOYW1lOiBzdHJpbmc7XG4gICAgc3RhdHVzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUIyQkdyb3VwcyB7XG4gICAgb3JnYW5pemF0aW9uczogSU9yZ2FuaXphdGlvbkluZm9bXVxufVxuXG5lbnVtIFVzZXJPcmdhbml6YXRpb25SZWxhdGlvbnNoaXBTdGF0dXN7XG4gICAgYWN0aXZlID0gJ2FjdGl2ZSdcbn1cblxuRGVlcEZyZWV6ZShPcmdhbml6YXRpb25Db250ZXh0Q29uc3RzKTtcbmV4cG9ydCBjbGFzcyBPcmdhbml6YXRpb25Db250ZXh0V2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IE9yZ2FuaXphdGlvbkNvbnRleHRDb25zdHM7XG5cbiAgICBwcml2YXRlIHNlbGVjdEVsZW06IEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIHByaXZhdGUgZXJyb3JEaXNwbGF5RWxlbTogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBidXR0b25FbGVtOiBIVE1MTGlua0VsZW1lbnQ7XG4gICAgcHJpdmF0ZSBlcnJvck1lc3NhZ2VFbGVtOiBIVE1MU3BhbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBvcmdhbml6YXRpb25Db250ZXh0QnBpZDogc3RyaW5nO1xuICAgIGNvbnN0cnVjdG9yKF9mb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50LFxuICAgICAgICAgICAgICAgIHByaXZhdGUgX2RvbVV0aWxzID0gZ2lneWEudXRpbHMuRE9NKSB7XG4gICAgICAgIC8vIFR1cm4gcmVzZXRDU1Mgb2ZmLlxuICAgICAgICBzdXBlcihfZm9ybSwgZWwsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuLmRpbVNjcmVlbigpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RFbGVtID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcihPcmdhbml6YXRpb25Db250ZXh0Q29uc3RzLmRyb3Bkb3duU2VsZWN0b3IpO1xuICAgICAgICAgICAgdGhpcy5idXR0b25FbGVtID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcihPcmdhbml6YXRpb25Db250ZXh0Q29uc3RzLmJ1dHRvblNlbGVjdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5RWxlbSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoT3JnYW5pemF0aW9uQ29udGV4dENvbnN0cy5lcnJvckRpc3BsYXlDbGFzcylcbiAgICAgICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlRWxlbSA9IHRoaXMuZXJyb3JEaXNwbGF5RWxlbS5xdWVyeVNlbGVjdG9yKE9yZ2FuaXphdGlvbkNvbnRleHRDb25zdHMuZXJyb3JNZXNzYWdlQ2xhc3MpXG4gICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZUVsZW0uY2xhc3NMaXN0LmFkZCgnZ2lneWEtZXJyb3ItbXNnLWFjdGl2ZScpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNPcmdhbml6YXRpb25Db250ZXh0Rm9ybSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRCdXR0b25IYW5kbGVyKHRoaXMuYnV0dG9uRWxlbSwgdGhpcy5vbkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYodGhpcy5zZWxlY3RFbGVtID09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5hZGREb21FdmVudExpc3RlbmVyKHRoaXMuc2VsZWN0RWxlbSwgXCJjaGFuZ2VcIiwgdGhpcy5vblNlbGVjdENoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICBsZXQgW2dyb3Vwc1Jlc3BvbnNlLCBvcmdhbml6YXRpb25SZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRVc2VyT3JnYW5pemF0aW9ucygpLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0T3JnYW5pemF0aW9uQ29udGV4dCgpXG4gICAgICAgICAgICBdKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0T3JnYW5pemF0aW9uU2VsZWN0KGdyb3Vwc1Jlc3BvbnNlLCBvcmdhbml6YXRpb25SZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpe1xuXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0RXJyb3JNZXNzYWdlTmV3KGUuZXJyb3JDb2RlKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoXCJlcnJvclwiLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHRlbXBsYXRlIG9wdGlvbiBpbiBjYXNlIG9mIGVycm9yXG4gICAgICAgICAgICB0aGlzLmNsZWFyT3JnYW5pemF0aW9uU2VsZWN0KCk7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW4uZGlzcGF0Y2hFdmVudCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgLi4uZSxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuLnVuZGltU2NyZWVuKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE9yZ2FuaXphdGlvbkNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnkoZ2lneWEuYWNjb3VudHMuYjJiLmdldE9yZ2FuaXphdGlvbkNvbnRleHQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0T3JnYW5pemF0aW9uQ29udGV4dChicGlkOiBzdHJpbmcsIGNhbGxiYWNrIDogKHJlc3A6IGFueSkgPT4gdm9pZCkge1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5iMmIuc2V0T3JnYW5pemF0aW9uQ29udGV4dCh7XG4gICAgICAgICAgICBjYWxsYmFjazogcmVzcG9uc2UgPT4gY2FsbGJhY2socmVzcG9uc2UpLFxuICAgICAgICAgICAgYnBpZFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFVzZXJPcmdhbml6YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5KGdpZ3lhLmFjY291bnRzLmdldEFjY291bnRJbmZvLCB7XG4gICAgICAgICAgICBpbmNsdWRlOiBcImdyb3Vwc1wiXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xlYXJPcmdhbml6YXRpb25TZWxlY3QoKXtcbiAgICAgICAgdGhpcy5zZWxlY3RFbGVtLm9wdGlvbnMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRPcmdhbml6YXRpb25TZWxlY3QoZ3JvdXBzUmVzcG9uc2U6IEdpZ3lhUmVzcG9uc2UsIG9yZ2FuaXphdGlvbkNvbnRleHRSZXNwb25zZTogR2lneWFSZXNwb25zZSl7XG4gICAgICAgIGxldCBzZWxlY3RPcHRpb25UZW1wbGF0ZSA9IHRoaXMuc2VsZWN0RWxlbS5vcHRpb25zWzBdLnRleHQ7XG4gICAgICAgIGxldCBvcmdhbml6YXRpb25zOiBJT3JnYW5pemF0aW9uSW5mb1tdO1xuICAgICAgICBpZiAoZ3JvdXBzUmVzcG9uc2UuZXJyb3JDb2RlID09PSBHU0Vycm9ycy5PSyl7XG4gICAgICAgICAgICBvcmdhbml6YXRpb25zID0gdGhpcy5nZXRBY3RpdmVPcmdhbml6YXRpb25zKGdyb3Vwc1Jlc3BvbnNlW1wiZ3JvdXBzXCJdKTtcbiAgICAgICAgICAgIGlmKG9yZ2FuaXphdGlvbnMubGVuZ3RoID09IDApe1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RWxlbS5vcHRpb25zWzBdLnRleHQgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dChPcmdhbml6YXRpb25Db250ZXh0Q29uc3RzLm5vRGF0YUF2YWlsYWJsZU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZVdpZGdldCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX3NjcmVlblNldC5nZXRFcnJvck1lc3NhZ2VOZXcoZ3JvdXBzUmVzcG9uc2UuZXJyb3JDb2RlKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoJ2Vycm9yJywgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSB0ZW1wbGF0ZSBvcHRpb24gaW4gY2FzZSBvZiBlcnJvclxuICAgICAgICAgICAgdGhpcy5jbGVhck9yZ2FuaXphdGlvblNlbGVjdCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cblxuICAgICAgICBpZiAob3JnYW5pemF0aW9uQ29udGV4dFJlc3BvbnNlLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgIHRoaXMub3JnYW5pemF0aW9uQ29udGV4dEJwaWQgPSAoPGFueT5vcmdhbml6YXRpb25Db250ZXh0UmVzcG9uc2UpLmJwaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0RXJyb3JNZXNzYWdlTmV3KG9yZ2FuaXphdGlvbkNvbnRleHRSZXNwb25zZS5lcnJvckNvZGUpO1xuICAgICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgnZXJyb3InLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBoYXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICBvcmdhbml6YXRpb25zXG4gICAgICAgICAgICAubWFwKG9yZyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnZhbHVlID0gb3JnLmJwaWQ7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnRleHQgPSB0aGlzLmZpbGxUZW1wbGF0ZShzZWxlY3RPcHRpb25UZW1wbGF0ZSwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBvcmcub3JnTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYnBpZDogb3JnLmJwaWQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBvcmcub3JnSWRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmKHRoaXMub3JnYW5pemF0aW9uQ29udGV4dEJwaWQgPT0gb3JnLmJwaWQpe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLnNlbGVjdGVkQnBpZCA9IHRoaXMub3JnYW5pemF0aW9uQ29udGV4dEJwaWQ7XG4gICAgICAgICAgICAgICAgICAgIGhhc1NlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RFbGVtLmFkZChvcHRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgaWYoaGFzU2VsZWN0ZWQpe1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGZpcnN0IG9wdGlvbiB3aXRoIHRleHQgcGF0dGVybiBpbiBjYXNlIHdoZW4gd2UgaGF2ZSBzZWxlY3RlZCB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RFbGVtLm9wdGlvbnMucmVtb3ZlKDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbm8gc2VsZWN0ZWQgdmFsdWUsIHJlbW92ZSB0ZXh0IHBhdHRlcm4gZnJvbSB0aGUgZmlyc3Qgb3B0aW9uXG4gICAgICAgICAgICB0aGlzLnNlbGVjdEVsZW0ub3B0aW9uc1swXS50ZXh0ID0gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QWN0aXZlT3JnYW5pemF0aW9ucyhncm91cHM6IElCMkJHcm91cHMpIHtcbiAgICAgICAgaWYoZ3JvdXBzICYmIGdyb3Vwcy5vcmdhbml6YXRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXBzLm9yZ2FuaXphdGlvbnMuZmlsdGVyKG9yZyA9PiAhb3JnLnN0YXR1cyB8fCBvcmcuc3RhdHVzID09PSBVc2VyT3JnYW5pemF0aW9uUmVsYXRpb25zaGlwU3RhdHVzLmFjdGl2ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNPcmdhbml6YXRpb25Db250ZXh0Rm9ybSgpIDogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtIGluc3RhbmNlb2YgIENoYW5nZU9yZ2FuaXphdGlvbkNvbnRleHRGb3JtIDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbGxUZW1wbGF0ZSh0ZW1wbGF0ZTogc3RyaW5nLCBvYmope1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdGVtcGxhdGUucmVwbGFjZShcbiAgICAgICAgICAgIC97e29yZ2FuaXphdGlvblsuXSguKj8pfX0vZyxcbiAgICAgICAgICAgIChtYXRjaCwgcDEpID0+IG9ialtwMV0gfHwgXCJcIiApO1xuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25DbGlja0hhbmRsZXIoKSB7XG4gICAgICAgIHRoaXMuaGlkZU1lc3NhZ2UoKTtcbiAgICAgICAgaWYoIXRoaXMuX3NjcmVlblNldC5kYXRhLmFwaURhdGEuc2VsZWN0ZWRCcGlkKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgIGlmKHRoaXMuX3NjcmVlblNldC5kYXRhLmFwaURhdGEuc2VsZWN0ZWRCcGlkICE9IHRoaXMub3JnYW5pemF0aW9uQ29udGV4dEJwaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucHJlU2F2ZUNvbnRleHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0T3JnYW5pemF0aW9uQ29udGV4dCh0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLnNlbGVjdGVkQnBpZCwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3JnYW5pemF0aW9uQ29udGV4dEJwaWQgPSB0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLnNlbGVjdGVkQnBpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX3NjcmVlblNldC5nZXRFcnJvck1lc3NhZ2VOZXcocmVzcG9uc2UuZXJyb3JDb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TWVzc2FnZShcImVycm9yXCIsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucG9zdFNhdmVDb250ZXh0KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkaXNhYmxlV2lkZ2V0KCl7XG4gICAgICAgIHRoaXMuc2VsZWN0RWxlbS5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2VsZWN0RWxlbS5jbGFzc0xpc3QuYWRkKE9yZ2FuaXphdGlvbkNvbnRleHRDb25zdHMuZGlzYWJsZWRDbGFzcyk7XG4gICAgICAgIGlmKHRoaXMuYnV0dG9uRWxlbSl7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW0uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5idXR0b25FbGVtLmNsYXNzTGlzdC5hZGQoT3JnYW5pemF0aW9uQ29udGV4dENvbnN0cy5kaXNhYmxlZENsYXNzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZW5hYmxlV2lkZ2V0KCl7XG4gICAgICAgIHRoaXMuc2VsZWN0RWxlbS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNlbGVjdEVsZW0uY2xhc3NMaXN0LnJlbW92ZShPcmdhbml6YXRpb25Db250ZXh0Q29uc3RzLmRpc2FibGVkQ2xhc3MpO1xuICAgICAgICBpZih0aGlzLmJ1dHRvbkVsZW0pe1xuICAgICAgICAgICAgdGhpcy5idXR0b25FbGVtLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbkVsZW0uY2xhc3NMaXN0LnJlbW92ZShPcmdhbml6YXRpb25Db250ZXh0Q29uc3RzLmRpc2FibGVkQ2xhc3MpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVTYXZlQ29udGV4dCgpe1xuICAgICAgICB0aGlzLmRpc2FibGVXaWRnZXQoKTtcbiAgICAgICAgdGhpcy5fc2NyZWVuLmRpbVNjcmVlbigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcG9zdFNhdmVDb250ZXh0KCl7XG4gICAgICAgIHRoaXMuZW5hYmxlV2lkZ2V0KCk7XG4gICAgICAgIHRoaXMuX3NjcmVlbi51bmRpbVNjcmVlbigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblNlbGVjdENoYW5nZWRIYW5kbGVyKCkge1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5hcGlEYXRhLnNlbGVjdGVkQnBpZCA9IHRoaXMuc2VsZWN0RWxlbS52YWx1ZTtcbiAgICAgICAgdGhpcy5oaWRlTWVzc2FnZSgpO1xuICAgICAgICB0aGlzLnB1Ymxpc2hTZWxlY3RWYWx1ZUNoYW5nZWQodGhpcy5zZWxlY3RFbGVtLnZhbHVlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHB1Ymxpc2hTZWxlY3RWYWx1ZUNoYW5nZWQodmFsdWU6IHN0cmluZyl7XG4gICAgICAgIGNvbnN0IGZpZWxkQ2hhbmdlRXZlbnQ6IElGaWVsZENoYW5nZUV2ZW50ID0ge1xuICAgICAgICAgICAgZXZlbnROYW1lOiAnZmllbGRDaGFuZ2VkJyxcbiAgICAgICAgICAgIHNjcmVlbjogdGhpcy5fc2NyZWVuPy5yZXF1ZXN0ZWRTY3JlZW4sXG4gICAgICAgICAgICBmb3JtOiB0aGlzLl9mb3JtLmJpbmRJRCxcbiAgICAgICAgICAgIGZpZWxkOiAnYnBpZCcsXG4gICAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgICAgICAgZXJyTXNnOiBudWxsLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuc2VsZWN0RWxlbS52YWx1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fc2NyZWVuLmRpc3BhdGNoRXZlbnQoJ2ZpZWxkQ2hhbmdlZCcsIGZpZWxkQ2hhbmdlRXZlbnQpO1xuICAgICAgICBnaWd5YS51dGlscy5ET00uZGlzcGF0Y2godGhpcy5zZWxlY3RFbGVtLCAnZmllbGRDaGFuZ2VkJyk7XG4gICAgfVxuXG5cbiAgICBwcm90ZWN0ZWQgc2hvd01lc3NhZ2UodHlwZTogJ3N1Y2Nlc3MnIHwgJ2Vycm9yJywgbWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5RWxlbS5jbGFzc0xpc3QuYWRkKE9yZ2FuaXphdGlvbkNvbnRleHRDb25zdHMuZXJyb3JBY3RpdmVDbGFzcyk7XG4gICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5RWxlbS5jbGFzc0xpc3QuYWRkKHR5cGUpO1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZUVsZW0uaW5uZXJUZXh0ID0gbWVzc2FnZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaGlkZU1lc3NhZ2UoKSB7XG4gICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKE9yZ2FuaXphdGlvbkNvbnRleHRDb25zdHMuZXJyb3JBY3RpdmVDbGFzcyk7XG4gICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzdWNjZXNzJyk7XG4gICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xuICAgIH1cblxufVxuXG5CYXNlRm9ybVdpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoT3JnYW5pemF0aW9uQ29udGV4dFdpZGdldCk7XG4iLCJpbXBvcnQgcGFzc2tleVNlcnZpY2UgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1Bhc3NrZXkvUGFzc2tleVNlcnZpY2UnO1xuaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gJy4uL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHtJRm9ybX0gZnJvbSAnLi4vU2NyZWVuU2V0UGx1Z2luJztcblxuZXhwb3J0IGNvbnN0IFBhc3NrZXlfQ09OU1RTID0ge1xuICAgIHNlbGVjdG9yOiAnLmdpZ3lhLXBhc3NLZXktd2lkZ2V0JyxcbiAgICBlcnJvckRpc3BsYXlDbGFzczogJy5naWd5YS1lcnJvci1kaXNwbGF5JyxcbiAgICBlcnJvck1lc3NhZ2VDbGFzczogJy5naWd5YS1lcnJvci1tc2cnLFxuICAgIGVycm9yQWN0aXZlQ2xhc3M6ICdnaWd5YS1lcnJvci1kaXNwbGF5LWFjdGl2ZScsXG59O1xuXG5EZWVwRnJlZXplKFBhc3NrZXlfQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBQYXNza2V5QmFzZVdpZGdldCBleHRlbmRzIEJhc2VTY3JlZW5XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+e1xuICAgIHByaXZhdGUgZXJyb3JEaXNwbGF5RWxlbTogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBlcnJvck1lc3NhZ2VFbGVtOiBIVE1MU3BhbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBidXR0b25FbGVtOiBIVE1MQnV0dG9uRWxlbWVudDtcblxuICAgIHByaXZhdGUgb25DbGlja0hhbmRsZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMub25DbGljaygpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgaG9zdEZvcm0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zY3JlZW4uZ2V0Rm9ybUJ5RWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCkgfHwgbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihfc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRGl2RWxlbWVudCxcbiAgICAgICAgICAgICAgICBwcml2YXRlIF9kb21VdGlscyA9IGdpZ3lhLnV0aWxzLkRPTSkge1xuICAgICAgICBzdXBlcihfc2NyZWVuLCBlbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIHRoaXMuYnV0dG9uRWxlbSA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpO1xuICAgICAgICB0aGlzLmVycm9yRGlzcGxheUVsZW0gPSB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFBhc3NrZXlfQ09OU1RTLmVycm9yRGlzcGxheUNsYXNzKVxuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZUVsZW0gPSB0aGlzLmVycm9yRGlzcGxheUVsZW0ucXVlcnlTZWxlY3RvcihQYXNza2V5X0NPTlNUUy5lcnJvck1lc3NhZ2VDbGFzcylcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VFbGVtLmNsYXNzTGlzdC5hZGQoJ2dpZ3lhLWVycm9yLW1zZy1hY3RpdmUnKTtcblxuICAgICAgICBpZiAocGFzc2tleVNlcnZpY2UuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5fYWRkQ2xpY2tIYW5kbGVyKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uRWxlbS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB1bmxpbmtJbnN0YW5jZUVsZW1lbnQoKSB7XG4gICAgICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuXG4gICAgICAgIHRoaXMuX3JlbW92ZUNsaWNrSGFuZGxlcigpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBvbkNsaWNrKCkge1xuICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNob3dNZXNzYWdlKHR5cGU6ICdzdWNjZXNzJyB8ICdlcnJvcicsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICB0aGlzLmVycm9yRGlzcGxheUVsZW0uY2xhc3NMaXN0LmFkZChQYXNza2V5X0NPTlNUUy5lcnJvckFjdGl2ZUNsYXNzKTtcbiAgICAgICAgdGhpcy5lcnJvckRpc3BsYXlFbGVtLmNsYXNzTGlzdC5hZGQodHlwZSk7XG4gICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlRWxlbS5pbm5lclRleHQgPSBtZXNzYWdlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBoaWRlTWVzc2FnZSgpIHtcbiAgICAgICAgdGhpcy5lcnJvckRpc3BsYXlFbGVtLmNsYXNzTGlzdC5yZW1vdmUoUGFzc2tleV9DT05TVFMuZXJyb3JBY3RpdmVDbGFzcyk7XG4gICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdzdWNjZXNzJyk7XG4gICAgICAgIHRoaXMuZXJyb3JEaXNwbGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2FkZENsaWNrSGFuZGxlcigpIHtcbiAgICAgICAgdGhpcy5fZG9tVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmJ1dHRvbkVsZW0sICdjbGljaycsIHRoaXMub25DbGlja0hhbmRsZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3JlbW92ZUNsaWNrSGFuZGxlcigpIHtcbiAgICAgICAgdGhpcy5fZG9tVXRpbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmJ1dHRvbkVsZW0sICdjbGljaycsIHRoaXMub25DbGlja0hhbmRsZXIpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7UGFzc2tleUJhc2VXaWRnZXR9IGZyb20gJy4vUGFzc2tleUJhc2VXaWRnZXQnO1xuaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gJy4uL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IHBhc3NrZXlTZXJ2aWNlIGZyb20gICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvUGFzc2tleS9QYXNza2V5U2VydmljZSc7XG5pbXBvcnQgR1NFcnJvcnMgPSBnaWd5YS5HU0Vycm9ycztcbmltcG9ydCB7TGlua0FjY291bnRzRm9ybV9DT05TVFN9IGZyb20gJy4uL0Zvcm1zL0xpbmtBY2NvdW50c0Zvcm0nO1xuXG5leHBvcnQgY29uc3QgUGFzc2tleUxvZ2luX0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJy5naWd5YS1jb21wb3NpdGUtY29udHJvbC1wYXNza2V5LWxvZ2luLXdpZGdldCcsXG59O1xuXG5EZWVwRnJlZXplKFBhc3NrZXlMb2dpbl9DT05TVFMpO1xuZXhwb3J0IGNsYXNzIFBhc3NrZXlMb2dpbldpZGdldCBleHRlbmRzIFBhc3NrZXlCYXNlV2lkZ2V0IHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFBhc3NrZXlMb2dpbl9DT05TVFM7XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgb25DbGljaygpIHtcbiAgICAgICAgc3VwZXIub25DbGljaygpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW4uZGltU2NyZWVuKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5ob3N0Rm9ybS5iaW5kSUQgPT09IExpbmtBY2NvdW50c0Zvcm1fQ09OU1RTLmdpZ3lhQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5zaG91bGRDb25uZWN0QWNjb3VudHMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwYXNza2V5U2VydmljZS5hdXRoZW50aWNhdGUoe1xuICAgICAgICAgICAgICAgIGFib3J0Q3VycmVudENlcmVtb255OiB0cnVlLFxuICAgICAgICAgICAgICAgIGRvbnRIYW5kbGVTY3JlZW5TZXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25FeHBpcmF0aW9uOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zWydzZXNzaW9uRXhwaXJhdGlvbiddXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKHJlc3BvbnNlLCB0aGlzLmhvc3RGb3JtKTtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3JNZXNzYWdlID0gdGhpcy5fc2NyZWVuU2V0LmdldEVycm9yTWVzc2FnZU5ldyhyZXNwb25zZS5lcnJvckNvZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoJ2Vycm9yJywgcmVzcG9uc2UuZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fc2NyZWVuU2V0LmdldEVycm9yTWVzc2FnZU5ldyhlLmVycm9yQ29kZSk7XG4gICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdlcnJvcicsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW4uZGlzcGF0Y2hFdmVudCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgLi4uZSxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuLnVuZGltU2NyZWVuKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJhc2VTY3JlZW5XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFBhc3NrZXlMb2dpbldpZGdldCk7XG4iLCJpbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gJy4uLy4uL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IHtTY3JlZW59IGZyb20gJy4uLy4uL1NjcmVlbic7XG5pbXBvcnQge1RyYW5zbGF0ZWRXaWRnZXR9IGZyb20gJy4uL1RyYW5zbGF0ZWRXaWRnZXQnO1xuaW1wb3J0IHtDYXJkTGlzdF9DT05TVFN9IGZyb20gJy4uL0NhcmRMaXN0V2lkZ2V0JztcbmltcG9ydCBwYXNza2V5U2VydmljZSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvUGFzc2tleS9QYXNza2V5U2VydmljZSdcbmltcG9ydCBHU0Vycm9ycyA9IGdpZ3lhLkdTRXJyb3JzO1xuaW1wb3J0IHtJRm9ybX0gZnJvbSAnLi4vLi4vU2NyZWVuU2V0UGx1Z2luJztcblxuZXhwb3J0IGNvbnN0IFBhc3NrZXlDYXJkX0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJ2xpLmdpZ3lhLXBhc3NrZXktY2FyZCcsXG4gICAgZGVsZXRlQnV0dG9uU2VsZWN0b3I6ICcuZ2lneWEtcmVtb3ZlLXBhc3NrZXktaWNvbicsXG4gICAgbmV3Q2FyZENsYXNzOiAnZ2lneWEtY2FyZC1uZXcnLFxuICAgIGRlcHM6IFtUcmFuc2xhdGVkV2lkZ2V0XVxufVxuZXhwb3J0IGNsYXNzIFBhc3NrZXlDYXJkV2lkZ2V0IGV4dGVuZHMgQmFzZVNjcmVlbldpZGdldDxIVE1MTElFbGVtZW50PiBpbXBsZW1lbnRzIElGb3JtIHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFBhc3NrZXlDYXJkX0NPTlNUUztcbiAgICBwdWJsaWMgYmluZElEOiBzdHJpbmc7XG5cbiAgICBwcml2YXRlIGRlbGV0ZVBhc3NrZXkgPSBhc3luYyAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuX3NjcmVlbi5kaW1TY3JlZW4oKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwYXNza2V5U2VydmljZS5yZW1vdmVQYXNza2V5KHRoaXMuZWxlbWVudElkLCB0aGlzLl9zY3JlZW5TZXQucmVnVG9rZW4pO1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgY29uc3QgaG9zdEZvcm0gPSB0aGlzLl9zY3JlZW4uZ2V0Rm9ybUJ5RWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIWhvc3RGb3JtKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQub25TY3JlZW5SZXNwb25zZShyZXNwb25zZSBhcyBhbnksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRpc3BsYXlTZXJ2ZXJFcnJvcnMocmVzcG9uc2UgYXMgYW55LCBob3N0Rm9ybSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2NyZWVuLnVuZGltU2NyZWVuKCk7XG4gICAgfTtcblxuICAgIHByb3RlY3RlZCBnZXQgaW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8uZ2V0QXR0cmlidXRlKENhcmRMaXN0X0NPTlNUUy5pbmRleEF0dHJpYnV0ZSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBlbGVtZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8uZ2V0QXR0cmlidXRlKENhcmRMaXN0X0NPTlNUUy5pZEF0dHJpYnV0ZSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBkZWxldGVCdXR0b24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcihQYXNza2V5Q2FyZF9DT05TVFMuZGVsZXRlQnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxMSUVsZW1lbnQsIHByaXZhdGUgX2RvbVV0aWxzID0gZ2lneWEudXRpbHMuRE9NKSB7XG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5iaW5kSUQgPSB0aGlzLklEIHx8IFBhc3NrZXlDYXJkX0NPTlNUUy5zZWxlY3RvcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBjb250ZW50Lm1hdGNoKC97eyguKj8pfX0vZyk7XG4gICAgICAgIGNvbnN0IGVsZW1JbmRleCA9IHRoaXMuaW5kZXg7XG4gICAgICAgIGNvbnRlbnQgPSBtYXRjaGVzLnJlZHVjZSgoc3RyLCBtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG0ucmVwbGFjZSgvcGFzc2tleXMuL2csIGBwYXNza2V5c1ske2VsZW1JbmRleH1dLmApO1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKG0sIHZhbHVlKTtcbiAgICAgICAgfSwgY29udGVudCk7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIGlmICh0aGlzLmlzTmV3Q2FyZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5jbGFzc0xpc3QuYWRkKFBhc3NrZXlDYXJkX0NPTlNUUy5uZXdDYXJkQ2xhc3MpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFBhc3NrZXlDYXJkX0NPTlNUUy5uZXdDYXJkQ2xhc3MpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRFdmVudEhhbmRsZXJzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNOZXdDYXJkKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBwYXNza2V5ID0gdGhpcy5fc2NyZWVuU2V0LmRhdGEucGFzc2tleXNbdGhpcy5pbmRleF07XG4gICAgICAgIHJldHVybiAhcGFzc2tleS5sYXN0TG9naW47XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9kb21VdGlscy5hZGRFdmVudExpc3RlbmVyKHRoaXMuZGVsZXRlQnV0dG9uLCAnY2xpY2snLCB0aGlzLmRlbGV0ZVBhc3NrZXkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5fZG9tVXRpbHMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmRlbGV0ZUJ1dHRvbiwgJ2NsaWNrJywgdGhpcy5kZWxldGVQYXNza2V5KTtcbiAgICB9XG59XG5CYXNlU2NyZWVuV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShQYXNza2V5Q2FyZFdpZGdldCk7XG4iLCJpbXBvcnQge0NhcmRMaXN0V2lkZ2V0fSBmcm9tICcuLi9DYXJkTGlzdFdpZGdldCc7XG5pbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gJy4uLy4uL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IEdTRXJyb3JzID0gZ2lneWEuR1NFcnJvcnM7XG5pbXBvcnQgcGFzc2tleVNlcnZpY2UgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1Bhc3NrZXkvUGFzc2tleVNlcnZpY2UnXG5pbXBvcnQge0lQYXNza2V5fSBmcm9tICcuLi8uLi9TY3JlZW5TZXREYXRhJztcblxuZXhwb3J0IGNvbnN0IFBhc3NrZXlNYW5hZ2VyX0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJy5naWd5YS1jb21wb3NpdGUtY29udHJvbC1wYXNza2V5LW1hbmFnZXItd2lkZ2V0J1xufVxuXG5leHBvcnQgY2xhc3MgUGFzc2tleU1hbmFnZXJXaWRnZXQgZXh0ZW5kcyBDYXJkTGlzdFdpZGdldCB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBQYXNza2V5TWFuYWdlcl9DT05TVFM7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IGl0ZW1JZCA9ICdpZCc7XG5cbiAgICBwcml2YXRlIHJlZnJlc2hMaXN0ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnJlbG9hZExpc3QoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgdGhpcy5hZGRFdmVudEhhbmRsZXJzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyByZWxvYWREYXRhKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwYXNza2V5U2VydmljZS5nZXRQYXNza2V5cyh0aGlzLl9zY3JlZW5TZXQucmVnVG9rZW4pO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuY3JlZGVudGlhbHMubWFwKHRoaXMuY3JlZGVudGlhbE1hcHBlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEucGFzc2tleXMgPSBkYXRhO1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBob3N0Rm9ybSA9IHRoaXMuX3NjcmVlbi5nZXRGb3JtQnlFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KVxuICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKHJlc3BvbnNlIGFzIGFueSwgaG9zdEZvcm0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHBhc3NrZXlTZXJ2aWNlLm9uKCdwYXNza2V5UmVtb3ZlZCcsIHRoaXMucmVmcmVzaExpc3QpO1xuICAgICAgICBwYXNza2V5U2VydmljZS5vbigncGFzc2tleUFkZGVkJywgdGhpcy5yZWZyZXNoTGlzdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBwYXNza2V5U2VydmljZS5yZW1vdmUoJ3Bhc3NrZXlBZGRlZCcsIHRoaXMucmVmcmVzaExpc3QpO1xuICAgICAgICBwYXNza2V5U2VydmljZS5yZW1vdmUoJ3Bhc3NrZXlSZW1vdmVkJywgdGhpcy5yZWZyZXNoTGlzdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRWYWx1ZShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAgICAgICBpZiAoa2V5ID09PSAnTGFzdExvZ2luJyB8fCBrZXkgPT09ICdSZWdpc3RyYXRpb25EYXRlJykge1xuICAgICAgICAgICAgLy8gY29udmVydCBjIyB0aWNrcyB0byB1dGMgdGltZXN0YW1wXG4gICAgICAgICAgICBjb25zdCBUSUNLU19BVF9FUE9DSCA9IDYyMTM1NTk2ODAwMDAwMDAwMDtcbiAgICAgICAgICAgIGNvbnN0IFRJQ0tTX1BFUl9NSUxMSVNFQ09ORCA9IDEwMDAwO1xuICAgICAgICAgICAgY29uc3QgaW50VmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKE1hdGguY2VpbCgoaW50VmFsdWUgLSBUSUNLU19BVF9FUE9DSCkgLyBUSUNLU19QRVJfTUlMTElTRUNPTkQpKVxuICAgICAgICAgICAgICAgIC50b0xvY2FsZURhdGVTdHJpbmcodW5kZWZpbmVkLCB7XG4gICAgICAgICAgICAgICAgICAgIHdlZWtkYXk6ICdzaG9ydCcsXG4gICAgICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgICAgICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsXG4gICAgICAgICAgICAgICAgICAgIG1vbnRoOiAnc2hvcnQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlZGVudGlhbE1hcHBlciA9IChjcmVkKTogSVBhc3NrZXkgPT4ge1xuICAgICAgICBjcmVkLkRldmljZU5hbWUgPSBjcmVkLkRldmljZU5hbWUgfHwgYCR7Y3JlZC5QbGF0Zm9ybX0gLyAke2NyZWQuQnJvd3Nlcn1gXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjcmVkKS5yZWR1Y2UoKGMsIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FtZWxDYXNlS2V5ID0ga2V5LmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsga2V5LnNsaWNlKDEpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5jLFxuICAgICAgICAgICAgICAgIFtjYW1lbENhc2VLZXldOiB0aGlzLmdldFZhbHVlKGtleSwgY3JlZFtrZXldKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwge30gYXMgSVBhc3NrZXkpO1xuICAgIH1cbn1cblxuQmFzZVNjcmVlbldpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoUGFzc2tleU1hbmFnZXJXaWRnZXQpO1xuIiwiaW1wb3J0IHtQYXNza2V5QmFzZVdpZGdldH0gZnJvbSAnLi9QYXNza2V5QmFzZVdpZGdldCc7XG5pbXBvcnQge0RlZXBGcmVlemV9IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB7QmFzZVNjcmVlbldpZGdldH0gZnJvbSAnLi4vQmFzZVNjcmVlbldpZGdldCc7XG5pbXBvcnQgcGFzc2tleVNlcnZpY2UgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1Bhc3NrZXkvUGFzc2tleVNlcnZpY2UnO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcblxuZXhwb3J0IGNvbnN0IFBhc3NrZXlSZWdpc3Rlcl9DT05TVFMgPSB7XG4gICAgc2VsZWN0b3I6ICcuZ2lneWEtY29tcG9zaXRlLWNvbnRyb2wtcGFzc2tleS1yZWdpc3Rlci13aWRnZXQnLFxuICAgIGJlaGF2aW9yQXR0cjogJ2RhdGEtcGFzc2tleS1iZWhhdmlvcidcbn07XG5cbmV4cG9ydCBjb25zdCBQYXNza2V5UmVnaXN0ZXJNb2RlID0ge1xuICAgIENvbm5lY3Q6ICdjb25uZWN0JyxcbiAgICBTdWJtaXQ6ICdzdWJtaXQnXG59XG5cbkRlZXBGcmVlemUoUGFzc2tleVJlZ2lzdGVyX0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgUGFzc2tleVJlZ2lzdGVyV2lkZ2V0IGV4dGVuZHMgUGFzc2tleUJhc2VXaWRnZXQge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUGFzc2tleVJlZ2lzdGVyX0NPTlNUUztcblxuICAgIHByb3RlY3RlZCBnZXQgYmVoYXZpb3IoKTogc3RyaW5nICB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoUGFzc2tleVJlZ2lzdGVyX0NPTlNUUy5iZWhhdmlvckF0dHIpIHx8IFBhc3NrZXlSZWdpc3Rlck1vZGUuQ29ubmVjdDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgb25DbGljaygpIHtcbiAgICAgICAgc3VwZXIub25DbGljaygpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW4uZGltU2NyZWVuKCk7XG4gICAgICAgICAgICBjb25zdCB7bGFuZywgcmVnU291cmNlLCBjb250ZXh0LCBjaWQsIHNlc3Npb25FeHBpcmF0aW9uLCBzb3VyY2V9ID0gdGhpcy5fc2NyZWVuU2V0LnBhcmFtcztcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcGFzc2tleVNlcnZpY2UucmVnaXN0ZXJQYXNza2V5KHtcbiAgICAgICAgICAgICAgICByZWdUb2tlbjogdGhpcy5fc2NyZWVuU2V0Py5kYXRhPy5yZWdUb2tlbixcbiAgICAgICAgICAgICAgICBhVG9rZW46IHRoaXMuX3NjcmVlblNldD8uZGF0YT8uYVRva2VuLFxuICAgICAgICAgICAgICAgIGxhbmcsIHJlZ1NvdXJjZSwgY29udGV4dCwgY2lkLCBzZXNzaW9uRXhwaXJhdGlvbiwgc291cmNlXG4gICAgICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuYmVoYXZpb3IgPT09IFBhc3NrZXlSZWdpc3Rlck1vZGUuU3VibWl0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaG9zdEZvcm0gPSB0aGlzLl9zY3JlZW4uZ2V0Rm9ybUJ5RWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2NyZWVuU2V0Lm9uU2NyZWVuUmVzcG9uc2UocmVzcG9uc2UsIGhvc3RGb3JtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoJ3Bhc3NrZXlfcmVnaXN0ZXJfc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoJ3N1Y2Nlc3MnLCBtZXNzYWdlKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5lcnJvck1lc3NhZ2UgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dChyZXNwb25zZS5lcnJvckNvZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoJ2Vycm9yJywgcmVzcG9uc2UuZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fc2NyZWVuU2V0LmdldEVycm9yTWVzc2FnZU5ldyhlLmVycm9yQ29kZSk7XG4gICAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCdlcnJvcicsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW4uZGlzcGF0Y2hFdmVudCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgLi4uZSxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuLnVuZGltU2NyZWVuKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJhc2VTY3JlZW5XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFBhc3NrZXlSZWdpc3RlcldpZGdldCk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQge0F1dGhNZXRob2RfQ09OU1RTLCBCYXNlQXV0aE1ldGhvZFdpZGdldH0gZnJvbSAnLi4vQmFzZUF1dGhNZXRob2RXaWRnZXQnO1xuaW1wb3J0IGFjY291bnRzID0gZ2lneWEuYWNjb3VudHM7XG5pbXBvcnQge0Jhc2VGb3JtV2lkZ2V0fSBmcm9tICcuLi9CYXNlRm9ybVdpZGdldCc7XG5cbmV4cG9ydCB2YXIgQXV0aE1ldGhvZFBhc3N3b3JkX0NPTlNUUyA9IHtcbiAgLi4uQXV0aE1ldGhvZF9DT05TVFMsXG4gIHNlbGVjdG9yOiAnLmdpZ3lhLWxpbmstYWNjb3VudHMtZm9ybSAuZ2lneWEtYXV0aC1tZXRob2RbZGF0YS1hdXRoLW1ldGhvZD1cInNpdGVcIl0nLFxufTtcbkRlZXBGcmVlemUoQXV0aE1ldGhvZFBhc3N3b3JkX0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgUGFzc3dvcmRBdXRoTWV0aG9kV2lkZ2V0IGV4dGVuZHMgQmFzZUF1dGhNZXRob2RXaWRnZXQge1xuICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IEF1dGhNZXRob2RQYXNzd29yZF9DT05TVFM7XG5cbiAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KSB7XG4gICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgdGhpcy5leHBhbmQoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZWFkb25seSBmaWVsZE5hbWUgPSAnc2l0ZVBhc3N3b3JkJztcblxuICBwcm90ZWN0ZWQgZ2V0IHN1Ym1pdEFwaSgpOiBGdW5jdGlvbiB7XG4gICAgcmV0dXJuIGFjY291bnRzLmxvZ2luO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBzdWJtaXRBcGlQYXJhbXMoKSB7XG4gICAgcmV0dXJuIGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbXG4gICAgICB0aGlzLmRhdGFQcm92aWRlci5kZWZhdWx0U3VibWl0UGFyYW1zLFxuICAgICAgdGhpcy5kYXRhUHJvdmlkZXIuZ2V0UGFzc3dvcmRMb2dpblBhcmFtcyh0aGlzLnBhc3N3b3JkVmFsdWUpLFxuICAgIF0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcGFzc3dvcmRWYWx1ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmZvcm1GaWVsZD8uZ2V0VmFsdWUoKSBhcyBzdHJpbmc7XG4gIH1cbn1cblxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFBhc3N3b3JkQXV0aE1ldGhvZFdpZGdldCk7XG4iLCJpbXBvcnQgeyBJU2NyZWVuU2V0VGVtcGxhdGVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0IHsgSU1hcCwgRGVlcEZyZWV6ZSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0IHsgQmFzZUZvcm1XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7IElGb3JtSW5wdXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xuaW1wb3J0IHsgQmFzZUZvcm0gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcblxuZXhwb3J0IGludGVyZmFjZSBJRGlzcGxheU1vZGUge1xuICAgIGhhc01pbmltdW1SZXF1aXJlbWVudHM6IGJvb2xlYW47XG4gICAgaGFzU3RyZW5ndGhNZXRlcjogYm9vbGVhbjtcbiAgICBnZXRUZW1wbGF0ZTogKHRlbXBsYXRlczogSVNjcmVlblNldFRlbXBsYXRlcykgPT4gc3RyaW5nO1xufVxuZXhwb3J0IHZhciBEaXNwbGF5TW9kZXM6IElNYXA8SURpc3BsYXlNb2RlPiA9IHtcbiAgICBwb2xpY3k6IHtcbiAgICAgICAgaGFzTWluaW11bVJlcXVpcmVtZW50czogdHJ1ZSxcbiAgICAgICAgaGFzU3RyZW5ndGhNZXRlcjogZmFsc2UsXG4gICAgICAgIGdldFRlbXBsYXRlOiB0ZW1wbGF0ZXMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlcy5wYXNzd29yZFN0cmVuZ3RoX21pbmltdW1SZXF1aXJlbWVudHM7XG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBtZXRlcjoge1xuICAgICAgICBoYXNNaW5pbXVtUmVxdWlyZW1lbnRzOiBmYWxzZSxcbiAgICAgICAgaGFzU3RyZW5ndGhNZXRlcjogdHJ1ZSxcbiAgICAgICAgZ2V0VGVtcGxhdGU6IHRlbXBsYXRlcyA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVzLnBhc3N3b3JkU3RyZW5ndGhfc3RyZW5ndGhNZXRlcjtcbiAgICAgICAgfSxcbiAgICB9LFxuICAgIGNvbWJpbmVkOiB7XG4gICAgICAgIGhhc01pbmltdW1SZXF1aXJlbWVudHM6IHRydWUsXG4gICAgICAgIGhhc1N0cmVuZ3RoTWV0ZXI6IHRydWUsXG4gICAgICAgIGdldFRlbXBsYXRlOiB0ZW1wbGF0ZXMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlcy5wYXNzd29yZFN0cmVuZ3RoX3N0cmVuZ3RoTWV0ZXIgKyB0ZW1wbGF0ZXMucGFzc3dvcmRTdHJlbmd0aF9taW5pbXVtUmVxdWlyZW1lbnRzO1xuICAgICAgICB9LFxuICAgIH0sXG59O1xuZXhwb3J0IGVudW0gQnViYmxlT3JpZW50YXRpb25zIHtcbiAgICByaWdodCwgLy8gZmlyc3QgaW4gb3JkZXIgZm9yIGl0IHRvIGJlIHRoZSBkZWZhdWx0ICh2YWx1ZSAwKVxuICAgIGxlZnQsXG4gICAgdXAsXG4gICAgZG93bixcbiAgICBub25lLFxufVxuRGVlcEZyZWV6ZShCdWJibGVPcmllbnRhdGlvbnMpO1xuZXhwb3J0IHZhciBQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0X0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJ2Rpdi5naWd5YS1wYXNzd29yZC1zdHJlbmd0aCcsXG4gICAgYnViYmxlQ2xhc3M6ICdnaWd5YS1wYXNzd29yZC1zdHJlbmd0aC1idWJibGUnLFxuICAgIG1vYmlsZUNsYXNzOiAnbW9iaWxlLWJ1YmJsZScsXG4gICAgZGVza3RvcENsYXNzOiAnZGVza3RvcC1idWJibGUnLFxuICAgIGRpc3BsYXlNb2RlOiAnZGF0YS1kaXNwbGF5LW1vZGUnLFxuICAgIGJ1YmJsZTogJ2RhdGEtb24tZm9jdXMtYnViYmxlJyxcbiAgICBidWJibGVPcmllbnRhdGlvbjogJ2RhdGEtYnViYmxlLW9yaWVudGF0aW9uJyxcbn07XG5EZWVwRnJlZXplKFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgICBwdWJsaWMgX3Bhc3N3b3JkRmllbGQ6IElGb3JtSW5wdXQ7XG4gICAgcHJpdmF0ZSByZWFkb25seSBvcmlnaW5hbERpc3BsYXk6IHN0cmluZztcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZuS2V5VXA6ICgpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSByZWFkb25seSBnZXRUZXh0OiAodDogc3RyaW5nKSA9PiBzdHJpbmc7XG4gICAgcHJpdmF0ZSByZWFkb25seSBvbkJsdXI6ICgpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSByZWFkb25seSBvbkZvY3VzOiAoKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgb25TY3JvbGw6ICgpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBkaXNwbGF5TW9kZTogSURpc3BsYXlNb2RlO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdGVtcGxhdGU6IHN0cmluZztcbiAgICBwcml2YXRlIHJlYWRvbmx5IGlzQnViYmxlOiBib29sZWFuO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgYnViYmxlSUQ6IHN0cmluZztcbiAgICBwcml2YXRlIGJ1YmJsZU9yaWVudGF0aW9uOiBCdWJibGVPcmllbnRhdGlvbnM7XG5cbiAgICBwcml2YXRlIG9yaWdpbmFsQ2xhc3M6IHN0cmluZztcbiAgICBwcml2YXRlIG9yaWdpbmFsU3R5bGU6IHN0cmluZztcbiAgICBwcml2YXRlIGlzQnViYmxlVmlzaWJsZTogYm9vbGVhbjtcbiAgICBwcml2YXRlIGJ1YmJsZUxhc3RUb3A6IHN0cmluZyA9ICcnO1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUGFzc3dvcmRTdHJlbmd0aFdpZGdldF9DT05TVFM7XG5cbiAgICBjb25zdHJ1Y3Rvcihmb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKGZvcm0sIGVsKTtcblxuICAgICAgICB0aGlzLm9yaWdpbmFsQ2xhc3MgPSBlbC5jbGFzc05hbWU7XG4gICAgICAgIHRoaXMub3JpZ2luYWxTdHlsZSA9IGVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgICAgICB0aGlzLm9yaWdpbmFsRGlzcGxheSA9IGVsLnN0eWxlLmRpc3BsYXk7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgLy8gQXV0b21hdGljYWxseSBib3VuZCB0byB0aGUgZm9ybSBwYXNzd29yZCBmaWVsZFxuICAgICAgICB0aGlzLl9wYXNzd29yZEZpZWxkID0gZm9ybS5nZXRGaWVsZCgnbmV3UGFzc3dvcmQnKSB8fCBmb3JtLmdldEZpZWxkKCdwYXNzd29yZCcpO1xuXG4gICAgICAgIGlmICghdGhpcy5fcGFzc3dvcmRGaWVsZCkge1xuICAgICAgICAgICAgdGhpcy53YXJuKFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTLnNlbGVjdG9yICsgXCIncyBmb3JtIGlzIG1pc3NpbmcgcGFzc3dvcmQgZmllbGQgdG8gYm91bmQgdG9cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldFRleHQgPSB0ID0+IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KHQpO1xuXG4gICAgICAgIHRoaXMuZGlzcGxheU1vZGUgPSBEaXNwbGF5TW9kZXNbZWwuZ2V0QXR0cmlidXRlKFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTLmRpc3BsYXlNb2RlKV0gfHwgRGlzcGxheU1vZGVzWydjb21iaW5lZCddO1xuXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBnaWd5YS51dGlscy50ZW1wbGF0ZXMuZmlsbCh0aGlzLl9zY3JlZW5TZXQuZ2V0VGVtcGxhdGVzKCkucGFzc3dvcmRTdHJlbmd0aCwge1xuICAgICAgICAgICAgY29udGVudDogdGhpcy5kaXNwbGF5TW9kZS5nZXRUZW1wbGF0ZSh0aGlzLl9zY3JlZW5TZXQuZ2V0VGVtcGxhdGVzKCkpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmlzQnViYmxlID0gQm9vbGVhbihlbC5nZXRBdHRyaWJ1dGUoUGFzc3dvcmRTdHJlbmd0aFdpZGdldF9DT05TVFMuYnViYmxlKSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNCdWJibGUpIHtcbiAgICAgICAgICAgIHRoaXMuYnViYmxlT3JpZW50YXRpb24gPSBCdWJibGVPcmllbnRhdGlvbnNbZWwuZ2V0QXR0cmlidXRlKFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTLmJ1YmJsZU9yaWVudGF0aW9uKV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuYnViYmxlT3JpZW50YXRpb24gPT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlT3JpZW50YXRpb24gPSB0aGlzLl9zY3JlZW5TZXQuaXNNb2RhbCA/IEJ1YmJsZU9yaWVudGF0aW9ucy5sZWZ0IDogQnViYmxlT3JpZW50YXRpb25zLnVwO1xuXG4gICAgICAgICAgICB0aGlzLmJ1YmJsZUlEID0gdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5jb250YWluZXJJRCArICdfYnViYmxlJztcbiAgICAgICAgICAgIHRoaXMub25CbHVyID0gKCkgPT4gdGhpcy5oaWRlQnViYmxlKCk7XG4gICAgICAgICAgICB0aGlzLm9uRm9jdXMgPSAoKSA9PiAgdGhpcy51cGRhdGVCdWJibGVEaXNwbGF5KCk7XG4gICAgICAgICAgICB0aGlzLm9uU2Nyb2xsID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhbGxvb25EaXYgPSBnaWd5YS5nbG9iYWxbJ2RpdkdNQmFsbG9vbiddO1xuICAgICAgICAgICAgICAgIGlmIChiYWxsb29uRGl2ICYmIGJhbGxvb25EaXYuc3R5bGUudG9wID09IHRoaXMuYnViYmxlTGFzdFRvcCkgdGhpcy5yZWZyZXNoQnViYmxlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICB0aGlzLmZuS2V5VXAgPSAoKSA9PiB0aGlzLnVwZGF0ZUJ1YmJsZURpc3BsYXkoKTtcblxuICAgICAgICB0aGlzLl9wYXNzd29yZEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoICdrZXl1cCcsIHRoaXMuZm5LZXlVcCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNCdWJibGUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Bhc3N3b3JkRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLm9uRm9jdXMpO1xuICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5vbkJsdXIpO1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLm9uU2Nyb2xsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NjcmVlblNldC5vblJlZnJlc2hFeHRlcm5hbENvbXBvbmVudHNFdmVudCgpLmFkZCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hCdWJibGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1Bhc3N3b3JkSW5wdXRFbXB0eSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICFCb29sZWFuKHRoaXMuX3Bhc3N3b3JkRmllbGQuZ2V0VmFsdWUoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua1RlbXBsYXRlKCkge1xuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwpO1xuXG4gICAgICAgIGlmICh0aGlzLl9wYXNzd29yZEZpZWxkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0J1YmJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Bhc3N3b3JkRmllbGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMub25CbHVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXNzd29yZEZpZWxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5vbkZvY3VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGlkZUJ1YmJsZSgpO1xuICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRGaWVsZC5yZW1vdmVFdmVudExpc3RlbmVyKCAna2V5dXAnLCB0aGlzLmZuS2V5VXApO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIudW5saW5rVGVtcGxhdGUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dCdWJibGUoKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIGNvbnN0IGJ1YmJsZVcgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5vZmZzZXRXaWR0aCB8fCAyNTA7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNvbnN0IGJ1YmJsZUNsYXNzZXMgPVxuICAgICAgICAgICAgUGFzc3dvcmRTdHJlbmd0aFdpZGdldF9DT05TVFMuYnViYmxlQ2xhc3MgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICh0aGlzLl9zY3JlZW5TZXQuaXNNb2JpbGVVSSA/IFBhc3N3b3JkU3RyZW5ndGhXaWRnZXRfQ09OU1RTLm1vYmlsZUNsYXNzIDogUGFzc3dvcmRTdHJlbmd0aFdpZGdldF9DT05TVFMuZGVza3RvcENsYXNzKTtcblxuICAgICAgICBjb25zdCBzdHlsZUNhbGN1bGF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc3R5bGVDYWxjdWxhdG9yLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJykpO1xuICAgICAgICAgICAgaWYgKHN0eWxlQ2FsY3VsYXRvci5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHN0eWxlQ2FsY3VsYXRvci5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cbiAgICAgICAgY29uc3QgYnViYmxlSFRNTCA9XG4gICAgICAgICAgICAnPGRpdiBpZD1cIicgK1xuICAgICAgICAgICAgdGhpcy5idWJibGVJRCArXG4gICAgICAgICAgICAnX2NvbnRlbnRcIiBjbGFzcz1cIicgK1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuY2xhc3NOYW1lICtcbiAgICAgICAgICAgICdcIiBzdHlsZT1cIicgK1xuICAgICAgICAgICAgc3R5bGVDYWxjdWxhdG9yLmdldEF0dHJpYnV0ZSgnc3R5bGUnKSArXG4gICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICB0aGlzLmdldFBhc3N3b3JkQnViYmxlQ29udGVudCgpICtcbiAgICAgICAgICAgICc8L2Rpdj4nO1xuXG4gICAgICAgIGdpZ3lhLmdsb2JhbC5wdXRHTUJhbGxvb25OZXh0VG8oXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFzc3dvcmRGaWVsZC5pbnN0YW5jZUVsZW1lbnQsXG4gICAgICAgICAgICAgICAgYnViYmxlSFRNTCxcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIGJ1YmJsZVcsXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIHRoaXMuYnViYmxlSUQsXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEJ1YmJsZU9yaWVudGF0aW9ucygpLFxuICAgICAgICAgICAgICAgIGJ1YmJsZUNsYXNzZXMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLmlzQnViYmxlVmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmJ1YmJsZUxhc3RUb3AgPSBnaWd5YS5nbG9iYWxbJ2RpdkdNQmFsbG9vbiddLnN0eWxlLnRvcDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEJ1YmJsZU9yaWVudGF0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgb3JpZW50YXRpb25zID0gW0J1YmJsZU9yaWVudGF0aW9uc1t0aGlzLmJ1YmJsZU9yaWVudGF0aW9uXV07XG4gICAgICAgIGxldCBmaXJzdCA9IG9yaWVudGF0aW9uc1swXTtcbiAgICAgICAgY29uc3QgdXAgPSBCdWJibGVPcmllbnRhdGlvbnNbQnViYmxlT3JpZW50YXRpb25zLnVwXTtcbiAgICAgICAgY29uc3QgZG93biA9IEJ1YmJsZU9yaWVudGF0aW9uc1tCdWJibGVPcmllbnRhdGlvbnMuZG93bl07XG5cbiAgICAgICAgLy8gYWRkIG9yIHNldCB1cCBvcmllbnRhdGlvblxuICAgICAgICBpZiAodHlwZW9mIGZpcnN0ID09PSAndW5kZWZpbmVkJykgZmlyc3QgPSB1cDtcbiAgICAgICAgZWxzZSBpZiAoZmlyc3QgIT09IHVwKSBvcmllbnRhdGlvbnMucHVzaCh1cCk7XG5cbiAgICAgICAgLy8gYWRkIGRvd24gb3JpZW50YXRpb25cbiAgICAgICAgaWYgKGZpcnN0ICE9PSBkb3duKSBvcmllbnRhdGlvbnMucHVzaChkb3duKTtcblxuICAgICAgICByZXR1cm4gb3JpZW50YXRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZUJ1YmJsZSgpIHtcbiAgICAgICAgZ2lneWEuZ2xvYmFsLnJlbW92ZUdNQmFsbG9vbigpO1xuICAgICAgICB0aGlzLmlzQnViYmxlVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGFzc3dvcmRCdWJibGVDb250ZW50KCkge1xuICAgICAgICBjb25zdCBpdGVtOiBJSXRlbSA9IHtcbiAgICAgICAgICAgIFRFWFQ6IHRoaXMuZ2V0VGV4dCwgLy8gVE9ETyByZW1vdmUgYWZ0ZXIgYXNraW5nIERvclxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9QYXNzU3RyZW5ndGggPSBnZXRQYXNzd29yZFN0cmVuZ3RoRGF0YShTdHJpbmcodGhpcy5fcGFzc3dvcmRGaWVsZC5nZXRWYWx1ZSgpKSk7XG4gICAgICAgIGNvbnN0IGFwaURhdGEgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpO1xuXG4gICAgICAgIGxldCBvQ29tcGxleGl0eSA9IGFwaURhdGEuZ2V0UG9saWNpZXMgPyBhcGlEYXRhLmdldFBvbGljaWVzLnBhc3N3b3JkQ29tcGxleGl0eSA6IG51bGw7XG5cbiAgICAgICAgaWYgKCFvQ29tcGxleGl0eSkgb0NvbXBsZXhpdHkgPSB7fTtcbiAgICAgICAgb0NvbXBsZXhpdHkubWluTGVuZ3RoID0gb0NvbXBsZXhpdHkubWluTGVuZ3RoIHx8IDA7XG4gICAgICAgIG9Db21wbGV4aXR5Lm1pbkNoYXJHcm91cHMgPSBvQ29tcGxleGl0eS5taW5DaGFyR3JvdXBzIHx8IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheU1vZGUuaGFzU3RyZW5ndGhNZXRlcikge1xuICAgICAgICAgICAgbGV0IHNjb3JlID0gMDtcbiAgICAgICAgICAgIGxldCBzY29yZVRleHRJRCA9ICd0b29fd2Vhayc7XG5cbiAgICAgICAgICAgIGlmIChpc1Bhc3N3b3JkU3RyZW5ndGhWYWxpZChTdHJpbmcodGhpcy5fcGFzc3dvcmRGaWVsZC5nZXRWYWx1ZSgpKSwgb1Bhc3NTdHJlbmd0aCwgb0NvbXBsZXhpdHkpKSB7XG4gICAgICAgICAgICAgICAgc2NvcmVUZXh0SUQgPSAnd2Vhayc7XG5cbiAgICAgICAgICAgICAgICBpZiAob1Bhc3NTdHJlbmd0aC5sZW5ndGggPiA0KSBzY29yZSArPSA0MDtcbiAgICAgICAgICAgICAgICBpZiAob1Bhc3NTdHJlbmd0aC5sZW5ndGggPiA1KSBzY29yZSArPSAyMTsgLy8gY29tYmluZXMgc2NvcmUgPSA2MVxuICAgICAgICAgICAgICAgIGlmIChvUGFzc1N0cmVuZ3RoLmxlbmd0aCA+IDcpIHNjb3JlICs9IDE4OyAvLyBjb21iaW5lcyBzY29yZSA9IDc5XG5cbiAgICAgICAgICAgICAgICBpZiAob1Bhc3NTdHJlbmd0aC5jaGFyR3JvdXBzID4gMSkgc2NvcmUgKz0gMjE7XG4gICAgICAgICAgICAgICAgaWYgKG9QYXNzU3RyZW5ndGguY2hhckdyb3VwcyA+IDIpIHNjb3JlICs9IDE3OyAvLyBjb21iaW5lcyBzY29yZSArPSAzOFxuICAgICAgICAgICAgICAgIGlmIChvUGFzc1N0cmVuZ3RoLmNoYXJHcm91cHMgPiAzKSBzY29yZSArPSAyMzsgLy8gY29tYmluZXMgc2NvcmUgKz0gNjFcblxuICAgICAgICAgICAgICAgIGlmIChzY29yZSA+IDYwKSBzY29yZVRleHRJRCA9ICdmYWlyJztcbiAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiA4MCkgc2NvcmVUZXh0SUQgPSAnc3Ryb25nJztcbiAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPiAxMDApIHNjb3JlVGV4dElEID0gJ3Zlcnlfc3Ryb25nJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaXRlbS5zY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgaXRlbS5zY29yZUNsYXNzID0gJ2dpZ3lhLXBhc3N3b3JkU3RyZW5ndGgtJyArIHNjb3JlVGV4dElEO1xuICAgICAgICAgICAgaXRlbS5zY29yZVRleHQgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dChzY29yZVRleHRJRCk7XG4gICAgICAgICAgICBpdGVtLmJhckluZGljYXRvckNsYXNzID0gJ2dpZ3lhLXBhc3N3b3JkU3RyZW5ndGgtYmFyLScgKyBzY29yZVRleHRJRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRpc3BsYXlNb2RlLmhhc01pbmltdW1SZXF1aXJlbWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFyUmVxdWlyZW1lbnRzID0gW107XG5cbiAgICAgICAgICAgIGlmIChvQ29tcGxleGl0eS5taW5MZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWluTGVuZ3RoVGV4dCA9IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdudW1fY2hhcmFjdGVyc190b3RhbCcsICclbnVtJywgb0NvbXBsZXhpdHkubWluTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBpZiAobWluTGVuZ3RoVGV4dCkgYXJSZXF1aXJlbWVudHMucHVzaChtaW5MZW5ndGhUZXh0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9Db21wbGV4aXR5Lm1pbkNoYXJHcm91cHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWluQ2hhckdyb3Vwc1RleHQgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgnbnVtX29mX3RoZV9mb2xsb3dpbmdfZ3JvdXBzJywgJyVudW0nLCBvQ29tcGxleGl0eS5taW5DaGFyR3JvdXBzKTtcbiAgICAgICAgICAgICAgICBpZiAobWluQ2hhckdyb3Vwc1RleHQpIGFyUmVxdWlyZW1lbnRzLnB1c2gobWluQ2hhckdyb3Vwc1RleHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpdGVtLnJlcXVpcmVtZW50cyA9ICcnO1xuICAgICAgICAgICAgaWYgKGFyUmVxdWlyZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UmVxID0gYXJSZXF1aXJlbWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgaXRlbS5yZXF1aXJlbWVudHMgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCgncGFzc3dvcmRfbXVzdF9jb250YWluX2F0X2xlYXN0JykgKyAnICc7XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJSZXF1aXJlbWVudHMubGVuZ3RoID4gMCkgaXRlbS5yZXF1aXJlbWVudHMgKz0gYXJSZXF1aXJlbWVudHMuam9pbignLCAnKSArICcgJyArIHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdhbmQnKSArICcgJztcblxuICAgICAgICAgICAgICAgIGl0ZW0ucmVxdWlyZW1lbnRzICs9IGxhc3RSZXE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtLnJlcXVpcmVtZW50cyA9IGdpZ3lhLnBsdWdpblV0aWxzLnRleHQuZml4VGV4dFdpZG93cyhpdGVtLnJlcXVpcmVtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMudGVtcGxhdGVzLmZpbGwodGhpcy50ZW1wbGF0ZSwgaXRlbSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVCdWJibGVEaXNwbGF5KCkge1xuICAgICAgICBpZighdGhpcy5pc0J1YmJsZVZpc2libGUgJiYgIXRoaXMuaXNQYXNzd29yZElucHV0RW1wdHkoKSl7XG4gICAgICAgICAgICB0aGlzLnNob3dCdWJibGUoKTtcbiAgICAgICAgfWVsc2UgaWYodGhpcy5pc0J1YmJsZVZpc2libGUgJiYgIXRoaXMuaXNQYXNzd29yZElucHV0RW1wdHkoKSl7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ1YmJsZUNvbnRlbnQoKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmhpZGVCdWJibGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlQnViYmxlQ29udGVudCgpe1xuICAgICAgICBsZXQgaHRtbCA9IHRoaXMuZ2V0UGFzc3dvcmRCdWJibGVDb250ZW50KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNCdWJibGUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuYnViYmxlSUQgKyAnX2NvbnRlbnQnKS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gaW5saW5lIGRpc3BsYXlcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gdGhpcy5vcmlnaW5hbERpc3BsYXk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHN1cGVyLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XG4gICAgICAgIGlmICh0aGlzLmlzQnViYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmJ1YmJsZU9yaWVudGF0aW9uID0gQnViYmxlT3JpZW50YXRpb25zW3RoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0X0NPTlNUUy5idWJibGVPcmllbnRhdGlvbildO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmJ1YmJsZU9yaWVudGF0aW9uID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICB0aGlzLmJ1YmJsZU9yaWVudGF0aW9uID0gdGhpcy5fc2NyZWVuU2V0LmlzTW9kYWwgPyBCdWJibGVPcmllbnRhdGlvbnMubGVmdCA6IEJ1YmJsZU9yaWVudGF0aW9ucy51cDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZWZyZXNoQnViYmxlKCkge1xuICAgICAgICBpZiAodGhpcy5pc0J1YmJsZVZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0J1YmJsZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFBhc3N3b3JkU3RyZW5ndGhXaWRnZXQpO1xuaW50ZXJmYWNlIElJdGVtIHtcbiAgICBURVhUOiBGdW5jdGlvbjsgLy8gVE9ETyB3aHkgZG8gd2UgbmVlZCB0aGlzP1xuICAgIHNjb3JlPzogbnVtYmVyO1xuICAgIHNjb3JlQ2xhc3M/OiBzdHJpbmc7XG4gICAgc2NvcmVUZXh0Pzogc3RyaW5nO1xuICAgIGJhckluZGljYXRvckNsYXNzPzogc3RyaW5nO1xuICAgIHJlcXVpcmVtZW50cz86IHN0cmluZztcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSVBhc3N3b3JkU3RyZW5ndGgge1xuICAgIGxvd2VyOiBudW1iZXI7XG4gICAgdXBwZXI6IG51bWJlcjtcbiAgICBkaWdpdHM6IG51bWJlcjtcbiAgICBzcGVjaWFsQ2hhcnM6IG51bWJlcjtcbiAgICBsZW5ndGg6IG51bWJlcjtcbiAgICBjaGFyR3JvdXBzOiBudW1iZXI7XG59XG5mdW5jdGlvbiBwYXNzd29yZFN0cmVuZ3RoTWF0Y2hUb051bWJlcihtYXRjaDogc3RyaW5nW10pOiBudW1iZXIge1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGgpIHJldHVybiBtYXRjaC5sZW5ndGg7XG5cbiAgICByZXR1cm4gMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXNzd29yZFN0cmVuZ3RoRGF0YShwYXNzOiBzdHJpbmcpOiBJUGFzc3dvcmRTdHJlbmd0aCB7XG4gICAgaWYgKCFwYXNzKSBwYXNzID0gJyc7XG5cbiAgICBjb25zdCBvUmVzdWx0OiBJUGFzc3dvcmRTdHJlbmd0aCA9IHtcbiAgICAgICAgbG93ZXI6IHBhc3N3b3JkU3RyZW5ndGhNYXRjaFRvTnVtYmVyKHBhc3MubWF0Y2goL1thLXpdL2cpKSxcbiAgICAgICAgdXBwZXI6IHBhc3N3b3JkU3RyZW5ndGhNYXRjaFRvTnVtYmVyKHBhc3MubWF0Y2goL1tBLVpdL2cpKSxcbiAgICAgICAgZGlnaXRzOiBwYXNzd29yZFN0cmVuZ3RoTWF0Y2hUb051bWJlcihwYXNzLm1hdGNoKC9cXGQvZykpLFxuICAgICAgICBzcGVjaWFsQ2hhcnM6IHBhc3N3b3JkU3RyZW5ndGhNYXRjaFRvTnVtYmVyKHBhc3MubWF0Y2goL1teXFxkQS1aYS16XS9nKSksXG4gICAgICAgIGxlbmd0aDogcGFzcy5sZW5ndGgsXG4gICAgICAgIGNoYXJHcm91cHM6IDAsXG4gICAgfTtcblxuICAgIGlmIChvUmVzdWx0Lmxvd2VyKSBvUmVzdWx0LmNoYXJHcm91cHMrKztcbiAgICBpZiAob1Jlc3VsdC51cHBlcikgb1Jlc3VsdC5jaGFyR3JvdXBzKys7XG4gICAgaWYgKG9SZXN1bHQuZGlnaXRzKSBvUmVzdWx0LmNoYXJHcm91cHMrKztcbiAgICBpZiAob1Jlc3VsdC5zcGVjaWFsQ2hhcnMpIG9SZXN1bHQuY2hhckdyb3VwcysrO1xuXG4gICAgcmV0dXJuIG9SZXN1bHQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIElQYXNzd29yZFN0cmVuZ3RoUG9saWN5IHtcbiAgICByZWdFeHA6IHN0cmluZztcbiAgICBtaW5Mb3dlcmNhc2U6IG51bWJlcjtcbiAgICBtaW5VcHBlcmNhc2U6IG51bWJlcjtcbiAgICBtaW5EaWdpdDogbnVtYmVyO1xuICAgIG1pblNwZWNpYWxDaGFyczogbnVtYmVyO1xuICAgIG1pbkNoYXJHcm91cHM6IG51bWJlcjtcbiAgICBtaW5MZW5ndGg6IG51bWJlcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1Bhc3N3b3JkU3RyZW5ndGhWYWxpZChwYXNzOiBzdHJpbmcsIG9QYXNzU3RyZW5ndGg6IElQYXNzd29yZFN0cmVuZ3RoLCBvQ29tcGxleGl0eVBvbGljeTogSVBhc3N3b3JkU3RyZW5ndGhQb2xpY3kpIHtcbiAgICBpZiAoIXBhc3MgfHwgIW9QYXNzU3RyZW5ndGggfHwgIW9Db21wbGV4aXR5UG9saWN5KSByZXR1cm47XG4gICAgaWYgKG9Db21wbGV4aXR5UG9saWN5LnJlZ0V4cCkge1xuICAgICAgICBjb25zdCByZWdleEZvcm1hdCA9IG5ldyBSZWdFeHAob0NvbXBsZXhpdHlQb2xpY3kucmVnRXhwKTtcbiAgICAgICAgaWYgKCFyZWdleEZvcm1hdC50ZXN0KHBhc3MpKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAhKFxuICAgICAgICBvUGFzc1N0cmVuZ3RoLmxvd2VyIDwgb0NvbXBsZXhpdHlQb2xpY3kubWluTG93ZXJjYXNlIHx8XG4gICAgICAgIG9QYXNzU3RyZW5ndGgudXBwZXIgPCBvQ29tcGxleGl0eVBvbGljeS5taW5VcHBlcmNhc2UgfHxcbiAgICAgICAgb1Bhc3NTdHJlbmd0aC5kaWdpdHMgPCBvQ29tcGxleGl0eVBvbGljeS5taW5EaWdpdCB8fFxuICAgICAgICBvUGFzc1N0cmVuZ3RoLnNwZWNpYWxDaGFycyA8IG9Db21wbGV4aXR5UG9saWN5Lm1pblNwZWNpYWxDaGFycyB8fFxuICAgICAgICBvUGFzc1N0cmVuZ3RoLmNoYXJHcm91cHMgPCBvQ29tcGxleGl0eVBvbGljeS5taW5DaGFyR3JvdXBzIHx8XG4gICAgICAgIG9QYXNzU3RyZW5ndGgubGVuZ3RoIDwgb0NvbXBsZXhpdHlQb2xpY3kubWluTGVuZ3RoXG4gICAgKTtcbn1cbiIsImltcG9ydCB7IERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7QXV0aE1ldGhvZF9DT05TVFN9IGZyb20gJy4uL0Jhc2VBdXRoTWV0aG9kV2lkZ2V0JztcbmltcG9ydCB7QmFzZUZvcm1XaWRnZXR9IGZyb20gJy4uL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7QmFzZU90cEF1dGhNZXRob2RXaWRnZXR9IGZyb20gJy4uL0Jhc2VPdHBBdXRoTWV0aG9kV2lkZ2V0JztcblxuZXhwb3J0IHZhciBQaG9uZU90cEF1dGhNZXRob2RPdHBXaWRnZXRfQ09OU1RTID0ge1xuICAuLi5BdXRoTWV0aG9kX0NPTlNUUyxcbiAgc2VsZWN0b3I6ICcuZ2lneWEtbGluay1hY2NvdW50cy1mb3JtIC5naWd5YS1hdXRoLW1ldGhvZFtkYXRhLWF1dGgtbWV0aG9kPVwicGhvbmVcIl0nLFxufTtcbkRlZXBGcmVlemUoUGhvbmVPdHBBdXRoTWV0aG9kT3RwV2lkZ2V0X0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgUGhvbmVBdXRoTWV0aG9kV2lkZ2V0IGV4dGVuZHMgQmFzZU90cEF1dGhNZXRob2RXaWRnZXQge1xuICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFBob25lT3RwQXV0aE1ldGhvZE90cFdpZGdldF9DT05TVFM7XG5cbiAgcHJvdGVjdGVkIGdldCBpbml0QXBpUGFyYW1zKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsYW5nOiB0aGlzLmRhdGFQcm92aWRlci5sYW5nLFxuICAgICAgcGh2VG9rZW46IHRoaXMuZGF0YVByb3ZpZGVyLnBob25lPy5sb29rdXAsXG4gICAgICByZWdUb2tlbjogbnVsbFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgZmllbGROYW1lID0gJ3Bob25lQ29kZSc7XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShQaG9uZUF1dGhNZXRob2RXaWRnZXQpO1xuIiwiaW1wb3J0IHtEZWVwRnJlZXplLCBlbmRzV2l0aH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQge2dldEVsZW1lbnRCeUNsYXNzTmFtZX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpzLlBsdWdpbi5UZmEvYXBwL2hlbHBlcnMvVXRpbHMnO1xuaW1wb3J0IHtUcmFuc2xhdGVkV2lkZ2V0fSBmcm9tICcuL1RyYW5zbGF0ZWRXaWRnZXQnO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHtJRm9ybVJlc3BvbnNlfSBmcm9tICcuLi9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0IHtJVmFsaWRhdGlvbkluZm99IGZyb20gJy4uL0lucHV0cy9Gb3JtSW5wdXQnO1xuaW1wb3J0IHtFcnJvclR5cGV9IGZyb20gJy4uL0Vycm9ycyc7XG5pbXBvcnQge0Jhc2VGb3JtV2lkZ2V0fSBmcm9tICcuLi9CYXNlRm9ybVdpZGdldCc7XG5pbXBvcnQge0dpZ3lhUmVzcG9uc2V9IGZyb20gJ2dpZ3lhJztcbmltcG9ydCB7RXJyb3JEaXNwbGF5RWxlbWVudH0gZnJvbSAnLi4vRXJyb3JEaXNwbGF5RWxlbWVudCc7XG5cbmNvbnN0IGtleXByZXNzVmFsaWRhdGlvbkRlbGF5ID0gMTAwMDtcblxuY29uc3QgZW51bSBQaG9uZVdpZGdldFN0YXRlIHtcbiAgTW9iaWxlID0gJ21vYmlsZScsXG4gIFZlcmlmaWNhdGlvbiA9ICd2ZXJpZmljYXRpb24nLFxuICBWZXJpZmllZCA9ICd2ZXJpZmllZCdcbn1cblxuY29uc3QgZW51bSBQaG9uZVdpZGdldENvZGVTdGF0ZSB7XG4gIFNlbnQgPSAnc2VudCcsXG4gIFJlc2VuZCA9ICdyZXNlbmQnLFxufVxuXG5leHBvcnQgY29uc3QgUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTID0ge1xuICBzZWxlY3RvcjogJy5naWd5YS1waG9uZS1udW1iZXItd2lkZ2V0JyxcbiAgdmVyaWZ5QnV0dG9uQ2xhc3M6ICdnaWd5YS1waG9uZS12ZXJpZnktYnV0dG9uJyxcbiAgcmVzZW5kQnV0dG9uQ0xhc3M6ICdnaWd5YS1waG9uZS1yZXNlbmQtYnV0dG9uJyxcbiAgcGhvbmVQcmV2aWV3Q2xhc3M6ICdnaWd5YS1waG9uZS1udW1iZXItcHJldmlldycsXG4gIHVzZUFzSWRlbnRpZmllckF0dHI6ICdkYXRhLXVzZS1hcy1pZGVudGlmaWVyJyxcbiAgY29kZUlucHV0Q2xhc3M6ICdnaWd5YS1waG9uZS1udW1iZXItdmVyaWZpY2F0aW9uLWNvZGUnLFxuICBwaG9uZUlucHV0TnVtYmVyQ2xhc3M6ICdnaWd5YS1zdWJzY3JpYmVyLXBob25lLW51bWJlci1pbnB1dCcsXG4gIGNvdW50cnlDb2RlSW5wdXRDbGFzczogJ2dpZ3lhLWNvdW50cnktY29kZS1zZWxlY3QnLFxuICB2ZXJpZmllZFN0YXR1c0NsYXNzOiAnZ2lneWEtcGhvbmUtdmVyaWZpZWQtc3RhdHVzJyxcbiAgcmVzZW5kQmxvY2tlZExhYmVsQ2xhc3M6ICdnaWd5YS1waG9uZS1yZXNlbmQtYmxvY2tlZCcsXG4gIGxpbmtEaXNhYmxlZENsYXNzOiAnZ2lneWEtZGlzYWJsZWQnLFxuICBlcnJvck1lc3NhZ2VDbGFzczogJ2dpZ3lhLWVycm9yLW1zZycsXG4gIHBsYWNlaG9sZGVyVGV4dEF0dHJpYnV0ZTogJ2RhdGEtZ2lneWEtcGxhY2Vob2xkZXInLFxuICBnaWd5YUhpZGRlbkNsYXNzOiAnZ2lneWEtaGlkZGVuJyxcbiAgcGxhY2Vob2xkZXJBdHRyaWJ1dGU6ICdwbGFjZWhvbGRlcicsXG4gIHdpZGdldFN0YXRlQXR0cmlidXRlOiAnZGF0YS13aWRnZXQtc3RhdGUnLFxuICByZXF1aXJlZEF0dHJpYnV0ZTogJ2RhdGEtd2lkZ2V0LXJlcXVpcmVkJyxcbiAgY29kZVN0YXRlQXR0cmlidXRlczogJ2RhdGEtd2lkZ2V0LWNvZGUtc3RhdGUnLFxuICBkaXNwbGF5TmFtZUF0dHJpYnV0ZTogJ2RhdGEtZGlzcGxheS1uYW1lJyxcbiAgdHJhbnNsYXRpb25LZXlBdHRyaWJ1dGU6ICdkYXRhLXRyYW5zbGF0aW9uLWtleScsXG4gIHJlc2VuZEJsb2NrRGVmYXVsdExhYmVsQXR0cjogJ2RhdGEtcmVzZW5kLWJsb2NrZWQtZGVmYXVsdC1sYWJlbCcsXG4gIHBob25lTnVtYmVyRmllbGROYW1lOiAncGhvbmVOdW1iZXInLFxuICByZXNlbmRDb3VudFRlbXBsYXRlOiAnJXNlYycsXG4gIGRpc2FibGVWZXJpZnlJblNlY29uZHM6IDEwLFxuICBvdHBDb2RlTGVuZ3RoOiA2LFxuICBkZXBzOiBbVHJhbnNsYXRlZFdpZGdldF1cbn07XG5cbkRlZXBGcmVlemUoUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTKTtcblxuZXhwb3J0IGNsYXNzIFBob25lTnVtYmVyV2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBDT05TVFMgPSBQaG9uZU51bWJlcldpZGdldF9DT05TVFM7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkZWJvdW5jZURlbGF5ID0gdGhpcy5fc2NyZWVuU2V0LnBhcmFtc1snZGVib3VuY2VEZWxheSddIHx8IGtleXByZXNzVmFsaWRhdGlvbkRlbGF5O1xuICBwcml2YXRlIHJlc2VuZFRpbWVvdXRJZDtcbiAgcHJpdmF0ZSB2VG9rZW46IHN0cmluZztcbiAgcHJpdmF0ZSBlcnJvckRpc3BsYXlFbDogRXJyb3JEaXNwbGF5RWxlbWVudDtcblxuICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgaWYgKHRoaXMuaXNJZGVudGlmaWVyTW9kZSkge1xuICAgICAgdGhpcy5pbml0KCk7XG4gICAgICB0aGlzLnN0YXJ0RmxvdygpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1bmxpbmtJbnN0YW5jZUVsZW1lbnQoKSB7XG4gICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG5cbiAgICBpZiAodGhpcy5yZXNlbmRUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlc2VuZFRpbWVvdXRJZCk7XG4gICAgfVxuXG4gICAgdGhpcy5lcnJvckRpc3BsYXlFbD8udW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gIH1cblxuICBwdWJsaWMgcmVuZGVyV2lkZ2V0KCkge1xuICAgIHN1cGVyLnJlbmRlcldpZGdldCgpO1xuICAgIGlmICh0aGlzLmlzSWRlbnRpZmllck1vZGUpIHtcbiAgICAgIHRoaXMuY29kZUlucHV0RWw/LnNldEF0dHJpYnV0ZShQaG9uZU51bWJlcldpZGdldC5DT05TVFMucGxhY2Vob2xkZXJBdHRyaWJ1dGUsIHRoaXMuY29kZVBsYWNlaG9sZGVyKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdmFsaWRhdGVBc3luYygpOiBQcm9taXNlPElWYWxpZGF0aW9uSW5mbz4ge1xuICAgIGlmICghdGhpcy5pc1JlcXVpcmVkKCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLk9LLFxuICAgICAgICB3aWRnZXQ6IHRoaXNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnZlcmlmaWVkRm9ybU51bWJlcikge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXG4gICAgICAgIHdpZGdldDogdGhpc1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5nZXRFcnJvclRleHQodGhpcy5yZXF1aXJlZEVycm9yS2V5KTtcblxuICAgIHRoaXMuc2hvd0Vycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UpO1xuXG4gICAgY29uc3QgZXJyb3I6IElWYWxpZGF0aW9uSW5mbyA9IHtcbiAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuUkVRVUlSRURfVkFMVUVfVkFMSURBVElPTl9FUlJPUixcbiAgICAgIHdpZGdldDogdGhpcyxcbiAgICAgIGVycm9yVHlwZTogRXJyb3JUeXBlLmN1c3RvbSxcbiAgICAgIGVycm9yTWVzc2FnZVxuICAgIH07XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVycm9yKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1JlcXVpcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5oYXNBdHRyaWJ1dGUoUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLnJlcXVpcmVkQXR0cmlidXRlKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdCgpIHtcbiAgICB0aGlzLmFkZEJ1dHRvbkhhbmRsZXIodGhpcy5waG9uZVByZXZpZXdFbCwgKCkgPT4gdGhpcy5zaG93UGhvbmVOdW1iZXJTdGVwKHRydWUpKTtcbiAgICB0aGlzLmFkZERvbUV2ZW50TGlzdGVuZXIodGhpcy5jb2RlSW5wdXRFbCwgJ2tleXVwJywgIGdpZ3lhLnV0aWxzLmZ1bmN0aW9ucy5kZWJvdW5jZSgoKSA9PiB0aGlzLm9uQ29kZUlucHV0Q2hhbmdlKCksIHRoaXMuZGVib3VuY2VEZWxheSkpO1xuICAgIHRoaXMuYWRkRG9tRXZlbnRMaXN0ZW5lcih0aGlzLnBob25lSW5wdXRFbCwgJ2tleXVwJywgZ2lneWEudXRpbHMuZnVuY3Rpb25zLmRlYm91bmNlKCgpID0+IHRoaXMub25QaG9uZUlucHV0Q2hhbmdlKCksIHRoaXMuZGVib3VuY2VEZWxheSkpO1xuICAgIHRoaXMuYWRkRG9tRXZlbnRMaXN0ZW5lcih0aGlzLmNvdW50cnlDb2RlRWwsICdjaGFuZ2UnLCAoKSA9PiB0aGlzLm9uUGhvbmVJbnB1dENoYW5nZSgpKTtcblxuICAgIHRoaXMuZXJyb3JEaXNwbGF5RWwgPSBuZXcgRXJyb3JEaXNwbGF5RWxlbWVudCh0aGlzLmVycm9yTWVzc2FnZUVsLCB0aGlzLl9zY3JlZW4pO1xuICAgIHRoaXMuZXJyb3JEaXNwbGF5RWwubGlua0luc3RhbmNlRWxlbWVudCh0aGlzLl9zY3JlZW4uaW5zdGFuY2VFbGVtZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhcnRGbG93KCkge1xuICAgIGlmICh0aGlzLmFjY291bnRQaG9uZU51bWJlcikge1xuICAgICAgdGhpcy5zaG93RXhpc3RpbmdQaG9uZU51bWJlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3dQaG9uZU51bWJlclN0ZXAoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhpZGVWZXJpZmllZE1lc3NhZ2UoKSB7XG4gICAgY29uc3QgbWVzc2FnZUVsOiBIVE1MRWxlbWVudCA9IHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke1Bob25lTnVtYmVyV2lkZ2V0X0NPTlNUUy52ZXJpZmllZFN0YXR1c0NsYXNzfWApO1xuICAgIGlmIChtZXNzYWdlRWwpIHtcbiAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudChtZXNzYWdlRWwsIFBob25lTnVtYmVyV2lkZ2V0X0NPTlNUUy5naWd5YUhpZGRlbkNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBpc0lkZW50aWZpZXJNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLnVzZUFzSWRlbnRpZmllckF0dHIpID09PSAndHJ1ZSc7XG4gIH1cblxuICBwcml2YXRlIHNob3dQaG9uZU51bWJlclN0ZXAoZm9jdXMgPSBmYWxzZSkge1xuICAgIHRoaXMuc3dpdGNoVG9TdGF0ZShQaG9uZVdpZGdldFN0YXRlLk1vYmlsZSk7XG4gICAgdGhpcy50b2dnbGVWZXJpZnkoKTtcbiAgICBpZiAoZm9jdXMpIHtcbiAgICAgIHRoaXMuY291bnRyeUNvZGVFbC5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc2hvd1ZlcmlmaWNhdGlvblN0ZXAoKSB7XG4gICAgdGhpcy5zd2l0Y2hUb1N0YXRlKFBob25lV2lkZ2V0U3RhdGUuVmVyaWZpY2F0aW9uKTtcbiAgICB0aGlzLmVuYWJsZUNvZGVJbnB1dCgpO1xuICAgIHRoaXMub25Db2RlU2VudCgpO1xuICAgIHRoaXMuY29kZUlucHV0RWwuZm9jdXMoKTtcbiAgICB0aGlzLnBob25lUHJldmlld0VsLmlubmVyVGV4dCA9IHRoaXMucGhvbmVOdW1iZXJNYXNrZWQ7XG4gICAgdGhpcy5jb2RlSW5wdXRFbC52YWx1ZSA9ICcnO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93VmVyaWZpY2F0aW9uU3RhdGUoKSB7XG4gICAgdGhpcy5zd2l0Y2hUb1N0YXRlKFBob25lV2lkZ2V0U3RhdGUuVmVyaWZpZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93UGhvbmVWZXJpZmllZCgpIHtcbiAgICB0aGlzLnZlcmlmaWVkUGhvbmVOdW1iZXJGaWVsZD8uc2V0VmFsdWUodGhpcy5waG9uZU51bWJlciwgdHJ1ZSk7XG4gICAgdGhpcy5zaG93VmVyaWZpY2F0aW9uU3RhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd0V4aXN0aW5nUGhvbmVOdW1iZXIoKSB7XG4gICAgdGhpcy52ZXJpZmllZFBob25lTnVtYmVyRmllbGQ/LnNldFZhbHVlKHRoaXMuYWNjb3VudFBob25lTnVtYmVyLCB0cnVlKTtcbiAgICB0aGlzLmhpZGVWZXJpZmllZE1lc3NhZ2UoKTtcbiAgICB0aGlzLnNob3dWZXJpZmljYXRpb25TdGF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzd2l0Y2hUb1N0YXRlKHN0YXRlOiBQaG9uZVdpZGdldFN0YXRlKSB7XG4gICAgdGhpcy5oaWRlRXJyb3JNZXNzYWdlKCk7XG4gICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKFBob25lTnVtYmVyV2lkZ2V0X0NPTlNUUy53aWRnZXRTdGF0ZUF0dHJpYnV0ZSwgc3RhdGUpO1xuICB9XG5cbiAgcHJpdmF0ZSBvbkNvZGVTZW50KCkge1xuICAgIHRoaXMuZGlzYWJsZVJlc2VuZChQaG9uZU51bWJlcldpZGdldF9DT05TVFMuZGlzYWJsZVZlcmlmeUluU2Vjb25kcyk7XG4gICAgdGhpcy5zdGFydFJlc2VuZENvdW50RG93bihQaG9uZU51bWJlcldpZGdldF9DT05TVFMuZGlzYWJsZVZlcmlmeUluU2Vjb25kcyk7XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0UmVzZW5kQ291bnREb3duKGNvdW50KSB7XG4gICAgaWYgKGNvdW50KSB7XG4gICAgICB0aGlzLmNoYW5nZVJlc2VuZEJsb2NrZWRNZXNzYWdlKGNvdW50KTtcbiAgICAgIHRoaXMucmVzZW5kVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnN0YXJ0UmVzZW5kQ291bnREb3duKGNvdW50IC0gMSksIDEwMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZVJlc2VuZENvZGUoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNoYW5nZVJlc2VuZEJsb2NrZWRNZXNzYWdlKGNvdW50KSB7XG4gICAgdGhpcy5yZXNlbmRCbG9ja2VkRWwuaW5uZXJUZXh0ID0gdGhpcy5nZXRDb3VudERvd25UZXh0KGNvdW50KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q291bnREb3duVGV4dChjb3VudCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMucmVzZW5kQ291bnREb3duVHJhbnNsYXRpb25LZXkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zY3JlZW5TZXQuZ2V0VGV4dCh0aGlzLnJlc2VuZENvdW50RG93blRyYW5zbGF0aW9uS2V5LCBQaG9uZU51bWJlcldpZGdldF9DT05TVFMucmVzZW5kQ291bnRUZW1wbGF0ZSwgY291bnQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlc2VuZENvdW50ZG93bkRlZmF1bHRMYWJlbD8ucmVwbGFjZShQaG9uZU51bWJlcldpZGdldF9DT05TVFMucmVzZW5kQ291bnRUZW1wbGF0ZSwgY291bnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNhYmxlUmVzZW5kKGNvdW50KSB7XG4gICAgdGhpcy5jaGFuZ2VSZXNlbmRCbG9ja2VkTWVzc2FnZShjb3VudCk7XG4gICAgdGhpcy5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKFBob25lTnVtYmVyV2lkZ2V0X0NPTlNUUy5jb2RlU3RhdGVBdHRyaWJ1dGVzLCBQaG9uZVdpZGdldENvZGVTdGF0ZS5TZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgZW5hYmxlUmVzZW5kQ29kZSgpIHtcbiAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLmNvZGVTdGF0ZUF0dHJpYnV0ZXMsIFBob25lV2lkZ2V0Q29kZVN0YXRlLlJlc2VuZCk7XG4gICAgdGhpcy5hZGRCdXR0b25IYW5kbGVyKHRoaXMucmVzZW5kQnV0dG9uRWwsICgpID0+IHRoaXMucmVzZW5kQ29kZUhhbmRsZXIoKSk7XG4gIH1cblxuICBwcml2YXRlIG9uUGhvbmVJbnB1dENoYW5nZSgpIHtcbiAgICBpZiAoIXRoaXMudmVyaWZ5QnV0dG9uRWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmhpZGVFcnJvck1lc3NhZ2UoKTtcbiAgICB0aGlzLnRvZ2dsZVZlcmlmeSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB0b2dnbGVWZXJpZnkoKSB7XG4gICAgaWYgKHRoaXMucGhvbmVOdW1iZXJXaXRob3V0Q29kZSAmJiB0aGlzLmNvdW50cnlDb2RlKSB7XG4gICAgICB0aGlzLmVuYWJsZVZlcmlmeUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc2FibGVWZXJpZnlCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVuYWJsZVZlcmlmeUJ1dHRvbigpIHtcbiAgICB0aGlzLnZlcmlmeUJ1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUoUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLmxpbmtEaXNhYmxlZENsYXNzKTtcbiAgICB0aGlzLmFkZEJ1dHRvbkhhbmRsZXIodGhpcy52ZXJpZnlCdXR0b25FbCwgKCkgPT4gdGhpcy52ZXJpZnlCdXR0b25DbGlja0hhbmRsZXIoKSwndmVyaWZ5QnV0dG9uQ2xpY2snKTtcbiAgfVxuXG4gIHByaXZhdGUgZGlzYWJsZVZlcmlmeUJ1dHRvbigpIHtcbiAgICB0aGlzLnZlcmlmeUJ1dHRvbkVsLmNsYXNzTGlzdC5hZGQoUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLmxpbmtEaXNhYmxlZENsYXNzKTtcbiAgICB0aGlzLnJlbW92ZURvbUV2ZW50TGlzdGVuZXIoJ3ZlcmlmeUJ1dHRvbkNsaWNrJyk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG9uQ29kZUlucHV0Q2hhbmdlKCkge1xuICAgIHRoaXMuaGlkZUVycm9yTWVzc2FnZSgpO1xuXG4gICAgaWYgKHRoaXMuY29kZUlucHV0RWwudmFsdWUubGVuZ3RoID09PSA2KSB7XG4gICAgICB0aGlzLmRpc2FibGVDb2RlSW5wdXQoKTtcblxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5vdHBVcGRhdGUodGhpcy5jb2RlSW5wdXRFbC52YWx1ZSwgdGhpcy52VG9rZW4pO1xuXG4gICAgICBpZiAocmVzLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgdGhpcy5zaG93UGhvbmVWZXJpZmllZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5lbmFibGVDb2RlSW5wdXQoKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5RXJyb3IocmVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlc2VuZENvZGVIYW5kbGVyKCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMub3RwU2VuZENvZGUoKTtcbiAgICBpZiAocmVzLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0spIHtcbiAgICAgIHRoaXMuc2V0VlRva2VuKHJlc1sndlRva2VuJ10pO1xuICAgICAgdGhpcy5vbkNvZGVTZW50KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzcGxheUVycm9yKHJlcyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2ZXJpZnlCdXR0b25DbGlja0hhbmRsZXIoKSB7XG4gICAgdGhpcy5kaXNhYmxlVmVyaWZ5U2NyZWVuKCk7XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLm90cFNlbmRDb2RlKCk7XG5cbiAgICB0aGlzLmVuYWJsZVZlcmlmeVNjcmVlbigpO1xuXG4gICAgaWYgKHJlcy5lcnJvckNvZGUgPT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICB0aGlzLnNldFZUb2tlbihyZXNbJ3ZUb2tlbiddKTtcbiAgICAgIHRoaXMuc2hvd1ZlcmlmaWNhdGlvblN0ZXAoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwbGF5RXJyb3IocmVzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGRpc2FibGVWZXJpZnlTY3JlZW4oKSB7XG4gICAgdGhpcy5jb3VudHJ5Q29kZUVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB0aGlzLnBob25lSW5wdXRFbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5kaXNhYmxlVmVyaWZ5QnV0dG9uKCk7XG4gIH1cblxuICBwcml2YXRlIGVuYWJsZVZlcmlmeVNjcmVlbigpIHtcbiAgICB0aGlzLmNvdW50cnlDb2RlRWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnBob25lSW5wdXRFbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIHRoaXMuZW5hYmxlVmVyaWZ5QnV0dG9uKCk7XG4gIH1cblxuICBwcml2YXRlIHNldFZUb2tlbih2VG9rZW46IHN0cmluZykge1xuICAgIHRoaXMudlRva2VuID0gdlRva2VuO1xuICB9XG5cbiAgcHJpdmF0ZSBvdHBVcGRhdGUoY29kZTogc3RyaW5nLCB2VG9rZW46IHN0cmluZyk6IFByb21pc2U8R2lneWFSZXNwb25zZT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgZ2lneWEuYWNjb3VudHMub3RwLnVwZGF0ZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHZUb2tlbixcbiAgICAgICAgY2FsbGJhY2s6IChyZXMpID0+IHJlc29sdmUocmVzKVxuICAgICAgfSk7XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgb3RwU2VuZENvZGUoKTogUHJvbWlzZTxHaWd5YVJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgZ2lneWEuYWNjb3VudHMub3RwLnNlbmRDb2RlKHtcbiAgICAgICAgcGhvbmVOdW1iZXI6IHRoaXMucGhvbmVOdW1iZXIsXG4gICAgICAgIGNhbGxiYWNrOiByZXMgPT4gcmVzb2x2ZShyZXMpXG4gICAgICB9KTtcbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBkaXNwbGF5RXJyb3IocmVzcG9uc2UpIHtcbiAgICBjb25zdCBlcnJvclRleHQgPSB0aGlzLmdldEVycm9yVGV4dEZyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgdGhpcy5zaG93RXJyb3JNZXNzYWdlKGVycm9yVGV4dCwgcmVzcG9uc2UuZXJyb3JDb2RlKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd0Vycm9yTWVzc2FnZSh0ZXh0OiBzdHJpbmcsIGVycm9yQ29kZSA9IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFKSB7XG4gICAgdGhpcy5lcnJvckRpc3BsYXlFbC5zaG93RXJyb3Ioe1xuICAgICAgZXJyb3JNZXNzYWdlOiB0ZXh0LFxuICAgICAgZXJyb3JDb2RlOiBlcnJvckNvZGVcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgaGlkZUVycm9yTWVzc2FnZSgpIHtcbiAgICB0aGlzLmVycm9yRGlzcGxheUVsLmhpZGVFcnJvcigpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldEVycm9yS2V5RnJvbVJlc3BvbnNlKHJlc3BvbnNlOiBJRm9ybVJlc3BvbnNlKTogc3RyaW5nIHtcbiAgICBjb25zdCBlcnJvckNvZGUgPSBOdW1iZXIocmVzcG9uc2UuZXJyb3JDb2RlKTtcblxuICAgIGlmIChlcnJvckNvZGUgPT09IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFICYmIHJlc3BvbnNlLmVycm9yRGV0YWlscykge1xuICAgICAgaWYgKGVuZHNXaXRoKHJlc3BvbnNlLmVycm9yRGV0YWlscywgJ1Rva2VuIGhhcyBiZWVuIHJldm9rZWQnKSkge1xuICAgICAgICByZXR1cm4gJ290cF9jb2RlX2V4cGlyZWQnO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW5kc1dpdGgocmVzcG9uc2UuZXJyb3JEZXRhaWxzLCAncGhvbmVOdW1iZXIgYWxyZWFkeSBleGlzdHMnKSkge1xuICAgICAgICByZXR1cm4gJ3Bob25lX251bWJlcl9leGlzdHMnO1xuICAgICAgfVxuXG4gICAgICBpZiAoZW5kc1dpdGgocmVzcG9uc2UuZXJyb3JEZXRhaWxzLCAnY29kZScpKSB7XG4gICAgICAgIHJldHVybiAncGxlYXNlX2VudGVyX2FfdmFsaWRfY29kZSc7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbmRzV2l0aChyZXNwb25zZS5lcnJvckRldGFpbHMsICdJbnZhbGlkIHBhcmFtZXRlciB2YWx1ZSA6IHBob25lTnVtYmVyJykpIHtcbiAgICAgICAgcmV0dXJuICdpbnZhbGlkX2ZpZWxkbmFtZSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVycm9yQ29kZSA9PT0gR1NFcnJvcnMuRk9SQklEREVOKSB7XG4gICAgICByZXR1cm4gJ2ZvcmJpZGRlbl9lcnJvcic7XG4gICAgfVxuXG4gICAgaWYgKGVycm9yQ29kZSA9PT0gR1NFcnJvcnMuRlJFUVVFTkNZX0xJTUlUX1JFQUNIRUQpIHtcbiAgICAgIHJldHVybiAnY29kZV9mcmVxdWVuY3lfbGltaXRfcmVhY2hlZCc7XG4gICAgfVxuXG4gICAgaWYgKGVycm9yQ29kZSA9PT0gR1NFcnJvcnMuUEVSTUlTU0lPTl9ERU5JRUQpIHtcbiAgICAgIHJldHVybiAndW5hdXRob3JpemVkX3VzZXInO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBlbmFibGVDb2RlSW5wdXQoKSB7XG4gICAgdGhpcy5jb2RlSW5wdXRFbC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNhYmxlQ29kZUlucHV0KCkge1xuICAgIHRoaXMuY29kZUlucHV0RWwuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgYWNjb3VudFBob25lTnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpPy5nZXRBY2NvdW50SW5mbz8ucGhvbmVOdW1iZXI7XG4gIH1cblxuICBwcml2YXRlIGdldCB2ZXJpZnlCdXR0b25FbCgpIHtcbiAgICByZXR1cm4gZ2V0RWxlbWVudEJ5Q2xhc3NOYW1lKHRoaXMuaW5zdGFuY2VFbGVtZW50LCBQaG9uZU51bWJlcldpZGdldF9DT05TVFMudmVyaWZ5QnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcmVzZW5kQnV0dG9uRWwoKSB7XG4gICAgcmV0dXJuIGdldEVsZW1lbnRCeUNsYXNzTmFtZSh0aGlzLmluc3RhbmNlRWxlbWVudCwgUGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLnJlc2VuZEJ1dHRvbkNMYXNzKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IHBob25lUHJldmlld0VsKCkge1xuICAgIHJldHVybiBnZXRFbGVtZW50QnlDbGFzc05hbWUodGhpcy5pbnN0YW5jZUVsZW1lbnQsIFBob25lTnVtYmVyV2lkZ2V0X0NPTlNUUy5waG9uZVByZXZpZXdDbGFzcyk7XG4gIH1cblxuICBwcml2YXRlIGdldCBjb2RlSW5wdXRFbCgpOiBIVE1MSW5wdXRFbGVtZW50IHtcbiAgICByZXR1cm4gZ2V0RWxlbWVudEJ5Q2xhc3NOYW1lPEhUTUxJbnB1dEVsZW1lbnQ+KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBQaG9uZU51bWJlcldpZGdldF9DT05TVFMuY29kZUlucHV0Q2xhc3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcGhvbmVJbnB1dEVsKCk6IEhUTUxJbnB1dEVsZW1lbnQge1xuICAgIHJldHVybiBnZXRFbGVtZW50QnlDbGFzc05hbWU8SFRNTElucHV0RWxlbWVudD4odGhpcy5pbnN0YW5jZUVsZW1lbnQsIFBob25lTnVtYmVyV2lkZ2V0X0NPTlNUUy5waG9uZUlucHV0TnVtYmVyQ2xhc3MpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgY291bnRyeUNvZGVFbCgpOiBIVE1MSW5wdXRFbGVtZW50IHtcbiAgICByZXR1cm4gZ2V0RWxlbWVudEJ5Q2xhc3NOYW1lPEhUTUxJbnB1dEVsZW1lbnQ+KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBQaG9uZU51bWJlcldpZGdldF9DT05TVFMuY291bnRyeUNvZGVJbnB1dENsYXNzKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IHBob25lTnVtYmVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY291bnRyeUNvZGUgPyBgJHt0aGlzLmNvdW50cnlDb2RlfSR7dGhpcy5waG9uZU51bWJlcldpdGhvdXRDb2RlfWAgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcGhvbmVOdW1iZXJNYXNrZWQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBtYXNrZWRTeW1ib2xzID0gdGhpcy5waG9uZU51bWJlci5zbGljZSgwLCB0aGlzLnBob25lTnVtYmVyLmxlbmd0aCAtIDIpLnNwbGl0KCcnKS5tYXAoKCkgPT4gJyonKS5qb2luKCcnKTtcbiAgICBjb25zdCB2aXNpYmxlU3ltYm9scyA9IHRoaXMucGhvbmVOdW1iZXIuc2xpY2UoLTIpO1xuXG4gICAgcmV0dXJuIGAke21hc2tlZFN5bWJvbHN9JHt2aXNpYmxlU3ltYm9sc31gO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcGhvbmVOdW1iZXJXaXRob3V0Q29kZSgpOiBzdHJpbmcge1xuICAgIGxldCBudW1iZXIgPSB0aGlzLnBob25lSW5wdXRFbD8udmFsdWU/LnJlcGxhY2UoL1xccy9nbSwnJyk7IC8vIHJlbW92ZSB3aGl0ZXNwYWNlXG5cbiAgICBpZih0aGlzLmNvdW50cnlDb2RlICE9PSAnKzM5JykgeyAvLyBJdGFseSAocGhvbmUgbXVzdCBzdGFydCB3aXRoIDApXG4gICAgICBudW1iZXIgPSBudW1iZXI/LnJlcGxhY2UoL14wKy8sJycpO1xuICAgIH1cblxuICAgIHJldHVybiBudW1iZXI7XG4gIH1cblxuICBwcml2YXRlIGlzQ3VycmVudFN0YXRlKHN0YXRlOiBQaG9uZVdpZGdldFN0YXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShQaG9uZU51bWJlcldpZGdldF9DT05TVFMud2lkZ2V0U3RhdGVBdHRyaWJ1dGUpID09PSBzdGF0ZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGNvdW50cnlDb2RlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY291bnRyeUNvZGVFbD8udmFsdWUgPT09ICcwJyA/ICcnIDogdGhpcy5jb3VudHJ5Q29kZUVsPy52YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGNvZGVQbGFjZWhvbGRlcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvZGVJbnB1dEVsLmdldEF0dHJpYnV0ZShQaG9uZU51bWJlcldpZGdldF9DT05TVFMucGxhY2Vob2xkZXJUZXh0QXR0cmlidXRlKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGVycm9yTWVzc2FnZUVsKCk6IEhUTUxFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7UGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLmVycm9yTWVzc2FnZUNsYXNzfWApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgdmVyaWZpZWRGb3JtTnVtYmVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudmVyaWZpZWRQaG9uZU51bWJlckZpZWxkLmdldFZhbHVlKCkgYXMgc3RyaW5nO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgdmVyaWZpZWRQaG9uZU51bWJlckZpZWxkKCkge1xuICAgIHJldHVybiB0aGlzLl9mb3JtPy5nZXRGaWVsZChQaG9uZU51bWJlcldpZGdldF9DT05TVFMucGhvbmVOdW1iZXJGaWVsZE5hbWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcmVzZW5kQmxvY2tlZEVsKCk6IEhUTUxFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7UGhvbmVOdW1iZXJXaWRnZXRfQ09OU1RTLnJlc2VuZEJsb2NrZWRMYWJlbENsYXNzfWApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcmVzZW5kQ291bnREb3duVHJhbnNsYXRpb25LZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5yZXNlbmRCbG9ja2VkRWwuZ2V0QXR0cmlidXRlKFBob25lTnVtYmVyV2lkZ2V0X0NPTlNUUy50cmFuc2xhdGlvbktleUF0dHJpYnV0ZSk7XG4gIH1cblxuICBwcml2YXRlIGdldCByZXNlbmRDb3VudGRvd25EZWZhdWx0TGFiZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzZW5kQmxvY2tlZEVsLmdldEF0dHJpYnV0ZShQaG9uZU51bWJlcldpZGdldF9DT05TVFMucmVzZW5kQmxvY2tEZWZhdWx0TGFiZWxBdHRyKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IHJlcXVpcmVkRXJyb3JLZXkoKSB7XG4gICAgaWYgKHRoaXMuaXNDdXJyZW50U3RhdGUoUGhvbmVXaWRnZXRTdGF0ZS5WZXJpZmljYXRpb24pKSB7XG4gICAgICByZXR1cm4gJ3Bob25lX25vdF92ZXJpZmllZF9lbnRlcl9jb2RlJztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0N1cnJlbnRTdGF0ZShQaG9uZVdpZGdldFN0YXRlLk1vYmlsZSkpIHtcbiAgICAgIGlmICh0aGlzLnBob25lTnVtYmVyKSB7XG4gICAgICAgIHJldHVybiAgJ3Bob25lX25vdF92ZXJpZmllZCc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAndGhpc19maWVsZF9pc19yZXF1aXJlZCc7XG4gICAgfVxuICB9XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShQaG9uZU51bWJlcldpZGdldCk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlVXBsb2FkV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlVXBsb2FkV2lkZ2V0JztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBTZXJ2ZXJTdGF0ZXMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTZXJ2ZXJXaWRnZXQnO1xuaW1wb3J0IHsgQmFzZUZvcm1XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuXG5sZXQgbmV4dERvd25sb2FkQ29udGV4dCA9IDA7XG5leHBvcnQgY29uc3QgUGhvdG9VcGxvYWRXaWRnZXRfQ09OU1RTID0ge1xuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLXBob3RvLXVwbG9hZCcsXG59O1xuRGVlcEZyZWV6ZShQaG90b1VwbG9hZFdpZGdldF9DT05TVFMpO1xuZXhwb3J0IGNsYXNzIFBob3RvVXBsb2FkV2lkZ2V0IGV4dGVuZHMgQmFzZVVwbG9hZFdpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xuICAgIHByaXZhdGUgcGhvdG9FbGVtZW50SUQ6IHN0cmluZztcbiAgICBwcml2YXRlIHBhdGhDb250YWluZXJJRDogc3RyaW5nO1xuICAgIHByaXZhdGUgZGVmYXVsdEJHSW1hZ2U6IHN0cmluZztcbiAgICBwcml2YXRlIHVpSHRtbDogc3RyaW5nO1xuICAgIHByaXZhdGUgdWlEaXY6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgbGFzdFJlc3BvbnNlSWQ6IHN0cmluZztcblxuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUGhvdG9VcGxvYWRXaWRnZXRfQ09OU1RTO1xuXG4gICAgY29uc3RydWN0b3IoX2Zvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoX2Zvcm0sIGVsKTtcblxuICAgICAgICB0aGlzLnBob3RvRWxlbWVudElEID0gdGhpcy5fdXBsb2FkSWZyYW1lSUQgKyAnX3Bob3RvJztcbiAgICAgICAgdGhpcy5wYXRoQ29udGFpbmVySUQgPSB0aGlzLl91cGxvYWRJZnJhbWVJRCArICdfcGF0aCc7XG4gICAgICAgIHRoaXMuZGVmYXVsdEJHSW1hZ2UgPSBnaWd5YS5fLmdldENkblJlc291cmNlKCkgKyAnL2dzL2kvYWNjb3VudHMvYXZhdGFyXzY0LnBuZyc7IC8vIFRPRE8gVGhpcyBzaG91bGQgYmUgcmVwbGFjZWQgYnkgQ1NTXG5cbiAgICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy5fc2NyZWVuU2V0LmdldFRlbXBsYXRlcygpLnBob3RvVXBsb2FkX3VpO1xuICAgICAgICB0aGlzLnVpSHRtbCA9IGdpZ3lhLnV0aWxzLnRlbXBsYXRlcy5maWxsKHRlbXBsYXRlLCB7XG4gICAgICAgICAgICBwYXRoQ29udGFpbmVySUQ6IHRoaXMucGF0aENvbnRhaW5lcklELFxuICAgICAgICAgICAgcGhvdG9FbGVtZW50SUQ6IHRoaXMucGhvdG9FbGVtZW50SUQsXG4gICAgICAgICAgICBjaG9vc2VfZmlsZTogdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoJ2Nob29zZV9maWxlJyksXG4gICAgICAgICAgICBub19maWxlX2Nob3NlbjogdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoJ25vX2ZpbGVfY2hvc2VuJyksXG4gICAgICAgICAgICB0aXA6IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdtYXhpbXVtX3NpemVfb2ZfM21iLicpICsgJyBKUEcsIEdJRiwgUE5HLicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGVsLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGlmIChnaWd5YS5sb2NhbEluZm8uaXNJRTkgfHwgZ2lneWEubG9jYWxJbmZvLmlzSUU4KSB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtLmZpbHRlcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgZmlsdGVyT3V0V2lkZ2V0c1RvU2VuZDogZGF0YVRvRmlsdGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFUb0ZpbHRlci5wcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGF0YVRvRmlsdGVyLnByb2ZpbGUuX3Byb2ZpbGVQaG90bztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVRvRmlsdGVyO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIC8vIGFkZCBpbnN0YW5jZSB1aVxuICAgICAgICB0aGlzLnVpRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMudWlEaXYuaW5uZXJIVE1MID0gdGhpcy51aUh0bWw7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudWlEaXYpO1xuXG4gICAgICAgIHRoaXMucmVzdG9yZURlZmF1bHRCZygpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1bmxpbmtJbnN0YW5jZUVsZW1lbnQoKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMudWlEaXYpO1xuICAgICAgICB0aGlzLnVpRGl2ID0gbnVsbDtcblxuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc3RvcmVEZWZhdWx0QmcoKSB7XG4gICAgICAgIHZhciBlbFBob3RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5waG90b0VsZW1lbnRJRCk7XG5cbiAgICAgICAgaWYgKGVsUGhvdG8pIGVsUGhvdG8uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiICsgdGhpcy5kZWZhdWx0QkdJbWFnZSArIFwiJylcIjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Rm9ybUh0bWwoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLnRlbXBsYXRlcy5maWxsKHRoaXMuX3NjcmVlblNldC5nZXRUZW1wbGF0ZXMoKS5waG90b1VwbG9hZF9mb3JtLCB7XG4gICAgICAgICAgICBmb3JtVGFyZ2V0OiB0aGlzLl91cGxvYWRJZnJhbWVJRCxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZvcm1FbGVtZW50KCk6IEhUTUxGb3JtRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtRGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmb3JtJylbMF07XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZpbGVFbGVtZW50KCk6IEhUTUxJbnB1dEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXBsb2FkRm9ybS5lbGVtZW50c1snX3Byb2ZpbGVQaG90byddO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzdWJtaXRVcGxvYWRGb3JtKCkge1xuICAgICAgICAvLyBzZXQgdXAgbmV3IGFjdGlvbiAmIHJlc3BvbnNlSWRcbiAgICAgICAgdGhpcy5sYXN0UmVzcG9uc2VJZCA9IHRoaXMuX3VwbG9hZElmcmFtZUlEICsgJ18nICsgdGhpcy5fbGFzdFF1ZXJ5SWQ7XG4gICAgICAgIHZhciBmb3JtQWN0aW9uID0gZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMuZm9ybWF0KFxuICAgICAgICAgICAgYGh0dHBzOi8vJHtnaWd5YS5fLmdldEFwaURvbWFpbignYWNjb3VudHMnKX0vYWNjb3VudHMudXBsb2FkUHJvZmlsZVBob3RvP3B1Ymxpc2g9dHJ1ZSZjb250ZXh0PXswfSZzYXZlUmVzcG9uc2VJRD17MH0mezF9YCxcbiAgICAgICAgICAgIHRoaXMubGFzdFJlc3BvbnNlSWQsXG4gICAgICAgICAgICBnaWd5YS51dGlscy5rZXlWYWx1ZS5zZXJpYWxpemUoYXdhaXQgdGhpcy5nZXRTZXJ2ZXJQYXJhbWV0ZXJzKCkpLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuX3VwbG9hZEZvcm0uYWN0aW9uID0gZm9ybUFjdGlvbjtcblxuICAgICAgICAvLyBwbGFjZSB1cGxvYWQgaW1hZ2VcbiAgICAgICAgdmFyIHBhdGhFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wYXRoQ29udGFpbmVySUQpO1xuICAgICAgICBwYXRoRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybCgnXCIgKyBnaWd5YS5fLmdldENkblJlc291cmNlKCkgKyBcIi9ncy9pL2FjY291bnRzL3NtYWxsTG9hZGVyLmdpZicpXCI7XG5cbiAgICAgICAgc3VwZXIuc3VibWl0VXBsb2FkRm9ybSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzZXJ2ZXJRdWVyeURvbmUobmV3U3RhdGU6IFNlcnZlclN0YXRlcykge1xuICAgICAgICB0aGlzLnN0b3BVcGxvYWRDaGVjaygpO1xuXG4gICAgICAgIC8vIGdldCBsYXN0IGVycm9yIGZyb20gc2VydmVyIHNpbmNlIGlmcmFtZSBkb2VzIG5vdCByZXBvcnQgZXJyb3JzIGFjcm9zcyBkb21haW5zXG4gICAgICAgIHZhciBwYXJhbXM6IGFueSA9IGdpZ3lhLnV0aWxzLm9iamVjdC5yZW1vdmVVbmRlZmluZWQoYXdhaXQgdGhpcy5nZXRTZXJ2ZXJQYXJhbWV0ZXJzKCkpO1xuICAgICAgICBwYXJhbXMuc2F2ZVJlc3BvbnNlSUQgPSB0aGlzLmxhc3RSZXNwb25zZUlkO1xuICAgICAgICBwYXJhbXMubm9BdXRoID0gdHJ1ZTtcbiAgICAgICAgZGVsZXRlIHBhcmFtcy5sb2dpbl90b2tlbjtcbiAgICAgICAgZGVsZXRlIHBhcmFtcy5yZWdUb2tlbjtcblxuICAgICAgICBnaWd5YS5fLmFwaUFkYXB0ZXIuc2VuZFJlcXVlc3QoJ3NvY2lhbGl6ZS5nZXRTYXZlZFJlc3BvbnNlJywgcGFyYW1zLCBhc3luYyByZXMgPT4gYXdhaXQgdGhpcy5vblVwbG9hZFNhdmVkUmVzcG9uc2UocmVzKSwge1xuICAgICAgICAgICAganNTZGtSZXF1ZXN0SWQ6IHRoaXMubGFzdFJlc3BvbnNlSWQsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25VcGxvYWRTYXZlZFJlc3BvbnNlKHJlcykge1xuICAgICAgICB2YXIgcGF0aEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnBhdGhDb250YWluZXJJRCk7XG4gICAgICAgIHBhdGhFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICcnO1xuXG4gICAgICAgIHN3aXRjaCAocmVzLmVycm9yQ29kZSkge1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5PSzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9uVXBsb2FkU3VjY2VzcygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRTogLy8gQXNzdW1lIHJlcXVlc3QgZGlkIG5vdCByZWFjaCB0aGUgc2VydmVyIGR1ZSB0byBJSVMgYmxvY2tpbmcgbGFyZ2UgZmlsZXNcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2VydmVyRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlBST0ZJTEVfUEhPVE9fVE9PX0xBUkdFLFxuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHRoaXMuX3NjcmVlblNldC5nZXRUZXh0KCdwcm9maWxlUGhvdG9fZmlsZVNpemVFcnJvcicpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBBbnkgb3RoZXIgZXJyb3JcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2VydmVyRXJyb3IocmVzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25VcGxvYWRTdWNjZXNzKCkge1xuICAgICAgICAvLyBHZXQgdGhlIG5ldyBpbWFnZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgdmFyIGVsUGF0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGF0aENvbnRhaW5lcklEKTtcbiAgICAgICAgaWYgKGVsUGF0aCkgZWxQYXRoLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICcnO1xuXG4gICAgICAgIHZhciBnZXRQcm9maWxlUGhvdG9QYXJhbXMgPSBhd2FpdCB0aGlzLmdldFNlcnZlclBhcmFtZXRlcnMoKTtcbiAgICAgICAgZ2V0UHJvZmlsZVBob3RvUGFyYW1zLnR5cGUgPSAndGh1bWJuYWlsJztcbiAgICAgICAgZ2V0UHJvZmlsZVBob3RvUGFyYW1zLmNvbnRleHQgPSB0aGlzLl91cGxvYWRJZnJhbWVJRCArICsrbmV4dERvd25sb2FkQ29udGV4dDtcblxuICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgIHZhciB0aHVtYm5haWxVcmxEb21haW4gPSBnaWd5YS5fLmdldEFwaURvbWFpbignYWNjb3VudHMnKTtcbiAgICAgICAgdmFyIHRodW1ibmFpbFVybCA9IGAke1xuICAgICAgICAgICAgZ2V0UHJvZmlsZVBob3RvUGFyYW1zLmxvZ2luX3Rva2VuIHx8IGdldFByb2ZpbGVQaG90b1BhcmFtcy5yZWdUb2tlbiA/ICdodHRwcycgOiBnaWd5YS5sb2NhbEluZm8ucHJvdG9jb2xcbiAgICAgICAgfTovLyR7dGh1bWJuYWlsVXJsRG9tYWlufS9hY2NvdW50cy5nZXRQcm9maWxlUGhvdG8/JHtnaWd5YS51dGlscy5rZXlWYWx1ZS5zZXJpYWxpemUoZ2V0UHJvZmlsZVBob3RvUGFyYW1zKX1gO1xuXG4gICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB2YXIgZWxQaG90byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMucGhvdG9FbGVtZW50SUQpO1xuICAgICAgICAgICAgdmFyIGltYWdlVXJsID0gaW1nLnNyYztcblxuICAgICAgICAgICAgaWYgKGVsUGhvdG8pIGVsUGhvdG8uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoJ1wiICsgaW1hZ2VVcmwgKyBcIicpXCI7XG5cbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uX3NjcmVlbi5zZXRQcm9maWxlUGhvdG8oaW1hZ2VVcmwpO1xuXG4gICAgICAgICAgICBpbWcgPSBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBudWxsOyAvLyByZW1vdmUgbWVtb3J5IGxlYWtcbiAgICAgICAgfTtcblxuICAgICAgICBpbWcub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25TZXJ2ZXJFcnJvcih7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5SRVNPVVJDRV9OT1RfRk9VTkQsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiAnUHJvZmlsZSBwaG90byBpbmFjY2VzaWJsZS4nLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuX2Zvcm0uX3NjcmVlbi5zZXRQcm9maWxlUGhvdG8oJycpO1xuXG4gICAgICAgICAgICBpbWcgPSBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBudWxsOyAvLyByZW1vdmUgbWVtb3J5IGxlYWtcbiAgICAgICAgfTtcblxuICAgICAgICBpbWcuc3JjID0gdGh1bWJuYWlsVXJsO1xuXG4gICAgICAgIHN1cGVyLnNlcnZlclF1ZXJ5RG9uZShTZXJ2ZXJTdGF0ZXMuRG9uZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblNlcnZlckVycm9yKHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMucmVzdG9yZURlZmF1bHRCZygpO1xuXG4gICAgICAgIHRoaXMuX2Zvcm0uX3NjcmVlbi5fc2NyZWVuU2V0Lm9uU2NyZWVuUmVzcG9uc2UocmVzcG9uc2UsIHRoaXMuX2Zvcm0pO1xuXG4gICAgICAgIHN1cGVyLnNlcnZlclF1ZXJ5RG9uZShTZXJ2ZXJTdGF0ZXMuRXJyb3IpO1xuICAgIH1cbn1cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShQaG90b1VwbG9hZFdpZGdldCk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlU2NyZWVuV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlU2NyZWVuV2lkZ2V0JztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcblxuZXhwb3J0IHZhciBQcm9maWxlUGhvdG9XaWRnZXRfQ09OU1RTID0ge1xuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLXByb2ZpbGUtcGhvdG8nLFxufTtcbkRlZXBGcmVlemUoUHJvZmlsZVBob3RvV2lkZ2V0X0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgUHJvZmlsZVBob3RvV2lkZ2V0IGV4dGVuZHMgQmFzZVNjcmVlbldpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gUHJvZmlsZVBob3RvV2lkZ2V0X0NPTlNUUztcblxuICAgIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKF9zY3JlZW4sIGVsKTtcblxuICAgICAgICBfc2NyZWVuLl9wcm9maWxlUGhvdG9zLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICAgICAgdmFyIHByb2ZpbGUgPSB0aGlzLl9zY3JlZW5TZXQuZ2V0UHJvZmlsZSgpO1xuICAgICAgICB2YXIgdGh1bWJuYWlsVVJMID0gcHJvZmlsZS50aHVtYm5haWxVUkwgPyBnaWd5YS5nbG9iYWwuZ2V0UGhvdG9VUkwocHJvZmlsZS50aHVtYm5haWxVUkwpIDogJyc7XG5cbiAgICAgICAgdGhpcy5zZXRUaHVtYm5haWxVcmwodGh1bWJuYWlsVVJMKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VGh1bWJuYWlsVXJsKHRodW1ibmFpbFVSTDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IHRodW1ibmFpbFVSTCA/ICc8aW1nIHNyYz1cIicgKyB0aHVtYm5haWxVUkwgKyAnXCIgLz4nIDogJyc7XG4gICAgfVxufVxuQmFzZVNjcmVlbldpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoUHJvZmlsZVBob3RvV2lkZ2V0KTtcbiIsImltcG9ydCB7IEZsYWdTZXJ2aWNlIH0gZnJvbSAnLi8uLi8uLi8uLi8uLi9jb3JlL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9GbGFnU2VydmljZSc7XG5pbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlRm9ybVdpZGdldCB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQnO1xuaW1wb3J0IHsgSUZvcm1JbnB1dCwgRm9ybUlucHV0X0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0Zvcm1JbnB1dCc7XG5pbXBvcnQgeyBCYXNlRm9ybSB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgU2NyZWVuU2V0X0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcblxuZXhwb3J0IGNvbnN0IFJlcXVpcmVkRGlzcGxheVdpZGdldF9DT05TVFMgPSB7XG4gICAgc2VsZWN0b3I6ICcuZ2lneWEtcmVxdWlyZWQtZGlzcGxheScsXG4gICAgYm91bmRUbzogJ2RhdGEtYm91bmQtdG8nLFxuICAgIGFsd2F5c1Zpc2libGU6ICdnaWd5YS1yZXF1aXJlZC1kaXNwbGF5LWFsd2F5cy12aXNpYmxlJ1xufTtcbkRlZXBGcmVlemUoUmVxdWlyZWREaXNwbGF5V2lkZ2V0X0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgUmVxdWlyZWREaXNwbGF5V2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFJlcXVpcmVkRGlzcGxheVdpZGdldF9DT05TVFM7XG4gICAgcHJpdmF0ZSBib3VuZFRvOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBib3VuZFRvRmllbGQ6IElGb3JtSW5wdXQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihmb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKGZvcm0sIGVsKTtcblxuICAgICAgICAvLyBUaGUgYXN0ZXJpc2sgbWF5IGJlIGhpZGRlbiBieSBkZWZhdWx0LiBXZSdsbCByZXBsYWNlIHRoaXMgd2l0aCB0aGUgZ2lneWEtaGlkZGVuIGNsYXNzLlxuICAgICAgICBpZiAoZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXQ0FHOiBEb24ndCByZWFkIHRoZSBhc3RlcmlzayB0byB1c2VyIHdoZW4gdXNpbmcgc2NyZWVuIHJlYWRlci5cbiAgICAgICAgLy8gVGhlIGZvcm0gZWxlbWVudCBoYXMgYXJpYS1yZXF1aXJlZCB3aGljaCB3aWxsIGNvbnZleSB0byB0aGUgdXNlciB0aGF0IHRoZSBmaWVsZCBpcyByZXF1aXJlZC5cbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnZm9yJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgICAgIHRoaXMudXBkYXRlVmlzaWJpbGl0eSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBldmFsdWF0ZUNvbmRpdGlvbmFsQXR0cmlidXRlcygpIHtcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVWaXNpYmlsaXR5KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZUJvdW5kZWRGaWVsZChmaWVsZDogSUZvcm1JbnB1dCkge1xuICAgICAgICB0aGlzLmJvdW5kVG8gPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoUmVxdWlyZWREaXNwbGF5V2lkZ2V0X0NPTlNUUy5ib3VuZFRvKTtcbiAgICAgICAgdGhpcy5ib3VuZFRvRmllbGQgPSBmaWVsZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVZpc2liaWxpdHkoKSB7XG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQ7XG4gICAgICAgIGlmICghZWwpIHJldHVybjtcblxuICAgICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKFJlcXVpcmVkRGlzcGxheVdpZGdldF9DT05TVFMuYWx3YXlzVmlzaWJsZSkgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYm91bmRUbyA9IGVsLmdldEF0dHJpYnV0ZShSZXF1aXJlZERpc3BsYXlXaWRnZXRfQ09OU1RTLmJvdW5kVG8pO1xuICAgICAgICBpZiAoIXRoaXMuYm91bmRUbykge1xuICAgICAgICAgICAgdGhpcy53YXJuKGAke1JlcXVpcmVkRGlzcGxheVdpZGdldF9DT05TVFMuc2VsZWN0b3J9IGlzIG1pc3NpbmcgJHtSZXF1aXJlZERpc3BsYXlXaWRnZXRfQ09OU1RTLmJvdW5kVG99IGF0dHJpYnV0ZWApO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJvdW5kVG9GaWVsZCA9IHRoaXMuX2Zvcm0uZ2V0RmllbGQodGhpcy5ib3VuZFRvLCB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoRm9ybUlucHV0X0NPTlNUUy5hcnJheUtleVZhbHVlQXR0cmlidXRlKSwgRmxhZ1NlcnZpY2UuZ2V0T25seVZpc2libGVGaWVsZCk7XG4gICAgICAgIGlmICghdGhpcy5ib3VuZFRvRmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMud2FybihgJHtSZXF1aXJlZERpc3BsYXlXaWRnZXRfQ09OU1RTLnNlbGVjdG9yfSdzIGZvcm0gaXMgbWlzc2luZyBmaWVsZCAke3RoaXMuYm91bmRUb30gdG8gYm91bmQgdG9gKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ib3VuZFRvRmllbGQuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICBpZiAodGhpcy5ib3VuZFRvRmllbGQucmVxdWlyZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvdygpIHtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUNsYXNzRnJvbUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQsIFNjcmVlblNldF9DT05TVFMuZ2lneWFIaWRkZW4pO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZSgpIHtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZENsYXNzVG9FbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50LCBTY3JlZW5TZXRfQ09OU1RTLmdpZ3lhSGlkZGVuKTtcbiAgICB9XG59XG5CYXNlRm9ybVdpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoUmVxdWlyZWREaXNwbGF5V2lkZ2V0KTtcbiIsImltcG9ydCB7IERlZXBGcmVlemUsIEZvckVhY2ggfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IEJhc2VGb3JtV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybVdpZGdldCc7XG5pbXBvcnQgeyBJRm9ybUlucHV0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7IEJhc2VGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQgeyBUZW1wbGF0ZUVsZW1lbnQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudCc7XG5cbmV4cG9ydCB2YXIgU2VjcmV0UXVlc3Rpb25XaWRnZXRfQ09OU1RTID0ge1xuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLXNlY3JldC1xdWVzdGlvbicsXG4gICAgYWxsb3dFbXB0eTogJ2RhdGEtYWxsb3ctZW1wdHknLFxufTtcbkRlZXBGcmVlemUoU2VjcmV0UXVlc3Rpb25XaWRnZXRfQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBTZWNyZXRRdWVzdGlvbldpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XG4gICAgcHJpdmF0ZSBxdWVzdGlvbnMgPSBuZXcgQXJyYXk8UXVlc3Rpb25FbGVtZW50PigpO1xuICAgIHByaXZhdGUgYW5zd2VyRmllbGQ6IElGb3JtSW5wdXQ7XG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFNlY3JldFF1ZXN0aW9uV2lkZ2V0X0NPTlNUUztcblxuICAgIGNvbnN0cnVjdG9yKGZvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoZm9ybSwgZWwsIGZhbHNlKTtcblxuICAgICAgICBmb3JtLl9zZWNyZXRRdWVzdGlvbnMucHVzaCh0aGlzKTtcblxuICAgICAgICBjb25zdCBxdWVzdGlvbkVsZW1lbnRzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnKltuYW1lPVwic2VjcmV0UXVlc3Rpb25cIl0nKTtcbiAgICAgICAgRm9yRWFjaChxdWVzdGlvbkVsZW1lbnRzLCAocXVlc3Rpb25FbDogSFRNTEVsZW1lbnQpID0+IHRoaXMucXVlc3Rpb25zLnB1c2gobmV3IFF1ZXN0aW9uRWxlbWVudChxdWVzdGlvbkVsLCB0aGlzKSkpO1xuXG4gICAgICAgIHRoaXMuYW5zd2VyRmllbGQgPSBmb3JtLmdldEZpZWxkKCdzZWNyZXRBbnN3ZXInKTtcblxuICAgICAgICBpZiAoIXRoaXMuYW5zd2VyRmllbGQpIHtcbiAgICAgICAgICAgIHRoaXMud2FybihTZWNyZXRRdWVzdGlvbldpZGdldF9DT05TVFMuc2VsZWN0b3IgKyBcIidzIGZvcm0gaXMgbWlzc2luZyBzZWNyZXRBbnN3ZXIgZmllbGQgdG8gbGluayB0b1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB1bmxpbmtUZW1wbGF0ZSgpIHtcbiAgICAgICAgRm9yRWFjaCh0aGlzLnF1ZXN0aW9ucywgcSA9PiBxLnVubGlua1RlbXBsYXRlKCkpO1xuXG4gICAgICAgIHN1cGVyLnVubGlua1RlbXBsYXRlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbnN3ZXJGaWVsZCkgdGhpcy5hbnN3ZXJGaWVsZC5pbnN0YW5jZUVsZW1lbnQuc2V0QXR0cmlidXRlKFNlY3JldFF1ZXN0aW9uV2lkZ2V0X0NPTlNUUy5hbGxvd0VtcHR5LCAnMScpOyAvLyBUT0RPIHBlcmhhcHMgdXNlIGEgZGlmZmVyZW50IHZhbHVlXG5cbiAgICAgICAgICAgIEZvckVhY2godGhpcy5xdWVzdGlvbnMsIHEgPT4gcS5saW5rSW5zdGFuY2VFbGVtZW50KHRoaXMuaW5zdGFuY2VFbGVtZW50KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIEZvckVhY2godGhpcy5xdWVzdGlvbnMsIHEgPT4gcS51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKSk7XG5cbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFF1ZXN0aW9uKHF1ZXN0aW9uOiBzdHJpbmcpIHtcbiAgICAgICAgRm9yRWFjaCh0aGlzLnF1ZXN0aW9ucywgcSA9PiAocS5pbnN0YW5jZUVsZW1lbnQuaW5uZXJIVE1MID0gcXVlc3Rpb24pKTtcblxuICAgICAgICBpZiAodGhpcy5hbnN3ZXJGaWVsZCkgdGhpcy5hbnN3ZXJGaWVsZC5pbnN0YW5jZUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFNlY3JldFF1ZXN0aW9uV2lkZ2V0X0NPTlNUUy5hbGxvd0VtcHR5KTtcblxuICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7IC8vIFRPRE8gd2h5IHRoaXMgaXMgbmVlZGVkXG4gICAgfVxufVxuY2xhc3MgUXVlc3Rpb25FbGVtZW50IGV4dGVuZHMgVGVtcGxhdGVFbGVtZW50PEhUTUxFbGVtZW50PiB7XG4gICAgY29uc3RydWN0b3IoZWw6IEhUTUxFbGVtZW50LCBwYXJlbnQ6IFNlY3JldFF1ZXN0aW9uV2lkZ2V0KSB7XG4gICAgICAgIHN1cGVyKGVsLCBwYXJlbnQpO1xuICAgIH1cbn1cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShTZWNyZXRRdWVzdGlvbldpZGdldCk7XG4iLCJpbXBvcnQge1xuICAgIERlZXBGcmVlemUsXG4gICAgZmlyc3RQYXJ0LFxuICAgIGdldFVuaXRNZWFzdXJlbWVudFR5cGUsXG4gICAgVW5pdE1lYXN1cmVtZW50VHlwZVxufSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7IEJhc2VTY3JlZW5XaWRnZXQgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IHsgSUZvcm0sIElTY3JlZW5TZXRQYXJhbXMgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbic7XG5pbXBvcnQgeyBJTG9naW5Nb2RlLCBMb2dpbk1vZGVzIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Mb2dpbk1vZGVzJztcbmltcG9ydCB7IElQbHVnaW5QYXJhbXMgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpblBhcmFtcyc7XG5pbXBvcnQgeyBJUGx1Z2luVGVtcGxhdGVzIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9pbnRlcmZhY2VzL0lQbHVnaW5UZW1wbGF0ZXMnO1xuaW1wb3J0IHsgSVBsdWdpbkNTUyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUGx1Z2luQ1NTJztcbmltcG9ydCB7IFNjcmVlbiB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcbmltcG9ydCB7IEJhc2VGb3JtLCBGb3JtX0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm0nO1xuaW1wb3J0IHsgQmFzZVBsdWdpbiB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvQmFzZVBsdWdpbic7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7XG4gICAgZXh0cmFjdFByb3ZpZGVySW5mb0Zyb21SZXNwb25zZVxufSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL1V0aWxzL2dlbmVyYWwvbGlua0FjY291bnRzSGVscGVyJztcblxubGV0IG5leHRHZW5lcmF0ZWRDb250YWluZXJJZCA9IDA7XG5leHBvcnQgY29uc3QgU29jaWFsTG9naW5XaWRnZXRfQ09OU1RTID0ge1xuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLXNvY2lhbC1sb2dpbicsXG59O1xuRGVlcEZyZWV6ZShTb2NpYWxMb2dpbldpZGdldF9DT05TVFMpO1xuZXhwb3J0IGNsYXNzIFNvY2lhbExvZ2luV2lkZ2V0IGV4dGVuZHMgQmFzZVNjcmVlbldpZGdldDxIVE1MRGl2RWxlbWVudD4gaW1wbGVtZW50cyBJRm9ybSB7XG4gICAgcHVibGljIGJpbmRJRDogc3RyaW5nO1xuICAgIHB1YmxpYyBzdWNjZXNzU2NyZWVuOiBzdHJpbmc7XG5cbiAgICBwcml2YXRlIGNvbnRhaW5lcklkOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvbkxvZ2luUmVzcG9uc2U6IChlKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgb25FcnJvclJlc3BvbnNlOiAoZSkgPT4gdm9pZDtcbiAgICBwcml2YXRlIGxvZ2luTW9kZTogSUxvZ2luTW9kZTtcbiAgICBwcml2YXRlIGFwaVBhcmFtczogSVNjcmVlblNldFBhcmFtcztcbiAgICBwcml2YXRlIF9pbnN0YW5jZTogQmFzZVBsdWdpbjxJUGx1Z2luUGFyYW1zLCBJUGx1Z2luVGVtcGxhdGVzLCBJUGx1Z2luQ1NTPjtcbiAgICBwcml2YXRlIF9jb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBTb2NpYWxMb2dpbldpZGdldF9DT05TVFM7XG5cbiAgICBjb25zdHJ1Y3Rvcihfc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xuICAgICAgICBzdXBlcihfc2NyZWVuLCBlbCk7XG5cbiAgICAgICAgdGhpcy5iaW5kSUQgPSB0aGlzLnB1Ymxpc2hJRCA/IHRoaXMuSUQgOiBTb2NpYWxMb2dpbldpZGdldF9DT05TVFMuc2VsZWN0b3I7XG4gICAgICAgIHRoaXMubG9naW5Nb2RlID0gTG9naW5Nb2Rlc1t0aGlzLnBhcmFtc1snbG9naW5Nb2RlJ10gfHwgJ3N0YW5kYXJkJ107XG4gICAgICAgIHRoaXMuY29udGFpbmVySWQgPSB0aGlzLl9zY3JlZW5TZXQuY29udGFpbmVySUQgKyAnX3NvY2lhbF8nICsgbmV4dEdlbmVyYXRlZENvbnRhaW5lcklkKys7IC8vIFRPRE8gQ2hhbmdlIHVzZSB0aGUgc2FtZSBpZCBmb3IgdGhlIHNhbWUgc2NyZWVuU2V0IGluc3RhbmNlLCByZWdhcmRsZXNzIG9mIGhvdyBtYW55IHRpbWVzIGl0IGlzIHJldXNlZCwgdW5saWtlIGV4aXN0aW5nIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBhIG5ldyBpZCBlYWNoIHRpbWVcblxuICAgICAgICB0aGlzLm9uRXJyb3JSZXNwb25zZSA9IGUgPT4ge1xuICAgICAgICAgICAgLy8gSG90IGZpeCBmb3IgXCJubyBwcm92aWRlcnNcIiBlcnJvciB0aGF0IGdvZXMgaW50byB0aGUgaW5maW5pdGUgbG9vcCAtIHNlZSAjNDQyODVcbiAgICAgICAgICAgIC8vIEhvdCBmaXggZm9yIFwiaW52YWxpZCBwYXJhbWV0ZXJcIiAtIHNlZSAjNTYxNTNcbiAgICAgICAgICAgIGlmIChlLmVycm9yQ29kZSAhPT0gR1NFcnJvcnMuTk9fUFJPVklERVJTICYmIGUuZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihlLmVycm9yQ29kZSkgPT09IEdTRXJyb3JzLkZPUkNFX0xJTktfTE9HSU5fSURFTlRJRklFUl9FWElTVFMpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLnNob3VsZENvbm5lY3RBY2NvdW50cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmdldFByb3ZpZGVyU2Vzc2lvbkluZm8oZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKGV2ZW50LCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbkxvZ2luUmVzcG9uc2UgPSBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5yZW1vdmVSZWdUb2tlbigpO1xuICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuc2hvdWxkQ29ubmVjdEFjY291bnRzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKHsgZXJyb3JDb2RlOiAwLCBldmVudDogZSB9LCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlRWxlbWVudCkge1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMuaW5zdGFuY2VFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAvLyBjbGVhcmluZyB0aGUgaW5zdGFuY2UgZWxlbWVudC4gTm90aWNlIHRoaXMgaXMgZmFzdGVyIHRoYW4gaW5uZXJIVE1MPScnLlxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuaW5zdGFuY2VFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc05hbWUgPSAnZ2lneWEtc29jaWFsLWxvZ2luLWNvbnRhaW5lcic7XG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIuaWQgPSB0aGlzLmNvbnRhaW5lcklkO1xuXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpO1xuXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUVuYWJsZWRQcm92aWRlcnMoKTtcblxuICAgICAgICAgICAgdGhpcy5hcGlQYXJhbXMgPSB0aGlzLmxvZ2luTW9kZS5maWx0ZXJQYXJhbXMoZ2lneWEudXRpbHMub2JqZWN0LmNsb25lKHRoaXMuX3NjcmVlblNldC5wYXJhbXMpKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5wYXJhbXNbJ2NvbnRhaW5lcklEJ10pIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpZGdldFBhcmFtcyA9IHRoaXMucGFyYW1zO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyV2lkZ2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdXJmYWNlIGVycm9ycyBpbiBjb250YWluaW5nIGZvcm0uXG4gICAgICovXG4gICAgcHVibGljIGdldEVycm9yRGlzcGxheUZvcm0oKTogQmFzZUZvcm0gfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NyZWVuLmdldEZvcm1CeUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vLyBPdmVycmlkZSBmcm9tIFRlbXBsYXRlRWxlbWVudFxuICAgIHByb3RlY3RlZCBpbml0RnJvbUluc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzU2NyZWVuID0gdGhpcy5fc2NyZWVuU2V0LmNob29zZU5leHRTY3JlZW4odGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKEZvcm1fQ09OU1RTLnN1Y2Nlc3NTY3JlZW4pKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZUVuYWJsZWRQcm92aWRlcnMoKSB7XG4gICAgICAgIHZhciBsb2dpblByb3ZpZGVycyA9IHRoaXMubG9naW5Nb2RlLmdldExvZ2luUHJvdmlkZXJzKHRoaXMuX3NjcmVlblNldC5kYXRhLmFwaURhdGEsIHRoaXMucGFyYW1zLCB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbik7XG5cbiAgICAgICAgaWYgKGxvZ2luUHJvdmlkZXJzICE9PSBudWxsICYmIHR5cGVvZiBsb2dpblByb3ZpZGVycyAhPT0gJ3VuZGVmaW5lZCcpIHRoaXMucGFyYW1zWydlbmFibGVkUHJvdmlkZXJzJ10gPSBsb2dpblByb3ZpZGVycztcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9ICcnOyAvLyBUbyBtYWtlIHN1cmUgbm8gSUQgY29uZmxpY3RzIHdpbGwgYmUgZ2VuZXJhdGVkXG5cbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlKSB0aGlzLl9pbnN0YW5jZS5kaXNwb3NlKCk7XG5cbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHJlbmRlcldpZGdldCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wcmVwYXJlV2lkZ2V0UGFyYW1zKCk7XG4gICAgICAgIC8vIGJlY2F1c2UgcmVuZGVyaW5nIHRoZSB3aWRnZXQgaXMgYXN5bmMsIHdlIHNldCB0aGUgY29udGFpbmVyIHNpemUgdG8gdGFrZSByb29tIGFjY29yZGluZ2x5IC0gc28gdGhlIHNjcmVlbnNldCB3aWxsIGNlbnRlciBjb3JyZWN0bHkuXG4gICAgICAgIHRoaXMuc2V0Q29udGFpbmVyU2l6ZSh0aGlzLndpZGdldFBhcmFtc1snd2lkdGgnXSwgdGhpcy53aWRnZXRQYXJhbXNbJ2hlaWdodCddKTtcbiAgICAgICAgLy9yZS1yZW5kZXIgcGx1Z2luIGFuZCBjYWxsIHRoZSBwbHVnaW4gQVBJIGFnYWluIHdpdGggdGhlIG5ldyBwYXJhbWV0ZXJzIGFmdGVyIHRoZSBjb25kaXRpb25hbHMuXG4gICAgICAgIGdpZ3lhLnNvY2lhbGl6ZS5zaG93TG9naW5VSSh0aGlzLmFwaVBhcmFtcywgdGhpcy53aWRnZXRQYXJhbXMsIHtcbiAgICAgICAgICAgIGNvbnRhaW5lcklEOiB0aGlzLmNvbnRhaW5lcklkLFxuICAgICAgICAgICAgYWNjb3VudHNTb2NpYWxMb2dpbjogdHJ1ZSxcbiAgICAgICAgICAgIG9uTG9naW46IHRoaXMub25Mb2dpblJlc3BvbnNlLFxuICAgICAgICAgICAgb25FcnJvcjogdGhpcy5vbkVycm9yUmVzcG9uc2UsXG4gICAgICAgICAgICBmaW5hbGl6ZVJlZ2lzdHJhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIGRvbnRIYW5kbGVTY3JlZW5TZXQ6IHRydWUsXG4gICAgICAgICAgICBVSU1vZGU6IHRoaXMubG9naW5Nb2RlICE9PSBMb2dpbk1vZGVzLmxpbmsgPyAnTG9naW4nIDogJ0xpbmtBY2NvdW50JyxcbiAgICAgICAgICAgIGluY2x1ZGU6IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLm1lcmdlQ29tbWFTZXBhcmF0ZWRWYWx1ZXMoXG4gICAgICAgICAgICAgICAgJ3Byb2ZpbGUsZGF0YSxlbWFpbHMsc3Vic2NyaXB0aW9ucyxwcmVmZXJlbmNlcycsXG4gICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5pbmNsdWRlKSxcbiAgICAgICAgICAgIHJlZ1NvdXJjZTogdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5yZWdTb3VyY2UgfHwgZmlyc3RQYXJ0KGZpcnN0UGFydChsb2NhdGlvbi5ocmVmLCAnPycpLCAnIycpLCAvLyBUT0RPIGhhdmUgdGhpcyBsb2dpYyBpbiB0aGUgc2NyZWVuIGNyZWF0aW9uXG4gICAgICAgICAgICBnZXRJbnN0YW5jZTogaW5zdGFuY2VzID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJlbmRlcldpZGdldFVJID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlV2lkZ2V0UGFyYW1zKCkge1xuICAgICAgICB0aGlzLnBhcmFtcy5jb25mbGljdEhhbmRsaW5nID0gdGhpcy5nZXRDb25mbGljdEhhbmRsaW5nRmFpbFBhcmFtKCk7XG5cbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLmxvZ2luTW9kZSA9PT0gJ2xpbmsnICYmIHRoaXMuc2hvdWxkTGlua0FjY291bnRzKSB7XG4gICAgICAgICAgICB0aGlzLmFwaVBhcmFtc1snc3VwcHJlc3NMb2dpbkV2ZW50J10gPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRDb25mbGljdEhhbmRsaW5nRmFpbFBhcmFtKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJhbXMuY29uZmxpY3RIYW5kbGluZykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLmNvbmZsaWN0SGFuZGxpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2lneWEudXRpbHMudG9nZ2xlcy5pc09uKCdsaW5rQWNjb3VudFYyJykpIHtcbiAgICAgICAgICAgIHJldHVybiAnZmFpbCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IHNob3VsZExpbmtBY2NvdW50cygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zLmNvbmZsaWN0SGFuZGxpbmcgPT09ICdmYWlsJyAmJiB0aGlzLl9zY3JlZW5TZXQuaGFzUHJvdmlkZXJTZXNzaW9uSW5mbztcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldENvbnRhaW5lclNpemUod2lkdGg6IHN0cmluZywgaGVpZ2h0OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHdpZHRoKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGhVbml0cyA9IGdldFVuaXRNZWFzdXJlbWVudFR5cGUod2lkdGgpO1xuICAgICAgICAgICAgaWYgKHdpZHRoVW5pdHMgIT0gVW5pdE1lYXN1cmVtZW50VHlwZS5hdXRvKSB0aGlzLl9jb250YWluZXIuc3R5bGUud2lkdGggPSBwYXJzZUZsb2F0KHdpZHRoKSArIHdpZHRoVW5pdHM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0KSB7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0VW5pdHMgPSBnZXRVbml0TWVhc3VyZW1lbnRUeXBlKGhlaWdodCk7XG4gICAgICAgICAgICBpZiAoaGVpZ2h0VW5pdHMgIT0gVW5pdE1lYXN1cmVtZW50VHlwZS5hdXRvKSB0aGlzLl9jb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gcGFyc2VGbG9hdChoZWlnaHQpICsgaGVpZ2h0VW5pdHM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFByb3ZpZGVyU2Vzc2lvbkluZm8oaW50ZXJydXB0aW9uUmVzcG9uc2UpIHtcbiAgICAgICAgaWYoaW50ZXJydXB0aW9uUmVzcG9uc2UuZXJyb3JDb2RlICE9IEdTRXJyb3JzLkZPUkNFX0xJTktfTE9HSU5fSURFTlRJRklFUl9FWElTVFMpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnJ1cHRpb25SZXNwb25zZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gaW50ZXJydXB0aW9uUmVzcG9uc2UucmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyU2Vzc2lvbkluZm8gPSBleHRyYWN0UHJvdmlkZXJJbmZvRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcblxuICAgICAgICByZXR1cm4gey4uLmludGVycnVwdGlvblJlc3BvbnNlLCByZXNwb25zZTogey4uLnJlc3BvbnNlLCBwcm92aWRlclNlc3Npb25JbmZvfX07XG4gICAgfVxufVxuQmFzZVNjcmVlbldpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoU29jaWFsTG9naW5XaWRnZXQpO1xuIiwiaW1wb3J0IHtEZWVwRnJlZXplfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcbmltcG9ydCB7QmFzZUZvcm1XaWRnZXR9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQnO1xuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlRm9ybSc7XG5pbXBvcnQge1Byb2ZpbGVGb3JtfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Byb2ZpbGVGb3JtJztcblxuZXhwb3J0IHZhciBTdWJzY3JpcHRpb25XaWRnZXRfQ09OU1RTID0ge1xuICAgIHNlbGVjdG9yOiAnZGl2LmdpZ3lhLXN1YnNjcmlwdGlvbicsXG4gICAgc3Vic2NyaXB0aW9uTmFtZTogJ25hbWUnLFxufTtcbkRlZXBGcmVlemUoU3Vic2NyaXB0aW9uV2lkZ2V0X0NPTlNUUyk7XG5leHBvcnQgY2xhc3MgU3Vic2NyaXB0aW9uV2lkZ2V0IGV4dGVuZHMgQmFzZUZvcm1XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFN1YnNjcmlwdGlvbldpZGdldF9DT05TVFM7XG5cbiAgICBwcml2YXRlIF9zaG91bGRQb3B1bGF0ZTogYm9vbGVhbjtcbiAgICBwcml2YXRlIHN1YnNjcmlwdGlvbk9iajogeyBjaGFubmVsOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9O1xuICAgIHByaXZhdGUgX2NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfbGFiZWxFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF9zdGF0dXNFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGZvcm06IEJhc2VGb3JtLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIoZm9ybSwgZWwpO1xuICAgICAgICB0aGlzLl9zaG91bGRQb3B1bGF0ZSA9IGZvcm0gaW5zdGFuY2VvZiBQcm9maWxlRm9ybTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBzdWJzY3JpcHRpb24gbmFtZTogc3Vic2NyaXB0aW9uLjxuYW1lPi48Y2hhbm5lbD5cbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbk5hbWUgPSB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoU3Vic2NyaXB0aW9uV2lkZ2V0LkNPTlNUUy5zdWJzY3JpcHRpb25OYW1lKT8uc3BsaXQoJy4nKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbk5hbWU/LnNoaWZ0KCk7IC8vIHJlbW92ZSBwcmVjZWRpbmcgc3Vic2NyaXB0aW9uc1xuXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbk9iaiA9IHtcbiAgICAgICAgICAgICAgICBjaGFubmVsOiBzdWJzY3JpcHRpb25OYW1lPy5wb3AoKSxcbiAgICAgICAgICAgICAgICBuYW1lOiBzdWJzY3JpcHRpb25OYW1lPy5qb2luKCcuJyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IGNoZWNrZWQgPSB0aGlzLnRlbXBsYXRlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2hlY2tlZCcpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3Nob3VsZFBvcHVsYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uc0luZm8gPSB0aGlzLl9zY3JlZW5TZXQuZ2V0QXBpRGF0YSgpLmdldEFjY291bnRJbmZvO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbkRhdGEgPSBnaWd5YS51dGlscy5vYmplY3QuZ2V0UHJvcGVydHlCeVNlcmlhbGl6ZWROYW1lKHN1YnNjcmlwdGlvbnNJbmZvPy5zdWJzY3JpcHRpb25zLCB0aGlzLnN1YnNjcmlwdGlvbk9iai5uYW1lLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbCA9IHN1YnNjcmlwdGlvbkRhdGFbdGhpcy5zdWJzY3JpcHRpb25PYmouY2hhbm5lbF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFubmVsLmhhc093blByb3BlcnR5KCdpc1N1YnNjcmliZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQgPSBjaGFubmVsWydpc1N1YnNjcmliZWQnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYW5uZWwuaGFzT3duUHJvcGVydHkoJ2RvdWJsZU9wdEluJykgJiYgY2hhbm5lbFsnZG91YmxlT3B0SW4nXVsnc3RhdHVzJ10udG9Mb3dlckNhc2UoKSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c0VsZW1lbnQuY2xhc3NOYW1lID0gJ3N1YnNjcmlwdGlvbi1zdGF0dXMtbGFiZWwnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c0VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSAnMThweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzRWxlbWVudC5zdHlsZS5jb2xvciA9ICdncmV5JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXNFbGVtZW50LnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c0VsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5fc2NyZWVuU2V0LmdldFRleHQoJ3N1YnNjcmlwdGlvbl9wZW5kaW5nX2NvbmZpcm1hdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC5pZCA9IGBzdWJzLWNoZWNrYm94LSR7dGhpcy5zdWJzY3JpcHRpb25PYmoubmFtZX1gO1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQubmFtZSA9IGBzdWJzY3JpcHRpb25zLiR7dGhpcy5zdWJzY3JpcHRpb25PYmoubmFtZX0uJHt0aGlzLnN1YnNjcmlwdGlvbk9iai5jaGFubmVsfS5pc1N1YnNjcmliZWRgO1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuY2xhc3NOYW1lID0gJ2dpZ3lhLWlucHV0LWNoZWNrYm94IHN1YnNjcmlwdGlvbi1jaGVja2JveCc7XG4gICAgICAgICAgICB0aGlzLmlucHV0RWxlbWVudC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50LmNoZWNrZWQgPSBjaGVja2VkO1xuXG4gICAgICAgICAgICB0aGlzLl9sYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgdGhpcy5fbGFiZWxFbGVtZW50LmNsYXNzTmFtZSA9ICdzdWJzY3JpcHRpb24tbmFtZS1sYWJlbCc7XG4gICAgICAgICAgICB0aGlzLl9sYWJlbEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgdGhpcy5fbGFiZWxFbGVtZW50LnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcbiAgICAgICAgICAgIHRoaXMuX2xhYmVsRWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9ICc1cHgnO1xuICAgICAgICAgICAgdGhpcy5fbGFiZWxFbGVtZW50LnNldEF0dHJpYnV0ZSgnZm9yJywgdGhpcy5pbnB1dEVsZW1lbnQuaWQpO1xuXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5jbGFzc05hbWUgPSAnc3Vicy13aWRnZXQtY29udGFpbmVyJztcbiAgICAgICAgICAgIC8vYWRkIGNoZWNrYm94XG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5pbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgLy9hZGQgbGFiZWwgbmVhciBjaGVja2JveFxuICAgICAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2xhYmVsRWxlbWVudCk7XG5cbiAgICAgICAgICAgIC8vYWRkICdwZW5kaW5nJyBzdGF0dXMgZWxlbWVudFxuICAgICAgICAgICAgaWYgKHRoaXMuX3N0YXR1c0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fc3RhdHVzRWxlbWVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcldpZGdldCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcldpZGdldCgpIHtcbiAgICAgICAgc3VwZXIucmVuZGVyV2lkZ2V0KCk7XG4gICAgICAgIGNvbnN0IHRleHQgPSAhdGhpcy5pbnN0YW5jZUVsZW1lbnQgPyAnJyA6IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1sYWJlbCcpXG4gICAgICAgIHRoaXMuX2xhYmVsRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLmV2YWx1YXRlKHRleHQpO1xuICAgIH1cbn1cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShTdWJzY3JpcHRpb25XaWRnZXQpO1xuIiwiaW1wb3J0IHtDYXJkTGlzdEl0ZW1XaWRnZXR9IGZyb20gJy4uLy4uL0NhcmRMaXN0SXRlbVdpZGdldCc7XG5pbXBvcnQgR2lneWFSZXNwb25zZSBmcm9tIFwiZ2lneWEvZGlzdC9saWIvaW50ZXJmYWNlcy9naWd5YS1yZXNwb25zZVwiO1xuaW1wb3J0IHRmYUV2ZW50U2VydmljZSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL1RmYUV2ZW50U2VydmljZSc7XG5pbXBvcnQgZ2lneWFBc3NlcnRpb25TZXJ2aWNlIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvVGZhR2lneWFBc3NlcnRpb25TZXJ2aWNlJztcbmltcG9ydCB7R1NFcnJvcnN9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5pbXBvcnQge1RmYU1vZGV9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvdHlwZXMnO1xuaW1wb3J0IHtnZXRPdHBFcnJvck1lc3NhZ2V9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMvZXJyb3JNZXNzYWdlVXRpbCc7XG5pbXBvcnQge0Zvcm1JbnB1dH0gZnJvbSAnLi4vLi4vLi4vSW5wdXRzL0Zvcm1JbnB1dCc7XG5pbXBvcnQge2NoYW5nZUV4cGFuZGVkU3RhdGUsIElFeHBhbmRhYmxlV2lkZ2V0fSBmcm9tICcuLi8uLi8uLi91dGlscy9leHBhbmRhYmxlV2lkZ2V0JztcbmltcG9ydCB7ZGlzcGF0Y2hFcnJvckV2ZW50LCBJUmVzcG9uc2VJbmZvfSBmcm9tICcuLi8uLi8uLi91dGlscy9lcnJvckV2ZW50VXRpbCc7XG5cbmV4cG9ydCBjb25zdCBURkFCYXNlSXRlbV9DT05TVFMgPSB7XG4gICAgc2VuZEJ1dHRvblNlbGVjdG9yOiAnLmdpZ3lhLXRmYS12ZXJpZmljYXRpb24tYWN0aW9uLWJ0bicsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZ2lneWEtaW5wdXQtc3VibWl0JyxcbiAgICByZXNlbmRCdXR0b25TZWxlY3RvcjogJy5naWd5YS10ZmEtcmVzZW5kLWNvZGUnLFxuICAgIGV4cGFuZGVkQXR0cmlidXRlOiAnZGF0YS1kZXZpY2UtZXhwYW5kZWQnLFxuICAgIGVycm9yTWVzc2FnZVNlbGVjdG9yOiAnLmdpZ3lhLWVycm9yLW1zZ1tkYXRhLWJvdW5kLXRvPVwidGZhVmVyaWZpY2F0aW9uV2lkZ2V0XCJdJyxcbiAgICBlcnJvckFjdGl2ZU1lc3NhZ2VDbGFzczogJ2dpZ3lhLWVycm9yLW1zZy1hY3RpdmUnLFxuICAgIHJlbWVtYmVyRGV2aWNlU2VsZWN0b3I6ICcuZ2lneWEtcmVtZW1iZXItZGV2aWNlLWNoZWNrYm94IGlucHV0JyxcbiAgICBzeW1ib2xzUGxhY2Vob2xkZXI6ICclbGFzdFN5bWJvbHMnLFxuICAgIGNvZGVJbnB1dFNlbGVjdG9yOiAnLmdpZ3lhLWNvZGUtaW5wdXQnLFxuICAgIG5hbWVBdHRyOiAnbmFtZScsXG4gICAgYm91bmRUb0F0dHI6ICdkYXRhLWJvdW5kLXRvJyxcbiAgICBpbnB1dEVycm9yU2VsZWN0b3I6ICcuZ2lneWEtaW5wdXQtZXJyb3InLFxuICAgIGFyaWFMYWJlbEF0dHI6ICdhcmlhLWxhYmVsJyxcbiAgICBjb250YWluZXJDbGFzczogJ2dpZ3lhLWNvbnRhaW5lcicsXG4gICAgY29udGFpbmVyRW5hYmxlZENsYXNzOiAnZ2lneWEtY29udGFpbmVyLWVuYWJsZWQnLFxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVEZBVmVyaWZpY2F0aW9uQmFzZUl0ZW1XaWRnZXQgZXh0ZW5kcyBDYXJkTGlzdEl0ZW1XaWRnZXQgaW1wbGVtZW50cyBJRXhwYW5kYWJsZVdpZGdldCB7XG4gICAgcHVibGljIGV4cGFuZGVkU3RhdGVBdHRyaWJ1dGUgPSBURkFCYXNlSXRlbV9DT05TVFMuZXhwYW5kZWRBdHRyaWJ1dGU7XG4gICAgcHVibGljIGJpbmRJRDogc3RyaW5nO1xuXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IHJlYWRvbmx5IHByb3ZpZGVyTmFtZTtcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgY29kZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBsYXN0U3ltYm9sczogc3RyaW5nO1xuXG4gICAgcHJpdmF0ZSBlcnJvck1lc3NhZ2VFbGVtOiBIVE1MRWxlbWVudDtcblxuICAgIHB1YmxpYyBhc3luYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgICAgICB0aGlzLmluaXRFcnJvckhhbmRsaW5nKCk7XG4gICAgICAgIHRoaXMuY29sbGFwc2UoKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlQ29kZUFyaWFMYWJlbCgpO1xuICAgICAgICB0aGlzLmFkZFJlc2VuZEJ1dHRvbkhhbmRsZXJzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVIaWdoUmlza0RldmljZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBleHBhbmQoKSB7XG4gICAgICAgIGNoYW5nZUV4cGFuZGVkU3RhdGUodGhpcy5pbnN0YW5jZUVsZW1lbnQsIHRoaXMuZXhwYW5kZWRTdGF0ZUF0dHJpYnV0ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbGxhcHNlKCkge1xuICAgICAgICBjaGFuZ2VFeHBhbmRlZFN0YXRlKHRoaXMuaW5zdGFuY2VFbGVtZW50LCB0aGlzLmV4cGFuZGVkU3RhdGVBdHRyaWJ1dGUsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICAgICAgdGZhRXZlbnRTZXJ2aWNlLnVuc3Vic2NyaWJlKCdjaGFuZ2VBY3RpdmVEZXZpY2UnKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgYWRkUmVzZW5kQnV0dG9uSGFuZGxlcnMoKTogdm9pZDtcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3Qgc3RhcnRDb3VudERvd24oKTogdm9pZDtcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgYXN5bmMgdmVyaWZ5Q29kZUFwaSgpOiBQcm9taXNlPEdpZ3lhUmVzcG9uc2U+O1xuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBhc3luYyBzZW5kQ29kZUFwaShwYXJhbXM6IHtba2V5OiBzdHJpbmddOiBhbnl9KTogUHJvbWlzZTxHaWd5YVJlc3BvbnNlPjtcblxuICAgIHByb3RlY3RlZCB1cGRhdGVGb3JtRWxlbWVudHNXaXRoQ2FyZEluZGV4KCl7XG4gICAgICAgIGNvbnN0IGlucHV0TmFtZUF0dCA9IHRoaXMuY29kZUlucHV0RWw/LmdldEF0dHJpYnV0ZShURkFCYXNlSXRlbV9DT05TVFMubmFtZUF0dHIpO1xuICAgICAgICBjb25zdCBpbmRleGVkTmFtZUF0dHJpYnV0ZSA9IGAke2lucHV0TmFtZUF0dH1fJHt0aGlzLmluZGV4U3RyfWA7XG5cbiAgICAgICAgdGhpcy5pbnN0YW5jZUVsZW1lbnRcbiAgICAgICAgICA/LnF1ZXJ5U2VsZWN0b3IoVEZBQmFzZUl0ZW1fQ09OU1RTLmlucHV0RXJyb3JTZWxlY3RvcilcbiAgICAgICAgICA/LnNldEF0dHJpYnV0ZShURkFCYXNlSXRlbV9DT05TVFMuYm91bmRUb0F0dHIsIGluZGV4ZWROYW1lQXR0cmlidXRlKTtcblxuICAgICAgICB0aGlzLmNvZGVJbnB1dEVsPy5zZXRBdHRyaWJ1dGUoVEZBQmFzZUl0ZW1fQ09OU1RTLm5hbWVBdHRyLCBpbmRleGVkTmFtZUF0dHJpYnV0ZSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIGFjdGl2YXRlSGlnaFJpc2tEZXZpY2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLl9zY3JlZW5TZXQuZGF0YT8udGZhUHJvdmlkZXJzPy5oaWdoZXN0Umlza1Byb3ZpZGVyID09PSB0aGlzLnByb3ZpZGVyTmFtZSAmJiB0aGlzLmlzRmlyc3RJdGVtKCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0b21hdGljYWxseUFjdGl2YXRlRGV2aWNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgaXNGaXJzdEl0ZW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4SW50ID09PSAwO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBhdXRvbWF0aWNhbGx5QWN0aXZhdGVEZXZpY2UoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVEZXZpY2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kQ29kZSgpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB1cGRhdGVDb2RlQXJpYUxhYmVsKCkge1xuICAgICAgICBpZiAodGhpcy5jb2RlSW5wdXRBcmlhTGFiZWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29kZUlucHV0QXJpYUxhYmVsID0gdGhpcy5jb2RlSW5wdXRBcmlhTGFiZWwucmVwbGFjZShURkFCYXNlSXRlbV9DT05TVFMuc3ltYm9sc1BsYWNlaG9sZGVyLCB0aGlzLmxhc3RTeW1ib2xzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgc2VuZEJ1dHRvbigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcihURkFCYXNlSXRlbV9DT05TVFMuc2VuZEJ1dHRvblNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHN1Ym1pdEJ1dHRvbigpOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcihURkFCYXNlSXRlbV9DT05TVFMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhY3RpdmF0ZURldmljZSgpOiB2b2lkIHtcbiAgICAgICAgdGZhRXZlbnRTZXJ2aWNlLmFjdGl2YXRlRGV2aWNlKHRoaXMucHJvdmlkZXJOYW1lLCB0aGlzLmVsZW1lbnRJZCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNob3dNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZUVsZW0uY2xhc3NMaXN0LmFkZChURkFCYXNlSXRlbV9DT05TVFMuZXJyb3JBY3RpdmVNZXNzYWdlQ2xhc3MpO1xuICAgICAgICB0aGlzLmVycm9yTWVzc2FnZUVsZW0uaW5uZXJUZXh0ID0gbWVzc2FnZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2V0IGNvZGVJbnB1dEFyaWFMYWJlbCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY29kZUlucHV0LnNldEF0dHJpYnV0ZShURkFCYXNlSXRlbV9DT05TVFMuYXJpYUxhYmVsQXR0ciwgdmFsdWUpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgY29kZUlucHV0QXJpYUxhYmVsKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvZGVJbnB1dC5nZXRBdHRyaWJ1dGUoVEZBQmFzZUl0ZW1fQ09OU1RTLmFyaWFMYWJlbEF0dHIpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBoaWRlTWVzc2FnZSgpIHtcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VFbGVtLmNsYXNzTGlzdC5yZW1vdmUoVEZBQmFzZUl0ZW1fQ09OU1RTLmVycm9yQWN0aXZlTWVzc2FnZUNsYXNzKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0RXJyb3JLZXlGcm9tUmVzcG9uc2UocmVzcG9uc2U/OiBvYmplY3QpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gZ2V0T3RwRXJyb3JNZXNzYWdlKHJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYWRkRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGZhRXZlbnRTZXJ2aWNlLm9uKCdjaGFuZ2VBY3RpdmVEZXZpY2UnLCAocGFyYW1zKSA9PiB0aGlzLm9uRGV2aWNlQWN0aXZhdGVkKHBhcmFtcykpXG4gICAgICAgIHRoaXMuYWRkQWN0aW9uQnV0dG9uRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmFkZEJ1dHRvbkhhbmRsZXIodGhpcy5zdWJtaXRCdXR0b24sICgpID0+IHRoaXMudmVyaWZ5Q29kZSgpKTtcbiAgICAgICAgdGhpcy5zdWJtaXRPbkVudGVyKHRoaXMuY29kZUlucHV0LCB0aGlzLnN1Ym1pdEJ1dHRvbik7XG4gICAgICAgIHRoaXMuc3VibWl0T25FbnRlcih0aGlzLnJlbWVtYmVyRGV2aWNlQ2hlY2tib3hFbCwgdGhpcy5zdWJtaXRCdXR0b24pO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhZGRBY3Rpb25CdXR0b25FdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmFkZEJ1dHRvbkhhbmRsZXIodGhpcy5zZW5kQnV0dG9uLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRDb2RlKCk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlRGV2aWNlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25EZXZpY2VBY3RpdmF0ZWQoe2RldmljZUlkLCBwcm92aWRlcn0pIHtcbiAgICAgICAgaWYgKHByb3ZpZGVyID09PSB0aGlzLnByb3ZpZGVyTmFtZSAmJiBkZXZpY2VJZCA9PT0gdGhpcy5lbGVtZW50SWQpIHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kKCk7XG4gICAgICAgICAgICB0aGlzLmNvZGVJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5zdGFydENvdW50RG93bigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0RXJyb3JIYW5kbGluZygpIHtcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VFbGVtID0gdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoVEZBQmFzZUl0ZW1fQ09OU1RTLmVycm9yTWVzc2FnZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VFbGVtPy5jbGFzc0xpc3QuYWRkKFRGQUJhc2VJdGVtX0NPTlNUUy5lcnJvckFjdGl2ZU1lc3NhZ2VDbGFzcyk7XG5cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgc2VuZENvZGUgKHBhcmFtczoge1trZXk6IHN0cmluZ106IGFueX0gPSB7fSkge1xuICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlXG4gICAgICAgICAgPSBhd2FpdCB0aGlzLnNlbmRDb2RlQXBpKHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS50ZmFQcm92aWRlcnMucGh2VG9rZW4gPSByZXNwb25zZVsncGh2VG9rZW4nXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe3Jlc3BvbnNlfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHZlcmlmeUNvZGUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0aGlzLnZhbGlkYXRlQ2hpbGRGaWVsZCh0aGlzLmNvZGVGb3JtRmllbGQpO1xuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS5maW5hbGl6ZVJlZ2lzdHJhdGlvbk5lZWRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3NjcmVlblNldC5kaW1TY3JlZW5TZXQoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHZlcmlmeUNvZGVSZXNwb25zZSA9IGF3YWl0IHRoaXMudmVyaWZ5Q29kZUFwaSgpO1xuICAgICAgICAgICAgaWYgKHZlcmlmeUNvZGVSZXNwb25zZS5lcnJvckNvZGUgPT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fZm9ybS5zdWJtaXQoe1xuICAgICAgICAgICAgICAgICAgICBjdXN0b21TdWJtaXRBcGk6IGdpZ3lhLmFjY291bnRzLnRmYS5maW5hbGl6ZVRGQSxcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0QXBpUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnaWd5YUFzc2VydGlvbjogYXdhaXQgdGhpcy5nZXRHaWd5YUFzc2VydGlvbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJBc3NlcnRpb246IHZlcmlmeUNvZGVSZXNwb25zZVsncHJvdmlkZXJBc3NlcnRpb24nXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBEZXZpY2U6ICF0aGlzLnJlbWVtYmVyRGV2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnVG9rZW46IHRoaXMuX3NjcmVlblNldC5yZWdUb2tlblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkFmdGVyU3VibWl0Q2FsbGJhY2s6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSAhPSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe3Jlc3BvbnNlOiB2ZXJpZnlDb2RlUmVzcG9uc2V9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHtlcnJvckNvZGU6IEdTRXJyb3JzLkdFTkVSQUxfU0VSVkVSX0VSUk9SfSxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC51bmRpbVNjcmVlblNldCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGhhbmRsZUVycm9yKHtyZXNwb25zZSwgY29udGV4dH06IHtyZXNwb25zZT86IElSZXNwb25zZUluZm8sIGNvbnRleHQ/OiBhbnl9KSB7XG4gICAgICAgIHRoaXMuZGlzcGxheUVycm9yTWVzc2FnZShyZXNwb25zZSk7XG4gICAgICAgIGRpc3BhdGNoRXJyb3JFdmVudCh0aGlzLl9zY3JlZW4sIHRoaXMuX2Zvcm0uYmluZElELCB7cmVzcG9uc2UsIGNvbnRleHR9KVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBkaXNwbGF5RXJyb3JNZXNzYWdlKHJlc3BvbnNlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuZ2V0RXJyb3JUZXh0RnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgdGhpcy5yZW5kZXJFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCByZW5kZXJFcnJvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VFbGVtLmNsYXNzTGlzdC5hZGQoVEZBQmFzZUl0ZW1fQ09OU1RTLmVycm9yQWN0aXZlTWVzc2FnZUNsYXNzKTtcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VFbGVtLmlubmVyVGV4dCA9IG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIGdldEdpZ3lhQXNzZXJ0aW9uKCkge1xuICAgICAgICByZXR1cm4gZ2lneWFBc3NlcnRpb25TZXJ2aWNlLmdldEFzc2VydGlvbihUZmFNb2RlLnZlcmlmeSwgdGhpcy5wcm92aWRlck5hbWUsIHtcbiAgICAgICAgICAgIHJlZ1Rva2VuOiB0aGlzLl9zY3JlZW5TZXQucmVnVG9rZW4sXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgcmVtZW1iZXJEZXZpY2UoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbWVtYmVyRGV2aWNlQ2hlY2tib3hFbD8uY2hlY2tlZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCByZW1lbWJlckRldmljZUNoZWNrYm94RWwoKTogSFRNTElucHV0RWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFRGQUJhc2VJdGVtX0NPTlNUUy5yZW1lbWJlckRldmljZVNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGNvZGVJbnB1dEVsKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5xdWVyeVNlbGVjdG9yKFRGQUJhc2VJdGVtX0NPTlNUUy5jb2RlSW5wdXRTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldCBjb2RlRm9ybUZpZWxkKCk6IEZvcm1JbnB1dDtcbn1cblxuIiwiaW1wb3J0IHtUZmFNb2RlfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL3R5cGVzJztcbmltcG9ydCBnaWd5YUFzc2VydGlvblNlcnZpY2UgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9UZmFHaWd5YUFzc2VydGlvblNlcnZpY2UnO1xuaW1wb3J0IHtDYXJkTGlzdEZvcm1XaWRnZXR9IGZyb20gJy4uLy4uLy4uL0NhcmRMaXN0Rm9ybVdpZGdldCc7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBURkFWZXJpZmljYXRpb25CYXNlTGlzdFdpZGdldCBleHRlbmRzIENhcmRMaXN0Rm9ybVdpZGdldCB7XG4gIHByb3RlY3RlZCByZWFkb25seSBpdGVtSWQgPSAnaWQnO1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVhZG9ubHkgcHJvdmlkZXJOYW1lO1xuXG5cbiAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICB0aGlzLl9zY3JlZW4uX2hhc1RmYSA9IHRydWU7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZ2V0R2lneWFBc3NlcnRpb24oKSB7XG4gICAgcmV0dXJuIGdpZ3lhQXNzZXJ0aW9uU2VydmljZS5nZXRBc3NlcnRpb24oVGZhTW9kZS52ZXJpZnksIHRoaXMucHJvdmlkZXJOYW1lLCB7XG4gICAgICByZWdUb2tlbjogdGhpcy5fc2NyZWVuU2V0LnJlZ1Rva2VuLFxuICAgIH0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIGlzQWN0aXZlUHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5hY3RpdmVQcm92aWRlcnMuc29tZShhY3RpdmVQcm92aWRlciA9PiBhY3RpdmVQcm92aWRlci5uYW1lID09PSB0aGlzLnByb3ZpZGVyTmFtZSk7XG4gIH1cbn1cbiIsImltcG9ydCB7QmFzZVNjcmVlbldpZGdldH0gZnJvbSAnLi4vLi4vLi4vQmFzZVNjcmVlbldpZGdldCc7XG5pbXBvcnQge2ZldGNoQXZhaWxhYmxlUHJvdmlkZXJzfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL2FwaXMnO1xuaW1wb3J0IHtUZmFSaXNrT3JkZXJlZFByb3ZpZGVyc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS90eXBlcyc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSBcIi4uLy4uLy4uL1NjcmVlblwiO1xuXG5leHBvcnQgY29uc3QgVEZBVmVyaWZpY2F0aW9uX0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJy5naWd5YS1jb21wb3NpdGUtY29udHJvbC10ZmEtdmVyaWZpY2F0aW9uLXdpZGdldCdcbn1cblxuZXhwb3J0IGNsYXNzIFRGQVZlcmlmaWNhdGlvbldpZGdldCBleHRlbmRzIEJhc2VTY3JlZW5XaWRnZXQ8SFRNTExJRWxlbWVudD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVEZBVmVyaWZpY2F0aW9uX0NPTlNUUztcblxuICAgIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWwpIHtcbiAgICAgICAgc3VwZXIoX3NjcmVlbiwgZWwpO1xuICAgICAgICB0aGlzLl9zY3JlZW4uX2hhc1RmYSA9IHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBhd2FpdCBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaW5pdCgpe1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGltU2NyZWVuU2V0KClcbiAgICAgICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEuZmluYWxpemVSZWdpc3RyYXRpb25OZWVkZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc2NyZWVuLl9oYXNUZmEgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5fc2NyZWVuU2V0LnJlZ1Rva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBnZXRQcm92aWRlclJlcyA9IGF3YWl0IGZldGNoQXZhaWxhYmxlUHJvdmlkZXJzKHtcbiAgICAgICAgICAgICAgICByZWdUb2tlbjogdGhpcy5fc2NyZWVuU2V0LnJlZ1Rva2VuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5hY3RpdmVQcm92aWRlcnMgPSBnZXRQcm92aWRlclJlcz8uYWN0aXZlUHJvdmlkZXJzO1xuXG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQudW5kaW1TY3JlZW5TZXQoKVxuICAgICAgICAgICAgdGhpcy5nZXRIaWdoZXN0Umlza1Byb3ZpZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEhpZ2hlc3RSaXNrUHJvdmlkZXIoKXtcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzQXJyYXkgPSB0aGlzLl9zY3JlZW5TZXQuZGF0YS50ZmFQcm92aWRlcnMuYWN0aXZlUHJvdmlkZXJzLm1hcCgocHJvdmlkZXIpPT4gVGZhUmlza09yZGVyZWRQcm92aWRlcnNbcHJvdmlkZXIubmFtZV0pO1xuICAgICAgICBjb25zdCBoaWdoZXN0Umlza1Byb3ZpZGVyID0gTWF0aC5tYXgoLi4ucHJvdmlkZXJzQXJyYXkpO1xuICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS50ZmFQcm92aWRlcnMuaGlnaGVzdFJpc2tQcm92aWRlciA9IFRmYVJpc2tPcmRlcmVkUHJvdmlkZXJzW2hpZ2hlc3RSaXNrUHJvdmlkZXJdO1xuICAgIH1cblxufVxuXG5CYXNlU2NyZWVuV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShURkFWZXJpZmljYXRpb25XaWRnZXQpO1xuIiwiaW1wb3J0IHtURkFCYXNlSXRlbV9DT05TVFMsIFRGQVZlcmlmaWNhdGlvbkJhc2VJdGVtV2lkZ2V0fSBmcm9tIFwiLi4vVEZBVmVyaWZpY2F0aW9uQmFzZUl0ZW1XaWRnZXRcIjtcbmltcG9ydCB7c2VuZEVtYWlsVmVyaWZpY2F0aW9uQ29kZSwgc2VuZEVtYWlsQ29tcGxldGVWZXJpZmljYXRpb259IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvYXBpcyc7XG5pbXBvcnQge0lUZmFFbWFpbEl0ZW0sIFRmYVByb3ZpZGVyfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL3R5cGVzJztcbmltcG9ydCB7Rm9ybUlucHV0fSBmcm9tIFwiLi4vLi4vLi4vLi4vSW5wdXRzL0Zvcm1JbnB1dFwiO1xuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSAnLi4vLi4vLi4vLi4vQmFzZUZvcm0nO1xuaW1wb3J0IHtCYXNlRm9ybVdpZGdldH0gZnJvbSAnLi4vLi4vLi4vLi4vQmFzZUZvcm1XaWRnZXQnO1xuaW1wb3J0IHtBcGlMaW5rSGVscGVyfSBmcm9tICcuLi8uLi8uLi8uLi9BcGlMaW5rSGVscGVyJztcblxuZXhwb3J0IGNvbnN0IFRGQUVtYWlsSXRlbV9DT05TVFMgPSB7XG4gICAgLi4uVEZBQmFzZUl0ZW1fQ09OU1RTLFxuICAgIGNvZGVJbnB1dFNlbGVjdG9yOiAnLmdpZ3lhLWNvZGUtaW5wdXQuZ2lneWEtaW5wdXQtdGV4dCcsXG4gICAgc2VsZWN0b3I6ICcuZ2lneWEtdGZhLXZlcmlmaWNhdGlvbi1tZXRob2RbZGF0YS10ZmEtbWV0aG9kPVwiZW1haWxcIl0gLmdpZ3lhLWNhcmQnXG59XG5leHBvcnQgY2xhc3MgVEZBVmVyaWZpY2F0aW9uRW1haWxJdGVtV2lkZ2V0IGV4dGVuZHMgVEZBVmVyaWZpY2F0aW9uQmFzZUl0ZW1XaWRnZXQge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVEZBRW1haWxJdGVtX0NPTlNUUztcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgcHJvdmlkZXJOYW1lID0gVGZhUHJvdmlkZXIuZW1haWw7XG4gICAgcHJpdmF0ZSByZXNlbmRMaW5rSGVscGVyOiBBcGlMaW5rSGVscGVyO1xuXG4gICAgY29uc3RydWN0b3IoX2Zvcm06IEJhc2VGb3JtLCBlbDogSFRNTExJRWxlbWVudCwgcHJpdmF0ZSBfZG9tVXRpbHMgPSBnaWd5YS51dGlscy5ET00pIHtcbiAgICAgICAgc3VwZXIoX2Zvcm0sIGVsKTtcbiAgICAgICAgdGhpcy5iaW5kSUQgPSB0aGlzLklEIHx8IFRGQUVtYWlsSXRlbV9DT05TVFMuc2VsZWN0b3I7XG4gICAgfVxuXG4gICAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgICAgIHRoaXMucmVzZW5kTGlua0hlbHBlci5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIHNlbmRDb2RlQXBpKCkge1xuICAgICAgICByZXR1cm4gc2VuZEVtYWlsVmVyaWZpY2F0aW9uQ29kZSgge1xuICAgICAgICAgICAgZW1haWxJRDogdGhpcy5lbWFpbFsnaWQnXSxcbiAgICAgICAgICAgIG1ldGhvZDogdGhpcy5lbWFpbFsnbGFzdE1ldGhvZCddLFxuICAgICAgICAgICAgcmVnVG9rZW46IHRoaXMuX3NjcmVlblNldC5yZWdUb2tlbixcbiAgICAgICAgICAgIGdpZ3lhQXNzZXJ0aW9uOiBhd2FpdCB0aGlzLmdldEdpZ3lhQXNzZXJ0aW9uKCksXG4gICAgICAgICAgICBsYW5nOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmNvbW11bmljYXRpb25MYW5nXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyB2ZXJpZnlDb2RlQXBpKCkge1xuICAgICAgICByZXR1cm4gc2VuZEVtYWlsQ29tcGxldGVWZXJpZmljYXRpb24oIHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuY29kZUlucHV0LnZhbHVlLFxuICAgICAgICAgICAgZ2lneWFBc3NlcnRpb246IGF3YWl0IHRoaXMuZ2V0R2lneWFBc3NlcnRpb24oKSxcbiAgICAgICAgICAgIHBodlRva2VuOiB0aGlzLl9zY3JlZW5TZXQuZGF0YS50ZmFQcm92aWRlcnMucGh2VG9rZW4sXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhZGRSZXNlbmRCdXR0b25IYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5yZXNlbmRMaW5rSGVscGVyID0gbmV3IEFwaUxpbmtIZWxwZXIodGhpcy5yZXNlbmRCdXR0b24sICgpID0+IHRoaXMuc2VuZENvZGUoKSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBjb2RlSW5wdXQoKTogSFRNTElucHV0RWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcihURkFFbWFpbEl0ZW1fQ09OU1RTLmNvZGVJbnB1dFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGVtYWlsKCk6IElUZmFFbWFpbEl0ZW0ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NyZWVuU2V0LmRhdGE/LnRmYVByb3ZpZGVycz8uZW1haWxzPy5bdGhpcy5pbmRleFN0cl07XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBsYXN0U3ltYm9scygpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5lbWFpbD8uZW1haWw/Lm1hdGNoKC8oXFwqKSsoPzxsYXN0U3ltYm9scz4uKykkLylcblxuICAgICAgICByZXR1cm4gbWF0Y2hlcz8uZ3JvdXBzPy5sYXN0U3ltYm9scztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGNvZGVGb3JtRmllbGQoKTogRm9ybUlucHV0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm0/LmdldEZpZWxkKGBlbWFpbENvZGVfJHt0aGlzLmluZGV4U3RyfWApIGFzIEZvcm1JbnB1dDtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJlc2VuZEJ1dHRvbigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcihURkFCYXNlSXRlbV9DT05TVFMucmVzZW5kQnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBzdGFydENvdW50RG93bigpIHtcbiAgICAgICAgdGhpcy5yZXNlbmRMaW5rSGVscGVyLmluaXQoKTtcbiAgICB9XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShURkFWZXJpZmljYXRpb25FbWFpbEl0ZW1XaWRnZXQpO1xuIiwiaW1wb3J0IHtmZXRjaFRmYUVtYWlsTGlzdH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9hcGlzJztcbmltcG9ydCB7SVRmYUVtYWlsSXRlbSwgSVRmYUVtYWlsTGlzdFJlc3BvbnNlLCBUZmFQcm92aWRlcn0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS90eXBlcyc7XG5pbXBvcnQge1RGQVZlcmlmaWNhdGlvbkJhc2VMaXN0V2lkZ2V0fSBmcm9tICcuLi9URkFWZXJpZmljYXRpb25CYXNlTGlzdFdpZGdldCc7XG5pbXBvcnQge1RyYW5zbGF0ZWRXaWRnZXR9IGZyb20gJy4uLy4uLy4uL1RyYW5zbGF0ZWRXaWRnZXQnO1xuaW1wb3J0IHtCYXNlRm9ybVdpZGdldH0gZnJvbSAnLi4vLi4vLi4vLi4vQmFzZUZvcm1XaWRnZXQnO1xuXG5leHBvcnQgY29uc3QgVEZBRW1haWxMaXN0X0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJy5naWd5YS10ZmEtdmVyaWZpY2F0aW9uLW1ldGhvZC50ZmEtZW1haWwtbWV0aG9kJyxcbiAgICBkZXBzOiBbVHJhbnNsYXRlZFdpZGdldF1cbn1cbmV4cG9ydCBjbGFzcyBURkFWZXJpZmljYXRpb25FbWFpbExpc3RXaWRnZXQgZXh0ZW5kcyBURkFWZXJpZmljYXRpb25CYXNlTGlzdFdpZGdldCB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBURkFFbWFpbExpc3RfQ09OU1RTO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBwcm92aWRlck5hbWUgPSBUZmFQcm92aWRlci5lbWFpbDtcblxuICAgIHByb3RlY3RlZCBhc3luYyByZWxvYWREYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fc2NyZWVuU2V0LnJlZ1Rva2VuICYmIHRoaXMuaXNBY3RpdmVQcm92aWRlcigpKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGltU2NyZWVuU2V0KCk7XG4gICAgICAgICAgICBjb25zdCBhc3NlcnRpb24gPSBhd2FpdCB0aGlzLmdldEdpZ3lhQXNzZXJ0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBnZXRFbWFpbHNSZXNwb25zZSA9IGF3YWl0IGZldGNoVGZhRW1haWxMaXN0KGFzc2VydGlvbik7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQudW5kaW1TY3JlZW5TZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5lbWFpbHMgPSB0aGlzLmdldERhdGFGcm9tTGlzdFJlc3BvbnNlKGdldEVtYWlsc1Jlc3BvbnNlKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0xpc3QoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JlZW5TZXQuZGF0YS50ZmFQcm92aWRlcnMuZW1haWxzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXREYXRhRnJvbUxpc3RSZXNwb25zZShyZXM6IElUZmFFbWFpbExpc3RSZXNwb25zZSk6IElUZmFFbWFpbEl0ZW1bXSB7XG4gICAgICAgIHJldHVybiByZXMuZW1haWxzLm1hcCgoZW1haWwpID0+ICh7ZW1haWw6IGVtYWlsLm9iZnVzY2F0ZWQsIGlkOiBlbWFpbC5pZH0pKTtcbiAgICB9XG59XG5CYXNlRm9ybVdpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoVEZBVmVyaWZpY2F0aW9uRW1haWxMaXN0V2lkZ2V0KTtcbiIsImltcG9ydCB7VEZBQmFzZUl0ZW1fQ09OU1RTLCBURkFWZXJpZmljYXRpb25CYXNlSXRlbVdpZGdldH0gZnJvbSAnLi4vVEZBVmVyaWZpY2F0aW9uQmFzZUl0ZW1XaWRnZXQnO1xuaW1wb3J0IHtzZW5kUGhvbmVDb21wbGV0ZVZlcmlmaWNhdGlvbiwgc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9hcGlzJztcbmltcG9ydCB7SVRmYVBob25lSXRlbSwgVGZhUGhvbmVTZW5kQ29kZU1ldGhvZCwgVGZhUHJvdmlkZXJ9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvdHlwZXMnO1xuaW1wb3J0IHtGb3JtSW5wdXR9IGZyb20gJy4uLy4uLy4uLy4uL0lucHV0cy9Gb3JtSW5wdXQnO1xuaW1wb3J0IHtCYXNlRm9ybVdpZGdldH0gZnJvbSAnLi4vLi4vLi4vLi4vQmFzZUZvcm1XaWRnZXQnO1xuaW1wb3J0IHtCYXNlRm9ybX0gZnJvbSAnLi4vLi4vLi4vLi4vQmFzZUZvcm0nO1xuaW1wb3J0IHtBcGlDb3VudGRvd25IZWxwZXJ9IGZyb20gJy4uLy4uLy4uLy4uL0FwaUNvdW50ZG93bkhlbHBlcic7XG5cbmV4cG9ydCBjb25zdCBURkFQaG9uZUl0ZW1fQ09OU1RTID0ge1xuICAgIC4uLlRGQUJhc2VJdGVtX0NPTlNUUyxcbiAgICBzZWxlY3RvcjogJy5naWd5YS10ZmEtdmVyaWZpY2F0aW9uLW1ldGhvZFtkYXRhLXRmYS1tZXRob2Q9XCJwaG9uZVwiXSAuZ2lneWEtY2FyZCcsXG4gICAgY29kZUlucHV0U2VsZWN0b3I6ICcuZ2lneWEtY29kZS1pbnB1dC5naWd5YS1pbnB1dC10ZXh0JyxcbiAgICBzZW5kU01TQnV0dG9uU2VsZWN0b3I6ICcuZ2lneWEtdGZhLXZlcmlmaWNhdGlvbi1hY3Rpb24tYnRuW2RhdGEtbWV0aG9kPVwic21zXCJdJyxcbiAgICBzZW5kVm9pY2VCdXR0b25TZWxlY3RvcjogJy5naWd5YS10ZmEtdmVyaWZpY2F0aW9uLWFjdGlvbi1idG5bZGF0YS1tZXRob2Q9XCJ2b2ljZVwiXScsXG4gICAgcmVzZW5kQnV0dG9uU2VsZWN0b3JTbXM6ICcuZ2lneWEtdGZhLXJlc2VuZC1jb2RlW2RhdGEtbWV0aG9kPVwic21zXCJdJyxcbiAgICByZXNlbmRCdXR0b25TZWxlY3RvclZvaWNlOiAnLmdpZ3lhLXRmYS1yZXNlbmQtY29kZVtkYXRhLW1ldGhvZD1cInZvaWNlXCJdJyxcbiAgICBjb3VudERvd25TZWxlY3RvcjogJy5naWd5YS1hcGktY291bnRkb3duJyxcbiAgICBnaWd5YUhpZGRlbkNsYXNzOiAnZ2lneWEtaGlkZGVuJ1xufVxuXG5leHBvcnQgY2xhc3MgVEZBVmVyaWZpY2F0aW9uUGhvbmVJdGVtV2lkZ2V0IGV4dGVuZHMgVEZBVmVyaWZpY2F0aW9uQmFzZUl0ZW1XaWRnZXQge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVEZBUGhvbmVJdGVtX0NPTlNUUztcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgcHJvdmlkZXJOYW1lID0gVGZhUHJvdmlkZXIucGhvbmU7XG4gICAgcHJvdGVjdGVkIGNvdW50ZG93bkhlbHBlcjtcblxuICAgIGNvbnN0cnVjdG9yKF9mb3JtOiBCYXNlRm9ybSwgZWw6IEhUTUxMSUVsZW1lbnQsIHByaXZhdGUgX2RvbVV0aWxzID0gZ2lneWEudXRpbHMuRE9NKSB7XG4gICAgICAgIHN1cGVyKF9mb3JtLCBlbCk7XG4gICAgICAgIHRoaXMuYmluZElEID0gdGhpcy5JRCB8fCBURkFQaG9uZUl0ZW1fQ09OU1RTLnNlbGVjdG9yO1xuICAgIH1cblxuICAgIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgICAgIHRoaXMuY291bnRkb3duSGVscGVyLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgc2VuZENvZGUocGFyYW1zIDoge21ldGhvZDogVGZhUGhvbmVTZW5kQ29kZU1ldGhvZH0gPSB7bWV0aG9kOiBUZmFQaG9uZVNlbmRDb2RlTWV0aG9kLnNtc30pIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuc2VuZENvZGUocGFyYW1zKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgc2VuZENvZGVBcGkocGFyYW1zIDoge21ldGhvZDogVGZhUGhvbmVTZW5kQ29kZU1ldGhvZH0gPSB7bWV0aG9kOiBUZmFQaG9uZVNlbmRDb2RlTWV0aG9kLnNtc30pIHtcbiAgICAgICAgcmV0dXJuIHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoIHtcbiAgICAgICAgICAgIHBob25lSUQ6IHRoaXMucGhvbmVbJ2lkJ10sXG4gICAgICAgICAgICBtZXRob2Q6IHBhcmFtcy5tZXRob2QsXG4gICAgICAgICAgICByZWdUb2tlbjogdGhpcy5fc2NyZWVuU2V0LnJlZ1Rva2VuLFxuICAgICAgICAgICAgZ2lneWFBc3NlcnRpb246IGF3YWl0IHRoaXMuZ2V0R2lneWFBc3NlcnRpb24oKSxcbiAgICAgICAgICAgIGxhbmc6IHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY29tbXVuaWNhdGlvbkxhbmdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFkZEFjdGlvbkJ1dHRvbkV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuYWRkQnV0dG9uSGFuZGxlcih0aGlzLnNlbmRTbXNCdXR0b24sICgpID0+IHRoaXMub25TZW5kQnV0dG9uQ2xpY2tlZChUZmFQaG9uZVNlbmRDb2RlTWV0aG9kLnNtcykpO1xuICAgICAgICB0aGlzLmFkZEJ1dHRvbkhhbmRsZXIodGhpcy5zZW5kVm9pY2VCdXR0b24sICgpID0+IHRoaXMub25TZW5kQnV0dG9uQ2xpY2tlZChUZmFQaG9uZVNlbmRDb2RlTWV0aG9kLnZvaWNlKSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFkZFJlc2VuZEJ1dHRvbkhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmNvdW50ZG93bkhlbHBlciA9IG5ldyBBcGlDb3VudGRvd25IZWxwZXIodGhpcy5jb3VudERvd25FbCk7XG4gICAgICAgIHRoaXMuYWRkQnV0dG9uSGFuZGxlcih0aGlzLnJlc2VuZFNtc0J1dHRvbiwgKCkgPT4gdGhpcy5vblJlc2VuZEJ1dHRvbkNsaWNrKFRmYVBob25lU2VuZENvZGVNZXRob2Quc21zKSk7XG4gICAgICAgIHRoaXMuYWRkQnV0dG9uSGFuZGxlcih0aGlzLnJlc2VuZFZvaWNlQnV0dG9uLCAoKSA9PiB0aGlzLm9uUmVzZW5kQnV0dG9uQ2xpY2soVGZhUGhvbmVTZW5kQ29kZU1ldGhvZC52b2ljZSkpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBvblNlbmRCdXR0b25DbGlja2VkKG1ldGhvZDogVGZhUGhvbmVTZW5kQ29kZU1ldGhvZCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRDb2RlKHttZXRob2R9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZURldmljZSgpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBvblJlc2VuZEJ1dHRvbkNsaWNrKG1ldGhvZDogVGZhUGhvbmVTZW5kQ29kZU1ldGhvZCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRDb2RlKHttZXRob2R9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5zdGFydENvdW50RG93bigpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBhdXRvbWF0aWNhbGx5QWN0aXZhdGVEZXZpY2UoKSB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMucGhvbmVbJ2xhc3RNZXRob2QnXSB8fCBUZmFQaG9uZVNlbmRDb2RlTWV0aG9kLnNtcztcbiAgICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZURldmljZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLnNlbmRDb2RlKHttZXRob2R9KTtcblxuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBzdGFydENvdW50RG93bigpe1xuICAgICAgICB0aGlzLnJlc2VuZEJ1dHRvbnMuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QuYWRkKFRGQVBob25lSXRlbV9DT05TVFMuZ2lneWFIaWRkZW5DbGFzcykpXG4gICAgICAgIGF3YWl0IHRoaXMuY291bnRkb3duSGVscGVyLnN0YXJ0Q291bnRkb3duKCk7XG4gICAgICAgIHRoaXMucmVzZW5kQnV0dG9ucy5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoVEZBUGhvbmVJdGVtX0NPTlNUUy5naWd5YUhpZGRlbkNsYXNzKSlcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgdmVyaWZ5Q29kZUFwaSgpIHtcbiAgICAgICByZXR1cm4gc2VuZFBob25lQ29tcGxldGVWZXJpZmljYXRpb24oIHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuY29kZUlucHV0LnZhbHVlLFxuICAgICAgICAgICAgZ2lneWFBc3NlcnRpb246IGF3YWl0IHRoaXMuZ2V0R2lneWFBc3NlcnRpb24oKSxcbiAgICAgICAgICAgIHBodlRva2VuOiB0aGlzLl9zY3JlZW5TZXQuZGF0YS50ZmFQcm92aWRlcnMucGh2VG9rZW5cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBjb2RlSW5wdXQoKTogSFRNTElucHV0RWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcihURkFQaG9uZUl0ZW1fQ09OU1RTLmNvZGVJbnB1dFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHBob25lKCk6IElUZmFQaG9uZUl0ZW0ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NyZWVuU2V0LmRhdGE/LnRmYVByb3ZpZGVycz8ucGhvbmVzPy5bdGhpcy5pbmRleFN0cl07XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBsYXN0U3ltYm9scygpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gdGhpcy5waG9uZT8ucGhvbmVOdW1iZXI/Lm1hdGNoKC8oPzxsYXN0U3ltYm9scz5cXGQuKykkLyk7XG5cbiAgICAgICAgcmV0dXJuIG1hdGNoZXM/Lmdyb3Vwcz8ubGFzdFN5bWJvbHM7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBjb2RlRm9ybUZpZWxkKCk6IEZvcm1JbnB1dCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtPy5nZXRGaWVsZChgcGhvbmVDb2RlXyR7dGhpcy5pbmRleFN0cn1gKSBhcyBGb3JtSW5wdXQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldCBzZW5kU21zQnV0dG9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcihURkFQaG9uZUl0ZW1fQ09OU1RTLnNlbmRTTVNCdXR0b25TZWxlY3RvcilcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHNlbmRWb2ljZUJ1dHRvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoVEZBUGhvbmVJdGVtX0NPTlNUUy5zZW5kVm9pY2VCdXR0b25TZWxlY3RvcilcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHJlc2VuZEJ1dHRvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc2VuZFZvaWNlQnV0dG9uKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMucmVzZW5kU21zQnV0dG9uLCB0aGlzLnJlc2VuZFZvaWNlQnV0dG9uXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbdGhpcy5yZXNlbmRTbXNCdXR0b25dO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgcmVzZW5kU21zQnV0dG9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcihURkFQaG9uZUl0ZW1fQ09OU1RTLnJlc2VuZEJ1dHRvblNlbGVjdG9yU21zKVxuICAgIH1cblxuICAgIHByb3RlY3RlZCBnZXQgcmVzZW5kVm9pY2VCdXR0b24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFRGQVBob25lSXRlbV9DT05TVFMucmVzZW5kQnV0dG9uU2VsZWN0b3JWb2ljZSlcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGNvdW50RG93bkVsKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoVEZBUGhvbmVJdGVtX0NPTlNUUy5jb3VudERvd25TZWxlY3RvcilcbiAgICB9XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShURkFWZXJpZmljYXRpb25QaG9uZUl0ZW1XaWRnZXQpO1xuIiwiaW1wb3J0IHtmZXRjaFRmYVBob25lTGlzdH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9hcGlzJztcbmltcG9ydCB7SVRmYVBob25lSXRlbSwgSVRmYVBob25lc0xpc3RSZXNwb25zZSwgVGZhUHJvdmlkZXJ9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvdHlwZXMnO1xuaW1wb3J0IHtURkFWZXJpZmljYXRpb25CYXNlTGlzdFdpZGdldH0gZnJvbSAnLi4vVEZBVmVyaWZpY2F0aW9uQmFzZUxpc3RXaWRnZXQnO1xuaW1wb3J0IHtmb3JtYXRPYmZ1c2NhdGVkUGhvbmVOdW1iZXJ9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvVXRpbHMvZ2VuZXJhbC9waG9uZU51bWJlclV0aWwnO1xuaW1wb3J0IHtCYXNlRm9ybVdpZGdldH0gZnJvbSAnLi4vLi4vLi4vLi4vQmFzZUZvcm1XaWRnZXQnO1xuXG5leHBvcnQgY29uc3QgVEZBUGhvbmVMaXN0X0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJy5naWd5YS10ZmEtdmVyaWZpY2F0aW9uLW1ldGhvZC50ZmEtcGhvbmUtbWV0aG9kJyxcbn1cbmV4cG9ydCBjbGFzcyBURkFWZXJpZmljYXRpb25QaG9uZUxpc3RXaWRnZXQgZXh0ZW5kcyBURkFWZXJpZmljYXRpb25CYXNlTGlzdFdpZGdldCB7XG4gICAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBURkFQaG9uZUxpc3RfQ09OU1RTO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBwcm92aWRlck5hbWUgPSBUZmFQcm92aWRlci5waG9uZTtcblxuICAgIHByb3RlY3RlZCBhc3luYyByZWxvYWREYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fc2NyZWVuU2V0LnJlZ1Rva2VuICYmIHRoaXMuaXNBY3RpdmVQcm92aWRlcigpKSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuZGltU2NyZWVuU2V0KCk7XG4gICAgICAgICAgICBjb25zdCBhc3NlcnRpb24gPSBhd2FpdCB0aGlzLmdldEdpZ3lhQXNzZXJ0aW9uKCk7XG4gICAgICAgICAgICBjb25zdCBnZXRQaG9uZXNSZXNwb25zZSA9IGF3YWl0IGZldGNoVGZhUGhvbmVMaXN0KGFzc2VydGlvbik7XG4gICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQudW5kaW1TY3JlZW5TZXQoKTtcbiAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5waG9uZXMgPSB0aGlzLmdldERhdGFGcm9tTGlzdFJlc3BvbnNlKGdldFBob25lc1Jlc3BvbnNlKVxuICAgICAgICAgICAgdGhpcy5zaG93TGlzdCgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5waG9uZXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldERhdGFGcm9tTGlzdFJlc3BvbnNlKHJlczogSVRmYVBob25lc0xpc3RSZXNwb25zZSk6IElUZmFQaG9uZUl0ZW1bXSB7XG4gICAgICAgIHJldHVybiByZXMucGhvbmVzLm1hcCgocGhvbmUpID0+IChcbiAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiBwaG9uZS5pZCxcbiAgICAgICAgICAgICAgbGFzdE1ldGhvZDogcGhvbmUubGFzdE1ldGhvZCxcbiAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IGZvcm1hdE9iZnVzY2F0ZWRQaG9uZU51bWJlcihwaG9uZSksXG4gICAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFRGQVZlcmlmaWNhdGlvblBob25lTGlzdFdpZGdldCk7XG4iLCJpbXBvcnQge0NhcmRMaXN0SXRlbVdpZGdldH0gZnJvbSAnLi4vQ2FyZExpc3RJdGVtV2lkZ2V0JztcblxuaW1wb3J0IFRmYU1hbmFnZW1lbnRTZXJ2aWNlLCB7VGZhTWFuYWdlbWVudEV2ZW50fSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL1RmYU1hbmFnZW1lbnRTZXJ2aWNlJztcbmltcG9ydCB7VHJhbnNsYXRlZFdpZGdldH0gZnJvbSAnLi4vVHJhbnNsYXRlZFdpZGdldCc7XG5cbmV4cG9ydCBjb25zdCBUZmFNYW5hZ2VtZW50SXRlbUJhc2VfQ09OU1RTID0ge1xuICBkZWxldGVEaWFsb2dCdXR0b25TZWxlY3RvcjogJy5naWd5YS1yZW1vdmUtdGZhLWRldmljZS1pY29uJyxcbiAgcmVtb3ZlQnV0dG9uU2VsZWN0b3I6ICcuZ2lneWEtYnV0dG9uLWRlbGV0ZScsXG4gIGRlbGV0ZURpYWxvZ0NhbmNlbEJ1dHRvblNlbGVjdG9yOiAnLmdpZ3lhLWJ1dHRvbi1jYW5jZWwnLFxuICBkZWxldGVEaWFsb2dDbGFzczogJ2dpZ3lhLWljb24tY2xpY2tlZCcsXG4gIGRlcHM6IFtUcmFuc2xhdGVkV2lkZ2V0XVxufTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRmYU1hbmFnZW1lbnRJdGVtQmFzZSBleHRlbmRzIENhcmRMaXN0SXRlbVdpZGdldCB7XG4gIHByb3RlY3RlZCBhYnN0cmFjdCByZWFkb25seSByZW1vdmVFdmVudDogVGZhTWFuYWdlbWVudEV2ZW50O1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVhZG9ubHkgbGlzdFVwZGF0ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQ7XG4gIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgIHN1cGVyLnVubGlua0luc3RhbmNlRWxlbWVudCgpO1xuICAgIFRmYU1hbmFnZW1lbnRTZXJ2aWNlLnVuc3Vic2NyaWJlKHRoaXMubGlzdFVwZGF0ZUV2ZW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBpbml0KCkge1xuICAgIGlmICh0aGlzLnJlbW92ZUJ1dHRvbkVsKSB7XG4gICAgICBUZmFNYW5hZ2VtZW50U2VydmljZS5vbih0aGlzLmxpc3RVcGRhdGVFdmVudCwgKCkgPT4gdGhpcy51cGRhdGVSZW1vdmVCdXR0b25TdGF0ZSgpKTtcbiAgICB9XG4gIH1cbiAgcHJvdGVjdGVkIHVwZGF0ZVJlbW92ZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9zY3JlZW5TZXQuZGF0YS50ZmFQcm92aWRlcnM/LnBob25lcz8ubGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5lbmFibGVSZW1vdmVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNhYmxlUmVtb3ZlQnV0dG9uKCk7XG4gICAgfVxuICB9XG4gIHByb3RlY3RlZCBlbmFibGVSZW1vdmVCdXR0b24oKSB7XG4gICAgdGhpcy5hZGRCdXR0b25IYW5kbGVyKHRoaXMuZGVsZXRlRGlhbG9nQnV0dG9uRWwsICgpPT4gdGhpcy5vcGVuRGVsZXRlRGlhbG9nKCkpXG4gICAgdGhpcy5kZWxldGVEaWFsb2dCdXR0b25FbD8ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICB9XG4gIHByb3RlY3RlZCBvcGVuRGVsZXRlRGlhbG9nKCl7XG4gICAgdGhpcy5hZGRCdXR0b25IYW5kbGVyKHRoaXMucmVtb3ZlQnV0dG9uRWwsICgpID0+IHRoaXMub25SZW1vdmVEZXZpY2VDbGlja2VkKCksIHRoaXMuYnV0dG9uRXZlbnRLZXkpO1xuICAgIHRoaXMuYWRkQnV0dG9uSGFuZGxlcih0aGlzLmRlbGV0ZURpYWxvZ0NhbmNlbEJ1dHRvbkVsLCAoKSA9PiB0aGlzLmNsb3NlRGVsZXRlRGlhbG9nKCkpO1xuICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5jbGFzc0xpc3Q/LmFkZChUZmFNYW5hZ2VtZW50SXRlbUJhc2VfQ09OU1RTLmRlbGV0ZURpYWxvZ0NsYXNzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBjbG9zZURlbGV0ZURpYWxvZygpe1xuICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5jbGFzc0xpc3Q/LnJlbW92ZShUZmFNYW5hZ2VtZW50SXRlbUJhc2VfQ09OU1RTLmRlbGV0ZURpYWxvZ0NsYXNzKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBkaXNhYmxlUmVtb3ZlQnV0dG9uKCkge1xuICAgIHRoaXMucmVtb3ZlQnV0dG9uSGFuZGxlcih0aGlzLmJ1dHRvbkV2ZW50S2V5KTtcbiAgICB0aGlzLmRlbGV0ZURpYWxvZ0J1dHRvbkVsPy5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gIH1cbiAgcHJvdGVjdGVkIGFzeW5jIG9uUmVtb3ZlRGV2aWNlQ2xpY2tlZCgpIHtcbiAgICB0aGlzLl9zY3JlZW4uZGltU2NyZWVuKCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMucmVtb3ZlRGV2aWNlKCk7XG4gICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIHRoaXMudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuX3NjcmVlbi51bmRpbVNjcmVlbigpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBhc3luYyByZW1vdmVEZXZpY2UoKTogUHJvbWlzZTx2b2lkPjtcblxuICBwcm90ZWN0ZWQgZ2V0IHJlbW92ZUJ1dHRvbkVsKCkge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudD8ucXVlcnlTZWxlY3RvcihUZmFNYW5hZ2VtZW50SXRlbUJhc2VfQ09OU1RTLnJlbW92ZUJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgZGVsZXRlRGlhbG9nQnV0dG9uRWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50Py5xdWVyeVNlbGVjdG9yKFRmYU1hbmFnZW1lbnRJdGVtQmFzZV9DT05TVFMuZGVsZXRlRGlhbG9nQnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldCBkZWxldGVEaWFsb2dDYW5jZWxCdXR0b25FbCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoVGZhTWFuYWdlbWVudEl0ZW1CYXNlX0NPTlNUUy5kZWxldGVEaWFsb2dDYW5jZWxCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGJ1dHRvbkV2ZW50S2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuZWxlbWVudElkfS1yZW1vdmVgO1xuICB9XG59XG4iLCJpbXBvcnQge0lHaWd5YVJlc3BvbnNlfSBmcm9tICcuLi8uLi9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCBUZmFNYW5hZ2VtZW50U2VydmljZSwge1RmYU1hbmFnZW1lbnRFdmVudH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9UZmFNYW5hZ2VtZW50U2VydmljZSc7XG5pbXBvcnQge0NhcmRMaXN0Rm9ybVdpZGdldH0gZnJvbSAnLi4vLi4vQ2FyZExpc3RGb3JtV2lkZ2V0JztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFRmYU1hbmFnZW1lbnRMaXN0QmFzZSBleHRlbmRzIENhcmRMaXN0Rm9ybVdpZGdldCB7XG4gIHByb3RlY3RlZCBhYnN0cmFjdCByZWFkb25seSByZW1vdmVFdmVudDogVGZhTWFuYWdlbWVudEV2ZW50O1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgcmVhZG9ubHkgbGlzdFVwZGF0ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQ7XG5cbiAgcHJvdGVjdGVkIHJlYWRvbmx5IGl0ZW1JZCA9ICdpZCc7XG4gIHByb3RlY3RlZCBhYnN0cmFjdCByZWFkb25seSBwcm92aWRlck5hbWU7XG5cbiAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzQWN0aXZlUHJvdmlkZXIpIHtcbiAgICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICAgIHRoaXMuc2hvd0xpc3QoKTtcbiAgICAgIFRmYU1hbmFnZW1lbnRTZXJ2aWNlLm9uKHRoaXMucmVtb3ZlRXZlbnQsICgpID0+IHRoaXMucmVsb2FkTGlzdCgpKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0IGlzQWN0aXZlUHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5hY3RpdmVQcm92aWRlcnMuc29tZShhY3RpdmVQcm92aWRlciA9PiBhY3RpdmVQcm92aWRlci5uYW1lID09PSB0aGlzLnByb3ZpZGVyTmFtZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgcmVsb2FkTGlzdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBzdXBlci5yZWxvYWRMaXN0KCk7XG4gICAgVGZhTWFuYWdlbWVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCh0aGlzLmxpc3RVcGRhdGVFdmVudCwge1xuICAgICAgbGlzdDogdGhpcy5nZXRTY3JlZW5TZXREYXRhKClcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyByZWxvYWREYXRhKCk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoRGV2aWNlcygpO1xuICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgdGhpcy5zZXRTY3JlZW5TZXREYXRhKHRoaXMuZ2V0RGF0YUZyb21MaXN0UmVzcG9uc2UocmVzcG9uc2UpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2NyZWVuU2V0RGF0YSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaG9zdEZvcm0gPSB0aGlzLl9zY3JlZW4uZ2V0Rm9ybUJ5RWxlbWVudCh0aGlzLmluc3RhbmNlRWxlbWVudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKHJlc3BvbnNlIGFzIGFueSwgaG9zdEZvcm0pO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGFzeW5jIGZldGNoRGV2aWNlcygpOiBQcm9taXNlPElHaWd5YVJlc3BvbnNlICYgYW55PjtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZ2V0U2NyZWVuU2V0RGF0YSgpOiBhbnlbXTtcbiAgcHJvdGVjdGVkIGFic3RyYWN0IHNldFNjcmVlblNldERhdGEoaXRlbXM6IGFueSk6IHZvaWQ7XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGdldERhdGFGcm9tTGlzdFJlc3BvbnNlKHJlczogSUdpZ3lhUmVzcG9uc2UgJiBhbnkpOiBhbnlbXTtcblxuXG4gIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICBUZmFNYW5hZ2VtZW50U2VydmljZS51bnN1YnNjcmliZSh0aGlzLnJlbW92ZUV2ZW50KTtcbiAgfVxufVxuXG4iLCJpbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gJy4uLy4uL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0IHtmZXRjaEF2YWlsYWJsZVByb3ZpZGVyc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9hcGlzJztcbmltcG9ydCB7U2NyZWVufSBmcm9tICcuLi8uLi9TY3JlZW4nO1xuaW1wb3J0IEdTRXJyb3JzID0gZ2lneWEuR1NFcnJvcnM7XG5cbmNvbnN0IFRmYU1hbmFnZW1lbnRXaWRnZXRfQ09OU1RTID0ge1xuICBzZWxlY3RvcjogJy5naWd5YS1jb21wb3NpdGUtY29udHJvbC10ZmEtbWFuYWdlbWVudC13aWRnZXQnLFxufTtcblxuZXhwb3J0IGNsYXNzIFRmYU1hbmFnZW1lbnRXaWRnZXQgZXh0ZW5kcyBCYXNlU2NyZWVuV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XG4gIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVGZhTWFuYWdlbWVudFdpZGdldF9DT05TVFM7XG5cbiAgY29uc3RydWN0b3IoX3NjcmVlbjogU2NyZWVuLCBlbDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICBzdXBlcihfc2NyZWVuLCBlbCk7XG4gIH1cblxuICBhc3luYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG4gICAgY29uc3QgcHJvdmlkZXJzID0gYXdhaXQgZmV0Y2hBdmFpbGFibGVQcm92aWRlcnMoKTtcbiAgICBpZihwcm92aWRlcnMuZXJyb3JDb2RlID09PSBHU0Vycm9ycy5PSyl7XG4gICAgICB0aGlzLl9zY3JlZW5TZXQuZGF0YS50ZmFQcm92aWRlcnMuYWN0aXZlUHJvdmlkZXJzID0gcHJvdmlkZXJzPy5hY3RpdmVQcm92aWRlcnM7XG4gICAgfVxuICB9XG59XG5cbkJhc2VTY3JlZW5XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFRmYU1hbmFnZW1lbnRXaWRnZXQpO1xuIiwiaW1wb3J0IHtUZmFNYW5hZ2VtZW50RXZlbnR9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvVGZhTWFuYWdlbWVudFNlcnZpY2UnO1xuaW1wb3J0IHtUZmFNYW5hZ2VtZW50SXRlbUJhc2UsIFRmYU1hbmFnZW1lbnRJdGVtQmFzZV9DT05TVFN9IGZyb20gJy4uL1RmYU1hbmFnZW1lbnRJdGVtQmFzZSc7XG5pbXBvcnQge0Jhc2VGb3JtV2lkZ2V0fSBmcm9tICcuLi8uLi8uLi9CYXNlRm9ybVdpZGdldCc7XG5cbmNvbnN0IENPTlNUUyA9IHtcbiAgc2VsZWN0b3I6ICcuZ2lneWEtdGZhLW1hbmFnZW1lbnQtbWV0aG9kW2RhdGEtdGZhLW1ldGhvZD1cImVtYWlsXCJdIC5naWd5YS1jYXJkJyxcbiAgLi4uVGZhTWFuYWdlbWVudEl0ZW1CYXNlX0NPTlNUUyxcbn07XG5cbmV4cG9ydCBjbGFzcyBUZmFNYW5hZ2VtZW50RW1haWxJdGVtV2lkZ2V0IGV4dGVuZHMgVGZhTWFuYWdlbWVudEl0ZW1CYXNlIHtcbiAgcHJvdGVjdGVkIHJlbW92ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQgPSAncmVtb3ZlRW1haWwnO1xuICBwcm90ZWN0ZWQgbGlzdFVwZGF0ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQgPSAnZW1haWxMaXN0VXBkYXRlZCc7XG4gIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gQ09OU1RTO1xuICBwcm90ZWN0ZWQgYXN5bmMgcmVtb3ZlRGV2aWNlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIFRPRE86IGltcGxlbWVudCBvbmNlIEFQSSBpcyByZWFkeVxuICB9XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShUZmFNYW5hZ2VtZW50RW1haWxJdGVtV2lkZ2V0KTtcbiIsImltcG9ydCB7ZmV0Y2hUZmFFbWFpbExpc3R9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvYXBpcyc7XG5pbXBvcnQge0lUZmFFbWFpbEl0ZW0sIElUZmFFbWFpbExpc3RSZXNwb25zZSwgVGZhTW9kZSwgVGZhUHJvdmlkZXJ9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvdHlwZXMnO1xuaW1wb3J0IHtJR2lneWFSZXNwb25zZX0gZnJvbSAnLi4vLi4vLi4vU2NyZWVuU2V0UGx1Z2luJztcbmltcG9ydCBUZmFNYW5hZ2VtZW50U2VydmljZSwge1RmYU1hbmFnZW1lbnRFdmVudH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9UZmFNYW5hZ2VtZW50U2VydmljZSc7XG5pbXBvcnQge1RmYU1hbmFnZW1lbnRMaXN0QmFzZX0gZnJvbSAnLi4vVGZhTWFuYWdlbWVudExpc3RCYXNlJztcbmltcG9ydCB0ZmFHaWd5YUFzc2VydGlvblNlcnZpY2UgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9UZmFHaWd5YUFzc2VydGlvblNlcnZpY2UnO1xuaW1wb3J0IHtCYXNlRm9ybVdpZGdldH0gZnJvbSAnLi4vLi4vLi4vQmFzZUZvcm1XaWRnZXQnO1xuXG5leHBvcnQgY29uc3QgVGZhRW1haWxNYW5hZ2VtZW50X0NPTlNUUyA9IHtcbiAgc2VsZWN0b3I6ICcuZ2lneWEtdGZhLW1hbmFnZW1lbnQtbWV0aG9kW2RhdGEtdGZhLW1ldGhvZD1cImVtYWlsXCJdJ1xufTtcblxuZXhwb3J0IGNsYXNzIFRmYU1hbmFnZW1lbnRFbWFpbExpc3RXaWRnZXQgZXh0ZW5kcyBUZmFNYW5hZ2VtZW50TGlzdEJhc2Uge1xuICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFRmYUVtYWlsTWFuYWdlbWVudF9DT05TVFM7XG5cbiAgcHJvdGVjdGVkIHJlbW92ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQgPSAncmVtb3ZlRW1haWwnO1xuICBwcm90ZWN0ZWQgbGlzdFVwZGF0ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQgPSAnZW1haWxMaXN0VXBkYXRlZCc7XG5cbiAgcHJvdGVjdGVkIHJlYWRvbmx5IHByb3ZpZGVyTmFtZSA9IFRmYVByb3ZpZGVyLmVtYWlsO1xuXG4gIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHN1cGVyLmxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50KTtcbiAgICBUZmFNYW5hZ2VtZW50U2VydmljZS5vbigncmVtb3ZlRW1haWwnLCAoKSA9PiB0aGlzLnJlbG9hZExpc3QoKSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgcmVsb2FkTGlzdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBzdXBlci5yZWxvYWRMaXN0KCk7XG4gICAgVGZhTWFuYWdlbWVudFNlcnZpY2UuZGlzcGF0Y2hFdmVudCgnZW1haWxMaXN0VXBkYXRlZCcsIHtcbiAgICAgIGxpc3Q6IHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5waG9uZXNcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXREYXRhRnJvbUxpc3RSZXNwb25zZShyZXM6IElUZmFFbWFpbExpc3RSZXNwb25zZSk6IElUZmFFbWFpbEl0ZW1bXSB7XG4gICAgcmV0dXJuIHJlcy5lbWFpbHMubWFwKChpdGVtKSA9PiAoe2VtYWlsOiBpdGVtLm9iZnVzY2F0ZWQsIGlkOiBpdGVtLmlkfSkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNldFNjcmVlblNldERhdGEoaXRlbXM6IElUZmFFbWFpbEl0ZW1bXSk6IHZvaWQge1xuICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5lbWFpbHMgPSBpdGVtcztcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRTY3JlZW5TZXREYXRhKCk6IElUZmFFbWFpbEl0ZW1bXSB7XG4gICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5lbWFpbHM7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZmV0Y2hEZXZpY2VzKCk6IFByb21pc2U8SUdpZ3lhUmVzcG9uc2UgJiBJVGZhRW1haWxMaXN0UmVzcG9uc2U+IHtcbiAgICBjb25zdCBnaWd5YUFzc2VydGlvbiA9IGF3YWl0IHRmYUdpZ3lhQXNzZXJ0aW9uU2VydmljZS5nZXRBc3NlcnRpb24oVGZhTW9kZS5lZGl0LCBUZmFQcm92aWRlci5lbWFpbCk7XG5cbiAgICBpZiAoIWdpZ3lhQXNzZXJ0aW9uKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmV0Y2hUZmFFbWFpbExpc3QoZ2lneWFBc3NlcnRpb24pO1xuICB9XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShUZmFNYW5hZ2VtZW50RW1haWxMaXN0V2lkZ2V0KTtcbiIsImltcG9ydCB7VGZhTWFuYWdlbWVudEV2ZW50fSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL1RmYU1hbmFnZW1lbnRTZXJ2aWNlJztcbmltcG9ydCB0ZmFNYW5hZ2VtZW50U2VydmljZSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL1RmYU1hbmFnZW1lbnRTZXJ2aWNlJztcbmltcG9ydCB7VGZhTWFuYWdlbWVudEl0ZW1CYXNlLCBUZmFNYW5hZ2VtZW50SXRlbUJhc2VfQ09OU1RTfSBmcm9tICcuLi9UZmFNYW5hZ2VtZW50SXRlbUJhc2UnO1xuaW1wb3J0IHtUZmFQcm92aWRlcn0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS90eXBlcyc7XG5pbXBvcnQge0Jhc2VGb3JtV2lkZ2V0fSBmcm9tICcuLi8uLi8uLi9CYXNlRm9ybVdpZGdldCc7XG5cbmNvbnN0IENPTlNUUyA9IHtcbiAgc2VsZWN0b3I6ICcuZ2lneWEtdGZhLW1hbmFnZW1lbnQtbWV0aG9kW2RhdGEtdGZhLW1ldGhvZD1cInBob25lXCJdIC5naWd5YS1jYXJkJyxcbiAgLi4uVGZhTWFuYWdlbWVudEl0ZW1CYXNlX0NPTlNUUyxcbn07XG5cbmV4cG9ydCBjbGFzcyBUZmFNYW5hZ2VtZW50UGhvbmVJdGVtV2lkZ2V0IGV4dGVuZHMgVGZhTWFuYWdlbWVudEl0ZW1CYXNlIHtcbiAgcHJvdGVjdGVkIHJlbW92ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQgPSAncmVtb3ZlUGhvbmUnO1xuICBwcm90ZWN0ZWQgbGlzdFVwZGF0ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQgPSAncGhvbmVMaXN0VXBkYXRlZCc7XG4gIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gQ09OU1RTO1xuICBwcm90ZWN0ZWQgYXN5bmMgcmVtb3ZlRGV2aWNlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRmYU1hbmFnZW1lbnRTZXJ2aWNlLnJlbW92ZVBob25lKFRmYVByb3ZpZGVyLnBob25lLCB0aGlzLmVsZW1lbnRJZCk7XG4gIH1cbn1cblxuQmFzZUZvcm1XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFRmYU1hbmFnZW1lbnRQaG9uZUl0ZW1XaWRnZXQpO1xuIiwiaW1wb3J0IHtmZXRjaFRmYVBob25lTGlzdH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS9hcGlzJztcbmltcG9ydCB7XG4gIElUZmFFbWFpbExpc3RSZXNwb25zZSxcbiAgSVRmYVBob25lSXRlbSxcbiAgSVRmYVBob25lc0xpc3RSZXNwb25zZSxcbiAgVGZhTW9kZSwgVGZhUHJvdmlkZXJcbn0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS90eXBlcyc7XG5pbXBvcnQge0lHaWd5YVJlc3BvbnNlfSBmcm9tICcuLi8uLi8uLi9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0IHtUZmFNYW5hZ2VtZW50RXZlbnR9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvVGZhTWFuYWdlbWVudFNlcnZpY2UnO1xuaW1wb3J0IHtUZmFNYW5hZ2VtZW50TGlzdEJhc2V9IGZyb20gJy4uL1RmYU1hbmFnZW1lbnRMaXN0QmFzZSc7XG5pbXBvcnQgdGZhR2lneWFBc3NlcnRpb25TZXJ2aWNlIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvVGZhR2lneWFBc3NlcnRpb25TZXJ2aWNlJztcbmltcG9ydCB7Zm9ybWF0T2JmdXNjYXRlZFBob25lTnVtYmVyfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL1V0aWxzL2dlbmVyYWwvcGhvbmVOdW1iZXJVdGlsJztcbmltcG9ydCB7QmFzZUZvcm1XaWRnZXR9IGZyb20gJy4uLy4uLy4uL0Jhc2VGb3JtV2lkZ2V0JztcblxuZXhwb3J0IGNvbnN0IFRmYVBob25lTWFuYWdlbWVudF9DT05TVFMgPSB7XG4gIHNlbGVjdG9yOiAnIC5naWd5YS10ZmEtbWFuYWdlbWVudC1tZXRob2RbZGF0YS10ZmEtbWV0aG9kPVwicGhvbmVcIl0nXG59O1xuXG5leHBvcnQgY2xhc3MgVGZhTWFuYWdlbWVudFBob25lTGlzdFdpZGdldCBleHRlbmRzIFRmYU1hbmFnZW1lbnRMaXN0QmFzZSB7XG4gIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVGZhUGhvbmVNYW5hZ2VtZW50X0NPTlNUUztcbiAgcHJvdGVjdGVkIHJlbW92ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQgPSAncmVtb3ZlUGhvbmUnO1xuICBwcm90ZWN0ZWQgbGlzdFVwZGF0ZUV2ZW50OiBUZmFNYW5hZ2VtZW50RXZlbnQgPSAncGhvbmVMaXN0VXBkYXRlZCc7XG4gIHByb3RlY3RlZCByZWFkb25seSBwcm92aWRlck5hbWUgPSBUZmFQcm92aWRlci5waG9uZTtcblxuICBwcm90ZWN0ZWQgZ2V0U2NyZWVuU2V0RGF0YSgpOiBhbnlbXSB7XG4gICAgcmV0dXJuIHRoaXMuX3NjcmVlblNldC5kYXRhLnRmYVByb3ZpZGVycy5waG9uZXM7XG4gIH1cblxuICBwcm90ZWN0ZWQgc2V0U2NyZWVuU2V0RGF0YShpdGVtczogSVRmYVBob25lSXRlbVtdKTogdm9pZCB7XG4gICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEudGZhUHJvdmlkZXJzLnBob25lcyA9IGl0ZW1zO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldERhdGFGcm9tTGlzdFJlc3BvbnNlKHJlczogSVRmYVBob25lc0xpc3RSZXNwb25zZSk6IElUZmFQaG9uZUl0ZW1bXSB7XG4gICAgcmV0dXJuIHJlcy5waG9uZXMubWFwKChwaG9uZSkgPT4gKHtcbiAgICAgIHBob25lTnVtYmVyOiBmb3JtYXRPYmZ1c2NhdGVkUGhvbmVOdW1iZXIocGhvbmUpLCBpZDogcGhvbmUuaWRcbiAgICB9KSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZmV0Y2hEZXZpY2VzKCk6IFByb21pc2U8SUdpZ3lhUmVzcG9uc2UgJiBJVGZhRW1haWxMaXN0UmVzcG9uc2U+IHtcbiAgICBjb25zdCBnaWd5YUFzc2VydGlvbiA9IGF3YWl0IHRmYUdpZ3lhQXNzZXJ0aW9uU2VydmljZS5nZXRBc3NlcnRpb24oVGZhTW9kZS5lZGl0LCBUZmFQcm92aWRlci5waG9uZSk7XG5cbiAgICBpZiAoIWdpZ3lhQXNzZXJ0aW9uKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmV0Y2hUZmFQaG9uZUxpc3QoZ2lneWFBc3NlcnRpb24pO1xuICB9XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShUZmFNYW5hZ2VtZW50UGhvbmVMaXN0V2lkZ2V0KTtcbiIsImltcG9ydCB7QmFzZUZvcm1XaWRnZXR9IGZyb20gJy4uLy4uL0Jhc2VGb3JtV2lkZ2V0JztcbmltcG9ydCB7VGZhTW9kZSwgVGZhUHJvdmlkZXJ9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvdHlwZXMnO1xuaW1wb3J0IGdpZ3lhQXNzZXJ0aW9uU2VydmljZSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL1RmYUdpZ3lhQXNzZXJ0aW9uU2VydmljZSc7XG5pbXBvcnQge0lGb3JtUmVzcG9uc2V9IGZyb20gJy4uLy4uL1NjcmVlblNldFBsdWdpbic7XG5pbXBvcnQge2dldE90cEVycm9yTWVzc2FnZX0gZnJvbSAnLi4vLi4vdXRpbHMvZXJyb3JNZXNzYWdlVXRpbCc7XG5pbXBvcnQge0Vycm9yRGlzcGxheUVsZW1lbnR9IGZyb20gJy4uLy4uL0Vycm9yRGlzcGxheUVsZW1lbnQnO1xuaW1wb3J0IHtkaXNwYXRjaEVycm9yRXZlbnQsIElSZXNwb25zZUluZm99IGZyb20gJy4uLy4uL3V0aWxzL2Vycm9yRXZlbnRVdGlsJztcblxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZVRmYVJlZ2lzdHJhdGlvbldpZGdldCBleHRlbmRzIEJhc2VGb3JtV2lkZ2V0PEhUTUxEaXZFbGVtZW50PiB7XG4gIHByb3RlY3RlZCBhYnN0cmFjdCByZWFkb25seSBwcm92aWRlck5hbWU6IFRmYVByb3ZpZGVyO1xuXG4gIHByb3RlY3RlZCBoYW5kbGVFcnJvcih7cmVzcG9uc2UsIGNvbnRleHQsIGZpZWxkTmFtZX06IHtyZXNwb25zZT86IElSZXNwb25zZUluZm8sIGNvbnRleHQ/OiBhbnksIGZpZWxkTmFtZT86IHN0cmluZ30pIHtcbiAgICB0aGlzLmRpc3BsYXlFcnJvck1lc3NhZ2UocmVzcG9uc2UsIGZpZWxkTmFtZSk7XG4gICAgZGlzcGF0Y2hFcnJvckV2ZW50KHRoaXMuX3NjcmVlbiwgdGhpcy5fZm9ybS5iaW5kSUQsIHtyZXNwb25zZSwgY29udGV4dH0pXG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgZ2V0R2lneWFBc3NlcnRpb24oKSB7XG4gICAgcmV0dXJuIGdpZ3lhQXNzZXJ0aW9uU2VydmljZS5nZXRBc3NlcnRpb24oVGZhTW9kZS5yZWdpc3RlciwgdGhpcy5wcm92aWRlck5hbWUsIHtcbiAgICAgIHJlZ1Rva2VuOiB0aGlzLl9zY3JlZW5TZXQucmVnVG9rZW4sXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGdldCBmaWVsZE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1naWd5YS1uYW1lJyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZGlzcGxheUVycm9yTWVzc2FnZShyZXNwb25zZSwgZmllbGROYW1lPzogc3RyaW5nKSB7XG4gICAgY29uc3QgdGV4dCA9IHRoaXMuZ2V0RXJyb3JUZXh0RnJvbVJlc3BvbnNlKHJlc3BvbnNlLCBmaWVsZE5hbWUpO1xuICAgIHRoaXMucmVuZGVyV2lkZ2V0RXJyb3IocmVzcG9uc2UuZXJyb3JDb2RlLCB0ZXh0KTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRFcnJvcktleUZyb21SZXNwb25zZShyZXNwb25zZTogSUZvcm1SZXNwb25zZSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGdldE90cEVycm9yTWVzc2FnZShyZXNwb25zZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgcmVuZGVyV2lkZ2V0RXJyb3IoZXJyb3JDb2RlOiBudW1iZXIsIGVycm9yTWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5fc2NyZWVuLl9lcnJvckRpc3BsYXlFbGVtZW50c1t0aGlzLmZpZWxkTmFtZV0/LmZvckVhY2goKGVycm9yRWxlbWVudDogRXJyb3JEaXNwbGF5RWxlbWVudCkgPT4ge1xuICAgICAgZXJyb3JFbGVtZW50LnNob3dFcnJvcih7XG4gICAgICAgIGVycm9yTWVzc2FnZSwgZXJyb3JDb2RlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBoaWRlRXJyb3JNZXNzYWdlKCk6IHZvaWQge1xuICAgIHRoaXMuX3NjcmVlbi5fZXJyb3JEaXNwbGF5RWxlbWVudHNbdGhpcy5maWVsZE5hbWVdPy5mb3JFYWNoKChlcnJvckVsZW1lbnQ6IEVycm9yRGlzcGxheUVsZW1lbnQpID0+IHtcbiAgICAgIGVycm9yRWxlbWVudC5oaWRlRXJyb3IoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtCYXNlU2NyZWVuV2lkZ2V0fSBmcm9tICcuLi8uLi9CYXNlU2NyZWVuV2lkZ2V0JztcbmltcG9ydCB7ZmV0Y2hBdmFpbGFibGVQcm92aWRlcnN9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvYXBpcyc7XG5pbXBvcnQge1NjcmVlbn0gZnJvbSAnLi4vLi4vU2NyZWVuJztcblxuY29uc3QgVGZhUmVnaXN0cmF0aW9uV2lkZ2V0X0NPTlNUUyA9IHtcbiAgc2VsZWN0b3I6ICcuZ2lneWEtY29tcG9zaXRlLWNvbnRyb2wtdGZhLXJlZ2lzdHJhdGlvbi13aWRnZXQnLFxufTtcblxuZXhwb3J0IGNsYXNzIFRmYVJlZ2lzdHJhdGlvbldpZGdldCBleHRlbmRzIEJhc2VTY3JlZW5XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IHtcbiAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBUZmFSZWdpc3RyYXRpb25XaWRnZXRfQ09OU1RTO1xuXG4gIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgc3VwZXIoX3NjcmVlbiwgZWwpO1xuICB9XG5cbiAgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgIHRoaXMuX3NjcmVlblNldC5kaW1TY3JlZW5TZXQoKVxuICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkID0gZmFsc2U7XG4gICAgdGhpcy5fc2NyZWVuLl9oYXNUZmEgPSB0cnVlO1xuICAgIGNvbnN0IHByb3ZpZGVycyA9IGF3YWl0IGZldGNoQXZhaWxhYmxlUHJvdmlkZXJzKCk7XG4gICAgdGhpcy5fc2NyZWVuU2V0LmRhdGEudGZhUHJvdmlkZXJzLmFjdGl2ZVByb3ZpZGVycyA9IHByb3ZpZGVycy5hY3RpdmVQcm92aWRlcnM7XG4gICAgdGhpcy5fc2NyZWVuU2V0LnVuZGltU2NyZWVuU2V0KCk7XG4gIH1cbn1cblxuQmFzZVNjcmVlbldpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoVGZhUmVnaXN0cmF0aW9uV2lkZ2V0KTtcbiIsImltcG9ydCB7QXBpTGlua0hlbHBlcn0gZnJvbSAnLi4vLi4vLi4vQXBpTGlua0hlbHBlcic7XG5pbXBvcnQge1RmYVBob25lU2VuZENvZGVNZXRob2QsIFRmYVByb3ZpZGVyfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL3R5cGVzJztcbmltcG9ydCB7SUZvcm0sIElHaWd5YVJlc3BvbnNlfSBmcm9tICcuLi8uLi8uLi9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0IHtQaG9uZU51bWJlcklucHV0fSBmcm9tICcuLi8uLi8uLi9JbnB1dHMvUGhvbmVOdW1iZXJJbnB1dCc7XG5pbXBvcnQge0Jhc2VGb3JtV2lkZ2V0fSBmcm9tICcuLi8uLi8uLi9CYXNlRm9ybVdpZGdldCc7XG5pbXBvcnQge0Zvcm1JbnB1dH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvRm9ybUlucHV0JztcbmltcG9ydCB7QmFzZVRmYVJlZ2lzdHJhdGlvbldpZGdldH0gZnJvbSAnLi4vQmFzZVRmYVJlZ2lzdHJhdGlvbldpZGdldCc7XG5pbXBvcnQge3NlbmRQaG9uZUNvbXBsZXRlVmVyaWZpY2F0aW9uLCBzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL2FwaXMnO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcblxuY29uc3QgVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXRfQ09OU1RTID0ge1xuICBzZWxlY3RvcjogJy5naWd5YS10ZmEtd2lkZ2V0LW1ldGhvZFtkYXRhLXRmYS1tZXRob2Q9XCJwaG9uZVwiXScsXG4gIGNvbnRpbnVlQnV0dG9uU2VsZWN0b3I6ICcuZ2lneWEtdGZhLWNvbnRpbnVlLWJ1dHRvbicsXG4gIHJlc2VuZEJ1dHRvblNlbGVjdG9yOiAnLmdpZ3lhLXJlc2VuZC1idXR0b24nLFxuICBjaG9vc2VNZXRob2RTZWxlY3RvcjogJy5naWd5YS10ZmEtbWV0aG9kLXNlbGVjdGlvbicsXG4gIGNob29zZU1ldGhvZE9wdGlvbk5hbWU6ICd0ZmEtbWV0aG9kLXNlbGVjdGlvbicsXG4gIGN1cnJlbnRTdGVwQXR0cmlidXRlOiAnZGF0YS1jdXJyZW50LXN0ZXAnLFxuICB2b2ljZUFsbG93ZWRBdHRyaWJ1dGU6ICdkYXRhLWFsbG93LXZvaWNlJyxcbiAgcGhvbmVOdW1iZXJQcmV2aWV3U2VsZWN0b3I6ICcuZ2lneWEtcGhvbmUtbnVtYmVyLXByZXZpZXcnLFxuICBzZW5kQ29kZVN0ZXBTZWxlY3RvcjogJy5naWd5YS10ZmEtcmVnaXN0cmF0aW9uLW1ldGhvZC1zZW5kLWNvZGUtc3RlcCcsXG4gIHZlcmlmeVN0ZXBTZWxlY3RvcjogJy5naWd5YS10ZmEtcmVnaXN0cmF0aW9uLW1ldGhvZC1zZW5kLXZlcmlmeS1zdGVwJyxcbiAgcmVtZW1iZXJEZXZpY2VTZWxlY3RvcjogJy5naWd5YS1yZW1lbWJlci1kZXZpY2UtY2hlY2tib3ggaW5wdXQnLFxuICBoaWRkZW5DbGFzczogJ2dpZ3lhLWhpZGRlbicsXG4gIHBob25lRmllbGROYW1lOiAncGhvbmUgbnVtYmVyJyxcbiAgZGVwczogW1Bob25lTnVtYmVySW5wdXQsIEZvcm1JbnB1dF1cbn07XG5cbmNvbnN0IGVudW0gV2lkZ2V0U3RhdGUge1xuICBzZW5kQ29kZSA9ICdzZW5kQ29kZScsXG4gIHZlcmlmeSA9ICd2ZXJpZnknLFxufVxuXG5leHBvcnQgY2xhc3MgVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXQgZXh0ZW5kcyBCYXNlVGZhUmVnaXN0cmF0aW9uV2lkZ2V0IHtcbiAgcHVibGljIHN0YXRpYyBDT05TVFMgPSBUZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldF9DT05TVFM7XG4gIHByb3RlY3RlZCByZWFkb25seSBwcm92aWRlck5hbWUgPSBUZmFQcm92aWRlci5waG9uZTtcbiAgcHJpdmF0ZSBwaHZUb2tlbjogc3RyaW5nO1xuICBwcml2YXRlIHJlc2VuZFBob25lTGluazogQXBpTGlua0hlbHBlcjtcblxuICBwdWJsaWMgYXN5bmMgbGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgcHVibGljIHVubGlua0luc3RhbmNlRWxlbWVudCgpIHtcbiAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdCgpIHtcbiAgICB0aGlzLl9zY3JlZW5TZXQuZGltU2NyZWVuU2V0KCk7XG4gICAgdGhpcy5hZGRFdmVudEhhbmRsZXJzKCk7XG5cbiAgICB0aGlzLnJlc2VuZFBob25lTGluayA9IG5ldyBBcGlMaW5rSGVscGVyKHRoaXMucmVzZW5kQnV0dG9uLCAoKSA9PiB0aGlzLnNlbmRDb2RlKCkpO1xuICAgIGlmICh0aGlzLmhhc1ZvaWNlQ2FwYWJpbGl0eSkge1xuICAgICAgdGhpcy5jaG9vc2VNZXRob2RFbD8uY2xhc3NMaXN0LnJlbW92ZShUZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldF9DT05TVFMuaGlkZGVuQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNob29zZU1ldGhvZEVsPy5jbGFzc0xpc3QuYWRkKFRmYVJlZ2lzdHJhdGlvblBob25lV2lkZ2V0X0NPTlNUUy5oaWRkZW5DbGFzcyk7XG4gICAgfVxuICAgIHRoaXMuX3NjcmVlblNldC51bmRpbVNjcmVlblNldCgpO1xuICAgIHRoaXMuc2hvd1NlbmRDb2RlU3RlcCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93U2VuZENvZGVTdGVwKCkge1xuICAgIHRoaXMud2lkZ2V0U3RhdGUgPSBXaWRnZXRTdGF0ZS5zZW5kQ29kZTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucGhvbmVOdW1iZXJGb3JtRmllbGQ/LmZvY3VzKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG93VmVyaWZ5U3RlcCgpIHtcbiAgICB0aGlzLnJlc2VuZFBob25lTGluay5pbml0KCk7XG4gICAgdGhpcy53aWRnZXRTdGF0ZSA9IFdpZGdldFN0YXRlLnZlcmlmeTtcbiAgICB0aGlzLnByZXZpZXdFbC5pbm5lckhUTUwgPSB0aGlzLnBob25lTnVtYmVyO1xuICAgIHRoaXMuY29kZUZvcm1GaWVsZD8ucHJlUG9wdWxhdGUoJycpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jb2RlRm9ybUZpZWxkPy5pbnN0YW5jZUVsZW1lbnQ/LmZvY3VzKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBhZGRFdmVudEhhbmRsZXJzKCkge1xuICAgIHRoaXMuYWRkQnV0dG9uSGFuZGxlcih0aGlzLnNlbmRDb2RlQnV0dG9uLCAoKSA9PiB0aGlzLnN1Ym1pdFBob25lTnVtYmVyKCkpO1xuICAgIHRoaXMuYWRkQnV0dG9uSGFuZGxlcih0aGlzLnZlcmlmaWNhdGlvbkJ1dHRvbiwgKCkgPT4gdGhpcy5zdWJtaXRDb2RlKCkpO1xuICAgIHRoaXMuYWRkRG9tRXZlbnRMaXN0ZW5lcih0aGlzLnByZXZpZXdFbCwgJ2NsaWNrJywgKCkgPT4gdGhpcy5zaG93U2VuZENvZGVTdGVwKCkpO1xuICAgIHRoaXMuYWRkRG9tRXZlbnRMaXN0ZW5lcih0aGlzLl9mb3JtLmluc3RhbmNlRWxlbWVudCwgJ2ZpZWxkQ2hhbmdlZCcsICgpID0+IHRoaXMuaGlkZUVycm9yTWVzc2FnZSgpKTtcbiAgICB0aGlzLnN1Ym1pdE9uRW50ZXIodGhpcy5zZW5kQ29kZVN0ZXBFbCwgdGhpcy5zZW5kQ29kZUJ1dHRvbik7XG4gICAgdGhpcy5zdWJtaXRPbkVudGVyKHRoaXMuc2VuZFZlcmlmaWNhdGlvblN0ZXBFbCwgdGhpcy52ZXJpZmljYXRpb25CdXR0b24pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdWJtaXRQaG9uZU51bWJlcigpIHtcbiAgICB0aGlzLmhpZGVFcnJvck1lc3NhZ2UoKTtcbiAgICB0aGlzLnBob25lTnVtYmVyRm9ybUZpZWxkLm1hcmtBc0RpcnR5KCk7XG4gICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHRoaXMudmFsaWRhdGVDaGlsZEZpZWxkKHRoaXMucGhvbmVOdW1iZXJGb3JtRmllbGQpO1xuXG4gICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZW5kQ29kZSgpO1xuXG4gICAgaWYgKHJlc3VsdD8uZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LKSB7XG4gICAgICB0aGlzLnNob3dWZXJpZnlTdGVwKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kQ29kZSgpOiBQcm9taXNlPElHaWd5YVJlc3BvbnNlPiB7XG4gICAgdGhpcy5fc2NyZWVuU2V0LmRpbVNjcmVlblNldCgpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoe1xuICAgICAgICBwaG9uZTogdGhpcy5waG9uZU51bWJlcixcbiAgICAgICAgbWV0aG9kOiB0aGlzLnNlbGVjdGVkTWV0aG9kLFxuICAgICAgICByZWdUb2tlbjogdGhpcy5fc2NyZWVuU2V0LnJlZ1Rva2VuLFxuICAgICAgICBnaWd5YUFzc2VydGlvbjogYXdhaXQgdGhpcy5nZXRHaWd5YUFzc2VydGlvbigpLFxuICAgICAgICBsYW5nOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmNvbW11bmljYXRpb25MYW5nXG4gICAgICB9KTtcbiAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgdGhpcy5waHZUb2tlbiA9IHJlc3BvbnNlWydwaHZUb2tlbiddO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvcih7XG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgZmllbGROYW1lOiB0aGlzLnBob25lTnVtYmVyRmllbGROYW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aGlzLmhhbmRsZUVycm9yKHtcbiAgICAgICAgcmVzcG9uc2U6IHtlcnJvckNvZGU6IEdTRXJyb3JzLkdFTkVSQUxfU0VSVkVSX0VSUk9SfSxcbiAgICAgICAgY29udGV4dDogZXJyXG4gICAgICB9KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5fc2NyZWVuU2V0LnVuZGltU2NyZWVuU2V0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzdWJtaXRDb2RlKCkge1xuICAgIHRoaXMuaGlkZUVycm9yTWVzc2FnZSgpO1xuICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0aGlzLnZhbGlkYXRlQ2hpbGRGaWVsZCh0aGlzLmNvZGVGb3JtRmllbGQpO1xuICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3NjcmVlblNldC5kYXRhLmZpbmFsaXplUmVnaXN0cmF0aW9uTmVlZGVkID0gdHJ1ZTtcblxuICAgIHRoaXMuX3NjcmVlblNldC5kaW1TY3JlZW5TZXQoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29tcGxldGVWZXJpZmljYXRpb25SZXMgPSBhd2FpdCBzZW5kUGhvbmVDb21wbGV0ZVZlcmlmaWNhdGlvbih7XG4gICAgICAgIGNvZGU6IHRoaXMuY3VycmVudENvZGUsXG4gICAgICAgIGdpZ3lhQXNzZXJ0aW9uOiBhd2FpdCB0aGlzLmdldEdpZ3lhQXNzZXJ0aW9uKCksXG4gICAgICAgIHBodlRva2VuOiB0aGlzLnBodlRva2VuXG4gICAgICB9KTtcblxuICAgICAgaWYgKGNvbXBsZXRlVmVyaWZpY2F0aW9uUmVzLmVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSykge1xuICAgICAgICBjb25zdCBzdWJtaXRBcGlQYXJhbXMgPSB7XG4gICAgICAgICAgZ2lneWFBc3NlcnRpb246IGF3YWl0IHRoaXMuZ2V0R2lneWFBc3NlcnRpb24oKSxcbiAgICAgICAgICBwcm92aWRlckFzc2VydGlvbjogY29tcGxldGVWZXJpZmljYXRpb25SZXNbJ3Byb3ZpZGVyQXNzZXJ0aW9uJ10sXG4gICAgICAgICAgdGVtcERldmljZTogIXRoaXMucmVtZW1iZXJEZXZpY2UsXG4gICAgICAgICAgcmVnVG9rZW46IHRoaXMuX3NjcmVlblNldC5yZWdUb2tlblxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMuX2Zvcm0uc3VibWl0KHtcbiAgICAgICAgICBjdXN0b21TdWJtaXRBcGk6IGdpZ3lhLmFjY291bnRzLnRmYS5maW5hbGl6ZVRGQSxcbiAgICAgICAgICBzdWJtaXRBcGlQYXJhbXM6IHN1Ym1pdEFwaVBhcmFtcyxcbiAgICAgICAgICBvbkFmdGVyU3VibWl0Q2FsbGJhY2s6IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSAhPSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlFcnJvck1lc3NhZ2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHtyZXNwb25zZTogY29tcGxldGVWZXJpZmljYXRpb25SZXN9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuaGFuZGxlRXJyb3Ioe1xuICAgICAgICByZXNwb25zZToge2Vycm9yQ29kZTogR1NFcnJvcnMuR0VORVJBTF9TRVJWRVJfRVJST1J9LFxuICAgICAgICBjb250ZXh0OiBlcnJcbiAgICAgIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLl9zY3JlZW5TZXQudW5kaW1TY3JlZW5TZXQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBzZW5kQ29kZUJ1dHRvbigpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3Qgc3RlcFNlbGVjdG9yID0gVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXRfQ09OU1RTLnNlbmRDb2RlU3RlcFNlbGVjdG9yO1xuICAgIGNvbnN0IGJ1dHRvblNlbGVjdG9yID0gVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXRfQ09OU1RTLmNvbnRpbnVlQnV0dG9uU2VsZWN0b3I7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7c3RlcFNlbGVjdG9yfSAke2J1dHRvblNlbGVjdG9yfWApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgdmVyaWZpY2F0aW9uQnV0dG9uKCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBzdGVwU2VsZWN0b3IgPSBUZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldF9DT05TVFMudmVyaWZ5U3RlcFNlbGVjdG9yO1xuICAgIGNvbnN0IGJ1dHRvblNlbGVjdG9yID0gVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXRfQ09OU1RTLmNvbnRpbnVlQnV0dG9uU2VsZWN0b3I7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCR7c3RlcFNlbGVjdG9yfSAke2J1dHRvblNlbGVjdG9yfWApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcmVzZW5kQnV0dG9uKCk6IEhUTUxFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcihUZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldF9DT05TVFMucmVzZW5kQnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXQgd2lkZ2V0U3RhdGUoY3VycmVudFN0YXRlOiBXaWRnZXRTdGF0ZSkge1xuICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LnNldEF0dHJpYnV0ZShUZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldF9DT05TVFMuY3VycmVudFN0ZXBBdHRyaWJ1dGUsIGN1cnJlbnRTdGF0ZSk7XG4gIH1cblxuXG4gIHByaXZhdGUgZ2V0IGhhc1ZvaWNlQ2FwYWJpbGl0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFRmYVJlZ2lzdHJhdGlvblBob25lV2lkZ2V0X0NPTlNUUy52b2ljZUFsbG93ZWRBdHRyaWJ1dGUpID09PSAndHJ1ZSc7XG4gIH1cblxuICBwcml2YXRlIGdldCBjaG9vc2VNZXRob2RFbCgpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXRfQ09OU1RTLmNob29zZU1ldGhvZFNlbGVjdG9yKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IHNlbmRWZXJpZmljYXRpb25TdGVwRWwoKTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFRmYVJlZ2lzdHJhdGlvblBob25lV2lkZ2V0X0NPTlNUUy52ZXJpZnlTdGVwU2VsZWN0b3IpIGFzIEhUTUxFbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgc2VuZENvZGVTdGVwRWwoKTogSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFRmYVJlZ2lzdHJhdGlvblBob25lV2lkZ2V0X0NPTlNUUy5zZW5kQ29kZVN0ZXBTZWxlY3RvcikgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgfVxuXG4gIHByaXZhdGUgZ2V0IHNlbGVjdGVkTWV0aG9kKCkge1xuICAgIGlmICghdGhpcy5oYXNWb2ljZUNhcGFiaWxpdHkpIHtcbiAgICAgIHJldHVybiBUZmFQaG9uZVNlbmRDb2RlTWV0aG9kLnNtcztcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25OYW1lID0gVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXRfQ09OU1RTLmNob29zZU1ldGhvZE9wdGlvbk5hbWU7XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTE9wdGlvbkVsZW1lbnQ+KGBpbnB1dFtuYW1lPVwiJHtvcHRpb25OYW1lfVwiXTpjaGVja2VkYCk/LnZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgY3VycmVudENvZGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb2RlRm9ybUZpZWxkPy5nZXRWYWx1ZSgpIGFzIHN0cmluZztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGhvc3RGb3JtKCk6IElGb3JtIHtcbiAgICByZXR1cm4gdGhpcy5fc2NyZWVuLmdldEZvcm1CeUVsZW1lbnQodGhpcy5pbnN0YW5jZUVsZW1lbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcGhvbmVOdW1iZXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5waG9uZU51bWJlckZvcm1GaWVsZC5nZXRWYWx1ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcHJldmlld0VsKCk6IEhUTUxFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZUVsZW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihUZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldF9DT05TVFMucGhvbmVOdW1iZXJQcmV2aWV3U2VsZWN0b3IpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcGhvbmVOdW1iZXJGb3JtRmllbGQoKTogUGhvbmVOdW1iZXJJbnB1dCB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm0uZ2V0RmllbGQoJ3RmYVBob25lTnVtYmVyJykgYXMgUGhvbmVOdW1iZXJJbnB1dDtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQgcmVtZW1iZXJEZXZpY2UoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucmVtZW1iZXJEZXZpY2VDaGVja2JveEVsPy5jaGVja2VkO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcmVtZW1iZXJEZXZpY2VDaGVja2JveEVsKCk6IEhUTUxJbnB1dEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFRmYVJlZ2lzdHJhdGlvblBob25lV2lkZ2V0X0NPTlNUUy5yZW1lbWJlckRldmljZVNlbGVjdG9yKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0IGNvZGVGb3JtRmllbGQoKTogRm9ybUlucHV0IHtcbiAgICByZXR1cm4gdGhpcy5fZm9ybS5nZXRGaWVsZCgndGZhQ29kZScpIGFzIFBob25lTnVtYmVySW5wdXQ7XG4gIH1cblxuICBwcml2YXRlIGdldCBwaG9uZU51bWJlckZpZWxkTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5waG9uZU51bWJlckZvcm1GaWVsZD8uZGlzcGxheU5hbWUgfHwgVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXRfQ09OU1RTLnBob25lRmllbGROYW1lO1xuICB9XG59XG5cbkJhc2VGb3JtV2lkZ2V0LmFkZFdpZGdldFRvTGlicmFyeShUZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldCk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgeyBCYXNlU2NyZWVuV2lkZ2V0IH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlU2NyZWVuV2lkZ2V0JztcbmltcG9ydCB7IElGb3JtIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0IHsgSVBsdWdpblBhcmFtcyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUGx1Z2luUGFyYW1zJztcbmltcG9ydCB7IElQbHVnaW5UZW1wbGF0ZXMgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5QbHVnaW4vYXBwL2ludGVyZmFjZXMvSVBsdWdpblRlbXBsYXRlcyc7XG5pbXBvcnQgeyBJUGx1Z2luQ1NTIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9pbnRlcmZhY2VzL0lQbHVnaW5DU1MnO1xuaW1wb3J0IHsgU2NyZWVuIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuaW1wb3J0IHsgQmFzZVBsdWdpbiB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvQmFzZVBsdWdpbic7XG5cbmxldCBuZXh0VGZhQ29udGFpbmVySWQgPSAwO1xuZXhwb3J0IGNvbnN0IFRmYVdpZGdldF9DT05TVFMgPSB7XG4gICAgc2VsZWN0b3I6ICdkaXYuZ2lneWEtdGZhJyxcbn07XG5EZWVwRnJlZXplKFRmYVdpZGdldF9DT05TVFMpO1xuZXhwb3J0IGNsYXNzIFRmYVdpZGdldCBleHRlbmRzIEJhc2VTY3JlZW5XaWRnZXQ8SFRNTERpdkVsZW1lbnQ+IGltcGxlbWVudHMgSUZvcm0ge1xuICAgIHB1YmxpYyBiaW5kSUQ6IHN0cmluZztcbiAgICBwcml2YXRlIHRmYUNvbnRhaW5lcklkOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfaW5zdGFuY2U6IEJhc2VQbHVnaW48SVBsdWdpblBhcmFtcywgSVBsdWdpblRlbXBsYXRlcywgSVBsdWdpbkNTUz47XG5cbiAgICBwdWJsaWMgc3RhdGljIENPTlNUUyA9IFRmYVdpZGdldF9DT05TVFM7XG5cbiAgICBjb25zdHJ1Y3Rvcihfc2NyZWVuOiBTY3JlZW4sIGVsOiBIVE1MRGl2RWxlbWVudCkge1xuICAgICAgICBzdXBlcihfc2NyZWVuLCBlbCk7XG5cbiAgICAgICAgdGhpcy5iaW5kSUQgPSB0aGlzLnB1Ymxpc2hJRCA/IHRoaXMuSUQgOiBUZmFXaWRnZXRfQ09OU1RTLnNlbGVjdG9yO1xuICAgICAgICBfc2NyZWVuLl9oYXNUZmEgPSB0cnVlO1xuXG4gICAgICAgIC8vIFRPRE8gQ2hhbmdlIHVzZSB0aGUgc2FtZSBpZCBmb3IgdGhlIHNhbWUgc2NyZWVuU2V0IGluc3RhbmNlLCByZWdhcmRsZXNzIG9mIGhvdyBtYW55IHRpbWVzIGl0IGlzIHJldXNlZCwgdW5saWtlIGV4aXN0aW5nIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBhIG5ldyBpZCBlYWNoIHRpbWVcbiAgICAgICAgdGhpcy50ZmFDb250YWluZXJJZCA9ICh0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmNvbnRhaW5lcklEIHx8ICdzaG93U2NyZWVuU2V0JykgKyAnX3Nob3dUZmFVSV8nICsgbmV4dFRmYUNvbnRhaW5lcklkKys7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGxpbmtJbnN0YW5jZUVsZW1lbnQocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBzdXBlci5saW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlRWxlbWVudC5pbm5lckhUTUwgPSAnPGRpdiBpZD1cIicgKyB0aGlzLnRmYUNvbnRhaW5lcklkICsgJ1wiPjwvZGl2Pic7XG5cbiAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5kaW1TY3JlZW4oKTtcbiAgICAgICAgICAgIGlmICghdGhpcy53aWRnZXRQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpZGdldFBhcmFtcyA9IHRoaXMucGFyYW1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuc2hvd1RmYVVJKHRoaXMucGFyYW1zLCB0aGlzLndpZGdldFBhcmFtcywge1xuICAgICAgICAgICAgICAgICAgICBkb250SGFuZGxlU2NyZWVuU2V0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVnVG9rZW46IHRoaXMuX3NjcmVlblNldC5kYXRhLnJlZ1Rva2VuLFxuICAgICAgICAgICAgICAgICAgICBsYW5nOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmxhbmcsXG4gICAgICAgICAgICAgICAgICAgIGNvbW11bmljYXRpb25MYW5nOiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmNvbW11bmljYXRpb25MYW5nLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJRDogdGhpcy50ZmFDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgY3NzUHJlZml4OiAnZGl2LmdpZ3lhLXRmYScsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnYXV0bycsIC8vLyBUT0RPOiB0ZmEgaXMgdGFraW5nIGRlZmF1bHQgd2lkdGggZnJvbSBhcGlMaXN0Li4gdGhpcyBpcyB0byBkaXNhYmxlIGl0LCBidXQgdGhpcyBzaG91bGQgYmUgY29uZGl0aW9uZWQuXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5fc2NyZWVuU2V0LmluamVjdGlvbkluZm8ubWV0aG9kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb25Eb25lOiBlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5kaW1TY3JlZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5vblNjcmVlblJlc3BvbnNlKGUucmVzcG9uc2UsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkxvYWQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi51bmRpbVNjcmVlbigpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkFmdGVyU2NyZWVuTG9hZDogZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiBlLmNhcHRpb24gJiYgZS5jYXB0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5vdmVycmlkZVRlbXBsYXRlQ2FwdGlvbihlLmNhcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlblNldC5zZXRDYXB0aW9uKGUuY2FwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuY2VudGVyTW9kYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRoaXMuX3NjcmVlblNldC5wYXJhbXNbJ2lnbm9yZUFwaVF1ZXVlJ10sIC8vIGJvb3RzdHJhcCBtYXkgbm90IGhhdmUgZmluaXNoZWRcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tTGFuZzogdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5jdXN0b21MYW5nLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0YW5jZUVsZW1lbnQpIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9ICcnOyAvLyBUbyBtYWtlIHN1cmUgbm8gSUQgY29uZmxpY3RzIHdpbGwgYmUgZ2VuZXJhdGVkXG5cbiAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlKSB0aGlzLl9pbnN0YW5jZS5kaXNwb3NlKCk7XG5cbiAgICAgICAgc3VwZXIudW5saW5rSW5zdGFuY2VFbGVtZW50KCk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHJlbmRlcldpZGdldCgpOiB2b2lkIHtcbiAgICAgICAgLy9yZS1yZW5kZXIgdGhlIHBsdWdpbiB3aXRoIHRoZSBuZXcgbmV3IGNvbmRpdGlvbmFsIHZhbHVlcy5cbiAgICAgICAgZ2lneWEuYWNjb3VudHMuc2hvd1RmYVVJKHRoaXMud2lkZ2V0UGFyYW1zLCB7XG4gICAgICAgICAgICBkb250SGFuZGxlU2NyZWVuU2V0OiBmYWxzZSxcbiAgICAgICAgICAgIHJlZ1Rva2VuOiB0aGlzLl9zY3JlZW5TZXQuZGF0YS5yZWdUb2tlbixcbiAgICAgICAgICAgIGNvbnRhaW5lcklEOiB0aGlzLnRmYUNvbnRhaW5lcklkLFxuICAgICAgICAgICAgY3NzUHJlZml4OiAnZGl2LmdpZ3lhLXRmYScsXG4gICAgICAgICAgICB3aWR0aDogJ2F1dG8nLCAvLy8gVE9ETzogdGZhIGlzIHRha2luZyBkZWZhdWx0IHdpZHRoIGZyb20gYXBpTGlzdC4uIHRoaXMgaXMgdG8gZGlzYWJsZSBpdCwgYnV0IHRoaXMgc2hvdWxkIGJlIGNvbmRpdGlvbmVkLlxuICAgICAgICAgICAgZGV2aWNlVHlwZTogdGhpcy5fc2NyZWVuU2V0LnBhcmFtcy5kZXZpY2VUeXBlLFxuICAgICAgICAgICAgc291cmNlOiB0aGlzLl9zY3JlZW5TZXQuaW5qZWN0aW9uSW5mby5tZXRob2ROYW1lLFxuICAgICAgICAgICAgb25Eb25lOiBlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW4uZGltU2NyZWVuKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuU2V0Lm9uU2NyZWVuUmVzcG9uc2UoZS5yZXNwb25zZSwgdGhpcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Mb2FkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2NyZWVuLnVuZGltU2NyZWVuKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclNjcmVlbkxvYWQ6IGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlICYmIGUuY2FwdGlvbiAmJiBlLmNhcHRpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjcmVlbi5vdmVycmlkZVRlbXBsYXRlQ2FwdGlvbihlLmNhcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuc2V0Q2FwdGlvbihlLmNhcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JlZW5TZXQuY2VudGVyTW9kYWwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRJbnN0YW5jZTogaW5zdGFuY2VzID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IGluc3RhbmNlcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdGhpcy5fc2NyZWVuU2V0LnBhcmFtc1snaWdub3JlQXBpUXVldWUnXSwgLy8gYm9vdHN0cmFwIG1heSBub3QgaGF2ZSBmaW5pc2hlZFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yZW5kZXJXaWRnZXRVSSA9IGZhbHNlO1xuICAgIH1cbn1cbkJhc2VTY3JlZW5XaWRnZXQuYWRkV2lkZ2V0VG9MaWJyYXJ5KFRmYVdpZGdldCk7XG4iLCJpbXBvcnQgeyBEZWVwRnJlZXplIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQge0Jhc2VTY3JlZW5XaWRnZXR9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNjcmVlbldpZGdldCc7XG5pbXBvcnQgeyBTY3JlZW4gfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbic7XG5cbmV4cG9ydCBjb25zdCBUcmFuc2xhdGVkX0NPTlNUUyA9IHtcbiAgICBzZWxlY3RvcjogJypbZGF0YS10cmFuc2xhdGlvbi1rZXldJyxcbiAgICB0cmFuc2xhdGlvbktleUF0dHJpYnV0ZTogJ2RhdGEtdHJhbnNsYXRpb24ta2V5Jyxcbn07XG5EZWVwRnJlZXplKFRyYW5zbGF0ZWRfQ09OU1RTKTtcbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGVkV2lkZ2V0IGV4dGVuZHMgQmFzZVNjcmVlbldpZGdldDxIVE1MRGl2RWxlbWVudD4ge1xuICAgIHB1YmxpYyBzdGF0aWMgQ09OU1RTID0gVHJhbnNsYXRlZF9DT05TVFM7XG4gICAgcHJvdGVjdGVkIHJlbmRlcmVkVHJhbnNsYXRpb25LZXk6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKF9zY3JlZW46IFNjcmVlbiwgZWw6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIC8vIFR1cm4gcmVzZXRDU1Mgb2ZmLlxuICAgICAgICBzdXBlcihfc2NyZWVuLCBlbCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsaW5rSW5zdGFuY2VFbGVtZW50KHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIubGlua0luc3RhbmNlRWxlbWVudChwYXJlbnQpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlVHJhbnNsYXRpb24oKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdW5saW5rSW5zdGFuY2VFbGVtZW50KCkge1xuICAgICAgICBzdXBlci51bmxpbmtJbnN0YW5jZUVsZW1lbnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgY2FzZSB3aGVyZSB0cmFuc2xhdGlvbiBrZXkgaXMgdXBkYXRlZCB2aWEgY29uZGl0aW9uYWwgYXR0ci5cbiAgICAgKi9cbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHN1cGVyLmV2YWx1YXRlQ29uZGl0aW9uYWxBdHRyaWJ1dGVzKCk7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVHJhbnNsYXRpb25LZXkgIT09IHRoaXMuaW5zdGFuY2VFbGVtZW50LmdldEF0dHJpYnV0ZShUcmFuc2xhdGVkV2lkZ2V0LkNPTlNUUy50cmFuc2xhdGlvbktleUF0dHJpYnV0ZSkudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFuc2xhdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplIHRyYW5zbGF0aW9uIGtleSBsb3dlcmNhc2UuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGdldFRyYW5zbGF0aW9uS2V5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoVHJhbnNsYXRlZFdpZGdldC5DT05TVFMudHJhbnNsYXRpb25LZXlBdHRyaWJ1dGUpLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRyYW5zbGF0ZWQgdGV4dC5cbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgdXBkYXRlVHJhbnNsYXRpb24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMucmVuZGVyZWRUcmFuc2xhdGlvbktleSA9IHRoaXMuZ2V0VHJhbnNsYXRpb25LZXkoKTtcbiAgICAgICAgaWYgKHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY3VzdG9tTGFuZyAmJiB0aGlzLl9zY3JlZW5TZXQucGFyYW1zLmN1c3RvbUxhbmdbdGhpcy5yZW5kZXJlZFRyYW5zbGF0aW9uS2V5XSkge1xuICAgICAgICAgICAgLy8gVW5saW5rIGFueSB3aWRnZXRzIGJlZm9yZSBIVE1MIGlzIGNsZWFyZWQuXG4gICAgICAgICAgICB0aGlzLnVubGlua1dpZGdldHMoKTtcblxuICAgICAgICAgICAgLy8gUmVwbGFjZSBpbm5lciBIVE1MLlxuICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VFbGVtZW50LmlubmVySFRNTCA9IHRoaXMuX3NjcmVlblNldC5wYXJhbXMuY3VzdG9tTGFuZ1t0aGlzLnJlbmRlcmVkVHJhbnNsYXRpb25LZXldO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5saW5rV2lkZ2V0cygpO1xuICAgICAgICB9XG4gICAgfVxufVxuQmFzZVNjcmVlbldpZGdldC5hZGRXaWRnZXRUb0xpYnJhcnkoVHJhbnNsYXRlZFdpZGdldCk7XG4iLCJleHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUGFzc2tleU1hbmFnZXIvUGFzc2tleU1hbmFnZXJXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3NrZXlNYW5hZ2VyL1Bhc3NrZXlDYXJkV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9URkEvdmVyaWZpY2F0aW9uL1RGQVZlcmlmaWNhdGlvbldpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVEZBL3ZlcmlmaWNhdGlvbi9waG9uZS9URkFWZXJpZmljYXRpb25QaG9uZUxpc3RXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RGQS92ZXJpZmljYXRpb24vcGhvbmUvVEZBVmVyaWZpY2F0aW9uUGhvbmVJdGVtV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gXCJzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVEZBL3ZlcmlmaWNhdGlvbi9lbWFpbC9URkFWZXJpZmljYXRpb25FbWFpbEl0ZW1XaWRnZXRcIjtcbmV4cG9ydCAqIGZyb20gXCJzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVEZBL3ZlcmlmaWNhdGlvbi9lbWFpbC9URkFWZXJpZmljYXRpb25FbWFpbExpc3RXaWRnZXRcIjtcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFNYW5hZ2VtZW50L1RmYU1hbmFnZW1lbnRXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RmYU1hbmFnZW1lbnQvcGhvbmUvVGZhTWFuYWdlbWVudFBob25lTGlzdFdpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVGZhTWFuYWdlbWVudC9waG9uZS9UZmFNYW5hZ2VtZW50UGhvbmVJdGVtV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFNYW5hZ2VtZW50L2VtYWlsL1RmYU1hbmFnZW1lbnRFbWFpbExpc3RXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RmYU1hbmFnZW1lbnQvZW1haWwvVGZhTWFuYWdlbWVudEVtYWlsSXRlbVdpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVGZhUmVnaXN0cmF0aW9uL1RmYVJlZ2lzdHJhdGlvbldpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVGZhUmVnaXN0cmF0aW9uL3Bob25lL1RmYVJlZ2lzdHJhdGlvblBob25lV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9BcnJheU1hbmFnZXJXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0JpbmRpbmdXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NhcHRjaGFXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NvbnNlbnRXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NvbnRhaW5lcldpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvSW1hZ2VXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0xvZ0luQXZhaWxhYmlsaXR5V2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9NeVBob3RvV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QYXNzd29yZFN0cmVuZ3RoV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QaG90b1VwbG9hZFdpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUHJvZmlsZVBob3RvV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9SZXF1aXJlZERpc3BsYXlXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1NlY3JldFF1ZXN0aW9uV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Tb2NpYWxMb2dpbldpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvU3Vic2NyaXB0aW9uV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Db21tdW5pY2F0aW9uV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QaG9uZU51bWJlcldpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVGZhV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UcmFuc2xhdGVkV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QYXNza2V5TG9naW5XaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3NrZXlSZWdpc3RlcldpZGdldCc7XG5leHBvcnQgKiBmcm9tIFwic3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL09yZ2FuaXphdGlvbkNvbnRleHRXaWRnZXRcIjtcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QaG9uZUF1dGhNZXRob2RXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0VtYWlsT3RwQXV0aE1ldGhvZFdpZGdldCdcbmV4cG9ydCAqIGZyb20nc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3N3b3JkQXV0aE1ldGhvZFdpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1N3aXRjaFNjcmVlbldpZGdldCc7XG5leHBvcnQgKiBmcm9tJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9BcGlMaW5rV2lkZ2V0JztcblxuLy9iYXNlIHdpZGdldHMgZXhwb3J0XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtV2lkZ2V0JztcbmV4cG9ydCAqIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZVNlcnZlcldpZGdldCc7XG5leHBvcnQgKiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VVcGxvYWRXaWRnZXQnO1xuZXhwb3J0ICogZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9CYXNlV2lkZ2V0JztcblxuXG4gICAiLCJleHBvcnQgKiBhcyBDb25zZW50IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ29uc2VudCc7XG5leHBvcnQgKiBhcyBEZWJ1ZyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0RlYnVnJztcbmV4cG9ydCAqIGFzIEVycm9yRGlzcGxheUVsZW1lbnQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvckRpc3BsYXlFbGVtZW50JztcbmV4cG9ydCAqIGFzIEVycm9ycyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Vycm9ycyc7XG5leHBvcnQgKiBhcyBMb2dpbk1vZGVzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvTG9naW5Nb2Rlcyc7XG5leHBvcnQgKiBhcyBTY3JlZW4gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW4nO1xuZXhwb3J0ICogYXMgU2NyZWVuQ29uc3RzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuQ29uc3RzJztcbmV4cG9ydCAqIGFzIFNjcmVlbk9wdGlvbnMgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5PcHRpb25zJztcbmV4cG9ydCAqIGFzIFNjcmVlblNldERhdGEgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXREYXRhJztcbmV4cG9ydCAqIGFzIFNjcmVlblNldFBsdWdpbiBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFBsdWdpbic7XG5leHBvcnQgKiBhcyBTY3JlZW5TZXRIdG1sUmVzb3VyY2VzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UmVzb3VyY2VzJztcbmV4cG9ydCAqIGFzIFRlbXBsYXRlRWxlbWVudCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudCc7XG5leHBvcnQgKiBhcyBUZW1wbGF0ZXMgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZXMnO1xuZXhwb3J0ICogYXMgQ2FwdGNoYSBmcm9tJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQ2FwdGNoYSc7XG5cbiIsImltcG9ydCB7RXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFN9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JEaXNwbGF5RWxlbWVudCc7XG5pbXBvcnQge0ZvckVhY2h9IGZyb20gJy4vdXRpbHMnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVycm9yQmluZGluZ3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IEFycmF5PEhUTUxFbGVtZW50PiB7XG4gICAgbGV0IGJvdW5kZWRFbGVtZW50czogQXJyYXk8SFRNTEVsZW1lbnQ+ID0gW10sXG4gICAgICBiaW5kcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZVxuICAgICAgICAuY2FsbChjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChgWyR7RXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuYm91bmRlZFRvfV1gKSlcbiAgICAgICAgLm1hcChlbCA9PiBlbC5nZXRBdHRyaWJ1dGUoRXJyb3JEaXNwbGF5RWxlbWVudF9DT05TVFMuYm91bmRlZFRvKSk7XG5cbiAgICBGb3JFYWNoKEVycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmdpZ3lhQ2xhc3NlcywgZ2lneWFDbGFzcyA9PiB7XG4gICAgICAgIGNvbnN0IGJpbmRlZFNlbGVjdG9ycyA9IFtdO1xuXG4gICAgICAgIGJpbmRzLmZvckVhY2goYmluZElEID0+IHtcbiAgICAgICAgICAgIGJpbmRlZFNlbGVjdG9ycy5wdXNoKGAuJHtnaWd5YUNsYXNzfVske0Vycm9yRGlzcGxheUVsZW1lbnRfQ09OU1RTLmJvdW5kZWRUb309XCIke2JpbmRJRH1cIl1gKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGJpbmRlZFNlbGVjdG9ycz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICBib3VuZGVkRWxlbWVudHMgPSBib3VuZGVkRWxlbWVudHMuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGJpbmRlZFNlbGVjdG9ycy5qb2luKCcsJykpKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gYm91bmRlZEVsZW1lbnRzO1xufVxuXG4iLCJpbXBvcnQgKiBhcyBCYXNlRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VGb3JtJztcbmltcG9ydCAqIGFzIEJhc2VGb3JtV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvQmFzZUZvcm1XaWRnZXQnO1xuaW1wb3J0ICogYXMgQmFzZVNjcmVlbldpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTY3JlZW5XaWRnZXQnO1xuaW1wb3J0ICogYXMgQmFzZVNlcnZlcldpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VTZXJ2ZXJXaWRnZXQnO1xuaW1wb3J0ICogYXMgQmFzZVVwbG9hZFdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VVcGxvYWRXaWRnZXQnO1xuaW1wb3J0ICogYXMgQmFzZVdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Jhc2VXaWRnZXQnO1xuaW1wb3J0ICogYXMgQ29uc2VudCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0NvbnNlbnQnO1xuaW1wb3J0ICogYXMgRGVidWcgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9EZWJ1Zyc7XG5pbXBvcnQgKiBhcyBFcnJvckRpc3BsYXlFbGVtZW50IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRXJyb3JEaXNwbGF5RWxlbWVudCc7XG5pbXBvcnQgKiBhcyBFcnJvcnMgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9FcnJvcnMnO1xuaW1wb3J0ICogYXMgTG9naW5Nb2RlcyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0xvZ2luTW9kZXMnO1xuaW1wb3J0ICogYXMgU2NyZWVuIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuJztcbmltcG9ydCAqIGFzIFNjcmVlbkNvbnN0cyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlbkNvbnN0cyc7XG5pbXBvcnQgKiBhcyBTY3JlZW5PcHRpb25zIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuT3B0aW9ucyc7XG5pbXBvcnQgKiBhcyBTY3JlZW5TZXREYXRhIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0RGF0YSc7XG5pbXBvcnQgKiBhcyBTY3JlZW5TZXRQbHVnaW4gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5TZXRQbHVnaW4nO1xuaW1wb3J0ICogYXMgU2NyZWVuU2V0SHRtbFJlc291cmNlcyBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1NjcmVlblNldFJlc291cmNlcyc7XG5pbXBvcnQgKiBhcyBUZW1wbGF0ZUVsZW1lbnQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xuaW1wb3J0ICogYXMgVGVtcGxhdGVzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvVGVtcGxhdGVzJztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuaW1wb3J0ICogYXMgTGlua0FjY291bnRzRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0xpbmtBY2NvdW50c0Zvcm0nO1xuaW1wb3J0ICogYXMgTG9naW5Gb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvTG9naW5Gb3JtJztcbmltcG9ydCAqIGFzIFBhc3N3b3JkbGVzc0xvZ2luRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Bhc3N3b3JkbGVzc0xvZ2luRm9ybSc7XG5pbXBvcnQgKiBhcyBQYXNzd29yZGxlc3NSZWdpc3RlckZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9QYXNzd29yZGxlc3NSZWdpc3RlckZvcm0nO1xuaW1wb3J0ICogYXMgQXV0aE1ldGhvZHNGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvQXV0aE1ldGhvZHNGb3JtJztcbmltcG9ydCAqIGFzIFBhc3N3b3JkQXV0aE1ldGhvZEZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9QYXNzd29yZEF1dGhNZXRob2RGb3JtJztcbmltcG9ydCAqIGFzIFB1c2hBdXRoTWV0aG9kRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1B1c2hBdXRoTWV0aG9kRm9ybSc7XG5pbXBvcnQgKiBhcyBNYWdpY0xpbmtBdXRoTWV0aG9kRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL01hZ2ljTGlua0F1dGhNZXRob2RGb3JtJztcbmltcG9ydCAqIGFzIEVtYWlsQ29kZUF1dGhNZXRob2RGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvRW1haWxDb2RlQXV0aE1ldGhvZEZvcm0nO1xuaW1wb3J0ICogYXMgTmV3c2xldHRlclNpZ251cEZvcm0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Gb3Jtcy9OZXdzbGV0dGVyU2lnbnVwRm9ybSc7XG5pbXBvcnQgKiBhcyBQcm9maWxlRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Byb2ZpbGVGb3JtJztcbmltcG9ydCAqIGFzIFJlQXV0aGVudGljYXRpb25Gb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUmVhdXRoZW50aWNhdGlvbkZvcm0nO1xuaW1wb3J0ICogYXMgUmVnaXN0ZXJGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUmVnaXN0ZXJGb3JtJztcbmltcG9ydCAqIGFzIFByb2dyZXNzaW9uRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Byb2dyZXNzaW9uRm9ybSc7XG5pbXBvcnQgKiBhcyBSZXNlbmRWZXJpZmljYXRpb25Db2RlRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1Jlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtJztcbmltcG9ydCAqIGFzIFJlc2V0UGFzc3dvcmRGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvUmVzZXRQYXNzd29yZEZvcm0nO1xuaW1wb3J0ICogYXMgT3JnUmVnaXN0ZXJGb3JtIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3JnYW5pemF0aW9uUmVnaXN0cmF0aW9uRm9ybSc7XG5pbXBvcnQgKiBhcyBCdXR0b25JbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9CdXR0b25JbnB1dCc7XG5pbXBvcnQgKiBhcyBDaGVja2JveElucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0NoZWNrYm94SW5wdXQnO1xuaW1wb3J0ICogYXMgQ29tbXVuaWNhdGlvbkNoZWNrYm94SW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvQ29tbXVuaWNhdGlvbkNoZWNrYm94SW5wdXQnO1xuaW1wb3J0ICogYXMgRW1haWxJbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9FbWFpbElucHV0JztcbmltcG9ydCAqIGFzIEZvcm1JbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9Gb3JtSW5wdXQnO1xuaW1wb3J0ICogYXMgQWRkcmVzc0lucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL0FkZHJlc3NJbnB1dCc7XG5pbXBvcnQgKiBhcyBMb2dpbklkSW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvTG9naW5JZElucHV0JztcbmltcG9ydCAqIGFzIFBhc3N3b3JkSW5wdXRzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1Bhc3N3b3JkSW5wdXRzJztcbmltcG9ydCAqIGFzIFBob25lTnVtYmVySW5wdXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9JbnB1dHMvUGhvbmVOdW1iZXJJbnB1dCc7XG5pbXBvcnQgKiBhcyBSYWRpb0lucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1JhZGlvSW5wdXQnO1xuaW1wb3J0ICogYXMgUmVtZW1iZXJJbnB1dCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0lucHV0cy9SZW1lbWViZXJJbnB1dCc7XG5pbXBvcnQgKiBhcyBQYXNza2V5TWFuZ2VyV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9QYXNza2V5TWFuYWdlci9QYXNza2V5TWFuYWdlcldpZGdldCc7XG5pbXBvcnQgKiBhcyBQYXNza2V5Q2FyZFdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUGFzc2tleU1hbmFnZXIvUGFzc2tleUNhcmRXaWRnZXQnO1xuaW1wb3J0ICogYXMgVEZBVmVyaWZpY2F0aW9uIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9URkEvdmVyaWZpY2F0aW9uL1RGQVZlcmlmaWNhdGlvbldpZGdldCc7XG5pbXBvcnQgKiBhcyBURkFWZXJpZmljYXRpb25QaG9uZUxpc3RXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1RGQS92ZXJpZmljYXRpb24vcGhvbmUvVEZBVmVyaWZpY2F0aW9uUGhvbmVMaXN0V2lkZ2V0JztcbmltcG9ydCAqIGFzIFRGQVZlcmlmaWNhdGlvblBob25lSXRlbVdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVEZBL3ZlcmlmaWNhdGlvbi9waG9uZS9URkFWZXJpZmljYXRpb25QaG9uZUl0ZW1XaWRnZXQnO1xuaW1wb3J0IHtURkFWZXJpZmljYXRpb25FbWFpbEl0ZW1XaWRnZXR9IGZyb20gXCIuL1dpZGdldHMvVEZBL3ZlcmlmaWNhdGlvbi9lbWFpbC9URkFWZXJpZmljYXRpb25FbWFpbEl0ZW1XaWRnZXRcIjtcbmltcG9ydCB7VEZBVmVyaWZpY2F0aW9uRW1haWxMaXN0V2lkZ2V0fSBmcm9tIFwiLi9XaWRnZXRzL1RGQS92ZXJpZmljYXRpb24vZW1haWwvVEZBVmVyaWZpY2F0aW9uRW1haWxMaXN0V2lkZ2V0XCI7XG5pbXBvcnQgKiBhcyBUZmFNYW5hZ2VtZW50V2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFNYW5hZ2VtZW50L1RmYU1hbmFnZW1lbnRXaWRnZXQnO1xuaW1wb3J0ICogYXMgVGZhUGhvbmVNYW5hZ2VtZW50TGlzdFdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVGZhTWFuYWdlbWVudC9waG9uZS9UZmFNYW5hZ2VtZW50UGhvbmVMaXN0V2lkZ2V0JztcbmltcG9ydCAqIGFzIFRmYVBob25lTWFuYWdlbWVudERldmljZVdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVGZhTWFuYWdlbWVudC9waG9uZS9UZmFNYW5hZ2VtZW50UGhvbmVJdGVtV2lkZ2V0JztcbmltcG9ydCAqIGFzIFRmYUVtYWlsTWFuYWdlbWVudExpc3RXaWRnZXQgZnJvbSAnLi9XaWRnZXRzL1RmYU1hbmFnZW1lbnQvZW1haWwvVGZhTWFuYWdlbWVudEVtYWlsTGlzdFdpZGdldCc7XG5pbXBvcnQgKiBhcyBUZmFFbWFpbE1hbmFnZW1lbnREZXZpY2VXaWRnZXQgZnJvbSAnLi9XaWRnZXRzL1RmYU1hbmFnZW1lbnQvZW1haWwvVGZhTWFuYWdlbWVudEVtYWlsSXRlbVdpZGdldCc7XG5pbXBvcnQgKiBhcyBUZmFSZWdpc3RyYXRpb25XaWRnZXQgZnJvbSAnLi9XaWRnZXRzL1RmYVJlZ2lzdHJhdGlvbi9UZmFSZWdpc3RyYXRpb25XaWRnZXQnO1xuaW1wb3J0ICogYXMgVGZhUmVnaXN0cmF0aW9uUGhvbmVXaWRnZXQgZnJvbSAnLi9XaWRnZXRzL1RmYVJlZ2lzdHJhdGlvbi9waG9uZS9UZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldCc7XG5pbXBvcnQgKiBhcyBSZXR5cGVQYXNzd29yZElucHV0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSW5wdXRzL1JldHlwZVBhc3N3b3JkSW5wdXQnO1xuaW1wb3J0ICogYXMgQXJyYXlNYW5hZ2VyV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9BcnJheU1hbmFnZXJXaWRnZXQnO1xuaW1wb3J0ICogYXMgQmluZGluZ1dpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvQmluZGluZ1dpZGdldCc7XG5pbXBvcnQgKiBhcyBDYXB0Y2hhV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9DYXB0Y2hhV2lkZ2V0JztcbmltcG9ydCAqIGFzIENvbnNlbnRXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0NvbnNlbnRXaWRnZXQnO1xuaW1wb3J0ICogYXMgQ29udGFpbmVyV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Db250YWluZXJXaWRnZXQnO1xuaW1wb3J0ICogYXMgSW1hZ2VXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0ltYWdlV2lkZ2V0JztcbmltcG9ydCAqIGFzIExvZ0luQXZhaWxhYmlsaXR5V2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9Mb2dJbkF2YWlsYWJpbGl0eVdpZGdldCc7XG5pbXBvcnQgKiBhcyBNeVBob3RvV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9NeVBob3RvV2lkZ2V0JztcbmltcG9ydCAqIGFzIFBhc3N3b3JkU3RyZW5ndGhXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3N3b3JkU3RyZW5ndGhXaWRnZXQnO1xuaW1wb3J0ICogYXMgUGhvdG9VcGxvYWRXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bob3RvVXBsb2FkV2lkZ2V0JztcbmltcG9ydCAqIGFzIFByb2ZpbGVQaG90b1dpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUHJvZmlsZVBob3RvV2lkZ2V0JztcbmltcG9ydCAqIGFzIFJlcXVpcmVkRGlzcGxheVdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUmVxdWlyZWREaXNwbGF5V2lkZ2V0JztcbmltcG9ydCAqIGFzIFNlY3JldFF1ZXN0aW9uV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9TZWNyZXRRdWVzdGlvbldpZGdldCc7XG5pbXBvcnQgKiBhcyBTb2NpYWxMb2dpbldpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvU29jaWFsTG9naW5XaWRnZXQnO1xuaW1wb3J0ICogYXMgU3Vic2NyaXB0aW9uV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9TdWJzY3JpcHRpb25XaWRnZXQnO1xuaW1wb3J0ICogYXMgQ29tbXVuaWNhdGlvbldpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvQ29tbXVuaWNhdGlvbldpZGdldCc7XG5pbXBvcnQgKiBhcyBQaG9uZU51bWJlcldpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvUGhvbmVOdW1iZXJXaWRnZXQnO1xuaW1wb3J0ICogYXMgVGZhV2lkZ2V0IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvV2lkZ2V0cy9UZmFXaWRnZXQnO1xuaW1wb3J0ICogYXMgVHJhbnNsYXRlZFdpZGdldCBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvVHJhbnNsYXRlZFdpZGdldCc7XG5pbXBvcnQgKiBhcyBQYXNza2V5TG9naW5XaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3NrZXlMb2dpbldpZGdldCc7XG5pbXBvcnQgKiBhcyBQYXNza2V5UmVnaXN0ZXJXaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL1Bhc3NrZXlSZWdpc3RlcldpZGdldCc7XG5pbXBvcnQgKiBhcyBTd2l0Y2hTY3JlZW5XaWRnZXQgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Td2l0Y2hTY3JlZW5XaWRnZXQnO1xuaW1wb3J0ICogYXMgQmFzZUNhcHRjaGFIYW5kbGVyIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQ2FwdGNoYUhhbmRsZXIvQmFzZUNhcHRjaGFIYW5kbGVyJztcbmltcG9ydCAqIGFzIEZ1bkNhcHRjaGFIYW5kbGVyIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvSGFuZGxlcnMvQ2FwdGNoYUhhbmRsZXIvRnVuQ2FwdGNoYUhhbmRsZXInO1xuaW1wb3J0ICogYXMgR29vZ2xlQ2FwdGNoYUhhbmRsZXIgZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9IYW5kbGVycy9DYXB0Y2hhSGFuZGxlci9Hb29nbGVDYXB0Y2hhSGFuZGxlcic7XG5pbXBvcnQgKiBhcyBPcmdhbml6YXRpb25Db250ZXh0V2lkZ2V0IGZyb20gXCJzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1dpZGdldHMvT3JnYW5pemF0aW9uQ29udGV4dFdpZGdldFwiO1xuaW1wb3J0ICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL090cFNlbmRDb2RlRm9ybSc7XG5pbXBvcnQgJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3RwVXBkYXRlRm9ybSc7XG5pbXBvcnQgJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3RwVmVyaWZ5Rm9ybSc7XG5pbXBvcnQgJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvRm9ybXMvT3RwTG9naW5Gb3JtJztcbmltcG9ydCAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9XaWRnZXRzL0FwaUxpbmtXaWRnZXQnO1xuaW1wb3J0ICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0xpbmtBY2NvdW50c0Zvcm0nO1xuaW1wb3J0ICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0NhcHRjaGEnO1xuaW1wb3J0ICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0hhbmRsZXJzJztcblxuaW1wb3J0ICogYXMgRGV2aWNlQ29kZUZvcm0gIGZyb20gJy4vRm9ybXMvRGV2aWNlQ29kZUZvcm0nO1xuaW1wb3J0IHtQaG9uZUF1dGhNZXRob2RXaWRnZXR9IGZyb20gJy4vV2lkZ2V0cy9QaG9uZUF1dGhNZXRob2RXaWRnZXQnO1xuaW1wb3J0IHtFbWFpbE90cEF1dGhNZXRob2RXaWRnZXR9IGZyb20gJy4vV2lkZ2V0cy9FbWFpbE90cEF1dGhNZXRob2RXaWRnZXQnO1xuaW1wb3J0IHtQYXNzd29yZEF1dGhNZXRob2RXaWRnZXR9IGZyb20gJy4vV2lkZ2V0cy9QYXNzd29yZEF1dGhNZXRob2RXaWRnZXQnO1xuaW1wb3J0ICogYXMgQ3VzdG9tRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL0N1c3RvbUZvcm0nO1xuaW1wb3J0ICogYXMgVGZhRm9ybSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL0Zvcm1zL1RmYUZvcm0nO1xuaW1wb3J0IHsgT25lQWNjb3VudFN1YnNjcmlwdGlvbkZvcm0gfSBmcm9tICcuL0Zvcm1zL09uZUFjY291bnRTdWJzY3JpcHRpb25Gb3JtJztcblxuXG5kZWNsYXJlIGNvbnN0IGdpZ3lhOiBhbnk7XG5pZiAoIWdpZ3lhLl8pIHtcbiAgICBnaWd5YS5fID0ge307XG59XG5pZiAoIWdpZ3lhLl8ucGx1Z2lucykge1xuICAgIGdpZ3lhLl8ucGx1Z2lucyA9IHt9O1xufVxuaWYgKCFnaWd5YS5fLnBsdWdpbnMuU2NyZWVuU2V0KSB7XG4gICAgZ2lneWEuXy5wbHVnaW5zLlNjcmVlblNldCA9IHt9O1xufVxuaWYgKCFnaWd5YS5fLnBsdWdpbnMuU2NyZWVuU2V0LmNvbnNlbnQpIHtcbiAgICBnaWd5YS5fLnBsdWdpbnMuU2NyZWVuU2V0LmNvbnNlbnQgPSB7fTtcbn1cbmlmICghZ2lneWEuXy5wbHVnaW5zLnJlc291cmNlcykge1xuICAgIGdpZ3lhLl8ucGx1Z2lucy5yZXNvdXJjZXMgPSB7fTtcbn1cbmlmICghZ2lneWEuXy5wbHVnaW5zLnJlc291cmNlcy5odG1sKSB7XG4gICAgZ2lneWEuXy5wbHVnaW5zLnJlc291cmNlcy5odG1sID0ge307XG59XG5pZiAoIWdpZ3lhLl8ucGx1Z2lucy5yZXNvdXJjZXMuaHRtbC5zY3JlZW5TZXQpIHtcbiAgICBnaWd5YS5fLnBsdWdpbnMucmVzb3VyY2VzLmh0bWwuc2NyZWVuU2V0ID0ge307XG59XG5cbk9iamVjdC5hc3NpZ24oXG4gICAgZ2lneWEuXy5wbHVnaW5zLlNjcmVlblNldCxcbiAgICBTd2l0Y2hTY3JlZW5XaWRnZXQsXG4gICAgQmFzZUZvcm0sXG4gICAgQmFzZUZvcm1XaWRnZXQsXG4gICAgQmFzZVNjcmVlbldpZGdldCxcbiAgICBCYXNlU2VydmVyV2lkZ2V0LFxuICAgIEJhc2VVcGxvYWRXaWRnZXQsXG4gICAgQmFzZVdpZGdldCxcbiAgICBEZWJ1ZyxcbiAgICBFcnJvckRpc3BsYXlFbGVtZW50LFxuICAgIEVycm9ycyxcbiAgICBMb2dpbk1vZGVzLFxuICAgIFNjcmVlbixcbiAgICBTY3JlZW5Db25zdHMsXG4gICAgU2NyZWVuT3B0aW9ucyxcbiAgICBTY3JlZW5TZXREYXRhLFxuICAgIFNjcmVlblNldFBsdWdpbixcbiAgICBUZW1wbGF0ZUVsZW1lbnQsXG4gICAgVGVtcGxhdGVzLFxuICAgIHV0aWxzLFxuICAgIExpbmtBY2NvdW50c0Zvcm0sXG4gICAgTG9naW5Gb3JtLFxuICAgIFBhc3N3b3JkbGVzc0xvZ2luRm9ybSxcbiAgICBQYXNzd29yZGxlc3NSZWdpc3RlckZvcm0sXG4gICAgQXV0aE1ldGhvZHNGb3JtLFxuICAgIFBhc3N3b3JkQXV0aE1ldGhvZEZvcm0sXG4gICAgUHVzaEF1dGhNZXRob2RGb3JtLFxuICAgIE1hZ2ljTGlua0F1dGhNZXRob2RGb3JtLFxuICAgIEVtYWlsQ29kZUF1dGhNZXRob2RGb3JtLFxuICAgIE9uZUFjY291bnRTdWJzY3JpcHRpb25Gb3JtLFxuICAgIE5ld3NsZXR0ZXJTaWdudXBGb3JtLFxuICAgIFByb2ZpbGVGb3JtLFxuICAgIFJlQXV0aGVudGljYXRpb25Gb3JtLFxuICAgIFJlZ2lzdGVyRm9ybSxcbiAgICBQcm9ncmVzc2lvbkZvcm0sXG4gICAgUmVzZW5kVmVyaWZpY2F0aW9uQ29kZUZvcm0sXG4gICAgUmVzZXRQYXNzd29yZEZvcm0sXG4gICAgT3JnUmVnaXN0ZXJGb3JtLFxuICAgIEJ1dHRvbklucHV0LFxuICAgIENoZWNrYm94SW5wdXQsXG4gICAgQ29tbXVuaWNhdGlvbkNoZWNrYm94SW5wdXQsXG4gICAgRW1haWxJbnB1dCxcbiAgICBGb3JtSW5wdXQsXG4gICAgQWRkcmVzc0lucHV0LFxuICAgIExvZ2luSWRJbnB1dCxcbiAgICBQYXNzd29yZElucHV0cyxcbiAgICBQaG9uZU51bWJlcklucHV0LFxuICAgIFJhZGlvSW5wdXQsXG4gICAgUmVtZW1iZXJJbnB1dCxcbiAgICBSZXR5cGVQYXNzd29yZElucHV0LFxuICAgIEFycmF5TWFuYWdlcldpZGdldCxcbiAgICBCaW5kaW5nV2lkZ2V0LFxuICAgIENhcHRjaGFXaWRnZXQsXG4gICAgQ29uc2VudFdpZGdldCxcbiAgICBDb250YWluZXJXaWRnZXQsXG4gICAgSW1hZ2VXaWRnZXQsXG4gICAgTG9nSW5BdmFpbGFiaWxpdHlXaWRnZXQsXG4gICAgTXlQaG90b1dpZGdldCxcbiAgICBQYXNzd29yZFN0cmVuZ3RoV2lkZ2V0LFxuICAgIFBob3RvVXBsb2FkV2lkZ2V0LFxuICAgIFByb2ZpbGVQaG90b1dpZGdldCxcbiAgICBSZXF1aXJlZERpc3BsYXlXaWRnZXQsXG4gICAgU2VjcmV0UXVlc3Rpb25XaWRnZXQsXG4gICAgU29jaWFsTG9naW5XaWRnZXQsXG4gICAgU3Vic2NyaXB0aW9uV2lkZ2V0LFxuICAgIFBob25lTnVtYmVyV2lkZ2V0LFxuICAgIENvbW11bmljYXRpb25XaWRnZXQsXG4gICAgVGZhV2lkZ2V0LFxuICAgIFRyYW5zbGF0ZWRXaWRnZXQsXG4gICAgQmFzZUNhcHRjaGFIYW5kbGVyLFxuICAgIEZ1bkNhcHRjaGFIYW5kbGVyLFxuICAgIEdvb2dsZUNhcHRjaGFIYW5kbGVyLFxuICAgIERldmljZUNvZGVGb3JtLFxuICAgIFBhc3N3b3JkQXV0aE1ldGhvZFdpZGdldCxcbiAgICBQaG9uZUF1dGhNZXRob2RXaWRnZXQsXG4gICAgRW1haWxPdHBBdXRoTWV0aG9kV2lkZ2V0LFxuICAgIFBhc3NrZXlMb2dpbldpZGdldCxcbiAgICBQYXNza2V5UmVnaXN0ZXJXaWRnZXQsXG4gICAgUGFzc2tleU1hbmdlcldpZGdldCxcbiAgICBURkFWZXJpZmljYXRpb24sXG4gICAgVEZBVmVyaWZpY2F0aW9uUGhvbmVMaXN0V2lkZ2V0LFxuICAgIFRGQVZlcmlmaWNhdGlvblBob25lSXRlbVdpZGdldCxcbiAgICBURkFWZXJpZmljYXRpb25FbWFpbEl0ZW1XaWRnZXQsXG4gICAgVEZBVmVyaWZpY2F0aW9uRW1haWxMaXN0V2lkZ2V0LFxuICAgIFBhc3NrZXlDYXJkV2lkZ2V0LFxuICAgIFRmYU1hbmFnZW1lbnRXaWRnZXQsXG4gICAgVGZhUGhvbmVNYW5hZ2VtZW50TGlzdFdpZGdldCxcbiAgICBUZmFQaG9uZU1hbmFnZW1lbnREZXZpY2VXaWRnZXQsXG4gICAgVGZhRW1haWxNYW5hZ2VtZW50TGlzdFdpZGdldCxcbiAgICBUZmFFbWFpbE1hbmFnZW1lbnREZXZpY2VXaWRnZXQsXG4gICAgVGZhUmVnaXN0cmF0aW9uV2lkZ2V0LFxuICAgIFRmYVJlZ2lzdHJhdGlvblBob25lV2lkZ2V0LFxuICAgIEN1c3RvbUZvcm0sXG4gICAgVGZhRm9ybSxcbiAgICBPcmdhbml6YXRpb25Db250ZXh0V2lkZ2V0XG4pO1xuT2JqZWN0LmFzc2lnbihnaWd5YS5fLnBsdWdpbnMuU2NyZWVuU2V0LmNvbnNlbnQsIENvbnNlbnQpO1xuT2JqZWN0LmFzc2lnbihnaWd5YS5fLnBsdWdpbnMucmVzb3VyY2VzLmh0bWwuc2NyZWVuU2V0LCBTY3JlZW5TZXRIdG1sUmVzb3VyY2VzKTtcblxuXG5cblxuZXhwb3J0ICAqIGZyb20gJy4vRm9ybXMnO1xuZXhwb3J0ICogIGZyb20gJy4vV2lkZ2V0cyc7XG5leHBvcnQgKiBmcm9tICcuL0hhbmRsZXJzJztcbmV4cG9ydCAqIGFzIHV0aWxzIGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMnO1xuZXhwb3J0ICogIGZyb20gJy4vSW5wdXRzJztcbmV4cG9ydCAqICBmcm9tICcuL0RhdGFQcm92aWRlcnMnO1xuZXhwb3J0ICogIGZyb20gJy4vZWxlbWVudHMnO1xuaW1wb3J0IHtTY3JlZW5TZXRQbHVnaW4gYXMgUGx1Z2lufSBmcm9tIFwiLi9TY3JlZW5TZXRQbHVnaW5cIjtcbmV4cG9ydCB7XG4gICAgU2NyZWVuLFxuICAgIFNjcmVlbkNvbnN0cyxcbiAgICBTY3JlZW5PcHRpb25zLFxuICAgIFNjcmVlblNldERhdGEsXG4gICAgU2NyZWVuU2V0UGx1Z2luLFxufTtcbmV4cG9ydCBkZWZhdWx0IGdpZ3lhLl8ucGx1Z2lucy5TY3JlZW5TZXQgYXMgUGx1Z2luO1xuXG5cbi8vXG4vL1xuLy9cbi8vIGV4cG9ydCB7XG4vLyAgICAgU3dpdGNoU2NyZWVuV2lkZ2V0LFxuLy8gICAgIEJhc2VGb3JtLFxuLy8gICAgIEJhc2VGb3JtV2lkZ2V0LFxuLy8gICAgIEJhc2VTY3JlZW5XaWRnZXQsXG4vLyAgICAgQmFzZVNlcnZlcldpZGdldCxcbi8vICAgICBCYXNlVXBsb2FkV2lkZ2V0LFxuLy8gICAgIEJhc2VXaWRnZXQsXG4vLyAgICAgRGVidWcsXG4vLyAgICAgRXJyb3JEaXNwbGF5RWxlbWVudCxcbi8vICAgICBFcnJvcnMsXG4vLyAgICAgTG9naW5Nb2Rlcyxcbi8vICAgICBTY3JlZW4sXG4vLyAgICAgU2NyZWVuQ29uc3RzLFxuLy8gICAgIFNjcmVlbk9wdGlvbnMsXG4vLyAgICAgU2NyZWVuU2V0RGF0YSxcbi8vICAgICBTY3JlZW5TZXRQbHVnaW4sXG4vLyAgICAgVGVtcGxhdGVFbGVtZW50LFxuLy8gICAgIFRlbXBsYXRlcyxcbi8vICAgICB1dGlscyxcbi8vICAgICBMaW5rQWNjb3VudHNGb3JtLFxuLy8gICAgIExvZ2luRm9ybSxcbi8vICAgICBQYXNzd29yZGxlc3NMb2dpbkZvcm0sXG4vLyAgICAgUGFzc3dvcmRsZXNzUmVnaXN0ZXJGb3JtLFxuLy8gICAgIEF1dGhNZXRob2RzRm9ybSxcbi8vICAgICBQYXNzd29yZEF1dGhNZXRob2RGb3JtLFxuLy8gICAgIFB1c2hBdXRoTWV0aG9kRm9ybSxcbi8vICAgICBNYWdpY0xpbmtBdXRoTWV0aG9kRm9ybSxcbi8vICAgICBFbWFpbENvZGVBdXRoTWV0aG9kRm9ybSxcbi8vICAgICBPbmVBY2NvdW50U3Vic2NyaXB0aW9uRm9ybSxcbi8vICAgICBOZXdzbGV0dGVyU2lnbnVwRm9ybSxcbi8vICAgICBQcm9maWxlRm9ybSxcbi8vICAgICBSZUF1dGhlbnRpY2F0aW9uRm9ybSxcbi8vICAgICBSZWdpc3RlckZvcm0sXG4vLyAgICAgUHJvZ3Jlc3Npb25Gb3JtLFxuLy8gICAgIFJlc2VuZFZlcmlmaWNhdGlvbkNvZGVGb3JtLFxuLy8gICAgIFJlc2V0UGFzc3dvcmRGb3JtLFxuLy8gICAgIE9yZ1JlZ2lzdGVyRm9ybSxcbi8vICAgICBCdXR0b25JbnB1dCxcbi8vICAgICBDaGVja2JveElucHV0LFxuLy8gICAgIENvbW11bmljYXRpb25DaGVja2JveElucHV0LFxuLy8gICAgIEVtYWlsSW5wdXQsXG4vLyAgICAgRm9ybUlucHV0LFxuLy8gICAgIEFkZHJlc3NJbnB1dCxcbi8vICAgICBMb2dpbklkSW5wdXQsXG4vLyAgICAgUGFzc3dvcmRJbnB1dHMsXG4vLyAgICAgUGhvbmVOdW1iZXJJbnB1dCxcbi8vICAgICBSYWRpb0lucHV0LFxuLy8gICAgIFJlbWVtYmVySW5wdXQsXG4vLyAgICAgUmV0eXBlUGFzc3dvcmRJbnB1dCxcbi8vICAgICBBcnJheU1hbmFnZXJXaWRnZXQsXG4vLyAgICAgQmluZGluZ1dpZGdldCxcbi8vICAgICBDYXB0Y2hhV2lkZ2V0LFxuLy8gICAgIENvbnNlbnRXaWRnZXQsXG4vLyAgICAgQ29udGFpbmVyV2lkZ2V0LFxuLy8gICAgIEltYWdlV2lkZ2V0LFxuLy8gICAgIExvZ0luQXZhaWxhYmlsaXR5V2lkZ2V0LFxuLy8gICAgIE15UGhvdG9XaWRnZXQsXG4vLyAgICAgUGFzc3dvcmRTdHJlbmd0aFdpZGdldCxcbi8vICAgICBQaG90b1VwbG9hZFdpZGdldCxcbi8vICAgICBQcm9maWxlUGhvdG9XaWRnZXQsXG4vLyAgICAgUmVxdWlyZWREaXNwbGF5V2lkZ2V0LFxuLy8gICAgIFNlY3JldFF1ZXN0aW9uV2lkZ2V0LFxuLy8gICAgIFNvY2lhbExvZ2luV2lkZ2V0LFxuLy8gICAgIFN1YnNjcmlwdGlvbldpZGdldCxcbi8vICAgICBQaG9uZU51bWJlcldpZGdldCxcbi8vICAgICBDb21tdW5pY2F0aW9uV2lkZ2V0LFxuLy8gICAgIFRmYVdpZGdldCxcbi8vICAgICBUcmFuc2xhdGVkV2lkZ2V0LFxuLy8gICAgIEJhc2VDYXB0Y2hhSGFuZGxlcixcbi8vICAgICBGdW5DYXB0Y2hhSGFuZGxlcixcbi8vICAgICBHb29nbGVDYXB0Y2hhSGFuZGxlcixcbi8vICAgICBEZXZpY2VDb2RlRm9ybSxcbi8vICAgICBQYXNzd29yZEF1dGhNZXRob2RXaWRnZXQsXG4vLyAgICAgUGhvbmVBdXRoTWV0aG9kV2lkZ2V0LFxuLy8gICAgIEVtYWlsT3RwQXV0aE1ldGhvZFdpZGdldCxcbi8vICAgICBQYXNza2V5TG9naW5XaWRnZXQsXG4vLyAgICAgUGFzc2tleVJlZ2lzdGVyV2lkZ2V0LFxuLy8gICAgIFBhc3NrZXlNYW5nZXJXaWRnZXQsXG4vLyAgICAgVEZBVmVyaWZpY2F0aW9uLFxuLy8gICAgIFRGQVZlcmlmaWNhdGlvblBob25lTGlzdFdpZGdldCxcbi8vICAgICBURkFWZXJpZmljYXRpb25QaG9uZUl0ZW1XaWRnZXQsXG4vLyAgICAgVEZBVmVyaWZpY2F0aW9uRW1haWxJdGVtV2lkZ2V0LFxuLy8gICAgIFRGQVZlcmlmaWNhdGlvbkVtYWlsTGlzdFdpZGdldCxcbi8vICAgICBQYXNza2V5Q2FyZFdpZGdldCxcbi8vICAgICBUZmFNYW5hZ2VtZW50V2lkZ2V0LFxuLy8gICAgIFRmYVBob25lTWFuYWdlbWVudExpc3RXaWRnZXQsXG4vLyAgICAgVGZhUGhvbmVNYW5hZ2VtZW50RGV2aWNlV2lkZ2V0LFxuLy8gICAgIFRmYUVtYWlsTWFuYWdlbWVudExpc3RXaWRnZXQsXG4vLyAgICAgVGZhRW1haWxNYW5hZ2VtZW50RGV2aWNlV2lkZ2V0LFxuLy8gICAgIFRmYVJlZ2lzdHJhdGlvbldpZGdldCxcbi8vICAgICBUZmFSZWdpc3RyYXRpb25QaG9uZVdpZGdldCxcbi8vICAgICBDdXN0b21Gb3JtLFxuLy8gICAgIFRmYUZvcm0sXG4vLyAgICAgT3JnYW5pemF0aW9uQ29udGV4dFdpZGdldFxuLy8gfTtcbi8vXG4vL1xuIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcInN1YnMtd2lkZ2V0LWNvbnRhaW5lclxcXCIgYXJpYS1pbnZhbGlkPVxcXCJmYWxzZVxcXCI+XFxuICAgIDxpbnB1dCBjbGFzcz1cXFwiZ2lneWEtaW5wdXQtY2hlY2tib3ggc3Vic2NyaXB0aW9uLWNoZWNrYm94XFxcIlxcbiAgICAgICAgICAgaWQ9XFxcInN1YnMtY2hlY2tib3gtJHt0b3BpY30tJHtjaGFubmVsfVxcXCIgbmFtZT1cXFwiJHtnaWd5YU5hbWV9XFxcIiB0eXBlPVxcXCJjaGVja2JveFxcXCJcXG4gICAgICAgICAgICR7Y2hlY2tlZH1cXG4gICAgICAgICAgIGRhdGEtY29tbXVuaWNhdGlvbi1zdGF0dXM9XFxcIiR7c3RhdHVzfVxcXCJcXG4gICAgICAgICAgIGRhdGEtY29tbXVuaWNhdGlvbi10b3BpYz1cXFwiJHt0b3BpY31cXFwiXFxuICAgICAgICAgICBkYXRhLWNvbW11bmljYXRpb24tY2hhbm5lbD1cXFwiJHtjaGFubmVsfVxcXCJcXG4gICAgPlxcbiAgICA8bGFiZWwgY2xhc3M9XFxcInN1YnNjcmlwdGlvbi1uYW1lLWxhYmVsXFxcIiBmb3I9XFxcInN1YnMtY2hlY2tib3gtJHt0b3BpY30tJHtjaGFubmVsfVxcXCJcXG4gICAgICAgICAgIHN0eWxlPVxcXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IHBhZGRpbmctbGVmdDogNXB4O1xcXCI+XFxuICAgICAgICAke2xhYmVsfVxcbiAgICA8L2xhYmVsPlxcbjwvZGl2PlxcblwiOyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJjb25zZW50XFxcIiBkYXRhLWlkPVxcXCJ2MVxcXCI+XFxuXFxuICA8ZGl2IGNsYXNzPVxcXCJnaWd5YS1jb25zZW50LXRpdGxlXFxcIj4ke2xhYmVsfTwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cXFwiZ2lneWEtY29uc2VudC1zdWJ0aXRsZVxcXCIgPiR7ZG9jSWR9PC9kaXY+XFxuICA8c3BhbiBjbGFzcz1cXFwiZ2lneWEtY29uc2VudC10ZXh0XFxcIj4ke2FwcHJvdmVkT25MYWJlbH08L3NwYW4+IDxzcGFuIGNsYXNzPVxcXCJnaWd5YS1jb25zZW50LXRleHRcXFwiPiR7YXBwcm92ZWR9PC9zcGFuPlxcblxcbjwvZGl2PlxcblxcbjxkaXYgY2xhc3M9XFxcImNvbnNlbnRcXFwiIGRhdGEtaWQ9XFxcInYyXFxcIj5cXG5cXG4gIDxkaXYgY2xhc3M9XFxcImdpZ3lhLWNvbnNlbnQtdGl0bGVcXFwiPiR7bGFiZWx9PC9kaXY+XFxuXFxuICA8ZGl2IGNsYXNzPVxcXCJnaWd5YS12ZXJzaW9uLWNvbnRlbnRcXFwiPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ2lneWEtY29uc2VudC10ZXh0IHZlcnNpb24tbGFiZWxcXFwiPiR7dmVyc2lvbkxhYmVsfTwvc3Bhbj4gPHNwYW4gY2xhc3M9XFxcImdpZ3lhLWNvbnNlbnQtdGV4dCB2ZXJzaW9uXFxcIj4ke2RvY0lkfTwvc3Bhbj5cXG4gIDwvZGl2PlxcblxcbiAgPGRpdiBjbGFzcz1cXFwiZ2lneWEtbG9jYWxlLWNvbnRlbnRcXFwiPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ2lneWEtY29uc2VudC10ZXh0IGxvY2FsZS1sYWJlbFxcXCI+JHtsb2NhbGVMYWJlbH08L3NwYW4+IDxzcGFuIGNsYXNzPVxcXCJnaWd5YS1jb25zZW50LXRleHQgbG9jYWxlXFxcIj4ke2xvY2FsZX08L3NwYW4+XFxuICA8L2Rpdj5cXG5cXG4gIDxkaXYgY2xhc3M9XFxcImdpZ3lhLWFwcHJvdmVkLW9uLWNvbnRlbnRcXFwiPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ2lneWEtY29uc2VudC10ZXh0IGdpZ3lhLWRpc2FibGVkLWNvbG9yIGFwcHJvdmVkLW9uLWxhYmVsXFxcIj4ke2FwcHJvdmVkT25MYWJlbH08L3NwYW4+IDxzcGFuIGNsYXNzPVxcXCJnaWd5YS1jb25zZW50LXRleHQgZ2lneWEtZGlzYWJsZWQtY29sb3IgYXBwcm92ZWQtb25cXFwiPiR7YXBwcm92ZWR9PC9zcGFuPlxcbiAgPC9kaXY+XFxuXFxuPC9kaXY+XCI7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImdpZ3lhLXBhc3N3b3JkLXN0cmVuZ3RoXFxcIiBkYXRhLW9uLWZvY3VzLWJ1YmJsZT1cXFwidHJ1ZVxcXCIgZGF0YS1idWJibGUtb3JpZW50YXRpb249XFxcIiR7b3JpZW50YXRpb259XFxcIj48L2Rpdj5cXG5cIjsiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiJHtzY29yZUNsYXNzfVxcXCIgYXJpYS1hdG9taWM9XFxcInRydWVcXFwiIGFyaWEtbGl2ZT1cXFwicG9saXRlXFxcIj4ke2NvbnRlbnR9PC9kaXY+XFxuXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImdpZ3lhLXBhc3N3b3JkU3RyZW5ndGgtdGV4dC1yZXF1aXJlbWVudHNcXFwiPiRyZXF1aXJlbWVudHM8L2Rpdj5cXG5cIjsiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZ2lneWEtcGFzc3dvcmRTdHJlbmd0aC10ZXh0XFxcIj5cXG4gICAgPHNwYW4gY2xhc3M9XFxcImdpZ3lhLXBhc3N3b3JkU3RyZW5ndGgtdGV4dFxcXCI+JFRFWFQoJ3Bhc3N3b3JkX3N0cmVuZ3RoX2NvbG9uJyk8L3NwYW4+XFxuICAgIDxzcGFuIGNsYXNzPVxcXCJnaWd5YS1wYXNzd29yZFN0cmVuZ3RoLXRleHQgZ2lneWEtcGFzc3dvcmRTdHJlbmd0aC1zY29yZVRleHRcXFwiPiR7c2NvcmVUZXh0fTwvc3Bhbj5cXG48L2Rpdj5cXG48ZGl2IGNsYXNzPVxcXCJnaWd5YS1wYXNzd29yZFN0cmVuZ3RoLWJhclxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcIiR7YmFySW5kaWNhdG9yQ2xhc3N9XFxcIj48L2Rpdj5cXG48L2Rpdj5cXG5cIjsiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGZvcm0gZW5jdHlwZT1cXFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVxcXCIgbWV0aG9kPVxcXCJwb3N0XFxcIiBjbGFzcz1cXFwiZ2lneWEtcGhvdG8tdXBsb2FkLWZvcm1cXFwiIHRhcmdldD1cXFwiJHtmb3JtVGFyZ2V0fVxcXCIgYWN0aW9uPVxcXCJcXFwiPlxcbiAgICA8aW5wdXQgdHlwZT1cXFwiZmlsZVxcXCIgYWNjZXB0PVxcXCJpbWFnZS8qXFxcIiBuYW1lPVxcXCJfcHJvZmlsZVBob3RvXFxcIiAvPlxcbjwvZm9ybT5cXG5cIjsiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZ2lneWEtcGhvdG8tdXBsb2FkLWltYWdlXFxcIiBpZD1cXFwiJHtwaG90b0VsZW1lbnRJRH1cXFwiPjwvZGl2PlxcbjxkaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImdpZ3lhLXBob3RvLXVwbG9hZC1idXR0b25cXFwiPiRjaG9vc2VfZmlsZTwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJnaWd5YS1waG90by11cGxvYWQtcGF0aFxcXCIgaWQ9XFxcIiR7cGF0aENvbnRhaW5lcklEfVxcXCI+JG5vX2ZpbGVfY2hvc2VuPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImdpZ3lhLXBob3RvLXVwbG9hZC10ZXh0XFxcIj4kdGlwPC9kaXY+XFxuPC9kaXY+XFxuXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBcIjxoMSBjbGFzcz1cXFwiZ2lneWEtc2NyZWVuLWNhcHRpb25cXFwiIGlkPVxcXCIke2lubmVyQ29udGFpbmVySUR9X2NhcHRpb25cXFwiPjwvaDE+XFxyXFxuPGRpdiBpZD1cXFwiJHtjaGlsZENvbnRhaW5lcklEfVxcXCIgY2xhc3M9XFxcImdpZ3lhLWhpZGRlblxcXCI+PC9kaXY+XFxyXFxuPGRpdiBpZD1cXFwiJHtpbm5lckNvbnRhaW5lcklEfVxcXCIgY2xhc3M9XFxcImdpZ3lhLXNjcmVlbi1jb250ZW50XFxcIj48L2Rpdj5cXHJcXG5cIjsiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBpZD1cXFwiJHtpbm5lckNvbnRhaW5lcklEfVxcXCIgY2xhc3M9XFxcImdpZ3lhLXNjcmVlbi1jb250ZW50XFxcIj48L2Rpdj5cIjsiLCJleHBvcnQgY2xhc3MgR2VvTG9jYXRpb257XG4gICAgcHJpdmF0ZSBsYXRpdHVkZTtcbiAgICBwcml2YXRlIGxvbmdpdHVkZTtcblxuICAgcHVibGljIGluaXQoZW5hYmxlSGlnaEFjY3VyYWN5ID0gdHJ1ZSwgdGltZW91dCA9IDEwMDAwLCBtYXhpbXVtQWdlID0gMzAwMDApIHtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBlbmFibGVIaWdoQWNjdXJhY3k6IGVuYWJsZUhpZ2hBY2N1cmFjeSxcbiAgICAgICAgICAgIHRpbWVvdXQ6IHRpbWVvdXQsXG4gICAgICAgICAgICBtYXhpbXVtQWdlOiBtYXhpbXVtQWdlXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZXNldFBvc2l0aW9uKCk7XG4gICAgICAgIGlmKG5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xuICAgICAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbih0aGlzLnNldFBvc2l0aW9uLmJpbmQodGhpcyksIHRoaXMubG9jYXRpb25FcnJvci5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheUVycm9yKFwiUGxlYXNlIHVwZGF0ZSB5b3VyIGJyb3dzZXIgdG8gdXMgR2VvbG9jYXRpb24uXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICBwdWJsaWMgc2V0UG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5sYXRpdHVkZSA9IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTtcbiAgICAgICAgdGhpcy5sb25naXR1ZGUgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQb3NpdGlvbigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogdGhpcy5sYXRpdHVkZSxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5sb25naXR1ZGVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXRQb3NpdGlvbigpIHtcbiAgICAgICAgdGhpcy5sYXRpdHVkZSA9IG51bGw7XG4gICAgICAgIHRoaXMubG9uZ2l0dWRlID0gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzcGxheUVycm9yKGVycm9yTWVzc2FnZSkge1xuICAgICAgICBnaWd5YS5sb2dnZXIud2FybihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb2NhdGlvbkVycm9yKGVycm9yKSB7XG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuXG4gICAgICAgIC8vICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2VvbG9jYXRpb25Qb3NpdGlvbkVycm9yXG4gICAgICAgIHN3aXRjaChlcnJvci5jb2RlKSB7XG4gICAgICAgICAgICBjYXNlIGVycm9yLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGFjcXVpc2l0aW9uIG9mIHRoZSBnZW9sb2NhdGlvbiBpbmZvcm1hdGlvbiBmYWlsZWQgYmVjYXVzZSB0aGUgcGFnZSBkaWRuJ3QgaGF2ZSB0aGUgbmVjZXNzYXJ5IHBlcm1pc3Npb25zLlwiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBlcnJvci5QT1NJVElPTl9VTkFWQUlMQUJMRTpcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZSBhY3F1aXNpdGlvbiBvZiB0aGUgZ2VvbG9jYXRpb24gZmFpbGVkIGJlY2F1c2UgYXQgbGVhc3Qgb25lIGludGVybmFsIHNvdXJjZSBvZiBwb3NpdGlvbiByZXR1cm5lZCBhbiBpbnRlcm5hbCBlcnJvci5cIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgZXJyb3IuVElNRU9VVDpcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZSB0aW1lIGFsbG93ZWQgdG8gYWNxdWlyZSB0aGUgZ2VvbG9jYXRpb24gd2FzIHJlYWNoZWQgYmVmb3JlIHRoZSBpbmZvcm1hdGlvbiB3YXMgb2J0YWluZWQuXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIGVycm9yLlVOS05PV05fRVJST1I6XG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJBbiB1bmtub3duIGVycm9yIG9jY3VyZWQuXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRpc3BsYXlFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Rm9ybUlucHV0X0NPTlNUUywgSUZvcm1JbnB1dENvbnRleHR9IGZyb20gXCIuLi9JbnB1dHMvRm9ybUlucHV0XCI7XG5pbXBvcnQge1RlbXBsYXRlRWxlbWVudF9DT05TVFN9IGZyb20gXCIuLi9UZW1wbGF0ZUVsZW1lbnRcIjtcbmltcG9ydCB7aXNQYXJlbnRIYXNDbGFzc30gZnJvbSBcInNyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9ET01cIjtcbmltcG9ydCB7U2VydmVyRm9ybUlucHV0fSBmcm9tIFwiLi4vSW5wdXRzL1NlcnZlckZvcm1JbnB1dFwiO1xuXG5jb25zdCBUeXBlQWhlYWRDb25zdHMgPSB7XG4gICAgY29tYm9XcmFwcGVyU2VsZWN0b3I6ICcuZ2lneWEtY29tYm8tY29udGFpbmVyJyxcbiAgICBjb21ib0lucHV0Q2xhc3M6ICdnaWd5YS1jb21iby1pbnB1dCcsXG4gICAgY29tYm9Qb3B1cENsYXNzOiAnZ2lneWEtY29tYm8tcG9wdXAnLFxuICAgIGNvbWJvUG9wdXBTZWxlY3RvcjogJy5naWd5YS1jb21iby1wb3B1cCcsXG4gICAgY29tYm9MaXN0U2VsZWN0b3I6ICcuZ2lneWEtY29tYm8tbGlzdCcsXG4gICAgY29tYm9DbGVhckJ1dHRvblNlbGVjdG9yOiAnLmdpZ3lhLWNvbWJvLWlucHV0LWNsZWFyJyxcbiAgICBjb21ib0xvYWRlclNlbGVjdG9yOiAnLmdpZ3lhLWNvbWJvLXNwaW5uZXInLFxuICAgIGNvbWJvTm9EYXRhQ2xhc3M6ICdnaWd5YS1uby1kYXRhJyxcbiAgICBjb21ib09wdGlvbkNsYXNzOiAnZ2lneWEtY29tYm8tb3B0aW9uJyxcbiAgICBjb21ib09wdGlvbkRpc2FibGVkU2VsZWN0b3I6ICcuZ2lneWEtY29tYm8tb3B0aW9uLWRpc2FibGVkJyxcbiAgICBjb21ib1N0eWxlRGlzcGxheUJsb2NrOiAnYmxvY2snLFxuICAgIGNvbWJvU3R5bGVEaXNwbGF5Tm9uZTogJ25vbmUnLFxuICAgIGNvbWJvQWN0aXZlQ2xhc3M6ICdnaWd5YS1jb21iby1hY3RpdmUnLFxuICAgIGNvbWJvT3B0aW9uU2VsZWN0ZWRDbGFzczogJ2dpZ3lhLWNvbWJvLXNlbGVjdGVkJ1xufVxuXG5leHBvcnQgY2xhc3MgVHlwZWFoZWFkSW5wdXQgZXh0ZW5kcyBTZXJ2ZXJGb3JtSW5wdXQge1xuICAgIHByb3RlY3RlZCBpc09wZW46IGJvb2xlYW47XG4gICAgcHVibGljIG9wdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgcHJpdmF0ZSBpbnB1dEVMOiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgY2xlYXJCdG5FTDogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBwb3B1cEVMOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIG9wdGlvbnNMaXN0RUw6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgbG9hZGluZ0VMOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIF9pc0NsaWNrT3V0c2lkZTogYm9vbGVhbjtcbiAgICBwcml2YXRlIHdhcm5pbmdPcHRpb246IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgbWluaW11bUNoYXJhY3RlcnM6IG51bWJlcjtcbiAgICBwcml2YXRlIGJvZHlFbDogSFRNTEJvZHlFbGVtZW50O1xuICAgIHByaXZhdGUgc2NyZWVuRWw6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgY29udGFpbmVyRWw6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgYWZ0ZXJTZWxlY3RDYWxsYmFjazogRnVuY3Rpb247XG4gICAgcHJpdmF0ZSBfY2xpY2tPdXRTaWRlQ2FsbGJhY2s6IEZ1bmN0aW9uO1xuICAgIGNsaWNrT3V0c2lkZUxpc3RlbmVyID0gKGUpID0+IHRoaXMub25DbGlja091dHNpZGUoZSk7XG4gICAgaW5wdXRGb2N1c0xpc3RlbmVyID0gKGUpID0+IHRoaXMub25JbnB1dEZvY3VzKGUpO1xuICAgIGlucHV0Q2hhbmdlTGlzdGVuZXIgPSAoZSkgPT4gdGhpcy5vbklucHV0Q2hhbmdlKCk7XG4gICAgb3B0aW9uc1NlbGVjdExpc3RlbmVyID0gKGUpID0+IHRoaXMuaGFuZGxlT3B0aW9uU2VsZWN0KGUpO1xuICAgIGNsZWFyQ2xpY2tMaXN0ZW5lciA9IChlKSA9PiB0aGlzLm9uQ2xlYXJDbGljayhlKTtcbiAgICBhcnJvd0tleUxpc3RlbmVyID0gKGUpID0+IHRoaXMudXNlQXJyb3dLZXlzKGUpO1xuICAgIHNjcm9sbExpc3RlbmVyID0gKGUpID0+IHRoaXMub25TY3JvbGwoZSk7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBJRm9ybUlucHV0Q29udGV4dCkge1xuICAgICAgICBzdXBlcihjb250ZXh0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5pdChpbnB1dDogSFRNTElucHV0RWxlbWVudCwgY2xpY2tPdXRzaWRlQ2FsbGJhY2sgPSBudWxsLCBvcHRpb25zPzogYW55KSB7XG4gICAgICAgIHRoaXMubWluaW11bUNoYXJhY3RlcnMgPSBvcHRpb25zPy5taW5pbXVtQ2hhcmFjdGVycztcbiAgICAgICAgdGhpcy5fY2xpY2tPdXRTaWRlQ2FsbGJhY2sgPSBjbGlja091dHNpZGVDYWxsYmFjaztcbiAgICAgICAgdGhpcy5pbml0Q29tYm9FbGVtZW50cyhpbnB1dCk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5hZnRlclNlbGVjdENhbGxiYWNrID0gb3B0aW9ucz8uYWZ0ZXJTZWxlY3RDYWxsYmFjaztcbiAgICB9XG5cbiAgICBwcml2YXRlIGluaXRDb21ib0VsZW1lbnRzKGlucHV0OiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoVHlwZUFoZWFkQ29uc3RzLmNvbWJvSW5wdXRDbGFzcyk7XG5cbiAgICAgICAgLy8gV3JhcCB3aXRoIGNvbWJvLWNvbnRhaW5lciBlbGVtZW50c1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsID0gaW5wdXQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFR5cGVBaGVhZENvbnN0cy5jb21ib1dyYXBwZXJTZWxlY3RvcikgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lckVsKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLnN0eWxlLndpZHRoID0gaW5wdXQuc3R5bGUud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlYmVnaW5cIiwgdGhpcy5jb250YWluZXJFbCk7XG4gICAgICAgIHRoaXMuYm9keUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICAgICB0aGlzLmlucHV0RUwgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5zY3JlZW5FbCA9IHRoaXMuX3NjcmVlbi5pbnN0YW5jZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMucG9wdXBFTCA9IHRoaXMuY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoVHlwZUFoZWFkQ29uc3RzLmNvbWJvUG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMub3B0aW9uc0xpc3RFTCA9IHRoaXMuY29udGFpbmVyRWw/LnF1ZXJ5U2VsZWN0b3IoVHlwZUFoZWFkQ29uc3RzLmNvbWJvTGlzdFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5jbGVhckJ0bkVMID0gdGhpcy5jb250YWluZXJFbD8ucXVlcnlTZWxlY3RvcihUeXBlQWhlYWRDb25zdHMuY29tYm9DbGVhckJ1dHRvblNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5sb2FkaW5nRUwgPSB0aGlzLmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKFR5cGVBaGVhZENvbnN0cy5jb21ib0xvYWRlclNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5wb3B1cEVMPy5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmViZWdpblwiLCBpbnB1dCk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldE9wdGlvbnMobmV3T3B0aW9uczogc3RyaW5nW10pIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbmV3T3B0aW9ucztcbiAgICAgICAgdGhpcy5zZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgdGhpcy51cGRhdGVMaXN0KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZUxpc3QoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJMaXN0KCk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zTGlzdEVMLmNsYXNzTGlzdC5yZW1vdmUoVHlwZUFoZWFkQ29uc3RzLmNvbWJvTm9EYXRhQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuYWRkT3B0aW9uKGl0ZW0sIFR5cGVBaGVhZENvbnN0cy5jb21ib09wdGlvbkNsYXNzKSk7XG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZURyb3BEb3duUG9zaXRpb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uc0xpc3RFTC5jbGFzc0xpc3QuYWRkKFR5cGVBaGVhZENvbnN0cy5jb21ib05vRGF0YUNsYXNzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjbGVhckxpc3QoKSB7XG4gICAgICAgIHRoaXMud2FybmluZ09wdGlvbiA9IHRoaXMub3B0aW9uc0xpc3RFTC5xdWVyeVNlbGVjdG9yKFR5cGVBaGVhZENvbnN0cy5jb21ib09wdGlvbkRpc2FibGVkU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLm9wdGlvbnNMaXN0RUwuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgdGhpcy5vcHRpb25zTGlzdEVMLmFwcGVuZENoaWxkKHRoaXMud2FybmluZ09wdGlvbik7XG4gICAgfVxuXG4gICAgcHVibGljIHNob3dXYXJuaW5nKCkge1xuICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQodGhpcy5pbnB1dEVMLCBGb3JtSW5wdXRfQ09OU1RTLndhcm5DbGFzcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVdhcm5pbmcoKSB7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KHRoaXMuaW5wdXRFTCwgRm9ybUlucHV0X0NPTlNUUy53YXJuQ2xhc3MpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRMb2FkaW5nKG9uOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMub3B0aW9uc0xpc3RFTC5jbGFzc0xpc3QucmVtb3ZlKFR5cGVBaGVhZENvbnN0cy5jb21ib05vRGF0YUNsYXNzKTtcbiAgICAgICAgaWYgKG9uKSB0aGlzLnNob3dQb3B1cCgpO1xuICAgICAgICB0aGlzLmxvYWRpbmdFTC5zdHlsZS5kaXNwbGF5ID0gb24gPyBUeXBlQWhlYWRDb25zdHMuY29tYm9TdHlsZURpc3BsYXlCbG9jayA6IFR5cGVBaGVhZENvbnN0cy5jb21ib1N0eWxlRGlzcGxheU5vbmU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVPcHRpb25TZWxlY3QoZTogRXZlbnQpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MRGl2RWxlbWVudCkuY2xhc3NMaXN0LmNvbnRhaW5zKFR5cGVBaGVhZENvbnN0cy5jb21ib09wdGlvbkNsYXNzKSkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVMLnZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxEaXZFbGVtZW50KS50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJCdG5FTC5zdHlsZS5kaXNwbGF5ID0gVHlwZUFoZWFkQ29uc3RzLmNvbWJvU3R5bGVEaXNwbGF5Tm9uZTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFTC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNoYW5nZVwiKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5hZnRlclNlbGVjdENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlclNlbGVjdENhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmhpZGVQb3B1cCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRPcHRpb24odGV4dDogc3RyaW5nLCBjbGFzc05hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIFwiMFwiKTtcbiAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRleHQpO1xuICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICB0aGlzLm9wdGlvbnNMaXN0RUwuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmJvZHlFbCwgXCJjbGlja1wiLCB0aGlzLmNsaWNrT3V0c2lkZUxpc3RlbmVyKTtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5pbnB1dEVMLCBcImZvY3VzXCIsIHRoaXMuaW5wdXRGb2N1c0xpc3RlbmVyKTtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5pbnB1dEVMLCBcImlucHV0XCIsIHRoaXMuaW5wdXRDaGFuZ2VMaXN0ZW5lcik7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRFdmVudExpc3RlbmVyKHRoaXMub3B0aW9uc0xpc3RFTCwgXCJjbGlja1wiLCB0aGlzLm9wdGlvbnNTZWxlY3RMaXN0ZW5lcik7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRFdmVudExpc3RlbmVyKHRoaXMuY2xlYXJCdG5FTCwgXCJjbGlja1wiLCB0aGlzLmNsZWFyQ2xpY2tMaXN0ZW5lcik7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxMaXN0ZW5lcik7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LCBcInRvdWNobW92ZVwiLCB0aGlzLnNjcm9sbExpc3RlbmVyKTtcbiAgICAgICBnaWd5YS51dGlscy5ET00uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmNvbnRhaW5lckVsLCBcImtleWRvd25cIiwgdGhpcy5hcnJvd0tleUxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uSW5wdXRDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJCdG5FTC5zdHlsZS5kaXNwbGF5ID0gdGhpcy5pbnB1dEVMLnZhbHVlID8gVHlwZUFoZWFkQ29uc3RzLmNvbWJvU3R5bGVEaXNwbGF5QmxvY2sgOiBUeXBlQWhlYWRDb25zdHMuY29tYm9TdHlsZURpc3BsYXlOb25lO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25DbGVhckNsaWNrKGU6IGFueSkge1xuICAgICAgICAvLyBDbGVhciB0aGUgaW5wdXQgdmFsdWUgYW5kIGhpZGUgdGhlIGNsZWFyIGJ1dHRvblxuICAgICAgICB0aGlzLnNldFZhbHVlKFwiXCIpO1xuICAgICAgICB0aGlzLnNldE9wdGlvbnMoW10pO1xuICAgICAgICB0aGlzLnJlbW92ZVdhcm5pbmcoKTtcbiAgICAgICAgdGhpcy5jbGVhckJ0bkVMLnN0eWxlLmRpc3BsYXkgPSBUeXBlQWhlYWRDb25zdHMuY29tYm9TdHlsZURpc3BsYXlOb25lO1xuICAgICAgICB0aGlzLmhpZGVQb3B1cCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgY2xpY2tlZE91dHNpZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0NsaWNrT3V0c2lkZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0IGNsaWNrZWRPdXRzaWRlKGNsaWNrZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5faXNDbGlja091dHNpZGUgPSBjbGlja2VkO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25JbnB1dEZvY3VzKGUpIHtcbiAgICAgICAgdGhpcy5jbGlja2VkT3V0c2lkZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlbW92ZVdhcm5pbmcoKTtcbiAgICAgICAgaWYgKGUudGFyZ2V0Py52YWx1ZT8ubGVuZ3RoID49IHRoaXMubWluaW11bUNoYXJhY3RlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1BvcHVwKCk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHB1YmxpYyBzaG93UG9wdXAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMucG9wdXBFTC5jbGFzc0xpc3QuYWRkKFR5cGVBaGVhZENvbnN0cy5jb21ib0FjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlRHJvcERvd25Qb3NpdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGhpZGVQb3B1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLnBvcHVwRUwuY2xhc3NMaXN0LnJlbW92ZShUeXBlQWhlYWRDb25zdHMuY29tYm9BY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkNsaWNrT3V0c2lkZShldmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuaW5wdXRFTFtUZW1wbGF0ZUVsZW1lbnRfQ09OU1RTLmluc3RhbmNlT2ZBcnJheV0/Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgfSBlbHNlIGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QoVHlwZUFoZWFkQ29uc3RzLmNvbWJvV3JhcHBlclNlbGVjdG9yKSkge1xuICAgICAgICAgICAgdGhpcy5oaWRlUG9wdXAoKTtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tlZE91dHNpZGUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWNrT3V0U2lkZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xpY2tPdXRTaWRlQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuaW5wdXRFTCwgXCJmb2N1c1wiLCB0aGlzLmlucHV0Rm9jdXNMaXN0ZW5lcik7XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuaW5wdXRFTCwgXCJpbnB1dFwiLCB0aGlzLmlucHV0Q2hhbmdlTGlzdGVuZXIpO1xuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLm9wdGlvbnNMaXN0RUwsIFwiY2xpY2tcIiwgdGhpcy5vcHRpb25zU2VsZWN0TGlzdGVuZXIpO1xuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmJvZHlFbCwgXCJjbGlja1wiLCB0aGlzLmNsaWNrT3V0c2lkZUxpc3RlbmVyKTtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLnNjcm9sbExpc3RlbmVyKTtcbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsIFwidG91Y2htb3ZlXCIsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xuICAgICAgICBnaWd5YS51dGlscy5ET00ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLmNvbnRhaW5lckVsLCBcImtleWRvd25cIiwgdGhpcy5hcnJvd0tleUxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbGN1bGF0ZURyb3BEb3duUG9zaXRpb24oKSB7XG4gICAgICAgIGNvbnN0IHBvcHVwRWxIZWlnaHQgPSAxNjA7XG4gICAgICAgIGNvbnN0IGlucHV0UG9zaXRpb24gPSB0aGlzLmlucHV0RUwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IGlucHV0V2lkdGggPSBpbnB1dFBvc2l0aW9uLndpZHRoO1xuICAgICAgICBjb25zdCBpc092ZXJmbG93aW5nID0gaW5wdXRQb3NpdGlvbi50b3AgKyBwb3B1cEVsSGVpZ2h0ID49IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdGhpcy5wb3B1cEVMLnN0eWxlLndpZHRoID0gYCR7aW5wdXRXaWR0aH1weGA7XG4gICAgICAgIHRoaXMucG9wdXBFTC5zdHlsZS5ib3R0b20gPSAnJztcbiAgICAgICAgdGhpcy5wb3B1cEVMLnN0eWxlLnRvcCA9ICcnO1xuICAgICAgICBpc092ZXJmbG93aW5nID8gdGhpcy5wb3B1cEVMLnN0eWxlLmJvdHRvbSA9IGAke3dpbmRvdy5pbm5lckhlaWdodCAtIGlucHV0UG9zaXRpb24udG9wfXB4YCA6XG4gICAgICAgICAgICB0aGlzLnBvcHVwRUwuc3R5bGUudG9wID0gYCR7aW5wdXRQb3NpdGlvbi50b3AgKyBpbnB1dFBvc2l0aW9uLmhlaWdodH1weGA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblNjcm9sbChldmVudCkge1xuICAgICAgICBpZiAoIWlzUGFyZW50SGFzQ2xhc3MoZXZlbnQ/LnRhcmdldCwgVHlwZUFoZWFkQ29uc3RzLmNvbWJvUG9wdXBDbGFzcykpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZVBvcHVwKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVzZUFycm93S2V5cyhldmVudCkge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVXAoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVEb3duKGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVPcHRpb25TZWxlY3QoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtb3ZlVXAoZXZlbnQpIHtcbiAgICAgIHRoaXMuZm9jdXNGaXJzdENoaWxkSW5MaXN0KGV2ZW50KTtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldD8ucHJldmlvdXNFbGVtZW50U2libGluZz8uY2xhc3NMaXN0LmNvbnRhaW5zKFR5cGVBaGVhZENvbnN0cy5jb21ib09wdGlvbkNsYXNzKSkge1xuICAgICAgICAgICAgY29uc3QgaHRtbERpdjogSFRNTERpdkVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgICAgICBodG1sRGl2LmNsYXNzTGlzdC5yZW1vdmUoVHlwZUFoZWFkQ29uc3RzLmNvbWJvT3B0aW9uU2VsZWN0ZWRDbGFzcyk7XG4gICAgICAgICAgICBodG1sRGl2LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZChUeXBlQWhlYWRDb25zdHMuY29tYm9PcHRpb25TZWxlY3RlZENsYXNzKTtcbiAgICAgICAgICAgIChodG1sRGl2LnByZXZpb3VzRWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnQpLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIG1vdmVEb3duKGV2ZW50KSB7XG4gICAgICB0aGlzLmZvY3VzRmlyc3RDaGlsZEluTGlzdChldmVudCk7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nPy5jbGFzc0xpc3QuY29udGFpbnMoVHlwZUFoZWFkQ29uc3RzLmNvbWJvT3B0aW9uQ2xhc3MpKSB7XG4gICAgICAgICAgICBjb25zdCBodG1sRGl2OiBIVE1MRGl2RWxlbWVudCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIGh0bWxEaXYuY2xhc3NMaXN0LnJlbW92ZShUeXBlQWhlYWRDb25zdHMuY29tYm9PcHRpb25TZWxlY3RlZENsYXNzKTtcbiAgICAgICAgICAgIGh0bWxEaXYubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoVHlwZUFoZWFkQ29uc3RzLmNvbWJvT3B0aW9uU2VsZWN0ZWRDbGFzcyk7XG4gICAgICAgICAgICAoaHRtbERpdi5uZXh0RWxlbWVudFNpYmxpbmcgYXMgSFRNTEVsZW1lbnQpLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGZvY3VzRmlyc3RDaGlsZEluTGlzdChldmVudCl7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmKGV2ZW50LnRhcmdldD8ubmV4dEVsZW1lbnRTaWJsaW5nPy5xdWVyeVNlbGVjdG9yKFR5cGVBaGVhZENvbnN0cy5jb21ib0xpc3RTZWxlY3Rvcikpe1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMub3B0aW9uc0xpc3RFTC5jaGlsZHJlbjtcbiAgICAgICAgICAgIGlmKG9wdGlvbnMubGVuZ3RoID4gMSl7IC8vZmlyc3QgY2hpbGQgaXMgYWx3YXlzIHRlaCBkaXNhYmxlZCBvbmUuIGNob29zZSB0aGUgc2Vjb25kIGlmIGV4aXN0cy5cbiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdEFkZHJlc3NPcHRpb24gPSBvcHRpb25zLml0ZW0oMSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0QWRkcmVzc09wdGlvbj8uY2xhc3NMaXN0LmNvbnRhaW5zKFR5cGVBaGVhZENvbnN0cy5jb21ib09wdGlvbkNsYXNzKSkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEFkZHJlc3NPcHRpb24uY2xhc3NMaXN0LmFkZChUeXBlQWhlYWRDb25zdHMuY29tYm9PcHRpb25TZWxlY3RlZENsYXNzKTtcbiAgICAgICAgICAgICAgICAgICAgKGZpcnN0QWRkcmVzc09wdGlvbiBhcyBIVE1MRWxlbWVudCkuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKXtcbiAgICAgICAgc3VwZXIuZXZhbHVhdGVDb25kaXRpb25hbEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgaWYodGhpcy5pc09wZW4pe1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVEcm9wRG93blBvc2l0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJQ29uZGl0aW9uYWxBdHRyaWJ1dGUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL1RlbXBsYXRlRWxlbWVudCc7XG5pbXBvcnQgeyBTY3JlZW5fQ09OU1RTIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9TY3JlZW5Db25zdHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNIaWRkZW4oZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgd2hpbGUgKGVsICYmIGVsLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZWwuc3R5bGUudmlzaWJpbGl0eSA9PT0gJ2hpZGRlbicgfHwgLy8gaGlkZGVuIGVsZW1lbnRcbiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyB8fCAvLyBoaWRkZW4gZWxlbWVudFxuICAgICAgICAgICAgKGdpZ3lhLnV0aWxzLkRPTS5pc0VsZW1lbnRDbGFzcyhlbCwgJ2dpZ3lhLWVycm9yLWRpc3BsYXknKSAmJiAhZ2lneWEudXRpbHMuRE9NLmlzRWxlbWVudENsYXNzKGVsLCAnZ2lneWEtZXJyb3ItZGlzcGxheS1hY3RpdmUnKSkgfHwgLy8gaGlkZGVuIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5pc0VsZW1lbnRDbGFzcyhlbCwgJ25nLWhpZGUnKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIGFuZ3VsYXIgaGlkZGVuIGVsZW1lbnRcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGluSUZyYW1lKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0ZpZWxkSW5IaWRkZW5Db250YWluZXIoZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IGN1cnIgPSBlbDtcblxuICAgIHdoaWxlIChjdXJyKSB7XG4gICAgICAgIGlmIChnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoY3VyciwgJ2dpZ3lhLWNvbnRhaW5lcicpICYmICFnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoY3VyciwgJ2dpZ3lhLWNvbnRhaW5lci1lbmFibGVkJykpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIGN1cnIgPSBjdXJyLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzUGFyZW50QXR0cmlidXRlKGVsOiBIVE1MRWxlbWVudCwgYXR0ck5hbWU6IHN0cmluZywgYXR0clZhbHVlOiBzdHJpbmcpIHtcbiAgICBsZXQgY3VyciA9IGVsO1xuXG4gICAgd2hpbGUgKGN1cnIpIHtcbiAgICAgICAgaWYgKGN1cnIuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKSA9PT0gYXR0clZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnIgPSBjdXJyLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5pbnRlcmZhY2UgSURpbW1lZEhUTUxFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGVsRGltOiBIVE1MRGl2RWxlbWVudDtcbiAgICBlbFByb2dyZXNzOiBIVE1MRGl2RWxlbWVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaXJzdFBhcnQoc3RyOiBzdHJpbmcsIHNlcGVyYXRvcjogc3RyaW5nKSB7XG4gICAgdmFyIGluZGV4ID0gc3RyLmluZGV4T2Yoc2VwZXJhdG9yKTtcblxuICAgIHJldHVybiBpbmRleCA+IC0xID8gc3RyLnN1YnN0cmluZygwLCBpbmRleCkgOiBzdHI7XG59XG5leHBvcnQgaW50ZXJmYWNlIElOdW1lcmljTWFwPFQ+IHtcbiAgICBba2V5OiBudW1iZXJdOiBUO1xufVxuZXhwb3J0IGludGVyZmFjZSBJTWFwPFQ+IHtcbiAgICBba2V5OiBzdHJpbmddOiBUO1xufVxuZXhwb3J0IGludGVyZmFjZSBJRW51bWVyYWJsZTxUPiB7XG4gICAgbGVuZ3RoOiBudW1iZXI7XG4gICAgW2k6IG51bWJlcl06IFQ7XG59XG5leHBvcnQgZnVuY3Rpb24gTGFzdEluZGV4T2Y8VD4oYXJyOiBJRW51bWVyYWJsZTxUPiwgdmFsOiBULCBmcm9tSW5kZXggPSAwKTogbnVtYmVyIHtcbiAgICBmb3IgKHZhciBpID0gYXJyLmxlbmd0aDsgLS1pID49IGZyb21JbmRleDsgKSB7XG4gICAgICAgIGlmIChhcnJbaV0gPT09IHZhbCkgcmV0dXJuIGk7XG4gICAgfVxuXG4gICAgcmV0dXJuIC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIEZvckVhY2g8VD4oYXJyOiBJRW51bWVyYWJsZTxUPiwgYWN0aW9uOiAoZWxlbWVudDogVCwgaW5kZXg/OiBudW1iZXIsIGFycj86IElFbnVtZXJhYmxlPFQ+KSA9PiB2b2lkKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgYWN0aW9uKGFycltpXSwgaSwgYXJyKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gRm9yRWFjaFByb3A8VD4ob2JqOiBJTWFwPFQ+LCBhY3Rpb246IChwcm9wOiBULCBuYW1lOiBzdHJpbmcsIG9iajogSU1hcDxUPikgPT4gdm9pZCk7XG5leHBvcnQgZnVuY3Rpb24gRm9yRWFjaFByb3A8VCBleHRlbmRzIE9iamVjdD4ob2JqOiBULCBhY3Rpb246IChwcm9wOiBhbnksIG5hbWU6IHN0cmluZywgb2JqOiBUKSA9PiB2b2lkKTtcbmV4cG9ydCBmdW5jdGlvbiBGb3JFYWNoUHJvcChvYmo6IE9iamVjdCwgYWN0aW9uOiAocHJvcDogYW55LCBuYW1lOiBzdHJpbmcsIG9iajogT2JqZWN0KSA9PiB2b2lkKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiBvYmopIHtcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgYWN0aW9uKG9ialtuYW1lXSwgbmFtZSwgb2JqKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gU29tZTxUPihhcnI6IElFbnVtZXJhYmxlPFQ+LCBjb25kaXRpb246IChlbGVtZW50OiBULCBpbmRleD86IG51bWJlciwgYXJyPzogSUVudW1lcmFibGU8VD4pID0+IGJvb2xlYW4pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoY29uZGl0aW9uKGFycltpXSwgaSwgYXJyKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIEV2ZXJ5PFQ+KGFycjogSUVudW1lcmFibGU8VD4sIGNvbmRpdGlvbjogKGVsZW1lbnQ6IFQsIGluZGV4PzogbnVtYmVyLCBhcnI/OiBJRW51bWVyYWJsZTxUPikgPT4gYm9vbGVhbikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmICghY29uZGl0aW9uKGFycltpXSwgaSwgYXJyKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIEV2ZXJ5UHJvcDxUPihvYmo6IElNYXA8VD4sIGNvbmRpdGlvbjogKHByb3A6IFQsIG5hbWU6IHN0cmluZywgb2JqOiBJTWFwPFQ+KSA9PiBib29sZWFuKTtcbmV4cG9ydCBmdW5jdGlvbiBFdmVyeVByb3A8VD4ob2JqOiBULCBjb25kaXRpb246IChwcm9wLCBuYW1lOiBzdHJpbmcsIG9iajogVCkgPT4gYm9vbGVhbik7XG5leHBvcnQgZnVuY3Rpb24gRXZlcnlQcm9wKG9iajogT2JqZWN0LCBjb25kaXRpb246IChwcm9wLCBuYW1lOiBzdHJpbmcsIG9iajogT2JqZWN0KSA9PiBib29sZWFuKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiBvYmopIHtcbiAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiAhY29uZGl0aW9uKG9ialtuYW1lXSwgbmFtZSwgb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIE1hcDxTLCBUPihhcnI6IElFbnVtZXJhYmxlPFM+LCBhY3Rpb246IChlbGVtZW50OiBTLCBpbmRleD86IG51bWJlciwgYXJyPzogSUVudW1lcmFibGU8Uz4pID0+IFQpIHtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5PFQ+KCk7XG5cbiAgICBGb3JFYWNoKGFyciwgKGl0ZW0sIGlkeCwgYXJyKSA9PiByZXN1bHQucHVzaChhY3Rpb24oaXRlbSwgaWR4LCBhcnIpKSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIERlZXBGcmVlemUob2JqOiBPYmplY3QpIHtcbiAgICAvLyBPbmx5IG9uY2UgSUU5IGlzIHRoZSBtaW5pbXVtIC0gY3VycmVudGx5IElFNyBpcyBzdXBwb3J0ZWRcbiAgICAvKlxuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmICFPYmplY3QuaXNGcm96ZW4ob2JqW2tleV0pKSB7XG4gICAgICAgICAgICBGb3JFYWNoUHJvcChvYmosIChwcm9wKSA9PiBEZWVwRnJlZXplKHByb3ApKTtcblxuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShvYmopO1xuICAgICAgICB9XG4gICAgICAgICovXG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZShwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgdGFnTmFtZTogc3RyaW5nLCBhdHRyaWJ1dGVOYW1lOiBzdHJpbmcpIHtcbiAgICB2YXIgYXJFbHMgPSBuZXcgQXJyYXk8SFRNTEVsZW1lbnQ+KCk7XG4gICAgdmFyIGVsczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4gPSBwYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpIGFzIGFueTtcblxuICAgIEZvckVhY2goZWxzLCBlbCA9PiB7XG4gICAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSkpIHtcbiAgICAgICAgICAgIGFyRWxzLnB1c2goZWwpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYXJFbHM7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNCeUhhdmluZ0F0dHJpYnV0ZVByZWZpeChcbiAgICBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBhdHRyaWJ1dGVQcmVmaXhlczogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPixcbiAgICB0YWdOYW1lc0V4Y2VwdGlvbnM6IEFycmF5PHN0cmluZz4gPSBbXSxcbik6IEFycmF5PEhUTUxFbGVtZW50PiB7XG4gICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVQcmVmaXhlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgYXR0cmlidXRlUHJlZml4ZXMgPSBbYXR0cmlidXRlUHJlZml4ZXNdO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50czogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4gPSBwYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykgYXMgYW55O1xuICAgIGNvbnN0IG1hdGNoaW5nRWxlbWVudHMgPSBuZXcgQXJyYXk8SFRNTEVsZW1lbnQ+KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZWxlbWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVsID0gZWxlbWVudHMuaXRlbShpKTtcbiAgICAgICAgaWYgKGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YodGFnTmFtZXNFeGNlcHRpb25zLCBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpICE9PSAtMSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBhdHRyaWJ1dGVQcmVmaXggb2YgYXR0cmlidXRlUHJlZml4ZXMpIHtcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnRDb250YWluQXR0cmlidXRlUHJlZml4KGVsZW1lbnRzW2ldLCBhdHRyaWJ1dGVQcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdFbGVtZW50cy5wdXNoKGVsZW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWF0Y2hpbmdFbGVtZW50cztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0VsZW1lbnRDb250YWluQXR0cmlidXRlUHJlZml4KGVsOiBIVE1MRWxlbWVudCwgc3ViU3RyaW5nOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICB2YXIgZWxlbWVudEF0dHJpYnV0ZXM6IE5hbWVkTm9kZU1hcCA9IGVsLmF0dHJpYnV0ZXM7XG4gICAgdmFyIGNvbnRhaW5Db25kaXRpb25hbEF0dHJpYnV0ZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGlmIChlbGVtZW50QXR0cmlidXRlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRBdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudEF0dHJpYnV0ZXNbaV0ubm9kZU5hbWUuaW5kZXhPZihzdWJTdHJpbmcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5Db25kaXRpb25hbEF0dHJpYnV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbnRhaW5Db25kaXRpb25hbEF0dHJpYnV0ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25kaXRpb25hbEF0dHJpYnV0ZUV4cHJlc3Npb25zKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpc1dpZGdldENvbnRleHQ6IGJvb2xlYW4gPSBmYWxzZSk6IEFycmF5PElDb25kaXRpb25hbEF0dHJpYnV0ZT4ge1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHZhciBjb25kaXRpb25hbEV4cHJlc3Npb25zID0gbmV3IEFycmF5PElDb25kaXRpb25hbEF0dHJpYnV0ZT4oKTtcbiAgICB2YXIgY29uZGl0aW9uYWxEZWZhdWx0VmFsdWU6IHN0cmluZztcbiAgICBsZXQgbGFzdEF0dHJpYnV0ZVZhbHVlOiBzdHJpbmc7XG4gICAgdmFyIGlzUGFyYW1UYWc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICB2YXIgYXR0cmlidXRlcyA9IGdldEF0dHJpYnV0ZXNBc0FycmF5KGVsZW1lbnQpO1xuXG4gICAgRm9yRWFjaChhdHRyaWJ1dGVzLCBhdCA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgY29uZGl0aW9uYWwgYXR0cmlidXRlIHByZWZpeCB3aGljaCBkZXRlcm1pbmVzIGlmIHRoaXMgYXR0cmlidXRlIGJlIGV2YWx1YXRlZC5cbiAgICAgICAgICAgIGNvbnN0IGlzQ29uZGl0aW9uYWxBdHRyaWJ1dGUgPSBhdC5ub2RlTmFtZS5pbmRleE9mKFNjcmVlbl9DT05TVFMuY29uZGl0aW9uYWxBdHRyaWJ1dGVQcmVmaXgpICE9PSAtMTtcbiAgICAgICAgICAgIGNvbnN0IGlzRXhwcmVzc2lvbkF0dHJpYnV0ZSA9IGF0Lm5vZGVOYW1lLmluZGV4T2YoU2NyZWVuX0NPTlNUUy5leHByZXNzaW9uQXR0cmlidXRlUHJlZml4KSAhPT0gLTE7XG5cbiAgICAgICAgICAgIGlmIChpc0NvbmRpdGlvbmFsQXR0cmlidXRlIHx8IGlzRXhwcmVzc2lvbkF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9uSW5kZXggPSBhdC5ub2RlTmFtZS5pbmRleE9mKCc6Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbG9uSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRBdHRyaWJ1dGU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1dpZGdldENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbmFsRGVmYXVsdFZhbHVlID0gZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ3ZhbHVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBdHRyaWJ1dGUgPSBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLmdldEF0dHJpYnV0ZShlbGVtZW50LCAnbmFtZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNQYXJhbVRhZyA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAncGFyYW0nO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXR0cmlidXRlID0gYXQubm9kZU5hbWUuc3Vic3RyaW5nKGNvbG9uSW5kZXggKyAxLCBhdC5ub2RlTmFtZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEF0dHJpYnV0ZVZhbHVlID0gZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgdGFyZ2V0QXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUF0dHJpYnV0ZSA9ICdnaWd5YS1kZWZhdWx0LScgKyB0YXJnZXRBdHRyaWJ1dGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uZ2V0QXR0cmlidXRlKGVsZW1lbnQsIGRlZmF1bHRWYWx1ZUF0dHJpYnV0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLnNldEF0dHJpYnV0ZShlbGVtZW50LCBkZWZhdWx0VmFsdWVBdHRyaWJ1dGUsIGxhc3RBdHRyaWJ1dGVWYWx1ZSAhPT0gbnVsbCA/IGxhc3RBdHRyaWJ1dGVWYWx1ZSA6ICdudWxsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLmdldEF0dHJpYnV0ZShlbGVtZW50LCBkZWZhdWx0VmFsdWVBdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uYWxEZWZhdWx0VmFsdWUgPSB2YWwgIT09ICdudWxsJyA/IHZhbCA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBDb25kaXRpb25hbHMgYXJlIGFsd2F5cyB0ZXJuYXJ5IHdpdGggc3BlY2lhbCBlc2NhcGluZyBhbmQgcGFyc2luZyBkb25lLlxuICAgICAgICAgICAgICAgICAgICAvLyBJbjogZXhwcmVzc2lvbiA/IHZhbHVlIDogb3RoZXJWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAvLyBPdXQ6IGV4cHJlc3Npb24gPyAndmFsdWUnIDogJ290aGVyVmFsdWUnXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4cHJlc3Npb25zIGFyZSBwYXJzZWQgYXMtaXMgYW5kIHRoZSByZXR1cm5lZCB2YWx1ZSBpcyBzZXQuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbmFsRXhwcmVzc2lvbiA9ICFpc0V4cHJlc3Npb25BdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0dXBDb25kaXRpb25hbEV4cHJlc3Npb25WYWx1ZShhdC5ub2RlVmFsdWUsIGNvbmRpdGlvbmFsRGVmYXVsdFZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBhdC5ub2RlVmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uYWw6IElDb25kaXRpb25hbEF0dHJpYnV0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6IHRhcmdldEF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uYWxFeHByZXNzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBjb25kaXRpb25hbERlZmF1bHRWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RBdHRyaWJ1dGVWYWx1ZTogbGFzdEF0dHJpYnV0ZVZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNXaWRnZXRQYXJhbVRhZzogaXNQYXJhbVRhZyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uYWxFeHByZXNzaW9ucy5wdXNoKGNvbmRpdGlvbmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29uZGl0aW9uYWwgZm9ybWF0IGVycm9yOiAnICsgZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY29uZGl0aW9uYWxFeHByZXNzaW9ucztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cENvbmRpdGlvbmFsRXhwcmVzc2lvblZhbHVlKGNvbmRpdGlvbmFsVmFsdWU6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGV4cHJlc3Npb25XaXRoRmFsc2VWYWx1ZSA9IHNldHVwQ29uZGl0aW9uYWxGYWxzZVZhbHVlKGNvbmRpdGlvbmFsVmFsdWUsIGRlZmF1bHRWYWx1ZSk7XG4gICAgY29uc3QgZXhwcmVzc2lvbldpdGhFc2NhcGluZyA9IGVzY2FwZUNoYXJhY3RlcnNJbkNvbmRpdGlvbmFsVmFsdWUoZXhwcmVzc2lvbldpdGhGYWxzZVZhbHVlKTtcbiAgICBsZXQgZmluYWxDb25kaXRpb25hbEV4cHJlc3Npb24gPSBzZXRVcExhc3RGYWxzZVZhbHVlKGV4cHJlc3Npb25XaXRoRXNjYXBpbmcpO1xuICAgIGlmICghZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIC8vIGZpeCBkZWZhdWx0IHZhbHVlIHRvIGJlIGEgZmFsc3kgdmFsdWUgaW5zdGVhZCBvZiBhIHN0cmluZyBsaXRlcmFsXG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUxvY2F0aW9uID0gZmluYWxDb25kaXRpb25hbEV4cHJlc3Npb24ubGFzdEluZGV4T2YoYDonJHtkZWZhdWx0VmFsdWV9J2ApO1xuICAgICAgICBpZiAoZGVmYXVsdFZhbHVlTG9jYXRpb24gPiAtMSkge1xuICAgICAgICAgICAgZmluYWxDb25kaXRpb25hbEV4cHJlc3Npb24gPSBgJHtmaW5hbENvbmRpdGlvbmFsRXhwcmVzc2lvbi5zdWJzdHJpbmcoMCwgZGVmYXVsdFZhbHVlTG9jYXRpb24pfTpudWxsYDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmluYWxDb25kaXRpb25hbEV4cHJlc3Npb247XG59XG5mdW5jdGlvbiBzZXR1cENvbmRpdGlvbmFsRmFsc2VWYWx1ZShjb25kaXRpb25hbFZhbHVlOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbGFzdCAnZmFsc2UnIHZhbHVlIGhhcyBhICc6JyBzaWduIGFuZCBpZiBpdCBkb2Vzbid0LCBhZGQgaXQgYW5kIGFzc2lnbiB0aGUgZGVmYXVsdCB2YWx1ZSwgaWYgdGhlcmUncyBvbmUuXG4gICAgdmFyIGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyA9IGNvbmRpdGlvbmFsVmFsdWUubGFzdEluZGV4T2YoJz8nKTtcbiAgICB2YXIgc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyA9IGNvbmRpdGlvbmFsVmFsdWUuc3Vic3RyKGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyArIDEsIGNvbmRpdGlvbmFsVmFsdWUubGVuZ3RoKTtcblxuICAgIHZhciBpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHNEaXZpZGVyID0gc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cy5pbmRleE9mKCc6Jyk7XG4gICAgaWYgKGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0c0RpdmlkZXIgPT09IC0xKSB7XG4gICAgICAgIGNvbmRpdGlvbmFsVmFsdWUgKz0gJzonO1xuICAgICAgICBpZiAoZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICBjb25kaXRpb25hbFZhbHVlICs9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZXJlJ3MgYSAnZmFsc2UnIHZhbHVlIG9yIGp1c3QgYW4gZW1wdHkgc3RyaW5nXG4gICAgICAgIHZhciBlbXB0eUZhbHNlVmFsdWUgPSBzdWJTdHJpbmdPZkxhc3RDb25kaXRpb25SZXN1bHRzLnN1YnN0cihpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHNEaXZpZGVyICsgMSwgc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cy5sZW5ndGgpO1xuICAgICAgICBpZiAoZW1wdHlGYWxzZVZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgY29uZGl0aW9uYWxWYWx1ZSA9IGNvbmRpdGlvbmFsVmFsdWUuc3Vic3RyKDAsIGNvbmRpdGlvbmFsVmFsdWUubGVuZ3RoKSArIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29uZGl0aW9uYWxWYWx1ZTtcbn1cbmZ1bmN0aW9uIGVzY2FwZUNoYXJhY3RlcnNJbkNvbmRpdGlvbmFsVmFsdWUoY29uZGl0aW9uYWxWYWx1ZSk6IHN0cmluZyB7XG4gICAgLy8gRXNjYXBlIGFueSBcIidcIiBzaWducy5cbiAgICBjb25kaXRpb25hbFZhbHVlID0gY29uZGl0aW9uYWxWYWx1ZS5yZXBsYWNlKC9cXCcvZywgXCInXCIpO1xuICAgIC8vIEVuY2xvc2UgYWxsIHRoZSAndHJ1ZScgdmFsdWVzIGluICcnXG4gICAgY29uZGl0aW9uYWxWYWx1ZSA9IGNvbmRpdGlvbmFsVmFsdWUucmVwbGFjZSgvXFw/L2csIFwiPydcIik7XG4gICAgY29uZGl0aW9uYWxWYWx1ZSA9IGNvbmRpdGlvbmFsVmFsdWUucmVwbGFjZSgvOi9nLCBcIic6XCIpO1xuICAgIHJldHVybiBjb25kaXRpb25hbFZhbHVlO1xufVxuZnVuY3Rpb24gc2V0VXBMYXN0RmFsc2VWYWx1ZShjb25kaXRpb25hbFZhbHVlKTogc3RyaW5nIHtcbiAgICAvLyBTZXQgYW4gYXBob3N0cm9waGUgaW4gdGhlIGxhc3QgJ2ZhbHNlJyBpZiB0aGVyZSBpc24ndCBvbmVcbiAgICAvLyBGaXJzdDogdHJpbSB0aGUgbGFzdCAnZmFsc2UnIHZhbHVlIGZvciB0aGUgYXBob3N0cm9waGUgaW5zZXJ0aW9uXG4gICAgdmFyIGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyA9IGNvbmRpdGlvbmFsVmFsdWUubGFzdEluZGV4T2YoJz8nKTtcbiAgICB2YXIgc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyA9IGNvbmRpdGlvbmFsVmFsdWUuc3Vic3RyKGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyArIDEsIGNvbmRpdGlvbmFsVmFsdWUubGVuZ3RoKTtcbiAgICB2YXIgZmFsc2VSZXN1bHRTdGFydEluZGV4ID0gc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cy5pbmRleE9mKCc6JykgKyAxO1xuICAgIHZhciBsYXN0RmFsc2VSZXN1bHRWYWx1ZSA9IHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMuc3Vic3RyKGZhbHNlUmVzdWx0U3RhcnRJbmRleCwgc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cy5sZW5ndGgpO1xuICAgIGxhc3RGYWxzZVJlc3VsdFZhbHVlID0gZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMudHJpbShsYXN0RmFsc2VSZXN1bHRWYWx1ZSk7XG4gICAgaWYgKGxhc3RGYWxzZVJlc3VsdFZhbHVlWzBdICE9IFwiJ1wiKSB7XG4gICAgICAgIGxhc3RGYWxzZVJlc3VsdFZhbHVlID0gXCInXCIgKyBsYXN0RmFsc2VSZXN1bHRWYWx1ZTtcbiAgICB9XG4gICAgaWYgKGxhc3RGYWxzZVJlc3VsdFZhbHVlW2xhc3RGYWxzZVJlc3VsdFZhbHVlLmxlbmd0aF0gIT0gXCInXCIpIHtcbiAgICAgICAgbGFzdEZhbHNlUmVzdWx0VmFsdWUgKz0gXCInXCI7XG4gICAgfVxuICAgIHZhciBsYXN0VHJ1ZVJlc3VsdFZhbHVlID0gc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cy5zdWJzdHIoMCwgZmFsc2VSZXN1bHRTdGFydEluZGV4IC0gMSk7XG4gICAgY29uZGl0aW9uYWxWYWx1ZSA9IGNvbmRpdGlvbmFsVmFsdWUuc3Vic3RyKDAsIGluZGV4T2ZMYXN0Q29uZGl0aW9uUmVzdWx0cyArIDEpICsgbGFzdFRydWVSZXN1bHRWYWx1ZSArICc6JyArIGxhc3RGYWxzZVJlc3VsdFZhbHVlO1xuICAgIHJldHVybiBjb25kaXRpb25hbFZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzS2V5Q29kZURpc3BsYXlhYmxlKGtleWNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAgIChrZXljb2RlID4gNDcgJiYga2V5Y29kZSA8IDU4KSB8fCAvLyBudW1iZXIga2V5c1xuICAgICAgICAoa2V5Y29kZSA9PSAzMiB8fCBrZXljb2RlID09IDEzKSB8fCAvLyBzcGFjZWJhciAmIHJldHVybiBrZXkocylcbiAgICAgICAgKGtleWNvZGUgPiA2NCAmJiBrZXljb2RlIDwgOTEpIHx8IC8vIGxldHRlciBrZXlzXG4gICAgICAgIChrZXljb2RlID4gOTUgJiYga2V5Y29kZSA8IDExMikgfHwgLy8gbnVtcGFkIGtleXNcbiAgICAgICAgKGtleWNvZGUgPiAxODUgJiYga2V5Y29kZSA8IDE5MykgfHwgLy8gOz0sLS4vYCAoaW4gb3JkZXIpXG4gICAgICAgIChrZXljb2RlID4gMjE4ICYmIGtleWNvZGUgPCAyMjMpXG4gICAgKTsgLy8gW1xcXScgKGluIG9yZGVyKVxufVxuZXhwb3J0IHZhciBVbml0TWVhc3VyZW1lbnRUeXBlID0ge1xuICAgIHBpeGVsOiAncHgnLFxuICAgIHBlcmNlbnRhZ2U6ICclJyxcbiAgICBhdXRvOiAnJyxcbn07XG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5pdE1lYXN1cmVtZW50VHlwZSh2YWx1ZSA9ICcnKTogc3RyaW5nIHtcbiAgICB2YXIgdW5pdFR5cGU6IHN0cmluZztcblxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PSAnYXV0bycpIHtcbiAgICAgICAgdW5pdFR5cGUgPSBVbml0TWVhc3VyZW1lbnRUeXBlLmF1dG87XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdW5pdFR5cGUgPSB2YWx1ZS5pbmRleE9mKCclJykgIT0gLTEgPyBVbml0TWVhc3VyZW1lbnRUeXBlLnBlcmNlbnRhZ2UgOiBVbml0TWVhc3VyZW1lbnRUeXBlLnBpeGVsO1xuICAgIH1cbiAgICByZXR1cm4gdW5pdFR5cGU7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QXR0cmlidXRlc0FzQXJyYXkoZWw6IEhUTUxFbGVtZW50KTogQXJyYXk8QXR0cj4ge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBbXTtcbiAgICBjb25zdCBlbGVtZW50QXR0cmlidXRlczogTmFtZWROb2RlTWFwID0gZWwuYXR0cmlidXRlcztcblxuICAgIC8vIEEgd29ya2Fyb3VuZCBmb3IgSUU4XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50QXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhdHRyaWJ1dGVzLnB1c2goZWxlbWVudEF0dHJpYnV0ZXNbaV0pO1xuICAgIH1cblxuICAgIHJldHVybiBhdHRyaWJ1dGVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVuZHNXaXRoKHM6IHN0cmluZywgc3VmZml4OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gcy5pbmRleE9mKHN1ZmZpeCwgcy5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKSAhPT0gLTE7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzSW5kZXgoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gL1xcW1swLTldXXxcXC5bMC05XS8udGVzdChrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVNlcmlhbGl6ZWRLZXlMYXN0RW51bWVyYXRvcihrZXk6IHN0cmluZykge1xuICAgIHJldHVybiBrZXkucmVwbGFjZSgvWzAtOV1cXC4oPz1bXi5dKiQpLywgJycpLnJlcGxhY2UoL1xcW1swLTldXSg/PVteXFxbXSokKS8sICcnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVTZXJpYWxpemVkS2V5RWRnZVByb3BlcnR5KGtleTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGtleS5zdWJzdHIoMCwga2V5Lmxhc3RJbmRleE9mKCcuJykpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIElFVGVtcGxhdGVFbGVtZW50UG9seWZpbGwoZG9jID0gZG9jdW1lbnQpIHtcbiAgICB2YXIgc3VwcG9ydCA9ICdjb250ZW50JyBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuXG4gICAgLy8gU2V0IHRoZSBjb250ZW50IHByb3BlcnR5IGlmIG1pc3NpbmdcbiAgICBpZiAoIXN1cHBvcnQpIHtcbiAgICAgICAgdmFyIC8qKlxuICAgICAgICAgICAgICogUHJlZmVyIGFuIGFycmF5IHRvIGEgTm9kZUxpc3RcbiAgICAgICAgICAgICAqIE90aGVyd2lzZSwgdXBkYXRpbmcgdGhlIGNvbnRlbnQgcHJvcGVydHkgb2YgYSBub2RlXG4gICAgICAgICAgICAgKiB3aWxsIHVwZGF0ZSB0aGUgTm9kZUxpc3QgYW5kIHdlJ2xsIGxvb3NlIHRoZSBuZXN0ZWQgPHRlbXBsYXRlPlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0ZW1wbGF0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGVtcGxhdGUnKSkgYXMgYW55LFxuICAgICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgZnJhZ21lbnQsXG4gICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICBqO1xuXG4gICAgICAgIC8vIEZvciBlYWNoIDx0ZW1wbGF0ZT4gZWxlbWVudCBnZXQgaXRzIGNvbnRlbnQgYW5kIHdyYXAgaXQgaW4gYSBkb2N1bWVudCBmcmFnbWVudFxuICAgICAgICB3aGlsZSAoKHRlbXBsYXRlID0gdGVtcGxhdGVzW2krK10pICYmICF0ZW1wbGF0ZS5jb250ZW50KSB7XG4gICAgICAgICAgICBjb250ZW50ID0gdGVtcGxhdGUuY2hpbGRyZW47XG4gICAgICAgICAgICBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICAgICAgd2hpbGUgKGNvbnRlbnRbMF0pIHtcbiAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZW50WzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGVtcGxhdGUuY29udGVudCA9IGZyYWdtZW50O1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VBdHRyaWJ1dGUoaHRtbEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBmcm9tQXR0cmlidXRlOiBzdHJpbmcsIHRvQXR0cmlidXRlOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZUVscyA9IGh0bWxFbGVtZW50Py5xdWVyeVNlbGVjdG9yQWxsKGBbJHtmcm9tQXR0cmlidXRlfV1gKTtcbiAgICAgICAgRm9yRWFjaCh0ZW1wbGF0ZUVscywgZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKHRvQXR0cmlidXRlLCBlbC5nZXRBdHRyaWJ1dGUoZnJvbUF0dHJpYnV0ZSkpO1xuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGZyb21BdHRyaWJ1dGUpO1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChleCkge31cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRE9NWFNTKHRleHQ6IHN0cmluZyk6IGJvb2xlYW57XG4gICAgY29uc3QgZHVtbXlEb21FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGR1bW15RG9tRWxlbWVudC5pbm5lclRleHQgPSB0ZXh0O1xuICAgIHJldHVybiBkdW1teURvbUVsZW1lbnQuaW5uZXJIVE1MICE9PSB0ZXh0O1xufVxuIiwiaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7U2NyZWVufSBmcm9tICcuLi9TY3JlZW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZXNwb25zZUluZm8ge1xuICBlcnJvckNvZGU6IEdTRXJyb3JzO1xuICBba2V5OiBzdHJpbmddOiBhbnk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaEVycm9yRXZlbnQoc2NyZWVuOiBTY3JlZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1JZDogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVzcG9uc2UsIGNvbnRleHR9OiB7cmVzcG9uc2U/OiBJUmVzcG9uc2VJbmZvLCBjb250ZXh0PzogYW55fSkge1xuICBjb25zdCBlcnJvckV2ZW50ID0ge1xuICAgIGV2ZW50TmFtZTogJ2Vycm9yJyxcbiAgICByZXNwb25zZSxcbiAgICBzdGF0dXNNZXNzYWdlOiByZXNwb25zZT8uc3RhdHVzTWVzc2FnZSxcbiAgICBlcnJvck1lc3NhZ2U6IHJlc3BvbnNlPy5lcnJvck1lc3NhZ2UsXG4gICAgZXJyb3JEZXRhaWxzOiByZXNwb25zZT8uZXJyb3JEZXRhaWxzLFxuICAgIGVycm9yQ29kZTogcmVzcG9uc2U/LmVycm9yQ29kZSxcbiAgICBjb250ZXh0LFxuICAgIGZvcm06IGZvcm1JZCxcbiAgfTtcblxuICBzY3JlZW4uZGlzcGF0Y2hFdmVudCgnZXJyb3InLCB7Li4uZXJyb3JFdmVudH0pO1xufVxuIiwiaW1wb3J0IHtlbmRzV2l0aH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC91dGlscyc7XG5pbXBvcnQgIHtHU0Vycm9yc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldE90cEVycm9yTWVzc2FnZShyZXNwb25zZT8sIGRlZmF1bHRNZXNzYWdlID0gJ2dlbmVyYWxfZXJyb3InKTogc3RyaW5nIHtcbiAgaWYgKCFyZXNwb25zZSkge1xuICAgIHJldHVybiBkZWZhdWx0TWVzc2FnZTtcbiAgfVxuXG4gIGNvbnN0IGVycm9yQ29kZSA9IE51bWJlcihyZXNwb25zZS5lcnJvckNvZGUpO1xuXG4gIGlmIChlcnJvckNvZGUgPT09IEdTRXJyb3JzLk9LKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoZXJyb3JDb2RlID09PSBHU0Vycm9ycy5NSVNTSU5HX1JFUVVJUkVEX1BBUkFNRVRFUiAmJiByZXNwb25zZS5lcnJvckRldGFpbHMpIHtcbiAgICBpZiAoZW5kc1dpdGgocmVzcG9uc2UuZXJyb3JEZXRhaWxzLCAnY29kZScpKSB7XG4gICAgICByZXR1cm4gJ3BsZWFzZV9lbnRlcl9hX3ZhbGlkX2NvZGUnO1xuICAgIH1cbiAgfVxuXG4gIGlmIChlcnJvckNvZGUgPT09IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFICYmIHJlc3BvbnNlLmVycm9yRGV0YWlscykge1xuICAgIGlmIChlbmRzV2l0aChyZXNwb25zZS5lcnJvckRldGFpbHMsICdJbnZhbGlkIHBhcmFtZXRlciB2YWx1ZSA6IHBob25lTnVtYmVyJykpIHtcbiAgICAgIHJldHVybiAnaW52YWxpZF9maWVsZG5hbWUnO1xuICAgIH1cblxuICAgIGlmIChlbmRzV2l0aChyZXNwb25zZS5lcnJvckRldGFpbHMsICdQaG9uZU51bWJlciBpcyBtaXNzaW5nIGNvdW50cnkgY29kZScpKSB7XG4gICAgICByZXR1cm4gJ2ludmFsaWRfZmllbGRuYW1lJztcbiAgICB9XG5cbiAgICBpZiAoZW5kc1dpdGgocmVzcG9uc2UuZXJyb3JEZXRhaWxzLCAnVG9rZW4gaGFzIGJlZW4gcmV2b2tlZCcpKSB7XG4gICAgICByZXR1cm4gJ290cF9jb2RlX2V4cGlyZWQnO1xuICAgIH1cblxuICAgIGlmIChlbmRzV2l0aChyZXNwb25zZS5lcnJvckRldGFpbHMsICdwaHZUb2tlbiBpcyBleHBpcmVkJykpIHtcbiAgICAgIHJldHVybiAnb3RwX2NvZGVfZXhwaXJlZCc7XG4gICAgfVxuXG4gICAgaWYgKGVuZHNXaXRoKHJlc3BvbnNlLmVycm9yRGV0YWlscywgJ2NvZGUnKSkge1xuICAgICAgcmV0dXJuICdwbGVhc2VfZW50ZXJfYV92YWxpZF9jb2RlJztcbiAgICB9XG4gIH1cblxuICBpZiAoZXJyb3JDb2RlID09PSBHU0Vycm9ycy5GT1JCSURERU4pIHtcbiAgICByZXR1cm4gJ2ZvcmJpZGRlbl9lcnJvcic7XG4gIH1cblxuICBpZiAoZXJyb3JDb2RlID09PSBHU0Vycm9ycy5GUkVRVUVOQ1lfTElNSVRfUkVBQ0hFRCB8fFxuICAgIGVycm9yQ29kZSA9PT0gR1NFcnJvcnMuTElNSVRfUkVBQ0hFRCB8fFxuICAgIGVycm9yQ29kZSA9PT0gR1NFcnJvcnMuQVBJX1JBVEVfTElNSVRfRVhDRUVERUQpIHtcbiAgICByZXR1cm4gJ2NvZGVfZnJlcXVlbmN5X2xpbWl0X3JlYWNoZWQnO1xuICB9XG5cbiAgcmV0dXJuIGRlZmF1bHRNZXNzYWdlO1xufVxuIiwiZXhwb3J0IGludGVyZmFjZSBJRXhwYW5kYWJsZVdpZGdldCB7XG4gIGV4cGFuZDogKCkgPT4gdm9pZDtcbiAgY29sbGFwc2U6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IENPTlNUUyA9IHtcbiAgY29udGFpbmVyQ2xhc3M6ICdnaWd5YS1jb250YWluZXInLFxuICBjb250YWluZXJFbmFibGVkQ2xhc3M6ICdnaWd5YS1jb250YWluZXItZW5hYmxlZCcsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlRXhwYW5kZWRTdGF0ZShlbDogSFRNTEVsZW1lbnQsIGV4cGFuZGVkU3RhdGVBdHRyaWJ1dGU6IHN0cmluZywgaXNFeHBhbmRlZDogYm9vbGVhbikge1xuICBpZiAoIWVsIHx8ICFleHBhbmRlZFN0YXRlQXR0cmlidXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZWw/LnNldEF0dHJpYnV0ZShleHBhbmRlZFN0YXRlQXR0cmlidXRlLCBpc0V4cGFuZGVkID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG4gIHVwZGF0ZUNvbnRhaW5lckNsYXNzZXMoZWwsIGlzRXhwYW5kZWQpO1xufVxuXG4vLyBXaGVuIHdpZGdldCBpcyBjb2xsYXBzZWQgYW5kIGZvcm0gaXMgc3VibWl0dGVkLCB0aGUgZmllbGRzIGluc2lkZSB0aGUgY29sbGFwc2VkIHdpZGdldCBzaG91bGQgbm90IGJlIHZhbGlkYXRlZC5cbi8vIFRoZSB2YWxpZGF0aW9uIGlzIHByZXZlbnRlZCBieSBhZGRpbmcgY29udGFpbmVyQ2xhc3NcbmZ1bmN0aW9uIHVwZGF0ZUNvbnRhaW5lckNsYXNzZXMoZWw6IEhUTUxFbGVtZW50LCBpc0V4cGFuZGVkOiBib29sZWFuKSB7XG4gIGdpZ3lhLnV0aWxzLkRPTS5hZGRDbGFzc1RvRWxlbWVudChlbCwgQ09OU1RTLmNvbnRhaW5lckNsYXNzKTtcbiAgaWYgKGlzRXhwYW5kZWQpIHtcbiAgICBnaWd5YS51dGlscy5ET00uYWRkQ2xhc3NUb0VsZW1lbnQoZWwsIENPTlNUUy5jb250YWluZXJFbmFibGVkQ2xhc3MpO1xuICB9IGVsc2Uge1xuICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVDbGFzc0Zyb21FbGVtZW50KGVsLCBDT05TVFMuY29udGFpbmVyRW5hYmxlZENsYXNzKTtcbiAgfVxufVxuIiwiaW1wb3J0IHtEZWVwRnJlZXplLCBTb21lfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGVudW0gTG9naW5NZXRob2RzIHtcbiAgc29jaWFsLFxuICBzaXRlLFxuICBzaXRlT25seSxcbiAgc29jaWFsT25seSxcbiAgc2l0ZUFuZFNvY2lhbCxcbiAgZW1haWxPdHAsXG4gIHBob25lLFxuICAnc2l0ZS1vbmx5JyA9IHNpdGVPbmx5LFxuICAnc29jaWFsLW9ubHknID0gc29jaWFsT25seSxcbiAgJ3NpdGUtYW5kLXNvY2lhbCcgPSBzaXRlQW5kU29jaWFsLFxufVxuXG5EZWVwRnJlZXplKExvZ2luTWV0aG9kcyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93QXV0aE1ldGhvZEFjY29yZGluZ1RvRXhpc3RpbmdMb2dpblByb3ZpZGVycyhhdXRoTWV0aG9kOiBzdHJpbmcsIGF2YWlsYWJsZUxvZ2luUHJvdmlkZXJzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICBpZiAoIWF1dGhNZXRob2QpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmIChpc1NvY2lhbFByb3ZpZGVyKGF1dGhNZXRob2QpICYmIGhhc1NvY2lhbChhdmFpbGFibGVMb2dpblByb3ZpZGVycykpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBnaWd5YS51dGlscy5hcnJheS5zb21lKGF2YWlsYWJsZUxvZ2luUHJvdmlkZXJzLCBwcm92aWRlciA9PiBwcm92aWRlcj8udG9Mb3dlckNhc2UoKSA9PT0gYXV0aE1ldGhvZD8udG9Mb3dlckNhc2UoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93SWRlbnRpdHlBY2NvcmRpbmdUb0V4aXN0aW5nTG9naW5Qcm92aWRlcnMod2lkZ2V0U2l0ZUlkZW50aXRpZXM6IHN0cmluZ1tdLCBhdmFpbGFibGVMb2dpblByb3ZpZGVyczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgaWYgKHZpc2libGVXaGVuU2l0ZU9ubHkod2lkZ2V0U2l0ZUlkZW50aXRpZXMpKSB7XG4gICAgcmV0dXJuIGhhc1NpdGUoYXZhaWxhYmxlTG9naW5Qcm92aWRlcnMpICYmICFoYXNTb2NpYWwoYXZhaWxhYmxlTG9naW5Qcm92aWRlcnMpO1xuICB9XG5cbiAgaWYgKHZpc2libGVXaGVuU29jaWFsT25seSh3aWRnZXRTaXRlSWRlbnRpdGllcykpIHtcbiAgICByZXR1cm4gaGFzU29jaWFsKGF2YWlsYWJsZUxvZ2luUHJvdmlkZXJzKSAmJiAhaGFzU2l0ZShhdmFpbGFibGVMb2dpblByb3ZpZGVycyk7XG4gIH1cblxuICBpZiAodmlzaWJsZVdoZW5Tb2NpYWwod2lkZ2V0U2l0ZUlkZW50aXRpZXMpKSB7XG4gICAgcmV0dXJuIGhhc1NvY2lhbChhdmFpbGFibGVMb2dpblByb3ZpZGVycyk7XG4gIH1cblxuICBpZiAodmlzaWJsZVdoZW5TaXRlKHdpZGdldFNpdGVJZGVudGl0aWVzKSkge1xuICAgIHJldHVybiBoYXNTaXRlKGF2YWlsYWJsZUxvZ2luUHJvdmlkZXJzKTtcbiAgfVxuXG4gIGlmICh2aXNpYmxlV2hlblNpdGVBbmRTb2NpYWwod2lkZ2V0U2l0ZUlkZW50aXRpZXMpKSB7XG4gICAgcmV0dXJuIGhhc1NpdGUoYXZhaWxhYmxlTG9naW5Qcm92aWRlcnMpICYmIGhhc1NvY2lhbChhdmFpbGFibGVMb2dpblByb3ZpZGVycyk7XG4gIH1cblxuICByZXR1cm4gaGFzTWF0Y2hpbmdQcm92aWRlcih3aWRnZXRTaXRlSWRlbnRpdGllcywgYXZhaWxhYmxlTG9naW5Qcm92aWRlcnMpO1xufVxuXG5mdW5jdGlvbiBoYXNNYXRjaGluZ1Byb3ZpZGVyKGFsbG93ZWRNZXRob2RzOiBzdHJpbmdbXSwgZXhpc3RpbmdNZXRob2RzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICByZXR1cm4gU29tZShhbGxvd2VkTWV0aG9kcywgYXAgPT4gU29tZShleGlzdGluZ01ldGhvZHMsIGxwID0+IGxwID09PSBhcCkpO1xufVxuXG5mdW5jdGlvbiBoYXNTb2NpYWwoZXhpc3RpbmdMb2dpblByb3ZpZGVyczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzQWxsQWxsb3dlZChleGlzdGluZ0xvZ2luUHJvdmlkZXJzKSB8fCBTb21lKGV4aXN0aW5nTG9naW5Qcm92aWRlcnMsIHAgPT4gaXNTb2NpYWxQcm92aWRlcihwKSk7XG59XG5cbmZ1bmN0aW9uIGhhc1NpdGUoZXhpc3RpbmdMb2dpblByb3ZpZGVyczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzQWxsQWxsb3dlZChleGlzdGluZ0xvZ2luUHJvdmlkZXJzKSB8fFxuICAgIGhhc1Bhc3N3b3JkKGV4aXN0aW5nTG9naW5Qcm92aWRlcnMpIHx8IGhhc0VtYWlsT3RwKGV4aXN0aW5nTG9naW5Qcm92aWRlcnMpIHx8IGhhc1Bob25lKGV4aXN0aW5nTG9naW5Qcm92aWRlcnMpO1xufVxuXG5mdW5jdGlvbiBoYXNQYXNzd29yZChleGlzdGluZ0xvZ2luUHJvdmlkZXJzOiBzdHJpbmdbXSkge1xuICByZXR1cm4gaXNNZXRob2RBbGxvd2VkKGV4aXN0aW5nTG9naW5Qcm92aWRlcnMsIExvZ2luTWV0aG9kcy5zaXRlKTtcbn1cblxuZnVuY3Rpb24gaGFzRW1haWxPdHAoZXhpc3RpbmdMb2dpblByb3ZpZGVyczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzQWxsQWxsb3dlZChleGlzdGluZ0xvZ2luUHJvdmlkZXJzKSB8fCBpc01ldGhvZEFsbG93ZWQoZXhpc3RpbmdMb2dpblByb3ZpZGVycywgTG9naW5NZXRob2RzLmVtYWlsT3RwKTtcbn1cblxuZnVuY3Rpb24gaGFzUGhvbmUoZXhpc3RpbmdMb2dpblByb3ZpZGVyczogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzQWxsQWxsb3dlZChleGlzdGluZ0xvZ2luUHJvdmlkZXJzKSB8fCBpc01ldGhvZEFsbG93ZWQoZXhpc3RpbmdMb2dpblByb3ZpZGVycywgTG9naW5NZXRob2RzLnBob25lKTtcbn1cblxuZnVuY3Rpb24gaXNNZXRob2RBbGxvd2VkKGV4aXN0aW5nTG9naW5Qcm92aWRlcnM6IHN0cmluZ1tdLCBtZXRob2Q6IExvZ2luTWV0aG9kcykge1xuICBpZiAoaXNBbGxBbGxvd2VkKGV4aXN0aW5nTG9naW5Qcm92aWRlcnMpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gU29tZShleGlzdGluZ0xvZ2luUHJvdmlkZXJzLCBwID0+IHAgPT09IG5vcm1hbGl6ZU1ldGhvZE5hbWUobWV0aG9kKSk7XG59XG5cbmZ1bmN0aW9uIGlzQWxsQWxsb3dlZChleGlzdGluZ0xvZ2luUHJvdmlkZXJzOiBzdHJpbmdbXSkge1xuICByZXR1cm4gIWV4aXN0aW5nTG9naW5Qcm92aWRlcnM/Lmxlbmd0aDtcbn1cblxuZnVuY3Rpb24gaXNTb2NpYWxQcm92aWRlcihsb2dpblByb3ZpZGVyKTogYm9vbGVhbiB7XG4gIHJldHVybiBsb2dpblByb3ZpZGVyPy50b0xvd2VyQ2FzZSgpICE9PSBub3JtYWxpemVNZXRob2ROYW1lKExvZ2luTWV0aG9kcy5zaXRlKSAmJlxuICAgICAgbG9naW5Qcm92aWRlcj8udG9Mb3dlckNhc2UoKSAhPT0gbm9ybWFsaXplTWV0aG9kTmFtZShMb2dpbk1ldGhvZHMuZW1haWxPdHApICYmXG4gICAgICBsb2dpblByb3ZpZGVyPy50b0xvd2VyQ2FzZSgpICE9PSBub3JtYWxpemVNZXRob2ROYW1lKExvZ2luTWV0aG9kcy5waG9uZSk7XG59XG5cbmZ1bmN0aW9uIHZpc2libGVXaGVuU2l0ZShhbGxvd2VkTG9naW5NZXRob2RzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICByZXR1cm4gU29tZShhbGxvd2VkTG9naW5NZXRob2RzLCBtZXRob2QgPT4gaXNBbGxvd2VkTWV0aG9kKG1ldGhvZCwgTG9naW5NZXRob2RzLnNpdGUpKTtcbn1cblxuZnVuY3Rpb24gdmlzaWJsZVdoZW5TaXRlT25seShhbGxvd2VkTG9naW5NZXRob2RzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICByZXR1cm4gU29tZShhbGxvd2VkTG9naW5NZXRob2RzLCBtZXRob2QgPT4gaXNBbGxvd2VkTWV0aG9kKG1ldGhvZCwgTG9naW5NZXRob2RzLnNpdGVPbmx5KSk7XG59XG5cbmZ1bmN0aW9uIHZpc2libGVXaGVuU29jaWFsKGFsbG93ZWRMb2dpbk1ldGhvZHM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gIHJldHVybiBTb21lKGFsbG93ZWRMb2dpbk1ldGhvZHMsIG1ldGhvZCA9PiBpc0FsbG93ZWRNZXRob2QobWV0aG9kLCBMb2dpbk1ldGhvZHMuc29jaWFsKSk7XG59XG5cbmZ1bmN0aW9uIHZpc2libGVXaGVuU29jaWFsT25seShhbGxvd2VkTG9naW5NZXRob2RzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICByZXR1cm4gU29tZShhbGxvd2VkTG9naW5NZXRob2RzLCBtZXRob2QgPT4gaXNBbGxvd2VkTWV0aG9kKG1ldGhvZCwgTG9naW5NZXRob2RzLnNvY2lhbE9ubHkpKTtcbn1cblxuZnVuY3Rpb24gdmlzaWJsZVdoZW5TaXRlQW5kU29jaWFsKGFsbG93ZWRMb2dpbk1ldGhvZHM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gIHJldHVybiBTb21lKGFsbG93ZWRMb2dpbk1ldGhvZHMsIG1ldGhvZCA9PiBpc0FsbG93ZWRNZXRob2QobWV0aG9kLCBMb2dpbk1ldGhvZHMuc2l0ZUFuZFNvY2lhbCkpO1xufVxuXG5mdW5jdGlvbiBpc0FsbG93ZWRNZXRob2QobWV0aG9kOiBzdHJpbmcsIGFsbG93ZWRNZXRob2Q6IExvZ2luTWV0aG9kcyk6IGJvb2xlYW4ge1xuICByZXR1cm4gbWV0aG9kPy50b0xvd2VyQ2FzZSgpID09PSBub3JtYWxpemVNZXRob2ROYW1lKGFsbG93ZWRNZXRob2QpO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVNZXRob2ROYW1lKHByb3ZpZGVyOiBMb2dpbk1ldGhvZHMpOiBzdHJpbmcge1xuICByZXR1cm4gTG9naW5NZXRob2RzW3Byb3ZpZGVyXT8udG9Mb3dlckNhc2UoKTtcbn1cbiIsImltcG9ydCB7IEJhc2VUZmFQcm92aWRlciB9IGZyb20gXCIuLi9UZmFQcm92aWRlcnMvQmFzZVRmYVByb3ZpZGVyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50QnlDbGFzc05hbWU8VCBleHRlbmRzIEhUTUxFbGVtZW50Pihjb250YWluZXIsIGNsYXNzTmFtZSk6IFQge1xuICAgIHJldHVybiBnaWd5YS51dGlscy5ET00uZ2V0RWxlbWVudHNCeUNsYXNzKGNvbnRhaW5lciwgY2xhc3NOYW1lKVswXSBhcyBUO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWN0aW9uSW50ZXJ2YWwoXG4gICAgdGZhUHJvdmlkZXI6IEJhc2VUZmFQcm92aWRlcixcbiAgICBhY3Rpb246IChjb3VudD86IG51bWJlcikgPT4gUHJvbWlzZTx2b2lkPixcbiAgICBpbnRlcnZhbDogbnVtYmVyLFxuICAgIGNhbmNlbENvbmRpdGlvbjogKGNvdW50PzogbnVtYmVyKSA9PiBib29sZWFuID0gKCkgPT4gZmFsc2UpIHtcblxuICAgIGxldCBjb3VudCA9IDE7XG4gICAgbGV0IGNhbkNvbnRpbnVlID0gZmFsc2U7XG4gICAgYWN0aW9uKGNvdW50KS50aGVuKCgpID0+IGNhbkNvbnRpbnVlID0gdHJ1ZSk7XG5cbiAgICBjb25zdCByZW5kZXJJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuXG4gICAgICAgIGlmIChjYW5jZWxDb25kaXRpb24oY291bnQpIHx8ICF0ZmFQcm92aWRlci5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHJlbmRlckludGVydmFsSWQpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY2FuQ29udGludWUpIHtcbiAgICAgICAgICAgIGNhbkNvbnRpbnVlID0gZmFsc2U7XG4gICAgICAgICAgICBhd2FpdCBhY3Rpb24oKytjb3VudCk7XG4gICAgICAgICAgICBjYW5Db250aW51ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgIH0sIGludGVydmFsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmRFbnRlcktleShidXR0b25FbDogSFRNTEVsZW1lbnQpO1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmRFbnRlcktleShpbnB1dEVsOiBIVE1MRWxlbWVudCwgYnV0dG9uRWw6IEhUTUxFbGVtZW50KTtcbmV4cG9ydCBmdW5jdGlvbiBiaW5kRW50ZXJLZXkoZWwxOiBIVE1MRWxlbWVudCwgZWwyPzogSFRNTEVsZW1lbnQpIHtcbiAgICBjb25zdCBsaXN0ZW5FbCA9IGVsMTtcbiAgICBjb25zdCBidXR0b25FbCA9IGVsMiB8fCBlbDE7XG4gICAgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIobGlzdGVuRWwsICdrZXl1cCcsIChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAvLyBTdWJtaXQgb24gRU5URVIgaWYgYnV0dG9uIG9yIGxpc3RlbmVyIGVsZW1lbnQuXG4gICAgICAgIC8vIFN1Ym1pdCBvbiBTUEFDRSBpZiBidXR0b24uXG4gICAgICAgIGlmICgoZXZlbnQuY29kZSA9PT0gJ1NwYWNlJykgfHwgKGV2ZW50LmNvZGUgPT09ICdFbnRlcicgJiYgIWVsMikgfHwgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykpIHtcbiAgICAgICAgICAgIGJ1dHRvbkVsLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsImV4cG9ydCBlbnVtIEVkaXRhYmxlVGZhUHJvdmlkZXJzVHlwZXMge1xuICAgIGdpZ3lhUGhvbmUsXG4gICAgZ2lneWFUb3RwLFxuICAgIGdpZ3lhUHVzaCxcbiAgICBsaXZlbGluayxcbn1cbmV4cG9ydCBjb25zdCBnaWd5YUFzc2VydGlvbkV4cGlyYXRpb24gPSA2MCAqIDUgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IHNlbnNpdGl2ZVBhcmFtc092ZXJyaWRlID0gJ2xvZ2luX3Rva2VuJztcblxuZXhwb3J0IGNvbnN0IEdJR1lBX1BBUkFNX1BSRUZJWCA9ICdnaWdfJ1xuXG5leHBvcnQgY29uc3QgR0lHWUFfSU5URVJOQUxfUEFSQU1fUFJFRklYID0gYCR7R0lHWUFfUEFSQU1fUFJFRklYfWlfYFxuXG5leHBvcnQgY29uc3QgR0lHWUFfSU5URVJOQUxfUEFSQU1TID0gYCR7R0lHWUFfUEFSQU1fUFJFRklYfWFjdGlvbnNgXG4iLCJpbXBvcnQge1xuICAgIE1vZGUsXG4gICAgU0RLU2V0R3JvdXBUb2tlblBhcmFtcyxcbiAgICBTREtHZXRHcm91cFRva2VuUGFyYW1zLFxuICAgIFNES0xvZ291dFBhcmFtcyxcbiAgICBTREtSZW1vdmVHcm91cFRva2VuUGFyYW1zLFxuICAgIFNES1NldExvZ2luVG9rZW5FeHBQYXJhbXMsXG4gICAgU0RLR2V0TG9naW5Ub2tlbkV4cFBhcmFtcyxcbiAgICBTREtDaGVja1Rva2VuUmVuZXdQYXJhbXMsXG4gICAgU0RLQ2FuYXJ5SW5kaWNhdGlvblBhcmFtcyxcbiAgICBTREtCYXNlUGFyYW1zLFxuICAgIEZyYW1lQmFzZVBhcmFtcyxcbiAgICBHZXRHcm91cFRva2VuUmVzcG9uc2UsXG4gICAgU0RLU2V0R3JvdXBDb250ZXh0LFxuICAgIElTc29TZXJ2aWNlLFxuICAgIEdldExvZ2luVG9rZW5FeHBSZXNwb25zZSxcbiAgICBDYW5hcnlJbmRpY2F0aW9uUmVzcG9uc2UsXG4gICAgU2V0TG9naW5Ub2tlbkV4cFJlc3BvbnNlLFxuICAgIEdldEdyb3VwQXBpRG9tYWluUmVzcG9uc2UsXG4gICAgU2V0R3JvdXBBcGlEb21haW5QYXJhbXMsXG4gICAgU0RLR2V0R3JvdXBBcGlEb21haW5QYXJhbXMsXG4gICAgU0RLU2V0R3JvdXBBcGlEb21haW5QYXJhbXMsXG4gICAgU0RLTG9nb3V0UmVzcG9uc2UsXG59IGZyb20gJ3NyYy9maWRtL0dpZ3lhLkpTLlNTTy9hcHAvaW50ZXJmYWNlcyc7XG5pbXBvcnQge1Nzb30gZnJvbSAnc3JjL2ZpZG0vR2lneWEuSlMuU1NPL2FwcC9zc28nO1xuaW1wb3J0IHtnZXRTdG9yYWdlRG9tYWlufSBmcm9tICcuLi8uLi9HaWd5YS5Kcy9hcHAvVXRpbHMvZG9tYWlucyc7XG5pbXBvcnQge2NyZWF0ZUlmcmFtZX0gZnJvbSBcIi4uLy4uL1NlcnZpY2VQcm94eS91dGlsc1wiO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSBcIi4uLy4uL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9GbGFnU2VydmljZVwiO1xuaW1wb3J0IHtTZXJ2aWNlUHJveHl9IGZyb20gJy4uLy4uL1NlcnZpY2VQcm94eS9TZXJ2aWNlUHJveHknO1xuXG4vLyAjIyMgU2luZ2xlIFNpZ24gT24gYWNyb3NzIG11bHRpcGxlIGRvbWFpbnMgIyMjXG5cbmxldCBjYWxsYmFja0NvdW50ZXIgPSAwO1xuZXhwb3J0IHZhciBfc3RvcmVkTG9naW5Ub2tlbkV4cDogc3RyaW5nO1xuZXhwb3J0IGxldCBfcmVxdWVzdFRpbWVvdXQ6IG51bWJlciA9IDMwMDA7XG5cbmV4cG9ydCBjbGFzcyBTc29TZXJ2aWNlIGltcGxlbWVudHMgSVNzb1NlcnZpY2Uge1xuICAgIHByaXZhdGUgc3RhdGljIF9pbnN0YW5jZTogSVNzb1NlcnZpY2U7XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0SW5zdGFuY2Uoc3NvS2V5OiBzdHJpbmcgPSBnaWd5YS5wYXJ0bmVyU2V0dGluZ3Muc3NvS2V5KTogUHJvbWlzZTxJU3NvU2VydmljZT4ge1xuICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XG4gICAgICAgICAgICBpZiAoIXNzb0tleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChGbGFnU2VydmljZS5sb2FkU3NvRnJhbWVPbmx5T25jZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHFzID0gZ2lneWEudXRpbHMua2V5VmFsdWUuc2VyaWFsaXplKHtcbiAgICAgICAgICAgICAgICAgICAgQVBJS2V5OiBzc29LZXksXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246IGdpZ3lhLmJ1aWxkLnZlcnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkOiBnaWd5YS5idWlsZC5udW1iZXIgfHwgLTEsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUtleTogZ2lneWEudGhpc1NjcmlwdC5BUElLZXksXG4gICAgICAgICAgICAgICAgICAgIG9uZUZyYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IGAke2dpZ3lhLmxvY2FsSW5mby5wcm90b2NvbH06Ly8ke2RvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgIHNzb1NlZ21lbnQ6IGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29TZWdtZW50IHx8ICcnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly8ke2dldFN0b3JhZ2VEb21haW4oKX0vZ3Mvc3NvLmh0bT8ke3FzfWA7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzc29BZGFwdGVyID0gbmV3IFNlcnZpY2VQcm94eSh1cmwpXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHNzb0FkYXB0ZXIuaW5pdCgnU1NPJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gc3NvQWRhcHRlci53cmFwV2l0aDxJU3NvU2VydmljZT4oU3NvKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoYGVycm9yIGluaXRpYWxpemUgc3NvIGZyYW1lYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICdTc29TZXJ2aWNlLmluaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBuZXcgU3NvU2VydmljZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG5ldyBTc29TZXJ2aWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbmNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBjaGVja1Rva2VuUmVuZXcobG9naW5Ub2tlbjogc3RyaW5nKTogUHJvbWlzZTxHZXRHcm91cFRva2VuUmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgY2hlY2tUb2tlblJlbmV3KHtsb2dpblRva2VuLCBjYWxsYmFjazogcmVzb2x2ZX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VG9rZW4oKTogUHJvbWlzZTxHZXRHcm91cFRva2VuUmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgZ2V0R3JvdXBUb2tlbih7Y2FsbGJhY2s6IHJlc29sdmV9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRva2VuRXhwaXJhdGlvbigpOiBQcm9taXNlPEdldExvZ2luVG9rZW5FeHBSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBnZXRMb2dpblRva2VuRXhwKHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogcmVzb2x2ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHVibGljIGxvZ291dCgpOiBQcm9taXNlPFNES0xvZ291dFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGxvZ291dCh7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IHJlc29sdmVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmVUb2tlbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gIHtcbiAgICAgICAgICAgIHJlbW92ZUdyb3VwVG9rZW4oe2NhbGxiYWNrOiByZXNvbHZlfSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEdyb3VwQ29udGV4dChncm91cENvbnRleHQ6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBzZXRHcm91cENvbnRleHRDb29raWUoe2dyb3VwQ29udGV4dCwgY2FsbGJhY2s6IHJlc29sdmV9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VG9rZW4obHQ6IHN0cmluZywgZXhwaXJhdGlvbj86IG51bWJlciB8IHN0cmluZywgZ2x0ZXhwPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHNldEdyb3VwVG9rZW4oe1xuICAgICAgICAgICAgICAgIGx0LCBleHBpcmF0aW9uLCBnbHRleHAsIGNhbGxiYWNrOiByZXNvbHZlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VG9rZW5FeHBpcmF0aW9uKGxvZ2luVG9rZW5FeHA6IHN0cmluZywgdXNlQ2FjaGU6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxTZXRMb2dpblRva2VuRXhwUmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgc2V0TG9naW5Ub2tlbkV4cCh7XG4gICAgICAgICAgICAgICAgbG9naW5Ub2tlbkV4cCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogcmVzb2x2ZVxuICAgICAgICAgICAgfSwgdXNlQ2FjaGUpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHVibGljIHN5bmNDYW5hcnlJbmRpY2F0aW9uKGlzQ2FuYXJ5OiBzdHJpbmcsIGNhbmFyeVZlcnNpb246IHN0cmluZyk6IFByb21pc2U8Q2FuYXJ5SW5kaWNhdGlvblJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHN5bmNDYW5hcnlJbmRpY2F0aW9uKHtpc0NhbmFyeSwgY2FuYXJ5VmVyc2lvbiwgY2FsbGJhY2s6IHJlc29sdmV9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEdyb3VwQXBpRG9tYWluKCk6IFByb21pc2U8R2V0R3JvdXBBcGlEb21haW5SZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBnZXRHcm91cEFwaURvbWFpbih7Y2FsbGJhY2s6IHJlc29sdmV9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEdyb3VwQXBpRG9tYWluKGRvbWFpbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHNldEdyb3VwQXBpRG9tYWluKHtjYWxsYmFjazogcmVzb2x2ZSwgZG9tYWlufSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gX3JlcXVlc3QoXG4gICAgbW9kZTogTW9kZSxcbiAgICBwOlxuICAgICAgICB8IFNES1NldEdyb3VwVG9rZW5QYXJhbXNcbiAgICAgICAgfCBTREtHZXRHcm91cFRva2VuUGFyYW1zXG4gICAgICAgIHwgU0RLTG9nb3V0UGFyYW1zXG4gICAgICAgIHwgU0RLUmVtb3ZlR3JvdXBUb2tlblBhcmFtc1xuICAgICAgICB8IFNES1NldExvZ2luVG9rZW5FeHBQYXJhbXNcbiAgICAgICAgfCBTREtHZXRMb2dpblRva2VuRXhwUGFyYW1zXG4gICAgICAgIHwgU0RLQ2hlY2tUb2tlblJlbmV3UGFyYW1zXG4gICAgICAgIHwgU0RLQ2FuYXJ5SW5kaWNhdGlvblBhcmFtc1xuICAgICAgICB8IFNES1NldEdyb3VwQ29udGV4dFxuKSB7XG4gICAgaWYgKCFnaWd5YS5wYXJ0bmVyU2V0dGluZ3Muc3NvS2V5KSB7XG4gICAgICAgIGlmIChwICYmIHAuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIChwIGFzIFNES0Jhc2VQYXJhbXMpLmNhbGxiYWNrKHt9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHBhcmFtczogRnJhbWVCYXNlUGFyYW1zO1xuICAgIGlmICghcCkge1xuICAgICAgICBwYXJhbXMgPSB7fSBhcyBhbnk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBwYXJhbXMgcGFzc2VkIGFyZSBub3QgbW9kaWZpZWQgYnkgcmVmZXJlbmNlLlxuICAgICAgICBwYXJhbXMgPSBnaWd5YS51dGlscy5vYmplY3QuY2xvbmUocCk7XG4gICAgfVxuXG4gICAgbGV0IGlmcjogSFRNTElGcmFtZUVsZW1lbnQ7XG4gICAgbGV0IHJlcXVlc3RUaW1lb3V0SWQ7XG5cbiAgICBjb25zdCBjYWxsYmFjayA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgY2xlYW5pbmcgc3NvIGlmcmFtZWApO1xuXG4gICAgICAgIC8vIGNsZWFudXAgaWZyYW1lXG4gICAgICAgIGlmci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGlmcik7XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHJlcXVlc3RUaW1lb3V0SWQpO1xuXG4gICAgICAgIC8vIFR5cGVjYXN0IHJlc3BvbnNlLlxuICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgJiYgdHlwZW9mIHJlc3BvbnNlLmVycm9yQ29kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5lcnJvckNvZGUgPSBOdW1iZXIocmVzcG9uc2UuZXJyb3JDb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5leHBpcmVzX2luICYmIHR5cGVvZiByZXNwb25zZS5leHBpcmVzX2luID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmV4cGlyZXNfaW4gPSBOdW1iZXIocmVzcG9uc2UuZXhwaXJlc19pbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocCAmJiBwLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICAocCBhcyBTREtCYXNlUGFyYW1zKS5jYWxsYmFjayhyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHBhcmFtcy5tID0gbW9kZTtcbiAgICBwYXJhbXMuZCA9IGAke2dpZ3lhLmxvY2FsSW5mby5wcm90b2NvbH06Ly8ke2RvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lfWA7XG5cbiAgICBpZiAoZG9jdW1lbnQubG9jYXRpb24ucG9ydCkge1xuICAgICAgICBwYXJhbXMuZCArPSAnOicgKyBkb2N1bWVudC5sb2NhdGlvbi5wb3J0O1xuICAgIH1cblxuICAgIC8vIENocm9tZSBjYWNoZXMgdGhlIGZyYWdtZW50IHdoZW4gbG9hZGVkIGZvciB0aGUgZmlyc3QgdGltZS4gd29ya2Fyb3VuZDpcbiAgICBwYXJhbXMuY2FsbGJhY2tJRCA9ICdnaWdfc3NvX2NiJyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgJ18nICsgY2FsbGJhY2tDb3VudGVyKys7XG4gICAgcGFyYW1zLnNBUElLZXkgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleTtcbiAgICBwYXJhbXNbZ2lneWEubG9nZ2VyLmNvbmZpZ0tleV0gPSBKU09OLnN0cmluZ2lmeShnaWd5YS5sb2dnZXIuZ2V0Q29uZmlnKCkpO1xuICAgIGNvbnN0IGZyYWdtZW50ID0gZ2lneWEudXRpbHMua2V5VmFsdWUuc2VyaWFsaXplKHBhcmFtcyk7XG5cbiAgICBjb25zdCBpZnJhbWVMb2FkZXIgPSAocmV0cmllcyA9IDApID0+IHtcblxuICAgICAgICBnaWd5YS51dGlscy54ZC5hZGRNZXNzYWdlTGlzdGVuZXIocGFyYW1zLmNhbGxiYWNrSUQsIHt9LCBmYWxzZSwgY2FsbGJhY2ssIGdpZ3lhLl8uTWVzc2FnaW5nTWV0aG9kLlBvc3RNZXNzYWdlKTtcbiAgICAgICAgaWZyID0gX2dldElmcmFtZShwYXJhbXMuY2FsbGJhY2tJRCk7XG5cbiAgICAgICAgY29uc3QgZm5PbkxvYWQgPSAoKSA9PiB7XG5cbiAgICAgICAgICAgIHJlcXVlc3RUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcblxuICAgICAgICAgICAgICAgIC8vIHRvdGFsIGZhaWx1cmVcbiAgICAgICAgICAgICAgICBpZiAocmV0cmllcyA8PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmVycm9yKGBTU08gQ29tbXVuaWNhdGlvbiBUaW1lb3V0YCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgSUUxMVByaXZhdGVNb2RlOiBnaWd5YS5sb2NhbEluZm8uaXNJRTExICYmICF3aW5kb3cuaW5kZXhlZERCLCBtb2RlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gcmVzZXRcbiAgICAgICAgICAgICAgICBnaWd5YS51dGlscy54ZC5yZW1vdmVNZXNzYWdlTGlzdGVuZXIocGFyYW1zLmNhbGxiYWNrSUQpO1xuICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVFbGVtZW50KGlmcik7XG5cbiAgICAgICAgICAgICAgICAvLyByZXRyeVxuICAgICAgICAgICAgICAgIGlmcmFtZUxvYWRlcihyZXRyaWVzIC0gMSk7XG5cbiAgICAgICAgICAgIH0sIF9yZXF1ZXN0VGltZW91dCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHFzID0gZ2lneWEudXRpbHMua2V5VmFsdWUuc2VyaWFsaXplKHtcbiAgICAgICAgICAgICAgICBBUElLZXk6IGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXksXG4gICAgICAgICAgICAgICAgc3NvU2VnbWVudDogZ2lneWEucGFydG5lclNldHRpbmdzLnNzb1NlZ21lbnQgfHwgJycsIC8vIFRoZXJlIGlzIG5vIGRlZmF1bHQgc2VnbWVudCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogZ2lneWEuYnVpbGQudmVyc2lvbixcbiAgICAgICAgICAgICAgICBidWlsZDogZ2lneWEuYnVpbGQubnVtYmVyIHx8IC0xLCAvLyBUbyBjbGVhciBDRE4gY2FjaGUuLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHNob3VsZCBhbHdheXMgbG9hZCBmcm9tIGdpZ3lhJ3MgZG9tYWluIGV4Y2VwdCB3aGVuIG92ZXJyaWRlbiBmb3IgIzUwMjYxLlxuICAgICAgICAgICAgaWZyLnNyYyA9IGBodHRwczovLyR7Z2V0U3RvcmFnZURvbWFpbigpfS9ncy9zc28uaHRtPyR7cXN9IyR7ZnJhZ21lbnR9YDtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5yZW1vdmVFdmVudExpc3RlbmVyKGlmciwgJ2xvYWQnLCBmbk9uTG9hZCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgZ2lneWEudXRpbHMuRE9NLmFkZEV2ZW50TGlzdGVuZXIoaWZyLCAnbG9hZCcsIGZuT25Mb2FkKTtcblxuICAgICAgICBnaWd5YS5sb2dnZXIuZGVidWcoYG9wZW5pbmcgc3NvIGlmcmFtZWAsIHBhcmFtcyk7XG4gICAgICAgIGlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uYXBwZW5kVG9Cb2R5KGlmcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5mdW5jdGlvbnMuaW52b2tlT25QYWdlTG9hZCgoKSA9PiBnaWd5YS51dGlscy5ET00uYXBwZW5kVG9Cb2R5KGlmcikpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGlmcmFtZUxvYWRlcigzKTtcbn1cbmZ1bmN0aW9uIF9nZXRJZnJhbWUocmVxdWVzdElkOiBzdHJpbmcpOiBIVE1MSUZyYW1lRWxlbWVudCB7XG4gICAgbGV0IGlmcjtcbiAgICBpZiAoRmxhZ1NlcnZpY2UuaGlkZVNTT0ZyYW1lKSB7XG4gICAgICAgIGlmciA9IGNyZWF0ZUlmcmFtZSgnU1NPIEZyYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWZyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgIC8vIEFic29sdXRlIHBvc2l0aW9uIHdpdGggLTEwMDBweCBjYXVzZXMgc2Nyb2xsaW5nIHNsb3dkb3ducyBvbiBtb2JpbGUgZGV2aWNlcy5cbiAgICAgICAgaWYgKGdpZ3lhLmxvY2FsSW5mby5pc0lPUyB8fCBnaWd5YS5sb2NhbEluZm8uaXNJT1NDaHJvbWUgfHwgZ2lneWEubG9jYWxJbmZvLmlzQW5kcm9pZCkge1xuICAgICAgICAgICAgaWZyLnN0eWxlLndpZHRoID0gJzBweCc7XG4gICAgICAgICAgICBpZnIuc3R5bGUuaGVpZ2h0ID0gJzBweCc7XG4gICAgICAgICAgICBpZnIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmci5zdHlsZS53aWR0aCA9ICczMHB4JztcbiAgICAgICAgICAgIGlmci5zdHlsZS5oZWlnaHQgPSAnMTBweCc7XG4gICAgICAgICAgICBpZnIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgaWZyLnN0eWxlLnRvcCA9ICctMTAwMHB4JztcbiAgICAgICAgICAgIGlmci5zdHlsZS5sZWZ0ID0gJy0xMDAwcHgnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWZyLmlkID0gJ2dpZ19zc29fJyArIHJlcXVlc3RJZDtcbiAgICBnaWd5YS51dGlscy5mdW5jdGlvbnMuYWRkU3JjVG9JRnJhbWVJZk5lZWRlZChpZnIpO1xuXG4gICAgcmV0dXJuIGlmcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRHcm91cFRva2VuKHBhcmFtcz86IFNES0dldEdyb3VwVG9rZW5QYXJhbXMpOiB2b2lkIHtcbiAgICBnaWd5YS5sb2dnZXIuaW5mbyhgdHJ5aW5nIHRvIGdldCBzc28gZ3JvdXAgbG9naW4gdG9rZW5gKTtcblxuICAgIF9yZXF1ZXN0KCdnZXRUb2tlbicsIHtcbiAgICAgICAgY2FsbGJhY2s6IChyZXNwb25zZTogR2V0R3JvdXBUb2tlblJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBfc3RvcmVkTG9naW5Ub2tlbkV4cCA9IHJlc3BvbnNlLmdsdGV4cDtcbiAgICAgICAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEdyb3VwVG9rZW4ocGFyYW1zOiBTREtTZXRHcm91cFRva2VuUGFyYW1zKTogdm9pZCB7XG4gICAgLy8gQWRkIGN1cnJlbnQgZ2x0ZXhwIGNvb2tpZSB0byB0aGUgcGFyYW1ldGVycyBhdXRvbWF0aWNhbGx5LlxuICAgIGlmICghcGFyYW1zLmdsdGV4cCkge1xuICAgICAgICBwYXJhbXMuZ2x0ZXhwID0gZ2lneWEudXRpbHMuY29va2llLmdldChgZ2x0ZXhwXyR7Z2lneWEudGhpc1NjcmlwdC5BUElLZXl9YCk7XG4gICAgfVxuICAgIF9yZXF1ZXN0KCdzZXRUb2tlbicsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dvdXQocGFyYW1zPzogU0RLTG9nb3V0UGFyYW1zKTogdm9pZCB7XG4gICAgX3JlcXVlc3QoJ2xvZ291dCcsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVHcm91cFRva2VuKHBhcmFtcz86IFNES1JlbW92ZUdyb3VwVG9rZW5QYXJhbXMpOiB2b2lkIHtcbiAgICBfcmVxdWVzdCgncmVtb3ZlVG9rZW4nLCBwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0TG9naW5Ub2tlbkV4cChwYXJhbXM6IFNES1NldExvZ2luVG9rZW5FeHBQYXJhbXMsIHVzZUNhY2hlID0gdHJ1ZSk6IHZvaWQge1xuICAgIC8vIERvbid0IHN0b3JlIHRoZSBsb2dpbiB0b2tlbiBhZ2FpbiBpZiB3ZSd2ZSBhbHJlYWR5IHN0b3JlZCBpdC5cbiAgICBpZiAodXNlQ2FjaGUgJiYgX3N0b3JlZExvZ2luVG9rZW5FeHAgJiYgcGFyYW1zLmxvZ2luVG9rZW5FeHAgPT09IF9zdG9yZWRMb2dpblRva2VuRXhwKSB7XG4gICAgICAgIGlmIChwYXJhbXMuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHBhcmFtcy5jYWxsYmFjayh7IGdsdGV4cDogX3N0b3JlZExvZ2luVG9rZW5FeHAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfc3RvcmVkTG9naW5Ub2tlbkV4cCA9IHBhcmFtcy5sb2dpblRva2VuRXhwO1xuICAgIF9yZXF1ZXN0KCdzZXRMb2dpblRva2VuRXhwJywgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2luVG9rZW5FeHAocGFyYW1zOiBTREtHZXRMb2dpblRva2VuRXhwUGFyYW1zKTogdm9pZCB7XG4gICAgX3JlcXVlc3QoJ2dldExvZ2luVG9rZW5FeHAnLCBwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tUb2tlblJlbmV3KHBhcmFtczogU0RLQ2hlY2tUb2tlblJlbmV3UGFyYW1zKTogdm9pZCB7XG4gICAgZ2lneWEubG9nZ2VyLmluZm8oYHZlcmlmeWluZyBsb2dpbiB0b2tlbiB3aXRoIHNzbyBncm91cGApO1xuICAgIF9yZXF1ZXN0KCdjaGVja1Rva2VuUmVuZXcnLCBwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3luY0NhbmFyeUluZGljYXRpb24ocGFyYW1zOiBTREtDYW5hcnlJbmRpY2F0aW9uUGFyYW1zKTogdm9pZCB7XG4gICAgX3JlcXVlc3QoJ3N5bmNDYW5hcnlJbmRpY2F0aW9uJywgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEdyb3VwQ29udGV4dENvb2tpZShwYXJhbXM6IFNES1NldEdyb3VwQ29udGV4dCl7XG4gICAgX3JlcXVlc3QoJ3NldEdyb3VwQ29udGV4dCcsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRHcm91cEFwaURvbWFpbihwYXJhbXM6IFNES1NldEdyb3VwQXBpRG9tYWluUGFyYW1zKTogdm9pZCB7XG4gICAgX3JlcXVlc3QoJ3NldEdyb3VwQXBpRG9tYWluJywgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyb3VwQXBpRG9tYWluKHBhcmFtczogU0RLR2V0R3JvdXBBcGlEb21haW5QYXJhbXMpe1xuICAgIF9yZXF1ZXN0KCdnZXRHcm91cEFwaURvbWFpbicsIHBhcmFtcyk7XG59XG4iLCJpbXBvcnQgeyBHZXRHcm91cFRva2VuUmVzcG9uc2UgfSBmcm9tICdzcmMvZmlkbS9HaWd5YS5KUy5TU08vYXBwL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgU3NvU2VydmljZSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvU3NvU2VydmljZSc7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5pbXBvcnQgeyBzZXNzaW9uRGF0YSB9ICBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvU2VydmljZXMvU2Vzc2lvblNlcnZpY2UnO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSAgJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9GbGFnU2VydmljZSc7XG5cbi8vIExvYWQgYW5kIHNhdmUgdG9rZW5zIGJhc2VkIG9uIEFQSSBrZXlzXG5sZXQgX2N1clNlc3Npb25FeHBpcmF0aW9uOiBudW1iZXI7XG5sZXQgX2JlYXJlclRva2VuID0gbnVsbDtcbmNvbnN0IF90cmllZEdBQ3MgPSB7fTtcbmV4cG9ydCBjb25zdCBhY3RpdmVOYW1lc3BhY2VzID0ge307XG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEdsdEV4cChnbHRleHA6IHN0cmluZyA9IGdldEdsdGV4cENvb2tpZSgpKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICFnbHRleHAgfHwgZ2lneWEudXRpbHMuZ2x0ZXhwLmlzVmFsaWQoZ2x0ZXhwKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRHbHRleHBDb29raWUoQVBJS2V5OiBzdHJpbmcgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgIHJldHVybiBnaWd5YS51dGlscy5jb29raWUuZ2V0KGdldEdsdENvb2tpZUtleShBUElLZXkpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRHbHRleHAoZ2x0ZXhwOiBzdHJpbmcsIEFQSUtleTogc3RyaW5nID0gZ2lneWEudGhpc1NjcmlwdC5BUElLZXkpIHtcbiAgICBpZiAoZ2x0ZXhwICYmICFpc0dpZ3lhQ29va2llRG9tYWluKCkpIHtcbiAgICAgICAgZ2lneWEudXRpbHMuY29va2llLnJlbW92ZShnZXRHbHRDb29raWVLZXkoQVBJS2V5KSk7XG5cbiAgICAgICAgaWYoRmxhZ1NlcnZpY2Uuc2V0Q29va2llU2FtZVNpdGVMYXhTZXNzaW9uKSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5jb29raWUuc2V0KGdldEdsdENvb2tpZUtleShBUElLZXkpLCBnbHRleHAsIG51bGwsIG51bGwsIG51bGwsICdMYXgnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmNvb2tpZS5zZXQoZ2V0R2x0Q29va2llS2V5KEFQSUtleSksIGdsdGV4cCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEdsdENvb2tpZUtleShBUElLZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBnbHRleHBfJHtBUElLZXl9YDtcbn1cblxuZnVuY3Rpb24gX2dldFRva2VuQ29va2llTmFtZShBUElLZXkgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgIGlmIChBUElLZXkpIHtcbiAgICAgICAgcmV0dXJuICdnbHRfJyArIEFQSUtleTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ19naWdfbHQnO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXQoQVBJS2V5ID0gZ2lneWEudGhpc1NjcmlwdC5BUElLZXkpIHtcbiAgICBjb25zdCBsdCA9IGdpZ3lhLnV0aWxzLmNvb2tpZS5nZXQoX2dldFRva2VuQ29va2llTmFtZShBUElLZXkpKTtcbiAgICBpZiAobHQpIHtcbiAgICAgICAgcmV0dXJuIGx0LnNwbGl0KCd8JylbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHNldChBUElLZXk6IHN0cmluZywgbG9naW5fdG9rZW46IHN0cmluZywgZXhwaXJlc19pbj86IG51bWJlciB8IHN0cmluZywgc2Vzc2lvbkV4cGlyYXRpb24/OiBudW1iZXIpIHtcbiAgICBnaWd5YS51dGlscy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZ2lneWFTZXR0aW5ncycpO1xuXG4gICAgZ2lneWEubG9nZ2VyLmluZm8oYHNldHRpbmcgYSBuZXcgbG9naW4gdG9rZW5gKTtcblxuICAgIGlmICghQVBJS2V5KSB7XG4gICAgICAgIEFQSUtleSA9IGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5O1xuICAgIH1cbiAgICBpZiAoQVBJS2V5KSB7XG4gICAgICAgIGlmKEZsYWdTZXJ2aWNlLnNldENvb2tpZVNhbWVTaXRlTGF4U2Vzc2lvbikge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuY29va2llLnNldCgnZ2x0XycgKyBBUElLZXksIGxvZ2luX3Rva2VuLCBleHBpcmVzX2luLCBudWxsLCBudWxsLCAnTGF4Jyk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmNvb2tpZS5zZXQoJ2dsdF8nICsgQVBJS2V5LCBsb2dpbl90b2tlbiwgZXhwaXJlc19pbik7XG4gICAgICAgIH1cbiAgICAgICAgZ2lneWEudXRpbHMuY29va2llLnJlbW92ZSgnZ2FjXycgKyBBUElLZXkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmKEZsYWdTZXJ2aWNlLnNldENvb2tpZVNhbWVTaXRlTGF4U2Vzc2lvbikge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuY29va2llLnNldCgnX2dpZ19sdCcsIGxvZ2luX3Rva2VuLCBleHBpcmVzX2luLCBudWxsLCBudWxsLCAnTGF4Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5jb29raWUuc2V0KCdfZ2lnX2x0JywgbG9naW5fdG9rZW4sIGV4cGlyZXNfaW4pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2N1clNlc3Npb25FeHBpcmF0aW9uID0gc2Vzc2lvbkV4cGlyYXRpb247XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFNlc3Npb25FeHBpcmF0aW9uKCkge1xuICAgIHJldHVybiBfY3VyU2Vzc2lvbkV4cGlyYXRpb247XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0R0FDQ29va2llKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5ICYmIGdpZ3lhLnV0aWxzLmNvb2tpZS5nZXQoJ2dhY18nICsgZ2lneWEudGhpc1NjcmlwdC5BUElLZXkpXG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0RnJvbUF1dGhDb2RlKGF1dGhDb2RlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHNldEZyb21HQUMoe30sIHJlc29sdmUsIGF1dGhDb2RlKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRGcm9tR0FDKHBhcmFtczogT2JqZWN0LCBjYWxsYmFjazogRnVuY3Rpb24sIGdhYzogc3RyaW5nID0gZ2V0R0FDQ29va2llKCkpIHtcbiAgICBpZiAoZ2lneWEudGhpc1NjcmlwdC5BUElLZXkpIHtcbiAgICAgICAgaWYgKGdhYyAmJiAhcGFyYW1zWyduZXZlclRyeUdBQyddKSB7XG4gICAgICAgICAgICAvLyBTb21ldGltZXMgZ2FjIGlzIHNldCB3aXRoIHN1cnJvdW5kaW5nIGRvdWJsZS1xdW90ZXMgKGxpa2UgaW4gamF2YSkuIFN0cmlwIHF1b3Rlcy5cbiAgICAgICAgICAgIGlmIChnYWMuY2hhckF0KDApID09PSAnXCInICYmIGdhYy5jaGFyQXQoZ2FjLmxlbmd0aCAtIDEpID09PSAnXCInKSB7XG4gICAgICAgICAgICAgICAgZ2FjID0gZ2FjLnN1YnN0cmluZygxLCBnYWMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChfdHJpZWRHQUNzW2dhY10pIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOyAvLyBBbHJlYWR5IHRyaWVkLCBkb24ndCB0cnkgYWdhaW4uXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RyaWVkR0FDc1tnYWNdID0gdHJ1ZTtcblxuICAgICAgICAgICAgZ2lneWEuc29jaWFsaXplLnVwZGF0ZVJlZlVJRCgpO1xuXG4gICAgICAgICAgICBnaWd5YS5zb2NpYWxpemUubm90aWZ5TG9naW4oXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmV2ZXJUcnlHQUM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhDb2RlOiBnYWMsXG4gICAgICAgICAgICAgICAgICAgIEFQSUtleTogZ2lneWEudGhpc1NjcmlwdC5BUElLZXksXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9pZDogZ2lneWEudGhpc1NjcmlwdC5BUElLZXlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW50ZW50aW9uYWxseSB3ZSdyZSBub3QgcmFpc2luZyBvbkxvZ2luIGV2ZW50LCBhcyBubyBsb2dpbiB3YXMgbWFkZSwganVzdCBlc3RhYmxpc2hlZCAodmVyaWZpZWQgaW4gYnVnIDQzNDE5KS5cbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuY29va2llLnJlbW92ZSgnZ2FjXycgKyBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBuZXZlclRyeUdBQyBpcyB1c2VkIHRvIGF2b2lkIHRyeWluZyBzZXRGcm9tR2FjIGZvcmV2ZXIgaWYgdGhlIGNvb2tpZSB3YXNuJ3QgcmVtb3ZlZCAod2hlbiBhIHdyb25nIGJhc2VEb21haW4gaXMgdXNlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLnNvY2lhbGl6ZS5yZWZyZXNoVUkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldmVyVHJ5R0FDOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRGcm9tU3NvUmVzcG9uc2UocmVzOiBHZXRHcm91cFRva2VuUmVzcG9uc2UsIEFQSUtleTogc3RyaW5nID0gZ2lneWEudGhpc1NjcmlwdC5BUElLZXkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgcmVzb2x2ZSA9PiB7XG4gICAgICAgIGlmICghcmVzKSByZXR1cm47XG4gICAgICAgIHN3aXRjaCAocmVzLmVycm9yQ29kZSkge1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5VTkFVVEhPUklaRURfVVNFUjpcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgbm8gZ3JvdXAgc2Vzc2lvbiBmb3VuZGApO1xuICAgICAgICAgICAgICAgIHJlbW92ZShBUElLZXkpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5JTlZBTElEX1RPS0VOOlxuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBleGlzdGluZyBncm91cCBzZXNzaW9uIHdhcyByZXZva2VkYCk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlKEFQSUtleSk7XG4gICAgICAgICAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyQWRkZWQoe2V2ZW50TmFtZTogJ2FjY291bnRzLmxvZ291dCd9KTtcbiAgICAgICAgICAgICAgICBnaWd5YS5ldmVudHMuZ2xvYmFsLmRpc3BhdGNoV2hlbkhhbmRsZXJBZGRlZCh7ZXZlbnROYW1lOiAnbG9nb3V0J30pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5UT0tFTl9IQVNfUkVORVdFRDpcbiAgICAgICAgICAgIGNhc2UgR1NFcnJvcnMuT0s6XG4gICAgICAgICAgICAgICAgaWYgKCFyZXMubG9naW5fdG9rZW4pIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBuZXcgc2Vzc2lvbiBmcm9tIGdyb3VwYCk7XG5cbiAgICAgICAgICAgICAgICBsZXQgZXhwaXJlc19pbjogbnVtYmVyIHwgc3RyaW5nO1xuICAgICAgICAgICAgICAgIGxldCBncm91cENvbnRleHQ6IGFueTtcbiAgICAgICAgICAgICAgICBpZiAocmVzLmdyb3VwQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBncm91cENvbnRleHQgPSBKU09OLnBhcnNlKHJlcy5ncm91cENvbnRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWlzR2lneWFDb29raWVEb21haW4oKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJdCBzaG91bGQgbmV2ZXIgZXhwaXJlIGlmIGEgZ2x0ZXhwIGlzIHByZXNlbnQuXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXNfaW4gPSAhcmVzLmdsdGV4cCA/IHJlcy5leHBpcmVzX2luIDogZ2lneWEudXRpbHMuY29va2llLmdldEluZmluaXRlRXhwaXJhdGlvblRpbWVJblNlY29uZHMoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgbG9naW4gdG9rZW4gY29va2llXG4gICAgICAgICAgICAgICAgICAgIHNldChBUElLZXksIHJlcy5sb2dpbl90b2tlbiwgZXhwaXJlc19pbik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2x0ZXhwQ29va2llTmFtZSA9IGBnbHRleHBfJHtBUElLZXl9YDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5nbHRleHAgJiYgIWdpZ3lhLnV0aWxzLmNvb2tpZS5nZXQoZ2x0ZXhwQ29va2llTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmNvb2tpZS5zZXQoZ2x0ZXhwQ29va2llTmFtZSwgcmVzLmdsdGV4cCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBkaXNwYXRjaExvZ2luRXZlbnQoe2V4cGlyZXNfaW4sIGdyb3VwQ29udGV4dH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5ORVRXT1JLX0VSUk9SOlxuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcihgZ2lneWE6IGVycm9yIGxvYWRpbmcgc3NvIGZyYW1lYCwge3Jlc30pO1xuICAgICAgICAgICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlcnNBZGRlZChbJ2FjY291bnRzLmVycm9yJywgJ3NvY2lhbGl6ZS5lcnJvciddLCByZXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoYHNzbzogdW5zdXBwb3J0ZWQgcmVzcG9uc2VgKTtcbiAgICAgICAgICAgICAgICB0aHJvdyAnZ2lneWE6IHVuc3VwcG9ydGVkIHJlc3BvbnNlIGZyb20gc3NvJztcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKCk7XG4gICAgfSk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGlzcGF0Y2hMb2dpbkV2ZW50KGV2ZW50UGFyYW1zID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGdpZ3lhLnV0aWxzLnF1ZXVlLmhvbGQoJ3ZlcmlmeUxvZ2luJywgJ0FQSScpO1xuICAgICAgICBnaWd5YS5hY2NvdW50cy52ZXJpZnlMb2dpbih7XG4gICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZSwgLy8gaWdub3JlIHRoZSBhcGkgcXVldWVcbiAgICAgICAgICAgIHN1cHByZXNzTG9naW5FdmVudDogdHJ1ZSwgLy8gdGhlIGNhbGxiYWNrIGJlbG93IHdpbGwgdHJpZ2dlciB0aGUgbG9naW4gZXZlbnRzXG4gICAgICAgICAgICBpbmNsdWRlOiBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKCdwcm9maWxlLGRhdGEnLCBnaWd5YS50aGlzU2NyaXB0Lmdsb2JhbENvbmZbJ2luY2x1ZGUnXSksXG4gICAgICAgICAgICBleHRyYVByb2ZpbGVGaWVsZHM6ICdzYW1sRGF0YScsXG4gICAgICAgICAgICBjYWxsYmFjazogYWNjb3VudEluZm9SZXMgPT4ge1xuICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLnF1ZXVlLnJlbGVhc2UoJ3ZlcmlmeUxvZ2luJywgJ0FQSScpOyAvLyByZWxlYXNlIHRoZSBhcGkgcXVldWVcbiAgICAgICAgICAgICAgICBzZXNzaW9uRGF0YS5zZXRJc1Nlc3Npb25WZXJpZmllZChnZXQoKSwgYWNjb3VudEluZm9SZXMuZXJyb3JDb2RlID09IEdTRXJyb3JzLk9LKTtcblxuICAgICAgICAgICAgICAgIC8vIHVzZSB3aGF0ZXZlciBmaWVsZCB5b3UgbmVlZCBmcm9tIGFjY291bnRJbmZvUmVzIG5vdyBiZWZvcmUgYWNjb3VudEluZm9SZXMgd2lsbCBiZSBvdmVycmlkZGVuIChzdWNoIGFzICdzb3VyY2UnKVxuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IGFjY291bnRJbmZvUmVzLnNvdXJjZTtcblxuICAgICAgICAgICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlckFkZGVkKHsgZXZlbnROYW1lOiAnc29jaWFsaXplLmxvZ2luJyB9LCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAoZXZlbnRPYmo6IE9iamVjdCwgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50T2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmogPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqID0gZ2lneWEudXRpbHMub2JqZWN0Lm1lcmdlKFtldmVudE9iaiwgZXZlbnRQYXJhbXNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2NvdW50SW5mb1Jlcy5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS5zb2NpYWxpemUuZ2V0VXNlckluZm8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduSURzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYUZpZWxkczogJ3NhbWxEYXRhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IHVzZXJJbmZvUmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VySW5mb1Jlcy5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE9iaiA9IGdpZ3lhLl8uYWRkVXNlckluZm9Ub0V2ZW50KHVzZXJJbmZvUmVzLCB7ZXZlbnROYW1lOiAnbG9naW4nfSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3JtYWxpemluZyBldmVudCBmaWVsZHMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmpbJ3NvdXJjZSddID0gc291cmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqWyduZXdVc2VyJ10gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE9ialsncHJvdmlkZXInXSA9ICdzaXRlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE9ialsnbG9naW5Nb2RlJ10gPSAnc3RhbmRhcmQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudE9ialsndXNlciddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqWyd1c2VyJ10uZXJyb3JDb2RlID0gdXNlckluZm9SZXMuZXJyb3JDb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE9ialsndXNlciddLmNhbGxJZCA9IHVzZXJJbmZvUmVzLmNhbGxJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2NvdW50SW5mb1Jlcy5pZF90b2tlbiAmJiAoZXZlbnRPYmpbJ2lkX3Rva2VuJ10gPSBhY2NvdW50SW5mb1Jlcy5pZF90b2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqWydjYW5jZWwnXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhldmVudE9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmpbJ2NhbmNlbCddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhldmVudE9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyQWRkZWQoeyBldmVudE5hbWU6ICdhY2NvdW50cy5sb2dpbicgfSwgbnVsbCwgYXN5bmMgKGV2ZW50T2JqOiBPYmplY3QsIGNhbGxiYWNrOiBGdW5jdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50T2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudE9iaiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmogPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2V2ZW50T2JqLCBldmVudFBhcmFtc10pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2NvdW50SW5mb1Jlcy5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqWydldmVudE5hbWUnXSA9ICdhY2NvdW50cy5sb2dpbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFjY291bnRJbmZvUmVzLlVJRCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJbmZvUmVzID0gYXdhaXQgbmV3IFByb21pc2U8YW55PihyID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmdldEFjY291bnRJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiByLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMubWVyZ2VDb21tYVNlcGFyYXRlZFZhbHVlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncHJvZmlsZSxkYXRhJywgZ2lneWEudGhpc1NjcmlwdC5nbG9iYWxDb25mWydpbmNsdWRlJ10pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMub2JqZWN0LmV4dHJhY3RQcm9wZXJ0aWVzKGFjY291bnRJbmZvUmVzLCBldmVudE9iaiwgJ3NpZ25hdHVyZXxVSURTaWd8dGltZXN0YW1wfFVJRFNpZ25hdHVyZXxzaWduYXR1cmVUaW1lc3RhbXB8VUlEfHByb2ZpbGV8ZGF0YXxkYXRhQ2VudGVyfGlkX3Rva2VufGdyb3VwcycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmpbJ2NhbmNlbCddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhldmVudE9iaik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmUoQVBJS2V5ID0gZ2lneWEudGhpc1NjcmlwdC5BUElLZXkpIHtcbiAgICBpZiAoZ2V0KEFQSUtleSkpIHtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlbW92aW5nIGxvZ2luIHRva2VuYCk7XG4gICAgfVxuICAgIGdpZ3lhLnV0aWxzLmNvb2tpZS5yZW1vdmUoYGdsdF8ke0FQSUtleX1gKTtcbiAgICBnaWd5YS51dGlscy5jb29raWUucmVtb3ZlKCdfZ2lnX2x0Jyk7XG4gICAgZ2lneWEudXRpbHMuY29va2llLnJlbW92ZShgZ2x0ZXhwXyR7QVBJS2V5fWApO1xuICAgIGlmIChnaWd5YS5wYXJ0bmVyU2V0dGluZ3Muc3NvS2V5KSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGByZW1vdmluZyBncm91cCBsb2dpbiB0b2tlbmApO1xuICAgICAgICBjb25zdCBzZXJ2aWNlID0gYXdhaXQgU3NvU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuICAgICAgICByZXR1cm4gc2VydmljZS5yZW1vdmVUb2tlbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9rZW5QYXJhbShBUElLZXk6IHN0cmluZywgcGFyYW1OYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCBsdCA9IGdpZ3lhLnV0aWxzLmNvb2tpZS5nZXQoX2dldFRva2VuQ29va2llTmFtZShBUElLZXkpKTtcbiAgICBpZiAobHQpIHtcbiAgICAgICAgY29uc3QgbHRTZWdzID0gbHQuc3BsaXQoJ3wnKTtcbiAgICAgICAgaWYgKGx0U2Vncy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2lneWEudXRpbHMua2V5VmFsdWUuZGVzZXJpYWxpemUobHRTZWdzWzFdKVtwYXJhbU5hbWVdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc0dpZ3lhQ29va2llRG9tYWluKCkge1xuICAgIGNvbnN0IGNvb2tpZURvbWFpbiA9IGdpZ3lhLnV0aWxzLmNvb2tpZS5nZXREZWZhdWx0RG9tYWluKCk7XG4gICAgcmV0dXJuIGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLmVuZHNXaXRoKGNvb2tpZURvbWFpbiwgZ2lneWEuZGVmYXVsdEFwaURvbWFpbik7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0QmVhcmVyVG9rZW4oYmVhcmVyVG9rZW46IHN0cmluZykge1xuICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBzZXR0aW5nIGEgbmV3IEJlYXJlciB0b2tlbmApO1xuICAgIF9iZWFyZXJUb2tlbiA9ICdCZWFyZXIgJyArIGJlYXJlclRva2VuO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEJlYXJlclRva2VuKCkge1xuICAgIHJldHVybiBfYmVhcmVyVG9rZW47XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQmVhcmVyVG9rZW4oKSB7XG4gICAgZ2lneWEubG9nZ2VyLmluZm8oYEJlYXJlciB0b2tlbiByZW1vdmVkYCk7XG4gICAgX2JlYXJlclRva2VuID0gbnVsbDtcbn1cbiIsImV4cG9ydCBlbnVtIENsb3NlUmVhc29ucyB7XG4gICAgcGVuZGluZ0Vycm9yLCAvLyBhbiB1bmhhbmRsZWQgcGVuZGluZyBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIgbm90IGhhbmRsZWQgaW50ZXJuYWxseSBieSB0aGUgc2NyZWVuc2V0XG4gICAgbWlzc2luZywgLy8gYXR0ZW1wdCB0byBtb3ZlIHRvIGEgc2NyZWVuIHNldCBuYW1lIHRoYXQgZG9lcyBub3QgZXhpc3RzXG4gICAgZmluaXNoZWQsIC8vIHNjcmVlblNldCBmbG93IGZpbmlzaGVkIChtb3ZlIHRvIF9maW5pc2ggc2NyZWVuIG9yIG5vIG1vcmUgZm9ybXMpXG4gICAgY2FuY2VsZWQsIC8vIHNjcmVlblNldCBmbG93IGNhbmNlbGVkIChieSB4IGluIHRoZSBkaWFsb2cgb3IgYnkgY2xpZW50IHNjcmlwdClcbiAgICBiYWNrQnV0dG9uLCAvLyBtb2JpbGUgZGlhbG9nIGlzIGNsb3NlZCBieSBiYWNrIGluIHRoZSBicm93c2VyXG4gICAgY2FuY2VsZWRCeVBhcmVudCwgLy8gdXNlZCBpbnRlcm5hbGx5IHRvIHBhcmVudCBjaGlsZCB0byBjbG9zZSBpdHMgY2hpbGRcbiAgICBza2lwLCAvLyBzY3JlZW5TZXQgZmxvdyBmaW5pc2hlZCBkdWUgdG8gX3NraXBcbiAgICBlcnJvciwgLy8gZXJyb3IgZnJvbSBzZXJ2ZXIgYmVmb3JlIHdlIGhhdmUgYSBzY3JlZW4gdG8gc2hvdyB0aGVtIG9uLFxuICAgIGNhbmNlbCwvLyBzY3JlZW5TZXQgZmxvdyBjYW5jZWxlZChjbG9zZSB0aGUgc2NyZWVuIHdpdGhvdXQgZmluZWxpemluZyBwZW5kaW5nIHByb2Nlc3Nlcylcbn1cbiIsImV4cG9ydCBlbnVtIFBsdWdpblN0eWxlIHtcbiAgICBfdW5kZWZpbmVkID0gMCxcbiAgICBub25lLFxuICAgIGxlZ2FjeSxcbiAgICBtb2Rlcm4sXG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UGx1Z2luU3R5bGVDbGFzcyhzdHlsZTogUGx1Z2luU3R5bGUpOiBzdHJpbmcge1xuICAgIHJldHVybiAnZ2lneWEtc3R5bGUtJyArIFBsdWdpblN0eWxlW3N0eWxlXTtcbn1cbiIsImltcG9ydCB7IEdpZ3lhUmVzcG9uc2UgfSBmcm9tICdnaWd5YSc7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5pbXBvcnQgeyBJUHJvdmlkZXJTZXNzaW9uSW5mbyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUHJvdmlkZXJTZXNzaW9uSW5mbyc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQgeyBmb3JtYXRPYmZ1c2NhdGVkUGhvbmVOdW1iZXIgfSBmcm9tICcuL3Bob25lTnVtYmVyVXRpbCc7XG5cbmV4cG9ydCBlbnVtIExpbmtBY2NvdW50c1dpdGhSZWRpcmVjdFBhcmFtIHtcbiAgUHJvdmlkZXIgPSAnZ2lnX3Byb3ZpZGVyJyxcbiAgQWNjZXNzVG9rZW4gPSAnZ2lnX2FjY2Vzc190b2tlbidcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTGlua0FjY291bnRzQWZ0ZXJSZWRpcmVjdFBhcmFtcyB7XG4gIFtMaW5rQWNjb3VudHNXaXRoUmVkaXJlY3RQYXJhbS5Qcm92aWRlcl0/OiBzdHJpbmc7XG4gIFtMaW5rQWNjb3VudHNXaXRoUmVkaXJlY3RQYXJhbS5BY2Nlc3NUb2tlbl0/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0QWNjb3VudHMocHJvdmlkZXJTZXNzaW9uSW5mbzogSVByb3ZpZGVyU2Vzc2lvbkluZm8sIHJlcXVlc3RQYXJhbXMgPSB7fSk6IFByb21pc2U8b2JqZWN0PiB7XG4gIGNvbnN0IHByb3ZpZGVyU2Vzc2lvbnMgPSBleHRyYWN0UHJvdmlkZXJTZXNzaW9ucyhwcm92aWRlclNlc3Npb25JbmZvKVxuXG4gIHJldHVybiBwcm9taXNpZnk8R2lneWFSZXNwb25zZT4oZ2lneWEuYWNjb3VudHMubm90aWZ5U29jaWFsTG9naW4sIHtcbiAgICAuLi5yZXF1ZXN0UGFyYW1zLFxuICAgIGxvZ2luTW9kZTogJ2Nvbm5lY3QnLFxuICAgIHByb3ZpZGVyU2Vzc2lvbnMsXG4gICAgaWdub3JlQXBpUXVldWU6IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0UHJvdmlkZXJTZXNzaW9ucyhwcm92aWRlclNlc3Npb25JbmZvOiBJUHJvdmlkZXJTZXNzaW9uSW5mbykge1xuICBjb25zdCB7IGlkVG9rZW4sIHByb3ZpZGVyLCBjb2RlLCBhY2Nlc3NfdG9rZW4sIGxhc3ROYW1lLCBmaXJzdE5hbWUgfSA9IHByb3ZpZGVyU2Vzc2lvbkluZm9cbiAgcmV0dXJuIHtcbiAgICBbcHJvdmlkZXJdOiB7IGF1dGhUb2tlbjogYWNjZXNzX3Rva2VuLCBpZFRva2VuLCBjb2RlLCBsYXN0TmFtZSwgZmlyc3ROYW1lIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RQcm92aWRlckluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2U6IEdpZ3lhUmVzcG9uc2UgJiBJUHJvdmlkZXJTZXNzaW9uSW5mbyAmIHsgaWRfdG9rZW46IHN0cmluZyB9KSB7XG4gIGlmIChyZXNwb25zZS5lcnJvckNvZGUgIT0gR1NFcnJvcnMuRk9SQ0VfTElOS19MT0dJTl9JREVOVElGSUVSX0VYSVNUUykge1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIGNvbnN0IHByb3ZpZGVyU2Vzc2lvbkluZm86IElQcm92aWRlclNlc3Npb25JbmZvID0gZ2V0UHJvdmlkZXJTZXNzaW9uRnJvbVBhcmFtcyhyZXNwb25zZSBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pXG5cbiAgcmV0dXJuIHtcbiAgICAuLi5yZXNwb25zZSwgcHJvdmlkZXJTZXNzaW9uSW5mb1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9naW5JZChjb25mbGljdGluZ0FjY291bnQpOiBzdHJpbmcge1xuICByZXR1cm4gY29uZmxpY3RpbmdBY2NvdW50Py5sb2dpbklEIHx8IGNvbmZsaWN0aW5nQWNjb3VudD8uZW1haWxzPy5bMF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPYmZ1c2NhdGVkUGhvbmUoY29uZmxpY3RpbmdBY2NvdW50KTogc3RyaW5nIHtcbiAgY29uc3QgcGhvbmUgPSBnZXRQaG9uZShjb25mbGljdGluZ0FjY291bnQpO1xuICByZXR1cm4gZm9ybWF0T2JmdXNjYXRlZFBob25lTnVtYmVyKHBob25lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBob25lKGNvbmZsaWN0aW5nQWNjb3VudCk6IHsgbG9va3VwOiBzdHJpbmcsIG9iZnVzY2F0ZWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIGNvbmZsaWN0aW5nQWNjb3VudD8ucGhvbmVzPy5bMF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xpbmtBY2NvdW50c1YySW50ZXJydXB0aW9uKGVycm9yQ29kZTogc3RyaW5nIHwgbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiBOdW1iZXIoZXJyb3JDb2RlKSA9PT0gR1NFcnJvcnMuRk9SQ0VfTElOS19MT0dJTl9JREVOVElGSUVSX0VYSVNUUztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1Byb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50c0luUGFyYW1zQWZ0ZXJSZWRpcmVjdChwYXJhbXM6IElMaW5rQWNjb3VudHNBZnRlclJlZGlyZWN0UGFyYW1zKTogYm9vbGVhbiB7XG5cbiAgY29uc3QgcHJvdmlkZXJTZXNzaW9uID0gZ2V0UHJvdmlkZXJTZXNzaW9uRm9yTGlua0FjY291bnRzQWZ0ZXJSZWRpcmVjdChwYXJhbXMpO1xuXG4gIHJldHVybiBpc1Byb3ZpZGVyU2Vzc2lvblZhbGlkKHByb3ZpZGVyU2Vzc2lvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm92aWRlclNlc3Npb25Gb3JMaW5rQWNjb3VudHNBZnRlclJlZGlyZWN0KHBhcmFtczogSUxpbmtBY2NvdW50c0FmdGVyUmVkaXJlY3RQYXJhbXMpOiBJUHJvdmlkZXJTZXNzaW9uSW5mbyB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBnaWdfcHJvdmlkZXIgfSA9IHBhcmFtc1xuXG4gICAgaWYgKCFnaWdfcHJvdmlkZXIpIHJldHVybiB7fTtcblxuICAgIGNvbnN0IHByb3ZpZGVyU2Vzc2lvbiA9IGdpZ3lhLnV0aWxzLkpTT04uZGVzZXJpYWxpemUoZ2lnX3Byb3ZpZGVyKSBhcyBJUHJvdmlkZXJTZXNzaW9uSW5mbztcblxuICAgIHJldHVybiBwcm92aWRlclNlc3Npb25cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ0Vycm9yIHdoaWxlIGdldHRpbmcgcHJvdmlkZXIgc2Vzc2lvbiBmcm9tIHBhcmFtcyBhZnRlciByZWRpcmVjdCcsIGVycm9yKTtcbiAgICByZXR1cm4ge31cbiAgfVxuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm92aWRlclNlc3Npb25Gcm9tUGFyYW1zKHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IElQcm92aWRlclNlc3Npb25JbmZvIHtcblxuICBpZiAoIXBhcmFtcykgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgcHJvdmlkZXJTZXNzaW9uSW5mbzogSVByb3ZpZGVyU2Vzc2lvbkluZm8gPSB7XG4gICAgYWNjZXNzX3Rva2VuOiBwYXJhbXMuYWNjZXNzX3Rva2VuLFxuICAgIHByb3ZpZGVyOiBwYXJhbXMucHJvdmlkZXIsXG4gICAgcHJvdmlkZXJfdWlkOiBwYXJhbXMucHJvdmlkZXJfdWlkLFxuICAgIGlkVG9rZW46IHBhcmFtcy5pZF90b2tlbixcbiAgICBjb2RlOiBwYXJhbXMuY29kZSxcbiAgICBsYXN0TmFtZTogcGFyYW1zLmxhc3ROYW1lLFxuICAgIGZpcnN0TmFtZTogcGFyYW1zLmZpcnN0TmFtZSxcbiAgfTtcblxuICByZXR1cm4gcHJvdmlkZXJTZXNzaW9uSW5mb1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3ZpZGVyU2Vzc2lvblZhbGlkKHBhcmFtczogSVByb3ZpZGVyU2Vzc2lvbkluZm8pOiBib29sZWFuIHtcbiAgcmV0dXJuIEJvb2xlYW4ocGFyYW1zPy5wcm92aWRlciAmJiBwYXJhbXM/LmFjY2Vzc190b2tlbik7XG59XG5cblxuXG4iLCJleHBvcnQgZnVuY3Rpb24gZm9ybWF0T2JmdXNjYXRlZFBob25lTnVtYmVyKHBob25lRGF0YToge29iZnVzY2F0ZWQ6IHN0cmluZ30pOiBzdHJpbmcge1xuICBjb25zdCBwaG9uZSA9IHBob25lRGF0YT8ub2JmdXNjYXRlZDtcbiAgcmV0dXJuIHBob25lPy5yZXBsYWNlKC8jL2csICcqJykucmVwbGFjZSgvKFxcKispLywgJyAkMSAnKTtcbn1cbiIsImltcG9ydCB7IElCYXNlT2JqZWN0UGFyYW0gfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvQmFzZU9iamVjdC9CYXNlT2JqZWN0JztcblxuZXhwb3J0IGVudW0gRGV2aWNlVHlwZXMge1xuICAgIF91bmRlZmluZWQsXG4gICAgZGVza3RvcCxcbiAgICBtb2JpbGUsXG4gICAgYXV0byxcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUJhc2VPYmplY3RDb25maWc8UCBleHRlbmRzIElCYXNlT2JqZWN0UGFyYW0+IHtcbiAgICAvLyBNZXJnZWQgZnJvbSBJSW5qZWN0aW9uSW5mb1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xuICAgIG1ldGhvZE5hbWU/OiBzdHJpbmc7XG4gICAganNOYW1lPzogc3RyaW5nO1xuICAgIGRlZmF1bHREZXZpY2VUeXBlPzogRGV2aWNlVHlwZXM7XG5cbiAgICAvLyBEZWZhdWx0IHBhcmFtcyB0aGF0IHdpbGwgYmUgbWVyZ2VkIHRvIHRoZSBmaW5hbCBwYXJhbXMgb2JqZWN0XG4gICAgZGVmYXVsdFBhcmFtczogUDtcblxuICAgIC8vIFJlcXVpcmVkIHBhcmFtcy4gSWYgb25lIG9mIHRoZXNlIGlzbid0IHByb3ZpZGVkIChhbmQgaXNuJ3QgaW4gdGhlIGRlZmF1bHRQYXJhbXMpLCBhbiBlcnJvciB3aWxsIGJlIGludm9rZWQuXG4gICAgcmVxdWlyZWRQYXJhbXM6IEFycmF5PHN0cmluZz47XG59XG4iLCJpbXBvcnQgKiBhcyBvYmplY3RVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvb2JqZWN0JztcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7IGFkZExvZyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9MZWdhY3lMb2dnZXInO1xuaW1wb3J0IHsgaGFuZGxlU3BlY2lhbEZpZWxkcyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9JbnRlcm5hbEZsb3dzJztcbmltcG9ydCAqIGFzIGFycmF5VXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2FycmF5JztcbmltcG9ydCAqIGFzIHRlbXBsYXRlc1V0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy90ZW1wbGF0ZXMnO1xuXG5mdW5jdGlvbiBnZXRFdmVudEhhbmRsZXJOYW1lKGV2ZW50TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoZXZlbnROYW1lLnN1YnN0cmluZygwLCAyKSA9PT0gJ29uJykge1xuICAgICAgICByZXR1cm4gZXZlbnROYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnb24nICsgZXZlbnROYW1lLnN1YnN0cmluZygwLCAxKS50b1VwcGVyQ2FzZSgpICsgZXZlbnROYW1lLnN1YnN0cmluZygxKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRNYXAobWFwKSB7XG4gICAgZ2lneWEuZGVmYXVsdEV2ZW50TWFwcy5zcGxpY2UoMCwgMCwgbWFwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoRXJyb3JGcm9tUmVzcG9uc2Uod2lkZ2V0UGFyYW1zLCByZXNwb25zZSwgYWRkaXRpb25hbFByb3BlcnRpZXM/KSB7XG4gICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICByZXNwb25zZSA9IHt9O1xuICAgIH1cbiAgICBsZXQgciA9IHJlc3BvbnNlO1xuICAgIGlmIChyLnJlc3BvbnNlKSB7XG4gICAgICAgIHIgPSByLnJlc3BvbnNlO1xuICAgIH1cbiAgICBjb25zdCBldmVudE9iaiA9IHtcbiAgICAgICAgZXZlbnROYW1lOiAnZXJyb3InLFxuICAgICAgICBzdGF0dXM6IHIuc3RhdHVzID8gci5zdGF0dXMgOiAnRkFJTCcsXG4gICAgICAgIHN0YXR1c01lc3NhZ2U6IHIuc3RhdHVzTWVzc2FnZSA/IHIuc3RhdHVzTWVzc2FnZSA6ICdHZW5lcmFsIFNlcnZlciBFcnJvcicsXG4gICAgICAgIGVycm9yTWVzc2FnZTogci5lcnJvck1lc3NhZ2UgPyByLmVycm9yTWVzc2FnZSA6ICdHZW5lcmFsIFNlcnZlciBFcnJvcicsXG4gICAgICAgIGVycm9yRGV0YWlsczogci5lcnJvckRldGFpbHMgPyByLmVycm9yRGV0YWlscyA6ICcnLFxuICAgICAgICBlcnJvckNvZGU6IHIuZXJyb3JDb2RlID8gci5lcnJvckNvZGUgOiA1MDAwMDEsXG4gICAgICAgIHJlc3BvbnNlOiByZXNwb25zZSxcbiAgICB9O1xuICAgIG9iamVjdFV0aWxzLmFkZChldmVudE9iaiwgYWRkaXRpb25hbFByb3BlcnRpZXMpO1xuICAgIHJldHVybiBkaXNwYXRjaEZvcldpZGdldChldmVudE9iaiwgd2lkZ2V0UGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoSW52YWxpZFBhcmFtRXJyb3Iod2lkZ2V0UGFyYW1zLCBwYXJhbU5hbWUpIHtcbiAgICBjb25zdCBldnQ6IGFueSA9IHsgZXZlbnROYW1lOiAnZXJyb3InIH07XG4gICAgaWYgKHR5cGVvZiB3aWRnZXRQYXJhbXNbcGFyYW1OYW1lXSA9PSAndW5kZWZpbmVkJyB8fCB3aWRnZXRQYXJhbXNbcGFyYW1OYW1lXSA9PSBudWxsKSB7XG4gICAgICAgIGV2dC5lcnJvckNvZGUgPSBHU0Vycm9ycy5NSVNTSU5HX1JFUVVJUkVEX1BBUkFNRVRFUjtcbiAgICAgICAgZXZ0LmVycm9yTWVzc2FnZSA9ICdNaXNzaW5nX3JlcXVpcmVkX3BhcmFtZXRlciAoJyArIHBhcmFtTmFtZSArICcpJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBldnQuZXJyb3JDb2RlID0gR1NFcnJvcnMuSU5WQUxJRF9QQVJBTUVURVJfVkFMVUU7XG4gICAgICAgIGV2dC5lcnJvck1lc3NhZ2UgPSAnSW52YWxpZF9wYXJhbWV0ZXJfdmFsdWUgKCcgKyBwYXJhbU5hbWUgKyAnKSc7XG4gICAgfVxuICAgIGV2dC5zdGF0dXMgPSBldnQuZXJyb3JDb2RlO1xuICAgIGV2dC5zdGF0dXNNZXNzYWdlID0gZXZ0LmVycm9yTWVzc2FnZTtcbiAgICBkaXNwYXRjaEZvcldpZGdldChldnQsIHdpZGdldFBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaEZvcldpZGdldChlLCB3aWRnZXRQYXJhbXMpIHtcbiAgICBpZiAoIWUgfHwgIWUuZXZlbnROYW1lKSByZXR1cm47XG4gICAgY29uc3QgZXZlbnROYW1lID0gZS5ldmVudE5hbWU7XG4gICAgYWRkTG9nKCdEaXNwYXRjaGluZyB3aWRnZXQgZXZlbnQgXCInICsgZXZlbnROYW1lICsgJ1wiIGZvciAnICsgd2lkZ2V0UGFyYW1zLmxhc3RTb3VyY2UgKyAnIHdpdGggdGhpcyBldmVudCBvYmplY3QnLCBlKTtcblxuICAgIC8vZ2lneWEuc29jaWFsaXplLl9BZGp1c3RSZXNwb25zZVN0YXR1cyhldmVudE9iaik7XG5cbiAgICBoYW5kbGVTcGVjaWFsRmllbGRzKGUpO1xuXG4gICAgY29uc3QgYXJFdmVudHMgPSBldmVudE5hbWUuc3BsaXQoJywnKTtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJFdmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZXZlbnROYW1lID0gYXJFdmVudHNbaV07XG5cbiAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVyTmFtZSA9IGdldEV2ZW50SGFuZGxlck5hbWUoZXZlbnROYW1lKTtcblxuICAgICAgICBpZiAod2lkZ2V0UGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAod2lkZ2V0UGFyYW1zLmNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBlLmNvbnRleHQgPSB3aWRnZXRQYXJhbXMuY29udGV4dDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdpZGdldFBhcmFtcy5zb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBlLnNvdXJjZSA9IHdpZGdldFBhcmFtcy5zb3VyY2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh3aWRnZXRQYXJhbXMuc291cmNlRGF0YSkge1xuICAgICAgICAgICAgICAgIGUuc291cmNlRGF0YSA9IHdpZGdldFBhcmFtcy5zb3VyY2VEYXRhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod2lkZ2V0UGFyYW1zLmNvbnRhaW5lcklEKSB7XG4gICAgICAgICAgICAgICAgZS5zb3VyY2VDb250YWluZXJJRCA9IHdpZGdldFBhcmFtcy5jb250YWluZXJJRDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdpZGdldFBhcmFtcy5pbnN0YW5jZUlEKSB7XG4gICAgICAgICAgICAgICAgZS5pbnN0YW5jZUlEID0gd2lkZ2V0UGFyYW1zLmluc3RhbmNlSUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2lkZ2V0UGFyYW1zW2V2ZW50SGFuZGxlck5hbWVdKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBkaXNwYXRjaEV2ZW50T2JqZWN0KHdpZGdldFBhcmFtc1tldmVudEhhbmRsZXJOYW1lXSwgZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnROYW1lLmluZGV4T2YoJ2xvZ2luJykgPT0gLTEgJiYgZXZlbnROYW1lLmluZGV4T2YoJ2xvZ291dCcpID09IC0xICYmIGV2ZW50TmFtZSAhPSAnY29ubmVjdGlvblJlbW92ZWQnICYmIGV2ZW50TmFtZSAhPSAnY29ubmVjdGlvbkFkZGVkJykge1xuICAgICAgICAgICAgX2Rpc3BhdGNoRnJvbU1hcHMoZSk7XG4gICAgICAgICAgICBjb25zdCBHZW5lc2lzRXhjaGFuZ2VfR2lneWEgPSB3aW5kb3dbJ0dlbmVzaXNFeGNoYW5nZV9HaWd5YSddO1xuICAgICAgICAgICAgY29uc3QgZ2lneWFfb21uaXR1cmVfY29uZiA9IHdpbmRvd1snZ2lneWFfb21uaXR1cmVfY29uZiddO1xuICAgICAgICAgICAgY29uc3QgbXlPbW5pdHVyZUludGVncmF0aW9uRnVuYyA9IHdpbmRvd1snbXlPbW5pdHVyZUludGVncmF0aW9uRnVuYyddO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBHZW5lc2lzRXhjaGFuZ2VfR2lneWEgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGdpZ3lhX29tbml0dXJlX2NvbmYgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBnZSA9IG5ldyBHZW5lc2lzRXhjaGFuZ2VfR2lneWEoZ2lneWFfb21uaXR1cmVfY29uZik7XG4gICAgICAgICAgICAgICAgZ2UucHJvY2Vzc0FjdGlvbihlKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG15T21uaXR1cmVJbnRlZ3JhdGlvbkZ1bmMgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbXlPbW5pdHVyZUludGVncmF0aW9uRnVuYyhnaWd5YV9vbW5pdHVyZV9jb25mLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2hFdmVudE9iamVjdChoYW5kbGVycywgZSkge1xuICAgIGxldCByZXN1bHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGVycyA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBoYW5kbGVycyhlKTtcbiAgICAgICAgfSBlbHNlIGlmICghKGhhbmRsZXJzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICBhZGRMb2coJ05vdCBhIGZ1bmN0aW9uIG9yIGZ1bmN0aW9uIGFycmF5IHJlZ2lzdGVyZWQgdG8gZXZlbnQnLCBoYW5kbGVycyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhcnJheVV0aWxzLmZvckVhY2goPEZ1bmN0aW9uW10+aGFuZGxlcnMsIGhhbmRsZXIgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIoZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkTG9nKCdOb3QgYSBmdW5jdGlvbiByZWdpc3RlcmVkIHRvIGV2ZW50OiAnICsgaGFuZGxlciwgaGFuZGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLy8gVE9ETzogbm90IGNvbGxlY3RpbmcgcmVzdWx0cy4uIHNob3VsZCBpdD9cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIGFkZExvZygnRXJyb3IgaW52b2tpbmcgZnVuY3Rpb24gcmVnaXN0ZXJlZCB0byBldmVudCcsIGhhbmRsZXJzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2Rpc3BhdGNoRnJvbU1hcHMoZXZ0LCBpc0dsb2JhbCA9IGZhbHNlKSB7XG4gICAgY29uc3QgYXJEaXNwYXRjaCA9IFtdO1xuICAgIGxldCBzdG9wID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnaWd5YS5kZWZhdWx0RXZlbnRNYXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IGdpZ3lhLmRlZmF1bHRFdmVudE1hcHNbaV0uZXZlbnRNYXA7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRNZXRob2QgPSBnaWd5YS5kZWZhdWx0RXZlbnRNYXBzW2ldLmRlZmF1bHRNZXRob2Q7XG4gICAgICAgIGZvciAobGV0IHUgPSAwOyB1IDwgbWFwLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgICBjb25zdCBvRmllbGQgPSBtYXBbdV07XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRBcmdzID0gW107XG4gICAgICAgICAgICBpZiAoIW9GaWVsZC5hcmdzKSBvRmllbGQuYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaUFyZyA9IDA7IGlBcmcgPCBvRmllbGQuYXJncy5sZW5ndGg7IGlBcmcrKykge1xuICAgICAgICAgICAgICAgIGlmIChvRmllbGQuYXJnc1tpQXJnXSA9PSAnJGV2ZW50Jykge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRBcmdzLnB1c2goZXZ0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRBcmdzLnB1c2godGVtcGxhdGVzVXRpbHMuZmlsbChvRmllbGQuYXJnc1tpQXJnXSwgZXZ0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc0V2ZW50cyA9ICcsJyArIG9GaWVsZC5ldmVudHMudG9Mb3dlckNhc2UoKSArICcsJztcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzRXZlbnRzLmluZGV4T2YoJywqLCcpICE9IC0xIHx8XG4gICAgICAgICAgICAgICAgKChzRXZlbnRzLmluZGV4T2YoJywnICsgJ29uJyArIGV2dC5ldmVudE5hbWUudG9Mb3dlckNhc2UoKSArICcsJykgIT0gLTEgfHwgc0V2ZW50cy5pbmRleE9mKCcsJyArIGV2dC5ldmVudE5hbWUudG9Mb3dlckNhc2UoKSArICcsJykgIT0gLTEpICYmXG4gICAgICAgICAgICAgICAgICAgICgoIWV2dC5zb3VyY2UgJiYgIW9GaWVsZC5zb3VyY2VzKSB8fCAhb0ZpZWxkLnNvdXJjZXMgfHwgb0ZpZWxkLnNvdXJjZXMuaW5kZXhPZihldnQuc291cmNlKSAhPSAtMSkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBhckRpc3BhdGNoLnB1c2gob0ZpZWxkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRob2QgPSBvRmllbGQubWV0aG9kID8gb0ZpZWxkLm1ldGhvZCA6IGRlZmF1bHRNZXRob2Q7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kLmFwcGx5KHRoaXMsIHByb2Nlc3NlZEFyZ3MpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkTG9nKFwiRXJyb3IgaW52b2tpbmcgZnVuY3Rpb24gcmVnaXN0ZXJlZCB0byBldmVudHMgbWFwJ3MgbWV0aG9kXCIsIG1ldGhvZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvRmllbGQub3ZlcnJpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdG9wKSBicmVhaztcbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgZW51bSBHU0Vycm9ycyB7XG4gICAgT0sgPSAwLFxuICAgIERhdGFfUGVuZGluZyA9IDEwMDAwMSwgLy8gRGF0YSBpcyBzdGlsbCBiZWluZyBwcm9jZXNzZWQsIHF1ZXJ5IGFnYWluIGZvciB0aGUgcmVzcG9uc2VcbiAgICBORVRXT1JLX0VSUk9SID0gNTAwMDI2LFxuICAgIERBVEFfUEVORElORyA9IDEwMDAwMSwgLy8gRGF0YSBpcyBzdGlsbCBiZWluZyBwcm9jZXNzZWQsIHF1ZXJ5IGFnYWluIGZvciB0aGUgcmVzcG9uc2VcbiAgICBPUEVSQVRJT05fQ0FOQ0VMRUQgPSAyMDAwMDEsIC8vIHVzZXIgY2FuY2VsZWQsIGluIGxvZ2luIHByb2Nlc3NcbiAgICBQRVJNSVNTSU9OX0dSQU5URUQgPSAyMDAwMDIsIC8vIElubmVyIGNvZGVcbiAgICBQRVJNSVNTSU9OX05PVF9HUkFOVEVEID0gMjAwMDAzLCAvLyBJbm5lciBjb2RlXG4gICAgUkVESVJFQ1QgPSAyMDAwMDQsIC8vIElubmVyIGNvZGVcbiAgICBORVdfVVNFUiA9IDIwMDAwNSwgLy8gSW5uZXIgY29kZVxuICAgIE9QRVJBVElPTl9ET05FID0gMjAwMDA2LCAvLyBJbm5lciBjb2RlXG4gICAgVVBEQVRFX1VTRVIgPSAyMDAwMDcsIC8vIElubmVyIGNvZGVcbiAgICBPS19XSVRIX0VSUk9SUyA9IDIwMDAwOCwgLy8gRm9yIHJlcG9ydHMgLSB3aGVuIHdlIHJldHVybiBvayB0byBjbGllbnQgYnV0IGhhZCBhY2NlcHRhYmxlIGVycm9ycyAodGhhdCB3ZSB3YW50IHRvIGtub3cgYWJvdXQpIG9uIHRoZSB3YXlcbiAgICBBQ0NPVU5UU19MSU5LRUQgPSAyMDAwMDksIC8vIEFmdGVyIGxpbmtpZ24gYWNjb3V0bnMgdmlhIGxvZ2luLCByZXR1cm4gdGhpcyBlcnJvciBjb2RlXG4gICAgT0tfV0lUSF9FUlJPUl9MT0dJTl9JREVOVElGSUVSX0VYSVNUUyA9IDIwMDAxMCwgLy8gRm9yIHNldEFjY291bnRJbmZvIHVzaW5nIHRoZSBjb25mbGljdEhhbmRsaW5nIHBhcmFtIC0gcHJvZmlsZSB3YXMgc2F2ZWQsIGJ1dCB0aGUgZW1haWwgY29uZmxpY3RzIHdpdGggYW5vdGhlciB1c2VyXG4gICAgQUNDT1VOVF9QRU5ESU5HX1JFR0lTVFJBVElPTiA9IDIwNjAwMSwgLy8gRm9yIGFjY291bnRzIEFQSSxcbiAgICBBQ0NPVU5UX1BFTkRJTkdfVkVSSUZJQ0FUSU9OID0gMjA2MDAyLCAvLyBGb3IgYWNjb3VudHMgQVBJOyBjb25zaWRlciBtb3ZpbmcgdG8gNDAzeHh4IHNlY3Rpb24gaW4gdGhlIGZ1dHVyZS5cbiAgICBBQ0NPVU5UX01JU1NJTkdfTE9HSU5JRCA9IDIwNjAwMywgLy8gRm9yIGFjY291bnRzIEFQSVxuICAgIElERU5USVRZX0FMUkVBRFlfQVNTSUdORUQgPSAyMDYwMDQsIC8vIEZvciBpbXBvcnQgYWNjb3VudHMgQVBJXG4gICAgQUZURVJfRU1BSUxfVkVSSUZJQ0FUSU9OID0gMjA2MDA1LFxuICAgIFBFTkRJTkdfQ09ERV9WRVJJRklDQVRJT04gPSAyMDYwMDYsXG4gICAgQ0xJRU5UX0xPRyA9IDMwMDAwMSwgLy8gaW50ZXJuYWwsIGZvciByZXBvcnRpbmcgZXJvcnJzIGluIGNsaWVudCBTREtTXG4gICAgSU5WQUxJRF9EQVRBX0NFTlRFUiA9IDMwMTAwMSwgLy8gXCJJbnZhbGlkIGRhdGEtY2VudGVyXCIuIHdpdGggZXJyb3IgZGV0YWlscyBvZjogXCJUaGlzIEFQSSBrZXkgaXMgc2VydmVkIGJ5IGFub3RoZXIgZGF0YSBjZW50ZXJcIi5cbiAgICBJTlZBTElEX1JFUVVFU1RfRk9STUFUID0gNDAwMDAxLCAvLyBjb3VsZCBiZSBhbGwga2luZCBvZiBlcnJvcnMgd2l0aCB3cm9uZyByZXF1ZXN0IChub24gc2VjdXJlIHdoZW4gc2hvdWxkIGJlIHNlY3VyZSwgd3JvbmcgYXV0aGVudGljYXRpb24gaGVhZGVyKVxuICAgIE1JU1NJTkdfUkVRVUlSRURfUEFSQU1FVEVSID0gNDAwMDAyLFxuICAgIFVOSVFVRV9JREVOVElGSUVSX0VYSVNUUyA9IDQwMDAwMyxcbiAgICBJTlZBTElEX1BBUkFNRVRFUl9GT1JNQVQgPSA0MDAwMDQsXG4gICAgSU5WQUxJRF9QQVJBTUVURVJfVkFMVUUgPSA0MDAwMDYsXG4gICAgRFVQTElDQVRFX1ZBTFVFID0gNDAwMDA3LFxuICAgIElOVkFMSURfQVVUSEVOVElDQVRJT05fSEVBREVSID0gNDAwMDA4LCAvLyBPQXV0aDJcbiAgICBWQUxJREFUSU9OX0VSUk9SID0gNDAwMDA5LCAvLyBJbiBhY2NvdW50cy5yZWdpc3Rlciwgd2hlbmV2ZXIgdGhlcmUgaXMgYSB2YWxpZGF0aW9uIGVycm9yXG4gICAgSU5WQUxJRF9SRURJUkVDVF9VUkkgPSA0MDAwMTEsIC8vIE9BdXRoMlxuICAgIElOVkFMSURfUkVTUE9OU0VfVFlQRSA9IDQwMDAxMiwgLy8gT0F1dGgyXG4gICAgVU5TVVBQT1JURURfR1JBTlRfVFlQRSA9IDQwMDAxMywgLy8gT0F1dGgyXG4gICAgSU5WQUxJRF9HUkFOVCA9IDQwMDAxNCwgLy8gT0F1dGgyXG4gICAgQ09ERV9FWFBJUkVEID0gNDAwMDE1LCAvLyBPQXV0aDJcbiAgICBTQ0hFTUFfVkFMSURBVElPTl9GQUlMRUQgPSA0MDAwMjAsXG4gICAgQ0FQVENIQV9WRVJJRklDQVRJT05fRkFJTEVEID0gNDAwMDIxLFxuICAgIFVOSVFVRV9JTkRFWF9WQUxJREFUSU9OX0VSUk9SID0gNDAwMDIyLFxuICAgIElOVkFMSURfVFlQRV9WQUxJREFUSU9OX0VSUk9SID0gNDAwMDIzLFxuICAgIERZTkFNSUNfRklFTERTX1ZBTElEQVRJT05fRVJST1IgPSA0MDAwMjQsXG4gICAgV1JJVEVfQUNDRVNTX1ZBTElEQVRJT05fRVJST1IgPSA0MDAwMjUsXG4gICAgSU5WQUxJRF9GT1JNQVRfVkFMSURBVElPTl9FUlJPUiA9IDQwMDAyNixcbiAgICBSRVFVSVJFRF9WQUxVRV9WQUxJREFUSU9OX0VSUk9SID0gNDAwMDI3LFxuICAgIEVNQUlMX05PVF9WRVJJRklFRCA9IDQwMDAyOCxcbiAgICBTQ0hFTUFfQ09ORkxJQ1RfRVJST1IgPSA0MDAwMjksIC8vIFRvIGhhbmRsZSBVc2VyIHN0b3J5IDM0MzMwLiBJbXByb3ZlIEVsYXN0aWNTZWFyY2hNYXBwaW5nRXhjZXB0aW9uIGhhbmRsaW5nIGluIERTLkluZGV4T2JqZWN0XG4gICAgT1BFUkFUSU9OX05PVF9BTExPV0VEID0gNDAwMDMwLCAvLyBVc2VyIHN0b3J5IDM0MzExIC0gSWYgYWRkQ29ubmVjdGlvbiBpcyBjYWxsZWQgcmV0dXJuIGFuIGVycm9yIChcIm9wZXJhdGlvbiBub3QgYWxsb3dlZCBmb3IgdGhpcyBhY2NvdW50XCIsIDQwMFhYWCBlcnJvcikuXG4gICAgU0VDVVJJVFlfVkVSSUZJQ0FUSU9OX0ZBSUxFRCA9IDQwMDA1MCxcbiAgICBJTlZBTElEX0FQSUtFWV9QQVJBTUVURVIgPSA0MDAwOTMsXG4gICAgTk9UX1NVUFBPUlRFRCA9IDQwMDA5NiwgLy8gdGhlIGZ1bmN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgYnkgYW55IG9mIHRoZSBjdXJyZW50bHkgY29ubmVjdGVkIHByb3ZpZGVyc1xuICAgIFVOU1VQUE9SVEVEX1VTRVJfQUdFTlQgPSA0MDAwOTcsIC8vXG4gICAgTk9fUFJPVklERVJTID0gNDAwMTAwLCAvLyBjbGllbnQ/XG4gICAgUE9QVVBfQkxPQ0tFRCA9IDQwMDEwMSwgLy8gY2xpZW50XG4gICAgSU5WQUxJRF9FVkVOVF9IQU5ETEVSID0gNDAwMTAyLCAvLyBjbGllbnRcbiAgICBJTlZBTElEX0NPTlRBSU5FUklEID0gNDAwMTAzLCAvLyBjbGllbnRcbiAgICBOT1RfQ09OTkVDVEVEID0gNDAwMTA2LCAvLyB1c2VyIGlzIG5vdCBjb25uZWN0ZWQgdG8gdGhlIHJlcXVpcmVkIG5ldHdvcmsgb3IgdG8gYW55IG5ldHdvcmtcbiAgICBJTlZBTElEX1NJVEVfRE9NQUlOID0gNDAwMTIwLCAvLyB0aGUgY3VycmVudCBkb21haW4gZG9lcyBub3QgbWF0Y2ggdGhlIGRvbWFpbiBjb25maWd1cmVkIGZvciB0aGUgYXBpIGtleVxuICAgIFBST1ZJREVSX0NPTkZJR1VSQVRJT05fRVJST1IgPSA0MDAxMjIsIC8vIHRoZSBjdXJyZW50IGRvbWFpbiBkb2VzIG5vdCBtYXRjaCB0aGUgZG9tYWluIGNvbmZpZ3VyZWQgZm9yIHRoZSBhcGkga2V5XG4gICAgTElNSVRfUkVBQ0hFRCA9IDQwMDEyNCwgLy8gR2FtZU1lY2hhbmljcyAtIENhcCB3YXMgcmVhY2hlZFxuICAgIEZSRVFVRU5DWV9MSU1JVF9SRUFDSEVEID0gNDAwMTI1LCAvLyBDb21tZW50cy9GZWVkIC0gU3BhbSBDYXBzIHdhcyByZWFjaGVkXG4gICAgSU5WQUxJRF9BQ1RJT04gPSA0MDAxMjYsIC8vIEdhbWVNZWNoYW5pY3MgLSBJbnZhbGlkIGFjdGlvbi4gVHJpZ2dlcmVkIGFjdGlvbiBjYW4ndCBiZSBpbml0aWF0ZWQgZXh0ZXJuYWxseVxuICAgIElOU1VGRklDSUVOVF9QT0lOVFNfVE9fUkVERUVNID0gNDAwMTI3LCAvLyBHYW1lTWVjaGFuaWNzIC0gSW5zdWZmaWNpZW50X3BvaW50c190b19yZWRlZW1cbiAgICBTSUdOQVRVUkVfVElNRVNUQU1QX0VYUElSRUQgPSA0MDAxMjgsIC8vIHRoZSB0aW1lc3RhbXAgaW5zaWRlIHRoZSBzaWduYXR1cmUgaXMgZXhwaXJlZFxuICAgIEVycm9yX0R1cmluZ19FeHRlbnNpb25zX09wZXJhdGlvbiA9IDQwMDMwMixcbiAgICBFeHRlbnNpb25fUG9pbnRfQ3VzdG9tX0Vycm9yID0gNDAwMzAzLCAvLyBFeHRlbnNpb24gcG9pbnQgcmV0dXJuIGEgdXNlckZhY2luZ0Vycm9yTWVzc2FnZVxuICAgIElOVkFMSURfUE9MSUNZX0NPTkZJR1VSQVRJT04gPSA0MDEwMDAsIC8vIFBvbGljeSBjb25maWd1cmF0aW9uIGlzIGludmFsaWQgKGkuZS4gcHJldmVudCByZWdpdHJhdGlvbilcbiAgICBTVVNQRUNURURfU1BBTSA9IDQwMTAxMCwgLy8gU29tZW9uZSBpcyB0cnlpbmcgdG8gdXNlIEdpZ3lhIHRvIHNlbmQgYSBlbWFpbCB3aXRoIGEgVVJMIHRoYXQgZG9lcyBub3QgbWF0Y2ggYW55IG9mIHRoZSBjbGllbnQncyBkb21haW5zOyBzdXNwZWN0ZWQgc3BhbS5cbiAgICBMT0dJTl9GQUlMRURfQ0FQVENIQV9SRVFVSVJFRCA9IDQwMTAyMCwgLy8gYWNjb3VudHMubG9naW4gLSBjYXB0Y2hhIHJlcXVpcmVkXG4gICAgUkVRVUVTVF9GQUlMRURfQ0FQVENIQV9SRVFVSVJFRCA9IDQwMTAyMywgLy8gYWNjb3VudHMubG9naW4gLSBjYXB0Y2hhIHJlcXVpcmVkXG4gICAgTE9HSU5fRkFJTEVEX1dST05HX0NBUFRDSEEgPSA0MDEwMjEsIC8vIGFjY291bnRzLmxvZ2luIC0gd3JvbmcgY2FwdGNoYSBjb2RlXG4gICAgT0xEX1BBU1NXT1JEX1VTRUQgPSA0MDEwMzAsIC8vIFRoZSB1c2VyIHByb3ZpZGVkIGhpcyBwcmV2aW91cyBwYXNzd29yZCwgbm90IHRoZSBjdXJyZW50IG9uZVxuICAgIEZPUkJJRERFTiA9IDQwMzAwMCxcbiAgICBJTlZBTElEX1NFU1NJT05fVE9LRU4gPSA0MDMwMDEsIC8vIGludGVybmFsXG4gICAgUkVRVUVTVF9IQVNfRVhQSVJFRCA9IDQwMzAwMiwgLy8gdGhlIHRpbWVzdGFtcCBvciBleHBpcmF0aW9uIG9mIHRoZSB0b2tlbiB1c2VkIGV4Y2VlZGVkIHRoZSBhbGxvd2VkIHRpbWUgd2luZG93XG4gICAgSU5WQUxJRF9SRVFVRVNUX1NJR05BVFVSRSA9IDQwMzAwMyxcbiAgICBEVVBMSUNBVEVfTk9OQ0UgPSA0MDMwMDQsXG4gICAgVU5BVVRIT1JJWkVEX1VTRVIgPSA0MDMwMDUsIC8vIHRoZSB1c2VyIGlkIHBhc3NlZCBpcyBub3QgdmFsaWQgZm9yIHRoaXMgc2l0ZVxuICAgIFNFTlNJVElWRV9EQVRBX1NFTlRfT1ZFUl9IVFRQID0gNDAzMDA2LCAvLyB3aGVuIHNlbmRpbmcgdGhlIHNlY3JldCBrZXkgaW4gUkVTVCBpdCBoYXMgdG8gYmUgb3ZlciBIVFRQU1xuICAgIFBFUk1JU1NJT05fREVOSUVEID0gNDAzMDA3LCAvLyBDb21tZW50cyBzZXJ2ZXIgLSBQZXJtaXNzaW9uIGRlbmllZCAocmVhZE9ubHksbW9kZXJhdGlvbiBzaXRlKS5cbiAgICBJTlZBTElEX09QRU5JRF9VUkwgPSA0MDMwMDgsIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW5JZCBlbmRwb2ludCBvbiB0aGUgdXJsIG9yIHVzZXJuYW1lIGdpdmVuIGZvciBvcGVuSWQgbG9naW5cbiAgICBQUk9WSURFUl9TRVNTSU9OX0VYUElSRUQgPSA0MDMwMDksIC8vIHRoZSB1c2VyIHNlc3Npb24gZm9yIHRoaXMgcHJvdmlkZXIgaXMgZXhwaXJlZFxuICAgIElOVkFMSURfU0VDUkVUID0gNDAzMDEwLCAvLyB0aGUgcmVxdWVzdCBoYXMgYW4gaW52YWxpZCBzZWNyZXQga2V5XG4gICAgU0VTU0lPTl9IQVNfRVhQSVJFRCA9IDQwMzAxMSwgLy8gdGhlIHNlc3Npb24gZm9yIHRoaXMgdXNlciBoYXMgZXhwaXJlZFxuICAgIE5PX1ZBTElEX1NFU1NJT04gPSA0MDMwMTIsIC8vIHJlcXVlc3RlZCB1c2VyIGhhcyBubyB2YWxpZCBzZXNzaW9uXG4gICAgVU5WRVJJRklFRF9VU0VSID0gNDAzMDEzLCAvLyB0aGUgdXNlciBpcyBub3QgdmVyaWZpZWQgaW4gU1NPIHNlc3Npb25cbiAgICBNSVNTSU5HX1JFUVVFU1RfUkVGRVJSRVIgPSA0MDMwMTUsIC8vIHdlIGNhbid0IHZhbGlkYXRlIHRoZSByZXF1ZXN0IGJlY2F1c2UgdGhlIHJlZmVycmVyIGhlYWRlciBpcyBtaXNzaW5nXG4gICAgVU5FWFBFQ1RFRF9QUk9WSURFUl9VU0VSID0gNDAzMDE3LCAvLyB0aGUgbG9nZ2VkIGluIHVzZXIgaXMgZGlmZmVyZW50IGZyb20gdGhlIG9uZSBleHBlY3RlZFxuICAgIFBFUk1JU1NJT05fTk9UX1JFUVVFU1RFRCA9IDQwMzAyMiwgLy8gdGhlIGFjdGlvbiBuZWVkcyBhIHVzZXIgcGVybWlzc2lvbiBhbmQgaXQgd2FzIG5vdCByZXF1ZXN0ZWRcbiAgICBOT19VU0VSX1BFUk1JU1NJT04gPSA0MDMwMjMsIC8vIHRoZSBhY3Rpb24gbmVlZHMgYSB1c2VyIHBlcm1pc3Npb24gYW5kIHdlIGRvbid0IGhhdmUgb25lXG4gICAgUFJPVklERVJfTElNSVRfUkVBQ0hFRCA9IDQwMzAyNCwgLy8gdGhlIHByb3ZpZGVyIGxpbWl0IGZvciB0aGlzIGFjdGlvbiB3YXMgZXhjZWVkZWRcbiAgICBJTlZBTElEX1RPS0VOID0gNDAzMDI1LCAvLyBPQXV0aDJcbiAgICBVTkFVVEhPUklaRURfQUNDRVNTX0VSUk9SID0gNDAzMDI2LCAvLyBDYWxscyB0byBhY2NvdW50cy5pc0F2YWlsYWJsZUxvZ2luSUQgV2hlbiBwcmV2ZW50TG9naW5JREhhcnZlc3RpbmcgPSB0cnVlIHNob3VsZCByZXR1cm4gYW4gYXBwcm9wcmlhdGUgNDAzeHh4IHVuYXV0aG9yaXplZCBhY2Nlc3MgZXJyb3IuXG4gICAgRElGRkVSRU5UX1VTRVJfRk9SX1JFQVVUSCA9IDQwMzAyNywgLy8gRGlmZmVyZW50IHVzZXIgdHJpZWQgdG8gcmUtYXV0aG9yaXplLlxuICAgIFNFU1NJT05fRVhQSVJFRF9SRVRSWSA9IDQwMzAzMCwgLy8gSW5uZXIgY29kZSAtIHdoZW4gdGhlIGZhY2Vib29rIHNlc3Npb24gaXMgZXhwaXJlZCBhbmQgdGhlIGNsaWVudCB3YWl0cyBmb3IgRkIgb24gcGFnZSB0byBsb2FkXG4gICAgQVBQUk9WRURfQllfTU9ERVJBVE9SID0gNDAzMDMxLCAvLyBjb21tZW50cyAtIGNhbnQgZmxhZyBjb21tZW50LCBpdCB3YXMgYXBwcm92ZWQgYnkgdGhlIG1vZGVyYXRvciBhbHJlYWR5LlxuICAgIFRPS0VOX0hBU19SRU5FV0VEID0gNDAzMDMyLCAvLyB0aGUgdG9rZW4gaXMgbm8gbG9uZ2VyIHZhbGlkLCBidXQgd2UgaGF2ZSBuZXcgdG9rZW4gdG8gcHJvdmlkZVxuICAgIE5PX1VTRVJfQ09PS0lFID0gNDAzMDM1LCAvLyBubyB1c2VyIGNvb2tpZVxuICAgIFVOQVVUSE9SSVpFRF9QQVJUTkVSID0gNDAzMDM2LCAvLyBwYXJ0bmVyIGlzIGRpc2FibGVkXG4gICAgUE9TVF9ERU5JRUQgPSA0MDMwMzcsIC8vIENvbW1lbnRzIHNlcnZlciAtIFBvc3QgZGVuaWVkIHdoZW4gdGhlIHVzZXIgdHJpZWQgdG8gcmV2aWV3IHR3aWNlLlxuICAgIE5PX0xPR0lOX1RJQ0tFVCA9IDQwMzA0MCwgLy8gbm8gbG9naW4gdGlja2V0IGluIGNhbGxiYWNrIHVybFxuICAgIEFDQ09VTlRfRElTQUJMRUQgPSA0MDMwNDEsIC8vIEZvciBhY2NvdW50cyAtIHdoZW4gZ3MuYWNjb3VudHMuSXNBY3RpdmU9ZmFsc2VcbiAgICBJTlZBTElEX0xPR0lOSUQgPSA0MDMwNDIsIC8vIEZvciBhY2NvdW50cyAtIHdoZW4gdHJ5aW5nIHRvIGxvZ2luIHdpdGggYSBsb2dpbklEIHRoYXQgZG8gbm90IGV4aXN0c1xuICAgIExPR0lOX0lERU5USUZJRVJfRVhJU1RTID0gNDAzMDQzLCAvLyBGb3IgYWNjb3VudDogSWYgcHJvdmlkZXJFbWFpbCBpcyBkZWZpbmVkIGFzIGEgbG9naW5JZGVudGlmaWVyIGluIHRoZSBwb2xpY3ksIGFuZCB0aGUgZW1haWwgYWRkcmVzcyByZWNlaXZlZCBmcm9tIHRoZSBwcm92aWRlciBleGlzdHMgaW4gdGhlIGdzLmxvZ2luSWRlbnRpZmllcnMgY29sbGVjdGlvbiBidXQgYXNzb2NpYXRlZCB3aXRoIGEgZGlmZmVyZW50IFVVSUQgdGhhbiB0aGUgY3VycmVudCB1c2VyLCB0aGVuIHJldHVybiBcIkxvZ2luIGlkZW50aWZpZXIgZXhpc3RzXCIgZXJyb3IgY29kZSAoNDAzeHh4KS5cbiAgICBVTkRFUkFHRV9VU0VSID0gNDAzMDQ0LCAvLyBGb3IgQ09QUEEgY29tcGxpYW5jZSAoQ2hpbGRyZW4ncyBPbmxpbmUgUHJpdmFjeSBQcm90ZWN0aW9uIEFjdClcbiAgICBJTlZBTElEX1NJVEVfQ09ORklHVVJBVElPTl9FUlJPUiA9IDQwMzA0NSwgLy8gRm9yIGFjY291bnRzIC0gc2l0ZSBEUyBpcyBlbmFibGVkIHRob3VnaCBubyBEU1NpemUgd2FzIGNvbmZpZ3VyZWQuXG4gICAgTE9HSU5JRF9ET0VTX05PVF9FWElTVCA9IDQwMzA0NywgLy8gRm9yIGFjY291bnRzIC0gd2hlbiB0cnlpbmcgdG8gcmVzZXQgcGFzc3dvcmQgd2l0aCBhIGxvZ2luSUQgdGhhdCBkbyBub3QgZXhpc3RzXG4gICAgQVBJX1JBVEVfTElNSVRfRVhDRUVERUQgPSA0MDMwNDgsXG4gICAgUEVORElOR19QQVNTV09SRF9DSEFOR0UgPSA0MDMxMDAsIC8vIFRoZSB1c2VyJ3MgcGFzc3dvcmQgbmVlZHMgdG8gYmUgY2hhbmdlZFxuICAgIEFDQ09VTlRfUEVORElOR19URkFfVkVSSUZJQ0FUSU9OID0gNDAzMTAxLFxuICAgIEFDQ09VTlRfUEVORElOR19URkFfUkVHSVNUUkFUSU9OID0gNDAzMTAyLFxuICAgIEFDQ09VTlRfUEVORElOR19SRUNFTlRfTE9HSU4gPSA0MDMxMTAsXG4gICAgQUNDT1VOVF9URU1QT1JBUklMWV9MT0NLRURfT1VUID0gNDAzMTIwLCAvLyBUb28gbWFueSBsb2dpbiBhdHRlbXB0czsgYWNjb3VudCBsb2NrZWQtb3V0XG4gICAgUkVEVU5EQU5UX09QRVJBVElPTiA9IDQwMzIwMCwgLy8gVGhlIGNsaWVudCBwZXJmb3JtZWQgYW4gb3BlcmF0aW9uIHRoYXQgaXMgcmVkdW5kYW50XG4gICAgSU5WQUxJRF9BUFBMSUNBVElPTl9JRCA9IDQwMzIwMSwgLy8gVGhlIGFwcCBpZCBwcm92aWRlZCBpcyBkaWZmZXJlbnQgdGhhbiB0aGUgb25lIGNvbmZpZ3VyZWQgZm9yIHRoZSBzaXRlXG4gICAgTk9UX0ZPVU5EID0gNDA0MDAwLCAvLyBDb21tZW50cyBzZXJ2ZXIgLSBDYXRlZ29yeSBub3QgZm91bmQuIEFjY291bnRzIC0gZW1haWwgdmVyaWZpY2F0aW9uIGZhaWxlZCwgdXVpZCBub3QgZm91bmQuXG4gICAgRlJJRU5EX05PVF9GT1VORCA9IDQwNDAwMSwgLy8gdGhlIHVzZXIgaWQgcHJvdmlkZWQgYXMgYSB0YXJnZXQgaXMgbm90IGEgZnJpZW5kIGZvciB0aGUgY3VycmVudCB1c2VyXG4gICAgQ0FURUdPUllfTk9UX0ZPVU5EID0gNDA0MDAyLCAvLyBDb21tZW50cyBzZXJ2ZXIgLSBDYXRlZ29yeSBub3QgZm91bmQuXG4gICAgVUlEX05PVF9GT1VORCA9IDQwNDAwMyxcbiAgICBSRVNPVVJDRV9OT1RfRk9VTkQgPSA0MDQwMDQsIC8vIENsaWVudCBzaWRlIC0gaW1hZ2Ugbm90IGZvdW5kIGFmdGVyIHVwbG9hZFxuICAgIElOVkFMSURfQVBJX01FVEhPRCA9IDQwNTAwMSwgLy8gaW50ZXJuYWwgZm9yIG91ciBKUyBBUElcbiAgICBJREVOVElUWV9FWElTVFMgPSA0MDkwMDEsIC8vIHdoZW4gdHJ5aW5nIHRvIGNvbm5lY3QgdG8gYSBwcm92aWRlciB0aGF0IGlzIGFscmVhZHkgY29ubmVjdGVkIG9yIGxpbmsgdG8gYW4gYWxyZWFkeSBsaW5rZWQgYWNjb3VudFxuICAgIEdPTkUgPSA0MTAwMDAsIC8vIFJlc291cmNlIG5vIGxvbmdlciBhdmFpbGFibGUuIERhdGEgS2V5IFNlcnZlciAtIGtleSByZXZva2VkL2V4cGlyZWQuXG4gICAgUkVRVUVTVF9FTlRJVFlfVE9PX0xBUkdFID0gNDEzMDAxLCAvLyBDb21tZW50cyBzZXJ2ZXIgLSBSZXF1ZXN0IHRvIGxhcmdlXG4gICAgQ09NTUVOVF9URVhUX1RPT19MQVJHRSA9IDQxMzAwMiwgLy8gQ29tbWVudHMgc2VydmVyIC0gQ29tbWVudCBUZXh0IHRvIGxhcmdlLlxuICAgIE9CSkVDVF9UT09fTEFSR0UgPSA0MTMwMDMsIC8vIERhdGFTdG9yZSBvYmplY3QgaXMgdG9vIGxhcmdlXG4gICAgUFJPRklMRV9QSE9UT19UT09fTEFSR0UgPSA0MTMwMDQsIC8vIFByb2ZpbGUgcGhvdG8gaXMgdG9vIGxhcmdlLCBleGNlZWRzIG1heGltdW0gYWxsb3dlZCBjb250ZW50IGxlbmd0aFxuICAgIFJFUVVFU1RfVVJJX1RPT19MT05HID0gNDE0MDAwLCAvL1RoZSBVUkkgcHJvdmlkZWQgd2FzIHRvbyBsb25nIGZvciB0aGUgc2VydmVyIHRvIHByb2Nlc3MuXG4gICAgTUlTU0lOR19VU0VSX1BIT1RPID0gNDA5MDEwLCAvLyBFcnJvciAtIG1pc3NpbmcgdXNlciBwaG90b1xuICAgIENPVU5URVJfTk9UX1JFR0lTVEVSRUQgPSA0MDkwMTEsIC8vIENvdW50ZXIgbm90IHJlZ2lzdGVyZWRcbiAgICBJTlZBTElEX0dNSURfVElDS0VUID0gNDA5MDEyLCAvLyBnbWlkIHRpY2tldCBpcyBub3QgdmFsaWRcbiAgICBTQU1MX01BUFBFRF9BVFRSSUJVVEVfTk9UX0ZPVU5EID0gNDA5MDEzLCAvLyBVc2VkIHdoZW4gbWFwcGVkIGF0dHJpYnV0ZSB2YWx1ZSBmb3IgcHJvdmlkZXJVSUQgY2Fubm90IGJlIHJldHJlaXZlZFxuICAgIFNBTUxfQ0VSVElGSUNBVEVfTk9UX0ZPVU5EID0gNDA5MDE0LCAvLyBVc2VkIHdoZW4gU0FNTCBjZXJ0aWZpY2F0ZSBjb3VsZCBub3QgYmUgcmV0cmVpdmVkLlxuICAgIFNBTUxfTUVTU0FHRV9OT1RfRk9VTkQgPSA0MDkwMTUsIC8vIFVzZWQgd2hlbiBjYWNoZWQgU0FNTCBtZXNzYWdlIGNvdWxkIG5vdCBiZSByZXRyZWl2ZWQuXG4gICAgR0VORVJBTF9TRVJWRVJfRVJST1IgPSA1MDAwMDEsXG4gICAgU0VSVkVSX0xPR0lOX0VSUk9SID0gNTAwMDAyLCAvLyBnZW5lcmFsIGVycm9yIGR1cmluZyB0aGUgbG9naW4gcHJvY2Vzc1xuICAgIERFRkFVTFRfQVBQTElDQVRJT05fQ09ORklHVVJBVElPTl9FUlJPUiA9IDUwMDAwMywgLy8gRm9yIG11bHRpcGxlIERDIC0gd2hlbiBubyBkZWZhdWx0IGFwcGxpY2F0aW9uIGNhbiBiZSBmb3VuZCBpbiBEZWZhdWx0QXBwbGljYXRpb25zLmNvbmZpZy4gV2l0aCBlcnJvciBkZXRhaWxzIG9mOiBcIkRlZmF1bHQgYXBwbGljYXRpb24gaXNuJ3QgY29uZmlndXJlZCBmb3IgZGF0YUNlbnRlclwiXG4gICAgU0VTU0lPTl9NSUdSQVRJT05fRVJST1IgPSA1MDAwMTQsIC8vIGVycm9yIGluIG1pZ3JhdGluZyBvbGQgdG8gbmV3IGZhY2Vib29rIHNlc3Npb25cbiAgICBQUk9WSURFUl9FUlJPUiA9IDUwMDAyMywgLy8gZ2VuZXJhbCBlcnJvciBmcm9tIHRoZSBwcm92aWRlclxuICAgIERBVEFCQVNFX0VSUk9SID0gNTAwMDI4LFxuICAgIFVTRVJOQU1FX1JFUVVJUkVEID0gNTAwMDI5LCAvLyBJbm5lciBjb2RlXG4gICAgTk9fUFJPVklERVJfQVBQTElDQVRJT04gPSA1MDAwMzEsIC8vIHRoZSBhcHBsaWNhdGlvbiBmb3IgdGhpcyBwcm92aWRlciBpcyBub3QgZGVmaW5lZCBmb3IgdGhpcyBzaXRlXG4gICAgTE9BRF9GQUlMRUQgPSA1MDAwMzIsIC8vIGNsaWVudCBlcnJvclxuICAgIElOVkFMSURfRU5WSVJPTk1FTlRfQ09ORklHID0gNTAwMDMzLCAvLyBJbiBjYXNlIHRoZXJlIGlzIG5vIHRhcmdldCBlbnZpcm9ubWVudCBpbiB0aGUgY29uZmlnIGZpbGUgd2UnZCByZXR1cm4gd2l0aCAgaW52YWxpZF9lbnZpcm9ubWVudF9jb25maWcgZXJyb3IuXG4gICAgRVJST1JfRFVSSU5HX0JBQ0tFTkRfT1BFUkFUSU9OID0gNTAwMDM0LFxuICAgIFRJTUVPVVQgPSA1MDQwMDEsIC8vIG91dGdvaW5nIHJlcXVlc3QgaGFkIHRpbWVkIG91dFxuICAgIENMSUVOVFRJTUVPVVQgPSA1MDQwMDIsIC8vIEZvciBzZXJ2ZXIgU0RLcyAtIGEgY2xpZW50IHNpZGUgdGltZW91dFxuICAgIElOVkFMSURfVVJMID0gNDA0MDA0LCAvLyBlbWJlZC5seSA0MDQgZXJyb3IgbWVzc2FnZSAtIHVybCBpcyBub3QgdmFsaWRcbiAgICBNRURJQV9JVEVNU19OT1RfU1VQUE9SVEVEID0gNDAxMDAxLCAvLyBNZWRpYSBpdGVtcyBhIG5vdCBhbGxvd2VkIGZvciB0aGlzIGNhdGVnb3J5XG4gICAgTUlTU0lOR19FUlJPUl9DT0RFID0gNTk5OTk5LFxuICAgIFRISVNfQVVUSEVOVElDQVRJT05fTUVUSE9EX0lTX0NVUlJFTlRMWV9ESVNBQkxFRCAgPSA0MDMzMDAsXG4gICAgRk9SQ0VfTElOS19MT0dJTl9JREVOVElGSUVSX0VYSVNUUyA9IDQwOTAwMyxcbiAgICBQQVNTS0VZX0FVVEhFTlRJQ0FUT1JfUkVHSVNURVJFRCA9IDQwMDEzMCxcbiAgICBQQVNTS0VZX0FCT1JURUQgPSA0MDAxMzEsXG4gICAgUEFTU0tFWV9FUlJPUiA9IDUwMDEzMVxufVxuZXhwb3J0IGNvbnN0IGVudW0gR1NFcnJvckRldGFpbHMge1xuICAgIE5vbmUgPSAwLFxuICAgIFNhbWVfcGFzc3dvcmQgPSAxMDAwMDEsIC8vIFJlc2V0IFBhc3N3b3JkIC0gXCInb2xkUGFzc3dvcmQnIGNhbm5vdCBiZSB0aGUgc2FtZSBhcyAnbmV3UGFzc3dvcmQnXCJcbiAgICBJbnZhbGlkX3Bhc3N3b3JkID0gMTAwMDAyLCAvLyBSZXNldCBQYXNzd29yZCAtIGN1cnJlbnQgcGFzc3dvcmQgaXMgd3JvbmcvaW52YWxpZFxuICAgIEludmFsaWRfY291bnRlcnNfcXVlcnlfd2l0aF9jdXJzb3IgPSAxMDAwMDMsXG59XG4iLCJpbXBvcnQgKiBhcyBhcnJheVV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9hcnJheSc7XG5pbXBvcnQgeyBhZGRMb2cgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvTGVnYWN5TG9nZ2VyJztcbmltcG9ydCAqIGFzIG9iamVjdFV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9vYmplY3QnO1xuaW1wb3J0IHsgaGFuZGxlU3BlY2lhbEZpZWxkcyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9JbnRlcm5hbEZsb3dzJztcbmltcG9ydCAqIGFzIGV2ZW50cyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvRXZlbnRzJztcblxuZnVuY3Rpb24gZ2V0RXZlbnRIYW5kbGVyTmFtZShldmVudE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKGV2ZW50TmFtZS5zdWJzdHJpbmcoMCwgMikgPT09ICdvbicpIHtcbiAgICAgICAgcmV0dXJuIGV2ZW50TmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJ29uJyArIGV2ZW50TmFtZS5zdWJzdHJpbmcoMCwgMSkudG9VcHBlckNhc2UoKSArIGV2ZW50TmFtZS5zdWJzdHJpbmcoMSk7XG4gICAgfVxufVxuZXhwb3J0IGludGVyZmFjZSBJTGlua0JhY2tFdmVudCB7XG4gICAgZXZlbnROYW1lOiBzdHJpbmc7XG4gICAgcHJvdmlkZXI/OiBzdHJpbmc7XG4gICAgQ0lEOiBzdHJpbmc7XG4gICAgc2hvcnRDb2RlPzogc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBJRXZlbnRPYmplY3Qge31cbmV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50SGFuZGxlckluZm8ge1xuICAgIGhhbmRsZXI6IChlOiBJRXZlbnRPYmplY3QpID0+IHZvaWQ7XG4gICAgdHlwZT86IHN0cmluZztcbiAgICBjb250ZXh0PzogT2JqZWN0O1xuICAgIHBhcmFtcz86IE9iamVjdDtcbiAgICBmdWxsRXZlbnROYW1lPzogc3RyaW5nO1xufVxuY29uc3QgX2V2ZW50SGFuZGxlcnM6IHsgW2Z1bGxFdmVudE5hbWU6IHN0cmluZ106IEFycmF5PElFdmVudEhhbmRsZXJJbmZvPiB9ID0ge307XG5jb25zdCBfcGVuZGluZ0V2ZW50cyA9IHt9O1xuZXhwb3J0IGNvbnN0IF9hY3RpdmVOYW1lc3BhY2VzID0ge307XG5leHBvcnQgZnVuY3Rpb24gYWRkKGV2ZW50TmFtZTogc3RyaW5nLCBldmVudEhhbmRsZXI6IChlOiBJRXZlbnRPYmplY3QpID0+IHZvaWQsIHR5cGUgPSAnb3RoZXInLCBjb250ZXh0PywgbmFtZXNwYWNlID0gJ3NvY2lhbGl6ZScsIHBhcmFtcz8pOiBJRXZlbnRIYW5kbGVySW5mbyB7XG4gICAgY29uc3QgZnVsbEV2ZW50TmFtZSA9IG5hbWVzcGFjZSArICdfJyArIGdldEV2ZW50SGFuZGxlck5hbWUoZXZlbnROYW1lKTtcblxuICAgIGlmICghX2V2ZW50SGFuZGxlcnNbZnVsbEV2ZW50TmFtZV0pIHtcbiAgICAgICAgX2V2ZW50SGFuZGxlcnNbZnVsbEV2ZW50TmFtZV0gPSBbXTtcbiAgICB9XG5cbiAgICBjb25zdCByZWdpc3RlcmVkSGFuZGxlcjogSUV2ZW50SGFuZGxlckluZm8gPSB7XG4gICAgICAgIGhhbmRsZXI6IGV2ZW50SGFuZGxlcixcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAgICAgIGZ1bGxFdmVudE5hbWU6IGZ1bGxFdmVudE5hbWUsXG4gICAgfTtcblxuICAgIF9ldmVudEhhbmRsZXJzW2Z1bGxFdmVudE5hbWVdLnB1c2gocmVnaXN0ZXJlZEhhbmRsZXIpO1xuXG4gICAgaWYgKCF0aGlzLl9hY3RpdmVOYW1lc3BhY2VzW25hbWVzcGFjZV0gJiYgZ2lneWEuXy5hcGlBZGFwdGVyKSB7XG4gICAgICAgIGdpZ3lhLl8uYXBpQWRhcHRlci5yZWdpc3RlckZvck5hbWVzcGFjZUV2ZW50cyhuYW1lc3BhY2UpO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVOYW1lc3BhY2VzW25hbWVzcGFjZV0gPSAxO1xuXG4gICAgY29uc3QgcGVuZGluZ0V2ZW50cyA9IF9wZW5kaW5nRXZlbnRzW2Z1bGxFdmVudE5hbWVdO1xuICAgIGlmIChwZW5kaW5nRXZlbnRzICYmIHR5cGUgPT0gJ290aGVyJykge1xuICAgICAgICBfcGVuZGluZ0V2ZW50c1tmdWxsRXZlbnROYW1lXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBlbmRpbmdFdmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBwZW5kaW5nRXZlbnRzW2ldO1xuICAgICAgICAgICAgZGlzcGF0Y2hSZWdpc3RlcmVkSGFuZGxlcnMoZS5ldmVudE9iaiwgZS5wYXJhbXMsIGUucHJlUHJvY2Vzcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVnaXN0ZXJlZEhhbmRsZXI7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGZ1bGxFdmVudE5hbWUsIHJlZ2lzdGVyZWRIYW5kbGVyKSB7XG4gICAgaWYgKF9ldmVudEhhbmRsZXJzW2Z1bGxFdmVudE5hbWVdKSB7XG4gICAgICAgIGFycmF5VXRpbHMucmVtb3ZlQnlWYWx1ZShfZXZlbnRIYW5kbGVyc1tmdWxsRXZlbnROYW1lXSwgcmVnaXN0ZXJlZEhhbmRsZXIpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChldmVudE9iajogYW55LCBwYXJhbXM/KTogbnVtYmVyIHtcbiAgICBsZXQgZGlzcGF0Y2hlZCA9IDA7XG4gICAgY29uc3QgaXNJbnRlcm5hbCA9IGV2ZW50T2JqLmlzSW50ZXJuYWw7IC8vaW50ZXJuYWwgZXZlbnQgc2hvdWxkIGJlIGRpc3BhdGNoZWQgdG8gd2lkZ2V0cy9jb21wb25lbnRzIG9ubHkuXG4gICAgY29uc3QgZXZlbnROYW1lQXJyID0gZXZlbnRPYmpbJ2V2ZW50TmFtZSddLnNwbGl0KCcsJyk7XG4gICAgYWRkTG9nKCdEaXNwYXRjaGluZyBnbG9iYWwgZXZlbnQgXCInICsgZXZlbnRPYmpbJ2V2ZW50TmFtZSddICsgJ1wiIHdpdGggdGhpcyBldmVudCBvYmplY3QnLCBldmVudE9iaik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50TmFtZUFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBldmVudE5hbWVTZWdzID0gZXZlbnROYW1lQXJyW2ldLnNwbGl0KCcuJyk7XG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IGV2ZW50TmFtZVNlZ3MubGVuZ3RoID4gMSA/IGV2ZW50TmFtZVNlZ3Muc2hpZnQoKSA6ICdzb2NpYWxpemUnO1xuICAgICAgICBjb25zdCBldmVudE5hbWUgPSBldmVudE5hbWVTZWdzWzBdO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50SGFuZGxlck5hbWUgPSBnZXRFdmVudEhhbmRsZXJOYW1lKGV2ZW50TmFtZSk7XG4gICAgICAgIGNvbnN0IGZ1bGxFdmVudE5hbWUgPSBuYW1lc3BhY2UgKyAnXycgKyBldmVudEhhbmRsZXJOYW1lO1xuICAgICAgICBjb25zdCBldmVudEhhbmRsZXJzID0gb2JqZWN0VXRpbHMuY2xvbmUoX2V2ZW50SGFuZGxlcnNbZnVsbEV2ZW50TmFtZV0pIHx8IFtdO1xuICAgICAgICBjb25zdCBiYXNlRXZlbnRPYmogPSBvYmplY3RVdGlscy5jbG9uZShldmVudE9iaik7XG4gICAgICAgIGJhc2VFdmVudE9ialsnaXNHbG9iYWwnXSA9IHRydWU7XG4gICAgICAgIGJhc2VFdmVudE9iai5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIGJhc2VFdmVudE9iai5mdWxsRXZlbnROYW1lID0gZXZlbnROYW1lQXJyW2ldO1xuICAgICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAocGFyYW1zLnNvdXJjZSkgYmFzZUV2ZW50T2JqLnNvdXJjZSA9IHBhcmFtcy5zb3VyY2U7XG4gICAgICAgICAgICBpZiAocGFyYW1zLnNvdXJjZURhdGEpIGJhc2VFdmVudE9iai5zb3VyY2VEYXRhID0gcGFyYW1zLnNvdXJjZURhdGE7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmNvbnRleHQpIGJhc2VFdmVudE9iai5jb250ZXh0ID0gcGFyYW1zLmNvbnRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBMaXN0ZW5lclR5cGVzID0gWydjb21wb25lbnQnXTtcbiAgICAgICAgaWYgKCFpc0ludGVybmFsKSBMaXN0ZW5lclR5cGVzLnB1c2goJ290aGVyJyk7XG4gICAgICAgIGZvciAobGV0IGlMaXN0ZW5lclR5cGUgPSAwOyBpTGlzdGVuZXJUeXBlIDwgTGlzdGVuZXJUeXBlcy5sZW5ndGg7IGlMaXN0ZW5lclR5cGUrKykge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJUeXBlID0gTGlzdGVuZXJUeXBlc1tpTGlzdGVuZXJUeXBlXTtcbiAgICAgICAgICAgIGZvciAobGV0IGlIYW5kbGVyID0gMDsgaUhhbmRsZXIgPCBldmVudEhhbmRsZXJzLmxlbmd0aDsgaUhhbmRsZXIrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9IYW5kbGVyOiBJRXZlbnRIYW5kbGVySW5mbyA9IGV2ZW50SGFuZGxlcnNbaUhhbmRsZXJdOyAvL3t0eXBlOiAnb3RoZXInLCBoYW5kbGVyOmZ1bmN0aW9uLCBjb250ZXh0OiBvYmplY3R9XG4gICAgICAgICAgICAgICAgaWYgKG9IYW5kbGVyLnR5cGUgPT0gbGlzdGVuZXJUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50T2JqQ29weSA9IG9iamVjdFV0aWxzLmNsb25lKGJhc2VFdmVudE9iaik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnRPYmpDb3B5Wydjb250ZXh0J10gJiYgb0hhbmRsZXIuY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmpDb3B5Wydjb250ZXh0J10gPSBvSGFuZGxlclsnY29udGV4dCddO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnRPYmpDb3B5Wydjb250ZXh0J10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBldmVudE9iakNvcHlbJ2NvbnRleHQnXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL2NvbnRleHQgaXMgbm93IHRha2VuIGZyb20gdGhlIGNhbGwgdGhhdCBkaXNwYXRjaGVkIHRoZSBldmVudFxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0ZW5lclR5cGUgIT09ICdjb21wb25lbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVTcGVjaWFsRmllbGRzKGV2ZW50T2JqQ29weSk7IC8vIE1ha2Ugc3VyZSByZXR1cm5lZCBmaWVsZHMgc3VjaCBhcyBmcmllbmRzIGFyZSByZXR1cm5lZCBhcyBjb2xsZWN0aW9ucy5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEZlYXR1cmUgIzM0NTIyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvSGFuZGxlci5wYXJhbXMgJiYgb0hhbmRsZXIucGFyYW1zWydzaWduS2V5J10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqQ29weVsnVUlEU2lnbmF0dXJlJ10gPSBldmVudE9ialsnc2lnbktleXNVSURTaWduYXR1cmUnXVtvSGFuZGxlci5wYXJhbXNbJ3NpZ25LZXknXV07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZXZlbnRPYmpDb3B5WydzaWduS2V5c1VJRFNpZ25hdHVyZSddO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9IYW5kbGVyLmhhbmRsZXIoZXZlbnRPYmpDb3B5KTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZExvZygnRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIGludm9rZSBcIicgKyBldmVudE9ialsnZXZlbnROYW1lJ10gKyAnXCIgZ2xvYmFsIGV2ZW50IGhhbmRsZXInLCBleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0ludGVybmFsKSB7XG4gICAgICAgICAgICBldmVudHMuX2Rpc3BhdGNoRnJvbU1hcHMoYmFzZUV2ZW50T2JqLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBHZW5lc2lzRXhjaGFuZ2VfR2lneWEgPSB3aW5kb3dbJ0dlbmVzaXNFeGNoYW5nZV9HaWd5YSddO1xuICAgICAgICBjb25zdCBnaWd5YV9vbW5pdHVyZV9jb25mID0gd2luZG93WydnaWd5YV9vbW5pdHVyZV9jb25mJ107XG4gICAgICAgIGNvbnN0IG15T21uaXR1cmVJbnRlZ3JhdGlvbkZ1bmMgPSB3aW5kb3dbJ215T21uaXR1cmVJbnRlZ3JhdGlvbkZ1bmMnXTtcbiAgICAgICAgaWYgKCFpc0ludGVybmFsICYmIHR5cGVvZiBHZW5lc2lzRXhjaGFuZ2VfR2lneWEgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGdpZ3lhX29tbml0dXJlX2NvbmYgIT0gJ3VuZGVmaW5lZCcgJiYgbmFtZXNwYWNlID09ICdzb2NpYWxpemUnKSB7XG4gICAgICAgICAgICBjb25zdCBnZSA9IG5ldyBHZW5lc2lzRXhjaGFuZ2VfR2lneWEoZ2lneWFfb21uaXR1cmVfY29uZik7XG4gICAgICAgICAgICBnZS5wcm9jZXNzQWN0aW9uKGJhc2VFdmVudE9iaik7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG15T21uaXR1cmVJbnRlZ3JhdGlvbkZ1bmMgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBteU9tbml0dXJlSW50ZWdyYXRpb25GdW5jKGdpZ3lhX29tbml0dXJlX2NvbmYsIGJhc2VFdmVudE9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGlzcGF0Y2hlZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoV2hlbkhhbmRsZXJBZGRlZChldmVudE9iajogT2JqZWN0LCBwYXJhbXM6IE9iamVjdCA9IHt9LCBwcmVQcm9jZXNzPzogKGV2ZW50T2JqOiBPYmplY3QsIGNhbGxiYWNrOiBGdW5jdGlvbikgPT4gdm9pZCkge1xuICAgIGNvbnN0IGV2ZW50TmFtZVNlZ3MgPSBldmVudE9ialsnZXZlbnROYW1lJ10uc3BsaXQoJy4nKTtcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBldmVudE5hbWVTZWdzLmxlbmd0aCA+IDEgPyBldmVudE5hbWVTZWdzLnNoaWZ0KCkgOiAnc29jaWFsaXplJztcbiAgICBjb25zdCBldmVudE5hbWUgPSBldmVudE5hbWVTZWdzWzBdO1xuXG4gICAgZGlzcGF0Y2hSZWdpc3RlcmVkSGFuZGxlcnMoZXZlbnRPYmosIHBhcmFtcywgcHJlUHJvY2VzcywgKGRpc3BhdGNoZWQ6IG51bWJlcikgPT4ge1xuICAgICAgICAvLyBJZiBubyBoYW5kbGVycyB3ZXJlIGRpc3BhdGNoZWQsIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhlIGhhbmRsZXIgdG8gYmUgYWRkZWRcbiAgICAgICAgaWYgKGRpc3BhdGNoZWQgPT0gMCkge1xuICAgICAgICAgICAgY29uc3QgZXZlbnRIYW5kbGVyTmFtZSA9ICdvbicgKyBldmVudE5hbWUuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBldmVudE5hbWUuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgY29uc3QgZnVsbEV2ZW50TmFtZSA9IG5hbWVzcGFjZSArICdfJyArIGV2ZW50SGFuZGxlck5hbWU7XG4gICAgICAgICAgICBpZiAoIV9wZW5kaW5nRXZlbnRzW2Z1bGxFdmVudE5hbWVdKSBfcGVuZGluZ0V2ZW50c1tmdWxsRXZlbnROYW1lXSA9IFtdO1xuICAgICAgICAgICAgX3BlbmRpbmdFdmVudHNbZnVsbEV2ZW50TmFtZV0ucHVzaCh7IGV2ZW50T2JqOiBldmVudE9iaiwgcGFyYW1zOiBwYXJhbXMsIHByZVByb2Nlc3M6IHByZVByb2Nlc3MgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BhdGNoV2hlbkhhbmRsZXJzQWRkZWQoZXZlbnROYW1lczogQXJyYXk8c3RyaW5nPiwgZXZlbnRPYmo6IE9iamVjdCwgcGFyYW1zOiBPYmplY3QgPSB7fSwgcHJlUHJvY2Vzcz86IChldmVudE9iajogT2JqZWN0LCBjYWxsYmFjazogRnVuY3Rpb24pID0+IHZvaWQpIHtcbiAgICBmb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7XG4gICAgICAgIGRpc3BhdGNoV2hlbkhhbmRsZXJBZGRlZCh7ZXZlbnROYW1lLCAuLi5ldmVudE9ian0sIHBhcmFtcywgcHJlUHJvY2Vzcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkaXNwYXRjaFJlZ2lzdGVyZWRIYW5kbGVycyhldmVudE9iajogT2JqZWN0LCBwYXJhbXM6IE9iamVjdCwgcHJlUHJvY2VzczogRnVuY3Rpb24sIGNhbGxiYWNrPzogKGRpc3BhdGNoZWQ6IG51bWJlcikgPT4gdm9pZCkge1xuICAgIGNvbnN0IGZuRGlzcGF0Y2ggPSAoZTogT2JqZWN0KSA9PiB7XG4gICAgICAgIGxldCBkaXNwYXRjaGVkID0gMDtcblxuICAgICAgICBpZiAoIWVbJ2NhbmNlbCddKSB7XG4gICAgICAgICAgICBkaXNwYXRjaGVkID0gZGlzcGF0Y2goZSwgcGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soZGlzcGF0Y2hlZCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHByZVByb2Nlc3MpIHtcbiAgICAgICAgcHJlUHJvY2VzcyhldmVudE9iaiwgZm5EaXNwYXRjaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm5EaXNwYXRjaChldmVudE9iaik7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRzRm9yT3BlcmF0aW9uKG9wZXJhdGlvbikge1xuICAgIGNvbnN0IGFjdGl2ZUxvZ2luRXZlbnRzID0gW107XG5cbiAgICBpZiAob3BlcmF0aW9uLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignbG9naW4nKSAhPSAtMSkge1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlTmFtZXNwYWNlcy5zb2NpYWxpemUpIGFjdGl2ZUxvZ2luRXZlbnRzLnB1c2goJ3NvY2lhbGl6ZS5sb2dpbicpO1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlTmFtZXNwYWNlcy5hY2NvdW50cykgYWN0aXZlTG9naW5FdmVudHMucHVzaCgnYWNjb3VudHMubG9naW4nKTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2FkZGNvbm5lY3Rpb24nKSAhPSAtMSkge1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlTmFtZXNwYWNlcy5zb2NpYWxpemUpIGFjdGl2ZUxvZ2luRXZlbnRzLnB1c2goJ3NvY2lhbGl6ZS5jb25uZWN0aW9uQWRkZWQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aXZlTG9naW5FdmVudHMuam9pbignLCcpO1xufVxuIiwiaW1wb3J0IHsgR1NFcnJvcnMgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMnO1xuaW1wb3J0IHsgbG9jYWxJbmZvIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mbyc7XG5pbXBvcnQgKiBhcyB0b2tlblN0b3JlIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvVG9rZW5TdG9yZSc7XG5pbXBvcnQgKiBhcyBsb2NhbFN0b3JhZ2VVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvbG9jYWxTdG9yYWdlJztcbmltcG9ydCAqIGFzIEpTT05VdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvSlNPTic7XG5pbXBvcnQgKiBhcyBvYmplY3RVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvb2JqZWN0JztcbmltcG9ydCAqIGFzIFVSTFV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9VUkwnO1xuXG5leHBvcnQgZW51bSBNZXNzYWdpbmdNZXRob2Qge1xuICAgIExvY2FsU3RvcmFnZUxpc3RlbmVyLFxuICAgIFBvc3RNZXNzYWdlLFxuICAgIEZsYXNoLFxufVxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQ29tcGxldGVSZWdpc3RyYXRpb24oXG4gICAgcmVzOiBPYmplY3QsXG4gICAgcGFyYW1zOiBPYmplY3QsXG4gICAgbWV0aG9kTmFtZTogc3RyaW5nLFxuICAgIGNhbGxiYWNrOiAocmVzcG9uc2UsIHN1cHByZXNzRXZlbnRzPzogYm9vbGVhbiwgcmV0cnk/OiBib29sZWFuKSA9PiB2b2lkLFxuKSB7XG4gICAgdmFyIHNjcmVlblNldDtcbiAgICB2YXIgcmV0cnk7XG4gICAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcbiAgICBsZXQgcHJvdmlkZXJTZXNzaW9uSW5mbztcbiAgICBpZiAocmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5BRlRFUl9FTUFJTF9WRVJJRklDQVRJT04pIHtcbiAgICAgICAgLy8gSGFuZGxlIGF1dG9Mb2dpbiBmcm9tIHJlZ2lzdHJhdGlvbiBsaW5rXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKCdmaW5hbGl6aW5nIHJlZ2lzdHJhdGlvbiBhZnRlciBlbWFpbCB2ZXJpZmljYXRpb24nKTtcbiAgICAgICAgcGVuZGluZyA9IHRydWU7XG4gICAgICAgIGdpZ3lhLmFjY291bnRzLmZpbmFsaXplUmVnaXN0cmF0aW9uKHtcbiAgICAgICAgICAgIHJlZ1Rva2VuOiByZXNbJ3JlZ1Rva2VuJ10sXG4gICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZSwgLy8gYmVjYXVzZSBib290c3RyYXAgbWF5IG5vdCBoYXZlIGZpbmlzaGVkIHlldFxuICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICFwYXJhbXNbJ2lnbm9yZUludGVycnVwdGlvbnMnXSAmJlxuICAgICAgICAhcGFyYW1zWydkb250SGFuZGxlU2NyZWVuU2V0J10gJiZcbiAgICAgICAgKCgocmVzWydyZWdUb2tlbiddIHx8IHBhcmFtc1sncmVnVG9rZW4nXSkgJiYgLy8gaGFzIHJlZ1Rva2VuXG4gICAgICAgICAgICAocmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5PS19XSVRIX0VSUk9SX0xPR0lOX0lERU5USUZJRVJfRVhJU1RTIHx8IC8vIHNvY2lhbExvZ2luL3NldEFjY291bnRJbmZvIHNhdmVkIHdpdGggbG9naW5JRCBleGlzdCBlcnJvclxuICAgICAgICAgICAgICAgIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuRk9SQ0VfTElOS19MT0dJTl9JREVOVElGSUVSX0VYSVNUUyB8fCAvL2ZvcmNlTGlua2luZyBsb2dpbklkIGV4aXN0c1xuICAgICAgICAgICAgICAgIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuTE9HSU5fSURFTlRJRklFUl9FWElTVFMpKSB8fCAvLyBsb2dpbklEIGV4aXN0c1xuICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkFDQ09VTlRfUEVORElOR19SRUdJU1RSQVRJT04gfHwgLy8gcGVuZGluZyByZWdpc3RyYXRpb25cbiAgICAgICAgcmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5BQ0NPVU5UX1BFTkRJTkdfVkVSSUZJQ0FUSU9OIHx8IC8vIHBlbmRpbmcgZW1haWwgdmVyaWZpY2F0aW9uXG4gICAgICAgIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuQUNDT1VOVF9NSVNTSU5HX0xPR0lOSUQgfHwgLy8gcGVuZGluZyBMb2dpbklEXG4gICAgICAgIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1RGQV9WRVJJRklDQVRJT04gfHwgLy8gcGVuZGluZyBURkEgdmVyaWZpY2F0aW9uXG4gICAgICAgIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1RGQV9SRUdJU1RSQVRJT04gfHwgLy8gcGVuZGluZyBURkEgcmVnaXN0cmF0aW9uXG4gICAgICAgIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1JFQ0VOVF9MT0dJTiB8fCAvLyBwZW5kaW5nIHJlY2VudCBsb2dpblxuICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLlBFTkRJTkdfUEFTU1dPUkRfQ0hBTkdFIHx8IC8vIHBlbmRpbmcgcGFzc3dvcmQgY2hhbmdlXG4gICAgICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLlBFTkRJTkdfQ09ERV9WRVJJRklDQVRJT04pIC8vIHBlbmRpbmcgY29kZSB2ZXJpZmljYXRpb25cbiAgICApIHtcbiAgICAgICAgaWYocmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5GT1JDRV9MSU5LX0xPR0lOX0lERU5USUZJRVJfRVhJU1RTKSB7XG4gICAgICAgICAgICBwcm92aWRlclNlc3Npb25JbmZvID0ge1xuICAgICAgICAgICAgICAgIGFjY2Vzc190b2tlbjogcmVzWydhY2Nlc3NfdG9rZW4nXSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogcmVzWydwcm92aWRlciddLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyX3VpZDogcmVzWydwcm92aWRlcl91aWQnXSxcbiAgICAgICAgICAgICAgICBpZFRva2VuOiByZXNbJ2lkX3Rva2VuJ10sXG4gICAgICAgICAgICAgICAgY29kZTpyZXNbJ2NvZGUnXSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogcmVzWydsYXN0TmFtZSddLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogcmVzWydmaXJzdE5hbWUnXSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3TW9kYWw7XG4gICAgICAgIGlmIChyZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkFDQ09VTlRfUEVORElOR19SRUNFTlRfTE9HSU4pIHtcbiAgICAgICAgICAgIHJldHJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgIG5ld01vZGFsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zWydkZWZhdWx0TW9iaWxlUmVnU2NyZWVuU2V0J10gJiYgbG9jYWxJbmZvLmlzTW9iaWxlKSB7XG4gICAgICAgICAgICBzY3JlZW5TZXQgPSBwYXJhbXNbJ2RlZmF1bHRNb2JpbGVSZWdTY3JlZW5TZXQnXTtcbiAgICAgICAgfSBlbHNlIGlmIChwYXJhbXNbJ2RlZmF1bHRSZWdTY3JlZW5TZXQnXSkge1xuICAgICAgICAgICAgc2NyZWVuU2V0ID0gcGFyYW1zWydkZWZhdWx0UmVnU2NyZWVuU2V0J107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2NyZWVuU2V0KSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBzaG93aW5nIHNjcmVlbnNldCAnJHtzY3JlZW5TZXR9JyBmb3IgZXJyb3JDb2RlICR7cmVzWydlcnJvckNvZGUnXX1gKTtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmdyb3VwKHNjcmVlblNldCk7XG5cbiAgICAgICAgZ2lneWEuYWNjb3VudHMuc2hvd1NjcmVlblNldCh7XG4gICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZSwgLy8gYmVjYXVzZSBib290c3RyYXAgbWF5IG5vdCBoYXZlIGZpbmlzaGVkIHlldFxuICAgICAgICAgICAgbmV3TW9kYWwsXG4gICAgICAgICAgICBzY3JlZW5TZXQsXG4gICAgICAgICAgICBpbml0aWFsTWV0aG9kOiBtZXRob2ROYW1lLFxuICAgICAgICAgICAgaW5pdGlhbFJlc3BvbnNlOiByZXMsXG4gICAgICAgICAgICBzdXBwcmVzc0xvZ2luRXZlbnQ6IHBhcmFtc1snc3VwcHJlc3NMb2dpbkV2ZW50J10sXG4gICAgICAgICAgICBwcm92aWRlclNlc3Npb25JbmZvLFxuICAgICAgICAgICAgb25FcnJvcjogZSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkhpZGU6IGUgPT4ge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5ncm91cEVuZChzY3JlZW5TZXQpO1xuICAgICAgICAgICAgICAgIGlmIChlLnJlYXNvbiA9PT0gJ2ZpbmlzaGVkJyAmJiBlLnVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1Y2Nlc3NSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJbmZvOiBlLnVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IGUuc291cmNlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHN1Y2Nlc3NSZXNwb25zZSwgdHJ1ZSwgcmV0cnkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICghcGVuZGluZykge1xuICAgICAgICBjYWxsYmFjayhyZXMpO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0dyb3VwSW52aXRhdGlvbihwYXJhbXM6IGFueSkge1xuICAgIGlmICghcGFyYW1zLmludml0YXRpb25JZCkge1xuICAgICAgICBnaWd5YS5ldmVudHMuZ2xvYmFsLmRpc3BhdGNoV2hlbkhhbmRsZXJzQWRkZWQoWydhY2NvdW50cy5lcnJvcicsICdzb2NpYWxpemUuZXJyb3InXSwge1xuICAgICAgICAgICAgc3RhdHVzOiAnTUlTU0lOR19SRVFVSVJFRF9QQVJBTUVURVInLFxuICAgICAgICAgICAgc3RhdHVzTWVzc2FnZTogJ01pc3NpbmcgcmVxdWlyZWQgcGFyYW1ldGVyOiBpbnZpdGF0aW9uSWQnLFxuICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5NSVNTSU5HX1JFUVVJUkVEX1BBUkFNRVRFUixcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ01pc3NpbmcgcmVxdWlyZWQgcGFyYW1ldGVyOiBpbnZpdGF0aW9uSWQnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBjb25maXJtYXRpb24gPSBhd2FpdCBjb25maXJtR3JvdXBJbnZpdGF0aW9uKHBhcmFtcy5pbnZpdGF0aW9uSWQpO1xuICAgIGlmICghY29uZmlybWF0aW9uLnRva2VuKSB7XG4gICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlcnNBZGRlZChbJ2FjY291bnRzLmVycm9yJywgJ3NvY2lhbGl6ZS5lcnJvciddLCBjb25maXJtYXRpb24pO1xuICAgIH0gZWxzZSBpZiAodG9rZW5TdG9yZS5nZXQoKSA9PT0gbnVsbCkge1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5hZGRFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgICAgIG9uTG9naW46IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgYXdhaXQgZmluYWxpemVHcm91cEludml0YXRpb24oY29uZmlybWF0aW9uLnRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNjcmVlblNldCA9IGxvY2FsSW5mby5pc01vYmlsZSA/IGdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZi5kZWZhdWx0TW9iaWxlUmVnU2NyZWVuU2V0IDogZ2lneWEudGhpc1NjcmlwdC5nbG9iYWxDb25mLmRlZmF1bHRSZWdTY3JlZW5TZXQ7XG4gICAgICAgIGdpZ3lhLmFjY291bnRzLnNob3dTY3JlZW5TZXQoe1xuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsIC8vIGJlY2F1c2UgYm9vdHN0cmFwIG1heSBub3QgaGF2ZSBmaW5pc2hlZCB5ZXRcbiAgICAgICAgICAgIHNjcmVlblNldFxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBmaW5hbGl6ZUdyb3VwSW52aXRhdGlvbihjb25maXJtYXRpb24udG9rZW4pO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1Hcm91cEludml0YXRpb24oaW52aXRhdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgZ2lneWEuYWNjb3VudHMuZ3JvdXBzLmludml0YXRpb25Db25maXJtKHtcbiAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlLCAvLyBiZWNhdXNlIGJvb3RzdHJhcCBtYXkgbm90IGhhdmUgZmluaXNoZWQgeWV0XG4gICAgICAgICAgICBpbnZpdGF0aW9uSWQsXG4gICAgICAgICAgICBjYWxsYmFjazogcmVzb2x2ZVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGZpbmFsaXplR3JvdXBJbnZpdGF0aW9uKHRva2VuOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGdpZ3lhLmFjY291bnRzLmdyb3Vwcy5maW5hbGl6ZUludml0YXRpb24oe1xuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsIC8vIGJlY2F1c2UgYm9vdHN0cmFwIG1heSBub3QgaGF2ZSBmaW5pc2hlZCB5ZXRcbiAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICAgICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlcnNBZGRlZChbJ2FjY291bnRzLmVycm9yJywgJ3NvY2lhbGl6ZS5lcnJvciddLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlcnNBZGRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgIFsnYWNjb3VudHMuZmluYWxpemVHcm91cEludml0YXRpb24nLCAnc29jaWFsaXplLmZpbmFsaXplR3JvdXBJbnZpdGF0aW9uJ10sIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0R2lneWFTZXR0aW5ncyhncm91cDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBnaWd5YVNldHRpbmdzID0gbG9jYWxTdG9yYWdlVXRpbHMuZ2V0T2JqZWN0KCdnaWd5YVNldHRpbmdzJyk7XG4gICAgcmV0dXJuIEpTT05VdGlscy5zZXJpYWxpemUoZ2lneWFTZXR0aW5nc1tncm91cF0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldEdpZ3lhU2V0dGluZ3MoZ3JvdXA6IHN0cmluZywgc2V0dGluZ3M6IE9iamVjdCk6IHZvaWQge1xuICAgIGNvbnN0IGdpZ3lhU2V0dGluZ3MgPSBsb2NhbFN0b3JhZ2VVdGlscy5nZXRPYmplY3QoJ2dpZ3lhU2V0dGluZ3MnLCB7IFtncm91cF06IHt9IH0pO1xuICAgIGZvciAodmFyIHAgaW4gc2V0dGluZ3MpIHtcbiAgICAgICAgZ2lneWFTZXR0aW5nc1tncm91cF1bcF0gPSBzZXR0aW5nc1twXTtcbiAgICB9XG4gICAgbG9jYWxTdG9yYWdlVXRpbHMuc2V0SXRlbSgnZ2lneWFTZXR0aW5ncycsIEpTT05VdGlscy5zZXJpYWxpemUoZ2lneWFTZXR0aW5ncykpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlbEdpZ3lhU2V0dGluZ3MoZ3JvdXA6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghZ3JvdXApIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlVXRpbHMucmVtb3ZlSXRlbSgnZ2lneWFTZXR0aW5ncycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGdpZ3lhU2V0dGluZ3MgPSBsb2NhbFN0b3JhZ2VVdGlscy5nZXRPYmplY3QoJ2dpZ3lhU2V0dGluZ3MnKTtcbiAgICAgICAgaWYgKGdpZ3lhU2V0dGluZ3MpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBnaWd5YVNldHRpbmdzW2dyb3VwXTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZVV0aWxzLnNldEl0ZW0oJ2dpZ3lhU2V0dGluZ3MnLCBKU09OVXRpbHMuc2VyaWFsaXplKGdpZ3lhU2V0dGluZ3MpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVTcGVjaWFsRmllbGRzKG8pIHtcbiAgICB2YXIgY29sbGVjdGlvbiA9IGdpZ3lhLnNvY2lhbGl6ZS5Db2xsZWN0aW9uO1xuICAgIHZhciB0b1R5cGVkID0gZnVuY3Rpb24oYXJyLCBjdG9yKSB7XG4gICAgICAgIHZhciBvYXJyID0gW107XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGVsID0gYXJyW2ldO1xuICAgICAgICB3aGlsZSAoZWwpIHtcbiAgICAgICAgICAgIG9hcnIucHVzaChuZXcgY3RvcihlbCkpO1xuICAgICAgICAgICAgaWYgKG9hcnJbaV0uaWRlbnRpdGllcykge1xuICAgICAgICAgICAgICAgIGNvbnZlcnRJZGVudGl0aWVzQXJyYXlUb09iamVjdChvYXJyW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsID0gYXJyWysraV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9hcnI7XG4gICAgfTtcblxuICAgIGlmIChvLnBob3Rvcykgby5waG90b3MgPSBuZXcgY29sbGVjdGlvbihvLnBob3RvcywgJ3Bob3RvSUQnKTtcbiAgICBpZiAoby5hbGJ1bXMpIG8uYWxidW1zID0gbmV3IGNvbGxlY3Rpb24oby5hbGJ1bXMsICdhbGJ1bUlEJyk7XG4gICAgaWYgKG8uY29udGFjdHMpIG8uY29udGFjdHMgPSBuZXcgY29sbGVjdGlvbih0b1R5cGVkKG8uY29udGFjdHMsIGdpZ3lhLnNvY2lhbGl6ZS5Db250YWN0KSwgJ2VtYWlsJyk7XG4gICAgaWYgKG8uZnJpZW5kKSBvLmZyaWVuZCA9IG5ldyBjb2xsZWN0aW9uKHRvVHlwZWQoby5mcmllbmQsIGdpZ3lhLnNvY2lhbGl6ZS5GcmllbmQpLCAnVUlEJyk7XG5cbiAgICBpZiAoby51c2VyKSBvLnVzZXIgPSBuZXcgZ2lneWEuc29jaWFsaXplLlVzZXIoby51c2VyKTtcblxuICAgIGlmIChvLmZyaWVuZHMgJiYgby5mcmllbmRzIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdmFyIGFyVUlEcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG8uZnJpZW5kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJVSURzLnB1c2goby5mcmllbmRzW2ldLlVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgby5VSURzID0gYXJVSURzLmpvaW4oJywnKTtcblxuICAgICAgICBvLmZyaWVuZHMgPSBuZXcgY29sbGVjdGlvbih0b1R5cGVkKG8uZnJpZW5kcywgZ2lneWEuc29jaWFsaXplLkZyaWVuZCksICdVSUQnKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY29udmVydElkZW50aXRpZXNBcnJheVRvT2JqZWN0KG8pIHtcbiAgICBpZiAoby5pZGVudGl0aWVzID09IG51bGwpIHtcbiAgICAgICAgby5pZGVudGl0aWVzID0ge307XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWRlbnRpdGllcy5jb25zdHJ1Y3RvciAhPSBBcnJheSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpZGVudGl0aWVzQXJyYXkgPSBvLmlkZW50aXRpZXM7XG4gICAgby5pZGVudGl0aWVzID0ge307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpZGVudGl0aWVzQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgby5pZGVudGl0aWVzW2lkZW50aXRpZXNBcnJheVtpXS5wcm92aWRlcl0gPSBuZXcgZ2lneWEuc29jaWFsaXplLklkZW50aXR5KGlkZW50aXRpZXNBcnJheVtpXSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZFVzZXJJbmZvVG9FdmVudChyZXNwb25zZTogT2JqZWN0LCB0YXJnZXRPYmplY3Q6IE9iamVjdCwgYWRkTG9naW5Qcm9wZXJ0aWVzPzogYm9vbGVhbiwgdXNlQmFzZVBob3RvVVJMPzogc3RyaW5nKSB7XG4gICAgdmFyIG9Vc2VyID0gcmVzcG9uc2VbJ3VzZXInXSB8fCByZXNwb25zZVsndXNlckluZm8nXTtcbiAgICBpZiAodGFyZ2V0T2JqZWN0ID09IG51bGwpIHRhcmdldE9iamVjdCA9IHt9O1xuICAgIGlmIChvVXNlciAhPSBudWxsKSB7XG4gICAgICAgIHRhcmdldE9iamVjdFsndXNlciddID0gb2JqZWN0VXRpbHMuY2xvbmUob1VzZXIpO1xuICAgICAgICBpZiAocmVzcG9uc2VbJ2lzTG9nZ2VkSW4nXSAhPSBudWxsKSB0YXJnZXRPYmplY3RbJ3VzZXInXVsnaXNMb2dnZWRJbiddID0gcmVzcG9uc2VbJ2lzTG9nZ2VkSW4nXTtcbiAgICAgICAgaWYgKHJlc3BvbnNlWydpc1NpdGVVSUQnXSAhPSBudWxsKSB0YXJnZXRPYmplY3RbJ3VzZXInXVsnaXNTaXRlVUlEJ10gPSByZXNwb25zZVsnaXNTaXRlVUlEJ107XG4gICAgICAgIGlmIChyZXNwb25zZVsnaVJhbmsnXSAhPSBudWxsKSB0YXJnZXRPYmplY3RbJ3VzZXInXVsnaVJhbmsnXSA9IHJlc3BvbnNlWydpUmFuayddO1xuICAgIH1cblxuICAgIGlmIChhZGRMb2dpblByb3BlcnRpZXMpIHtcbiAgICAgICAgb2JqZWN0VXRpbHMuZXh0cmFjdFByb3BlcnRpZXMocmVzcG9uc2UsIHRhcmdldE9iamVjdCwgJ3NpZ25hdHVyZXxVSURTaWd8dGltZXN0YW1wfFVJRFNpZ25hdHVyZXxzaWduYXR1cmVUaW1lc3RhbXB8VUlEfHNpZ25LZXlzVUlEU2lnbmF0dXJlfGRhdGFDZW50ZXJ8aWRfdG9rZW58Z3JvdXBzJyk7XG4gICAgICAgIGlmICh0YXJnZXRPYmplY3RbJ3VzZXInXSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0YXJnZXRPYmplY3RbJ1VJRCddID0gb1VzZXIuVUlEO1xuICAgICAgICAgICAgdGFyZ2V0T2JqZWN0Wydpc1NpdGVVSUQnXSA9IG9Vc2VyLmlzU2l0ZVVJRDtcbiAgICAgICAgICAgIC8vIGlzU2l0ZVVJRCBpcyB0ZW1wb3JhcnkgZm9yIGh0dHBzOi8vZ2lneWEubXkuc2FsZXNmb3JjZS5jb20vNTAwNDAwMDAwMFQzcWNaXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldE9iamVjdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZW5kRW1haWxOYXRpdmUocGFyYW1zOiBPYmplY3QpIHtcbiAgICB2YXIgdXNlckFjdGlvbiA9IHBhcmFtc1sndXNlckFjdGlvbiddIHx8IHt9O1xuICAgIHZhciBzdWJqZWN0ID0gdXNlckFjdGlvblsndGl0bGUnXSB8fCAnJztcbiAgICB2YXIgYm9keSA9IHVzZXJBY3Rpb25bJ2xpbmtCYWNrJ10gfHwgJyc7XG4gICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9ICdtYWlsdG86P3RvPSZzdWJqZWN0PScgKyBVUkxVdGlscy5VUkxFbmNvZGUoc3ViamVjdCkgKyAnJmJvZHk9JyArIFVSTFV0aWxzLlVSTEVuY29kZShib2R5KTtcbiAgICBnaWd5YS5zb2NpYWxpemUuc2VuZEVtYWlsKHBhcmFtcywgeyBkb250U2VuZEVtYWlsOiB0cnVlIH0pOyAvLyBUbyByZXBvcnQgdGhhdCBzZW5kIHdpdGhvdXQgc2VuZGluZyBpdFxufVxuIiwiaW1wb3J0ICogYXMgb2JqZWN0VXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL29iamVjdCc7XG5pbXBvcnQgKiBhcyBKU09OVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL0pTT04nO1xuaW1wb3J0ICogYXMgYXJyYXlVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvYXJyYXknO1xuaW1wb3J0ICogYXMgc2NyaXB0VXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3NjcmlwdCc7XG5pbXBvcnQgeyBnZXRDZG5SZXNvdXJjZSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9jZG4nO1xuaW1wb3J0ICogYXMgZnVuY3Rpb25zVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2Z1bmN0aW9ucyc7XG5pbXBvcnQgY29va2llVXRpbHMgZnJvbSBcIi4vVXRpbHMvY29va2llXCI7XG5leHBvcnQgdmFyIENPTlNPTEVfTE9HX0xFVkVMUzogc3RyaW5nW10gPSBbJ2RlYnVnJywgJ2luZm8nLCAnbG9nJywgJ3dhcm4nLCAnZXJyb3InXTtcbmV4cG9ydCB2YXIgc2VsZWN0ZWRDb25zb2xlTG9nTGV2ZWxzOiBzdHJpbmdbXSA9IFtdO1xuZXhwb3J0IHZhciBfbG9nID0gW107XG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgIGNvb2tpZVV0aWxzLnNldCgnX2dpZ19kYmdDb25zb2xlX2xvZycsICcxJywgbnVsbCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICBjb29raWVVdGlscy5zZXQoJ19naWdfZGJnQ29uc29sZV9sb2cnLCAnMCcsIG51bGwpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9pc0VuYWJsZWQoKSB7XG4gICAgdmFyIGlzTWFudWFsbHlFbmFibGVkID0gIWdpZ3lhLmxvY2FsSW5mby5pc05hdGl2ZU1vYmlsZUFwcCAmJiBjb29raWVVdGlscy5nZXQoJ19naWdfZGJnQ29uc29sZV9sb2cnKTtcbiAgICBpZiAodHlwZW9mIGlzTWFudWFsbHlFbmFibGVkICE9PSAndW5kZWZpbmVkJyAmJiBpc01hbnVhbGx5RW5hYmxlZCAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBpc01hbnVhbGx5RW5hYmxlZCA9PT0gJzEnO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3RlZENvbnNvbGVMb2dMZXZlbHMubGVuZ3RoID4gMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRMb2codGl0bGU6IHN0cmluZywgb2JqOiBhbnksIHdyaXRlVG9Db25zb2xlID0gZmFsc2UpIHtcbiAgICBpZiAoX2lzRW5hYmxlZCgpIHx8IHdyaXRlVG9Db25zb2xlKSB7XG4gICAgICAgIHZhciBzTG9nID0gdGl0bGU7XG5cbiAgICAgICAgb2JqID0gb2JqZWN0VXRpbHMuY2xvbmUob2JqLCB0cnVlLCBmYWxzZSwgNCwgbnVsbCwgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKG9iaiAhPSBudWxsKSBzTG9nICs9ICc6JyArICh0eXBlb2Ygb2JqID09ICdvYmplY3QnID8gJ1xcbicgOiAnJykgKyBKU09OVXRpbHMuc2VyaWFsaXplKG9iaiwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKHdyaXRlVG9Db25zb2xlICYmICh0eXBlb2YgY29uc29sZSA9PSAnb2JqZWN0JyAmJiBjb25zb2xlLmxvZykpIGNvbnNvbGUubG9nKHNMb2cpO1xuXG4gICAgICAgIGlmIChfaXNFbmFibGVkKCkpIHtcbiAgICAgICAgICAgIF9sb2cucHVzaChzTG9nKTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2lneWFfbG9nJykgIT0gbnVsbCAmJiBzaG93KSBzaG93KCk7XG5cbiAgICAgICAgICAgIHZhciBsb2dUeXBlOiBzdHJpbmc7XG4gICAgICAgICAgICBpZiAoYXJyYXlVdGlscy5pbmRleE9mKENPTlNPTEVfTE9HX0xFVkVMUywgdGl0bGUpICE9IC0xKSBsb2dUeXBlID0gdGl0bGU7XG4gICAgICAgICAgICBlbHNlIGxvZ1R5cGUgPSAnbG9nJztcblxuICAgICAgICAgICAgZ2lneWEuXy5hcGlBZGFwdGVyLm9uSlNMb2cobG9nVHlwZSwgc0xvZyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbG9nQ2FsbChuYW1lLCBwYXJhbXMsIGxhc3RTb3VyY2U/KSB7XG4gICAgaWYgKCFsYXN0U291cmNlKSBsYXN0U291cmNlID0gcGFyYW1zLmxhc3RTb3VyY2U7XG4gICAgYWRkTG9nKFxuICAgICAgICAnQ2FsbGluZyAnICtcbiAgICAgICAgICAgIG5hbWUgK1xuICAgICAgICAgICAgKGxhc3RTb3VyY2UgJiYgbGFzdFNvdXJjZSAhPSBuYW1lID8gJyBmb3IgJyArIGxhc3RTb3VyY2UgOiAnJykgK1xuICAgICAgICAgICAgKHBhcmFtcy5zb3VyY2UgJiYgbGFzdFNvdXJjZSAhPSBwYXJhbXMuc291cmNlID8gJyBpbml0aWF0ZWQgZnJvbSAnICsgcGFyYW1zLnNvdXJjZSA6ICcnKSArXG4gICAgICAgICAgICAnIHdpdGggdGhlc2UgcGFyYW1zJyxcbiAgICAgICAgcGFyYW1zLFxuICAgICk7XG59XG5leHBvcnQgZnVuY3Rpb24gZGVidWcoKSB7XG4gICAgc2NyaXB0VXRpbHMubG9hZChcbiAgICAgICAgZ2V0Q2RuUmVzb3VyY2UoJy9qcy9naWd5YS5zZXJ2aWNlcy5zb2NpYWxpemUucGx1Z2lucy5sb2cubWluLmpzJyksXG4gICAgICAgIG51bGwsXG4gICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2hvd0NvbmZpZygpO1xuICAgICAgICB9LFxuICAgICAgICB0cnVlLFxuICAgICk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2hvd0xvZygpIHtcbiAgICBzY3JpcHRVdGlscy5sb2FkKFxuICAgICAgICBnZXRDZG5SZXNvdXJjZSgnL2pzL2dpZ3lhLnNlcnZpY2VzLnNvY2lhbGl6ZS5wbHVnaW5zLmxvZy5taW4uanMnKSxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzaG93KCk7XG4gICAgICAgIH0sXG4gICAgICAgIHRydWUsXG4gICAgKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG93KCkge31cbmV4cG9ydCBmdW5jdGlvbiBzaG93Q29uZmlnKCkge31cbmZ1bmN0aW9uc1V0aWxzLmNyZWF0ZUFsaWFzKCdnaWd5YS5kZWJ1ZycsIGRlYnVnKTtcbiIsIi8vIExvY2FsIGVudmlyb25tZW50IGluZm8gKGJyb3dzZXIsIGNhcGFiaWxpdGllcywgaG9zdGluZyBkb21haW4pXG5cbmRlY2xhcmUgY29uc3QgQWN0aXZlWE9iamVjdDogYW55O1xuXG52YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuZXhwb3J0IHZhciBsb2NhbEluZm8gPSB7XG4gICAgYmFzZURvbWFpbjogJycsIC8vIGNhbGN1bGF0ZWQgbGF0ZXIgb25cbiAgICBpc0Jyb3dzZXJTdXBwb3J0c0ZpbGVzQVBJOiAoKCkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIEZpbGVSZWFkZXIgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIEZpbGVSZWFkZXIgPT09ICdvYmplY3QnO1xuICAgIH0pKCksXG4gICAgaW5pdFRpbWU6IG5ldyBEYXRlKCksXG4gICAgdmVyc2lvbjogMCwgLy9UT0RPXG4gICAgcGFnZURvbWFpbjogZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWUsXG4gICAgcHJvdG9jb2w6IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID09ICdodHRwOicgPyAnaHR0cCcgOiAnaHR0cHMnLFxuICAgIHVzZXJBZ2VudDogdXNlckFnZW50LFxuICAgIGlzV2luOiB1c2VyQWdlbnQuaW5kZXhPZignd2luJykgIT0gLTEsXG4gICAgaXNJRTogdXNlckFnZW50LmluZGV4T2YoJ21zaWUnKSAhPSAtMSB8fCAodXNlckFnZW50LmluZGV4T2YoJ21vemlsbGEnKSAhPSAtMSAmJiB1c2VyQWdlbnQuaW5kZXhPZigndHJpZGVudCcpICE9IC0xKSxcbiAgICBpc0lFNjogdXNlckFnZW50LmluZGV4T2YoJ21zaWUgNi4nKSAhPSAtMSxcbiAgICBpc0lFNzogdXNlckFnZW50LmluZGV4T2YoJ21zaWUgNy4nKSAhPSAtMSxcbiAgICBpc0lFODogdXNlckFnZW50LmluZGV4T2YoJ21zaWUgOC4nKSAhPSAtMSxcbiAgICBpc0lFOTogdXNlckFnZW50LmluZGV4T2YoJ21zaWUgOS4nKSAhPSAtMSxcbiAgICBpc0lFMTA6IHVzZXJBZ2VudC5pbmRleE9mKCdtc2llIDEwLicpICE9IC0xLFxuICAgIGlzSUUxMTogdXNlckFnZW50LmluZGV4T2YoJ21vemlsbGEnKSAhPSAtMSAmJiB1c2VyQWdlbnQuaW5kZXhPZigndHJpZGVudC83LjAnKSAhPSAtMSxcbiAgICBpc0VkZ2VMZWdhY3k6IHVzZXJBZ2VudC5pbmRleE9mKCdlZGdlJykgIT0gLTEsXG4gICAgaXNFZGdlOiBSZWdFeHAoL2VkZyg/IWUpLykudGVzdCh1c2VyQWdlbnQpLFxuICAgIGlzSU9TOiB1c2VyQWdlbnQuaW5kZXhPZignaXBob25lJykgIT0gLTEgfHwgdXNlckFnZW50LmluZGV4T2YoJ2lwYWQnKSAhPSAtMSB8fCB1c2VyQWdlbnQuaW5kZXhPZignaXBvZCcpICE9IC0xLFxuICAgIGlzU2FmYXJpNTM0OiB1c2VyQWdlbnQuaW5kZXhPZignc2FmYXJpLzUzNCcpICE9IC0xLFxuICAgIGlzV2VDaGF0OiB1c2VyQWdlbnQuaW5kZXhPZignbWljcm9tZXNzZW5nZXInKSAhPSAtMSxcbiAgICBpb3NWZXJzaW9uOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignYXBwbGV3ZWJraXQnKSAhPSAtMSAmJiB1c2VyQWdlbnQuaW5kZXhPZigndmVyc2lvbi8nKSAhPSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHVzZXJBZ2VudC5zcGxpdCgndmVyc2lvbi8nKVsxXS5zcGxpdCgnICcpWzBdKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiAwO1xuICAgIH0pKCksXG4gICAgaXNBbmRyb2lkOiB1c2VyQWdlbnQuaW5kZXhPZignYW5kcm9pZCcpICE9IC0xLFxuICAgIGlzQW5kcm9pZEJyb3dzZXI6ICh1c2VyQWdlbnQgPT4ge1xuICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ21vemlsbGEvNS4wJykgPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignYW5kcm9pZCA0JykgPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignYXBwbGV3ZWJraXQnKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ3dpbmRvd3MgcGhvbmUnKSAhPT0gLTEpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAvLyBTcGVjaWFsIHVzZXIgYWdlbnRzIGZvdW5kIHNvIGZhciB0aGF0IHZpb2xhdGUgdGhlIGV4aXN0YW5jZSBvZiBjaHJvbWUgcnVsZVxuICAgICAgICAvLyBCdWcgMzgzNjcgQW5kcm9pZCBCcm93c2VyOiBNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNC4yLjI7IGVuLXVzOyBTQU1TVU5HIEdULUk5NTAwIEJ1aWxkL0pEUTM5KSBBcHBsZVdlYktpdC81MzUuMTkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzEuMCBDaHJvbWUvMTguMC4xMDI1LjMwOCBNb2JpbGUgU2FmYXJpLzUzNS4xOVxuICAgICAgICAvLyBCdWcgNDAyMDkgQ2hyb21lIEJyb3dzZXI6IE1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA0LjIuMjsgU0FNU1VORyBTR1QtSTc0NyBCdWlsZC9LT1Q0OUgpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuOTMgTW9iaWxlIFNhZmFyaS81MzcuMzZcbiAgICAgICAgLy8gV2luZG93cyBQaG9uZSBCcm93c2VyOiBNb3ppbGxhLzUuMCAoTW9iaWxlOyBXaW5kb3dzIFBob25lIDguMTsgQW5kcm9pZCA0LjA7IEFSTTsgVHJpZGVudC83LjA7IFRvdWNoOyBydjoxMS4wOyBJRU1vYmlsZS8xMS4wOyBOT0tJQTsgTHVtaWEgOTIwKSBsaWtlIGlQaG9uZSBPUyA3XzBfMyBNYWMgT1MgWCBBcHBsZVdlYktpdC81MzcgKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUgU2FmYXJpLzUzN1xuICAgICAgICAvLyBDaHJvbWUgQnJvd3NlcjogTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDQuMi4yOyBlbi1nYjsgU0FNU1VORyBHVC1JOTUwMCBCdWlsZC9LT1Q0OUgpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vMS41IENocm9tZS8yOC4wLjE1MDAuOTQgTW9iaWxlIFNhZmFyaS81MzcuMzZcblxuICAgICAgICB2YXIgY2hyb21lSW5mbyA9IC9jaHJvbWVcXC8oXFxkKykvLmV4ZWModXNlckFnZW50KTtcblxuICAgICAgICBpZiAoIWNocm9tZUluZm8pIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHZhciBjaHJvbWVWZXJzaW9uID0gcGFyc2VJbnQoY2hyb21lSW5mb1sxXSk7XG5cbiAgICAgICAgcmV0dXJuIGNocm9tZVZlcnNpb24gPCAyMDtcbiAgICB9KSh1c2VyQWdlbnQpLFxuICAgIGN1cnJlbnRCcm93c2VyOiAnJyxcbiAgICBhbmRyb2lkVmVyc2lvbjogKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ2FuZHJvaWQnKSAhPSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodXNlckFnZW50LnNsaWNlKHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgKyA4KSk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gMDtcbiAgICB9KSgpLFxuICAgIGlzQ2hyb21lOiB1c2VyQWdlbnQuaW5kZXhPZignY2hyb21lJykgIT0gLTEgJiYgdXNlckFnZW50LmluZGV4T2YoJ2VkZycpID09IC0xLCAvLyBlZGdlIGJyb3dzZXIgYWxzbyB1c2VzIENocm9tZSBpbiBpdHMgVUEgc3RyaW5nLlxuICAgIGlzR29vZ2xlQm90OiB1c2VyQWdlbnQuaW5kZXhPZignZ29vZ2xlYm90JykgIT0gLTEsXG4gICAgaXNGRjogdXNlckFnZW50LmluZGV4T2YoJ2ZpcmVmb3gnKSAhPSAtMSxcbiAgICBpc09wZXJhOiB1c2VyQWdlbnQuaW5kZXhPZignb3BlcmEnKSAhPSAtMSxcbiAgICBpc1NhZmFyaTpcbiAgICAgICAgbmF2aWdhdG9yLmFwcFZlcnNpb24gJiZcbiAgICAgICAgbmF2aWdhdG9yLmFwcFZlcnNpb24udG9Mb3dlckNhc2UoKS5pbmRleE9mKCdzYWZhcmknKSAhPSAtMSAmJlxuICAgICAgICBuYXZpZ2F0b3IuYXBwVmVyc2lvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2Nocm9tZScpID09IC0xICYmXG4gICAgICAgIHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgPT0gLTEsXG4gICAgaXNJT1NXZWJWaWV3OiAvKGlQaG9uZXxpUG9kfGlQYWQpLipBcHBsZVdlYktpdCg/IS4qU2FmYXJpKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXG4gICAgaXNJT1NDaHJvbWU6IHVzZXJBZ2VudC5pbmRleE9mKCdjcmlvcycpICE9IC0xLFxuICAgIGlzTUFDOiBuYXZpZ2F0b3IuYXBwVmVyc2lvbiAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ21hYycpICE9IC0xLFxuICAgIGlzV2luZG93c1Bob25lOiB1c2VyQWdlbnQuaW5kZXhPZignd2luZG93cyBwaG9uZScpICE9IC0xLFxuICAgIGlzRmFjZWJvb2tCcm93c2VyOiB1c2VyQWdlbnQuaW5kZXhPZignZmJhbicpICE9IC0xIHx8IHVzZXJBZ2VudC5pbmRleE9mKCdmYmF2JykgIT0gLTEsXG4gICAgc3VwcG9ydHNQb3N0TWVzc2FnZTogd2luZG93LnBvc3RNZXNzYWdlICE9IG51bGwgJiYgKHVzZXJBZ2VudC5pbmRleE9mKCdtc2llJykgPT0gLTEgfHwgdXNlckFnZW50LmluZGV4T2YoJ2llbW9iaWxlJykgIT0gLTEpLFxuICAgIHN1cHBvcnRzTG9jYWxTdG9yYWdlOiBmYWxzZSxcbiAgICBzdXBwb3J0c1Nlc3Npb25TdG9yYWdlOiBmYWxzZSxcbiAgICBzdXBwb3J0c0ZsYXNoOiAoKCkgPT4ge1xuICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzk5ODI0NS9ob3ctY2FuLWktZGV0ZWN0LWlmLWZsYXNoLWlzLWluc3RhbGxlZC1hbmQtaWYtbm90LWRpc3BsYXktYS1oaWRkZW4tZGl2LXRoYXQtaW5mXG4gICAgICAgIGxldCBzdXBwb3J0c0ZsYXNoID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1pbWVUeXBlcyAmJlxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5taW1lVHlwZXNbJ2FwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoJ10gIT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1pbWVUeXBlc1snYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnXS5lbmFibGVkUGx1Z2luXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0c0ZsYXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm8gPSBuZXcgQWN0aXZlWE9iamVjdCgnU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2gnKTtcbiAgICAgICAgICAgICAgICBpZiAoZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydHNGbGFzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICByZXR1cm4gc3VwcG9ydHNGbGFzaDtcbiAgICB9KSgpLFxuICAgIHF1aXJrc01vZGU6IGRvY3VtZW50LmNvbXBhdE1vZGUgPT0gJ0JhY2tDb21wYXQnICYmIHVzZXJBZ2VudC5pbmRleE9mKCdtc2llJykgIT0gLTEsXG4gICAgYmFja0NvbXBhdDogZG9jdW1lbnQuY29tcGF0TW9kZSA9PSAnQmFja0NvbXBhdCcsXG4gICAgLy8gVE9ETzogQWRkIGlzVGFibGV0IGZ1bmN0aW9uIGZvciBkZXZpY2VzIG5vbi1Nb2JpbGVcbiAgICBpc01vYmlsZTogKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbW9iaWxlQ2xpZW50cyA9IFtcbiAgICAgICAgICAgICdpcGhvbmUnLFxuICAgICAgICAgICAgJ2lwb2QnLFxuICAgICAgICAgICAgJ2FuZHJvaWQnLFxuICAgICAgICAgICAgJ21pZHAnLFxuICAgICAgICAgICAgJzI0MHgzMjAnLFxuICAgICAgICAgICAgJ2JsYWNrYmVycnknLFxuICAgICAgICAgICAgJ25ldGZyb250JyxcbiAgICAgICAgICAgICdub2tpYScsXG4gICAgICAgICAgICAncGFuYXNvbmljJyxcbiAgICAgICAgICAgICdwb3J0YWxtbW0nLFxuICAgICAgICAgICAgJ3NoYXJwJyxcbiAgICAgICAgICAgICdzaWUtJyxcbiAgICAgICAgICAgICdzb255ZXJpY3Nzb24nLFxuICAgICAgICAgICAgJ3N5bWJpYW4nLFxuICAgICAgICAgICAgJ3dpbmRvd3MgY2UnLFxuICAgICAgICAgICAgJ2JlbnEnLFxuICAgICAgICAgICAgJ21kYScsXG4gICAgICAgICAgICAnbW90LScsXG4gICAgICAgICAgICAnb3BlcmEgbWluaScsXG4gICAgICAgICAgICAncGhpbGlwcycsXG4gICAgICAgICAgICAncG9ja2V0IHBjJyxcbiAgICAgICAgICAgICdzYWdlbScsXG4gICAgICAgICAgICAnc2Ftc3VuZycsXG4gICAgICAgICAgICAnaHRjJyxcbiAgICAgICAgXTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBtb2JpbGVDbGllbnRzKSB7XG4gICAgICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YobW9iaWxlQ2xpZW50c1tpXSkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkoKSxcbiAgICBpc01vYmlsZUFwcDogKCgpID0+IHtcbiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSlcbiAgICAgICAgICAgIC8vIGZvciBvbGQgSUVcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB2YXIgbWV0YVRhZ3M6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKSBhcyBhbnk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhVGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKG1ldGFUYWdzW2ldLmdldEF0dHJpYnV0ZSgnbmFtZScpID09ICd2aWV3cG9ydCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IG1ldGFUYWdzW2ldLmdldEF0dHJpYnV0ZSgnY29udGVudCcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC5pbmRleE9mKCd3aWR0aD1kZXZpY2Utd2lkdGgnKSAhPT0gLTEpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pKCksXG4gICAgaXNOYXRpdmVNb2JpbGVBcHA6IGZhbHNlLCAvLyB3aWxsIGNoYW5nZSBpZiBtb2JpbGUgYWRhcHRlciB3aWxsIGxvYWQgW2luIGl0cyAnaW5pdCcgbWV0aG9kXS5cbiAgICBpc1RvdWNoOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpXG4gICAgICAgICAgICAvLyB3b3JrcyBvbiBtb3N0IGJyb3dzZXJzXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICBpZiAoJ29ubXNnZXN0dXJlY2hhbmdlJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICAgIC8vIHdvcmtzIG9uIGllMTBcbiAgICAgICAgICAgIC8vIFRyeSB0byBkZXRlcm1pbmUgaWYgSUUgaXMgb3BlbiBpbiBtZXRybyBtb2RlLiBNZXRybyBkb2Vzbid0IGFsbG93IGFjdGl2ZVgsIHRoYXQncyB0aGUgYmVzdCB0ZXN0IGF2YWlsYWJsZSBhcyBvZiBJRTExLlxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXcgQWN0aXZlWE9iamVjdCgnaHRtbGZpbGUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkoKSxcbiAgICBpc09uTGluZTogKCkgPT4gbmF2aWdhdG9yLm9uTGluZSxcbiAgICBtZXNzYWdpbmdNZXRob2Q6IDFcbn07XG5jb25zdCBpc1N0b3JhZ2VFbmFibGVkID0gKHN0b3JhZ2VOYW1lOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gd2luZG93W3N0b3JhZ2VOYW1lXTtcbiAgICAgICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0ZXN0TmFtZSA9ICdfZ2lnX2xvY2FsU3RvcmFnZV90ZXN0JztcbiAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ2p1c3QgY2hlY2tpbmcgZm9yIGxvY2FsU3RvcmFnZSc7XG4gICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh0ZXN0TmFtZSwgdGVzdFZhbHVlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc3RvcmFnZS5nZXRJdGVtKHRlc3ROYW1lKSA9PT0gdGVzdFZhbHVlO1xuICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0odGVzdE5hbWUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIC8vIFJlYXNvbnM6XG4gICAgICAgIC8vIC0gSW5zaWRlIDNyZCBwYXJ0eSBBUEkgcHJveHkgaUZyYW1lLlxuICAgICAgICAvLyAtIFNhZmFyaSBpbiBpbmNvZ25pdG8gbW9kZSB3aWxsIGVycm9yIHdpdGggXCJxdW90YSBleGNlZWRlZFwiLlxuICAgICAgICAvLyAtIENocm9tZSB3aXRoIDNyZCBwYXJ0eSBjb29raWVzIGRpc2FibGVkIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgeW91IGFjY2VzcyB0aGUgd2luZG93LmxvY2FsU3RvcmFnZSBvYmplY3QgaW4gQU5ZIHdheS5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5sb2NhbEluZm8uc3VwcG9ydHNMb2NhbFN0b3JhZ2UgPSBpc1N0b3JhZ2VFbmFibGVkKCdsb2NhbFN0b3JhZ2UnKTtcbmxvY2FsSW5mby5zdXBwb3J0c1Nlc3Npb25TdG9yYWdlID0gaXNTdG9yYWdlRW5hYmxlZCgnc2Vzc2lvblN0b3JhZ2UnKTtcbmxvY2FsSW5mby5pc01BQyA9IGxvY2FsSW5mby5pc01BQyAmJiAhbG9jYWxJbmZvLmlzSU9TO1xudmFyIG9zID0gbG9jYWxJbmZvLmlzV2luXG4gICAgPyAnd2luZG93cydcbiAgICA6IGxvY2FsSW5mby5pc1dpbmRvd3NQaG9uZVxuICAgICAgICA/ICd3aW5waG9uZSdcbiAgICAgICAgOiBsb2NhbEluZm8uaXNJT1NcbiAgICAgICAgICAgID8gJ2lvcy12JyArIGxvY2FsSW5mby5pb3NWZXJzaW9uXG4gICAgICAgICAgICA6IGxvY2FsSW5mby5pc01BQ1xuICAgICAgICAgICAgICAgID8gJ21hYydcbiAgICAgICAgICAgICAgICA6IGxvY2FsSW5mby5pc0FuZHJvaWRcbiAgICAgICAgICAgICAgICAgICAgPyAnYW5kcm9pZCdcbiAgICAgICAgICAgICAgICAgICAgOiAnJztcbmlmIChvcykgb3MgKz0gJyAnO1xudmFyIGJyb3dzZXIgPSBsb2NhbEluZm8uaXNDaHJvbWVcbiAgICA/ICdjaHJvbWUnXG4gICAgOiBsb2NhbEluZm8uaXNGRlxuICAgICAgICA/ICdmaXJlZm94J1xuICAgICAgICA6IGxvY2FsSW5mby5pc1NhZmFyaVxuICAgICAgICAgICAgPyAnc2FmYXJpJ1xuICAgICAgICAgICAgOiBsb2NhbEluZm8uaXNFZGdlXG4gICAgICAgICAgICAgICAgPyAnZWRnZSdcbiAgICAgICAgICAgIDogbG9jYWxJbmZvLmlzRWRnZUxlZ2FjeVxuICAgICAgICAgICAgICAgID8gJ2VkZ2UgbGVnYWN5J1xuICAgICAgICAgICAgICAgIDogbG9jYWxJbmZvLmlzSUUxMVxuICAgICAgICAgICAgICAgICAgICA/ICdpZTExJ1xuICAgICAgICAgICAgICAgICAgICA6IGxvY2FsSW5mby5pc0lFMTBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2llMTAnXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGxvY2FsSW5mby5pc0lFOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2llOSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGxvY2FsSW5mby5pc0lFOFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdpZTgnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyc7XG5sb2NhbEluZm8uY3VycmVudEJyb3dzZXIgPSBvcyArIGJyb3dzZXI7XG5cbnR5cGUgQmF0dGVyeUluZm8gPSB7XG4gICAgY2hhcmdpbmc6IGJvb2xlYW47XG4gICAgY2hhcmdpbmdUaW1lOiBudW1iZXI7XG4gICAgZGlzY2hhcmdpbmdUaW1lOiBudW1iZXI7XG4gICAgbGV2ZWw6IG51bWJlcjtcbn07XG50eXBlIFBsdWdpbiA9IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZmlsZW5hbWU6IHN0cmluZztcbiAgICBsZW5ndGg6IG51bWJlcjtcbn07XG5leHBvcnQgY2xhc3MgQ2xpZW50RmVhdHVyZSB7XG4gICAgcHVibGljIHVzZXJBZ2VudD86IHN0cmluZztcbiAgICBwdWJsaWMgcGx1Z2lucz86IFBsdWdpbltdO1xuICAgIHB1YmxpYyBsb2NhbFRpbWU/OiBzdHJpbmc7XG4gICAgcHVibGljIHRpbWV6b25lT2Zmc2V0PzogbnVtYmVyO1xuICAgIHB1YmxpYyBwZXJtaXNzaW9uU3RhdHVzPzogeyBzdGF0ZTogc3RyaW5nIH07XG4gICAgcHVibGljIHdlYmRyaXZlcj86IGJvb2xlYW47XG4gICAgcHVibGljIGJhdHRlcnlJbmZvPzogQmF0dGVyeUluZm87XG4gICAgcHVibGljIGZlYXR1cmVzPzogW251bWJlciwgc3RyaW5nLCBib29sZWFuLCBib29sZWFuXTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbmF2aWdhdG9yOiBOYXZpZ2F0b3IgPSBnaWd5YS5fLldpbmRvd1Byb3ZpZGVyLm5hdmlnYXRvcigpLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgc2NyZWVuOiBTY3JlZW4gPSBnaWd5YS5fLldpbmRvd1Byb3ZpZGVyLnNjcmVlbigpKSB7XG4gICAgICAgIHRoaXMuY29sbGVjdERhdGEoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNvbGxlY3REYXRhKCkge1xuICAgICAgICB0aGlzLnVzZXJBZ2VudCA9IHRoaXMubmF2aWdhdG9yPy51c2VyQWdlbnQ7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IEFycmF5LmZyb20odGhpcy5uYXZpZ2F0b3I/LnBsdWdpbnMgfHwgW10pLm1hcCgoe25hbWUsIGZpbGVuYW1lLCBsZW5ndGh9KSA9PiAoeyBuYW1lLCBmaWxlbmFtZSwgbGVuZ3RoIH0pKTtcbiAgICAgICAgdGhpcy5sb2NhbFRpbWUgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpO1xuICAgICAgICB0aGlzLnRpbWV6b25lT2Zmc2V0ID0gbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgICAgICBjb25zdCBwZXJtaXNzaW9uU3RhdHVzID0gYXdhaXQgdGhpcy5uYXZpZ2F0b3I/LnBlcm1pc3Npb25zPy5xdWVyeSh7IG5hbWU6J25vdGlmaWNhdGlvbnMnIH0pO1xuICAgICAgICBpZiAocGVybWlzc2lvblN0YXR1cykge1xuICAgICAgICAgICAgY29uc3Qge3N0YXRlfSA9IHBlcm1pc3Npb25TdGF0dXM7XG4gICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25TdGF0dXMgPSB7c3RhdGV9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2ViZHJpdmVyID0gdGhpcy5uYXZpZ2F0b3I/LndlYmRyaXZlcjtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBiYXR0ZXJ5SW5mbyA9IHRoaXMubmF2aWdhdG9yLmdldEJhdHRlcnkgJiYgYXdhaXQgdGhpcy5uYXZpZ2F0b3IuZ2V0QmF0dGVyeSgpO1xuICAgICAgICBpZiAoYmF0dGVyeUluZm8pIHtcbiAgICAgICAgICAgIGNvbnN0IHtjaGFyZ2luZywgY2hhcmdpbmdUaW1lLCBkaXNjaGFyZ2luZ1RpbWUsIGxldmVsfSA9IGJhdHRlcnlJbmZvO1xuICAgICAgICAgICAgdGhpcy5iYXR0ZXJ5SW5mbyA9IHtjaGFyZ2luZywgY2hhcmdpbmdUaW1lLCBkaXNjaGFyZ2luZ1RpbWUsIGxldmVsfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVzID0gW1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0b3I/Lm1heFRvdWNoUG9pbnRzIHx8IHRoaXMubmF2aWdhdG9yPy5tc01heFRvdWNoUG9pbnRzLFxuICAgICAgICAgICAgYCR7dGhpcy5zY3JlZW4ud2lkdGh9fCR7dGhpcy5zY3JlZW4uaGVpZ2h0fXwke3RoaXMuc2NyZWVuLmNvbG9yRGVwdGh9YCxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdG9yLmphdmFFbmFibGVkKCksXG4gICAgICAgICAgICAnc2VuZEJlYWNvbicgaW4gdGhpcy5uYXZpZ2F0b3JcbiAgICAgICAgXTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIElBdXRoUmVnaXN0ZXJSZXNwb25zZSxcbiAgICBJQXV0aG9yaXplUmVzcG9uc2UsXG4gICAgSUNvbm5lY3RSZXNwb25zZSxcbiAgICBJVG9rZW5SZXNwb25zZSxcbiAgICBJT2F1dGhSZXF1ZXN0LFxuICAgIElPYXV0aENvbm5lY3RSZXF1ZXN0LFxuICAgIElPYXV0aFRva2VuUmVxdWVzdCxcbiAgICBJT2F1dGhSZWdpc3RlclJlcXVlc3Rcbn0gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7cHJvbWlzaWZ5fSBmcm9tIFwiLi4vVXRpbHMvcHJvbWlzZVwiO1xuXG5leHBvcnQgdHlwZSBHcmFudFR5cGUgPSAnYXV0aG9yaXphdGlvbl9jb2RlJyB8ICdpbXBsaWNpdCcgfCAnY2xpZW50X2NyZWRlbnRpYWxzJyB8ICdwYXNzd29yZCcgfCAncmVmcmVzaF90b2tlbic7XG5leHBvcnQgY29uc3QgRGVmYXVsdEdyYW50VHlwZTogR3JhbnRUeXBlID0gJ2F1dGhvcml6YXRpb25fY29kZSc7XG5leHBvcnQgY29uc3QgT2F1dGhfUmVzcG9uc2VfVHlwZSA9ICdjb2RlJztcblxuZXhwb3J0IGNsYXNzIE9hdXRoU2VydmljZSB7XG5cbiAgICBwdWJsaWMgYXN5bmMgcmVnaXN0ZXIocGFyYW1zOiBJT2F1dGhSZWdpc3RlclJlcXVlc3QpOiBQcm9taXNlPElBdXRoUmVnaXN0ZXJSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCB7aWRUb2tlbiwgLi4ucmVzdH0gPSBwYXJhbXM7XG4gICAgICAgIGdpZ3lhLl8uYXBpQWRhcHRlcnMud2ViLnRva2VuU3RvcmUuc2V0QmVhcmVyVG9rZW4oaWRUb2tlbik7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHByb21pc2lmeTxJQXV0aFJlZ2lzdGVyUmVzcG9uc2U+KGdpZ3lhLm9hdXRoLnJlZ2lzdGVyLCB7XG4gICAgICAgICAgICAuLi5yZXN0XG4gICAgICAgIH0pO1xuICAgICAgICBnaWd5YS5fLmFwaUFkYXB0ZXJzLndlYi50b2tlblN0b3JlLnJlbW92ZUJlYXJlclRva2VuKCk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcblxuICAgIHB1YmxpYyBhc3luYyBjb25uZWN0KHtpZFRva2VuLCByZWdUb2tlbiwgaWdub3JlQXBpUXVldWV9OiBJT2F1dGhDb25uZWN0UmVxdWVzdCk6IFByb21pc2U8SUNvbm5lY3RSZXNwb25zZT4ge1xuICAgICAgICBnaWd5YS5fLmFwaUFkYXB0ZXJzLndlYi50b2tlblN0b3JlLnNldEJlYXJlclRva2VuKGlkVG9rZW4pO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBwcm9taXNpZnk8SUNvbm5lY3RSZXNwb25zZT4oZ2lneWEub2F1dGguY29ubmVjdCwge1xuICAgICAgICAgICAgcmVnVG9rZW4sIGlnbm9yZUFwaVF1ZXVlXG4gICAgICAgIH0pO1xuICAgICAgICBnaWd5YS5fLmFwaUFkYXB0ZXJzLndlYi50b2tlblN0b3JlLnJlbW92ZUJlYXJlclRva2VuKCk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcblxuICAgIHB1YmxpYyBhc3luYyBhdXRob3JpemUocGFyYW1zOiBJT2F1dGhSZXF1ZXN0KSA6UHJvbWlzZTxJQXV0aG9yaXplUmVzcG9uc2U+IHtcbiAgICAgICAgZ2lneWEuXy5hcGlBZGFwdGVycy53ZWIudG9rZW5TdG9yZS5zZXRCZWFyZXJUb2tlbihwYXJhbXMuaWRUb2tlbik7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0ICBwcm9taXNpZnk8SUF1dGhvcml6ZVJlc3BvbnNlPihnaWd5YS5vYXV0aC5hdXRob3JpemUsIHtcbiAgICAgICAgICAgIHJlc3BvbnNlX3R5cGU6IE9hdXRoX1Jlc3BvbnNlX1R5cGVcbiAgICAgICAgfSk7XG4gICAgICAgIGdpZ3lhLl8uYXBpQWRhcHRlcnMud2ViLnRva2VuU3RvcmUucmVtb3ZlQmVhcmVyVG9rZW4oKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9rZW4oe2dyYW50VHlwZSwgc2Vzc2lvbkV4cGlyYXRpb24sIGNvZGUsIGRvbnRIYW5kbGVTY3JlZW5TZXR9OiBJT2F1dGhUb2tlblJlcXVlc3QpOiBQcm9taXNlPElUb2tlblJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiBwcm9taXNpZnk8SVRva2VuUmVzcG9uc2U+KGdpZ3lhLm9hdXRoLnRva2VuLCB7XG4gICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgZ3JhbnRfdHlwZTogZ3JhbnRUeXBlIHx8IERlZmF1bHRHcmFudFR5cGUsXG4gICAgICAgICAgICBzZXNzaW9uRXhwaXJhdGlvbjogc2Vzc2lvbkV4cGlyYXRpb24gfHwgJzAnLFxuICAgICAgICAgICAgZG9udEhhbmRsZVNjcmVlblNldDogZG9udEhhbmRsZVNjcmVlblNldCB8fCBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBPYXV0aFNlcnZpY2UoKTtcbiIsImltcG9ydCB7YmFzZTY0VVJMU3RyaW5nVG9CdWZmZXIsIGJ1ZmZlclRvQmFzZTY0VVJMU3RyaW5nLCBidWZmZXJUb1VURjhTdHJpbmcsIHV0ZjhTdHJpbmdUb0J1ZmZlcn0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQge0dTRXJyb3JzfSBmcm9tIFwiLi4vR1NFcnJvcnNcIjtcbmltcG9ydCB7UHVibGljS2V5Q3JlZGVudGlhbENyZWF0aW9uT3B0aW9uc0pTT04sIFB1YmxpY0tleUNyZWRlbnRpYWxSZXF1ZXN0T3B0aW9uc0pTT059IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCBjb25zdCAgZXJyb3JNYXAgPSB7XG4gICAgQ29uc3RyYWludEVycm9yOiB7XG4gICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuTk9UX1NVUFBPUlRFRCxcbiAgICAgICAgZXJyb3JEZXRhaWxzOiAnRGlzY292ZXJhYmxlIGNyZWRlbnRpYWxzIHdlcmUgcmVxdWlyZWQgYnV0IG5vIGF2YWlsYWJsZSBhdXRoZW50aWNhdG9yIHN1cHBvcnRlZCdcbiAgICB9LFxuICAgIEludmFsaWRTdGF0ZUVycm9yOiB7XG4gICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuUEFTU0tFWV9BVVRIRU5USUNBVE9SX1JFR0lTVEVSRUQsXG4gICAgICAgIGVycm9yRGV0YWlsczogJ1RoZSBhdXRoZW50aWNhdG9yIHdhcyBwcmV2aW91c2x5IHJlZ2lzdGVyZWQnXG4gICAgfSxcbiAgICBOb3RBbGxvd2VkRXJyb3I6IHtcbiAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5PUEVSQVRJT05fQ0FOQ0VMRUQsXG4gICAgICAgIGVycm9yRGV0YWlsczogJ1VzZXIgY2xpY2tlZCBjYW5jZWwsIG9yIHRoZSByZWdpc3RyYXRpb24gY2VyZW1vbnkgdGltZWQgb3V0J1xuICAgIH0sXG4gICAgTm90U3VwcG9ydGVkRXJyb3I6IHtcbiAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5OT1RfU1VQUE9SVEVELFxuICAgICAgICBlcnJvckRldGFpbHM6ICdObyBhdmFpbGFibGUgYXV0aGVudGljYXRvciBzdXBwb3J0ZWQgYW55IG9mIHRoZSBzcGVjaWZpZWQgcHViS2V5Q3JlZFBhcmFtcyBhbGdvcml0aG1zJ1xuICAgIH0sXG4gICAgU2VjdXJpdHlFcnJvcjoge1xuICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLklOVkFMSURfU0lURV9DT05GSUdVUkFUSU9OX0VSUk9SLFxuICAgICAgICBlcnJvckRldGFpbHM6IFwiSG9zdG5hbWUgaXMgYW4gaW52YWxpZCBkb21haW4gLyBUaGUgUlAgSUQgaXMgaW52YWxpZCBmb3IgdGhpcyBkb21haW5cIlxuICAgIH0sXG4gICAgVHlwZUVycm9yOiB7XG4gICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuSU5WQUxJRF9TSVRFX0NPTkZJR1VSQVRJT05fRVJST1IsXG4gICAgICAgIGVycm9yRGV0YWlsczogXCJVc2VyIElEIHdhcyBub3QgYmV0d2VlbiAxIGFuZCA2NCBjaGFyYWN0ZXJzXCJcbiAgICB9LFxuICAgIEFib3J0RXJyb3I6IHtcbiAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5QQVNTS0VZX0FCT1JURUQsXG4gICAgICAgIGVycm9yRGV0YWlsczogJ0F1dGhlbnRpY2F0aW9uIGNlcmVtb255IHdhcyBzZW50IGFuIGFib3J0IHNpZ25hbCdcbiAgICB9LFxuICAgIFVua25vd25FcnJvcjoge1xuICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlBBU1NLRVlfRVJST1IsXG4gICAgICAgIGVycm9yRGV0YWlsczogJ1RoZSBhdXRoZW50aWNhdG9yIHdhcyB1bmFibGUgdG8gcHJvY2VzcyB0aGUgc3BlY2lmaWVkIG9wdGlvbnMsIG9yIGNvdWxkIG5vdCBjcmVhdGUgYSBuZXcgY3JlZGVudGlhbCdcbiAgICB9LFxuICAgIENyZWRlbnRpYWxFcnJvcjoge1xuICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLlBBU1NLRVlfRVJST1IsXG4gICAgICAgIGVycm9yRGV0YWlsczogJ1VuYWJsZSB0byBjcmVhdGUvZ2V0IGNyZWRlbnRpYWwnXG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDcmVkZW50aWFsQ29udGFpbmVyIHtcbiAgICBnZXQ6IChvcHRpb25zPzogQ3JlZGVudGlhbFJlcXVlc3RPcHRpb25zKSA9PiBQcm9taXNlPENyZWRlbnRpYWwgfCBudWxsPjtcbiAgICBjcmVhdGU6IChvcHRpb25zPzogQ3JlZGVudGlhbFJlcXVlc3RPcHRpb25zKSA9PiBQcm9taXNlPENyZWRlbnRpYWwgfCBudWxsPlxufVxuXG5leHBvcnQgY2xhc3MgQ3JlZGVudGlhbFNlcnZpY2Uge1xuICAgIHByaXZhdGUgYWJvcnRTZXJ2aWNlOiBQYXNza2V5QWJvcnRTZXJ2aWNlO1xuXG4gICAgcHJpdmF0ZSBnZXQgY3JlZGVudGlhbHMoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS5fLldpbmRvd1Byb3ZpZGVyLm5hdmlnYXRvcigpLmNyZWRlbnRpYWxzO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFib3J0U2VydmljZSA9IG5ldyBQYXNza2V5QWJvcnRTZXJ2aWNlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGlzQ29uZGl0aW9uYWxNZWRpYXRpb25BdmFpbGFibGUocHViS2V5Q3JlZDogYW55ID0gUHVibGljS2V5Q3JlZGVudGlhbCkge1xuICAgICAgICBpZiAodHlwZW9mIHB1YktleUNyZWQuaXNDb25kaXRpb25hbE1lZGlhdGlvbkF2YWlsYWJsZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHB1YktleUNyZWQ/LmlzQ29uZGl0aW9uYWxNZWRpYXRpb25BdmFpbGFibGUoKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNTdXBwb3J0ZWQoKSB7XG4gICAgICAgIHJldHVybiAhKFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuY3JlZGVudGlhbHMgIT09ICdvYmplY3QnIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5jcmVkZW50aWFscz8uY3JlYXRlICE9PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5jcmVkZW50aWFscz8uZ2V0ICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldChvcHRpb25zOiBQdWJsaWNLZXlDcmVkZW50aWFsUmVxdWVzdE9wdGlvbnNKU09OLCBtZWRpYXRpb246IENyZWRlbnRpYWxNZWRpYXRpb25SZXF1aXJlbWVudCA9IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBwdWJsaWNLZXkgPSB0aGlzLmNyZWF0ZVBLQ3JlZGVudGlhbFJlcXVlc3Qob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHNpZ25hbCA9IHRoaXMuYWJvcnRTZXJ2aWNlLmNyZWF0ZU5ld0Fib3J0U2lnbmFsKCk7XG5cbiAgICAgICAgaWYgKG1lZGlhdGlvbiA9PT0gJ2NvbmRpdGlvbmFsJyBhcyBDcmVkZW50aWFsTWVkaWF0aW9uUmVxdWlyZW1lbnQgJiYgIShhd2FpdCB0aGlzLmlzQ29uZGl0aW9uYWxNZWRpYXRpb25BdmFpbGFibGUoKSkpIHtcbiAgICAgICAgICAgIG1lZGlhdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjcmVkZW50aWFsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY3JlZGVudGlhbCA9IGF3YWl0IHRoaXMuY3JlZGVudGlhbHMuZ2V0KHtcbiAgICAgICAgICAgICAgICBtZWRpYXRpb24sXG4gICAgICAgICAgICAgICAgcHVibGljS2V5LFxuICAgICAgICAgICAgICAgIHNpZ25hbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvck1hcFtlcnJvcj8ubmFtZV0gfHwgZXJyb3JNYXAuVW5rbm93bkVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjcmVkZW50aWFsKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvck1hcC5DcmVkZW50aWFsRXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7aWQsIHJhd0lkLCByZXNwb25zZSwgdHlwZX0gPSBjcmVkZW50aWFsO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICByYXdJZDogYnVmZmVyVG9CYXNlNjRVUkxTdHJpbmcocmF3SWQpLFxuICAgICAgICAgICAgZXh0ZW5zaW9uczogY3JlZGVudGlhbC5nZXRDbGllbnRFeHRlbnNpb25SZXN1bHRzKCksXG4gICAgICAgICAgICByZXNwb25zZToge1xuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0b3JEYXRhOiBidWZmZXJUb0Jhc2U2NFVSTFN0cmluZyhyZXNwb25zZS5hdXRoZW50aWNhdG9yRGF0YSksXG4gICAgICAgICAgICAgICAgY2xpZW50RGF0YUpTT046IGJ1ZmZlclRvQmFzZTY0VVJMU3RyaW5nKHJlc3BvbnNlLmNsaWVudERhdGFKU09OKSxcbiAgICAgICAgICAgICAgICBzaWduYXR1cmU6IGJ1ZmZlclRvQmFzZTY0VVJMU3RyaW5nKHJlc3BvbnNlLnNpZ25hdHVyZSksXG4gICAgICAgICAgICAgICAgdXNlckhhbmRsZTogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBjcmVhdGUob3B0aW9uczogUHVibGljS2V5Q3JlZGVudGlhbENyZWF0aW9uT3B0aW9uc0pTT04pIHtcbiAgICAgICAgY29uc3QgcHVibGljS2V5ID0gdGhpcy5jcmVhdGVQS0NyZWRlbnRpYWxDcmVhdGUob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHNpZ25hbCA9IHRoaXMuYWJvcnRTZXJ2aWNlLmNyZWF0ZU5ld0Fib3J0U2lnbmFsKCk7XG5cbiAgICAgICAgbGV0IGNyZWRlbnRpYWw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjcmVkZW50aWFsID0gYXdhaXQgdGhpcy5jcmVkZW50aWFscy5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgICAgICBwdWJsaWNLZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JNYXBbZXJyb3I/Lm5hbWVdIHx8IGVycm9yTWFwLlVua25vd25FcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY3JlZGVudGlhbCkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JNYXAuQ3JlZGVudGlhbEVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpZCwgcmF3SWQsIHJlc3BvbnNlLCB0eXBlIH0gPSBjcmVkZW50aWFsO1xuXG4gICAgICAgIGxldCB0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2UuZ2V0VHJhbnNwb3J0cyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdHJhbnNwb3J0ID0gcmVzcG9uc2UuZ2V0VHJhbnNwb3J0cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICByYXdJZDogYnVmZmVyVG9CYXNlNjRVUkxTdHJpbmcocmF3SWQpLFxuICAgICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgICAgICBhdHRlc3RhdGlvbk9iamVjdDogYnVmZmVyVG9CYXNlNjRVUkxTdHJpbmcocmVzcG9uc2UuYXR0ZXN0YXRpb25PYmplY3QpLFxuICAgICAgICAgICAgICAgIGNsaWVudERhdGFKU09OOiBidWZmZXJUb0Jhc2U2NFVSTFN0cmluZyhyZXNwb25zZS5jbGllbnREYXRhSlNPTiksXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xpZW50RXh0ZW5zaW9uUmVzdWx0czogY3JlZGVudGlhbC5nZXRDbGllbnRFeHRlbnNpb25SZXN1bHRzKCksXG4gICAgICAgICAgICBhdXRoZW50aWNhdG9yU2VsZWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5hdXRoZW50aWNhdG9yU2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0b3JBdHRhY2htZW50OiBvcHRpb25zLmF1dGhlbnRpY2F0b3JTZWxlY3Rpb24/LmF1dGhlbnRpY2F0b3JBdHRhY2htZW50IHx8IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dGVzdGF0aW9uOiBvcHRpb25zLmF0dGVzdGF0aW9uIHx8ICdkaXJlY3QnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGFib3J0Q3VycmVudENlcmVtb255KCkge1xuICAgICAgICB0aGlzLmFib3J0U2VydmljZS5hYm9ydCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUEtDcmVkZW50aWFsUmVxdWVzdChvcHRpb25zOiBQdWJsaWNLZXlDcmVkZW50aWFsUmVxdWVzdE9wdGlvbnNKU09OKTogUHVibGljS2V5Q3JlZGVudGlhbFJlcXVlc3RPcHRpb25zIHtcbiAgICAgICAgbGV0IGFsbG93Q3JlZGVudGlhbHM7XG4gICAgICAgIGlmIChvcHRpb25zLmFsbG93Q3JlZGVudGlhbHM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGFsbG93Q3JlZGVudGlhbHMgPSBvcHRpb25zLmFsbG93Q3JlZGVudGlhbHMubWFwKGMgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmMsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBiYXNlNjRVUkxTdHJpbmdUb0J1ZmZlcihjLmlkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGNoYWxsZW5nZTogYmFzZTY0VVJMU3RyaW5nVG9CdWZmZXIob3B0aW9ucy5jaGFsbGVuZ2UpLFxuICAgICAgICAgICAgYWxsb3dDcmVkZW50aWFsc1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUEtDcmVkZW50aWFsQ3JlYXRlKG9wdGlvbnM6IFB1YmxpY0tleUNyZWRlbnRpYWxDcmVhdGlvbk9wdGlvbnNKU09OKTogUHVibGljS2V5Q3JlZGVudGlhbENyZWF0aW9uT3B0aW9ucyB7XG4gICAgICAgIHJldHVybiAge1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIGNoYWxsZW5nZTogYmFzZTY0VVJMU3RyaW5nVG9CdWZmZXIob3B0aW9ucy5jaGFsbGVuZ2UpLFxuICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMudXNlcixcbiAgICAgICAgICAgICAgICBpZDogdXRmOFN0cmluZ1RvQnVmZmVyKG9wdGlvbnMudXNlci5pZClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBleGNsdWRlQ3JlZGVudGlhbHM6IG9wdGlvbnMuZXhjbHVkZUNyZWRlbnRpYWxzPy5tYXAoYyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGJhc2U2NFVSTFN0cmluZ1RvQnVmZmVyKGMuaWQpXG4gICAgICAgICAgICAgICAgfSBhcyBQdWJsaWNLZXlDcmVkZW50aWFsRGVzY3JpcHRvclxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIFBhc3NrZXlBYm9ydFNlcnZpY2Uge1xuICAgIHByaXZhdGUgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyIHwgdW5kZWZpbmVkO1xuXG4gICAgcHVibGljIGNyZWF0ZU5ld0Fib3J0U2lnbmFsKCkge1xuICAgICAgICBpZiAodGhpcy5jb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXdDb250cm9sbGVyO1xuICAgICAgICByZXR1cm4gbmV3Q29udHJvbGxlci5zaWduYWw7XG4gICAgfVxuXG4gICAgcHVibGljIGFib3J0KCkge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXI/LmFib3J0KCk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IG51bGw7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgQ3JlZGVudGlhbFNlcnZpY2UoKTtcbiIsImltcG9ydCB7XG4gICAgSUdldEFzc2VydGlvbk9wdGlvbnNSZXNwb25zZSxcbiAgICBJR2V0Q3JlZGVudGlhbFJlc3BvbnNlLFxuICAgIElJbml0UmVnaXN0ZXJDcmVkZW50aWFsc1Jlc3BvbnNlLFxuICAgIElQYXNza2V5UmVnaXN0cmF0aW9uUGFyYW1zLFxuICAgIElSZWdpc3RlckNyZWRlbnRpYWxzUmVzcG9uc2UsXG4gICAgSVZlcmlmeUFzc2VydGlvblJlc3BvbnNlXG59IGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgT2F1dGhTZXJ2aWNlIGZyb20gJy4uL09hdXRoL09hdXRoU2VydmljZSc7XG5pbXBvcnQge0dTRXJyb3JzfSBmcm9tICcuLi9HU0Vycm9ycyc7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnLi4vVXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQgKiBhcyBnbG9iYWxFdmVudHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dsb2JhbEV2ZW50cyc7XG5pbXBvcnQgY3JlZGVudGlhbFNlcnZpY2UsIHtlcnJvck1hcH0gZnJvbSAnLi9DcmVkZW50aWFsU2VydmljZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFzc2tleUF1dGhlbnRpY2F0ZVBhcmFtcyB7XG4gICAgbWVkaWF0aW9uPzogQ3JlZGVudGlhbE1lZGlhdGlvblJlcXVpcmVtZW50XG4gICAgc2Vzc2lvbkV4cGlyYXRpb24/OiBzdHJpbmc7XG4gICAgYWJvcnRDdXJyZW50Q2VyZW1vbnk/OiBib29sZWFuO1xuICAgIGRvbnRIYW5kbGVTY3JlZW5TZXQ/OiBib29sZWFuXG59XG5cbmV4cG9ydCB0eXBlIFBhc3NrZXlFdmVudEhhbmRsZXIgPSAoZGF0YTogYW55KSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgUGFzc2tleUV2ZW50cyA9ICdwYXNza2V5UmVtb3ZlZCcgfCAncGFzc2tleUFkZGVkJztcblxuZXhwb3J0IGNsYXNzIFBhc3NrZXlTZXJ2aWNlIHtcbiAgICBwcml2YXRlIGN1cnJlbnRSdW4/OiBQcm9taXNlPGFueT47XG4gICAgcHJpdmF0ZSBldmVudEhhbmRsZXJzOiBNYXA8c3RyaW5nLCBQYXNza2V5RXZlbnRIYW5kbGVyW10+O1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcnMgPSBuZXcgTWFwPHN0cmluZywgUGFzc2tleUV2ZW50SGFuZGxlcltdPigpXG4gICAgfVxuXG4gICAgcHVibGljIG9uKGV2ZW50OiBQYXNza2V5RXZlbnRzLCBoYW5kbGVyOiBQYXNza2V5RXZlbnRIYW5kbGVyKSB7XG4gICAgICAgIGlmICghdGhpcy5ldmVudEhhbmRsZXJzLmdldChldmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIYW5kbGVycy5zZXQoZXZlbnQsIFtdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcnMuZ2V0KGV2ZW50KS5wdXNoKGhhbmRsZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmUoZXZlbnQ6IFBhc3NrZXlFdmVudHMsIGhhbmRsZXI6IFBhc3NrZXlFdmVudEhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEhhbmRsZXJzLnNldChldmVudCxcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIYW5kbGVycy5nZXQoZXZlbnQpPy5maWx0ZXIoZm4gPT4gZm4gIT09IGhhbmRsZXIpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNTdXBwb3J0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjcmVkZW50aWFsU2VydmljZS5pc1N1cHBvcnRlZCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBpc0NvbmRpdGlvbmFsTWVkaWF0aW9uQXZhaWxhYmxlKCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgY3JlZGVudGlhbFNlcnZpY2UuaXNDb25kaXRpb25hbE1lZGlhdGlvbkF2YWlsYWJsZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBhdXRoZW50aWNhdGUocGFyYW1zPzogUGFzc2tleUF1dGhlbnRpY2F0ZVBhcmFtcykge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5PbmVBdEFUaW1lKCgpID0+IHRoaXMuaW50ZXJuYWxBdXRoZW50aWNhdGUocGFyYW1zKSwgcGFyYW1zPy5hYm9ydEN1cnJlbnRDZXJlbW9ueSB8fCBmYWxzZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHJlZ2lzdGVyUGFzc2tleShwYXJhbXM6IElQYXNza2V5UmVnaXN0cmF0aW9uUGFyYW1zID0ge30sIGFib3J0Q3VycmVudENlcmVtb255ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHBhcmFtcy5hVG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJ1bk9uZUF0QVRpbWUoKCkgPT4gdGhpcy5pbnRlcm5hbFJlZ2lzdGVyKHBhcmFtcyksIGFib3J0Q3VycmVudENlcmVtb255KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ydW5PbmVBdEFUaW1lKCgpID0+IHRoaXMuaW50ZXJuYWxDb25uZWN0KHBhcmFtcyksIGFib3J0Q3VycmVudENlcmVtb255KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgcmVtb3ZlUGFzc2tleShjcmVkZW50aWFsSWQ6IHN0cmluZywgcmVnVG9rZW4/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwcm9taXNpZnkoZ2lneWEuYWNjb3VudHMuYXV0aC5maWRvLnJlbW92ZUNyZWRlbnRpYWwsIHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxJZCxcbiAgICAgICAgICAgIHJlZ1Rva2VuLFxuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgPT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ3Bhc3NrZXlSZW1vdmVkJywge1xuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxJZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRQYXNza2V5cyhyZWdUb2tlbj86IHN0cmluZykge1xuICAgICAgICByZXR1cm4gYXdhaXQgcHJvbWlzaWZ5PElHZXRDcmVkZW50aWFsUmVzcG9uc2U+KGdpZ3lhLmFjY291bnRzLmF1dGguZmlkby5nZXRDcmVkZW50aWFscywge1xuICAgICAgICAgICAgcmVnVG9rZW4sXG4gICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgd2FpdEZvclNlcnZpY2UoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5jdXJyZW50UnVuO1xuICAgICAgICB9IGNhdGNoIHt9XG4gICAgfVxuXG4gICAgcHVibGljIGFib3J0Q3VycmVudENlcmVtb255KCkge1xuICAgICAgICBjcmVkZW50aWFsU2VydmljZS5hYm9ydEN1cnJlbnRDZXJlbW9ueSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGlzcGF0Y2hFdmVudChldmVudDogUGFzc2tleUV2ZW50cywgZGF0YTogYW55KSB7XG4gICAgICAgIGZvciAoY29uc3QgZm4gb2YgdGhpcy5ldmVudEhhbmRsZXJzLmdldChldmVudCkgfHwgW10pIHtcbiAgICAgICAgICAgIGZuKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGdsb2JhbEV2ZW50cy5kaXNwYXRjaCh7XG4gICAgICAgICAgICBldmVudE5hbWU6IGBwYXNza2V5LiR7ZXZlbnR9YCxcbiAgICAgICAgICAgIC4uLmRhdGFcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBydW5PbmVBdEFUaW1lKGZ1bmM6IEZ1bmN0aW9uLCBhYm9ydEN1cnJlbnRDZXJlbW9ueSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3JNYXAuTm90U3VwcG9ydGVkRXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWJvcnRDdXJyZW50Q2VyZW1vbnkpIHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxTZXJ2aWNlLmFib3J0Q3VycmVudENlcmVtb255KCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JTZXJ2aWNlKCk7XG4gICAgICAgIHRoaXMuY3VycmVudFJ1biA9IGZ1bmMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFJ1bjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGludGVybmFsUmVnaXN0ZXIocGFyYW1zOiBJUGFzc2tleVJlZ2lzdHJhdGlvblBhcmFtcyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZUNyZWRSZXMgPSBhd2FpdCB0aGlzLmNyZWF0ZUFuZFJlZ2lzdGVyQ3JlZGVudGlhbChwYXJhbXMpO1xuICAgICAgICBjb25zdCB7IGxhbmcsIHNlc3Npb25FeHBpcmF0aW9uLCBjb250ZXh0LCByZWdTb3VyY2UsIGNpZCwgc291cmNlfSA9IHBhcmFtcztcbiAgICAgICAgY29uc3QgcmVnUmVzcG9uc2UgPSBhd2FpdCBPYXV0aFNlcnZpY2UucmVnaXN0ZXIoe1xuICAgICAgICAgICAgaWRUb2tlbjogY3JlYXRlQ3JlZFJlcy5pZFRva2VuLFxuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsXG4gICAgICAgICAgICBpZ25vcmVJbnRlcnJ1cHRpb25zOiB0cnVlLFxuICAgICAgICAgICAgcHJvdmlkZXI6ICdzaXRlJyxcbiAgICAgICAgICAgIHNvdXJjZSwgbGFuZywgc2Vzc2lvbkV4cGlyYXRpb24sIGNvbnRleHQsIHJlZ1NvdXJjZSwgY2lkXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHByb21pc2lmeShnaWd5YS5hY2NvdW50cy5maW5hbGl6ZVJlZ2lzdHJhdGlvbiwge1xuICAgICAgICAgICAgcmVnVG9rZW46IHJlZ1Jlc3BvbnNlLnJlZ1Rva2VuLFxuICAgICAgICAgICAgaWdub3JlSW50ZXJydXB0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlLFxuICAgICAgICAgICAgcHJvdmlkZXI6ICdzaXRlJyxcbiAgICAgICAgICAgIHNvdXJjZSwgY29udGV4dFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09PSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdwYXNza2V5QWRkZWQnLCB7IHJlc3BvbnNlOiBjcmVhdGVDcmVkUmVzIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5yZXNwb25zZSxcbiAgICAgICAgICAgIHJlZ1Rva2VuOiByZWdSZXNwb25zZS5yZWdUb2tlblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaW50ZXJuYWxDb25uZWN0KHBhcmFtczogSVBhc3NrZXlSZWdpc3RyYXRpb25QYXJhbXMgPSB7fSkge1xuICAgICAgICBjb25zdCBjcmVhdGVDcmVkUmVzID0gYXdhaXQgdGhpcy5jcmVhdGVBbmRSZWdpc3RlckNyZWRlbnRpYWwocGFyYW1zKTtcbiAgICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgT2F1dGhTZXJ2aWNlLmNvbm5lY3Qoe1xuICAgICAgICAgICAgaWRUb2tlbjogY3JlYXRlQ3JlZFJlcy5pZFRva2VuLFxuICAgICAgICAgICAgcmVnVG9rZW46IHBhcmFtcy5yZWdUb2tlbixcbiAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09PSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KCdwYXNza2V5QWRkZWQnLCB7IHJlc3BvbnNlOiBjcmVhdGVDcmVkUmVzIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGludGVybmFsQXV0aGVudGljYXRlKHBhcmFtcz86IFBhc3NrZXlBdXRoZW50aWNhdGVQYXJhbXMpIHtcbiAgICAgICAgY29uc3QgW3Rva2VuLCBvcHRpb25zXSA9IGF3YWl0IFBhc3NrZXlTZXJ2aWNlLmdldEFzc2VydGlvbk9wdGlvbnMoKTtcbiAgICAgICAgY29uc3QgYXV0aGVudGljYXRvckFzc2VydGlvbiA9IGF3YWl0IGNyZWRlbnRpYWxTZXJ2aWNlLmdldChvcHRpb25zLCBwYXJhbXM/Lm1lZGlhdGlvbik7XG5cbiAgICAgICAgY29uc3QgdmVyaWZ5QXNzZXJ0aW9uUmVzcG9uc2UgPSBhd2FpdCBwcm9taXNpZnk8SVZlcmlmeUFzc2VydGlvblJlc3BvbnNlPihcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmF1dGguZmlkby52ZXJpZnlBc3NlcnRpb24sIHtcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdG9yQXNzZXJ0aW9uLFxuICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGlmKHZlcmlmeUFzc2VydGlvblJlc3BvbnNlLmVycm9yQ29kZSAhPT0gR1NFcnJvcnMuT0sgfHwgIXZlcmlmeUFzc2VydGlvblJlc3BvbnNlLmlkVG9rZW4pICB7XG4gICAgICAgICAgICB0aHJvdyB2ZXJpZnlBc3NlcnRpb25SZXNwb25zZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGF1dGhvcml6ZVJlc3BvbnNlID0gYXdhaXQgT2F1dGhTZXJ2aWNlLmF1dGhvcml6ZSh7XG4gICAgICAgICAgICBpZFRva2VuOiB2ZXJpZnlBc3NlcnRpb25SZXNwb25zZS5pZFRva2VuLFxuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKGF1dGhvcml6ZVJlc3BvbnNlLmVycm9yQ29kZSAhPT0gR1NFcnJvcnMuT0sgfHwgIWF1dGhvcml6ZVJlc3BvbnNlLmNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IGF1dGhvcml6ZVJlc3BvbnNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhd2FpdCBPYXV0aFNlcnZpY2UudG9rZW4oe1xuICAgICAgICAgICAgY29kZTogYXV0aG9yaXplUmVzcG9uc2UuY29kZSxcbiAgICAgICAgICAgIGRvbnRIYW5kbGVTY3JlZW5TZXQ6IHBhcmFtcz8uZG9udEhhbmRsZVNjcmVlblNldCB8fCB0cnVlLFxuICAgICAgICAgICAgc2Vzc2lvbkV4cGlyYXRpb246IHBhcmFtcz8uc2Vzc2lvbkV4cGlyYXRpb24sXG4gICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZUFuZFJlZ2lzdGVyQ3JlZGVudGlhbChwYXJhbXM6IElQYXNza2V5UmVnaXN0cmF0aW9uUGFyYW1zID0ge30pIHtcbiAgICAgICAgY29uc3QgW3Rva2VuLCBvcHRpb25zXSA9IGF3YWl0IFBhc3NrZXlTZXJ2aWNlLmdldFJlZ2lzdHJhdGlvbk9wdGlvbnMocGFyYW1zKTtcbiAgICAgICAgY29uc3QgYXR0ZXN0YXRpb24gPSBhd2FpdCBjcmVkZW50aWFsU2VydmljZS5jcmVhdGUob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHsgcmVnVG9rZW4sIGRldmljZU5hbWUsIGlnbm9yZUludGVycnVwdGlvbnN9ID0gcGFyYW1zXG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyQ3JlZGVudGlhbHNSZXNwb25zZSA9IGF3YWl0IHByb21pc2lmeTxJUmVnaXN0ZXJDcmVkZW50aWFsc1Jlc3BvbnNlPihcbiAgICAgICAgICAgIGdpZ3lhLmFjY291bnRzLmF1dGguZmlkby5yZWdpc3RlckNyZWRlbnRpYWxzLCB7XG4gICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICAgICAgYXR0ZXN0YXRpb24sXG4gICAgICAgICAgICAgICAgZGV2aWNlTmFtZSxcbiAgICAgICAgICAgICAgICByZWdUb2tlbixcbiAgICAgICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGlmKHJlZ2lzdGVyQ3JlZGVudGlhbHNSZXNwb25zZS5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LIHx8ICFyZWdpc3RlckNyZWRlbnRpYWxzUmVzcG9uc2UuaWRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgcmVnaXN0ZXJDcmVkZW50aWFsc1Jlc3BvbnNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWdpc3RlckNyZWRlbnRpYWxzUmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgYXN5bmMgZ2V0QXNzZXJ0aW9uT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBhd2FpdCBwcm9taXNpZnk8SUdldEFzc2VydGlvbk9wdGlvbnNSZXNwb25zZT4oZ2lneWEuYWNjb3VudHMuYXV0aC5maWRvLmdldEFzc2VydGlvbk9wdGlvbnMsIHtcbiAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBpZihyZXF1ZXN0T3B0aW9ucy5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LIHx8IXJlcXVlc3RPcHRpb25zLm9wdGlvbnMgfHwgIXJlcXVlc3RPcHRpb25zLnRva2VuKSAge1xuICAgICAgICAgICAgdGhyb3cgcmVxdWVzdE9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IEpTT04ucGFyc2UocmVxdWVzdE9wdGlvbnMub3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBbcmVxdWVzdE9wdGlvbnMudG9rZW4sIG9wdGlvbnNdO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGFzeW5jIGdldFJlZ2lzdHJhdGlvbk9wdGlvbnMocGFyYW1zOiBhbnkpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBhd2FpdCBwcm9taXNpZnk8SUluaXRSZWdpc3RlckNyZWRlbnRpYWxzUmVzcG9uc2U+KGdpZ3lhLmFjY291bnRzLmF1dGguZmlkby5pbml0UmVnaXN0ZXJDcmVkZW50aWFscywge1xuICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKHJlcXVlc3RPcHRpb25zLmVycm9yQ29kZSAhPT0gR1NFcnJvcnMuT0sgfHwgIXJlcXVlc3RPcHRpb25zLm9wdGlvbnMgfHwgIXJlcXVlc3RPcHRpb25zLnRva2VuKSAge1xuICAgICAgICAgICAgdGhyb3cgcmVxdWVzdE9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IEpTT04ucGFyc2UocmVxdWVzdE9wdGlvbnMub3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBbcmVxdWVzdE9wdGlvbnMudG9rZW4sIG9wdGlvbnNdO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFBhc3NrZXlTZXJ2aWNlKCk7XG4iLCJleHBvcnQgZnVuY3Rpb24gdXRmOFN0cmluZ1RvQnVmZmVyKHZhbHVlOiBzdHJpbmcpOiBBcnJheUJ1ZmZlciB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXJUb1VURjhTdHJpbmcodmFsdWU6IEFycmF5QnVmZmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZSh2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXJUb0Jhc2U2NFVSTFN0cmluZyhidWZmZXI6IEFycmF5QnVmZmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgbGV0IHN0ciA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGk8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgICB9XG5cbiAgICBjb25zdCBiYXNlNjRTdHJpbmcgPSBidG9hKHN0cik7XG5cbiAgICByZXR1cm4gYmFzZTY0U3RyaW5nLnJlcGxhY2UoL1xcKy9nLCAnLScpLnJlcGxhY2UoL1xcLy9nLCAnXycpLnJlcGxhY2UoLz0vZywgJycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VVJMU3RyaW5nVG9CdWZmZXIoYmFzZTY0VVJMU3RyaW5nOiBzdHJpbmcpOiBBcnJheUJ1ZmZlciB7XG4gICAgLy8gQ29udmVydCBmcm9tIEJhc2U2NFVSTCB0byBCYXNlNjRcbiAgICBjb25zdCBiYXNlNjQgPSBiYXNlNjRVUkxTdHJpbmcucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTtcbiAgICAvKipcbiAgICAgKiBQYWQgd2l0aCAnPScgdW50aWwgaXQncyBhIG11bHRpcGxlIG9mIGZvdXJcbiAgICAgKiAoNCAtICg4NSAlIDQgPSAxKSA9IDMpICUgNCA9IDMgcGFkZGluZ1xuICAgICAqICg0IC0gKDg2ICUgNCA9IDIpID0gMikgJSA0ID0gMiBwYWRkaW5nXG4gICAgICogKDQgLSAoODcgJSA0ID0gMykgPSAxKSAlIDQgPSAxIHBhZGRpbmdcbiAgICAgKiAoNCAtICg4OCAlIDQgPSAwKSA9IDQpICUgNCA9IDAgcGFkZGluZ1xuICAgICAqL1xuICAgIGNvbnN0IHBhZExlbmd0aCA9ICg0IC0gKGJhc2U2NC5sZW5ndGggJSA0KSkgJSA0O1xuICAgIGNvbnN0IHBhZGRlZCA9IGJhc2U2NC5wYWRFbmQoYmFzZTY0Lmxlbmd0aCArIHBhZExlbmd0aCwgJz0nKTtcblxuICAgIC8vIENvbnZlcnQgdG8gYSBiaW5hcnkgc3RyaW5nXG4gICAgY29uc3QgYmluYXJ5ID0gYXRvYihwYWRkZWQpO1xuXG4gICAgLy8gQ29udmVydCBiaW5hcnkgc3RyaW5nIHRvIGJ1ZmZlclxuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihiaW5hcnkubGVuZ3RoKTtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpbmFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkpO1xuICAgIH1cblxuICAgIHJldHVybiBidWZmZXI7XG59XG4iLCJleHBvcnQgY2xhc3MgRmxhZ1NlcnZpY2Uge1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGZvcmNlV2ViU2RrQm9vdHN0cmFwKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2ZvcmNlV2ViU2RrQm9vdHN0cmFwJyk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHVzZUdpZ3lhSnNCYXNlRG9tYWluKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3VzZUdpZ3lhSnNCYXNlRG9tYWluJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgaGlkZVNTT0ZyYW1lKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2hpZGVTU09GcmFtZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHdjYWdDb250cmFzdEZpeCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd3Y2FnQ29udHJhc3RGaXgnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBuZXdGb3JtTGlua0luc3RhbmNlRWxlbWVudCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCduZXdGb3JtTGlua0luc3RhbmNlRWxlbWVudCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHN0b3BTZW5kaW5nUmVwb3J0cygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdzdG9wU2VuZGluZ1JlcG9ydHMnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBzZXRHcm91cEFwaURvbWFpbkFmdGVyTG9naW4oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnc2V0R3JvdXBBcGlEb21haW5BZnRlckxvZ2luJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdXNlSHR0cFN0YXR1c0NvZGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgndXNlSHR0cFN0YXR1c0NvZGUnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBhbHdheXNDaGVja0Nvb2tpZVNhdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnYWx3YXlzQ2hlY2tDb29raWVTYXZlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZml4UGhvbmVURkFUcmFuc2xhdGlvbnMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnZml4UGhvbmVURkFUcmFuc2xhdGlvbnMnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBsb2FkU3NvRnJhbWVPbmx5T25jZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdsb2FkU3NvRnJhbWVPbmx5T25jZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHZlcmlmeUxvZ2luT25seU9uY2UoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgndmVyaWZ5TG9naW5Pbmx5T25jZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHNlbmRMYW5nRm9yRW1haWxPVFAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnc2VuZExhbmdGb3JFbWFpbE9UUCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHNldFByb3ZpZGVyRnJvbVJlc3BvbnNlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3NldFByb3ZpZGVyRnJvbVJlc3BvbnNlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2V0Q29va2llU2FtZVNpdGVMYXhTZXNzaW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3NldENvb2tpZVNhbWVTaXRlTGF4U2Vzc2lvbicpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHNldENvb2tpZVNhbWVTaXRlTGF4U29jaWFsKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3NldENvb2tpZVNhbWVTaXRlTGF4U29jaWFsJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2V0Q29va2llU2FtZVNpdGVMYXhMb3dQcmlvcml0eSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdzZXRDb29raWVTYW1lU2l0ZUxheExvd1ByaW9yaXR5Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZm9yY2VFcnJvclJlcG9ydCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdmb3JjZUVycm9yUmVwb3J0Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2tpcFNhbWVTY3JlZW5DaGVja09uU3dpdGNoKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3NraXBTYW1lU2NyZWVuQ2hlY2tPblN3aXRjaCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGdldE9ubHlWaXNpYmxlRmllbGQgKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2dldE9ubHlWaXNpYmxlRmllbGQnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCB1cGRhdGVBY2NvdW50SW5mb0FzeW5jICgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd1cGRhdGVBY2NvdW50SW5mb0FzeW5jJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2FuaXRpemVFdmFsdWF0ZWRWYWx1ZSAoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXQoJ3Nhbml0aXplRXZhbHVhdGVkVmFsdWUnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCB1c2VTZXNzaW9uVmVyaWZ5ICgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd1c2VTZXNzaW9uVmVyaWZ5Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdXNlRXh0ZW5kZWRQaG9uZU51bWJlclJlZ2V4ICgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd1c2VFeHRlbmRlZFBob25lTnVtYmVyUmVnZXgnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBnZW5lcmF0ZU5ld0NvZGVXY2FnQ29tcGxpYW5jZSAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnZ2VuZXJhdGVOZXdDb2RlV2NhZ0NvbXBsaWFuY2UnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBlbmZvcmNlQXV0aEZsb3dSZWRpcmVjdEZvclNvY2lhbCAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnZW5mb3JjZUF1dGhGbG93UmVkaXJlY3RGb3JTb2NpYWwnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCB1c2VEZWNvZGVVUklDb21wb25lbnQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgndXNlRGVjb2RlVVJJQ29tcG9uZW50Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdXNlT2lkY0dldFBhcmFtSGFzaE9sZFN0eWxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3VzZU9pZGNHZXRQYXJhbUhhc2hPbGRTdHlsZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHVzZVZpZXdwb3J0UG9sbGVyQWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3VzZVZpZXdwb3J0UG9sbGVyQWN0aW9uJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgaWdub3JlSW50ZXJydXB0aW9uc0luT2lkY1Bhc3NpdmVMb2dpbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdpZ25vcmVJbnRlcnJ1cHRpb25zSW5PaWRjUGFzc2l2ZUxvZ2luJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgb3ZlcnJpZGVBbGxDaGlsZENvbnRleHQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnb3ZlcnJpZGVBbGxDaGlsZENvbnRleHQnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBkaXNwYXRjaExvZ2luRXZlbnRXaGVuSGFuZGxlckFkZGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2Rpc3BhdGNoTG9naW5FdmVudFdoZW5IYW5kbGVyQWRkZWQnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldChuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIChnaWd5YS5fLmNvbmZpZz8uZmxhZ3MgJiYgZ2lneWEuXy5jb25maWc/LmZsYWdzW25hbWVdKSB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBFdmVyeSBmbGFnIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIGRhdGEgbW9kaWZpY2F0aW9uIHJlbGF0ZWQgdG8gdGhlIGFwaSBsYXllclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGFwaUZsYWdzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Z2V0LCBzZXR9IGZyb20gJy4uL1V0aWxzL3Nlc3Npb25DYWNoZSc7XG5pbXBvcnQge2dldE11cm11ckhhc2h9IGZyb20gXCIuLi9VdGlscy9vYmplY3RcIjtcblxuaW50ZXJmYWNlIElTZXNzaW9uU2VydmljZSB7XG4gICAgaXNTZXNzaW9uVmVyaWZpZWQoZ2x0OiBzdHJpbmcpOiBib29sZWFuO1xuICAgIHNldElzU2Vzc2lvblZlcmlmaWVkKGdsdDogc3RyaW5nLCB2ZXJpZnk6IGJvb2xlYW4pO1xufVxuXG5jbGFzcyBTZXNzaW9uU2VydmljZSBpbXBsZW1lbnRzIElTZXNzaW9uU2VydmljZSB7XG4gICAgcHVibGljIGlzU2Vzc2lvblZlcmlmaWVkKGdsdDogc3RyaW5nLCBhcGlLZXk6IHN0cmluZyA9IGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY3JlYXRlS2V5KGdsdCwgYXBpS2V5KTtcbiAgICAgICAgcmV0dXJuIGdldChrZXkpID09PSAndHJ1ZSc7XG4gICAgfVxuXG4gICAgcHVibGljIHNldElzU2Vzc2lvblZlcmlmaWVkKGdsdDogc3RyaW5nLCB2ZXJpZmllZDogYm9vbGVhbiwgYXBpS2V5OiBzdHJpbmcgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNyZWF0ZUtleShnbHQsIGFwaUtleSk7XG4gICAgICAgIHNldChrZXksIGAke3ZlcmlmaWVkfWApO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlS2V5KGdsdCwgYXBpS2V5KXtcbiAgICAgICAgbGV0IGtleSA9IGdldE11cm11ckhhc2goYCR7Z2x0fV8ke2FwaUtleX1gLCAxNSkudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIGJ0b2Eoa2V5KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZXNzaW9uRGF0YSA9IG5ldyBTZXNzaW9uU2VydmljZSgpO1xuIiwiaW1wb3J0IHsgZ2V0T2JqZWN0LCBzZXRPYmplY3QgfSBmcm9tIFwiLi4vVXRpbHMvbG9jYWxTdG9yYWdlXCI7XG5pbXBvcnQgeyByZW1vdmVVbmRlZmluZWQgfSBmcm9tICcuLi9VdGlscy9vYmplY3QnO1xuaW1wb3J0ICogYXMgX21lcmdlIGZyb20gJ2xvZGFzaC5tZXJnZSc7XG5cbmludGVyZmFjZSBJU2l0ZURhdGFTZXJ2aWNlIHtcbiAgZ2V0UHJlZmVycmVkTG9naW5NZXRob2QoaWRlbnRpZmllcjogc3RyaW5nKTogc3RyaW5nIHwgJydcbiAgc2V0UHJlZmVycmVkTG9naW5NZXRob2QobWV0aG9kOiBzdHJpbmcsIGlkZW50aWZpZXI6IHN0cmluZyk6IHZvaWRcbiAgZGlkRm9yY2VkQm9vdHN0cmFwOiBzdHJpbmc7XG4gIGdldFNjcmVlblZhcmlhbnQoc2NyZWVuU2V0SWQ6IHN0cmluZywgc2NyZWVuSWQ6IHN0cmluZywgdGVzdElkOiBzdHJpbmcsKTogc3RyaW5nO1xuICBzZXRTY3JlZW5WYXJpYW50KHNjcmVlblNldElkOiBzdHJpbmcsIHNjcmVlbklkOiBzdHJpbmcsIHRlc3RJZDogc3RyaW5nLCB2YXJpYW50SWQ6IHN0cmluZyk6IHZvaWQ7XG59XG5cblxuXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyUHJlZmVycmVkTG9naW5NZXRob2Qge1xuICBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIHByZWZlcnJlZExvZ2luTWV0aG9kOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVzZXJQcmVmZXJlbmNlcyB7XG4gIGF1dGhlbnRpY2F0aW9uPzoge1xuICAgIHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzOiBJVXNlclByZWZlcnJlZExvZ2luTWV0aG9kW10gfCB1bmRlZmluZWRcbiAgICB0ZmFQcmVmZXJyZWRNZXRob2Q6IGFueVxuICB9LFxuICBzY3JlZW5TZXRQcm9wZXJ0aWVzPzoge1xuICAgIFtzY3JlZW5TZXRJZDogc3RyaW5nXToge1xuICAgICAgc2NyZWVuczoge1xuICAgICAgICBbc2NyZWVuSWQ6IHN0cmluZ106IHtcbiAgICAgICAgICBbdGVzdElkOiBzdHJpbmddOiBzdHJpbmdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBNQVhfTElNSVRfT0ZfVVNFUlNfUFJFRkVSUkVEX0xPR0lOX01FVEhPRFNfUEVSX1NJVEUgPSAxMDtcblxuaW50ZXJmYWNlIElHaWdEYXRhIHtcbiAgZGlkRm9yY2VkQm9vdHN0cmFwPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgU2l0ZURhdGFTZXJ2aWNlIGltcGxlbWVudHMgSVNpdGVEYXRhU2VydmljZSB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0IFNJVEVfUFJFRkVSRU5DRVNfS0VZKCkge1xuICAgIHJldHVybiBgJHtnaWd5YS5hcGlLZXl9X3ByZWZlcmVuY2VzYDtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGdldCBTSVRFX0dJR19LRVkoKSB7XG4gICAgcmV0dXJuIGAke2dpZ3lhLmFwaUtleX1fZ2lnYFxuICB9XG5cbiAgcHVibGljIGdldCBkaWRGb3JjZWRCb290c3RyYXAoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5nZXREYXRhQnlLZXk8SUdpZ0RhdGE+KFNpdGVEYXRhU2VydmljZS5TSVRFX0dJR19LRVkpLmRpZEZvcmNlZEJvb3RzdHJhcCB8fCBudWxsO1xuICB9XG5cbiAgcHVibGljIHNldCBkaWRGb3JjZWRCb290c3RyYXAoZGlkRm9yY2VkQm9vdHN0cmFwOiBzdHJpbmcpIHtcbiAgICB0aGlzLnNldERhdGFCeUtleTxJR2lnRGF0YT4oU2l0ZURhdGFTZXJ2aWNlLlNJVEVfR0lHX0tFWSwgeyBkaWRGb3JjZWRCb290c3RyYXAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJlZmVycmVkTG9naW5NZXRob2QoaWRlbnRpZmllcjogc3RyaW5nKTogc3RyaW5nIHwgJycge1xuXG4gICAgaWYgKCFpZGVudGlmaWVyKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlclByZWZlcmVuY2VzID0gdGhpcy5nZXREYXRhQnlLZXk8SVVzZXJQcmVmZXJlbmNlcz4oU2l0ZURhdGFTZXJ2aWNlLlNJVEVfUFJFRkVSRU5DRVNfS0VZKTtcblxuICAgIGNvbnN0IHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzID0gdXNlclByZWZlcmVuY2VzPy5hdXRoZW50aWNhdGlvbj8udXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHMgPz8gW11cblxuICAgIHJldHVybiB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcy5maW5kKHVzZXIgPT4gdXNlci5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKT8ucHJlZmVycmVkTG9naW5NZXRob2QgPz8gJydcblxuICB9XG5cbiAgcHVibGljIHNldFByZWZlcnJlZExvZ2luTWV0aG9kKGF1dGhNZXRob2Q6IHN0cmluZywgaWRlbnRpZmllcjogc3RyaW5nKTogdm9pZCB7XG5cbiAgICBpZiAoIWlkZW50aWZpZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyUHJlZmVyZW5jZXMgPSB0aGlzLmdldERhdGFCeUtleTxJVXNlclByZWZlcmVuY2VzPihTaXRlRGF0YVNlcnZpY2UuU0lURV9QUkVGRVJFTkNFU19LRVkpO1xuXG4gICAgbGV0IHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzID0gWy4uLnVzZXJQcmVmZXJlbmNlcz8uYXV0aGVudGljYXRpb24/LnVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzID8/IFtdXVxuXG4gICAgbGV0IHRmYVByZWZlcnJlZE1ldGhvZCA9IHVzZXJQcmVmZXJlbmNlcz8uYXV0aGVudGljYXRpb24/LnRmYVByZWZlcnJlZE1ldGhvZCA/PyAnJztcblxuICAgIGNvbnN0IGlzVXNlckV4aXN0cyA9IHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLnNvbWUodXNlciA9PiB1c2VyLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpXG5cbiAgICBpZiAodGhpcy5pc01heExpbWl0VXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHNSZWFjaGVkKHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzKSAmJiAhaXNVc2VyRXhpc3RzKSB7XG4gICAgICB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcyA9IHRoaXMucmVtb3ZlT2xkZXN0VXNlclByZWZlcnJlZExvZ2luTWV0aG9kKHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzKVxuICAgIH1cblxuICAgIGlmICghaXNVc2VyRXhpc3RzKSB7XG4gICAgICB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcyA9IHRoaXMuYWRkVXNlclByZWZlcnJlZExvZ2luTWV0aG9kKHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLCB7IGlkZW50aWZpZXIsIHByZWZlcnJlZExvZ2luTWV0aG9kOiBhdXRoTWV0aG9kIH0pO1xuICAgIH1cblxuICAgIGlmIChpc1VzZXJFeGlzdHMpIHtcbiAgICAgIHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzID0gdGhpcy5yZWZyZXNoRXhpc3RpbmdVc2VyUHJlZmVycmVkTG9naW5NZXRob2QoeyBhdXRoTWV0aG9kLCBpZGVudGlmaWVyLCB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcyB9KVxuICAgIH1cblxuICAgIHRoaXMuc2V0RGF0YUJ5S2V5PElVc2VyUHJlZmVyZW5jZXM+KFxuICAgICAgU2l0ZURhdGFTZXJ2aWNlLlNJVEVfUFJFRkVSRU5DRVNfS0VZLFxuICAgICAgeyBhdXRoZW50aWNhdGlvbjogeyB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcywgdGZhUHJlZmVycmVkTWV0aG9kIH19XG4gICAgKTtcblxuICB9XG5cbiAgcHVibGljIHNldFNjcmVlblZhcmlhbnQoc2NyZWVuU2V0SWQ6IHN0cmluZywgc2NyZWVuSWQ6IHN0cmluZywgdGVzdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5zZXREYXRhQnlLZXk8SVVzZXJQcmVmZXJlbmNlcz4oXG4gICAgICBTaXRlRGF0YVNlcnZpY2UuU0lURV9QUkVGRVJFTkNFU19LRVksXG4gICAgICB7XG4gICAgICAgIFtzY3JlZW5TZXRJZF06IHtcbiAgICAgICAgICBzY3JlZW5zOiB7XG4gICAgICAgICAgICBbc2NyZWVuSWRdOiB7IFt0ZXN0SWRdOiB7IHZhcmlhbnQ6IHZhcmlhbnRJZCB9IH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGdldFNjcmVlblZhcmlhbnQoc2NyZWVuU2V0SWQ6IHN0cmluZywgc2NyZWVuSWQ6IHN0cmluZywgdGVzdElkOiBzdHJpbmcsKTogc3RyaW5nIHtcbiAgICBjb25zdCBwcmVmZXJlbmNlcyA9IHRoaXMuZ2V0RGF0YUJ5S2V5PElVc2VyUHJlZmVyZW5jZXM+KFNpdGVEYXRhU2VydmljZS5TSVRFX1BSRUZFUkVOQ0VTX0tFWSk7XG4gICAgcmV0dXJuIHByZWZlcmVuY2VzPy5bc2NyZWVuU2V0SWRdPy5zY3JlZW5zPy5bc2NyZWVuSWRdPy5bdGVzdElkXT8udmFyaWFudDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGF0YUJ5S2V5PFQ+KGtleTogc3RyaW5nKTogVCB7XG4gICAgcmV0dXJuIGdldE9iamVjdChrZXksIHt9KSBhcyBUO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXREYXRhQnlLZXk8VD4oa2V5OiBzdHJpbmcsIG5ld0RhdGE/OiBUKSB7XG4gICAgY29uc3Qgb2xkRGF0YSA9IHRoaXMuZ2V0RGF0YUJ5S2V5PFQ+KGtleSk7XG4gICAgdHJ5IHtcbiAgICAgIHNldE9iamVjdChrZXksIHJlbW92ZVVuZGVmaW5lZChfbWVyZ2Uob2xkRGF0YSwgbmV3RGF0YSkpKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBnaWd5YS5sb2dnZXIucmVwb3J0KCdGYWlsZWQgdG8gc2F2ZSBsb2NhbCBzaXRlIGRhdGEnLCB7IGVycm9yLCBrZXkgfSk7XG5cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlZnJlc2hFeGlzdGluZ1VzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZCh7IHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLCBpZGVudGlmaWVyLCBhdXRoTWV0aG9kIH06IHsgdXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHM6IElVc2VyUHJlZmVycmVkTG9naW5NZXRob2RbXSwgaWRlbnRpZmllcjogc3RyaW5nLCBhdXRoTWV0aG9kOiBzdHJpbmcgfSk6IElVc2VyUHJlZmVycmVkTG9naW5NZXRob2RbXSB7XG4gICAgY29uc3QgcmVtYWluaW5nTWV0aG9kcyA9IHRoaXMucmVtb3ZlVXNlclByZWZlcnJlZExvZ2luTWV0aG9kKHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLCBpZGVudGlmaWVyKTtcblxuICAgIHJldHVybiB0aGlzLmFkZFVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZChyZW1haW5pbmdNZXRob2RzLCB7IGlkZW50aWZpZXIsIHByZWZlcnJlZExvZ2luTWV0aG9kOiBhdXRoTWV0aG9kIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVVc2VyUHJlZmVycmVkTG9naW5NZXRob2QodXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHM6IElVc2VyUHJlZmVycmVkTG9naW5NZXRob2RbXSwgaWRlbnRpZmllcjogc3RyaW5nKTogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdIHtcbiAgICByZXR1cm4gdXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHMuZmlsdGVyKHVzZXJMb2dpbk1ldGhvZCA9PiB1c2VyTG9naW5NZXRob2QuaWRlbnRpZmllciAhPT0gaWRlbnRpZmllcilcbiAgfVxuXG4gIHByaXZhdGUgaXNNYXhMaW1pdFVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzUmVhY2hlZCh1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kczogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLmxlbmd0aCA9PT0gTUFYX0xJTUlUX09GX1VTRVJTX1BSRUZFUlJFRF9MT0dJTl9NRVRIT0RTX1BFUl9TSVRFXG4gIH1cblxuICBwcml2YXRlIHJlbW92ZU9sZGVzdFVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZCh1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kczogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdKTogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdIHtcbiAgICBjb25zdCBvbGRlc3RNZXRob2QgPSB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kc1swXTtcblxuICAgIHJldHVybiB0aGlzLnJlbW92ZVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZCh1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcywgb2xkZXN0TWV0aG9kPy5pZGVudGlmaWVyKVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRVc2VyUHJlZmVycmVkTG9naW5NZXRob2QodXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHM6IElVc2VyUHJlZmVycmVkTG9naW5NZXRob2RbXSwgdXNlclByZWZlcnJlZExvZ2luOiBJVXNlclByZWZlcnJlZExvZ2luTWV0aG9kKTogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdIHtcbiAgICByZXR1cm4gWy4uLnVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLCB1c2VyUHJlZmVycmVkTG9naW5dXG4gIH1cbn1cblxuXG5leHBvcnQgY29uc3Qgc2l0ZURhdGE6IElTaXRlRGF0YVNlcnZpY2UgPSBuZXcgU2l0ZURhdGFTZXJ2aWNlKCk7XG5cbiIsImltcG9ydCB7RXZlbnREaXNwYXRjaGVyfSBmcm9tICcuLi9VdGlscy9ldmVudERpc3BhdGNoZXInO1xuaW1wb3J0IHtUZmFQcm92aWRlcn0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1RGQS90eXBlcyc7XG5cbmV4cG9ydCB0eXBlIFRmYVZlcmlmaWNhdGlvbkV2ZW50cyA9ICdjaGFuZ2VBY3RpdmVEZXZpY2UnO1xuXG5leHBvcnQgdHlwZSBUZmFFdmVudHMgPSBUZmFWZXJpZmljYXRpb25FdmVudHNcblxuY2xhc3MgVGZhRXZlbnRTZXJ2aWNlIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVyPFRmYUV2ZW50cz4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigndGZhRXZlbnRzJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGFjdGl2YXRlRGV2aWNlKHByb3ZpZGVyOiBUZmFQcm92aWRlciwgZGV2aWNlSWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ2NoYW5nZUFjdGl2ZURldmljZScsIHtwcm92aWRlciwgZGV2aWNlSWR9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBUZmFFdmVudFNlcnZpY2UoKTtcbiIsImltcG9ydCB7VGZhTW9kZSwgVGZhUHJvdmlkZXJ9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvdHlwZXMnO1xuaW1wb3J0IHtnaWd5YUFzc2VydGlvbkV4cGlyYXRpb259IGZyb20gJy4uLy4uLy4uLy4uL2FjY291bnRzL2NvbnN0YW50cyc7XG5pbXBvcnQge3NlbnRJbml0VGZhUmVxdWVzdH0gZnJvbSAnLi9hcGlzJztcblxuaW50ZXJmYWNlIElHaWd5YUFzc2VydGlvbiB7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGxhc3RVcGRhdGVkVGltZXN0YW1wOiBudW1iZXI7XG59XG5cbmNsYXNzIFRmYUdpZ3lhQXNzZXJ0aW9uU2VydmljZSB7XG4gIHByaXZhdGUgYXNzZXJ0aW9uczogTWFwPHN0cmluZywgSUdpZ3lhQXNzZXJ0aW9uPiA9IG5ldyBNYXAoKTtcblxuICBwdWJsaWMgYXN5bmMgZ2V0QXNzZXJ0aW9uKG1vZGU6IFRmYU1vZGUsIHByb3ZpZGVyOiBUZmFQcm92aWRlciwgcmVxdWVzdFBhcmFtczogb2JqZWN0ID0ge30pIHtcbiAgICBjb25zdCBleGlzdGluZ0Fzc2VydGlvbiA9IHRoaXMuZ2V0RXhpc3RpbmdBc3NlcnRpb24obW9kZSwgcHJvdmlkZXIpO1xuXG4gICAgaWYgKGV4aXN0aW5nQXNzZXJ0aW9uPy52YWx1ZSAmJiB0aGlzLmlzQXNzZXJ0aW9uVmFsaWQoZXhpc3RpbmdBc3NlcnRpb24ubGFzdFVwZGF0ZWRUaW1lc3RhbXApKSB7XG4gICAgICByZXR1cm4gZXhpc3RpbmdBc3NlcnRpb24udmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3QgYXNzZXJ0aW9uVmFsdWUgPSBhd2FpdCB0aGlzLmZldGNoR2lneWFBc3NlcnRpb24oe1xuICAgICAgbW9kZSxcbiAgICAgIHByb3ZpZGVyLFxuICAgICAgLi4ucmVxdWVzdFBhcmFtc1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVBc3NlcnRpb24obW9kZSwgcHJvdmlkZXIsIGFzc2VydGlvblZhbHVlKTtcblxuICAgIHJldHVybiBhc3NlcnRpb25WYWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hHaWd5YUFzc2VydGlvbihwYXJhbXM6IHtcbiAgICBwcm92aWRlcjogVGZhUHJvdmlkZXIsXG4gICAgbW9kZTogVGZhTW9kZSxcbiAgICByZWdUb2tlbj86IHN0cmluZyxcbiAgfSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgc2VudEluaXRUZmFSZXF1ZXN0KHBhcmFtcyk7XG5cbiAgICBpZiAocmVzPy5lcnJvckNvZGUgPT0gMCAmJiByZXM/LmdpZ3lhQXNzZXJ0aW9uKSB7XG4gICAgICByZXR1cm4gcmVzLmdpZ3lhQXNzZXJ0aW9uO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRFeGlzdGluZ0Fzc2VydGlvbihtb2RlOiBUZmFNb2RlLCBwcm92aWRlcjogVGZhUHJvdmlkZXIpIHtcbiAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleShtb2RlLCBwcm92aWRlcik7XG5cbiAgICByZXR1cm4gdGhpcy5hc3NlcnRpb25zLmdldChrZXkpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVBc3NlcnRpb24obW9kZSwgcHJvdmlkZXIsIHZhbHVlKSB7XG4gICAgY29uc3Qga2V5ID0gdGhpcy5nZXRLZXkobW9kZSwgcHJvdmlkZXIpO1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHRoaXMuYXNzZXJ0aW9ucy5kZWxldGUoa2V5KVxuICAgIH1cblxuICAgIHRoaXMuYXNzZXJ0aW9ucy5zZXQoa2V5LCB7XG4gICAgICB2YWx1ZSxcbiAgICAgIGxhc3RVcGRhdGVkVGltZXN0YW1wOiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIGdldEtleShtb2RlOiBUZmFNb2RlLCBwcm92aWRlcjogVGZhUHJvdmlkZXIpIHtcbiAgICByZXR1cm4gYCR7bW9kZX0tJHtwcm92aWRlcn1gO1xuICB9XG5cbiAgcHJpdmF0ZSBpc0Fzc2VydGlvblZhbGlkKGFzc2VydGlvbkNyZWF0aW9uVGltZXN0YW1wKSB7XG4gICAgaWYgKCFhc3NlcnRpb25DcmVhdGlvblRpbWVzdGFtcCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGFzc2VydGlvbkNyZWF0aW9uVGltZXN0YW1wIDwgZ2lneWFBc3NlcnRpb25FeHBpcmF0aW9uO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBUZmFHaWd5YUFzc2VydGlvblNlcnZpY2UoKTtcbiIsImltcG9ydCB7RXZlbnREaXNwYXRjaGVyfSBmcm9tICcuLi9VdGlscy9ldmVudERpc3BhdGNoZXInO1xuaW1wb3J0IHtyZW1vdmVUZmFQaG9uZX0gZnJvbSAnLi9hcGlzJztcbmltcG9ydCB7VGZhTW9kZSwgVGZhUHJvdmlkZXJ9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvdHlwZXMnO1xuXG5leHBvcnQgdHlwZSBUZmFNYW5hZ2VtZW50UGhvbmVFdmVudHMgPSAncmVtb3ZlUGhvbmUnIHwgJ3Bob25lTGlzdFVwZGF0ZWQnO1xuZXhwb3J0IHR5cGUgVGZhTWFuYWdlbWVudEVtYWlsRXZlbnRzID0gJ3JlbW92ZUVtYWlsJyB8ICdlbWFpbExpc3RVcGRhdGVkJztcblxuZXhwb3J0IHR5cGUgVGZhTWFuYWdlbWVudEV2ZW50ID0gVGZhTWFuYWdlbWVudFBob25lRXZlbnRzIHwgVGZhTWFuYWdlbWVudEVtYWlsRXZlbnRzO1xuXG5pbXBvcnQgdGZhR2lneWFBc3NlcnRpb25TZXJ2aWNlIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9URkEvVGZhR2lneWFBc3NlcnRpb25TZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIFRmYU1hbmFnZW1lbnRTZXJ2aWNlIGV4dGVuZHMgRXZlbnREaXNwYXRjaGVyPFRmYU1hbmFnZW1lbnRFdmVudD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigndGZhTWFuYWdlbWVudCcpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJlbW92ZVBob25lKHByb3ZpZGVyOiBUZmFQcm92aWRlciwgZGV2aWNlSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBnaWd5YUFzc2VydGlvbiA9IGF3YWl0IHRmYUdpZ3lhQXNzZXJ0aW9uU2VydmljZS5nZXRBc3NlcnRpb24oVGZhTW9kZS5lZGl0LCBwcm92aWRlcik7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCByZW1vdmVUZmFQaG9uZShnaWd5YUFzc2VydGlvbiwgZGV2aWNlSWQpO1xuXG4gICAgICBpZiAocmVzLmVycm9yQ29kZSA9PT0gMCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ3JlbW92ZVBob25lJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ3RmYSBtYW5hZ2VtZW50IC0gY291bGQgbm90IHJlbW92ZSBkZXZpY2UnLCB7cmVzfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZ2lneWEubG9nZ2VyLmVycm9yKCd0ZmEgbWFuYWdlbWVudCAtIGNvdWxkIG5vdCByZW1vdmUgZGV2aWNlJywge2V9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFRmYU1hbmFnZW1lbnRTZXJ2aWNlKCk7XG4iLCJpbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnLi4vVXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQgR2lneWFSZXNwb25zZSBmcm9tICdnaWd5YS9kaXN0L2xpYi9pbnRlcmZhY2VzL2dpZ3lhLXJlc3BvbnNlJztcbmltcG9ydCB7SVRmYUVtYWlsTGlzdFJlc3BvbnNlLCBJVGZhUGhvbmVzTGlzdFJlc3BvbnNlLCBJVGZhUHJvdmlkZXJzfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVEZBL3R5cGVzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbnRJbml0VGZhUmVxdWVzdChwYXJhbXMpOiBQcm9taXNlPEdpZ3lhUmVzcG9uc2UgJiB7Z2lneWFBc3NlcnRpb246IHN0cmluZ30+IHtcbiAgcmV0dXJuIHByb21pc2lmeTxHaWd5YVJlc3BvbnNlICYge2dpZ3lhQXNzZXJ0aW9uOiBzdHJpbmd9PihnaWd5YS5hY2NvdW50cy50ZmEuaW5pdFRGQSwgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoVGZhUGhvbmVMaXN0KGdpZ3lhQXNzZXJ0aW9uKTogUHJvbWlzZTxHaWd5YVJlc3BvbnNlICYgSVRmYVBob25lc0xpc3RSZXNwb25zZT4ge1xuICByZXR1cm4gcHJvbWlzaWZ5PEdpZ3lhUmVzcG9uc2UgJiBJVGZhUGhvbmVzTGlzdFJlc3BvbnNlPihnaWd5YS5hY2NvdW50cy50ZmEucGhvbmUuZ2V0UmVnaXN0ZXJlZFBob25lTnVtYmVycywge1xuICAgIGdpZ3lhQXNzZXJ0aW9uXG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hUZmFFbWFpbExpc3QoZ2lneWFBc3NlcnRpb24pOiBQcm9taXNlPEdpZ3lhUmVzcG9uc2UgJiBJVGZhRW1haWxMaXN0UmVzcG9uc2U+IHtcbiAgcmV0dXJuIHByb21pc2lmeTxHaWd5YVJlc3BvbnNlICYgSVRmYUVtYWlsTGlzdFJlc3BvbnNlPihnaWd5YS5hY2NvdW50cy50ZmEuZW1haWwuZ2V0RW1haWxzLCB7XG4gICAgZ2lneWFBc3NlcnRpb25cbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVUZmFQaG9uZShnaWd5YUFzc2VydGlvbiwgZGV2aWNlSWQpOiBQcm9taXNlPEdpZ3lhUmVzcG9uc2U+IHtcbiAgcmV0dXJuIHByb21pc2lmeTxHaWd5YVJlc3BvbnNlPihnaWd5YS5hY2NvdW50cy50ZmEucGhvbmUucmVtb3ZlUGhvbmUsIHtcbiAgICBwaG9uZUlkOiBkZXZpY2VJZCxcbiAgICBnaWd5YUFzc2VydGlvblxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoQXZhaWxhYmxlUHJvdmlkZXJzKHBhcmFtcz8pOiBQcm9taXNlPEdpZ3lhUmVzcG9uc2UgJiBJVGZhUHJvdmlkZXJzPiB7XG4gIHJldHVybiBwcm9taXNpZnk8R2lneWFSZXNwb25zZSAmIElUZmFQcm92aWRlcnM+KGdpZ3lhLmFjY291bnRzLnRmYS5nZXRQcm92aWRlcnMsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kRW1haWxWZXJpZmljYXRpb25Db2RlKHBhcmFtcyk6IFByb21pc2U8R2lneWFSZXNwb25zZT4ge1xuICByZXR1cm4gcHJvbWlzaWZ5PEdpZ3lhUmVzcG9uc2UgJiBJVGZhUHJvdmlkZXJzPihnaWd5YS5hY2NvdW50cy50ZmEuZW1haWwuc2VuZFZlcmlmaWNhdGlvbkNvZGUsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlKHBhcmFtcyk6IFByb21pc2U8R2lneWFSZXNwb25zZT4ge1xuICByZXR1cm4gcHJvbWlzaWZ5PEdpZ3lhUmVzcG9uc2UgJiBJVGZhUHJvdmlkZXJzPihnaWd5YS5hY2NvdW50cy50ZmEucGhvbmUuc2VuZFZlcmlmaWNhdGlvbkNvZGUsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kRW1haWxDb21wbGV0ZVZlcmlmaWNhdGlvbihwYXJhbXMpOiBQcm9taXNlPEdpZ3lhUmVzcG9uc2U+IHtcbiAgcmV0dXJuIHByb21pc2lmeTxHaWd5YVJlc3BvbnNlICYgSVRmYVByb3ZpZGVycz4oZ2lneWEuYWNjb3VudHMudGZhLmVtYWlsLmNvbXBsZXRlVmVyaWZpY2F0aW9uLCBwYXJhbXMpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZFBob25lQ29tcGxldGVWZXJpZmljYXRpb24ocGFyYW1zKTogUHJvbWlzZTxHaWd5YVJlc3BvbnNlPiB7XG4gIHJldHVybiBwcm9taXNpZnk8R2lneWFSZXNwb25zZSAmIElUZmFQcm92aWRlcnM+KGdpZ3lhLmFjY291bnRzLnRmYS5waG9uZS5jb21wbGV0ZVZlcmlmaWNhdGlvbiwgcGFyYW1zKTtcbn1cblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmluYWxpemVURkEocGFyYW1zKTogUHJvbWlzZTxHaWd5YVJlc3BvbnNlPiB7XG4gIHJldHVybiBwcm9taXNpZnk8R2lneWFSZXNwb25zZSAmIElUZmFQcm92aWRlcnM+KGdpZ3lhLmFjY291bnRzLnRmYS5maW5hbGl6ZVRGQSwgcGFyYW1zKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgSVRmYVBob25lRGV2aWNlUmVzcG9uc2Uge1xuICBpZDogc3RyaW5nO1xuICBwbGFpbj86IHN0cmluZztcbiAgb2JmdXNjYXRlZDogc3RyaW5nO1xuICBsYXN0TWV0aG9kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUZmFFbWFpbERldmljZVJlc3BvbnNlIHtcbiAgaWQ6IHN0cmluZztcbiAgb2JmdXNjYXRlZDogc3RyaW5nO1xuICBsYXN0TWV0aG9kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUZmFQaG9uZXNMaXN0UmVzcG9uc2Uge1xuICBwaG9uZXM/OiBJVGZhUGhvbmVEZXZpY2VSZXNwb25zZVtdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUZmFFbWFpbExpc3RSZXNwb25zZSB7XG4gIGVtYWlscz86IElUZmFFbWFpbERldmljZVJlc3BvbnNlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRmYVBob25lSXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIHBob25lTnVtYmVyOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRmYVByb3ZpZGVySW5mbyB7XG4gIG5hbWU6IFRmYVByb3ZpZGVyLFxuICBjYXBhYmlsaXRpZXM/OiBzdHJpbmdbXVxufVxuZXhwb3J0IGludGVyZmFjZSBJVGZhUHJvdmlkZXJzIHtcbiAgYWN0aXZlUHJvdmlkZXJzOiBJVGZhUHJvdmlkZXJJbmZvW107XG4gIGluYWN0aXZlUHJvdmlkZXJzOiBJVGZhUHJvdmlkZXJJbmZvW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRmYUVtYWlsSXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFRmYVByb3ZpZGVyIHtcbiAgZW1haWwgPSAnZ2lneWFFbWFpbCcsXG4gIHBob25lID0gJ2dpZ3lhUGhvbmUnLFxuICB0b3RwID0gJ2dpZ3lhVG90cCcsXG4gIHB1c2ggPSAnZ2lneWFQdXNoJ1xufVxuXG5leHBvcnQgZW51bSBUZmFSaXNrT3JkZXJlZFByb3ZpZGVycyB7XG4gIGdpZ3lhRW1haWwsXG4gIGdpZ3lhUGhvbmUsXG4gIGdpZ3lhVG90cCxcbiAgZ2lneWFQdXNoXG59XG5cbmV4cG9ydCBlbnVtIFRmYU1vZGUge1xuICBhZGQgPSAnYWRkJyxcbiAgZWRpdCA9ICdlZGl0JyxcbiAgdmVyaWZ5ID0gJ3ZlcmlmeScsXG4gIHJlZ2lzdGVyID0gJ3JlZ2lzdGVyJ1xufVxuXG5leHBvcnQgZW51bSBUZmFQaG9uZVNlbmRDb2RlTWV0aG9kIHtcbiAgc21zID0gJ3NtcycsXG4gIHZvaWNlID0gJ3ZvaWNlJ1xufVxuIiwiaW1wb3J0IHsgbG9jYWxJbmZvIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mbyc7XG5pbXBvcnQgKiBhcyB2aWV3cG9ydFV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy92aWV3cG9ydCc7XG5pbXBvcnQgKiBhcyBmdW5jdGlvbnNVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvZnVuY3Rpb25zJztcblxuZXhwb3J0IHZhciBfcG9wdXBDb250YWluZXJzID0gW107XG5leHBvcnQgdmFyIF9wc2V1ZG9Db250YWluZXJzID0gW107XG5sZXQgX25leHRaSW5kZXggPSA5OTk5OTk5OTk7XG52YXIgYmFja0xpc3RlbmVyID0gbnVsbDtcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0WkluZGV4KCkge1xuICAgIF9uZXh0WkluZGV4Kys7XG4gICAgcmV0dXJuIF9uZXh0WkluZGV4O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEdpZ3lhU2NyaXB0RWxlbWVudChmaWxlTmFtZXM6IHN0cmluZ1tdKTogSFRNTFNjcmlwdEVsZW1lbnQge1xuICAgIHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xuICAgIHZhciBzY3JpcHRFbGVtZW50OiBIVE1MU2NyaXB0RWxlbWVudDtcbiAgICB2YXIgZ2lneWFDZG5SZWdleCA9IC9cXC9cXC9jZG4ocyk/XFwuKHJ1MVxcLik/Z2lneWEuY29tLztcbiAgICBmb3IgKHZhciBpID0gc2NyaXB0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgc2NyaXB0ID0gc2NyaXB0c1tpXTtcbiAgICAgICAgdmFyIHNyYyA9IHNjcmlwdC5zcmMudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHNyYyAhPT0gJycpIHtcbiAgICAgICAgICAgIGlmIChnaWd5YUNkblJlZ2V4LnRlc3Qoc3JjKSB8fCBzcmMuaW5kZXhPZignP2FwaWtleT0nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzRmlsZU5hbWVFeGlzdEluU3JjID0gZmlsZU5hbWVzLmxlbmd0aCA9PT0gMCB8fCBmaWxlTmFtZXMuc29tZShmaWxlTmFtZSA9PiBzcmMuaW5kZXhPZihmaWxlTmFtZSkgPiAtMSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRmlsZU5hbWVFeGlzdEluU3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdEVsZW1lbnQgPSBzY3JpcHQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2NyaXB0RWxlbWVudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChlbDogSFRNTEVsZW1lbnQsIGV2ZW50TmFtZTogc3RyaW5nKSB7XG4gICAgdmFyIGV2ZW50O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgZXZlbnQgPSBuZXcgRXZlbnQoZXZlbnROYW1lKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElFMTAgYW5kIGJlbG93IHN1cHBvcnRcbiAgICAgICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICAgICAgZXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgdHJ1ZSwge30pO1xuICAgIH1cblxuICAgIGVsLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZEJ1dHRvblN1Ym1pdExpc3RlbmVyKGVsOiBIVE1MRWxlbWVudCwgaGFuZGxlcjogRnVuY3Rpb24sIGV2ZW50OiAnY2xpY2snIHwgJ3RvdWNoZW5kJyA9ICdjbGljaycsIGRlYnVnTmFtZT86IHN0cmluZykge1xuICAgIC8vIEp1c3QgaW4gY2FzZSB0aGUgZWxlbWVudCBkb2VzIG5vdCBleGlzdC5cbiAgICBpZiAoIWVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG4gICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSAhPSAnLTEnKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBldmVudCwgKGU6IE1vdXNlRXZlbnQpID0+IGhhbmRsZXIoZSkpO1xuICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKChlLndoaWNoIHx8IGUua2V5Q29kZSkgPT0gMTMpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGhhbmRsZXIoZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihlbDogYW55LCBldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICBpZiAoIWVsIHx8ICFoYW5kbGVyKSByZXR1cm47XG5cbiAgICBpZiAoZWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWwuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkQWN0aXZhdGlvbkhhbmRsZXIoZWw6SFRNTEVsZW1lbnQsIGhhbmRsZXI6RnVuY3Rpb24pOiB2b2lke1xuICAgIGlmICghZWwgfHwgIWhhbmRsZXIpIHJldHVybjtcblxuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZWwsICdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gJ1NwYWNlJyB8fCBldmVudC5jb2RlID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGVsLCAnY2xpY2snLCBoYW5kbGVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIoZWw6IGFueSwgZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaWYgKCFlbCB8fCAhaGFuZGxlcikgcmV0dXJuO1xuICAgIGlmIChlbC5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBlbC5kZXRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZURlZmF1bHRFdmVudEhhbmRsaW5nKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSBlbHNlIGlmICh3aW5kb3cuZXZlbnQpIHtcbiAgICAgICAgd2luZG93LmV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZERpYWxvZ0JhY2tMaXN0ZW5lcihoYW5kbGVyOiAoZTogRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBfcmVtb3ZlRGlhbG9nQmFja0xpc3RlbmVyKCk7XG5cbiAgICAvLyBUaGlzIHNob3VsZCBmaXJlIHdoZW4gYmFjayBpcyBjbGlja2VkXG4gICAgYmFja0xpc3RlbmVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZSAmJiBlLm5ld1VSTCAmJiBlLm5ld1VSTC5pbmRleE9mKCd8Z2lneWFNb2JpbGVEaWFsb2cnKSA9PSAtMSkge1xuICAgICAgICAgICAgaGFuZGxlcihlKTtcbiAgICAgICAgICAgIF9yZW1vdmVEaWFsb2dCYWNrTGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBoYXNoIGNvdWxkIGNoYW5nZSByaWdodCBhZnRlciB0aGUgY2FsbCBpZiBpdCB3YXMgaW5pdGlhdGVkIGZyb20gYSBsaW5rIHRoYXQgZGlkbid0IHJldHVybiBmYWxzZVxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2guaW5kZXhPZignfGdpZ3lhTW9iaWxlRGlhbG9nJykgPT0gLTEpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2ggKyAnfGdpZ3lhTW9iaWxlRGlhbG9nJztcbiAgICAgICAgfVxuICAgICAgICBhZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ2hhc2hjaGFuZ2UnLCBiYWNrTGlzdGVuZXIpO1xuICAgIH0sIDUwKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfcmVtb3ZlRGlhbG9nQmFja0xpc3RlbmVyKCkge1xuICAgIGlmICghYmFja0xpc3RlbmVyKSByZXR1cm47XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih3aW5kb3csICdoYXNoY2hhbmdlJywgYmFja0xpc3RlbmVyKTtcbiAgICBiYWNrTGlzdGVuZXIgPSBudWxsO1xuICAgIC8vcmVzdG9yZSBwcmV2aW91cyBoYXNoXG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5yZXBsYWNlKCd8Z2lneWFNb2JpbGVEaWFsb2cnLCAnJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJlcGVuZFRvQm9keShlbDogSFRNTEVsZW1lbnQsIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50KTogdm9pZCB7XG4gICAgaWYgKCFkb2N1bWVudC5ib2R5KSByZXR1cm47XG4gICAgaWYgKGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlICYmIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCkge1xuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShlbCwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRUb0JvZHkoZWw6IEhUTUxFbGVtZW50LCBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCk6IHZvaWQge1xuICAgIGlmICghZG9jdW1lbnQuYm9keSkgcmV0dXJuO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQoZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKGVsICYmIGVsLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hpbGRPZihjaGlsZDogTm9kZSwgcGFyZW50OiBOb2RlKSB7XG4gICAgdmFyIGRpcmVjdFBhcmVudCA9IGNoaWxkLnBhcmVudE5vZGU7XG5cbiAgICB3aGlsZSAoZGlyZWN0UGFyZW50KSB7XG4gICAgICAgIGlmIChwYXJlbnQgPT0gZGlyZWN0UGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpcmVjdFBhcmVudCA9IGRpcmVjdFBhcmVudC5wYXJlbnROb2RlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1Zpc2libGUoZWw6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gICAgd2hpbGUgKGVsKSB7XG4gICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCk7XG4gICAgICAgIGlmIChjb21wdXRlZFN0eWxlLmRpc3BsYXkgPT09ICdub25lJyB8fCBjb21wdXRlZFN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2VudGVyZWREaXZJRChuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gJ2dpZ18nICsgbG9jYWxJbmZvLmluaXRUaW1lLmdldFRpbWUoKS50b1N0cmluZygpICsgJ18nICsgbmFtZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZXMoZG9tRWxlbU5hbWU6IHN0cmluZywgZG9tRWxlbUF0dHJzPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBuZXdEb21FbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChkb21FbGVtTmFtZSk7XG5cbiAgICBpZiAoZG9tRWxlbUF0dHJzKSB7XG4gICAgICAgIGZvciAobGV0IGVsZW1BdHRyIGluIGRvbUVsZW1BdHRycykge1xuICAgICAgICAgICAgbmV3RG9tRWxlbVtlbGVtQXR0cl0gPSBkb21FbGVtQXR0cnNbZWxlbUF0dHJdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld0RvbUVsZW07XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVG9wTGV2ZWxEaXYoaWQ/OiBzdHJpbmcpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBpZiAoZWwuc3R5bGUuekluZGV4ICE9IG51bGwpIHtcbiAgICAgICAgZWwuc3R5bGUuekluZGV4ID0gJycgKyBnZXROZXh0WkluZGV4KCk7XG4gICAgfVxuXG4gICAgZWwuaW5uZXJIVE1MID0gJyc7XG4gICAgaWYgKGlkKSB7XG4gICAgICAgIGVsLmlkID0gaWQ7XG4gICAgfVxuXG4gICAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlICYmIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoZWwsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVCeUlEKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3dCeUlEKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgaWYgKGVsKSB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBsb2NhbEluZm8uaXNJRTYgPyAoZWwudGFnTmFtZSA9PSAnVEQnID8gJ3RhYmxlLWNlbGwnIDogZWwudGFnTmFtZSA9PSAnVFInID8gJycgOiBlbC50YWdOYW1lID09ICdUQUJMRScgPyAnJyA6ICdibG9jaycpIDogJyc7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQnlJRChpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgICAgIGlmIChjICE9IG51bGwpIHtcbiAgICAgICAgICAgIGMuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEhUTUxTaXplKGh0bWw6IHN0cmluZywgY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHsgdzogbnVtYmVyOyBoOiBudW1iZXIgfSB7XG4gICAgdmFyIGRpdk1lYXN1cmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXZNZWFzdXJlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBkaXZNZWFzdXJlLnN0eWxlLmxlZnQgPSAnLTEwMDBweCc7XG4gICAgZGl2TWVhc3VyZS5pbm5lckhUTUwgPSBodG1sO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXZNZWFzdXJlKTtcbiAgICB2YXIgdyA9IGRpdk1lYXN1cmUub2Zmc2V0V2lkdGg7XG4gICAgdmFyIGggPSBkaXZNZWFzdXJlLm9mZnNldEhlaWdodDtcbiAgICBkaXZNZWFzdXJlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGl2TWVhc3VyZSk7XG4gICAgcmV0dXJuIHsgdzogdywgaDogaCB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRzQnlDbGFzcyhwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcsIGluY2x1ZGVQYXJlbnQ/OiBib29sZWFuKTogSFRNTEVsZW1lbnRbXSB7XG4gICAgaWYgKCFwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgdmFyIGFyRWxzID0gW107XG5cbiAgICBpZiAoaW5jbHVkZVBhcmVudCAmJiBpc0VsZW1lbnRDbGFzcyhwYXJlbnRFbGVtZW50LCBjbGFzc05hbWUpKSB7XG4gICAgICAgIGFyRWxzLnB1c2gocGFyZW50RWxlbWVudCk7XG4gICAgfVxuXG4gICAgdmFyIGVsczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4gPSBwYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykgYXMgYW55O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpc0VsZW1lbnRDbGFzcyhlbHNbaV0sIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgIGFyRWxzLnB1c2goZWxzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJFbHMgfHwgW107XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudHNCeUF0dHJpYnV0ZShwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCwgdGFnTmFtZTogc3RyaW5nLCBhdHRyaWJ1dGVOYW1lOiBzdHJpbmcsIGF0dHJpYnV0ZVZhbHVlOiBzdHJpbmcpOiBIVE1MRWxlbWVudFtdIHtcbiAgICB2YXIgYXJFbHMgPSBbXTtcbiAgICB2YXIgZWxzOiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PiA9IHBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnTmFtZSkgYXMgYW55O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChlbHNbaV0uZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpID09IGF0dHJpYnV0ZVZhbHVlKSB7XG4gICAgICAgICAgICBhckVscy5wdXNoKGVsc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyRWxzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRQb3NpdGlvbihlbDogSFRNTEVsZW1lbnQpOiB7IGxlZnQ6IG51bWJlcjsgdG9wOiBudW1iZXI7IHJpZ2h0OiBudW1iZXI7IGJvdHRvbTogbnVtYmVyIH0ge1xuICAgIGlmICghZWwpIHtcbiAgICAgICAgcmV0dXJuIHsgbGVmdDogMCwgdG9wOiAwLCBib3R0b206IDAsIHJpZ2h0OiAwIH07XG4gICAgfVxuXG4gICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB2YXIgc2Nyb2xsID0gdmlld3BvcnRVdGlscy5nZXRTY3JvbGwoKTtcbiAgICB2YXIgbGVmdCA9IHJlY3QubGVmdCArIHNjcm9sbC5sZWZ0O1xuICAgIHZhciB0b3AgPSByZWN0LnRvcCArIHNjcm9sbC50b3A7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICB0b3A6IHRvcCxcbiAgICAgICAgcmlnaHQ6IGxlZnQgKyByZWN0LndpZHRoLFxuICAgICAgICBib3R0b206IHRvcCArIHJlY3QuaGVpZ2h0LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkQ2xhc3NUb0VsZW1lbnQoZWw6IEhUTUxFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghZWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBleGlzdGluZ0NsYXNzZXMgPSBlbC5jbGFzc05hbWUgPyBnZXRDbGFzc05hbWVzKGVsKSA6IFtdO1xuICAgIHZhciBleGlzdGluZ09yaWdpbmFsTGVuZ3RoID0gZXhpc3RpbmdDbGFzc2VzLmxlbmd0aDtcbiAgICB2YXIgbmV3Q2xhc3NlcyA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xuXG4gICAgZm9yICh2YXIgaiBpbiBuZXdDbGFzc2VzKSB7XG4gICAgICAgIHZhciBleGlzdHMgPSBmYWxzZTtcbiAgICAgICAgaWYgKCFuZXdDbGFzc2VzW2pdKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgaSBpbiBleGlzdGluZ0NsYXNzZXMpIHtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0NsYXNzZXNbaV0gPT09IG5ld0NsYXNzZXNbal0pIHtcbiAgICAgICAgICAgICAgICBleGlzdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nQ2xhc3Nlcy5wdXNoKG5ld0NsYXNzZXNbal0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGV4aXN0aW5nQ2xhc3Nlcy5sZW5ndGggIT09IGV4aXN0aW5nT3JpZ2luYWxMZW5ndGgpIHtcbiAgICAgICAgZWwuY2xhc3NOYW1lID0gZXhpc3RpbmdDbGFzc2VzLmpvaW4oJyAnKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2xhc3NGcm9tRWxlbWVudChlbDogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nLCBzdWJzdHJpbmc6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmICghZWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgYXJDbGFzcyA9IGdldENsYXNzTmFtZXMoZWwpO1xuICAgIGZvciAodmFyIGkgPSBhckNsYXNzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChhckNsYXNzW2ldID09PSBjbGFzc05hbWUgfHwgKHN1YnN0cmluZyAmJiBhckNsYXNzW2ldLmluZGV4T2YoY2xhc3NOYW1lKSAhPT0gLTEpKSB7XG4gICAgICAgICAgICBhckNsYXNzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbC5jbGFzc05hbWUgPSBhckNsYXNzLmpvaW4oJyAnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRDbGFzc05hbWVzKGVsOiBIVE1MRWxlbWVudCk6IEFycmF5PHN0cmluZz4ge1xuICAgIHZhciBjbGFzc2VzOiBBcnJheTxzdHJpbmc+ID0gW107XG4gICAgaWYgKHR5cGVvZiBlbC5jbGFzc05hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNsYXNzZXMgPSBlbC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYXNzZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50Q2xhc3MoZWw6IEhUTUxFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghZWwpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmICghY2xhc3NOYW1lKSByZXR1cm4gdHJ1ZTtcbiAgICBlbHNlIGlmICghZWwuY2xhc3NOYW1lKSByZXR1cm4gZmFsc2U7XG5cbiAgICB2YXIgZXhpc3RzID0gZmFsc2U7XG4gICAgdmFyIGFyQ2xhc3MgPSBnZXRDbGFzc05hbWVzKGVsKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyQ2xhc3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFyQ2xhc3NbaV0gPT09IGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgZXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBleGlzdHM7XG59XG5leHBvcnQgZnVuY3Rpb24gY2FuY2VsRXZlbnQoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIGlmICghZXZlbnQpIHJldHVybjtcbiAgICBpZiAoJ2NhbmNlbGFibGUnIGluIGV2ZW50KVxuICAgICAgICAvLyBBbGwgYnJvd3NlcnMgZXhjZXB0IDxJRTlcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBlbHNlIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0eXBlOiBzdHJpbmcsIG5hbWU6IHN0cmluZykge1xuICAgIHZhciBkaXZDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBuYW1lID0gbmFtZSB8fCAnJztcbiAgICBkaXZDb250YWluZXIuaW5uZXJIVE1MID0gJzwnICsgdHlwZSArICcgbmFtZT1cIicgKyBuYW1lICsgJ1wiIGlkPVwiJyArIG5hbWUgKyAnXCI+PC8nICsgdHlwZSArICc+JztcbiAgICByZXR1cm4gZGl2Q29udGFpbmVyLmZpcnN0Q2hpbGQ7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0U2l6ZShjb250YWluZXI6IEhUTUxFbGVtZW50LCB3OiBhbnksIGg6IGFueSwgY2VudGVyPzogYm9vbGVhbikge1xuICAgIGlmIChjb250YWluZXIgPT0gbnVsbCB8fCBjb250YWluZXIuc3R5bGUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHcpIHtcbiAgICAgICAgdyA9ICcnICsgdztcbiAgICAgICAgdmFyIGlzV2lkdGhQcmVjZW50YWdlID0gdy5pbmRleE9mKCclJykgPiAwO1xuXG4gICAgICAgIGlmICghaXNOYU4odykgfHwgaXNXaWR0aFByZWNlbnRhZ2UpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aFZhbHVlOiBzdHJpbmcgPSAnJyArIChpc1dpZHRoUHJlY2VudGFnZSA/IHcgOiB3ICsgJ3B4Jyk7XG5cbiAgICAgICAgICAgIGlmIChjb250YWluZXIuc3R5bGUud2lkdGggIT0gd2lkdGhWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9IHdpZHRoVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaCkge1xuICAgICAgICBoID0gJycgKyBoO1xuICAgICAgICB2YXIgaXNIZWlnaHRQcmVjZW50YWdlID0gaC5pbmRleE9mKCclJykgPiAwO1xuXG4gICAgICAgIGlmICghaXNOYU4odykgfHwgaXNIZWlnaHRQcmVjZW50YWdlKSB7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0VmFsdWU6IHN0cmluZyA9ICcnICsgKGlzSGVpZ2h0UHJlY2VudGFnZSA/IGggOiBoICsgJ3B4Jyk7XG5cbiAgICAgICAgICAgIGlmIChjb250YWluZXIuc3R5bGUuaGVpZ2h0ICE9PSBoZWlnaHRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBoZWlnaHRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjZW50ZXIgJiYgdyAmJiBoKSB7XG4gICAgICAgIGlmIChjb250YWluZXIuc3R5bGUuekluZGV4ID09IG51bGwgfHwgY2VudGVyKSB7XG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUuekluZGV4ID0gJycgKyBnZXROZXh0WkluZGV4KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdnAgPSB2aWV3cG9ydFV0aWxzLmdldElubmVyU2l6ZSgpO1xuICAgICAgICB2YXIgc2NybCA9IHZpZXdwb3J0VXRpbHMuZ2V0U2Nyb2xsKCk7XG5cbiAgICAgICAgdmFyIHZwdCA9IHNjcmwudG9wO1xuICAgICAgICB2YXIgdnBsID0gc2NybC5sZWZ0O1xuXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSAnJyArIE1hdGgubWF4KDAsIHZwdCArIE1hdGguZmxvb3IoKHZwLmggLSBoKSAvIDIpKSArICdweCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJycgKyBNYXRoLm1heCgwLCB2cGwgKyBNYXRoLmZsb29yKCh2cC53IC0gdykgLyAyKSkgKyAncHgnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICcnO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIaWRkZW5JZnJhbWUoc3JjOiBzdHJpbmcpOiBIVE1MSUZyYW1lRWxlbWVudCB7XG4gICAgdmFyIGlmciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmci5zcmMgPSBzcmM7XG4gICAgaWZyLnN0eWxlLndpZHRoID0gJzMwcHgnO1xuICAgIGlmci5zdHlsZS5oZWlnaHQgPSAnMTBweCc7XG4gICAgaWZyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBpZnIuc3R5bGUudG9wID0gJy0xMDAwcHgnO1xuICAgIGlmci5zdHlsZS5sZWZ0ID0gJy0xMDAwcHgnO1xuXG4gICAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgYXBwZW5kVG9Cb2R5KGlmcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZnVuY3Rpb25zVXRpbHMuaW52b2tlT25QYWdlTG9hZCgoKSA9PiB7XG4gICAgICAgICAgICBhcHBlbmRUb0JvZHkoaWZyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlmcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhdHRyaWJ1dGVFbmNvZGUodmFsdWU6IHN0cmluZykge1xuICAgIHJldHVybiB2YWx1ZVxuICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAgICAgLnJlcGxhY2UoL1xcXCIvZywgJyZxdW90OycpXG4gICAgICAgIC5yZXBsYWNlKC9cXCcvZywgJyYjMzk7Jyk7IC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgJmFwb3M7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFuaXB1bGF0ZUF0dHJpYnV0ZXMoXG4gICAgZWxlbWVudHM6IEVsZW1lbnRbXSxcbiAgICBtYXRjaGVyOiBSZWdFeHAsXG4gICAgcmVwbGFjZVByZWRpY2F0ZTogKG1hdGNoOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgY3JpdGVyaWE6IChhdHRyPzogQXR0cikgPT4gYm9vbGVhbiA9ICgpID0+IHRydWUsXG4pOiB2b2lkIHtcbiAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgaWYgKCFlbC5hdHRyaWJ1dGVzKSByZXR1cm47XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGVsLmF0dHJpYnV0ZXMpLmZvckVhY2goYXR0ciA9PiB7XG4gICAgICAgICAgICBpZiAoY3JpdGVyaWEoYXR0cikpIHtcbiAgICAgICAgICAgICAgICBhdHRyLnZhbHVlID0gYXR0ci52YWx1ZS5yZXBsYWNlKG1hdGNoZXIsIHJlcGxhY2VQcmVkaWNhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0ZXh0Tm9kZXNVbmRlcihlbDogSFRNTEVsZW1lbnQpIHtcbiAgICBsZXQgbjtcbiAgICBjb25zdCB0ZXh0Tm9kZXM6IFRleHRbXSA9IFtdO1xuICAgIGNvbnN0IHRyZWVXYWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKGVsLCBOb2RlRmlsdGVyLlNIT1dfVEVYVCwgbnVsbCwgZmFsc2UpO1xuICAgIHdoaWxlICgobiA9IHRyZWVXYWxrZXIubmV4dE5vZGUoKSBhcyBUZXh0KSkge1xuICAgICAgICB0ZXh0Tm9kZXMucHVzaChuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHROb2Rlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0hUTUxCb29sZWFuQXR0cmlidXRlKGF0dHJOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gWydhdXRvY29tcGxldGUnLCAnYXV0b2ZvY3VzJywgJ2NoZWNrZWQnLCAnZGlzYWJsZWQnLCAnaGlkZGVuJywgJ3JlYWRvbmx5JywgJ3JlcXVpcmVkJywgJ3NlbGVjdGVkJ10uaW5kZXhPZihhdHRyTmFtZSkgPiAtMTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0JlbG9uZ1RvR2lneWFGaWVsZHNldChlbDogRWxlbWVudCk6IGJvb2xlYW4ge1xuXG4gICAgaWYgKCFlbCB8fCBlbCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGVuZCBvZiByZWN1cnNpb24gLSBlbGVtZW50IGlzIG5vdCBhIGNoaWxkIG9mIGEgZmllbGRzZXRcbiAgICB9XG5cbiAgICBpZiAoaXNFbGVtZW50Q2xhc3MoZWwucGFyZW50RWxlbWVudCwgJ2dpZ3lhLWZpZWxkc2V0Jykpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNCZWxvbmdUb0dpZ3lhRmllbGRzZXQoZWwucGFyZW50RWxlbWVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xvc2VzdEVsZW1lbnQoZWxlbSwgc2VsZWN0b3IsIHBhcmVudCA9IGRvY3VtZW50KSB7XG4gICAgc2V0TWF0Y2hlc1BvbHlmaWxsKCk7XG5cbiAgICAvLyBHZXQgdGhlIGNsb3Nlc3QgbWF0Y2hpbmcgZWxlbWVudFxuICAgIGZvciAoIDsgZWxlbSAmJiBlbGVtICE9PSBwYXJlbnQ7IGVsZW0gPSBlbGVtLnBhcmVudE5vZGUgKSB7XG4gICAgICAgIGlmIChlbGVtPy5tYXRjaGVzKHNlbGVjdG9yKSkgcmV0dXJuIGVsZW07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudEZyb21UZW1wbGF0ZSh0ZW1wbGF0ZTogc3RyaW5nID0gJycpOiBDaGlsZE5vZGUge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5pbm5lckhUTUwgPSB0ZW1wbGF0ZT8udHJpbSgpO1xuICAgIHJldHVybiBkaXYuZmlyc3RDaGlsZCA/PyBkaXY7XG59XG5mdW5jdGlvbiBzZXRNYXRjaGVzUG9seWZpbGwoKSB7XG4gICAgaWYgKCFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGFyZW50SGFzQ2xhc3MobmF0aXZlRWxlbWVudDogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZSA6c3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKG5hdGl2ZUVsZW1lbnQ/LmNsYXNzTGlzdD8uY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFuYXRpdmVFbGVtZW50Py5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGlzUGFyZW50SGFzQ2xhc3MobmF0aXZlRWxlbWVudD8ucGFyZW50RWxlbWVudCwgY2xhc3NOYW1lKTtcbn1cbiIsIlxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZShvYmo6IGFueSwgaW5jbHVkZUZ1bmN0aW9ucyA9IGZhbHNlLCBwcmV0dHlQcmludCA9IGZhbHNlLCBsID0gMCwgbWF4TGV2ZWwgPSAyMCk6IHN0cmluZyB7XG4gICAgaWYgKCFnaWd5YS5sb2NhbEluZm8uaXNJRTgpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvd1snSlNPTiddLnN0cmluZ2lmeShvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghbCkgbCA9IDA7XG5cbiAgICAgICAgaWYgKGwgPiBtYXhMZXZlbCkgcmV0dXJuICdbVG9vIGRlZXBdJztcblxuICAgICAgICB2YXIgcHJlZml4ID0gJyc7XG4gICAgICAgIHZhciBuZXdsaW5lID0gJyc7XG4gICAgICAgIHZhciB0YWIgPSAnJztcbiAgICAgICAgaWYgKHByZXR0eVByaW50KSB7XG4gICAgICAgICAgICB0YWIgPSAnXFx0JztcbiAgICAgICAgICAgIG5ld2xpbmUgPSAnXFxuJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbCArIDE7IGkrKykge1xuICAgICAgICAgICAgICAgIHByZWZpeCArPSB0YWI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHQgPSB0eXBlb2Ygb2JqO1xuICAgICAgICBpZiAodCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ICE9ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gc2ltcGxlIGRhdGEgdHlwZVxuXG4gICAgICAgICAgICBpZiAodCA9PSAnc3RyaW5nJykgb2JqID0gJ1wiJyArIG9iai5yZXBsYWNlKC8oXFxcInxcXFxcKS9nLCAnXFxcXCQxJykucmVwbGFjZSgvXFxyXFxufFxccnxcXG4vZywgJ1xcXFxuJykgKyAnXCInO1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhvYmopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG4sXG4gICAgICAgICAgICAgICAgdixcbiAgICAgICAgICAgICAgICBqc29uID0gW10sXG4gICAgICAgICAgICAgICAgYXJyID0gb2JqICYmIG9iai5jb25zdHJ1Y3RvciA9PSBBcnJheTtcbiAgICAgICAgICAgIGlmIChhcnIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2ID0gb2JqW2ldO1xuICAgICAgICAgICAgICAgICAgICB0ID0gdHlwZW9mIHY7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID09IG51bGwgfHwgdCA9PSAndW5kZWZpbmVkJykgdiA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09ICdzdHJpbmcnKSB2ID0gJ1wiJyArIHYucmVwbGFjZSgvKFxcXCJ8XFxcXCkvZywgJ1xcXFwkMScpLnJlcGxhY2UoL1xcclxcbnxcXHJ8XFxuL2csICdcXFxcbicpICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZUZ1bmN0aW9ucykgdiA9ICdGdW5jdGlvbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHYgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2LnBhcmVudE5vZGUgJiYgdi5pbm5lckhUTUwpIHYgPSAnSFRNTEVsZW1lbnQnO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2LmNvbnN0cnVjdG9yID09IERhdGUpIHYgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PSAnb2JqZWN0JyAmJiB2ICE9PSBudWxsKSB2ID0gc2VyaWFsaXplKHYsIGluY2x1ZGVGdW5jdGlvbnMsIHByZXR0eVByaW50LCBsICsgMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFN0cmluZyh2KSAhPSAnJykganNvbi5wdXNoKHByZWZpeCArIHRhYiArIFN0cmluZyh2KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKG4gaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHYgPSBvYmpbbl07XG4gICAgICAgICAgICAgICAgICAgIHQgPSB0eXBlb2YgdjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPT0gbnVsbCB8fCB0ID09ICd1bmRlZmluZWQnKSB2ID0gU3RyaW5nKHYpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09ICdzdHJpbmcnKSB2ID0gJ1wiJyArIHYucmVwbGFjZSgvKFxcXCJ8XFxcXCkvZywgJ1xcXFwkMScpLnJlcGxhY2UoL1xcclxcbnxcXHJ8XFxuL2csICdcXFxcbicpICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZUZ1bmN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAnRnVuY3Rpb24nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodi5wYXJlbnROb2RlICYmIHYuaW5uZXJIVE1MKSB2ID0gJ0hUTUxFbGVtZW50JztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodi5jb25zdHJ1Y3RvciA9PSBEYXRlKSB2ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPT0gJ29iamVjdCcgJiYgdiAhPT0gbnVsbCkgdiA9IG5ld2xpbmUgKyBzZXJpYWxpemUodiwgaW5jbHVkZUZ1bmN0aW9ucywgcHJldHR5UHJpbnQsIGwgKyAxKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoU3RyaW5nKHYpICE9ICcnKSBqc29uLnB1c2gocHJlZml4ICsgdGFiICsgJ1wiJyArIG4ucmVwbGFjZSgvKFxcXCJ8XFxcXCkvZywgJ1xcXFwkMScpLnJlcGxhY2UoL1xcclxcbnxcXHJ8XFxuL2csICdcXFxcbicpICsgJ1wiOicgKyBTdHJpbmcodikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdsaW5lICsgcHJlZml4ICsgKGFyciA/ICdbJyA6ICd7JykgKyBuZXdsaW5lICsganNvbi5qb2luKCcsJyArIG5ld2xpbmUpICsgbmV3bGluZSArIHByZWZpeCArIChhcnIgPyAnXScgOiAnfScpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplPFQ+KGpzb246IHN0cmluZywgZGVmYXVsdFZhbHVlPzogVCwgc2NvcGU/OiBhbnkpOiBUIHtcbiAgICAvLyBSZXR1cm4gZGVmYXVsdCB2YWx1ZSBpZiBpcyBlbXB0eSBzdHJpbmcgKG9yIHNpbWlsYXIpLlxuICAgIGlmICghanNvbiB8fCAhanNvbi5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSB8fCAoe30gYXMgVCk7XG4gICAgfVxuXG4gICAgLy8gQXR0ZW1wdCB0byBwYXJzZS4gT24gZXJyb3IsIHdhcm4gaW4gY29uc29sZSBhbmQgcmV0dXJuIGRlZmF1bHQgdmFsdWUuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgaWYgKHNjb3BlKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY29wZSkge1xuICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHNjb3BlW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm46IEZ1bmN0aW9uID0gZXZhbChgKGZ1bmN0aW9uKCR7a2V5cy5qb2luKCcsJyl9KSB7IHJldHVybiAke2pzb24udHJpbSgpfTsgfSlgKTtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHVuZGVmaW5lZCwgdmFsdWVzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZGVzZXJpYWxpemluZyBKYXZhU2NyaXB0JywgZSk7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgKHt9IGFzIFQpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZTxUPihqc29uOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZT86IFQpOiBUIHtcbiAgICBpZiAoZ2lneWEubG9jYWxJbmZvLmlzSUU4KSB7XG4gICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZTxUPihqc29uLCBkZWZhdWx0VmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93WydKU09OJ10ucGFyc2UoanNvbik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgKHt9IGFzIFQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgR0lHWUFfUEFSQU1fUFJFRklYIH0gZnJvbSAnLi8uLi8uLi8uLi8uLi9hY2NvdW50cy9jb25zdGFudHMnO1xuaW1wb3J0ICogYXMga2V5VmFsdWVVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMva2V5VmFsdWUnO1xuaW1wb3J0ICogYXMgb2JqZWN0VXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL29iamVjdCc7XG5cbnR5cGUgSUdldEdpZ1BhcmFtc0Zyb21VcmxDb25maWcgPSBnaWd5YS51dGlscy5VUkwuSUdldEdpZ1BhcmFtc0Zyb21VcmxDb25maWc7XG50eXBlIElHZXRDb250ZXh0UGFyYW1zRnJvbVVybENvbmZpZyA9IGdpZ3lhLnV0aWxzLlVSTC5JR2V0Q29udGV4dFBhcmFtc0Zyb21VcmxDb25maWdcblxuZXhwb3J0IGZ1bmN0aW9uIFVSTEVuY29kZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBVUkxEZWNvZGUodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gVVJMRGVjb2RlUmVjdXJzaXZlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCBwcmV2RGVjb2RpbmdSZXMgPSAnJztcbiAgICBsZXQgY3VyckRlY29kaW5nUmVzID0gdmFsdWU7XG5cbiAgICAvLyBrZWVwIGRlY29kaW5nIHVudGlsIHdlIGNhbid0IGRlY29kZSBhbnltb3JlXG4gICAgd2hpbGUgKGN1cnJEZWNvZGluZ1JlcyAhPSBwcmV2RGVjb2RpbmdSZXMpIHtcbiAgICAgICAgLy8gc3RvcmUgdGhlIGxhc3QgZGVjb2RpbmcgcmVzdWx0XG4gICAgICAgIHByZXZEZWNvZGluZ1JlcyA9IGN1cnJEZWNvZGluZ1JlcztcblxuICAgICAgICAvLyBkZWNvZGUgdGhlIHN0cmluZyBvbmNlIGFnYWluXG4gICAgICAgIGN1cnJEZWNvZGluZ1JlcyA9IFVSTERlY29kZShwcmV2RGVjb2RpbmdSZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBjdXJyRGVjb2RpbmdSZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJhbXNGcm9tVVJMKHVybDogc3RyaW5nLCBrZXlzVG9Mb3dlcj86IGJvb2xlYW4pOiBPYmplY3Qge1xuICAgIGlmICghdXJsIHx8IHVybC5pbmRleE9mKCc/JykgPT09IC0xKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgcmV0dXJuIGtleVZhbHVlVXRpbHMuZGVzZXJpYWxpemUodXJsLnNwbGl0KCcjJylbMF0uc3BsaXQoJz8nKVsxXSwgJyYnLCBrZXlzVG9Mb3dlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHaWdQYXJhbXNGcm9tVVJMKGNvbmZpZzogSUdldEdpZ1BhcmFtc0Zyb21VcmxDb25maWcpIHtcblxuICAgIGNvbnN0IHsgdXJsLCBwYXJhbVByZWZpeCwga2V5c1RvTG93ZXIsIHJlbW92ZVByZWZpeCB9ID0gY29uZmlnIHx8IHt9XG5cbiAgICBjb25zdCBwcmVmaXggPSBwYXJhbVByZWZpeCB8fCBHSUdZQV9QQVJBTV9QUkVGSVg7XG4gICAgY29uc3QgdXJsUGFyYW1zID0gZ2V0UGFyYW1zRnJvbVVSTCh1cmwsIGtleXNUb0xvd2VyKTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModXJsUGFyYW1zKVxuICAgICAgICAuZmlsdGVyKGtleSA9PiBrZXkuaW5kZXhPZihwcmVmaXgpID09PSAwICYmIGtleSAhPT0gcHJlZml4KVxuICAgICAgICAucmVkdWNlPGFueT4oKG9iaiwga2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdLZXkgPSByZW1vdmVQcmVmaXggPyBrZXkuc2xpY2UoNCkgOiBrZXk7XG4gICAgICAgICAgICBvYmpbbmV3S2V5XSA9IHVybFBhcmFtc1trZXldO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfSwge30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyYW1WYWx1ZUZyb21VUkwocGFyYW06IHN0cmluZywgdXJsOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAobnVsbCA9PSB1cmwgfHwgJycgPT0gdXJsKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3QgaXFtID0gdXJsLmluZGV4T2YoJz8nKTtcbiAgICBpZiAoaXFtID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIGNvbnN0IHFzID0gJyYnICsgdXJsLnN1YnN0cihpcW0gKyAxKTtcblxuICAgIGxldCBpZHggPSBxcy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJyYnICsgcGFyYW0udG9Mb3dlckNhc2UoKSArICc9Jyk7XG4gICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICBjb25zdCB2YWxBbmRNb3JlID0gcXMuc3Vic3RyKGlkeCArICgxICsgcGFyYW0ubGVuZ3RoICsgMSkpICsgJyYnO1xuICAgIGlkeCA9IHZhbEFuZE1vcmUuaW5kZXhPZignJicpO1xuXG4gICAgcmV0dXJuIHZhbEFuZE1vcmUuc3Vic3RyKDAsIGlkeCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkUGFyYW1zVG9VUkwodXJsOiBzdHJpbmcsIG9QYXJhbXM6IE9iamVjdCk6IHN0cmluZyB7XG4gICAgY29uc3QgcGFyYW1zID0gZ2V0UGFyYW1zRnJvbVVSTCh1cmwpO1xuICAgIG9iamVjdFV0aWxzLmFkZChwYXJhbXMsIG9QYXJhbXMpO1xuICAgIGNvbnN0IHVybEhhc2hTcGxpdCA9IHVybC5zcGxpdCgnIycpO1xuICAgIGxldCBmaW5hbFVybCA9IHVybEhhc2hTcGxpdFswXS5zcGxpdCgnPycpWzBdICsgJz8nICsga2V5VmFsdWVVdGlscy5zZXJpYWxpemUocGFyYW1zLCAnJicpO1xuICAgIGlmICh1cmxIYXNoU3BsaXQubGVuZ3RoID4gMSkge1xuICAgICAgICBmaW5hbFVybCArPSAnIycgKyB1cmxIYXNoU3BsaXRbMV07XG4gICAgfVxuICAgIHJldHVybiBmaW5hbFVybDtcbn1cblxuXG5jb25zdCByZW1vdmVVbmFjY2VwdGFibGVQYXJhbXMgPSA8VD4ocGFyYW1zOiBULCB1bmFjY2VwdGFibGVQYXJhbXM6IFJlZ0V4cCk6IFBhcnRpYWw8VD4gPT4ge1xuXG4gICAgaWYgKCF1bmFjY2VwdGFibGVQYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG5cbiAgICBjb25zdCB2YWxpZFBhcmFtczogUGFydGlhbDxUPiA9IHt9O1xuXG4gICAgT2JqZWN0LmVudHJpZXMocGFyYW1zIHx8IHt9KVxuICAgICAgICAuZmlsdGVyKChbcGFyYW1OYW1lXSkgPT4gIXVuYWNjZXB0YWJsZVBhcmFtcy50ZXN0KHBhcmFtTmFtZSkpXG4gICAgICAgIC5mb3JFYWNoKChbcGFyYW1OYW1lLCBwYXJhbVZhbHVlXTogW3N0cmluZywgc3RyaW5nXSkgPT4gdmFsaWRQYXJhbXNbcGFyYW1OYW1lXSA9IHBhcmFtVmFsdWUpXG5cbiAgICByZXR1cm4gdmFsaWRQYXJhbXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0UGFyYW1zRnJvbVVybDxUID0geyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfT4oY29uZmlnOiBJR2V0Q29udGV4dFBhcmFtc0Zyb21VcmxDb25maWcpOiBQYXJ0aWFsPFQ+IHtcblxuICAgIGNvbnN0IHsgdXJsLCBwYXJhbVByZWZpeCwgdW5hY2NlcHRhYmxlUGFyYW1zIH0gPSBjb25maWcgfHwge31cblxuICAgIGlmKCF1cmwpIHtcbiAgICAgIHJldHVybiB7fVxuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtcyA9IGdpZ3lhLnV0aWxzLlVSTC5nZXRHaWdQYXJhbXNGcm9tVVJMKHsgdXJsLCBwYXJhbVByZWZpeCB9KSBhcyBUO1xuXG4gICAgcmV0dXJuIHJlbW92ZVVuYWNjZXB0YWJsZVBhcmFtcyhwYXJhbXMsIHVuYWNjZXB0YWJsZVBhcmFtcyk7XG59XG4iLCJpbXBvcnQgKiBhcyBzdHJpbmdVdGlsc1V0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9zdHJpbmdVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBVcmkge1xuICAgIHByaXZhdGUgX2FuY2hvcjogSFRNTEFuY2hvckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaXNBYnNvbHV0ZSA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PSAnaHR0cDonID8gJ2h0dHAnIDogJ2h0dHBzJztcbiAgICAgICAgaWYgKGlzQWJzb2x1dGUgJiYgdXJsLmluZGV4T2YoJzovLycpID09PSAtMSAmJiB1cmwuY2hhckF0KDApICE9PSAnLycpIHVybCA9IGAke3Byb3RvY29sfTovLyR7dXJsfWA7XG4gICAgICAgIHRoaXMuX2FuY2hvci5ocmVmID0gdXJsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgZG9tYWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yLmhvc3RuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvci5wYXRobmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGhyZWYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbmNob3IuaHJlZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHNlYXJjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvci5zZWFyY2guc2xpY2UoMSk7XG4gICAgfSAvLyBkcm9wcGluZyAnPydcbiAgICBwdWJsaWMgZ2V0IGhhc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbmNob3IuaGFzaC5zbGljZSgxKTtcbiAgICB9IC8vIGRyb3BwaW5nICcjJ1xuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yLmhyZWY7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFRvU2VhcmNoKHBhcmFtczogT2JqZWN0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSBwYXJhbXNbbmFtZV07XG4gICAgICAgICAgICBpZiAoKHR5cGVvZiB2YWwgPT0gJ2Jvb2xlYW4nIHx8IHR5cGVvZiB2YWwgPT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbCA9PSAnc3RyaW5nJykgJiYgbmFtZSAhPSAnZXZlbnROYW1lJykge1xuICAgICAgICAgICAgICAgIGxldCBhZGRpdGlvbiA9IHRoaXMuX2FuY2hvci5zZWFyY2ggPyAnJicgOiAnJztcbiAgICAgICAgICAgICAgICB0aGlzLl9hbmNob3Iuc2VhcmNoICs9IGAke2FkZGl0aW9ufSR7bmFtZX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW25hbWVdKX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBmZXRjaDxUPihyZXRyaWVzID0gMCk6IFByb21pc2U8VD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5mZXRjaCA/IGF3YWl0IHRoaXMuYnJvd3NlckZldGNoPFQ+KCkgOiBhd2FpdCB0aGlzLnhocjxUPigpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAocmV0cmllcyA8PSAwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZmV0Y2ggZmFpbGVkOiAke2V9YCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2gocmV0cmllcyAtIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzQmFzZU9mKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBVcmkucGFyc2UodXJsKS5pc0luKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0luKGJhc2U6IHN0cmluZyk6IGJvb2xlYW47XG4gICAgcHVibGljIGlzSW4oYmFzZTogVXJpKTogYm9vbGVhbjtcbiAgICBwdWJsaWMgaXNJbihiYXNlOiBVcmkgfCBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiYXNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYmFzZSA9IFVyaS5wYXJzZShiYXNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAodGhpcy5kb21haW4gPT0gYmFzZS5kb21haW4gfHwgLy8gcGFnZSBpcyB0aGUgYmFzZSBkb21haW5cbiAgICAgICAgICAgICAgICB0aGlzLmlzU3ViRG9tYWluT2YoYmFzZSkpICYmIC8vIG9yIHN1Yi1kb21haW4gb2YgaXRcbiAgICAgICAgICAgICghYmFzZS5wYXRoIHx8IHRoaXMucGF0aC5pbmRleE9mKGJhc2UucGF0aCkgPT0gMClcbiAgICAgICAgKTsgLy8gcGFnZSBpcyBhbHNvIGluIGJhc2UncyBkZWZpbmVkIHBhdGg7XG4gICAgfVxuXG4gICAgcHVibGljIGlzRm9yU3ViRG9tYWlucygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9tYWluLmluZGV4T2YoJy4nKSA9PSAwO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc1N1YkRvbWFpbk9mKGJhc2U6IFVyaSk6IGJvb2xlYW4ge1xuICAgICAgICB2YXIgZG9tYWluID0gJyc7XG5cbiAgICAgICAgaWYgKCFiYXNlLmlzRm9yU3ViRG9tYWlucygpKSBkb21haW4gPSAnLic7XG5cbiAgICAgICAgZG9tYWluICs9IGJhc2UuZG9tYWluO1xuXG4gICAgICAgIHJldHVybiBzdHJpbmdVdGlsc1V0aWxzLmVuZHNXaXRoKHRoaXMuZG9tYWluLCBkb21haW4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2UodXJsOiBzdHJpbmcsIGlzQWJzb2x1dGUgPSB0cnVlKSB7XG4gICAgICAgIGlmICghdXJsKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiBuZXcgVXJpKHVybCwgaXNBYnNvbHV0ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBicm93c2VyRmV0Y2g8VD4oKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB3aW5kb3cuZmV0Y2godXJsKTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZmV0Y2ggZmFpbGVkYCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB4aHI8VD4oKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgICAgICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gNCB8fCB4aHIuc3RhdHVzICE9PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGB4aHIgZmFpbGVkIC0gJHt4aHIuc3RhdHVzfSAtICR7eGhyLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGpzb25SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIG1zKSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBJTnVtZXJpY01hcDxUPiB7XG4gICAgW2tleTogbnVtYmVyXTogVDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSU1hcDxUPiB7XG4gICAgW2tleTogc3RyaW5nXTogVDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUVudW1lcmFibGU8VD4ge1xuICAgIGxlbmd0aDogbnVtYmVyO1xuICAgIFtpOiBudW1iZXJdOiBUO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4T2YoYXI6IGFueVtdLCBvOiBhbnkpOiBudW1iZXIge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFyW2ldID09IG8pIHJldHVybiBpO1xuICAgIH1cbiAgICByZXR1cm4gLTE7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoYXI6IGFueVtdKSB7XG4gICAgdmFyIGFyMiA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXIyW2ldID0gYXJbaV07XG4gICAgfVxuICAgIHJldHVybiBhcjI7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQnlWYWx1ZShhcjogYW55W10sIHZhbHVlOiBPYmplY3QpIHtcbiAgICBpZiAoIWFyKSByZXR1cm47XG4gICAgZm9yICh2YXIgaSA9IGFyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChhcltpXSA9PSB2YWx1ZSkge1xuICAgICAgICAgICAgYXIuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUJ5UHJvcGVydHkoYXI6IGFueVtdLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKCFhcikgcmV0dXJuO1xuICAgIGZvciAodmFyIGkgPSBhci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAoYXJbaV1bcHJvcGVydHldID09IHZhbHVlKSB7XG4gICAgICAgICAgICBhci5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJyYXlGcm9tU3RyaW5nKHN0cjogc3RyaW5nLCBkZWxpbWl0ZXI6IHN0cmluZywgbG93ZXJDYXNlPzogYm9vbGVhbikge1xuICAgIC8vIGNoZWNrIGZvciBzdHJpbmcgdHlwZSBpbiB0aGUgaW5wdXQgYW5kIG5vdCBlbXB0eS5cbiAgICBpZiAoIXN0ciB8fCB0eXBlb2Ygc3RyICE9ICdzdHJpbmcnKSByZXR1cm4gW107XG5cbiAgICAvLyBsb3dlcmNhc2UgaWYgZGVtZW5kZWRcbiAgICBpZiAobG93ZXJDYXNlKSBzdHIgPSBzdHIudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIGNsZWFuIHRoZSBzdHJpbmc6XG4gICAgc3RyID0gc3RyLnJlcGxhY2UoL1sgXS9nLCAnJykucmVwbGFjZSgvLCwvZywgJywnKTtcblxuICAgIC8vIGlmIHN0cmluZyBlbXB0eVxuICAgIGlmICghc3RyKSByZXR1cm4gW107XG5cbiAgICAvLyByZXR1cm4gYXJyYXkgZnJvbSBzdHJpbmdcbiAgICByZXR1cm4gc3RyLnNwbGl0KGRlbGltaXRlcik7XG59XG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0KGFycmF5OiBhbnlbXSwgLi4uYXJnczogYW55W10pOiBhbnlbXSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwpIHJldHVybiBbXTtcbiAgICB2YXIgcmVzdWx0OiBhbnlbXSA9IFtdO1xuICAgIHZhciBhcmdzTGVuZ3RoOiBudW1iZXIgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBhcnJheS5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgaXRlbTogYW55ID0gYXJyYXlbaV07XG4gICAgICAgIGlmICh0aGlzLmluZGV4T2YocmVzdWx0LCBpdGVtKSAhPSAtMSkgY29udGludWU7XG4gICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgYXJnc0xlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgYXJyOiBhbnlbXSA9IGFyZ3VtZW50c1tqXTtcbiAgICAgICAgICAgIGlmIChhcnIgPT0gbnVsbCB8fCB0aGlzLmluZGV4T2YoYXJyLCBpdGVtKSA9PSAtMSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGogPT09IGFyZ3NMZW5ndGgpIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxhc3RJbmRleE9mPFQ+KGFycjogSUVudW1lcmFibGU8VD4sIHZhbDogVCwgZnJvbUluZGV4ID0gMCk6IG51bWJlciB7XG4gICAgZm9yICh2YXIgaSA9IGFyci5sZW5ndGg7IC0taSA+PSBmcm9tSW5kZXg7ICkge1xuICAgICAgICBpZiAoYXJyW2ldID09PSB2YWwpIHJldHVybiBpO1xuICAgIH1cblxuICAgIHJldHVybiAtMTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoPFQ+KGFycjogSUVudW1lcmFibGU8VD4sIGFjdGlvbjogKGVsZW1lbnQ6IFQsIGluZGV4PzogbnVtYmVyLCBhcnI/OiBJRW51bWVyYWJsZTxUPikgPT4gdm9pZCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSBhY3Rpb24oYXJyW2ldLCBpLCBhcnIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hQcm9wPFQ+KG9iajogSU1hcDxUPiwgYWN0aW9uOiAocHJvcDogVCwgbmFtZTogc3RyaW5nLCBvYmo6IElNYXA8VD4pID0+IHZvaWQpO1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hQcm9wPFQgZXh0ZW5kcyBPYmplY3Q+KG9iajogVCwgYWN0aW9uOiAocHJvcDogYW55LCBuYW1lOiBzdHJpbmcsIG9iajogVCkgPT4gdm9pZCk7XG5leHBvcnQgZnVuY3Rpb24gZm9yRWFjaFByb3Aob2JqOiBPYmplY3QsIGFjdGlvbjogKHByb3A6IGFueSwgbmFtZTogc3RyaW5nLCBvYmo6IE9iamVjdCkgPT4gdm9pZCkge1xuICAgIGZvciAodmFyIG5hbWUgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobmFtZSkpIGFjdGlvbihvYmpbbmFtZV0sIG5hbWUsIG9iaik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8VD4oYXJyOiBJRW51bWVyYWJsZTxUPiwgY29uZGl0aW9uOiAoZWxlbWVudDogVCwgaW5kZXg/OiBudW1iZXIsIGFycj86IElFbnVtZXJhYmxlPFQ+KSA9PiBib29sZWFuKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGNvbmRpdGlvbihhcnJbaV0sIGksIGFycikpIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBldmVyeTxUPihhcnI6IElFbnVtZXJhYmxlPFQ+LCBjb25kaXRpb246IChlbGVtZW50OiBULCBpbmRleD86IG51bWJlciwgYXJyPzogSUVudW1lcmFibGU8VD4pID0+IGJvb2xlYW4pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoIWNvbmRpdGlvbihhcnJbaV0sIGksIGFycikpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBldmVyeVByb3A8VD4ob2JqOiBJTWFwPFQ+LCBjb25kaXRpb246IChwcm9wOiBULCBuYW1lOiBzdHJpbmcsIG9iajogSU1hcDxUPikgPT4gYm9vbGVhbik7XG5leHBvcnQgZnVuY3Rpb24gZXZlcnlQcm9wPFQ+KG9iajogVCwgY29uZGl0aW9uOiAocHJvcCwgbmFtZTogc3RyaW5nLCBvYmo6IFQpID0+IGJvb2xlYW4pO1xuZXhwb3J0IGZ1bmN0aW9uIGV2ZXJ5UHJvcChvYmo6IE9iamVjdCwgY29uZGl0aW9uOiAocHJvcCwgbmFtZTogc3RyaW5nLCBvYmo6IE9iamVjdCkgPT4gYm9vbGVhbikge1xuICAgIGZvciAodmFyIG5hbWUgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIWNvbmRpdGlvbihvYmpbbmFtZV0sIG5hbWUsIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXA8UywgVD4oYXJyOiBJRW51bWVyYWJsZTxTPiwgYWN0aW9uOiAoZWxlbWVudDogUywgaW5kZXg/OiBudW1iZXIsIGFycj86IElFbnVtZXJhYmxlPFM+KSA9PiBUKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheTxUPigpO1xuXG4gICAgZm9yRWFjaChhcnIsIChpdGVtLCBpZHgsIGFycikgPT4gcmVzdWx0LnB1c2goYWN0aW9uKGl0ZW0sIGlkeCwgYXJyKSkpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmaXJzdEluZGV4PFQ+KGFycjogSUVudW1lcmFibGU8VD4sIGNvbmRpdGlvbjogKGVsZW1lbnQ6IFQsIGluZGV4PzogbnVtYmVyLCBhcnI/OiBJRW51bWVyYWJsZTxUPikgPT4gYm9vbGVhbik6IG51bWJlciB7XG4gICAgdmFyIHJlc3VsdDogbnVtYmVyID0gLTE7XG4gICAgc29tZShhcnIsIChpdGVtLCBpbmRleCwgYXJyKSA9PiB7XG4gICAgICAgIGlmIChjb25kaXRpb24oaXRlbSwgaW5kZXgsIGFycikpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGluZGV4O1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0PFQ+KGFycjogSUVudW1lcmFibGU8VD4sIGNvbmRpdGlvbjogKGVsZW1lbnQ6IFQsIGluZGV4PzogbnVtYmVyLCBhcnI/OiBJRW51bWVyYWJsZTxUPikgPT4gYm9vbGVhbik6IFQge1xuICAgIHJldHVybiBhcnJbZmlyc3RJbmRleChhcnIsIGNvbmRpdGlvbildO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbEVudW1WYWx1ZXM8VD4oZW51bVR5cGUpOiBUW10ge1xuICAgIHZhciByZXN1bHRzOiBUW10gPSBbXTtcblxuICAgIGZvciAodmFyIGkgaW4gZW51bVR5cGUpIGlmICh0eXBlb2YgZW51bVR5cGVbaV0gPT0gJ251bWJlcicpIHJlc3VsdHMucHVzaChlbnVtVHlwZVtpXSk7XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRVbmlxdWVWYWx1ZXM8VD4oYXJyOiBUW10pOiBUW10ge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IGFyci5sZW5ndGg7IGorKylcbiAgICAgICAgICAgIGlmIChhcnJbaV0gPT09IGFycltqXSkge1xuICAgICAgICAgICAgICAgIGFyci5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlczxUPihhcnI6IFRbXSA9IFtdLCBpdGVtOiBUKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGFycj8uaW5kZXhPZihpdGVtKSA+PSAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNPbmx5KGFycjE/OiBhbnlbXSwgYXJyMj86IGFueVtdKTogYm9vbGVhbiB7XG4gICAgaWYgKCFhcnIxIHx8ICFhcnIyKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGFycjEubGVuZ3RoICE9PSBhcnIyLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChhcnIxLmxlbmd0aCA9PT0gMCAmJiBhcnIyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuICFhcnIxLnNvbWUoZWxlbSA9PiAhaW5jbHVkZXMoYXJyMiwgZWxlbSkpO1xufVxuIiwiaW1wb3J0IHsgbG9jYWxJbmZvIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mbyc7XG5pbXBvcnQge0Nvb2tpZVN0b3JlfSBmcm9tIFwiLi9nbG9iYWxcIjtcblxuZXhwb3J0IHR5cGUgU2FtZVNpdGUgPSAnTm9uZScgfCAnU3RyaWN0JyB8ICdMYXgnO1xuXG5leHBvcnQgY2xhc3MgQ29va2llVXRpbHMge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdGVzdENvb2tpZU5hbWUgPSAnZ2lnM3BjdGVzdCc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jb29raWVTdG9yZTogQ29va2llU3RvcmUgPSBuZXcgQ29va2llU3RvcmUoKSkgeyB9XG5cbiAgICBwdWJsaWMgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZXhwaXJlc19pbj86IGFueSwgY29va2llRG9tYWluPzogc3RyaW5nLCBkb250VXNlUm9vdFBhdGg/OiBib29sZWFuLCBzYW1lU2l0ZT86IFNhbWVTaXRlKTogYm9vbGVhbiB7XG5cbiAgICAgICAgaWYgKGNvb2tpZURvbWFpbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb29raWVEb21haW4gPSB0aGlzLmdldERlZmF1bHREb21haW4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhdGggPSBkb250VXNlUm9vdFBhdGggPyAnJyA6ICcvJztcblxuICAgICAgICBjb25zdCBleHBpcmVNcyA9IHRoaXMuX2dldEV4cGlyYXRpb25Jbk1zKGV4cGlyZXNfaW4pO1xuXG4gICAgICAgIGxldCBleHBpcmVzID0gbnVsbDtcbiAgICAgICAgaWYoZXhwaXJlTXMgIT0gbnVsbCkge1xuICAgICAgICAgICAgZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBleHBpcmVzLnNldFRpbWUoZXhwaXJlcy5nZXRUaW1lKCkgKyBleHBpcmVNcyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29va2llRXhpc3QgPSB0aGlzLl9zZXRDb29raWVJbnRlcm5hbChuYW1lLCB2YWx1ZSwgcGF0aCwgZXhwaXJlcywgY29va2llRG9tYWluLCBzYW1lU2l0ZSk7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkQ29va2llRXhpc3QgPSAhZXhwaXJlTXMgfHwgZXhwaXJlTXMgPiAwO1xuXG4gICAgICAgIGlmIChzaG91bGRDb29raWVFeGlzdCA9PT0gY29va2llRXhpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgZmFpbGVkIHRvIHNldCBjb29raWUsIHJldHJ5O1xuICAgICAgICAvLyBpdCBtaWdodCBiZSBiZWNhdXNlIHRoZSBkb21haW4gaXMgbGlzdGVkIGFzIFRMRCBodHRwczovL2RhdGEuaWFuYS5vcmcvVExEL3RsZHMtYWxwaGEtYnktZG9tYWluLnR4dFxuICAgICAgICBjb25zdCBwYWdlRG9tYWluID0gbG9jYWxJbmZvLnBhZ2VEb21haW47XG4gICAgICAgIGNvb2tpZUV4aXN0ID0gdGhpcy5fc2V0Q29va2llSW50ZXJuYWwobmFtZSwgdmFsdWUsIHBhdGgsIGV4cGlyZXMsIHBhZ2VEb21haW4sIHNhbWVTaXRlKTtcblxuICAgICAgICByZXR1cm4gY29va2llRXhpc3QgPT09IHNob3VsZENvb2tpZUV4aXN0O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nvb2tpZVN0b3JlLmdldENvb2tpZShuYW1lKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlKG5hbWU6IHN0cmluZywgZG9tYWluID0gbG9jYWxJbmZvLnBhZ2VEb21haW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRnJvbUJhc2VEb21haW5zKG5hbWUsIGRvbWFpbik7XG4gICAgICAgIHRoaXMuc2V0KG5hbWUsICcnLCAtMSwgJycsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXQobmFtZSwgJycsIC0xLCAnJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEluZmluaXRlRXhwaXJhdGlvblRpbWVJblNlY29uZHMoKSB7XG4gICAgICAgIC8vIFNldCBleHBpcmF0aW9uIHRpbWUgdG8gMSB5ZWFyc1xuICAgICAgICByZXR1cm4gNjAgKiA2MCAqIDI0ICogMzY1O1xuICAgIH1cblxuICAgIHB1YmxpYyBjYW5TYXZlQ29va2llKGNvb2tpZURvbWFpbiA9IG51bGwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldChDb29raWVVdGlscy50ZXN0Q29va2llTmFtZSwgJ3RydWUnLCAxLCBjb29raWVEb21haW4sIG51bGwpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBpT1MgMTAgd2VidmlldyB0aHJvd3MgaW4gc29tZSBzY2VuYXJpb3NcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXREZWZhdWx0RG9tYWluKHBhZ2VEb21haW4gPSBsb2NhbEluZm8ucGFnZURvbWFpbiwgYmFzZURvbWFpbiA9IGxvY2FsSW5mby5iYXNlRG9tYWluIHx8ICcnKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGJhc2VEb21haW4ubGVuZ3RoID4gMCAmJiBwYWdlRG9tYWluLmxlbmd0aCA+PSBiYXNlRG9tYWluLmxlbmd0aCAmJiBwYWdlRG9tYWluLmxhc3RJbmRleE9mKGJhc2VEb21haW4pID09PSBwYWdlRG9tYWluLmxlbmd0aCAtIGJhc2VEb21haW4ubGVuZ3RoXG4gICAgICAgICAgICA/IGJhc2VEb21haW5cbiAgICAgICAgICAgIDogcGFnZURvbWFpbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRFeHBpcmF0aW9uSW5NcyhleHBpcmVzSW46IGFueSkge1xuXG4gICAgICAgIGxldCBleHBpcmVNczogbnVtYmVyO1xuICAgICAgICBpZiAoZXhwaXJlc0luID09IG51bGwgfHwgZXhwaXJlc0luID09PSAnJyB8fCBpc05hTihleHBpcmVzSW4pKSB7XG4gICAgICAgICAgICBleHBpcmVNcyA9IDEwMDAgKiB0aGlzLmdldEluZmluaXRlRXhwaXJhdGlvblRpbWVJblNlY29uZHMoKTtcbiAgICAgICAgfSBlbHNlIGlmIChleHBpcmVzSW4gPT0gMCkge1xuICAgICAgICAgICAgLy8gMCBtZWFucyBTZXNzaW9uXG4gICAgICAgICAgICBleHBpcmVNcyA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBBbnkgb3RoZXIgdmFsdWUgaXMgbnVtYmVyIG9mIHNlY29uZHMgKEEgbmVnYXRpdmUgdmFsdWUgd291bGQgbWVhbiBleHBpcmUgbm93ISlcbiAgICAgICAgICAgIGV4cGlyZU1zID0gZXhwaXJlc0luICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleHBpcmVNcztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9zZXRDb29raWVJbnRlcm5hbChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHBhdGg6IHN0cmluZywgZXhwaXJlczogRGF0ZSwgY29va2llRG9tYWluOiBzdHJpbmcsIHNhbWVTaXRlTW9kZSA9IENvb2tpZVV0aWxzLl9nZXRTYW1lU2l0ZU1vZGUoKSkge1xuICAgICAgICBjb25zdCBwcm90b2NvbCA9IGxvY2FsSW5mbz8ucHJvdG9jb2wgPz8gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICAgIGNvbnN0IGlzU2VjdXJlZCA9IHByb3RvY29sLmluZGV4T2YoJ2h0dHBzJykgPT09IDA7XG5cbiAgICAgICAgdGhpcy5fY29va2llU3RvcmUuc2V0Q29va2llKG5hbWUsIHZhbHVlLCB7XG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgICAgIGRvbWFpbjogY29va2llRG9tYWluLFxuICAgICAgICAgICAgc2FtZVNpdGU6IHNhbWVTaXRlTW9kZSxcbiAgICAgICAgICAgIHNlY3VyZTogaXNTZWN1cmVkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmdldChuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNhbWVTaXRlTW9kZSkge1xuICAgICAgICAgICAgLy9pZiBmYWlsZWQgdG8gd3JpdGUgY29va2llIHdpdGhvdXQgc2FtZVNpdGUgbW9kZSwgdGhlbiBzdG9wIGhlcmVcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzYW1lU2l0ZU1vZGUgIT09ICdOb25lJykge1xuICAgICAgICAgICAgdGhpcy5fZmFsbGJhY2tUb1NhbWVTaXRlTm9uZShuYW1lLCB2YWx1ZSwgcGF0aCwgZXhwaXJlcywgY29va2llRG9tYWluLCBpc1NlY3VyZWQpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5nZXQobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlcG9ydEZhbGxiYWNrKCdTZXR0aW5nIFNhbWVTaXRlPU5vbmUnLCB7bmFtZSwgdmFsdWUsIHNhbWVTaXRlTW9kZX0pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBmYWlsZWQgdG8gd3JpdGUgY29va2llIHdpdGggc2FtZVNpdGUgbW9kZSwgcmV0cnkgd2l0aG91dDtcbiAgICAgICAgdGhpcy5fY29va2llU3RvcmUuc2V0Q29va2llKG5hbWUsIHZhbHVlLCB7XG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgICAgIGRvbWFpbjogY29va2llRG9tYWluLFxuICAgICAgICAgICAgc2VjdXJlOiBpc1NlY3VyZWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuZ2V0KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXBvcnRGYWxsYmFjaygnQ29va2llIGVzdGFibGlzaGVkIG9ubHkgd2l0aG91dCBzYW1lU2l0ZSBtb2RlJywge25hbWUsIHZhbHVlLCBzYW1lU2l0ZU1vZGV9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3JlbW92ZUZyb21CYXNlRG9tYWlucyhuYW1lOiBzdHJpbmcsIGRvbWFpbjogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGRvbWFpblBhcnRzID0gZG9tYWluLnNwbGl0KCcuJyk7XG5cbiAgICAgICAgLy8gd2hlbiBjbGVhcmluZyBmcm9tIGEuYi5jLmQuY29tIC0tPiBjbGVhciBmcm9tIGEuYi5jLmQuY29tLCBiLmMuZC5jb20sIGMuZC5jb20sIGQuY29tXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9tYWluUGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBkb21haW4gPSBkb21haW5QYXJ0cy5zbGljZShpKS5qb2luKCcuJyk7XG4gICAgICAgICAgICB0aGlzLnNldChuYW1lLCAnJywgLTEsIGRvbWFpbiwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zZXQobmFtZSwgJycsIC0xLCBkb21haW4sIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2dldFNhbWVTaXRlTW9kZSgpIDogU2FtZVNpdGUge1xuICAgICAgICBpZiAoIUNvb2tpZVV0aWxzLl9kaXNhbGxvd1NhbWVTaXRlTW9kZSgpKSByZXR1cm4gJ05vbmUnO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIF9kaXNhbGxvd1NhbWVTaXRlTW9kZSgpIHtcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBsb2NhbEluZm8/LnByb3RvY29sID8/IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICBjb25zdCB1YSA9IGxvY2FsSW5mbz8udXNlckFnZW50ID8/IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgaXNTZWN1cmVkID0gcHJvdG9jb2wuaW5kZXhPZignaHR0cHMnKSA9PT0gMDtcblxuICAgICAgICByZXR1cm4gIWlzU2VjdXJlZCB8fCAhdWEgfHxcbiAgICAgICAgICAgIC8vIENvdmVyIGFsbCBpT1MgYmFzZWQgYnJvd3NlcnMgaGVyZS4gVGhpcyBpbmNsdWRlczpcbiAgICAgICAgICAgIC8vIC0gU2FmYXJpIG9uIGlPUyAxMiBmb3IgaVBob25lLCBpUG9kIFRvdWNoLCBpUGFkXG4gICAgICAgICAgICAvLyAtIFdrV2VidmlldyBvbiBpT1MgMTIgZm9yIGlQaG9uZSwgaVBvZCBUb3VjaCwgaVBhZFxuICAgICAgICAgICAgLy8gLSBDaHJvbWUgb24gaU9TIDEyIGZvciBpUGhvbmUsIGlQb2QgVG91Y2gsIGlQYWRcbiAgICAgICAgICAgIC8vIEFsbCBvZiB3aGljaCBhcmUgYnJva2VuIGJ5IFNhbWVTaXRlPU5vbmUsIGJlY2F1c2UgdGhleSB1c2UgdGhlIGlPUyBuZXR3b3JraW5nIHN0YWNrXG4gICAgICAgICAgICAoKHVhLmluZGV4T2YoJ0NQVSBpUGhvbmUgT1MgMTInKSA+IC0xIHx8IHVhLmluZGV4T2YoJ2lQYWQ7IENQVSBPUyAxMicpID4gLTEpIHx8XG4gICAgICAgICAgICAgICAgLy8gQ292ZXIgTWFjIE9TIFggYmFzZWQgYnJvd3NlcnMgdGhhdCB1c2UgdGhlIE1hYyBPUyBuZXR3b3JraW5nIHN0YWNrLiBUaGlzIGluY2x1ZGVzOlxuICAgICAgICAgICAgICAgIC8vIC0gU2FmYXJpIG9uIE1hYyBPUyBYLlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9lcyBub3QgaW5jbHVkZTpcbiAgICAgICAgICAgICAgICAvLyAtIENocm9tZSBvbiBNYWMgT1MgWFxuICAgICAgICAgICAgICAgIC8vIEJlY2F1c2UgdGhleSBkbyBub3QgdXNlIHRoZSBNYWMgT1MgbmV0d29ya2luZyBzdGFjay5cbiAgICAgICAgICAgICAgICAodWEuaW5kZXhPZignTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF8xNCcpID4gLTEgJiYgdWEuaW5kZXhPZignVmVyc2lvbi8nKSA+IC0xICYmIHVhLmluZGV4T2YoJ1NhZmFyaScpID4gLTEpIHx8XG4gICAgICAgICAgICAgICAgLy8gQ292ZXIgQ2hyb21lIDUwLTY5LCBiZWNhdXNlIHNvbWUgdmVyc2lvbnMgYXJlIGJyb2tlbiBieSBTYW1lU2l0ZT1Ob25lLFxuICAgICAgICAgICAgICAgIC8vIGFuZCBub25lIGluIHRoaXMgcmFuZ2UgcmVxdWlyZSBpdC5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGNvdmVycyBzb21lIHByZS1DaHJvbWl1bSBFZGdlIHZlcnNpb25zLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBwcmUtQ2hyb21pdW0gRWRnZSBkb2VzIG5vdCByZXF1aXJlIFNhbWVTaXRlPU5vbmUuXG4gICAgICAgICAgICAgICAgKHVhLmluZGV4T2YoJ0Nocm9tZS81JykgPiAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUvNicpID4gLTEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9mYWxsYmFja1RvU2FtZVNpdGVOb25lKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgcGF0aDogc3RyaW5nLCBleHBpcmVzOiBEYXRlLCBjb29raWVEb21haW46IHN0cmluZywgc2VjdXJlOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2Nvb2tpZVN0b3JlLnNldENvb2tpZShuYW1lLCB2YWx1ZSwge1xuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIGV4cGlyZXMsXG4gICAgICAgICAgICBkb21haW46IGNvb2tpZURvbWFpbixcbiAgICAgICAgICAgIHNhbWVTaXRlOiAnTm9uZScsXG4gICAgICAgICAgICBzZWN1cmVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcmVwb3J0RmFsbGJhY2sobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzOiB7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICAgICAgc2FtZVNpdGVNb2RlOiBzdHJpbmc7XG4gICAgICAgIGlzU3VjY2Vzc2Z1bD86IGJvb2xlYW47XG4gICAgICAgIGlzSWZyYW1lPzogYm9vbGVhbjtcbiAgICB9KSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoYENvb2tpZSBQb2xpY3kgRmFsbGJhY2s6ICR7bWVzc2FnZX1gLCB7Li4uZGV0YWlscywgaXNJZnJhbWU6IHRoaXMuX2lzSUZyYW1lKCl9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSAgX2lzSUZyYW1lKCk6IGJvb2xlYW4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdz8ubG9jYXRpb24gIT09IHdpbmRvdz8ucGFyZW50Py5sb2NhdGlvbjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IENvb2tpZVV0aWxzKCk7XG4iLCJpbXBvcnQgeyBVcmkgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvVXJpJztcbmltcG9ydCAqIGFzIHN0cmluZ1V0aWxzVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3N0cmluZ1V0aWxzJztcbmltcG9ydCB7IGxvY2FsSW5mbyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9Mb2NhbEluZm8nO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSAnLi4vU2VydmljZXMvRmxhZ1NlcnZpY2UnO1xuaW1wb3J0IGNvb2tpZSBmcm9tICcuL2Nvb2tpZSc7XG5cbi8vIFRPRE86IG1vdmUgdG8gY29uZmlnXG5sZXQgYmFzZURvbWFpbnM6IHN0cmluZ1tdfHN0cmluZztcbmlmIChnaWd5YS5wYXJ0bmVyU2V0dGluZ3M/LmJhc2VEb21haW5zPy5sZW5ndGgpIHtcbiAgICBiYXNlRG9tYWlucyA9IGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5iYXNlRG9tYWlucyBhcyBzdHJpbmdbXXxzdHJpbmc7XG59IGVsc2Uge1xuICAgIGlmICh3aW5kb3cuc2VsZiA9PT0gd2luZG93LnRvcCkge1xuICAgICAgICAvLyBvbmx5IGluIHRoZSB0b3AgZnJhbWVcbiAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oJ2dpZ3lhOiBtaXNzaW5nIGJhc2UgZG9tYWlucyBmb3Igc2l0ZScpO1xuICAgIH1cbiAgICBiYXNlRG9tYWlucyA9IFtkb2N1bWVudC5sb2NhdGlvbi5ob3N0bmFtZV07XG59XG5sb2NhbEluZm8uYmFzZURvbWFpbiA9IGdldEJhc2VEb21haW4oYmFzZURvbWFpbnMpO1xuZXhwb3J0IGRlY2xhcmUgdmFyIGdldEFwaURvbWFpbjogKG5hbWVzcGFjZT86IHN0cmluZykgPT4gc3RyaW5nO1xuY29uc3QgZ2lneWFEb21haW5OYW1lc3BhY2VzID0gWydzb2NpYWxpemUnLCAnYWNjb3VudHMnLCAnZmlkbScsICdnbScsICdjb21tZW50cycsICdnY3MnLCAnaWRzJywgJ2RzJywgJ2dzY291bnRlcnMnLCAncmVwb3J0cyddO1xuZXhwb3J0IGZ1bmN0aW9uIGFwaURvbWFpbkZhY3RvcnkoYXBpRG9tYWluID0gcmVzb2x2ZUFwaURvbWFpbigpLCBkZWZhdWx0QXBpRG9tYWluID0gZ2lneWEuZGVmYXVsdEFwaURvbWFpbik6IChuYW1lc3BhY2U/OiBzdHJpbmcpID0+IHN0cmluZyB7XG5cbiAgICBjb25zdCBzaG91bGRBZGROYW1lc3BhY2UgPSBVcmkucGFyc2UoYXBpRG9tYWluKS5pc0luKFVyaS5wYXJzZShkZWZhdWx0QXBpRG9tYWluKSk7XG5cbiAgICByZXR1cm4gKG5hbWVzcGFjZT86IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAobmFtZXNwYWNlICYmIHNob3VsZEFkZE5hbWVzcGFjZSkge1xuICAgICAgICAgICAgbGV0IHN1YkRvbWFpbiA9IG5hbWVzcGFjZS5zcGxpdCgnLicpWzBdO1xuICAgICAgICAgICAgaWYgKHN1YkRvbWFpbiA9PT0gJ3NkaycgfHwgc3ViRG9tYWluID09PSAnb2F1dGgnKSB7XG4gICAgICAgICAgICAgICAgc3ViRG9tYWluID0gJ2FjY291bnRzJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2lneWFEb21haW5OYW1lc3BhY2VzLmluZGV4T2Yoc3ViRG9tYWluKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcihgdHJ5aW5nIHRvIHNlbmQgcmVxdWVzdCB0byBhbiBpbnZhbGlkIGRvbWFpbmApO1xuICAgICAgICAgICAgICAgIHN1YkRvbWFpbiA9IGdpZ3lhRG9tYWluTmFtZXNwYWNlc1swXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGAke3N1YkRvbWFpbn0uJHthcGlEb21haW59YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlEb21haW47XG4gICAgICAgIH1cbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEdpZ3lhRG9tYWluKG5hbWVzcGFjZT86IHN0cmluZywgZGF0YUNlbnRlciA9IGdpZ3lhLmRhdGFDZW50ZXIsIGRlZmF1bHREb21haW4gPSBnaWd5YS5kZWZhdWx0QXBpRG9tYWluKSB7XG4gICAgaWYoZGVmYXVsdERvbWFpbiA9PT0gJ3NhcGNkbS5jbicgJiYgZGF0YUNlbnRlciAhPT0gJ2NuMScpIHtcbiAgICAgICAgZGVmYXVsdERvbWFpbiA9IGBjbjEuJHtkZWZhdWx0RG9tYWlufWA7IC8vRml4IGZvciBjbjEtc3QxLiBpdCBzaG91bGQgYmUgY24xLXN0MS5jbjEuc2FwY2RtLmNuIGFuZCBub3QgY24xLXN0MS5zYXBjZG0uY25cbiAgICB9XG4gICAgY29uc3QgZG9tYWluID0gYCR7ZGF0YUNlbnRlcn0uJHtkZWZhdWx0RG9tYWlufWA7XG5cbiAgICBpZiAobmFtZXNwYWNlKSByZXR1cm4gYCR7bmFtZXNwYWNlfS4ke2RvbWFpbn1gO1xuICAgIGVsc2UgcmV0dXJuIGRvbWFpbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYXNlRG9tYWluKFxuICAgIGJhc2VEb21haW5zOiBzdHJpbmdbXXxzdHJpbmcgPSBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MuYmFzZURvbWFpbnMsXG4gICAgY3VycmVudERvbWFpbiA9IGxvY2F0aW9uLmhvc3RuYW1lLFxuICAgIGRlZmF1bHREb21haW5zID0gWydnaWd5YS5jb20nLCAnY24xLnNhcGNkbS5jbicsICdsb2NhbGhvc3QnLCBnaWd5YS5kZWZhdWx0QXBpRG9tYWluXSxcbik6IHN0cmluZyB7XG4gICAgLy8gIzQ5Nzg2IC0gU3VwcG9ydCB3ZWJ2aWV3IHdpdGhvdXQgaG9zdG5hbWUuXG4gICAgaWYgKCFjdXJyZW50RG9tYWluKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGJhc2VEb21haW5zID09ICdzdHJpbmcnKSB7XG4gICAgICAgIGJhc2VEb21haW5zID0gYmFzZURvbWFpbnMuc3BsaXQoJywnKTtcbiAgICB9XG5cbiAgICBsZXQgb3JpZ2luVVJJID0gVXJpLnBhcnNlKGN1cnJlbnREb21haW4pO1xuXG4gICAgaWYgKGRlZmF1bHREb21haW5zKSB7XG4gICAgICAgIGJhc2VEb21haW5zID0gYmFzZURvbWFpbnMuY29uY2F0KGRlZmF1bHREb21haW5zKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCByYXdEb21haW4gb2YgYmFzZURvbWFpbnMpIHtcbiAgICAgICAgLy8gVGhpcyBkb2VzIG5vdCB0YWtlIGNhcmUgb2Ygd2lsZGNhcmRzIGluIHRoZSBtaWRkbGUgb2Ygc3RyaW5nLlxuICAgICAgICBjb25zdCBiYXNlRG9tYWluID0gc3RyaW5nVXRpbHNVdGlscy5yZXBsYWNlQWxsKHJhd0RvbWFpbiwgJyonLCAnJyk7XG4gICAgICAgIGNvbnN0IGJhc2VVcmkgPSBVcmkucGFyc2UoYmFzZURvbWFpbik7XG4gICAgICAgIGlmIChiYXNlVXJpICYmIG9yaWdpblVSSS5pc0luKGJhc2VVcmkpKSB7XG4gICAgICAgICAgICBpZiAoIWdpZ3lhLl8pIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5fID0ge30gYXMgYW55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2lneWEuXy5pc1RydXN0ZWREb21haW49IHRydWU7XG4gICAgICAgICAgICBpZiAoYmFzZVVyaS5pc0ZvclN1YkRvbWFpbnMoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5VUkkuZG9tYWluO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZVVyaS5kb21haW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmYWxsYmFjayB0byB0aGUgcGFyZW50J3Mgd2luZG93IGRvbWFpbiAoZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpLlxuICAgIHJldHVybiBvcmlnaW5VUkkuZG9tYWluO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUFwaURvbWFpbihcbiAgICBjdXN0b21BcGlEb21haW5QcmVmaXggPSBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MgJiYgZ2lneWEucGFydG5lclNldHRpbmdzLmN1c3RvbUFQSURvbWFpblByZWZpeCxcbiAgICBiYXNlRG9tYWluID0gbG9jYWxJbmZvLmJhc2VEb21haW4sXG4gICAgZGF0YUNlbnRlciA9IGdpZ3lhLmRhdGFDZW50ZXIsXG4gICAgZGVmYXVsdEFwaURvbWFpbiA9IGdpZ3lhLmRlZmF1bHRBcGlEb21haW4sXG4pIHtcbiAgICBjb25zdCBhcGlEb21haW4gPSBnZXRIb3N0ZWRQYWdlc0FwaURvbWFpbkNvb2tpZSgpO1xuICAgIGlmIChhcGlEb21haW4pIHtcbiAgICAgICAgcmV0dXJuIGFwaURvbWFpbjtcbiAgICB9XG4gICAgLy8gVE9ETzogcmVtb3ZlIG9uY2UgYSBzb2x1dGlvbiB3aWxsIGJlIGZvdW5kIGZvciBob3N0ZWQgcGFnZXNcbiAgICBpZiAoYmFzZURvbWFpbi5lbmRzV2l0aChnaWd5YS5fLmNvbmZpZz8uaG9zdGVkUGFnZXNEb21haW4gfHwgJ215LmdpZ3lhLWV4dC5jb20nKSkge1xuICAgICAgICByZXR1cm4gYmFzZURvbWFpbjtcbiAgICB9XG4gICAgaWYgKGN1c3RvbUFwaURvbWFpblByZWZpeCAmJiBiYXNlRG9tYWluICYmIGJhc2VEb21haW4gIT09IGRlZmF1bHRBcGlEb21haW4pIHtcbiAgICAgICAgcmV0dXJuIGAke2N1c3RvbUFwaURvbWFpblByZWZpeH0uJHtiYXNlRG9tYWlufWA7XG4gICAgfVxuICAgIHJldHVybiBnZXRHaWd5YURvbWFpbih1bmRlZmluZWQsIGRhdGFDZW50ZXIsIGRlZmF1bHRBcGlEb21haW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmFnZURvbWFpbigpIHtcbiAgICBjb25zdCBhcGlEb21haW4gPSBnZXRIb3N0ZWRQYWdlc0FwaURvbWFpbkNvb2tpZSgpO1xuICAgIGlmIChhcGlEb21haW4pIHtcbiAgICAgICAgcmV0dXJuIGFwaURvbWFpbjtcbiAgICB9XG4gICAgaWYgKGdpZ3lhLnRoaXNTY3JpcHQ/Lmdsb2JhbENvbmY/Llsnc3RvcmFnZURvbWFpbk92ZXJyaWRlJ10pIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZlsnc3RvcmFnZURvbWFpbk92ZXJyaWRlJ107XG4gICAgfVxuICAgIGlmIChnaWd5YS50aGlzU2NyaXB0Py5iYXNlRG9tYWluICYmIEZsYWdTZXJ2aWNlLnVzZUdpZ3lhSnNCYXNlRG9tYWluKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS50aGlzU2NyaXB0LmJhc2VEb21haW47XG4gICAgfVxuICAgIGxldCBkb21haW4gPSBnaWd5YS5kZWZhdWx0QXBpRG9tYWluXG4gICAgaWYgKGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLmVuZHNXaXRoKGRvbWFpbiwgJ3NhcGNkbS5jbicpICYmIGdpZ3lhLmRhdGFDZW50ZXIgIT09ICdjbjEnKSB7IC8vIHNwZWNpYWwgY2FzZSB3aXRoIGNoaW5hIGRvbWFpbiBzdGFnaW5nXG4gICAgICAgIGRvbWFpbiA9IGBjbjEuc2FwY2RtLmNuYDtcbiAgICB9XG4gICAgY29uc3QgcHJlZml4ID0gZ2lneWEuZGF0YUNlbnRlciAhPT0gJ2dsb2JhbCcgPyBgY2Rucy4ke2dpZ3lhLmRhdGFDZW50ZXJ9YCA6IGBjZG5zYDtcbiAgICByZXR1cm4gYCR7cHJlZml4fS4ke2RvbWFpbn1gO1xufVxuXG5mdW5jdGlvbiBnZXRIb3N0ZWRQYWdlc0FwaURvbWFpbkNvb2tpZSgpIHtcbiAgICByZXR1cm4gY29va2llLmdldChgcGFnZXNfYXBpRG9tYWluXyR7Z2lneWEuYXBpS2V5fWApO1xufVxuIiwiaW1wb3J0ICogYXMgZ2xvYmFsRXZlbnRzIGZyb20gJy4uL0dsb2JhbEV2ZW50cyc7XG5leHBvcnQgdHlwZSBFdmVudEhhbmRsZXIgPSAoZGF0YTogYW55KSA9PiB2b2lkO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRXZlbnREaXNwYXRjaGVyPFQgZXh0ZW5kcyBzdHJpbmc+IHtcbiAgcHJpdmF0ZSBldmVudEhhbmRsZXJzOiBNYXA8c3RyaW5nLCBFdmVudEhhbmRsZXJbXT47XG4gIHByb3RlY3RlZCByZWFkb25seSBldmVudFByZWZpeDtcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKGV2ZW50UHJlZml4KSB7XG4gICAgdGhpcy5ldmVudFByZWZpeCA9IGV2ZW50UHJlZml4O1xuICAgIHRoaXMuZXZlbnRIYW5kbGVycyA9IG5ldyBNYXA8c3RyaW5nLCBFdmVudEhhbmRsZXJbXT4oKVxuICB9XG5cbiAgcHVibGljIG9uKGV2ZW50TmFtZTogVCwgaGFuZGxlcjogRXZlbnRIYW5kbGVyKSB7XG4gICAgY29uc3QgZnVsbEV2ZW50TmFtZSA9IHRoaXMuZ2V0RnVsbEV2ZW50TmFtZShldmVudE5hbWUpO1xuXG4gICAgaWYgKCF0aGlzLmV2ZW50SGFuZGxlcnMuZ2V0KGZ1bGxFdmVudE5hbWUpKSB7XG4gICAgICB0aGlzLmV2ZW50SGFuZGxlcnMuc2V0KGZ1bGxFdmVudE5hbWUsIFtdKTtcbiAgICB9XG4gICAgdGhpcy5ldmVudEhhbmRsZXJzLmdldChmdWxsRXZlbnROYW1lKS5wdXNoKGhhbmRsZXIpO1xuICB9XG5cbiAgcHVibGljIHVuc3Vic2NyaWJlKGV2ZW50OiBUKSB7XG4gICAgY29uc3QgZnVsbEV2ZW50TmFtZSA9IHRoaXMuZ2V0RnVsbEV2ZW50TmFtZShldmVudCk7XG5cbiAgICB0aGlzLmV2ZW50SGFuZGxlcnMuZGVsZXRlKGZ1bGxFdmVudE5hbWUpO1xuICB9XG5cbiAgcHVibGljIGRpc3BhdGNoRXZlbnQoZXZlbnROYW1lOiBULCBkYXRhPzogYW55KSB7XG4gICAgY29uc3QgZnVsbEV2ZW50TmFtZSA9IHRoaXMuZ2V0RnVsbEV2ZW50TmFtZShldmVudE5hbWUpO1xuXG4gICAgZm9yIChjb25zdCBmbiBvZiB0aGlzLmV2ZW50SGFuZGxlcnMuZ2V0KGZ1bGxFdmVudE5hbWUpIHx8IFtdKSB7XG4gICAgICBmbihkYXRhKTtcbiAgICB9XG4gICAgZ2xvYmFsRXZlbnRzLmRpc3BhdGNoKHtcbiAgICAgIGV2ZW50TmFtZTogZnVsbEV2ZW50TmFtZSxcbiAgICAgIC4uLmRhdGFcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRGdWxsRXZlbnROYW1lKGV2ZW50TmFtZTogVCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuZXZlbnRQcmVmaXh9JHtldmVudE5hbWV9YDtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgRE9NVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL0RPTSc7XG5pbXBvcnQgeyBnZXRDZG5SZXNvdXJjZSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9jZG4nO1xuaW1wb3J0IHsgbG9jYWxJbmZvIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mbyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxsQXN5bmM8VD4obWV0aG9kTmFtZTogc3RyaW5nLCBwYXJhbXMgPSB7fSk6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPihyZXNvbHZlID0+IHtcbiAgICAgICAgY2FsbEZ1bmN0aW9uKGBnaWd5YS4ke21ldGhvZE5hbWV9YCwgW3suLi5wYXJhbXMsIGNhbGxiYWNrOiByZXNvbHZlfV0pO1xuICAgIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxsRnVuY3Rpb24obmFtZTogc3RyaW5nLCBhclBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICB2YXIgZm4gPSBldmFsKG5hbWUpO1xuICAgIHZhciBhclBhcnRzID0gbmFtZS5zcGxpdCgnLicpO1xuICAgIGFyUGFydHMuc3BsaWNlKGFyUGFydHMubGVuZ3RoIC0gMSwgMSk7XG4gICAgdmFyIHNjb3BlID0gZXZhbChhclBhcnRzLmpvaW4oJy4nKSk7XG4gICAgZm4uYXBwbHkoc2NvcGUsIGFyUGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZU9uUGFnZUxvYWQoZnVuYzogRnVuY3Rpb24sIGNvbXBsZXRlT25seT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICAgICghZG9jdW1lbnQucmVhZHlTdGF0ZSAmJiBkb2N1bWVudC5ib2R5KSB8fFxuICAgICAgICBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnIHx8XG4gICAgICAgICghY29tcGxldGVPbmx5ICYmIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScgJiYgZG9jdW1lbnQuYm9keSlcbiAgICApIHtcbiAgICAgICAgZnVuYygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZm5PbkxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmdW5jKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZm5PbkxvYWQsIDIwMDAwKTsgLy8gZmFsbGJhY2sgLSBzb21ldGltZXMgcmVhZHlzdGF0ZSBzdGF5cyBzdHVjayBvbiBpbnRlcmFjdGl2ZVxuXG4gICAgICAgIERPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnbG9hZCcsIGZuT25Mb2FkKTtcbiAgICAgICAgRE9NVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ0RPTUNvbnRlbnRMb2FkZWQnLCBmbk9uTG9hZCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFsaWFzKHB1YmxpY05hbWU6IHN0cmluZywgZm5jOiBGdW5jdGlvbiB8IHsgW2tleTogc3RyaW5nXTogYW55IH0pOiB2b2lkIHtcbiAgICBjb25zdCBhck5hbWVTZWdtZW50cyA9IHB1YmxpY05hbWUuc3BsaXQoJy4nKTtcbiAgICBsZXQgb0N1cnJlbnRTZWdtZW50ID0gd2luZG93O1xuICAgIGZvciAobGV0IGlTZWdtZW50ID0gMDsgaVNlZ21lbnQgPCBhck5hbWVTZWdtZW50cy5sZW5ndGggLSAxOyBpU2VnbWVudCsrKSB7XG4gICAgICAgIGNvbnN0IHNTZWdtZW50ID0gYXJOYW1lU2VnbWVudHNbaVNlZ21lbnRdO1xuICAgICAgICBpZiAoIW9DdXJyZW50U2VnbWVudFtzU2VnbWVudF0pIHtcbiAgICAgICAgICAgIG9DdXJyZW50U2VnbWVudFtzU2VnbWVudF0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBvQ3VycmVudFNlZ21lbnQgPSBvQ3VycmVudFNlZ21lbnRbc1NlZ21lbnRdO1xuICAgIH1cbiAgICBvQ3VycmVudFNlZ21lbnRbYXJOYW1lU2VnbWVudHNbYXJOYW1lU2VnbWVudHMubGVuZ3RoIC0gMV1dID0gZm5jO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlKGZuOiAoKSA9PiB2b2lkLCBkZWxheU1pbGxpc2Vjb25kczogbnVtYmVyKTogKCkgPT4gdm9pZCB7XG4gICAgbGV0IHRpbWVyOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGltZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICB9LCBkZWxheU1pbGxpc2Vjb25kcykgYXMgYW55O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkU3JjVG9JRnJhbWVJZk5lZWRlZChpZnJhbWU6IEhUTUxJRnJhbWVFbGVtZW50LCBzcmM6IHN0cmluZyA9IGdldENkblJlc291cmNlKCcvJykpIHtcbiAgICBpZiAobG9jYWxJbmZvLmlzSU9TV2ViVmlldyB8fCAobG9jYWxJbmZvLmlzSU9TICYmIGxvY2FsSW5mby5pc1dlQ2hhdCkpIHtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTtcbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIElDb29raWVPcHRpb25zIHtcbiAgICBwYXRoPzogc3RyaW5nO1xuICAgIGRvbWFpbj86IHN0cmluZztcbiAgICBleHBpcmVzPzogRGF0ZTtcbiAgICBzYW1lU2l0ZT86ICdOb25lJyB8ICdTdHJpY3QnIHwgJ0xheCc7XG4gICAgc2VjdXJlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIENvb2tpZVN0b3JlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3dpbjogV2luZG93ID0gd2luZG93KSB7IH1cblxuICAgIHNldENvb2tpZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IElDb29raWVPcHRpb25zKSB7XG4gICAgICAgIGxldCBjb29raWVTdHJpbmcgPSBgJHtuYW1lfT0ke2VzY2FwZSh2YWx1ZSl9YDtcbiAgICAgICAgaWYob3B0aW9ucy5wYXRoKSBjb29raWVTdHJpbmcgKz0gYDsgcGF0aD0ke29wdGlvbnMucGF0aH1gO1xuICAgICAgICBpZihvcHRpb25zLmV4cGlyZXMpIGNvb2tpZVN0cmluZyArPSBgOyBleHBpcmVzPSR7b3B0aW9ucy5leHBpcmVzLnRvVVRDU3RyaW5nKCl9YDtcbiAgICAgICAgaWYob3B0aW9ucy5kb21haW4gJiYgb3B0aW9ucy5kb21haW4uaW5kZXhPZignLicpICE9IC0xKSBjb29raWVTdHJpbmcgKz0gYDsgZG9tYWluPSR7b3B0aW9ucy5kb21haW59YDtcbiAgICAgICAgaWYob3B0aW9ucy5zYW1lU2l0ZSkgY29va2llU3RyaW5nICs9IGA7IHNhbWVTaXRlPSR7b3B0aW9ucy5zYW1lU2l0ZX1gO1xuICAgICAgICBpZihvcHRpb25zLnNlY3VyZSkgY29va2llU3RyaW5nICs9IGA7IHNlY3VyZWA7XG4gICAgICAgIHRoaXMuX3dpbi5kb2N1bWVudC5jb29raWUgPSBjb29raWVTdHJpbmc7XG4gICAgfVxuXG4gICAgZ2V0Q29va2llKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKS5yZXBsYWNlKC9eWyBcXHRdK3xbIFxcdF0rJC9nLCAnJyk7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgnKD86Xnw7KVxcXFxzPycgKyBuYW1lICsgJz0oLio/KSg/Ojt8JCknKTtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLl93aW4uZG9jdW1lbnQuY29va2llLm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgcmV0dXJuIG1hdGNoICYmIHVuZXNjYXBlKG1hdGNoWzFdKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gaXNWYWxpZChnbHRleHA6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBnZXRNaWxsaXMoZ2x0ZXhwKSA+IERhdGUubm93KCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4KC4uLmdsdGV4cHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICBpZiAoIWdsdGV4cHMgfHwgIWdsdGV4cHMubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiBnbHRleHBzLnNvcnQoKGdsdGV4cEEsIGdsdGV4cEIpID0+IGdldE1pbGxpcyhnbHRleHBCKSAtIGdldE1pbGxpcyhnbHRleHBBKSlbMF07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWlsbGlzKGdsdEV4cDogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICFnbHRFeHAgPyAwIDogTnVtYmVyKGdsdEV4cC5zdWJzdHIoMCwgZ2x0RXhwLmluZGV4T2YoJ18nKSkpICogMTAwMDtcbn1cbiIsImltcG9ydCAqIGFzIFVSTFV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9VUkwnO1xuaW1wb3J0ICogYXMgSlNPTlV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9KU09OJztcbmltcG9ydCB7RmxhZ1NlcnZpY2V9IGZyb20gXCIuLi9TZXJ2aWNlcy9GbGFnU2VydmljZVwiO1xuZGVjbGFyZSBmdW5jdGlvbiB1bmVzY2FwZShlc2NhcGVkU3RyOiBzdHJpbmcpOiBzdHJpbmc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemUob0tleVZhbHVlOiBPYmplY3QsIGRlbGltaXRlcj86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYSA9IFtdO1xuICAgIGlmICghZGVsaW1pdGVyKSB7XG4gICAgICAgIGRlbGltaXRlciA9ICcmJztcbiAgICB9XG4gICAgZm9yIChjb25zdCBwIGluIG9LZXlWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBvS2V5VmFsdWVbcF0pIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAob0tleVZhbHVlW3BdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKHAgKyAnPScgKyBVUkxVdGlscy5VUkxFbmNvZGUoSlNPTlV0aWxzLnNlcmlhbGl6ZShvS2V5VmFsdWVbcF0pKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGEucHVzaChwICsgJz0nICsgVVJMVXRpbHMuVVJMRW5jb2RlKG9LZXlWYWx1ZVtwXSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHMgPSBhLmpvaW4oZGVsaW1pdGVyKTtcbiAgICByZXR1cm4gcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZSh1cmxFbmNvZGVkU3RyaW5nOiBzdHJpbmcsIGRlbGltaXRlcj86IHN0cmluZywga2V5c1RvTG93ZXI/OiBib29sZWFuLCB1c2VVbmVzY2FwZT86IGJvb2xlYW4pOiBhbnkge1xuICAgIGNvbnN0IG8gPSB7fTtcbiAgICBpZiAoIXVybEVuY29kZWRTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgfVxuICAgIGlmICghZGVsaW1pdGVyKSB7XG4gICAgICAgIGRlbGltaXRlciA9ICcmJztcbiAgICB9XG4gICAgY29uc3QgcGFpcnMgPSB1cmxFbmNvZGVkU3RyaW5nLnNwbGl0KGRlbGltaXRlcik7XG4gICAgZm9yIChsZXQgaVBhaXIgPSAwOyBpUGFpciA8IHBhaXJzLmxlbmd0aDsgaVBhaXIrKykge1xuICAgICAgICBjb25zdCBwYWlyID0gcGFpcnNbaVBhaXJdO1xuICAgICAgICBjb25zdCBlcVBvcyA9IHBhaXIuaW5kZXhPZignPScpO1xuICAgICAgICBpZiAoZXFQb3MgPT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzVG9Mb3dlciA/IHBhaXIudG9Mb3dlckNhc2UoKSA6IHBhaXI7XG4gICAgICAgICAgICBvW2tleV0gPSAnMSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQga2V5ID0gcGFpci5zdWJzdHIoMCwgZXFQb3MpO1xuICAgICAgICAgICAgaWYgKGtleXNUb0xvd2VyKSB7XG4gICAgICAgICAgICAgICAga2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkVmFsdWUgPSBwYWlyLnN1YnN0cihlcVBvcyArIDEpLnJlcGxhY2UoL1xcKy9nLCAnICcpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodXNlVW5lc2NhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgb1trZXldID0gRmxhZ1NlcnZpY2UudXNlRGVjb2RlVVJJQ29tcG9uZW50ID8gY29tcGFyZVJlc3VsdHNBbmRSZXR1cm5VUkxEZWNvZGUoc2VyaWFsaXplZFZhbHVlKSA6IHVuZXNjYXBlKHNlcmlhbGl6ZWRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb1trZXldID0gVVJMVXRpbHMuVVJMRGVjb2RlKHNlcmlhbGl6ZWRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIG9ba2V5XSA9IEZsYWdTZXJ2aWNlLnVzZURlY29kZVVSSUNvbXBvbmVudCA/IFVSTFV0aWxzLlVSTERlY29kZShzZXJpYWxpemVkVmFsdWUpIDogdW5lc2NhcGUoc2VyaWFsaXplZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbztcbn1cblxuZnVuY3Rpb24gY29tcGFyZVJlc3VsdHNBbmRSZXR1cm5VUkxEZWNvZGUoc2VyaWFsaXplZFZhbHVlKXtcbiAgICBjb25zdCB1bmVzY2FwZWRSZXN1bHQgPSB1bmVzY2FwZShzZXJpYWxpemVkVmFsdWUpO1xuICAgIGNvbnN0IHVybERlY29kZVJlc3VsdCA9IFVSTFV0aWxzLlVSTERlY29kZShzZXJpYWxpemVkVmFsdWUpO1xuICAgIHVuZXNjYXBlZFJlc3VsdC5sb2NhbGVDb21wYXJlKHVybERlY29kZVJlc3VsdCkgIT09IDAgJiYgZ2lneWEubG9nZ2VyLnJlcG9ydCgndXJsRGVjb2RlciBhbmQgdW5lc2NhcGVkIGhhdmUgZGlmZmVyZW50IHZhbHVlcycsIHtcbiAgICAgICAgdW5lc2NhcGVkUmVzdWx0LFxuICAgICAgICB1cmxEZWNvZGVSZXN1bHRcbiAgICB9KTtcbiAgICByZXR1cm4gdXJsRGVjb2RlUmVzdWx0O1xufVxuIiwiaW1wb3J0ICogYXMgSlNPTlV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9KU09OJztcbmltcG9ydCB7IGxvY2FsSW5mbyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9Mb2NhbEluZm8nO1xuaW1wb3J0IGNvb2tpZVV0aWxzLCB7U2FtZVNpdGV9IGZyb20gJy4vY29va2llJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0TG9jYWxTdG9yYWdlQWRhcHRlciB7XG4gICAgcHVibGljIHN0YXRpYyBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ0Fic3RyYWN0QWRhcHRlcic7XG4gICAgfVxuXG4gICAgcHVibGljIGFic3RyYWN0IGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmc7XG5cbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZXhwaXJlc0luPzogbnVtYmVyLCBkb21haW4/OiBzdHJpbmcpOiB2b2lkO1xuXG4gICAgcHVibGljIGFic3RyYWN0IHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpO1xuXG4gICAgLyoqXG4gICAgICogU2V0IG9iamVjdCB0byBzdG9yYWdlLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZXRPYmplY3Qoa2V5OiBzdHJpbmcsIG86IE9iamVjdCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldEl0ZW0oa2V5LCBKU09OVXRpbHMuc2VyaWFsaXplKG8pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgb2JqZWN0IGZyb20gbG9jYWwgc3RvcmFnZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0T2JqZWN0KGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBhbnkpOiBPYmplY3Qge1xuICAgICAgICByZXR1cm4gSlNPTlV0aWxzLmRlc2VyaWFsaXplKHRoaXMuZ2V0SXRlbShrZXkpLCBkZWZhdWx0VmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElzIHBlcnNpc3RlbnQgc3RvcmFnZS4gUmV0dXJucyBmYWxzZSB3aGVuIGRhdGEgaXMgbm90IHBlcnNpc3RlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgaXNQZXJzaXN0ZW50KCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RBc3luY0xvY2FsU3RvcmFnZUFkYXB0ZXIgZXh0ZW5kcyBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIge1xuICAgIHByb3RlY3RlZCBpc0xvYWRlZDogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGlzUmVhZHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzTG9hZGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgd2hlbiB0aGVyZSBpcyBpbml0aWFsaXphdGlvbiB0aW1lIG9uIHRoZSBsb2NhbCBzdG9yYWdlIGFkYXB0ZXIuXG4gICAgICovXG4gICAgcHVibGljIHdhaXRGb3JTZXJ2aWNlKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy53YWl0Rm9yU2VydmljZShjYWxsYmFjayksIDUwKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmFic3RyYWN0IGNsYXNzIFN0b3JhZ2VBZGFwdGVyIGV4dGVuZHMgQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyIHtcbiAgICBwcm90ZWN0ZWQgc3RvcmFnZTogYW55O1xuXG4gICAgcHVibGljIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlW2tleV07XG4gICAgfVxuXG4gICAgcHVibGljIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGV4cGlyZXNJbj86IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zdG9yYWdlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG59XG5jbGFzcyBMb2NhbFN0b3JhZ2VBZGFwdGVyIGV4dGVuZHMgU3RvcmFnZUFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdMb2NhbFN0b3JhZ2VBZGFwdGVyJztcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gbG9jYWxJbmZvLnN1cHBvcnRzTG9jYWxTdG9yYWdlO1xuICAgIH1cbn1cbmNsYXNzIFNlc3Npb25TdG9yYWdlQWRhcHRlciBleHRlbmRzIFN0b3JhZ2VBZGFwdGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gd2luZG93LnNlc3Npb25TdG9yYWdlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdTZXNzaW9uU3RvcmFnZUFkYXB0ZXInO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBsb2NhbEluZm8uc3VwcG9ydHNTZXNzaW9uU3RvcmFnZTtcbiAgICB9XG59XG5jbGFzcyBGaXJlZm94U3RvcmFnZUFkYXB0ZXIgZXh0ZW5kcyBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBsb2NhbEluZm8uaXNGRiAmJiB3aW5kb3dbJ2dsb2JhbFN0b3JhZ2UnXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnRmlyZWZveFN0b3JhZ2VBZGFwdGVyJztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SXRlbShrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB3aW5kb3dbJ2dsb2JhbFN0b3JhZ2UnXVtsb2NhdGlvbi5ob3N0bmFtZV1ba2V5XTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZXhwaXJlc0luPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3dbJ2dsb2JhbFN0b3JhZ2UnXVtsb2NhdGlvbi5ob3N0bmFtZV1ba2V5XSA9IHZhbHVlO1xuICAgICAgICB9IGNhdGNoIChleCkge31cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSXRlbShrZXk6IHN0cmluZykge1xuICAgICAgICBkZWxldGUgd2luZG93WydnbG9iYWxTdG9yYWdlJ11bbG9jYXRpb24uaG9zdG5hbWVdW2tleV07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvb2tpZVN0b3JhZ2VBZGFwdGVyIGV4dGVuZHMgQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29va2llVXRpbHMuY2FuU2F2ZUNvb2tpZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdDb29raWVTdG9yYWdlQWRhcHRlcic7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gY29va2llVXRpbHMuZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGV4cGlyZXNJbj86IG51bWJlciwgZG9tYWluPzogc3RyaW5nLCBhZGRpdGlvbmFsUGFyYW1zOiB7ZG9udFVzZVJvb3RQYXRoPzogYm9vbGVhbiwgc2FtZVNpdGU/OiBTYW1lU2l0ZX0gPSB7fSk6IHZvaWQge1xuICAgICAgICBjb29raWVVdGlscy5zZXQoa2V5LCB2YWx1ZSwgZXhwaXJlc0luLCBkb21haW4sIGFkZGl0aW9uYWxQYXJhbXMuZG9udFVzZVJvb3RQYXRoLCBhZGRpdGlvbmFsUGFyYW1zLnNhbWVTaXRlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSXRlbShrZXk6IHN0cmluZykge1xuICAgICAgICBjb29raWVVdGlscy5yZW1vdmUoa2V5KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTWVtb3J5U3RvcmFnZUFkYXB0ZXIgZXh0ZW5kcyBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBtZW1vcnk6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tZW1vcnkgPSB7fTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTWVtb3J5U3RvcmFnZUFkYXB0ZXInO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJdGVtKGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVtb3J5W2tleV07XG4gICAgfVxuXG4gICAgcHVibGljIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGV4cGlyZXNJbj86IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLm1lbW9yeVtrZXldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubWVtb3J5W2tleV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXMgcGVyc2lzdGVudCBzdG9yYWdlLiBSZXR1cm5zIGZhbHNlIHdoZW4gZGF0YSBpcyBub3QgcGVyc2lzdGVkLlxuICAgICAqL1xuICAgIHB1YmxpYyBpc1BlcnNpc3RlbnQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgYWRhcHRlcnM6IEFycmF5PGFueT4gPSBbXG4gICAgTG9jYWxTdG9yYWdlQWRhcHRlcixcbiAgICBTZXNzaW9uU3RvcmFnZUFkYXB0ZXIsXG4gICAgRmlyZWZveFN0b3JhZ2VBZGFwdGVyLFxuICAgIENvb2tpZVN0b3JhZ2VBZGFwdGVyLFxuICAgIE1lbW9yeVN0b3JhZ2VBZGFwdGVyLFxuXTtcbmV4cG9ydCBjb25zdCBpbnN0YW5jZXM6IHsgW2tleTogc3RyaW5nXTogQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyIH0gPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQWRhcHRlcihhZGFwdGVyOiB7IG5hbWU/OiBzdHJpbmc7IGdldE5hbWU6ICgpID0+IHN0cmluZyB9ICYgKG5ldyAoKSA9PiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIpKSB7XG4gICAgY29uc3QgYWRhcHRlck5hbWUgPSBhZGFwdGVyLmdldE5hbWUoKSB8fCBhZGFwdGVyLm5hbWU7XG4gICAgaWYgKCFpbnN0YW5jZXNbYWRhcHRlck5hbWVdKSB7XG4gICAgICAgIGluc3RhbmNlc1thZGFwdGVyTmFtZV0gPSBuZXcgYWRhcHRlcigpO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdGFuY2VzW2FkYXB0ZXJOYW1lXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yU2VydmljZSgpOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXI7XG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvclNlcnZpY2UoY2FsbGJhY2s6IChzdG9yYWdlOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIpID0+IHZvaWQpOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXI7XG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvclNlcnZpY2UoY2FsbGJhY2s/OiAoc3RvcmFnZTogQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyKSA9PiB2b2lkKTogQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyIHtcbiAgICAvLyBTZWxlY3QgY29tcGF0aWJsZSBhZGFwdGVyLlxuICAgIGxldCBzdG9yYWdlOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXI7XG4gICAgZm9yIChjb25zdCBhZGFwdGVyIG9mIGFkYXB0ZXJzKSB7XG4gICAgICAgIGlmIChhZGFwdGVyLmlzQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIC8vIERvbid0IHNlbGVjdCBhZGFwdGVyIGlmIGl0J3MgYXN5bmMgYW5kIGEgY2FsbGJhY2sgd2Fzbid0IHByb3ZpZGVkLlxuICAgICAgICAgICAgaWYgKGFkYXB0ZXIucHJvdG90eXBlIGluc3RhbmNlb2YgQWJzdHJhY3RBc3luY0xvY2FsU3RvcmFnZUFkYXB0ZXIgJiYgIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0b3JhZ2UgPSBpbml0aWFsaXplQWRhcHRlcihhZGFwdGVyKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gbWVtb3J5LWJhc2VkIG5vbi1wZXJzaXN0ZW50IHN0b3JhZ2UuXG4gICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICAgIHN0b3JhZ2UgPSBpbml0aWFsaXplQWRhcHRlcihNZW1vcnlTdG9yYWdlQWRhcHRlcik7XG4gICAgfVxuXG4gICAgLy8gVHJpZ2dlciBjYWxsYmFjayB3aGVuIGFkYXB0ZXIgZmluaXNoZXMgbG9hZGluZyAob3IgaW5zdGFudGx5LCBpZiBub3QgcmVxdWlyZWQgdG8gd2FpdCkuXG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChzdG9yYWdlIGluc3RhbmNlb2YgQWJzdHJhY3RBc3luY0xvY2FsU3RvcmFnZUFkYXB0ZXIpIHtcbiAgICAgICAgICAgIHN0b3JhZ2Uud2FpdEZvclNlcnZpY2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHN0b3JhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjayhzdG9yYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RvcmFnZTtcbn1cbmNvbnN0IGFkYXB0ZXIgPSB3YWl0Rm9yU2VydmljZSgpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBhZGFwdGVyLmdldEl0ZW0oa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBleHBpcmVzSW4/OiBudW1iZXIpOiB2b2lkIHtcbiAgICByZXR1cm4gYWRhcHRlci5zZXRJdGVtKGtleSwgdmFsdWUsIGV4cGlyZXNJbik7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIHJldHVybiBhZGFwdGVyLnJlbW92ZUl0ZW0oa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRPYmplY3Qoa2V5OiBzdHJpbmcsIG86IE9iamVjdCk6IHZvaWQge1xuICAgIHJldHVybiBhZGFwdGVyLnNldE9iamVjdChrZXksIG8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE9iamVjdChrZXk6IHN0cmluZywgZGVmYXVsdFZhbHVlPzogYW55KTogT2JqZWN0IHtcbiAgICByZXR1cm4gYWRhcHRlci5nZXRPYmplY3Qoa2V5LCBkZWZhdWx0VmFsdWUpO1xufVxuIiwiaW1wb3J0ICogYXMgSlNPTlV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9KU09OJztcbmltcG9ydCBXZWJTREtUb2dnbGVzIGZyb20gXCIuL3RvZ2dsZXNcIjtcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVVbmRlZmluZWQobzogT2JqZWN0KTogT2JqZWN0IHtcbiAgICB2YXIgbzIgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIG8pIHtcbiAgICAgICAgaWYgKG9bcF0gIT0gbnVsbCAmJiBvW3BdICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbzJbcF0gPSBvW3BdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHByZXNzaW9uSGVscGVyKGNvbnRleHQpIHtcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRGaWVsZDogZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICAgICAgaWYgKCFwYXRoKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIHBhdGhzID0gcGF0aC5zcGxpdCgnLicpLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjb250ZXh0LFxuICAgICAgICAgICAgICAgIGk7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXRocy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50W3BhdGhzW2ldXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudFtwYXRoc1tpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUobzogT2JqZWN0LCBuYW1lOiBzdHJpbmcsIGNyZWF0ZU1pc3NpbmdPYmplY3RzOiBib29sZWFuKTogYW55IHtcbiAgICBpZiAoIW5hbWUpIHJldHVybiBvO1xuICAgIHZhciBvUmVzdWx0ID0gbztcbiAgICB2YXIgYXJOYW1lU2VnbWVudHMgPSBuYW1lLnNwbGl0KCcuJyk7XG4gICAgZm9yICh2YXIgaVNlZ21lbnQgPSAwOyBpU2VnbWVudCA8IGFyTmFtZVNlZ21lbnRzLmxlbmd0aDsgaVNlZ21lbnQrKykge1xuICAgICAgICB2YXIgc1NlZ21lbnQgPSBhck5hbWVTZWdtZW50c1tpU2VnbWVudF07XG4gICAgICAgIHZhciBzSW5kZXggPSBudWxsO1xuICAgICAgICAvL1N1cHBvcnQgZm9yIGFycmF5IGFjY2Vzcy4gaS5lLiBcIm9iai5wcm9wMVswXS5wcm9wMlwiXG4gICAgICAgIGlmIChzU2VnbWVudC5tYXRjaCgvXFxbWzAtOV0rXS8pKSB7XG4gICAgICAgICAgICBzSW5kZXggPSBOdW1iZXIoc1NlZ21lbnQubWF0Y2goL1xcW1swLTldK10vKVswXS5yZXBsYWNlKC9bXFxbXFxdXS9nLCAnJykpO1xuICAgICAgICB9XG4gICAgICAgIHNTZWdtZW50ID0gc1NlZ21lbnQuc3BsaXQoL1xcW1swLTldK10vKS5qb2luKCcnKTtcbiAgICAgICAgdmFyIHJlcyA9IChzSW5kZXggfHwgc0luZGV4ID09PSAwKSAmJiBvUmVzdWx0W3NTZWdtZW50XSA/IG9SZXN1bHRbc1NlZ21lbnRdW3NJbmRleF0gOiBvUmVzdWx0W3NTZWdtZW50XTtcbiAgICAgICAgaWYgKGNyZWF0ZU1pc3NpbmdPYmplY3RzICYmICFvUmVzdWx0W3NTZWdtZW50XSkge1xuICAgICAgICAgICAgb1Jlc3VsdFtzU2VnbWVudF0gPSB7fTtcbiAgICAgICAgfSBlbHNlIGlmIChjcmVhdGVNaXNzaW5nT2JqZWN0cyAmJiAhcmVzICYmIHJlcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIG9SZXN1bHRbc1NlZ21lbnRdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcyB8fCByZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBvUmVzdWx0ID0gcmVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9SZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UHJvcGVydHlCeVNlcmlhbGl6ZWROYW1lKG86IE9iamVjdCwgbmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgdmFyIGFyTmFtZVNlZ21lbnRzID0gbmFtZS5zcGxpdCgnLicpO1xuICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBhck5hbWVTZWdtZW50cy5wb3AoKTtcbiAgICBnZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUobywgYXJOYW1lU2VnbWVudHMuam9pbignLicpLCB0cnVlKVtwcm9wZXJ0eU5hbWVdID0gdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkKG9UYXJnZXQ6IE9iamVjdCwgbzogT2JqZWN0LCBkb250T3ZlcnJpZGU/OiBib29sZWFuKTogdm9pZCB7XG4gICAgZm9yICh2YXIgcCBpbiBvKSB7XG4gICAgICAgIGlmICghZG9udE92ZXJyaWRlIHx8IHR5cGVvZiBvVGFyZ2V0W3BdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgb1RhcmdldFtwXSA9IG9bcF07XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0SGFzaChvOiBhbnkpOiBzdHJpbmcge1xuICAgIHZhciBhciA9IFtdO1xuICAgIGZvciAodmFyIHAgaW4gbykge1xuICAgICAgICB2YXIgcztcblxuICAgICAgICBpZiAodHlwZW9mIG9bcF0gPT0gJ29iamVjdCcpIHMgPSBKU09OVXRpbHMuc2VyaWFsaXplKG9bcF0sIGZhbHNlKTtcbiAgICAgICAgZWxzZSBpZiAob1twXSkgcyA9IG9bcF0udG9TdHJpbmcoKTtcblxuICAgICAgICBhci5wdXNoKHAgKyAnPScgKyBzKTtcbiAgICB9XG4gICAgcmV0dXJuIGFyLnNvcnQoKS5qb2luKCcmJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TXVybXVySGFzaChrZXk6IHN0cmluZywgc2VlZD86IG51bWJlcikge1xuICAgIGlmICghc2VlZCkgc2VlZCA9IDA7XG4gICAgdmFyIHJlbWFpbmRlciwgYnl0ZXMsIGgxLCBoMWIsIGMxLCBjMWIsIGMyLCBjMmIsIGsxLCBpO1xuXG4gICAgcmVtYWluZGVyID0ga2V5Lmxlbmd0aCAmIDM7IC8vIGtleS5sZW5ndGggJSA0XG4gICAgYnl0ZXMgPSBrZXkubGVuZ3RoIC0gcmVtYWluZGVyO1xuICAgIGgxID0gc2VlZDtcbiAgICBjMSA9IDB4Y2M5ZTJkNTE7XG4gICAgYzIgPSAweDFiODczNTkzO1xuICAgIGkgPSAwO1xuXG4gICAgd2hpbGUgKGkgPCBieXRlcykge1xuICAgICAgICBrMSA9IChrZXkuY2hhckNvZGVBdChpKSAmIDB4ZmYpIHwgKChrZXkuY2hhckNvZGVBdCgrK2kpICYgMHhmZikgPDwgOCkgfCAoKGtleS5jaGFyQ29kZUF0KCsraSkgJiAweGZmKSA8PCAxNikgfCAoKGtleS5jaGFyQ29kZUF0KCsraSkgJiAweGZmKSA8PCAyNCk7XG4gICAgICAgICsraTtcblxuICAgICAgICBrMSA9ICgoazEgJiAweGZmZmYpICogYzEgKyAoKCgoazEgPj4+IDE2KSAqIGMxKSAmIDB4ZmZmZikgPDwgMTYpKSAmIDB4ZmZmZmZmZmY7XG4gICAgICAgIGsxID0gKGsxIDw8IDE1KSB8IChrMSA+Pj4gMTcpO1xuICAgICAgICBrMSA9ICgoazEgJiAweGZmZmYpICogYzIgKyAoKCgoazEgPj4+IDE2KSAqIGMyKSAmIDB4ZmZmZikgPDwgMTYpKSAmIDB4ZmZmZmZmZmY7XG5cbiAgICAgICAgaDEgXj0gazE7XG4gICAgICAgIGgxID0gKGgxIDw8IDEzKSB8IChoMSA+Pj4gMTkpO1xuICAgICAgICBoMWIgPSAoKGgxICYgMHhmZmZmKSAqIDUgKyAoKCgoaDEgPj4+IDE2KSAqIDUpICYgMHhmZmZmKSA8PCAxNikpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgaDEgPSAoaDFiICYgMHhmZmZmKSArIDB4NmI2NCArICgoKChoMWIgPj4+IDE2KSArIDB4ZTY1NCkgJiAweGZmZmYpIDw8IDE2KTtcbiAgICB9XG5cbiAgICBrMSA9IDA7XG5cbiAgICBzd2l0Y2ggKHJlbWFpbmRlcikge1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBrMSBePSAoa2V5LmNoYXJDb2RlQXQoaSArIDIpICYgMHhmZikgPDwgMTY7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGsxIF49IChrZXkuY2hhckNvZGVBdChpICsgMSkgJiAweGZmKSA8PCA4O1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBrMSBePSBrZXkuY2hhckNvZGVBdChpKSAmIDB4ZmY7XG5cbiAgICAgICAgICAgIGsxID0gKChrMSAmIDB4ZmZmZikgKiBjMSArICgoKChrMSA+Pj4gMTYpICogYzEpICYgMHhmZmZmKSA8PCAxNikpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgICAgIGsxID0gKGsxIDw8IDE1KSB8IChrMSA+Pj4gMTcpO1xuICAgICAgICAgICAgazEgPSAoKGsxICYgMHhmZmZmKSAqIGMyICsgKCgoKGsxID4+PiAxNikgKiBjMikgJiAweGZmZmYpIDw8IDE2KSkgJiAweGZmZmZmZmZmO1xuICAgICAgICAgICAgaDEgXj0gazE7XG4gICAgfVxuXG4gICAgaDEgXj0ga2V5Lmxlbmd0aDtcblxuICAgIGgxIF49IGgxID4+PiAxNjtcbiAgICBoMSA9ICgoaDEgJiAweGZmZmYpICogMHg4NWViY2E2YiArICgoKChoMSA+Pj4gMTYpICogMHg4NWViY2E2YikgJiAweGZmZmYpIDw8IDE2KSkgJiAweGZmZmZmZmZmO1xuICAgIGgxIF49IGgxID4+PiAxMztcbiAgICBoMSA9ICgoaDEgJiAweGZmZmYpICogMHhjMmIyYWUzNSArICgoKChoMSA+Pj4gMTYpICogMHhjMmIyYWUzNSkgJiAweGZmZmYpIDw8IDE2KSkgJiAweGZmZmZmZmZmO1xuICAgIGgxIF49IGgxID4+PiAxNjtcblxuICAgIHJldHVybiBoMSA+Pj4gMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShvYmo6IGFueSwgZGVlcENvcHk/OiBib29sZWFuLCBpZ25vcmVGdW5jdGlvbnM/OiBib29sZWFuLCBtYXhMZXZlbDogbnVtYmVyID0gMjAsIGxldmVsOiBudW1iZXIgPSAwLCBpZ25vcmVDb250ZXh0PzogYm9vbGVhbik6IGFueSB7XG4gICAgaWYgKG9iaiA9PT0gd2luZG93KSByZXR1cm4gd2luZG93OyAvLyBkbyBub3QgY2xvbmUgdGhlIHdpbmRvdyBvYmplY3RcbiAgICBpZiAobGV2ZWwgPiBtYXhMZXZlbCkgcmV0dXJuIG51bGw7IC8vIFRvbyBkZWVwXG4gICAgaWYgKHR5cGVvZiBvYmogPT0gJ3VuZGVmaW5lZCcgfHwgb2JqID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFdlYlNES1RvZ2dsZXMuaXNPbigncmVtb3ZlVW5kZWZpbmVkUHJvcGVydGllcycpID8gb2JqIDogbnVsbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyAmJiBpZ25vcmVGdW5jdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIGlmIChvYmouY29uc3RydWN0b3IgPT0gQXJyYXkpIHtcbiAgICAgICAgdmFyIGFyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIWlnbm9yZUZ1bmN0aW9ucyB8fCB0eXBlb2Ygb2JqW2ldICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVlcENvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJbaV0gPSBjbG9uZShvYmpbaV0sIGRlZXBDb3B5LCBpZ25vcmVGdW5jdGlvbnMsIG1heExldmVsLCBsZXZlbCArIDEsIGlnbm9yZUNvbnRleHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFyW2ldID0gb2JqW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXI7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09ICdvYmplY3QnKSB7XG4gICAgICAgIHZhciBvID0ge307XG4gICAgICAgIGZvciAodmFyIHAgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoaWdub3JlQ29udGV4dCAmJiBwID09ICdjb250ZXh0JykgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIWlnbm9yZUZ1bmN0aW9ucyB8fCB0eXBlb2Ygb2JqW3BdICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVlcENvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgb1twXSA9IGNsb25lKG9ialtwXSwgZGVlcENvcHksIGlnbm9yZUZ1bmN0aW9ucywgbWF4TGV2ZWwsIGxldmVsICsgMSwgaWdub3JlQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb1twXSA9IG9ialtwXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG87XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYXJnczogT2JqZWN0W10sIGlzRGVlcE1lcmdlPzogYm9vbGVhbik6IE9iamVjdDtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZShhcmdzOiBhbnlbXSwgaXNEZWVwTWVyZ2U/OiBib29sZWFuKTogT2JqZWN0IHtcbiAgICB2YXIgbyA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXJnc1tpXSAmJiBhcmdzW2ldLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCBhcmdzW2ldLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBhcmdzW2ldW3VdKSB7XG4gICAgICAgICAgICAgICAgICAgIG9bcF0gPSBhcmdzW2ldW3VdW3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1lcmdlIG9iamVjdHMuXG4gICAgICAgICAgICBpZiAoIWlzRGVlcE1lcmdlKSB7XG4gICAgICAgICAgICAgICAgLy8gRmxhdCBtZXJnZS5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBwIGluIGFyZ3NbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgb1twXSA9IGFyZ3NbaV1bcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBEZWVwIG1lcmdlLlxuICAgICAgICAgICAgICAgIGZvciAodmFyIHAgaW4gYXJnc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAvL3dlIG92ZXJyaWRlIHByaW1pdGl2ZSAvIGFycmF5XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb1twXSAhPT0gJ29iamVjdCcgfHwgb1twXSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvW3BdID0gYXJnc1tpXVtwXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9bcF0gPSBtZXJnZShbb1twXSwgYXJnc1tpXVtwXV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVuZmxhdHRlbihkYXRhOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IGJvb2xlYW4gfSk6IE9iamVjdCB7XG4gICAgaWYgKE9iamVjdChkYXRhKSAhPT0gZGF0YSB8fCBBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGxldCBwIGluIGRhdGEpIHtcbiAgICAgICAgbGV0IGN1ciA9IHJlc3VsdDtcbiAgICAgICAgbGV0IHByb3AgPSAnJztcbiAgICAgICAgY29uc3QgcGFydHMgPSBwLnJlcGxhY2UoL1xcWyhbMC05XSldLywgJy4kMScpLnNwbGl0KCcuJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9ICFpc05hTihOdW1iZXIocGFydHNbaV0pKTtcbiAgICAgICAgICAgIGN1ciA9IGN1cltwcm9wXSB8fCAoY3VyW3Byb3BdID0gaWR4ID8gW10gOiB7fSk7XG4gICAgICAgICAgICBwcm9wID0gcGFydHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgY3VyW3Byb3BdID0gZGF0YVtwXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFsnJ10gfHwge307XG59XG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbihkYXRhOiBhbnksIHdpdGhCcmFja2V0ID0gZmFsc2UpOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IGJvb2xlYW4gfSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZnVuY3Rpb24gcmVjdXJzZShjdXI6IGFueSwgcHJvcDogc3RyaW5nKSB7XG4gICAgICAgIGlmIChPYmplY3QoY3VyKSAhPT0gY3VyKSB7XG4gICAgICAgICAgICByZXN1bHRbcHJvcF0gPSBjdXI7XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjdXIpKSB7XG4gICAgICAgICAgICBjb25zdCBsID0gY3VyLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5lc3RlZFByb3BlcnR5ID0gd2l0aEJyYWNrZXQgPyBgJHtwcm9wfVske2l9XWAgOiBgJHtwcm9wfS4ke2l9YDtcbiAgICAgICAgICAgICAgICByZWN1cnNlKGN1cltpXSwgcHJvcCA/IG5lc3RlZFByb3BlcnR5IDogU3RyaW5nKGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Byb3BdID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgaXNFbXB0eSA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgaW4gY3VyKSB7XG4gICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJlY3Vyc2UoY3VyW3BdLCBwcm9wID8gYCR7cHJvcH0uJHtwfWAgOiBwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0VtcHR5ICYmIHByb3AgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Byb3BdID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVjdXJzZShkYXRhLCAnJyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0UHJvcGVydGllcyhzcmM6IGFueSwgZGVzdD86IGFueSwgc2NoZW1hPzogU3RyaW5nKTogT2JqZWN0IHtcbiAgICBpZiAoc3JjID09IG51bGwpIHJldHVybjtcbiAgICBpZiAoZGVzdCA9PSBudWxsKSBkZXN0ID0ge307XG4gICAgaWYgKHNyYy5jb25zdHJ1Y3RvciA9PSBBcnJheSkge1xuICAgICAgICBmb3IgKHZhciBpU3JjID0gMDsgaVNyYyA8IHNyYy5sZW5ndGg7IGlTcmMrKykge1xuICAgICAgICAgICAgZXh0cmFjdFByb3BlcnRpZXMoc3JjW2lTcmNdLCBkZXN0LCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChzY2hlbWEpIHtcbiAgICAgICAgdmFyIGFyU2NoZW1hID0gc2NoZW1hLnNwbGl0KCd8Jyk7XG4gICAgICAgIHZhciBzcmNMQ2FzZSA9IHt9O1xuICAgICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gc3JjKSB7XG4gICAgICAgICAgICBzcmNMQ2FzZVtmaWVsZE5hbWUudG9Mb3dlckNhc2UoKV0gPSAxO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJTY2hlbWEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWUyID0gYXJTY2hlbWFbaV07XG4gICAgICAgICAgICBpZiAoc3JjTENhc2VbZmllbGROYW1lMi50b0xvd2VyQ2FzZSgpXSkgZGVzdFtmaWVsZE5hbWUyXSA9IHNyY1tmaWVsZE5hbWUyXTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGRlc3QgPSBjbG9uZShzcmMsIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFByb3BlcnR5KHNyYzogYW55LCBwYXJhbU5hbWU6IHN0cmluZyk6IGFueSB7XG4gICAgdmFyIHBhcmFtcztcbiAgICByZXR1cm4gZXh0cmFjdFByb3BlcnRpZXMoc3JjLCBwYXJhbXMsIHBhcmFtTmFtZSlbcGFyYW1OYW1lXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRvT2JqZWN0KHN0cjogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyc2VkVmFsID0gd2luZG93WydKU09OJ10ucGFyc2Uoc3RyKTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWRWYWwgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWRWYWw7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcm9wZXJ0aWVzUHJlZml4KG9iajogT2JqZWN0ID0ge30sIHByZWZpeDogc3RyaW5nIHwgUmVnRXhwID0gJycpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoKGFjYywgY3VycikgPT4gKE9iamVjdC5hc3NpZ24oYWNjLCB7W2N1cnIucmVwbGFjZShwcmVmaXgsJycpXTogb2JqW2N1cnJdfSkpLHt9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJlZml4VG9Qcm9wZXJ0aWVzKG9iajogT2JqZWN0ID0ge30sIHByZWZpeDogc3RyaW5nID0gJycpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgICAgIGlmIChrZXkuaW5kZXhPZihwcmVmaXgpICE9PSAwKSB7XG4gICAgICAgICAgICBhY2NbYCR7cHJlZml4fSR7a2V5fWBdID0gb2JqW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IG9ialtrZXldO1xuICAgICAgICB9XG4gICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVPYmplY3RLZXlzVG9Mb3dlckNhc2Uob2JqZWN0OiBPYmplY3QpOiBPYmplY3Qge1xuICAgIC8vIE5vcm1hbGl6ZSBhbGwga2V5cyB0byBsb3dlcmNhc2UgaW4gYWRkaXRpb24gdG8gdGhlaXIgb3JpZ2luYWwgY2FzaW5nLlxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICBvYmplY3Rba2V5LnRvTG93ZXJDYXNlKCldID0gb2JqZWN0W2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZU9iamVjdEtleXMob2JqOiBPYmplY3QpOiBPYmplY3Qge1xuICAgIGxldCBkZWNvZGVPYmplY3RLZXlzID0ge307XG4gICAgZm9yIChsZXQga2V5IGluIG9iaikge1xuICAgICAgICBsZXQgZGVjb2RlZEtleSA9IGtleTtcbiAgICAgICAgd2hpbGUgKGRlY29kZWRLZXkuaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgICAgICAgICAgZGVjb2RlZEtleSA9IGRlY29kZVVSSUNvbXBvbmVudChkZWNvZGVkS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVPYmplY3RLZXlzW2RlY29kZWRLZXldID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiBkZWNvZGVPYmplY3RLZXlzO1xufVxuIiwiaW1wb3J0IHtHaWd5YVJlc3BvbnNlfSBmcm9tICdnaWd5YSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9taXNpZnk8VCBleHRlbmRzIEdpZ3lhUmVzcG9uc2U+KG1ldGhvZDogRnVuY3Rpb24sIHBhcmFtczogYW55ID0ge30pOiBQcm9taXNlPFQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VD4oKHJlc29sdmUpID0+IHtcbiAgICAgICBtZXRob2Qoe1xuICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgIGNhbGxiYWNrOiByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgfVxuICAgICAgIH0pXG4gICAgfSk7XG59IiwiXG52YXIgX3EgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBfc2VydmljZXNTdGF0dXMoKSB7XG4gICAgdmFyIHNlcnZpY2VzID0ge307XG5cbiAgICBmb3IgKHZhciBzZXJ2aWNlIGluIF9xKSB7XG4gICAgICAgIHZhciBhY3RpdmUgPSBpc0FjdGl2ZShzZXJ2aWNlKTtcblxuICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICBzZXJ2aWNlc1tzZXJ2aWNlXSA9IHtcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgd2FpdGluZ0ZvcjogX3Fbc2VydmljZV0uaWRzLFxuICAgICAgICAgICAgICAgIHF1ZXVlZENvdW50OiBfcVtzZXJ2aWNlXS5xLmxlbmd0aCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXJ2aWNlc1tzZXJ2aWNlXSA9IHtcbiAgICAgICAgICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZXJ2aWNlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FjdGl2ZShzZXJ2aWNlOiBzdHJpbmcpIHtcbiAgICBpZiAoIV9xW3NlcnZpY2VdKSByZXR1cm4gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpZCBpbiBfcVtzZXJ2aWNlXS5pZHMpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWxlYXNlKGlkOiBzdHJpbmcsIHNlcnZpY2U6IHN0cmluZyk6IHZvaWQge1xuICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgcmVsZWFzaW5nICR7c2VydmljZX0gcXVldWUgYnkgJHtpZH1gKTtcbiAgICBpZiAoIV9xW3NlcnZpY2VdKSByZXR1cm47XG4gICAgZGVsZXRlIF9xW3NlcnZpY2VdLmlkc1tpZF07XG4gICAgaWYgKCFpc0FjdGl2ZShzZXJ2aWNlKSkge1xuICAgICAgICB2YXIgcSA9IF9xW3NlcnZpY2VdLnE7XG4gICAgICAgIF9xW3NlcnZpY2VdLnEgPSBbXTtcbiAgICAgICAgd2hpbGUgKHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIG8gPSBxLnNwbGljZSgwLCAxKVswXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgby5mdW5jLmFwcGx5KHRoaXMsIG8uYXJncyk7XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSA9PSAnb2JqZWN0JyAmJiBjb25zb2xlLmxvZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2lneWE6IEV4Y2VwdGlvbiB3aGlsZSBpbnZva2luZyBxdWV1ZWQgbWV0aG9kICgnICsgc2VydmljZSArICc6ICcgKyBpZCArICcpJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQWN0aXZlKHNlcnZpY2UpKSB7XG4gICAgICAgICAgICAgICAgLy9xdWV1ZSBiZWNhbWUgaW5hY3RpdmVcbiAgICAgICAgICAgICAgICBfcVtzZXJ2aWNlXS5xID0gcTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBob2xkKGlkOiBzdHJpbmcsIHNlcnZpY2U6IHN0cmluZyk6IHZvaWQge1xuICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgbG9ja2luZyBxdWV1ZSAke3NlcnZpY2V9IGJ5ICR7aWR9YCk7XG5cbiAgICBpZiAoIV9xW3NlcnZpY2VdKSBfcVtzZXJ2aWNlXSA9IHsgcTogW10sIGlkczoge30gfTtcbiAgICBfcVtzZXJ2aWNlXS5pZHNbaWRdID0gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yKHNlcnZpY2U6IHN0cmluZywgZm5jOiBGdW5jdGlvbiwgYXJnczogYW55W10pOiB2b2lkO1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3Ioc2VydmljZTogc3RyaW5nLCBmbmM6IEZ1bmN0aW9uLCBhcmdzOiBJQXJndW1lbnRzKTogdm9pZDtcbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yKHNlcnZpY2U6IHN0cmluZywgZm5jOiBGdW5jdGlvbiwgYXJnczogYW55KTogdm9pZCB7XG4gICAgaWYgKCFfcVtzZXJ2aWNlXSkgX3Fbc2VydmljZV0gPSB7IHE6IFtdLCBpZHM6IHt9IH07XG4gICAgX3Fbc2VydmljZV0ucS5wdXNoKHsgZnVuYzogZm5jLCBhcmdzOiBhcmdzIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXVlRm9yRXhlY3V0aW9uKHNlcnZpY2U6IHN0cmluZywgZnVuYzogRnVuY3Rpb24sIGFyZ3M/OiBhbnlbXSkge1xuICAgIGFyZ3MgPSBhcmdzIHx8IFtdO1xuICAgIGlmIChpc0FjdGl2ZShzZXJ2aWNlKSkge1xuICAgICAgICB3YWl0Rm9yKHNlcnZpY2UsIGZ1bmMsIGFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVXJpIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL1VyaSc7XG5pbXBvcnQgeyBsb2NhbEluZm8gfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvTG9jYWxJbmZvJztcbmltcG9ydCAqIGFzIGFycmF5VXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2FycmF5JztcbmltcG9ydCAqIGFzIGZ1bmN0aW9uc1V0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9mdW5jdGlvbnMnO1xuaW1wb3J0ICogYXMgRE9NVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL0RPTSc7XG5pbXBvcnQgeyBnZXRDZG5SZXNvdXJjZSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9jZG4nO1xuXG5pbnRlcmZhY2UgSVNjcmlwdFBlbmRpbmcge1xuICAgIGxvYWRlZDogYm9vbGVhbjtcbiAgICBvbkxvYWQ6IEZ1bmN0aW9uW107XG4gICAgb25FcnJvcjogRnVuY3Rpb25bXTtcbn1cbnZhciBwZW5kaW5nOiB7IFtzcmM6IHN0cmluZ106IElTY3JpcHRQZW5kaW5nIH0gPSB7fTtcbmZ1bmN0aW9uIGFkZFNka1ZlcnNpb24odXJsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCBzY3JpcHRVcmwgPSBVcmkucGFyc2UodXJsKTtcbiAgICBzY3JpcHRVcmwuYWRkVG9TZWFyY2goeyB2ZXJzaW9uOiBnaWd5YS5idWlsZC52ZXJzaW9uIH0pO1xuICAgIHJldHVybiBzY3JpcHRVcmwudG9TdHJpbmcoKTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFNyY1VybChzcmM6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gcmVtb3ZlIGNkbiBkb21haW4gbnVtYmVyXG4gICAgcmV0dXJuIHNyYy5yZXBsYWNlKC9eaHR0cChzPyk6XFwvXFwvY2RuKHM/KVswLTldKi5naWd5YS5jb21cXC8vLCAnaHR0cCQxOi8vY2RuJDIuZ2lneWEuY29tLycpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9hZGVkKHNyYzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdmFyIHBlbmRpbmdTcmMgPSBmb3JtYXRTcmNVcmwoc3JjKTtcblxuICAgIHJldHVybiBCb29sZWFuKHBlbmRpbmdbcGVuZGluZ1NyY10gJiYgcGVuZGluZ1twZW5kaW5nU3JjXS5sb2FkZWQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxvYWQoXG4gICAgc3JjOiBzdHJpbmcsXG4gICAgZm5PbkVycm9yPzogKCkgPT4gdm9pZCxcbiAgICBmbk9uTG9hZD86ICgpID0+IHZvaWQsXG4gICAgbG9hZE9uY2U/OiBib29sZWFuLFxuICAgIHJlbW92ZUFmdGVyOiBudW1iZXIgfCBib29sZWFuID0gNTAwMCxcbiAgICB0cmVhdFRvZ2V0aGVyPzogc3RyaW5nW10sXG4pOiB2b2lkIHtcbiAgICB2YXIgb1NjcmlwdDogSVNjcmlwdFBlbmRpbmc7XG5cbiAgICBpZiAoc3JjLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICAgICAgc3JjID0gbG9jYWxJbmZvLnByb3RvY29sICsgJzonICsgc3JjO1xuICAgIH1cblxuICAgIGlmIChsb2FkT25jZSkge1xuICAgICAgICB2YXIgcGVuZGluZ1NyYyA9IGZvcm1hdFNyY1VybChzcmMpO1xuXG4gICAgICAgIGlmIChwZW5kaW5nW3BlbmRpbmdTcmNdKSB7XG4gICAgICAgICAgICBpZiAocGVuZGluZ1twZW5kaW5nU3JjXS5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuZGVidWcoYHNjcmlwdCB3YXMgYWxyZWFkeSBsb2FkZWQ6YCwgeyBzcmMgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGZuT25Mb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuT25Mb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwZW5kaW5nW3BlbmRpbmdTcmNdLm9uTG9hZC5wdXNoKGZuT25Mb2FkKTtcbiAgICAgICAgICAgICAgICBwZW5kaW5nW3BlbmRpbmdTcmNdLm9uRXJyb3IucHVzaChmbk9uRXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgb1NjcmlwdCA9IHBlbmRpbmdbcGVuZGluZ1NyY10gPSB7IGxvYWRlZDogZmFsc2UsIG9uTG9hZDogW2ZuT25Mb2FkXSwgb25FcnJvcjogW2ZuT25FcnJvcl0gfTtcblxuICAgICAgICBpZiAodHJlYXRUb2dldGhlciAmJiB0cmVhdFRvZ2V0aGVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGFycmF5VXRpbHMuZm9yRWFjaCh0cmVhdFRvZ2V0aGVyLCB1cmwgPT4ge1xuICAgICAgICAgICAgICAgIHBlbmRpbmdbdXJsXSA9IG9TY3JpcHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG11bHRpcGxlIGxvYWRzXG4gICAgICAgIG9TY3JpcHQgPSB7IGxvYWRlZDogZmFsc2UsIG9uTG9hZDogW2ZuT25Mb2FkXSwgb25FcnJvcjogW2ZuT25FcnJvcl0gfTtcbiAgICB9XG5cbiAgICB2YXIgc2NyaXB0TG9hZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgc2NyaXB0LmNoYXJzZXQgPSAnVVRGLTgnO1xuXG4gICAgICAgIHZhciBkb25lID0gZmFsc2U7XG4gICAgICAgIHZhciBmbk9uU2NyaXB0TG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghZG9uZSkge1xuICAgICAgICAgICAgICAgIGlmIChvU2NyaXB0Lm9uTG9hZCAmJiBvU2NyaXB0Lm9uTG9hZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvU2NyaXB0Lm9uTG9hZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvU2NyaXB0Lm9uTG9hZFtpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9TY3JpcHQub25Mb2FkW2ldKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvU2NyaXB0LmxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgb1NjcmlwdC5vbkVycm9yID0gb1NjcmlwdC5vbkxvYWQgPSBudWxsOyAvLyByZW1vdmUgbWVtb3J5IGxlYWtcblxuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZUFmdGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUFmdGVyID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlbW92ZUFmdGVyICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY3JpcHQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHJlbW92ZUFmdGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmbk9uU2NyaXB0TG9hZDtcbiAgICAgICAgc2NyaXB0WydvbnJlYWR5c3RhdGVjaGFuZ2UnXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gJ2xvYWRlZCcpIHtcbiAgICAgICAgICAgICAgICBmbk9uU2NyaXB0TG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHNjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9TY3JpcHQub25FcnJvci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb1NjcmlwdC5vbkVycm9yW2ldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG9TY3JpcHQub25FcnJvcltpXSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlbGV0ZSBwZW5kaW5nW3NyY107XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpO1xuICAgICAgICBpZiAoaGVhZCAmJiBoZWFkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGhlYWRbMF0uYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm5TZXRTY3JpcHRTcmMgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB3ZWJTZGtSZXNvdXJjZXNEb21haW4gPSBuZXcgUmVnRXhwKGBeaHR0cHM/OlxcL1xcL2NkbnM/Lioke2dpZ3lhLmRlZmF1bHRBcGlEb21haW59XFwvLipnaWd5YVxcLmpzYCk7XG4gICAgICAgICAgICBjb25zdCBzY3JpcHRTcmMgPSB3ZWJTZGtSZXNvdXJjZXNEb21haW4udGVzdChzcmMpID8gYWRkU2RrVmVyc2lvbihzcmMpIDogc3JjO1xuICAgICAgICAgICAgc2NyaXB0LnNyYyA9IHNjcmlwdFNyYztcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGxvY2FsSW5mby5pb3NWZXJzaW9uID49IDYpIHtcbiAgICAgICAgICAgIC8vIGlPUyA2IGJyZWFrcyBzZXRUaW1lb3V0IHdoZW4gYW5pbWF0aW9uIGlzIGFjdGl2ZSAoc3dpdGNoaW5nIHRhYnMgYmFjayBmcm9tIGEgbG9naW4gc2VxdWVuY2UpXG4gICAgICAgICAgICBmblNldFNjcmlwdFNyYygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dChmblNldFNjcmlwdFNyYywgMSk7IC8vIERvaW5nIHRoaXMgYXN5bmMgZ2l2ZXMgYmV0dGVyIHBlcmZvcm1hbmNlIGluIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGxvY2FsSW5mby5pc0lFKSB7XG4gICAgICAgIGZ1bmN0aW9uc1V0aWxzLmludm9rZU9uUGFnZUxvYWQoc2NyaXB0TG9hZGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzY3JpcHRMb2FkZXIoKTtcbiAgICB9XG59XG5leHBvcnQgZW51bSBSZXNvdXJjZVR5cGVzIHtcbiAgICBzY3JpcHQsXG4gICAgaW1hZ2UsXG4gICAgaWZyYW1lLFxufVxuZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXJSZXNvdXJjZSh1cmw6IHN0cmluZywgY2FsbGJhY2s/OiAoKSA9PiB2b2lkLCByZXNvdXJjZVR5cGUgPSBSZXNvdXJjZVR5cGVzLmltYWdlLCByZW1vdmVBZnRlcjogbnVtYmVyIHwgYm9vbGVhbiA9IDUwMDApIHtcbiAgICBzd2l0Y2ggKHJlc291cmNlVHlwZSkge1xuICAgICAgICBjYXNlIFJlc291cmNlVHlwZXMuc2NyaXB0OlxuICAgICAgICAgICAgbG9hZCh1cmwsIGNhbGxiYWNrLCBjYWxsYmFjaywgZmFsc2UsIHJlbW92ZUFmdGVyKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFJlc291cmNlVHlwZXMuaW1hZ2U6XG4gICAgICAgICAgICBsb2FkSW1hZ2UodXJsLCBjYWxsYmFjayk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSZXNvdXJjZVR5cGVzLmlmcmFtZTpcbiAgICAgICAgICAgIGxvYWRJZnJhbWUodXJsLCBjYWxsYmFjaywgcmVtb3ZlQWZ0ZXIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHJlc291cmNlIHR5cGUnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb2FkSW1hZ2UodXJsOiBzdHJpbmcsIGNhbGxiYWNrPzogRnVuY3Rpb24pIHtcbiAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgdmFyIGxvYWRlZCA9IGZhbHNlO1xuXG4gICAgdmFyIGZuT25Mb2FkID0gKCkgPT4ge1xuICAgICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaW1nLm9ubG9hZCA9IGltZy5vbmVycm9yID0gZm5PbkxvYWQ7XG5cbiAgICBpbWcuc3JjID0gdXJsO1xufVxuXG5mdW5jdGlvbiBsb2FkSWZyYW1lKHVybDogc3RyaW5nLCBjYWxsYmFjaz86ICgpID0+IHZvaWQsIHJlbW92ZUFmdGVyOiBudW1iZXIgfCBib29sZWFuID0gNTAwMCkge1xuICAgIHZhciBpZnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnIuc3R5bGUud2lkdGggPSAnMzBweCc7XG4gICAgaWZyLnN0eWxlLmhlaWdodCA9ICcxMHB4JztcbiAgICBpZnIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGlmci5zdHlsZS50b3AgPSAnLTEwMDBweCc7XG4gICAgaWZyLnN0eWxlLmxlZnQgPSAnLTEwMDBweCc7XG5cbiAgICBpZiAocmVtb3ZlQWZ0ZXIgPT09IHRydWUpIHtcbiAgICAgICAgcmVtb3ZlQWZ0ZXIgPSAwO1xuICAgIH1cblxuICAgIHZhciBmbk9uTG9hZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGVsO1xuICAgICAgICBpZiAoZSAmJiBlLnNyY0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsID0gZS5zcmNFbGVtZW50O1xuICAgICAgICB9IGVsc2UgaWYgKGUgJiYgZS50YXJnZXQpIHtcbiAgICAgICAgICAgIGVsID0gZS50YXJnZXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbCA9IHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWVsLmxvYWRlZCAmJiBlbC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICBlbC5sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGlmIChyZW1vdmVBZnRlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7fVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZW1vdmVBZnRlciBhcyBhbnksXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBET01VdGlscy5hZGRFdmVudExpc3RlbmVyKGlmciwgJ2xvYWQnLCBmbk9uTG9hZCk7XG4gICAgRE9NVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcihpZnIsICdlcnJvcicsIGZuT25Mb2FkKTtcbiAgICBpZnIub25sb2FkID0gZSA9PiB7XG4gICAgICAgIGZuT25Mb2FkKGUpO1xuICAgIH07XG4gICAgaWZyLm9uZXJyb3IgPSBmbk9uTG9hZDtcblxuICAgIGlmci5zcmMgPSB1cmw7XG4gICAgRE9NVXRpbHMuYXBwZW5kVG9Cb2R5KGlmcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkU2VydmljZShzZXJ2aWNlTmFtZTogc3RyaW5nLCBmbk9uRXJyb3I/OiAoKSA9PiB2b2lkLCBmbk9uTG9hZD86ICgpID0+IHZvaWQpIHtcbiAgICB2YXIgdXJsID0gZ2V0Q2RuUmVzb3VyY2UoKSArICcvanMvZ2lneWEuc2VydmljZXMuJyArIHNlcnZpY2VOYW1lICsgJy5qcyc7XG4gICAgbG9hZChcbiAgICAgICAgdXJsLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgPT09ICdvYmplY3QnICYmIGNvbnNvbGUuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdlcnJvciBsb2FkaW5nIGdpZ3lhIHNlcnZpY2UgJyArIHNlcnZpY2VOYW1lICsgJyBmcm9tIHVybDogJyArIHVybCk7XG4gICAgICAgICAgICAgICAgaWYgKGZuT25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBmbk9uRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGZuT25Mb2FkLFxuICAgICAgICB0cnVlLFxuICAgICk7XG59XG4iLCJpbXBvcnQgKiBhcyBKU09OVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL0pTT04nO1xuaW1wb3J0ICogYXMgcXVldWVVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvcXVldWUnO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSAnLi4vU2VydmljZXMvRmxhZ1NlcnZpY2UnO1xudmFyIHNlc3Npb25TdG9yYWdlRW5hYmxlZDtcbnRyeSB7XG4gICAgc2Vzc2lvblN0b3JhZ2VFbmFibGVkID0gQm9vbGVhbih3aW5kb3cuc2Vzc2lvblN0b3JhZ2UpOyAvLyB3aGVuIDNwYyBibG9ja2VkLCBjaHJvbWUgdGhyb3dzIHdoZW4gdHJ5aW5nIHRvIGFjY2VzcyBzZXNzaW9uIHN0b3JhZ2UuXG59IGNhdGNoIChleCkge1xuICAgIHNlc3Npb25TdG9yYWdlRW5hYmxlZCA9IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldChrZXk6IHN0cmluZywgcmVzcG9uc2U6IE9iamVjdCkge1xuICAgIGlmICghc2Vzc2lvblN0b3JhZ2VFbmFibGVkKSByZXR1cm47XG4gICAgdmFyIG9HaWd5YTtcbiAgICB0cnkge1xuICAgICAgICBvR2lneWEgPSBKU09OVXRpbHMuZGVzZXJpYWxpemUod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2dpZ3lhQ2FjaGUnKSk7XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlID09IG51bGwgJiYgb0dpZ3lhW2tleV0pIHtcbiAgICAgICAgICAgIGRlbGV0ZSBvR2lneWFba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIG9HaWd5YVtrZXldID0geyByZXNwb25zZSwgdGltZSB9O1xuICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKCdnaWdfb2lkY0NvbnRleHRfJykgPj0gMCkge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoJ29pZGMgc3RvcmFnZSBsb2dzIC0gc2V0Jywge1xuICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvR2lneWFba2V5XVxuICAgICAgICAgICAgICAgIH0sIGZhbHNlLCBGbGFnU2VydmljZS5mb3JjZUVycm9yUmVwb3J0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdnaWd5YUNhY2hlJywgSlNPTlV0aWxzLnNlcmlhbGl6ZShvR2lneWEpKTtcbiAgICB9IGNhdGNoIChleCkge31cblxuICAgIHF1ZXVlVXRpbHMucmVsZWFzZSgnY2FjaGUnLCAnY2FjaGVfJyArIGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0KGtleTogc3RyaW5nLCBjYWNoZVRpbWVvdXQ6IG51bWJlciA9IC0xKTogT2JqZWN0IHtcbiAgICBpZiAoIXNlc3Npb25TdG9yYWdlRW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoIXF1ZXVlVXRpbHMuaXNBY3RpdmUoJ2NhY2hlXycgKyBrZXkpKSB7XG4gICAgICAgICAgICBjb25zdCBzR2lneWFDYWNoZSA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdnaWd5YUNhY2hlJyk7XG4gICAgICAgICAgICBjb25zdCBvR2lneWEgPSBKU09OVXRpbHMuZGVzZXJpYWxpemUoc0dpZ3lhQ2FjaGUpO1xuICAgICAgICAgICAgY29uc3QgY2FjaGVkID0gb0dpZ3lhW2tleV07XG4gICAgICAgICAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVUaW1lb3V0IDwgMCB8fCBjYWNoZVRpbWVvdXQgKyBjYWNoZWQudGltZSA+IGN1cnJlbnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY2FjaGVkXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWQucmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKCdnaWdfb2lkY0NvbnRleHRfJykgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLnJlcG9ydCgnb2lkYyBzdG9yYWdlIGxvZ3MgLSBnZXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvR2lneWFba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVRpbWU6IGNhY2hlZC50aW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmYWxzZSwgRmxhZ1NlcnZpY2UuZm9yY2VFcnJvclJlcG9ydCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy9leHBpcmVkXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghY2FjaGVkKSB7XG4gICAgICAgICAgICAgICAgLy9ub3QgY2FjaGVkIChmaXJzdCB0aW1lKVxuICAgICAgICAgICAgICAgIHF1ZXVlVXRpbHMuaG9sZCgnY2FjaGUnLCAnY2FjaGVfJyArIGtleSk7IC8vc28gdGhhdCBmdXR1cmUgcmVxdWVzdHMgd2lsbCB3YWl0IGZvciB0aGUgZmlyc3Qgb25lJ3MgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL3dhaXQgZm9yIGZpcnN0IHJlc3BvbnNlXG4gICAgICAgICAgICBxdWV1ZVV0aWxzLndhaXRGb3IoJ2NhY2hlXycgKyBrZXksIGdldCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgcmV0dXJuIG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgc2V0KGtleSwgbnVsbCk7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gdHJpbShzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBzLnJlcGxhY2UoL15cXHMqKFxcUyooLipcXFMpPylcXHMqJC8sICckMScpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChzOiBzdHJpbmcsIC4uLnJlc3Q6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50c1tpICsgMV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcyA9IHMuc3BsaXQoJ3snICsgaSArICd9Jykuam9pbihhcmd1bWVudHNbaSArIDFdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplKHM6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHMuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBzLnN1YnN0cmluZygxKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHMuaW5kZXhPZihzdWZmaXgsIHMubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgIT09IC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8XFxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQWxsKHN0cjogc3RyaW5nLCBmaW5kOiBzdHJpbmcsIHJlcGxhY2U6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFmaW5kKSByZXR1cm4gc3RyO1xuICAgIHJldHVybiBzdHIucmVwbGFjZShuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4cChmaW5kKSwgJ2cnKSwgcmVwbGFjZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKHN0cjE6IHN0cmluZyA9ICcnLCBzdHIyOiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgY29uc3QgYXJyID0gc3RyMS5jb25jYXQoJywnLCBzdHIyKS5zcGxpdCgnLCcpO1xuICAgIHJldHVybiBnaWd5YS51dGlscy5hcnJheS5nZXRVbmlxdWVWYWx1ZXMoYXJyKS5maWx0ZXIoeCA9PiB4KS5qb2luKCcsJyk7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZmlsbCh0ZW1wbGF0ZTogRnVuY3Rpb24sIG9QbGFjZWhvbGRlcnM6IGFueSk6IHN0cmluZztcbmV4cG9ydCBmdW5jdGlvbiBmaWxsKHRlbXBsYXRlOiBzdHJpbmcsIG9QbGFjZWhvbGRlcnM6IGFueSk6IHN0cmluZztcbmV4cG9ydCBmdW5jdGlvbiBmaWxsKHRlbXBsYXRlOiBhbnksIG86IGFueSk6IHN0cmluZyB7XG4gICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUobyk7XG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUuam9pbignJyk7XG4gICAgfVxuICAgIHZhciBwID0gLyhcXCQpKCE/KShbYS16X11bYS16Xy5cXGRdKikoWyhdW14oKV0qWyldKT98KFxcJCkoIT8pXFx7KFthLXpfXVthLXpfLlxcZF0qKShbKF1bXigpXSpbKV0pP1xcfS9naTtcbiAgICBwLmxhc3RJbmRleCA9IDA7XG4gICAgdmFyIHJlcyA9IHRlbXBsYXRlO1xuICAgIHZhciBtYXRjaGVzID0gcC5leGVjKHJlcyk7XG4gICAgdmFyIG9mZnNldDtcbiAgICB3aGlsZSAobWF0Y2hlcyAhPSBudWxsKSB7XG4gICAgICAgIGlmIChtYXRjaGVzWzFdID09ICckJykge1xuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCA9IDQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJsbkRvbnRJbmplY3QgPSBtYXRjaGVzWzIgKyBvZmZzZXRdID09ICchJztcbiAgICAgICAgdmFyIGlkZW50aWZpZXIgPSBtYXRjaGVzWzMgKyBvZmZzZXRdOyAvLyAwIGlzIHRoZSBlbnRpcmUgZXhwciBhbmQgMS81PSQgMi82PSEgMy83PWlkZW50aWZpZXIgNC84PSgpJ3NcbiAgICAgICAgdmFyIHBhcmEgPSBtYXRjaGVzWzQgKyBvZmZzZXRdO1xuICAgICAgICBpZiAocGFyYSA9PSBudWxsKSBwYXJhID0gJyc7XG5cbiAgICAgICAgdmFyIGRiZyA9IDA7XG4gICAgICAgIGlmIChpZGVudGlmaWVyLnN1YnN0cmluZygwLCAxKSA9PSAnLicpIHtcbiAgICAgICAgICAgIGlkZW50aWZpZXIgPSBpZGVudGlmaWVyLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWRlbnRpZmllci5zdWJzdHJpbmcoMCwgMykgPT0gJ0RCRycpIHtcbiAgICAgICAgICAgIGlkZW50aWZpZXIgPSBpZGVudGlmaWVyLnN1YnN0cmluZygzKTtcbiAgICAgICAgICAgIGRiZyA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcHJlVGVtcCA9ICcnO1xuICAgICAgICB2YXIgcG9zdFRlbXAgPSBpZGVudGlmaWVyICsgcGFyYTtcbiAgICAgICAgd2hpbGUgKHBvc3RUZW1wICE9IHByZVRlbXApIHtcbiAgICAgICAgICAgIHByZVRlbXAgPSBwb3N0VGVtcDtcblxuICAgICAgICAgICAgdmFyIGxhc3RJbmRleCA9IHAubGFzdEluZGV4O1xuICAgICAgICAgICAgcG9zdFRlbXAgPSBmaWxsKHByZVRlbXAsIG8pO1xuICAgICAgICAgICAgcC5sYXN0SW5kZXggPSBsYXN0SW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdiA9ICcnO1xuICAgICAgICB2YXIgc2tpcENoYXJzID0gMDtcbiAgICAgICAgaWYgKG9baWRlbnRpZmllci5zcGxpdCgnLicpWzBdXSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHYgPSBuZXcgRnVuY3Rpb24oJ28nLCAncCcsICdyZXR1cm4gZXZhbChcIm8uXCIgKyBwKScpKG8sIHBvc3RUZW1wKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2ID0gJyQnICsgKGJsbkRvbnRJbmplY3QgPyAnIScgOiAnJykgKyBwb3N0VGVtcDtcbiAgICAgICAgICAgIHNraXBDaGFycyA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmxuRG9udEluamVjdCkge1xuICAgICAgICAgICAgcmVzID0gcmVzLnJlcGxhY2UobWF0Y2hlc1swXSwgJycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzID0gcmVzLnN1YnN0cigwLCBtYXRjaGVzLmluZGV4KSArIHYgKyByZXMuc3Vic3RyKG1hdGNoZXMuaW5kZXggKyBtYXRjaGVzWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAvL3Jlcz1yZXMuc3BsaXQobWF0Y2hlc1swXSkuam9pbih2KTtcbiAgICAgICAgfVxuICAgICAgICBwLmxhc3RJbmRleCA9IG1hdGNoZXMuaW5kZXggKyBza2lwQ2hhcnM7IC8vIHRvIGFsbG93IHJlY3Vyc2l2ZSBjaGFuZ2VzIGluIHRlbXBsYXRlcyB0aGF0IGNvbnRhaW4gdGVtcGxhdGVzLlxuICAgICAgICBtYXRjaGVzID0gcC5leGVjKHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG4iLCJpbXBvcnQgKiBhcyBvYmplY3RVdGlscyBmcm9tICcuL29iamVjdCc7XG5cbmNsYXNzIFdlYlNES1RvZ2dsZXMge1xuICAgIGhhcyhrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuX3RvZ2dsZXNba2V5XSAhPSAndW5kZWZpbmVkJztcbiAgICB9XG5cbiAgICBnZXQ8VCA9IGFueT4oa2V5OiBzdHJpbmcpOiBUIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvZ2dsZXNba2V5XSBhcyBUO1xuICAgIH1cblxuICAgIGlzT24oa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKGtleSkgJiYgdGhpcy5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBfdG9nZ2xlcygpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdFV0aWxzLm1lcmdlKFtcbiAgICAgICAgICAgIHRoaXMuX2dsb2JhbENvbmZUb2dnbGVzLFxuICAgICAgICAgICAgdGhpcy5fd2ViU2RrQ29uZmlnVG9nZ2xlc1xuICAgICAgICBdKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBfZ2xvYmFsQ29uZlRvZ2dsZXMoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS50aGlzU2NyaXB0Py5nbG9iYWxDb25mPy50b2dnbGVzIHx8IHt9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IF93ZWJTZGtDb25maWdUb2dnbGVzKCkge1xuICAgICAgICBjb25zdCB0b2dnbGVzID0gZ2lneWEuXz8uY29uZmlnPy50b2dnbGVzIHx8IHt9O1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModG9nZ2xlcykucmVkdWNlKChuZXdUb2dnbGVzLCBrZXkpID0+IHtcbiAgICAgICAgICAgIG5ld1RvZ2dsZXNba2V5XSA9IHRvZ2dsZXNba2V5XSA9PT0gJ29uJztcblxuICAgICAgICAgICAgcmV0dXJuIG5ld1RvZ2dsZXM7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBuZXcgV2ViU0RLVG9nZ2xlcygpO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIGlzRXhwbGljaXRUcnVlKHZhbDogYW55KTogYm9vbGVhbiB7XG4gICAgdmFyIGxjID0gKCcnICsgdmFsKS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBsYyA9PSAndHJ1ZScgfHwgbGMgPT0gJzEnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRXhwbGljaXRGYWxzZSh2YWw6IGFueSk6IGJvb2xlYW4ge1xuICAgIHZhciBsYyA9ICgnJyArIHZhbCkudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbGMgPT0gJ2ZhbHNlJyB8fCBsYyA9PSAnMCc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNMYXRlclRoYW5Ob3coZXhwaXJhdGlvblRpbWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBleHBpcmF0aW9uVGltZSA+IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFsbERlZmluZWRPckFsbFVuZGVmaW5lZCguLi5hcmdzKSB7XG4gICAgY29uc3QgYW55VW5kZWZpbmVkID0gYXJncy5zb21lKHggPT4gdHlwZW9mIHggPT09ICd1bmRlZmluZWQnKTtcbiAgICBjb25zdCBhbnlEZWZpbmVkID0gYXJncy5zb21lKHggPT4gdHlwZW9mIHggIT09ICd1bmRlZmluZWQnKTtcbiAgICByZXR1cm4gKGFueURlZmluZWQgJiYgIWFueVVuZGVmaW5lZCkgfHwgKCFhbnlEZWZpbmVkICYmIGFueVVuZGVmaW5lZCk7XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gZ2V0U2Nyb2xsKCk6IHsgdG9wOiBudW1iZXI7IGxlZnQ6IG51bWJlciB9IHtcbiAgICB2YXIgc2NyT2ZYID0gMCxcbiAgICAgICAgc2NyT2ZZID0gMDtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5wYWdlWU9mZnNldCA9PSAnbnVtYmVyJykge1xuICAgICAgICBzY3JPZlkgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XG4gICAgICAgIHNjck9mWCA9IHdpbmRvdy5wYWdlWE9mZnNldDtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmJvZHkgJiYgKGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkpIHtcbiAgICAgICAgc2NyT2ZZID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgICAgIHNjck9mWCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkpIHtcbiAgICAgICAgc2NyT2ZZID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgICAgc2NyT2ZYID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XG4gICAgfVxuICAgIHJldHVybiB7IGxlZnQ6IHNjck9mWCwgdG9wOiBzY3JPZlkgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRGdWxsU2l6ZSgpOiB7IHc6IG51bWJlcjsgaDogbnVtYmVyIH0ge1xuICAgIHZhciBkZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICB2YXIgZGIgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgdmFyIGggPSBkZS5jbGllbnRIZWlnaHQ7XG4gICAgaWYgKGggPT0gMCkgaCA9IGRiLmNsaWVudEhlaWdodDtcbiAgICB2YXIgdyA9IGRlLmNsaWVudFdpZHRoO1xuICAgIGlmICh3ID09IDApIHcgPSBkYi5jbGllbnRXaWR0aDtcbiAgICByZXR1cm4geyB3OiB3LCBoOiBoIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JpZW50YXRpb24oKTogbnVtYmVyIHtcbiAgICB2YXIgb3JpZW50YXRpb24gPSBwYXJzZUludCgod2luZG93WydvcmllbnRhdGlvbiddIGFzIHN0cmluZykgfHwgJzAnKTtcbiAgICBpZiAob3JpZW50YXRpb24gPCAwKSBvcmllbnRhdGlvbiArPSAzNjA7XG5cbiAgICByZXR1cm4gb3JpZW50YXRpb247XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0ZXJTaXplKCk6IHsgdzogbnVtYmVyOyBoOiBudW1iZXIgfSB7XG4gICAgdmFyIGg7XG4gICAgdmFyIHc7XG5cbiAgICB2YXIgZGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgdmFyIGRiID0gZG9jdW1lbnQuYm9keTtcblxuICAgIGlmICh3aW5kb3cub3V0ZXJIZWlnaHQpIHtcbiAgICAgICAgaCA9IHdpbmRvdy5vdXRlckhlaWdodDtcbiAgICAgICAgdyA9IHdpbmRvdy5vdXRlcldpZHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGggPSBkZS5jbGllbnRIZWlnaHQ7XG4gICAgICAgIGlmIChoID09IDApIGggPSBkYi5jbGllbnRIZWlnaHQ7XG4gICAgICAgIHcgPSBkZS5jbGllbnRXaWR0aDtcbiAgICAgICAgaWYgKHcgPT0gMCkgdyA9IGRiLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICByZXR1cm4geyB3OiB3LCBoOiBoIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0SW5uZXJTaXplKCk6IHsgdzogbnVtYmVyOyBoOiBudW1iZXIgfSB7XG4gICAgdmFyIGg7XG4gICAgdmFyIHc7XG5cbiAgICB2YXIgZGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgdmFyIGRiID0gZG9jdW1lbnQuYm9keTtcblxuICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgICAgaCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdyA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGggPSBkZS5jbGllbnRIZWlnaHQ7XG4gICAgICAgIGlmIChoID09IDApIGggPSBkYi5jbGllbnRIZWlnaHQ7XG4gICAgICAgIHcgPSBkZS5jbGllbnRXaWR0aDtcbiAgICAgICAgaWYgKHcgPT0gMCkgdyA9IGRiLmNsaWVudFdpZHRoO1xuICAgIH1cbiAgICByZXR1cm4geyB3OiB3LCBoOiBoIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWlkZGxlQ2VudGVyKCk6IHsgdG9wOiBudW1iZXI7IGxlZnQ6IG51bWJlciB9IHtcbiAgICB2YXIgc2Nyb2xsID0gZ2V0U2Nyb2xsKCk7XG4gICAgdmFyIHNpemUgPSBnZXRJbm5lclNpemUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b3A6IHNjcm9sbC50b3AgKyBNYXRoLmZsb29yKHNpemUuaCAvIDIpLFxuICAgICAgICBsZWZ0OiBzY3JvbGwubGVmdCArIE1hdGguZmxvb3Ioc2l6ZS53IC8gMiksXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1JlY3RIb3Jpem9udGFsbHlWaXNpYmxlKHJlY3Q6IHsgdG9wOiBudW1iZXI7IGJvdHRvbTogbnVtYmVyOyBsZWZ0OiBudW1iZXI7IHJpZ2h0OiBudW1iZXIgfSkge1xuICAgIHZhciBzY3JvbGwgPSBnZXRTY3JvbGwoKTtcbiAgICB2YXIgc2l6ZSA9IGdldElubmVyU2l6ZSgpO1xuICAgIHJldHVybiByZWN0LmxlZnQgPj0gc2Nyb2xsLmxlZnQgJiYgcmVjdC5yaWdodCA8PSBzY3JvbGwubGVmdCArIHNpemUudztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1JlY3RGdWxseVZpc2libGUocmVjdDogeyB0b3A6IG51bWJlcjsgYm90dG9tOiBudW1iZXI7IGxlZnQ6IG51bWJlcjsgcmlnaHQ6IG51bWJlciB9KSB7XG4gICAgdmFyIHNjcm9sbCA9IGdldFNjcm9sbCgpO1xuICAgIHZhciBzaXplID0gZ2V0SW5uZXJTaXplKCk7XG4gICAgcmV0dXJuIHJlY3QudG9wID49IHNjcm9sbC50b3AgJiYgcmVjdC5ib3R0b20gPD0gc2Nyb2xsLnRvcCArIHNpemUuaCAmJiByZWN0LmxlZnQgPj0gc2Nyb2xsLmxlZnQgJiYgcmVjdC5yaWdodCA8PSBzY3JvbGwubGVmdCArIHNpemUudztcbn1cbmV4cG9ydCBmdW5jdGlvbiBzY3JvbGxJbnRvVmlldyhlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldygpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Z2V0U3RvcmFnZURvbWFpbiwgcmVzb2x2ZUFwaURvbWFpbn0gZnJvbSAnLi9VdGlscy9kb21haW5zJztcbmltcG9ydCB7SVdlYlNka0NvbmZpZ30gZnJvbSAnLi4vaW50ZXJmYWNlcy9JV2ViU2RrQ29uZmlnJztcbmltcG9ydCB7VXJpfSBmcm9tICcuL1V0aWxzL1VyaSc7XG5cbmNvbnN0IGRlZmF1bHRTdG9yYWdlRG9tYWluID0gKCkgPT4gZ2lneWE/LmNvbmZpZ0hvc3RuYW1lT3ZlcnJpZGUgfHwgZ2V0U3RvcmFnZURvbWFpbigpO1xuY29uc3QgZGVmYXVsdEFwaURvbWFpbiA9ICgpID0+IHJlc29sdmVBcGlEb21haW4oKVxuXG5leHBvcnQgaW50ZXJmYWNlIElTc29Db25maWdSZXNwb25zZSB7XG4gICAgYXBpS2V5Pzogc3RyaW5nO1xuICAgIHJwQ29udGV4dD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29uc2VudFN0YXR1c1Jlc3BvbnNlIHtcbiAgY29uc2VudFN0YXR1czoge1xuICAgIGlzTWlncmF0ZWQ6IGJvb2xlYW47XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNka0NvbmZpZyhkb21haW46IHN0cmluZyA9IGRlZmF1bHRTdG9yYWdlRG9tYWluKCksIHJldHJpZXM6IG51bWJlciA9IDApOiBQcm9taXNlPElXZWJTZGtDb25maWc+IHtcbiAgICBjb25zdCB7YXBpS2V5fSA9IGdpZ3lhO1xuICAgIHJldHVybiBhd2FpdCBVcmkucGFyc2UoYCR7ZG9tYWlufS9zZGsuY29uZmlnLmdldGApXG4gICAgICAgIC5hZGRUb1NlYXJjaCh7YXBpS2V5LCBodHRwU3RhdHVzQ29kZXM6IHRydWV9KVxuICAgICAgICAuZmV0Y2g8SVdlYlNka0NvbmZpZz4ocmV0cmllcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTc29Db250ZXh0KHNzb1Rva2VuOiBzdHJpbmcsIGRvbWFpbjogc3RyaW5nID0gZGVmYXVsdEFwaURvbWFpbigpLCByZXRyaWVzOiBudW1iZXIgPSAwKTogUHJvbWlzZTxJU3NvQ29uZmlnUmVzcG9uc2U+IHtcbiAgICBjb25zdCB7YXBpS2V5OiBBUElLZXl9ID0gZ2lneWE7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IFVyaS5wYXJzZShgJHtkb21haW59L2FjY291bnRzLnNzby5nZXRDb250ZXh0YClcbiAgICAgICAgICAgIC5hZGRUb1NlYXJjaCh7QVBJS2V5LCBzc29Ub2tlbiwgZm9ybWF0OiAnanNvbid9KVxuICAgICAgICAgICAgLmZldGNoPElTc29Db25maWdSZXNwb25zZT4ocmV0cmllcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4ge31cbiAgICB9XG59XG5cbi8vIENvbnNlbnQgc3RhdHVzIGN1cnJlbnRseSByZXR1cm4gb25seSBieSBhcGkgZG9tYWluIGJlY2F1c2UgdGhlIGNvbmZpZ3VyYXRpb24gaXMgc2V0IGJ5IG1pbm9yIERDKCBzaG91bGQgYmUgc2F2ZSBvbiBtYWpvciBhbHdheXMpXG4vLyBXZSBzaG91bGQgY2hhbmdlIHRoZSBnaWd5YS5fLmdldEFwaURvbWFpbignYWNjb3VudHMnKSB0byBkZWZhdWx0U3RvcmFnZURvbWFpbiBvbmNlIHRoZSBjb25maWcgaXMgdXBkYXRlZC5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25zZW50U3RhdHVzKGNvbmZpZz86IHsgZG9tYWluOiBzdHJpbmcsIHJldHJpZXM6IG51bWJlciB9KTogUHJvbWlzZTxJQ29uc2VudFN0YXR1c1Jlc3BvbnNlPntcbiAgICBjb25zdCBkb21haW4gPSBjb25maWc/LmRvbWFpbiB8fCBnaWd5YS5fLmdldEFwaURvbWFpbignYWNjb3VudHMnKVxuICAgIGNvbnN0IHJldHJpZXMgPSBjb25maWc/LnJldHJpZXMgfHwgMFxuICAgIGNvbnN0IHsgYXBpS2V5IH0gPSBnaWd5YTtcbiAgICBjb25zdCB1cmwgPSBgJHtkb21haW59L3Nkay5nZXRDb25zZW50U3RhdHVzYFxuICAgIFxuICAgIHJldHVybiBhd2FpdCBVcmkucGFyc2UodXJsKVxuICAgICAgLmFkZFRvU2VhcmNoKHsgYXBpS2V5IH0pXG4gICAgICAuZmV0Y2g8SUNvbnNlbnRTdGF0dXNSZXNwb25zZT4ocmV0cmllcylcbn1cbiIsIlxubGV0IHNlbGVjdGVkQ2RuSG9zdHNJbmRleCA9IDA7XG5leHBvcnQgY29uc3QgQ0ROX0hPU1RTID0ge1xuICAgIGh0dHA6IFsnY2RuLmdpZ3lhLmNvbScsICdjZG4xLmdpZ3lhLmNvbScsICdjZG4yLmdpZ3lhLmNvbScsICdjZG4zLmdpZ3lhLmNvbSddLFxuICAgIGh0dHBzOiBbJ2NkbnMuZ2lneWEuY29tJywgJ2NkbnMxLmdpZ3lhLmNvbScsICdjZG5zMi5naWd5YS5jb20nLCAnY2RuczMuZ2lneWEuY29tJ10sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGdldENkblJlc291cmNlKHBhdGg/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIGdpZ3lhLnRoaXNTY3JpcHQgbWF5IG5vdCBleGlzdCBpZiBsb2FkZWQgZm9yIHNzb09yaWcuXG4gICAgbGV0IGJhc2VEb21haW4gPSBnaWd5YS50aGlzU2NyaXB0Py5iYXNlRG9tYWluID8/ICcnO1xuICAgIGNvbnN0IHByb3RvY29sID0gZ2lneWEudGhpc1NjcmlwdD8ucHJvdG9jb2wgPz8gJ2h0dHBzJztcblxuICAgIC8vIElmIG5vIGJhc2UgZG9tYWluIG9yIGlmIGJhc2UgZG9tYWluIGVuZHMgd2l0aCAuZ2lneWEuY29tLCB1c2UgR2lneWEgQ0ROLlxuICAgIC8vIE90aGVyd2lzZSB1c2UgdGhlIGJhc2UgZG9tYWluLlxuICAgIGlmICghYmFzZURvbWFpbiB8fCAvY2Rucz9cXC5naWd5YVxcLmNvbSQvLnRlc3QoYmFzZURvbWFpbikpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTY2hlbWFSZXBvc2l0b3J5ID0gQ0ROX0hPU1RTW3Byb3RvY29sXTtcbiAgICAgICAgaWYgKHNlbGVjdGVkU2NoZW1hUmVwb3NpdG9yeS5sZW5ndGggPD0gc2VsZWN0ZWRDZG5Ib3N0c0luZGV4KSB7XG4gICAgICAgICAgICBzZWxlY3RlZENkbkhvc3RzSW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGJhc2VEb21haW4gPSBzZWxlY3RlZFNjaGVtYVJlcG9zaXRvcnlbc2VsZWN0ZWRDZG5Ib3N0c0luZGV4KytdO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSB0aGUgcGF0aCBzdGFydHMgd2l0aCBcIi9cIi5cbiAgICBpZiAocGF0aCkge1xuICAgICAgICBpZiAocGF0aC5pbmRleE9mKCcvJykgIT09IDApIHtcbiAgICAgICAgICAgIHBhdGggPSAnLycgKyBwYXRoO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3RvY29sICsgJzovLycgKyBiYXNlRG9tYWluICsgKHBhdGggfHwgJycpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEltZ0NkblJlc291cmNlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGdldENkblJlc291cmNlKCcvZ3MvaS8nKTtcbn1cbiIsImltcG9ydCB7IElQcm94eVJlc3BvbnNlLCBJUHJveHlNZXNzYWdlLCBJUHJveHlSZXF1ZXN0LCBJUHJveHlTaWduYWxSZXF1ZXN0IH0gZnJvbSAnc3JjL2NvcmUvU2VydmljZVByb3h5L2ludGVyZmFjZXMnO1xuaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnc3JjL2NvcmUvU2VydmljZVByb3h5L3V0aWxzJztcblxuZXhwb3J0IGNsYXNzIFNlcnZpY2VQcm94eSB7XG4gICAgcHJpdmF0ZSBfaWZyYW1lOiBIVE1MSUZyYW1lRWxlbWVudDtcbiAgICBwcml2YXRlIF9wZW5kaW5nUmVxczogKChlOiBNZXNzYWdlRXZlbnQgJiB7IGRhdGE6IElQcm94eVJlc3BvbnNlIH0pID0+IHZvaWQpW10gPSBbXTtcbiAgICBwcml2YXRlIF9pZnJhbWVIb3N0OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF9tdXRhdGlvbk9ic2VydmVyczogTXV0YXRpb25PYnNlcnZlcltdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHVybDogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgdGltZW91dCA9IDYwMDAwLFxuICAgICAgICBwcml2YXRlIF9pZENyZWF0b3IgPSB1dGlscy5nZW5lcmF0ZUlkLFxuICAgICAgICBwcml2YXRlIF9pZnJhbWVDcmVhdG9yID0gdXRpbHMuY3JlYXRlSWZyYW1lLFxuICAgICAgICBwcml2YXRlIGdldElmcmFtZUhvc3QgPSAoKSA9PlxuICAgICAgICAgICAgbmV3IFByb21pc2U8SFRNTEVsZW1lbnQ+KHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5ib2R5KSByZXNvbHZlKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAgICAgICAgIGVsc2UgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHJlc29sdmUoZG9jdW1lbnQuYm9keSkpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgIHByaXZhdGUgX3dpbiA9IHdpbmRvdyxcbiAgICApIHt9XG5cbiAgICBwdWJsaWMgZ2V0IGlzSW5pdCgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5faWZyYW1lKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5pdDxUPih0aXRsZTogc3RyaW5nKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdCkgcmV0dXJuIFByb21pc2UucmVqZWN0KCdwcm94eSBhbHJlYWR5IGluaXRpYWxpemVkJykgYXMgYW55O1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8VD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2lmcmFtZSA9IHRoaXMuX2lmcmFtZUNyZWF0b3IodGl0bGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2lmcmFtZS5zcmMgPSB0aGlzLnVybDtcbiAgICAgICAgICAgICAgICB0aGlzLmdldElmcmFtZUhvc3QoKS50aGVuKGhvc3QgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pZnJhbWVIb3N0ID0gaG9zdDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faWZyYW1lSG9zdC5hcHBlbmRDaGlsZCh0aGlzLl9pZnJhbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnaWd5YS5sb2dnZXIuaXNFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvYnNlcnZlIGlmcmFtZSByZW1vdmFsIG9ubHkgaWYgZ2lneWEubG9nZ2VyIGlzIGV4cGxpY2l0bHkgZW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydE9ic2VydmluZ0lGcmFtZVJlbW92YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHRoaXMuX3dpbi5zZXRUaW1lb3V0KCgpID0+IHJlamVjdCgncHJveHkgaW5pdCB0aW1lb3V0JyksIHRoaXMudGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9uSW5pdFJlc3BvbnNlID0gKGU6IE1lc3NhZ2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVPcmlnaW4oZS5vcmlnaW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLl90cnlQYXJzZVJlc3BvbnNlKGUuZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2U/LnNpZ25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl93aW4uY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3dpbi5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25Jbml0UmVzcG9uc2UsIHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzcG9uc2Uuc2lnbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsaXN0ZW5pbmcnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3dpbi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vblJlc3BvbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLnJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzdG9wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UucmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCd1bnN1cHBvcnRlZCByZXNwb25zZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3dpbi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25Jbml0UmVzcG9uc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB2YWxpZGF0ZU9yaWdpbihjaGVja2VkOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIHV0aWxzLnZhbGlkYXRlT3JpZ2luKHRoaXMuX2lmcmFtZS5zcmMsIGNoZWNrZWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25SZXNwb25zZSA9IChlOiBNZXNzYWdlRXZlbnQpID0+IHtcbiAgICAgICAgLy8gYXJyb3cgZnVuY3Rpb24gdG8gcHJlc2VydmUgY29udGV4dFxuICAgICAgICBjb25zdCBtc2cgPSBnaWd5YS51dGlscy5KU09OLnBhcnNlKGUuZGF0YSkgYXMgSVByb3h5UmVzcG9uc2U7XG4gICAgICAgIGlmIChtc2cgJiYgdGhpcy5fcGVuZGluZ1JlcXNbbXNnLmlkXSAmJiB0aGlzLnZhbGlkYXRlT3JpZ2luKGUub3JpZ2luKSkge1xuICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1JlcXNbbXNnLmlkXShtc2cpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3BlbmRpbmdSZXFzW21zZy5pZF07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBwb3N0VG9JRnJhbWU8VD4ocmVxOiBJUHJveHlNZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IG9uTXNnUmVzcG9uc2UgPSB0aGlzLnJlZ2lzdGVyTWVzc2FnZTxUPihyZXEpO1xuICAgICAgICBjb25zdCBtZXNzYWdlOiBzdHJpbmcgPSB0eXBlb2YgcmVxID09PSAnb2JqZWN0JyA/IEpTT04uc3RyaW5naWZ5KHJlcSkgOiByZXE7XG4gICAgICAgIHRoaXMuX2lmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRoaXMuX2lmcmFtZS5zcmMpO1xuICAgICAgICByZXR1cm4gb25Nc2dSZXNwb25zZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyTWVzc2FnZTxUPihyZXE6IElQcm94eU1lc3NhZ2UsIHRpbWVvdXQgPSB0aGlzLnRpbWVvdXQpOiBQcm9taXNlPFQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHRoaXMuX3dpbi5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3QoJ3Byb3h5IHJlcXVlc3QgdGltZW91dCcpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdSZXFzW3JlcS5pZF0gPSAoZTogSVByb3h5UmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl93aW4uY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgaWYgKGUuc2lnbmFsID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlLnJlcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShlLnJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNlbmRSZXF1ZXN0PFQ+KG1ldGhvZE5hbWU6IHN0cmluZywgcGFyYW1zPzogYW55W10pOiBQcm9taXNlPFQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFRvSUZyYW1lPFQ+KHtcbiAgICAgICAgICAgIGlkOiB0aGlzLl9pZENyZWF0b3IoKSxcbiAgICAgICAgICAgIG1ldGhvZE5hbWUsXG4gICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgIH0gYXMgSVByb3h5UmVxdWVzdCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHN0b3A8VD4oZm9yY2VDbG9zZSA9IGZhbHNlKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIGlmICghdGhpcy5pc0luaXQpIHtcbiAgICAgICAgICAgIHRocm93ICdwcm94eSBpcyBub3QgYWN0aXZlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBlcnJvcjtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wb3N0VG9JRnJhbWU8VD4oe1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5faWRDcmVhdG9yKCksXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogJ3N0b3AnLFxuICAgICAgICAgICAgICAgIH0gYXMgSVByb3h5U2lnbmFsUmVxdWVzdCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmICghZXJyb3IgfHwgZm9yY2VDbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbXV0YXRpb25PYnNlcnZlcnMgJiYgdGhpcy5fbXV0YXRpb25PYnNlcnZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNjb25uZWN0IG11dGF0aW9uIG9ic2VydmVycywgaWYgYW55LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wT2JzZXJ2aW5nSUZyYW1lUmVtb3ZhbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3dpbi5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vblJlc3BvbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faWZyYW1lSG9zdC5yZW1vdmVDaGlsZCh0aGlzLl9pZnJhbWUpO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faWZyYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyB3cmFwV2l0aDxUPih0eXBlOiBuZXcgKCkgPT4gVCk6IFQ7XG4gICAgcHVibGljIHdyYXBXaXRoPFQ+KHR5cGU6IE9iamVjdCk6IFQ7XG4gICAgcHVibGljIHdyYXBXaXRoPFQ+KGtleXM6IHN0cmluZ1tdKTogVDtcbiAgICBwdWJsaWMgd3JhcFdpdGg8VD4odHlwZTogKG5ldyAoKSA9PiBUKSB8IE9iamVjdCB8IHN0cmluZ1tdKTogVCB7XG4gICAgICAgIGxldCBrZXlzOiBzdHJpbmdbXTtcbiAgICAgICAgaWYgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nKSBrZXlzID0gdXRpbHMuZ2V0QWxsQ2xhc3NNZXRob2RzTmFtZXModHlwZSBhcyBhbnkpO1xuICAgICAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgQXJyYXkpIGtleXMgPSB0eXBlO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcpIGtleXMgPSBPYmplY3Qua2V5cyh0eXBlKTtcbiAgICAgICAgLy8uY29uY2F0KGdldEFsbENsYXNzTWV0aG9kc05hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZih0eXBlKSkpO1xuICAgICAgICBlbHNlIHRocm93ICd1bnN1cHBvcnRlZCB0eXBlIGZvciB3cmFwcGVyJztcblxuICAgICAgICByZXR1cm4gdGhpcy5wcm94eUZyb21LZXlzPFQ+KGtleXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJveHlGcm9tS2V5czxUPihrZXlzOiBzdHJpbmdbXSk6IFQge1xuICAgICAgICBjb25zdCBwcm94eSA9IHt9O1xuICAgICAgICBrZXlzLmZvckVhY2goa2V5ID0+IChwcm94eVtrZXldID0gKC4uLmFyZ3MpID0+IHRoaXMuc2VuZFJlcXVlc3Qoa2V5LCBhcmdzKSkpO1xuICAgICAgICByZXR1cm4gcHJveHkgYXMgVDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXJ0T2JzZXJ2aW5nSUZyYW1lUmVtb3ZhbCgpIHtcbiAgICAgICAgbGV0IHRhcmdldE5vZGUgPSB0aGlzLl9pZnJhbWUgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlICh0YXJnZXROb2RlLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIG9ic2VydmUgdGhlIGlmcmFtZSBhbmQgaXRzIHBhcmVudHMgKGlmcmFtZSxib2R5KVxuICAgICAgICAgICAgdGhpcy5hZGRNdXRhdGlvbk9ic2VydmVyKHRhcmdldE5vZGUpO1xuICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IHRhcmdldE5vZGUucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RvcE9ic2VydmluZ0lGcmFtZVJlbW92YWwoKSB7XG4gICAgICAgIHRoaXMuX211dGF0aW9uT2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT4ge1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyICYmIG9ic2VydmVyLmRpc2Nvbm5lY3QpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9tdXRhdGlvbk9ic2VydmVycyA9IFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRkTXV0YXRpb25PYnNlcnZlcih0YXJnZXROb2RlOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBtdXRhdGlvbkNhbGxiYWNrOiBNdXRhdGlvbkNhbGxiYWNrID0gbXV0YXRpb25zTGlzdCA9PiB7XG4gICAgICAgICAgICBmb3IgKGxldCBtdXRhdGlvbiBvZiBtdXRhdGlvbnNMaXN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT0gJ2NoaWxkTGlzdCcgJiYgbXV0YXRpb24ucmVtb3ZlZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBIGNoaWxkIG5vZGUgaGFzIGJlZW4gcmVtb3ZlZC5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtdXRhdGlvbi5yZW1vdmVkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZWROb2RlID0gbXV0YXRpb24ucmVtb3ZlZE5vZGVzLml0ZW0oaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlZE5vZGUgPT09IHRhcmdldE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIud2FybihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIjIyMgR2lneWEncyBzZXJ2aWNlIHByb3h5IGhhcyBiZWVuIHVuZXhwZWN0ZWRseSBkZXRhY2hlZCBmcm9tIHRoZSBET00uIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdUaGlzIG1heSBjYXVzZSB1bmV4cGVjdGVkIGJlaGF2aW9yIGluY2x1ZGluZyBhIGNvbXBsZXRlIGxvc3Mgb2Ygc2VydmljZS4gIyMjJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcE9ic2VydmluZ0lGcmFtZVJlbW92YWwoKTsgLy8gY2FuIHN0b3Agb2JzZXJ2aW5nIGZvciBpZnJhbWUgcmVtb3ZhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gc3RvcCB0aGUgbG9vcFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBsaW5rZWQgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2hlbiBtdXRhdGlvbnMgYXJlIG9ic2VydmVkXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25DYWxsYmFjayk7XG5cbiAgICAgICAgLy8gU3RhcnQgb2JzZXJ2aW5nIHRoZSB0aGUgdGFyZ2V0LW5vZGUncyBwYXJlbnQgZWxlbWVudCBmb3IgY29uZmlndXJlZCBtdXRhdGlvbnNcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0YXJnZXROb2RlLnBhcmVudEVsZW1lbnQsIHtcbiAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSwgLy8gbW9uaXRvcnMgdGhlIHRhcmdldCBub2RlIGZvciB0aGUgYWRkaXRpb24gb3IgcmVtb3ZhbCBvZiBuZXcgY2hpbGQgbm9kZXNcbiAgICAgICAgICAgIHN1YnRyZWU6IGZhbHNlLCAvLyBkbyBub3QgZXh0ZW5kIG1vbml0b3JpbmcgdG8gdGhlIGVudGlyZSBzdWJ0cmVlIG9mIG5vZGVzIHJvb3RlZCBhdCB0aGUgcGFyZW50IGVsZW1lbnRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fbXV0YXRpb25PYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdHJ5UGFyc2VSZXNwb25zZShkYXRhU3RyOiBzdHJpbmcpOiBJUHJveHlSZXNwb25zZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhU3RyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oYHJlY2VpdmVkIG1lc3NhZ2Ugd2l0aCBpbnZhbGlkIGZvcm1hdGAsIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhU3RyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBnZXRQYXJlbnRVcmwgPSAod2luID0gd2luZG93LCBkb2MgPSBkb2N1bWVudCkgPT4gKHdpbi5sb2NhdGlvbiAhPSB3aW4ucGFyZW50LmxvY2F0aW9uID8gZG9jLnJlZmVycmVyIDogZG9jLmxvY2F0aW9uLmhyZWYpO1xuZXhwb3J0IGNvbnN0IGdldEJvZHlFbGVtZW50ID0gKGRvYyA9IGRvY3VtZW50KSA9PlxuICAgIG5ldyBQcm9taXNlPEhUTUxFbGVtZW50PihyZXNvbHZlID0+IHtcbiAgICAgICAgaWYgKGRvYy5ib2R5KSByZXNvbHZlKGRvYy5ib2R5KTtcbiAgICAgICAgZWxzZSBkb2MuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHJlc29sdmUoZG9jLmJvZHkpKTtcbiAgICB9KTtcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZU9yaWdpbiA9IChvcmlnaW46IHN0cmluZywgY2hlY2tlZDogc3RyaW5nKSA9PiBvcmlnaW4/LnRvTG93ZXJDYXNlKCk/LmluZGV4T2YoY2hlY2tlZD8udG9Mb3dlckNhc2UoKSkgPT09IDA7XG5leHBvcnQgY29uc3QgY3JlYXRlSWZyYW1lID0gKHRpdGxlOiBzdHJpbmcgPSAnR2lneWEgRnJhbWUnLCBkb2MgPSBkb2N1bWVudCkgPT4ge1xuICAgIGNvbnN0IGlmcmFtZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSAnMHB4JztcbiAgICBpZnJhbWUuc3R5bGUud2lkdGggPSAnMHB4JztcbiAgICBpZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBpZnJhbWUudGl0bGUgPSB0aXRsZTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgcmV0dXJuIGlmcmFtZTtcbn07XG5sZXQgX2NvdW50ZXIgPSAxO1xuZXhwb3J0IGNvbnN0IGdlbmVyYXRlSWQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIFN0cmluZyhfY291bnRlcisrKTtcbn07XG5mdW5jdGlvbiBpc0NsYXNzKHR5cGU6IGFueXwobmV3ICgpID0+IGFueSkpOiB0eXBlIGlzIG5ldyAoKSA9PiBhbnkge1xuICAgIHJldHVybiAhIXR5cGUucHJvdG90eXBlO1xufVxuZXhwb3J0IGNvbnN0IGdldEFsbENsYXNzTWV0aG9kc05hbWVzID0gKHR5cGU6IE9iamVjdHwobmV3ICgpID0+IGFueSkpOiBzdHJpbmdbXSA9PiB7XG4gICAgbGV0IHByb3BzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgbGV0IHByb3RvID0gaXNDbGFzcyh0eXBlKSA/IHR5cGUucHJvdG90eXBlIDogdHlwZTtcbiAgICBkbyB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvKiogaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiAtIHVzaW5nIGZpbHRlciAqKi9cbiAgICAgICAgICAgIGNvbnN0IGwgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90bylcbiAgICAgICAgICAgICAgICAvLyAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvdG8pLm1hcChzID0+IHMudG9TdHJpbmcoKSkpXG4gICAgICAgICAgICAgICAgLm1hcChzID0+IHMudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAuc29ydCgpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKHAsIGksIGFycikgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBwcm90b1twXSA9PT0gJ2Z1bmN0aW9uJyAmJiAvL29ubHkgdGhlIG1ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgIT09ICdjb25zdHJ1Y3RvcicgJiYgLy9ub3QgdGhlIGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAoaSA9PSAwIHx8IHAgIT09IGFycltpIC0gMV0pICYmIC8vbm90IG92ZXJyaWRpbmcgaW4gdGhpcyBwcm90b3R5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLmluZGV4T2YocCkgPT09IC0xLCAvL25vdCBvdmVycmlkZGVuIGluIGEgY2hpbGRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgcHJvcHMgPSBwcm9wcy5jb25jYXQobCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8qKiBidWcgZml4IGltcGxlbWVudGF0aW9uIC0gdXNpbmcgY3VzdG9tIG91ciBvd24gZmlsdGVyIGxvZ2ljXG4gICAgICAgICAgICAgY2FzZSBvZiBBcnJheS5maWx0ZXIgcG9seWZpbGwgY2F1c2luZyBcImNhbiBub3QgcmVhZCBwcm9wZXJ0eSAnMCcgb2YgdW5kZWZpbmVkXCIgKiovXG4gICAgICAgICAgICBjb25zdCBhcnIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90bylcbiAgICAgICAgICAgICAgICAvLyAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocHJvdG8pLm1hcChzID0+IHMudG9TdHJpbmcoKSkpXG4gICAgICAgICAgICAgICAgLm1hcChzID0+IHMudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAuc29ydCgpO1xuXG4gICAgICAgICAgICBjb25zdCBsID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBhcnJbaV07XG5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBwcm90b1twXSA9PT0gJ2Z1bmN0aW9uJyAmJiAvL29ubHkgdGhlIG1ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgcCAhPT0gJ2NvbnN0cnVjdG9yJyAmJiAvL25vdCB0aGUgY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgICAgKGkgPT0gMCB8fCBwICE9PSBhcnJbaSAtIDFdKSAmJiAvL25vdCBvdmVycmlkaW5nIGluIHRoaXMgcHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgIHByb3BzLmluZGV4T2YocCkgPT09IC0xXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vbm90IG92ZXJyaWRkZW4gaW4gYSBjaGlsZFxuXG4gICAgICAgICAgICAgICAgICAgIGwucHVzaChwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9wcyA9IHByb3BzLmNvbmNhdChsKTtcbiAgICAgICAgfVxuICAgIH0gd2hpbGUgKFxuICAgICAgICAocHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pKSAmJiAvL3dhbGstdXAgdGhlIHByb3RvdHlwZSBjaGFpblxuICAgICAgICBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pIC8vbm90IHRoZSB0aGUgT2JqZWN0IHByb3RvdHlwZSBtZXRob2RzIChoYXNPd25Qcm9wZXJ0eSwgZXRjLi4uKVxuICAgICk7XG5cbiAgICByZXR1cm4gcHJvcHM7XG59O1xuIiwiZXhwb3J0IGNsYXNzIEdsb2JhbFByb3ZpZGVyIHtcbiAgICBwdWJsaWMgZG9jdW1lbnRMb2NhdGlvbigpOiBMb2NhdGlvbiB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5sb2NhdGlvbjtcbiAgICB9XG4gICAgcHVibGljIHBvc3RNZXNzYWdlVG9QYXJlbnQobWVzc2FnZTogYW55LCB0YXJnZXRPcmlnaW46IHN0cmluZywgdHJhbnNmZXI/OiBUcmFuc2ZlcmFibGVbXSk6IHZvaWQge1xuICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRhcmdldE9yaWdpbiwgdHJhbnNmZXIpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IEdsb2JhbFByb3ZpZGVyKClcbiIsImltcG9ydCB7XG4gICAgR2V0R3JvdXBUb2tlblJlc3BvbnNlLFxuICAgIENhbmFyeUluZGljYXRpb25SZXNwb25zZSxcbiAgICBHZXRMb2dpblRva2VuRXhwUmVzcG9uc2UsXG4gICAgRnJhbWVTZXRHcm91cFRva2VuUGFyYW1zLFxuICAgIEZyYW1lTG9nb3V0UGFyYW1zLFxuICAgIEZyYW1lUmVtb3ZlVG9rZW5QYXJhbXMsXG4gICAgRnJhbWVHZXRHcm91cFRva2VuUGFyYW1zLFxuICAgIEZyYW1lU2V0TG9naW5Ub2tlbkV4cFBhcmFtcyxcbiAgICBGcmFtZUdldExvZ2luVG9rZW5FeHBQYXJhbXMsXG4gICAgRnJhbWVDaGVja1Rva2VuUmVuZXdQYXJhbXMsXG4gICAgRnJhbWVTeW5jQ2FuYXJ5SW5kaWNhdGlvbixcbiAgICBDYW5hcnlWZXJzaW9uLFxuICAgIEZyYW1lU2V0R3JvdXBDb250ZXh0LFxuICAgIElTc29TZXJ2aWNlLFxuICAgIFNldExvZ2luVG9rZW5FeHBSZXNwb25zZSxcbiAgICBHZXRHcm91cEFwaURvbWFpblJlc3BvbnNlLFxuICAgIEZyYW1lU2V0R3JvdXBBcGlEb21haW4sXG4gICAgRnJhbWVHZXRHcm91cEFwaURvbWFpbixcbiAgICBTREtMb2dvdXRSZXNwb25zZVxufSBmcm9tICdzcmMvZmlkbS9HaWd5YS5KUy5TU08vYXBwL2ludGVyZmFjZXMnO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7U3NvVXRpbHN9IGZyb20gXCJzcmMvZmlkbS9HaWd5YS5KUy5TU08vYXBwL3Nzb1V0aWxzXCI7XG5pbXBvcnQge0lTc29Db25maWd9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2ludGVyZmFjZXMvSVdlYlNka0NvbmZpZyc7XG5cbmV4cG9ydCBjbGFzcyBTc28gaW1wbGVtZW50cyBJU3NvU2VydmljZSB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfc3RvcmFnZUtleTogc3RyaW5nO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhbmFyeUtleTogc3RyaW5nO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NhbmFyeVZlcktleTogc3RyaW5nO1xuICAgIHByaXZhdGUgX2N1cnJlbnRGcmFnbWVudDogc3RyaW5nO1xuICAgIHByaXZhdGUgX21vZGU6IHN0cmluZztcbiAgICBwcml2YXRlIF9yZXF1ZXN0RG9tYWluOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfbGlkOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfY2FsbGJhY2tJRDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfYXBpS2V5OiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBfc2l0ZUFwaUtleTogc3RyaW5nLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgX3Nzb1NlZ21lbnQ6IHN0cmluZyxcbiAgICAgICAgICAgICAgICBwcml2YXRlIF9zc29Db25maWc6IElTc29Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkRG9tYWluczogW10sXG4gICAgICAgICAgICAgICAgICAgIGxvZ291dFVSTHM6IHt9LFxuICAgICAgICAgICAgICAgICAgICBjYW5hcnlDb29raWVzTmFtZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQ2FuYXJ5OiAnZ2lnX2lzQ2FuYXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb246ICdnaWdfY2FuYXJ5X3ZlcidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBfdXRpbHMgPSBuZXcgU3NvVXRpbHMoKSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIF9zdG9yYWdlID0gX3V0aWxzLmdldENvb2tpZXNTdG9yYWdlKCkpIHtcblxuICAgICAgICB0aGlzLl9zdG9yYWdlS2V5ID0gdGhpcy5fY3JlYXRlS2V5KCdnaWdfbG9naW5Ub2tlbicpO1xuICAgICAgICBjb25zdCBjYW5hcnlDb29raWVzTmFtZXMgPSB0aGlzLl9zc29Db25maWcuY2FuYXJ5Q29va2llc05hbWVzO1xuICAgICAgICBpZiAodHlwZW9mIGNhbmFyeUNvb2tpZXNOYW1lcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhbmFyeUtleSA9IHRoaXMuX2NyZWF0ZUtleShjYW5hcnlDb29raWVzTmFtZXMuaXNDYW5hcnkpO1xuICAgICAgICAgICAgdGhpcy5fY2FuYXJ5VmVyS2V5ID0gdGhpcy5fY3JlYXRlS2V5KGNhbmFyeUNvb2tpZXNOYW1lcy52ZXJzaW9uKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBpbml0KCkge1xuICAgICAgICAvLyBTdGFydCByZXBlYXRlZGx5IGNoZWNraW5nIGZyYWdtZW50IGZvciBhIG5ldyBjYWxsLlxuICAgICAgICB0aGlzLl9jaGVja0ZyYWdtZW50KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY2hlY2tGcmFnbWVudCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgZnJhZ21lbnQ6IHN0cmluZyA9IHRoaXMuX3V0aWxzLmdldEZyYWdtZW50KCk7XG4gICAgICAgIGlmIChmcmFnbWVudCAmJiBmcmFnbWVudCAhPT0gdGhpcy5fY3VycmVudEZyYWdtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50RnJhZ21lbnQgPSBmcmFnbWVudDtcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0KHRoaXMuX3V0aWxzLmRlc2VyaWFsaXplKGZyYWdtZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQodGhpcy5fY2hlY2tGcmFnbWVudCwgMjAwKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBhc3luYyBfc3RhcnQoXG4gICAgICAgIHBhcmFtczpcbiAgICAgICAgICAgIHwgRnJhbWVTZXRHcm91cFRva2VuUGFyYW1zXG4gICAgICAgICAgICB8IEZyYW1lTG9nb3V0UGFyYW1zXG4gICAgICAgICAgICB8IEZyYW1lUmVtb3ZlVG9rZW5QYXJhbXNcbiAgICAgICAgICAgIHwgRnJhbWVHZXRHcm91cFRva2VuUGFyYW1zXG4gICAgICAgICAgICB8IEZyYW1lU2V0TG9naW5Ub2tlbkV4cFBhcmFtc1xuICAgICAgICAgICAgfCBGcmFtZUdldExvZ2luVG9rZW5FeHBQYXJhbXNcbiAgICAgICAgICAgIHwgRnJhbWVDaGVja1Rva2VuUmVuZXdQYXJhbXNcbiAgICAgICAgICAgIHwgRnJhbWVTeW5jQ2FuYXJ5SW5kaWNhdGlvblxuICAgICAgICAgICAgfCBGcmFtZVNldEdyb3VwQ29udGV4dFxuICAgICAgICAgICAgfCBGcmFtZVNldEdyb3VwQXBpRG9tYWluXG4gICAgICAgICAgICB8IEZyYW1lR2V0R3JvdXBBcGlEb21haW5cbiAgICApIHtcbiAgICAgICAgdGhpcy5fbW9kZSA9IHBhcmFtcy5tO1xuICAgICAgICB0aGlzLl9yZXF1ZXN0RG9tYWluID0gcGFyYW1zLmQ7IC8vIFJlY2VpdmluZyBkb21haW4uXG4gICAgICAgIHRoaXMuX2xpZCA9IHBhcmFtcy5saWQ7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrSUQgPSBwYXJhbXMuY2FsbGJhY2tJRDtcbiAgICAgICAgdGhpcy5fc2l0ZUFwaUtleSA9IHBhcmFtcy5zQVBJS2V5O1xuXG4gICAgICAgIC8vIEFib3J0IGlmIG5vdCBpbiBpRnJhbWVcbiAgICAgICAgaWYgKCF3aW5kb3cucGFyZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgZ2lneWEgc3NvOiBpbnZhbGlkIHVzZWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl91dGlscy5pc1ZhbGlkRG9tYWluKHRoaXMuX3Nzb0NvbmZpZy52YWxpZERvbWFpbnMsIHRoaXMuX3JlcXVlc3REb21haW4pKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgZ2lneWEgc3NvOiAke3RoaXMuX3JlcXVlc3REb21haW59IGlzIG5vdCBpbiB2YWxpZCBkb21haW46ICR7dGhpcy5fc3NvQ29uZmlnLnZhbGlkRG9tYWlucy5qb2luKCcsJyl9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVzcG9uc2U6IGFueTtcbiAgICAgICAgc3dpdGNoIChwYXJhbXMubSkge1xuICAgICAgICAgICAgY2FzZSAnbG9nb3V0JzpcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMubG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3JlbW92ZVRva2VuJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZVRva2VuKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ2dldFRva2VuJzpcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc2V0VG9rZW4nOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0VG9rZW4ocGFyYW1zLmx0LCBTdHJpbmcocGFyYW1zLmV4cGlyYXRpb24pLCBwYXJhbXMuZ2x0ZXhwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc2V0R3JvdXBDb250ZXh0JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldEdyb3VwQ29udGV4dChwYXJhbXMuZ3JvdXBDb250ZXh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc2V0TG9naW5Ub2tlbkV4cCc6XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnNldFRva2VuRXhwaXJhdGlvbihwYXJhbXMubG9naW5Ub2tlbkV4cCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ2dldExvZ2luVG9rZW5FeHAnOlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRUb2tlbkV4cGlyYXRpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnY2hlY2tUb2tlblJlbmV3JzpcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2hlY2tUb2tlblJlbmV3KHBhcmFtcy5sb2dpblRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc3luY0NhbmFyeUluZGljYXRpb24nOlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zeW5jQ2FuYXJ5SW5kaWNhdGlvbihwYXJhbXMuaXNDYW5hcnksIHBhcmFtcy5jYW5hcnlWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc2V0R3JvdXBBcGlEb21haW4nOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0R3JvdXBBcGlEb21haW4ocGFyYW1zLmRvbWFpbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ2dldEdyb3VwQXBpRG9tYWluJzpcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0R3JvdXBBcGlEb21haW4oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5JTlZBTElEX0FQSV9NRVRIT0QsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3V0aWxzLnNlbmRNZXNzYWdlKHJlc3BvbnNlLCB0aGlzLl9jYWxsYmFja0lELCB0aGlzLl9yZXF1ZXN0RG9tYWluKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0R3JvdXBBcGlEb21haW4oKTogUHJvbWlzZTxHZXRHcm91cEFwaURvbWFpblJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGRvbWFpbiA9IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShgYXBpRG9tYWluXyR7dGhpcy5fYXBpS2V5fWApXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLk9LLFxuICAgICAgICAgICAgZG9tYWluXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNldEdyb3VwQXBpRG9tYWluKGRvbWFpbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShgYXBpRG9tYWluXyR7dGhpcy5fYXBpS2V5fWAsIGRvbWFpbik7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGxvZ291dCgpOiBQcm9taXNlPFNES0xvZ291dFJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGxvZ291dFVSTHMgPSB0aGlzLl9nZXRMb2dvdXRVUkxzKCk7XG4gICAgICAgIGF3YWl0IHRoaXMucmVtb3ZlVG9rZW4oKTtcbiAgICAgICAgdGhpcy5fc3RvcmFnZS5yZW1vdmVJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X3Zpc2l0ZWRgKTtcbiAgICAgICAgcmV0dXJuIHsgbG9nb3V0VVJMcyB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyByZW1vdmVUb2tlbigpIHtcbiAgICAgICAgbGV0IGxvZ2luVG9rZW4gPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0odGhpcy5fc3RvcmFnZUtleSk7XG4gICAgICAgIGlmIChsb2dpblRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXJrUmV2b2tlZExvZ2luVG9rZW4obG9naW5Ub2tlbik7XG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5fc3RvcmFnZUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc3RvcmFnZS5yZW1vdmVJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2V4cGApO1xuICAgICAgICB0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fZ2x0ZXhwYCk7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UucmVtb3ZlSXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9zZXNzaW9uYCk7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UucmVtb3ZlSXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9jb250ZXh0YCk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFRva2VuKCk6IFByb21pc2U8R2V0R3JvdXBUb2tlblJlc3BvbnNlPiB7XG4gICAgICAgIGxldCBlcnJvckNvZGUgPSAwO1xuICAgICAgICBsZXQgbHQgPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0odGhpcy5fc3RvcmFnZUtleSk7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2VFeHAgPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fZXhwYCk7XG4gICAgICAgIGxldCBleHA7XG4gICAgICAgIGlmIChzdG9yYWdlRXhwID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgZXhwID0gRGF0ZS5ub3coKSAtIDEwMDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHAgPSBOdW1iZXIoc3RvcmFnZUV4cCk7XG4gICAgICAgICAgICBjb25zdCB0d29ZZWFyRnJvbU5vdyA9IERhdGUubm93KCkgKyAoMTAwMCAqIDYwICogNjAgKiAyNCAqIDM2NSAqIDIpO1xuICAgICAgICAgICAgaWYgKGV4cCA+IHR3b1llYXJGcm9tTm93KSB7XG4gICAgICAgICAgICAgICAgZXhwID0gRGF0ZS5ub3coKSAtIDEwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2x0ZXhwID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2dsdGV4cGApO1xuICAgICAgICBjb25zdCBncm91cENvbnRleHQgPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fY29udGV4dGApO1xuICAgICAgICBjb25zdCBpblNlc3Npb24gPSBnbHRleHAgfHwgdGhpcy5fc3RvcmFnZS5nZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X3Nlc3Npb25gKSA9PT0gJzEnO1xuICAgICAgICBpZiAoIWlzTmFOKGV4cCkgJiYgKChleHAgPT09IDAgJiYgIWluU2Vzc2lvbikgfHwgKGV4cCA+IDAgJiYgbmV3IERhdGUoKS5nZXRUaW1lKCkgPiBleHApKSkge1xuICAgICAgICAgICAgLy8gZXhwaXJlZCFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVtb3ZlVG9rZW4oKTtcbiAgICAgICAgICAgIGx0ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbHQpIHtcbiAgICAgICAgICAgIC8vIG5vIHVzZXJcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5VTkFVVEhPUklaRURfVVNFUixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9tYXJrU2l0ZVZpc2l0ZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlOiBHZXRHcm91cFRva2VuUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBlcnJvckNvZGU6IGVycm9yQ29kZSxcbiAgICAgICAgICAgIGxvZ2luX3Rva2VuOiBsdCxcbiAgICAgICAgICAgIGV4cGlyZXNfaW46IGV4cCA9PT0gMCA/IDAgOiBNYXRoLnJvdW5kKChleHAgLSBuZXcgRGF0ZSgpLmdldFRpbWUoKSkgLyAxMDAwKSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZihncm91cENvbnRleHQpe1xuICAgICAgICAgICAgcmVzcG9uc2UuZ3JvdXBDb250ZXh0ID0gZ3JvdXBDb250ZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV4cCA9PT0gMCAmJiBnbHRleHApIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmdsdGV4cCA9IGdsdGV4cDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNldFRva2VuKGx0OiBzdHJpbmcsIGV4cGlyYXRpb24/OiBzdHJpbmcgfCBudW1iZXIsIGdsdGV4cD86IHN0cmluZykge1xuICAgICAgICBsdCA9IGx0LnNwbGl0KCd8JylbMF07XG4gICAgICAgIGNvbnN0IG9sZFRva2VuID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHRoaXMuX3N0b3JhZ2VLZXkpPy5zcGxpdCgnfCcpWzBdO1xuICAgICAgICBpZiAobHQgIT09IG9sZFRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLl9tYXJrUmV2b2tlZExvZ2luVG9rZW4ob2xkVG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGx0KSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0odGhpcy5fc3RvcmFnZUtleSwgbHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHBpcmF0aW9uKSB7XG4gICAgICAgICAgICBsZXQgZXhwaXJlc0luID0gdHlwZW9mIGV4cGlyYXRpb24gPT09ICdzdHJpbmcnICYmIGV4cGlyYXRpb24gPyBOdW1iZXIoZXhwaXJhdGlvbikgOiBleHBpcmF0aW9uO1xuXG4gICAgICAgICAgICBpZiAoZXhwaXJlc0luID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gU2Vzc2lvbiBjb29raWUgb3IgZHluYW1pYyBzZXNzaW9uIGNvb2tpZS5cbiAgICAgICAgICAgICAgICAvLyBFaXRoZXIgd2F5LCBmbGFnIHRoZSBleHBpcmF0aW9uIGFzIDAuXG4gICAgICAgICAgICAgICAgZXhwaXJhdGlvbiA9IDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBmcm9tIG5vdyB3aGVuIHRoZSBjb29raWUgc2hvdWxkIGV4cGlyZS5cbiAgICAgICAgICAgICAgICBsZXQgZXhwaXJlc0luTXM6IG51bWJlcjtcbiAgICAgICAgICAgICAgICBpZiAoIWV4cGlyZXNJbiB8fCBleHBpcmVzSW4gPT09IC0yKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXNJbk1zID0gMTAwMCAqIDYwICogNjAgKiAyNCAqIDM2NTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBleHBpcmVzSW5NcyA9IE51bWJlcihleHBpcmVzSW4pICogMTAwMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGV4cGlyZXMgaW4gbWlsbGlzZWNvbmRzIHRvIGFuIGEgdGltZXN0YW1wIChhbHNvIG1pbGxpc2Vjb25kcykuXG4gICAgICAgICAgICAgICAgZXhwaXJlc0luID0gRGF0ZS5ub3coKSArIGV4cGlyZXNJbk1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5zZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2V4cGAsIGAke2V4cGlyZXNJbn1gKTtcbiAgICAgICAgICAgIGlmIChleHBpcmF0aW9uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5zZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X3Nlc3Npb25gLCAnMScsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChnbHRleHAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRUb2tlbkV4cGlyYXRpb24oZ2x0ZXhwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsdCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fbWFya1NpdGVWaXNpdGVkKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgc2V0R3JvdXBDb250ZXh0KGdyb3VwQ29udGV4dDogYW55KSB7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9jb250ZXh0YCwgSlNPTi5zdHJpbmdpZnkoZ3JvdXBDb250ZXh0KSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNldFRva2VuRXhwaXJhdGlvbihnbHRleHA6IHN0cmluZyk6IFByb21pc2U8U2V0TG9naW5Ub2tlbkV4cFJlc3BvbnNlPiB7XG4gICAgICAgIGlmICghdGhpcy5fdXRpbHMuaXNWYWxpZEdsdEV4cChnbHRleHApKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fZ2x0ZXhwYCk7XG4gICAgICAgICAgICBnbHRleHAgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2x0ZXhwID0gdGhpcy5fdXRpbHMuZ2V0TWF4R2x0RXhwKGdsdGV4cCwgKGF3YWl0IHRoaXMuZ2V0VG9rZW5FeHBpcmF0aW9uKCkpLmdsdGV4cCk7XG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fZ2x0ZXhwYCwgZ2x0ZXhwKTtcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2UucmVtb3ZlSXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9leHBgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLk9LLFxuICAgICAgICAgICAgZ2x0ZXhwLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRUb2tlbkV4cGlyYXRpb24oKTogUHJvbWlzZTxHZXRMb2dpblRva2VuRXhwUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgbHQgPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0odGhpcy5fc3RvcmFnZUtleSk7XG4gICAgICAgIGlmICghbHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5VTkFVVEhPUklaRURfVVNFUixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5PSyxcbiAgICAgICAgICAgIGdsdGV4cDogdGhpcy5fc3RvcmFnZS5nZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2dsdGV4cGApLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBjaGVja1Rva2VuUmVuZXcobG9naW5Ub2tlbjogc3RyaW5nKTogUHJvbWlzZTxHZXRHcm91cFRva2VuUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgZ3JvdXBUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0VG9rZW4oKTtcbiAgICAgICAgY29uc3QgaW52YWxpZFRva2VucyA9IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9yZXZva2VkX3Rva2Vuc2ApIHx8ICcnO1xuICAgICAgICBjb25zdCBpc0ludmFsaWQgPSBpbnZhbGlkVG9rZW5zLmluZGV4T2YobG9naW5Ub2tlbikgPj0gMDtcbiAgICAgICAgaWYgKCFpc0ludmFsaWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0VG9rZW4obG9naW5Ub2tlbik7XG4gICAgICAgICAgICByZXR1cm4ge2Vycm9yQ29kZTogR1NFcnJvcnMuT0t9O1xuICAgICAgICB9IGVsc2UgaWYgKGdyb3VwVG9rZW4uZXJyb3JDb2RlID09PSBHU0Vycm9ycy5PSyAmJiBpbnZhbGlkVG9rZW5zLmluZGV4T2YoZ3JvdXBUb2tlbi5sb2dpbl90b2tlbikgPCAwKSB7XG4gICAgICAgICAgICAvLyBqdXN0IGNoYW5naW5nIHRoZSBlcnJvciBjb2RlIC0gYnV0IHJldHVybmluZyB0aGUgc2FtZSBzZXNzaW9uIGluZm8gb2YgdGhlIGdyb3VwXG4gICAgICAgICAgICBncm91cFRva2VuLmVycm9yQ29kZSA9IEdTRXJyb3JzLlRPS0VOX0hBU19SRU5FV0VEO1xuICAgICAgICAgICAgcmV0dXJuIGdyb3VwVG9rZW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge2Vycm9yQ29kZTogR1NFcnJvcnMuSU5WQUxJRF9UT0tFTn07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgc3luY0NhbmFyeUluZGljYXRpb24oaXNDYW5hcnk6IHN0cmluZywgdmVyc2lvblNpZ25hdHVyZTogc3RyaW5nKTogUHJvbWlzZTxDYW5hcnlJbmRpY2F0aW9uUmVzcG9uc2U+IHtcbiAgICAgICAgaWYgKCF0aGlzLl9jYW5hcnlLZXkgfHwgIXRoaXMuX2NhbmFyeVZlcktleSkge1xuICAgICAgICAgICAgcmV0dXJuIHtlcnJvckNvZGU6IEdTRXJyb3JzLklOVkFMSURfRU5WSVJPTk1FTlRfQ09ORklHfSBhcyBDYW5hcnlJbmRpY2F0aW9uUmVzcG9uc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBTU09Jc0NhbmFyeSA9IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9jYW5hcnlLZXkpO1xuICAgICAgICBjb25zdCBTU09WZXJzaW9uU2lnbmF0dXJlID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHRoaXMuX2NhbmFyeVZlcktleSk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2U6IENhbmFyeUluZGljYXRpb25SZXNwb25zZSA9IHtcbiAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXG4gICAgICAgICAgICBpc0NhbmFyeSxcbiAgICAgICAgICAgIGNhbmFyeVZlcnNpb246IHZlcnNpb25TaWduYXR1cmUsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5fdXRpbHMudmFsaWRhdGlvbnMoKS5hbGxEZWZpbmVkT3JBbGxVbmRlZmluZWQoU1NPSXNDYW5hcnksIFNTT1ZlcnNpb25TaWduYXR1cmUpKSB7XG4gICAgICAgICAgICAvLyBub3QgbGVnYWxcbiAgICAgICAgICAgIHJlc3BvbnNlLmVycm9yQ29kZSA9IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl91dGlscy52YWxpZGF0aW9ucygpLmFsbERlZmluZWRPckFsbFVuZGVmaW5lZChpc0NhbmFyeSwgdmVyc2lvblNpZ25hdHVyZSkpIHtcbiAgICAgICAgICAgIC8vIG5vdCBsZWdhbFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLklOVkFMSURfUEFSQU1FVEVSX1ZBTFVFLFxuICAgICAgICAgICAgICAgIGlzQ2FuYXJ5OiBTU09Jc0NhbmFyeSxcbiAgICAgICAgICAgICAgICBjYW5hcnlWZXJzaW9uOiBTU09WZXJzaW9uU2lnbmF0dXJlLFxuICAgICAgICAgICAgfSBhcyBDYW5hcnlJbmRpY2F0aW9uUmVzcG9uc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaXRlQ2FuYXJ5VmVyc2lvbiA9IHRoaXMuX3BhcnNlQ2FuYXJ5VmVyc2lvblNpZ25hdHVyZSh2ZXJzaW9uU2lnbmF0dXJlKTtcbiAgICAgICAgY29uc3QgU1NPQ2FuYXJ5VmVyc2lvbiA9IHRoaXMuX3BhcnNlQ2FuYXJ5VmVyc2lvblNpZ25hdHVyZShTU09WZXJzaW9uU2lnbmF0dXJlKTtcblxuICAgICAgICBpZiAoc2l0ZUNhbmFyeVZlcnNpb24udGltZXN0YW1wID4gU1NPQ2FuYXJ5VmVyc2lvbi50aW1lc3RhbXApIHtcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbSh0aGlzLl9jYW5hcnlLZXksIGlzQ2FuYXJ5KTtcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbSh0aGlzLl9jYW5hcnlWZXJLZXksIHZlcnNpb25TaWduYXR1cmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzcG9uc2UuaXNDYW5hcnkgPSBTU09Jc0NhbmFyeTtcbiAgICAgICAgICAgIHJlc3BvbnNlLmNhbmFyeVZlcnNpb24gPSBTU09WZXJzaW9uU2lnbmF0dXJlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcmtTaXRlVmlzaXRlZCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdmlzaXRlZFN0b3JhZ2VLZXkgPSBgJHt0aGlzLl9zdG9yYWdlS2V5fV92aXNpdGVkYDtcbiAgICAgICAgbGV0IHZpc2l0ZWQgPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0odmlzaXRlZFN0b3JhZ2VLZXkpIHx8ICcnO1xuICAgICAgICBpZiAodmlzaXRlZC5pbmRleE9mKHRoaXMuX3NpdGVBcGlLZXkpID09PSAtMSkge1xuICAgICAgICAgICAgdmlzaXRlZCArPSAnLCcgKyB0aGlzLl9zaXRlQXBpS2V5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbSh2aXNpdGVkU3RvcmFnZUtleSwgdmlzaXRlZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbWFya1Jldm9rZWRMb2dpblRva2VuKGxvZ2luVG9rZW46IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIWxvZ2luVG9rZW4pIHJldHVybjtcbiAgICAgICAgY29uc3QgaW52YWxpZFRva2Vuc1N0b3JhZ2VLZXkgPSBgJHt0aGlzLl9zdG9yYWdlS2V5fV9yZXZva2VkX3Rva2Vuc2A7XG4gICAgICAgIGxldCBpbnZhbGlkVG9rZW5zID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKGludmFsaWRUb2tlbnNTdG9yYWdlS2V5KSB8fCAnJztcbiAgICAgICAgbGV0IGFyckludmFsaWRUb2tlbnMgPSBpbnZhbGlkVG9rZW5zLnNwbGl0KCcsJyk7XG4gICAgICAgIGlmIChhcnJJbnZhbGlkVG9rZW5zLmxlbmd0aCA+IDMpIHtcbiAgICAgICAgICAgIC8vZGVsZXRlIG9uZSBvbGQgcmV2b2tlZCB0b2tlblxuICAgICAgICAgICAgYXJySW52YWxpZFRva2Vucy5zcGxpY2UoMSwgMSk7IC8vIGZpcnN0IGVsZW1lbnQgaXMgYWx3YXlzIGVtcHR5XG4gICAgICAgIH1cbiAgICAgICAgaW52YWxpZFRva2VucyA9IGFyckludmFsaWRUb2tlbnMuam9pbignLCcpO1xuICAgICAgICBpZiAoaW52YWxpZFRva2Vucy5pbmRleE9mKGxvZ2luVG9rZW4pIDwgMCkge1xuICAgICAgICAgICAgaW52YWxpZFRva2VucyArPSAnLCcgKyBsb2dpblRva2VuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShpbnZhbGlkVG9rZW5zU3RvcmFnZUtleSwgaW52YWxpZFRva2Vucyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0TG9nb3V0VVJMcygpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB2aXNpdGVkID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X3Zpc2l0ZWRgKTtcbiAgICAgICAgaWYgKCF2aXNpdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXJMb2dvdXRVUkxzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc2l0ZUtleSBpbiB0aGlzLl9zc29Db25maWcubG9nb3V0VVJMcykge1xuICAgICAgICAgICAgaWYgKHZpc2l0ZWQuaW5kZXhPZignLCcgKyBzaXRlS2V5KSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBhckxvZ291dFVSTHMucHVzaCh0aGlzLl9zc29Db25maWcubG9nb3V0VVJMc1tzaXRlS2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyTG9nb3V0VVJMcy5qb2luKCcsJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY3JlYXRlS2V5KG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHtuYW1lfV8ke3RoaXMuX2FwaUtleX0ke3RoaXMuX3Nzb1NlZ21lbnQgPyBgXyR7dGhpcy5fc3NvU2VnbWVudH1gIDogJyd9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9wYXJzZUNhbmFyeVZlcnNpb25TaWduYXR1cmUoY2FuYXJ5VmVyc2lvblNpZzogc3RyaW5nKTogQ2FuYXJ5VmVyc2lvbiB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHREYXRhID0ge2J1aWxkOiAwLCBwcm9iYWJpbGl0eTogMCwgdGltZXN0YW1wOiAtMX0gYXMgQ2FuYXJ5VmVyc2lvbjtcbiAgICAgICAgaWYgKCFjYW5hcnlWZXJzaW9uU2lnKSByZXR1cm4gZGVmYXVsdERhdGE7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gY2FuYXJ5VmVyc2lvblNpZy5zcGxpdCgnLScpO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMykge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBidWlsZDogTnVtYmVyKHBhcnRzWzBdKSxcbiAgICAgICAgICAgIHByb2JhYmlsaXR5OiBOdW1iZXIocGFydHNbMV0pLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBOdW1iZXIocGFydHNbMl0pLFxuICAgICAgICB9IGFzIENhbmFyeVZlcnNpb247XG4gICAgfVxufVxuIiwiaW1wb3J0IHtVcml9IGZyb20gXCJzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvVXJpXCI7XG5pbXBvcnQgKiBhcyB2YWxpZGF0aW9uVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3ZhbGlkYXRpb24nO1xuaW1wb3J0IEdsb2JhbFByb3ZpZGVyIGZyb20gXCIuL2dsb2JhbFByb3ZpZGVyXCI7XG5pbXBvcnQge0Nvb2tpZVN0b3JhZ2VBZGFwdGVyLCBpbml0aWFsaXplQWRhcHRlcn0gZnJvbSBcInNyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9sb2NhbFN0b3JhZ2VcIjtcbmltcG9ydCB7ZGVzZXJpYWxpemV9IGZyb20gXCJzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMva2V5VmFsdWVcIjtcbmltcG9ydCB7Z2V0TWF4IGFzIGdldE1heEdsdEV4cCwgaXNWYWxpZCBhcyBpc1ZhbGlkR2x0RXhwfSBmcm9tIFwic3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2dsdGV4cFwiO1xuaW1wb3J0IHtVUkxEZWNvZGVSZWN1cnNpdmV9IGZyb20gXCJzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvVVJMXCI7XG5cbmNvbnN0IGRlZmF1bHRWYWxpZERvbWFpbnMgPSBbJ2dpZ3lhLWFwaS5jb20nLCAnZ2lneWEtYXBpLmNuJywgJ2dpZ3lhLmNvbScsICdteS5naWd5YS1leHQuY29tJywgJ2xvY2FsaG9zdCddO1xuXG5leHBvcnQgY2xhc3MgU3NvVXRpbHMge1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfZ2xvYmFsID0gR2xvYmFsUHJvdmlkZXIsIHByaXZhdGUgX2RlZmF1bHRWYWxpZERvbWFpbnMgPSBkZWZhdWx0VmFsaWREb21haW5zKSB7fVxuXG4gICAgZ2V0UGFnZVVybCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2xvYmFsLmRvY3VtZW50TG9jYXRpb24oKS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc1ZhbGlkRG9tYWluKHZhbGlkRG9tYWluczogc3RyaW5nW10sIGNhbmRpZGF0ZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGRvbWFpbiA9IFVyaS5wYXJzZShjYW5kaWRhdGUpLmRvbWFpbjtcbiAgICAgICAgY29uc3QgYXJWYWxpZERvbWFpbnMgPSB2YWxpZERvbWFpbnMuY29uY2F0KHRoaXMuX2RlZmF1bHRWYWxpZERvbWFpbnMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyVmFsaWREb21haW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZERvbWFpbiA9IGFyVmFsaWREb21haW5zW2ldLnJlcGxhY2UoJyonLCAnJykuc3BsaXQoJzonKVswXTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4T2ZWYWxpZERvbWFpbiA9IGRvbWFpbi5pbmRleE9mKHZhbGlkRG9tYWluKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpbmRleE9mVmFsaWREb21haW4gPj0gMCAmJlxuICAgICAgICAgICAgICAgIGluZGV4T2ZWYWxpZERvbWFpbiA9PT0gZG9tYWluLmxlbmd0aCAtIHZhbGlkRG9tYWluLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgIChpbmRleE9mVmFsaWREb21haW4gPT09IDAgfHwgZG9tYWluLmNoYXJBdChpbmRleE9mVmFsaWREb21haW4gLSAxKSA9PT0gJy4nIHx8IGRvbWFpbi5jaGFyQXQoaW5kZXhPZlZhbGlkRG9tYWluIC0gMSkgPT09ICcvJylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2VuZE1lc3NhZ2UocmVzOiBPYmplY3QsIGNhbGxiYWNrSUQ6IHN0cmluZywgcmVxdWVzdERvbWFpbjogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGxldCBzdHJNZXNzYWdlID0gJyc7XG4gICAgICAgIGZvciAoY29uc3QgcCBpbiByZXMpIHtcbiAgICAgICAgICAgIGlmIChyZXNbcF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHN0ck1lc3NhZ2UgKz0gZXNjYXBlKHAgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocmVzW3BdKSArICcmJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ2xvYmFsLnBvc3RNZXNzYWdlVG9QYXJlbnQoY2FsbGJhY2tJRCArICc9JyArIHN0ck1lc3NhZ2UsIHJlcXVlc3REb21haW4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc1ZhbGlkR2x0RXhwKGdsdEV4cDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkR2x0RXhwKGdsdEV4cCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1heEdsdEV4cChnbHRFeHAxOiBzdHJpbmcsIGdsdEV4cDI6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gZ2V0TWF4R2x0RXhwKGdsdEV4cDEsIGdsdEV4cDIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZWNvZGVVcmwodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBVUkxEZWNvZGVSZWN1cnNpdmUodmFsdWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkZXNlcmlhbGl6ZSh2YWx1ZTogc3RyaW5nKTogYW55IHtcbiAgICAgICAgcmV0dXJuIGRlc2VyaWFsaXplKHZhbHVlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29va2llc1N0b3JhZ2UoKSB7XG4gICAgICAgIHJldHVybiBpbml0aWFsaXplQWRhcHRlcihDb29raWVTdG9yYWdlQWRhcHRlcik7XG4gICAgfVxuXG4gICAgcHVibGljIHZhbGlkYXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdmFsaWRhdGlvblV0aWxzO1xuICAgIH1cblxuICAgIHB1YmxpYyBVcmlGYWN0b3J5KHVybDogc3RyaW5nLCBpc0Fic29sdXRlID0gdHJ1ZSk6IFVyaSB7XG4gICAgICAgIHJldHVybiBuZXcgVXJpKHVybCwgaXNBYnNvbHV0ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZyYWdtZW50KCkge1xuICAgICAgICBjb25zdCBwYWdlVVJMID0gdGhpcy5nZXRQYWdlVXJsKCk7XG5cbiAgICAgICAgaWYgKHBhZ2VVUkwuaW5kZXhPZignIycpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2VVUkwuc3BsaXQoJyMnKVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==