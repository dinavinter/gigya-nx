/******/ (function (modules) {
  // webpackBootstrap
  /******/ // The module cache
  /******/ var installedModules = {};
  /******/
  /******/ // The require function
  /******/ function __webpack_require__(moduleId) {
    /******/
    /******/ // Check if module is in cache
    /******/ if (installedModules[moduleId]) {
      /******/ return installedModules[moduleId].exports;
      /******/
    }
    /******/ // Create a new module (and put it into the cache)
    /******/ var module = (installedModules[moduleId] = {
      /******/ i: moduleId,
      /******/ l: false,
      /******/ exports: {},
      /******/
    });
    /******/
    /******/ // Execute the module function
    /******/ modules[moduleId].call(
      module.exports,
      module,
      module.exports,
      __webpack_require__
    );
    /******/
    /******/ // Flag the module as loaded
    /******/ module.l = true;
    /******/
    /******/ // Return the exports of the module
    /******/ return module.exports;
    /******/
  }
  /******/
  /******/
  /******/ // expose the modules object (__webpack_modules__)
  /******/ __webpack_require__.m = modules;
  /******/
  /******/ // expose the module cache
  /******/ __webpack_require__.c = installedModules;
  /******/
  /******/ // define getter function for harmony exports
  /******/ __webpack_require__.d = function (exports, name, getter) {
    /******/ if (!__webpack_require__.o(exports, name)) {
      /******/ Object.defineProperty(exports, name, {
        enumerable: true,
        get: getter,
      });
      /******/
    }
    /******/
  };
  /******/
  /******/ // define __esModule on exports
  /******/ __webpack_require__.r = function (exports) {
    /******/ if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {
      /******/ Object.defineProperty(exports, Symbol.toStringTag, {
        value: 'Module',
      });
      /******/
    }
    /******/ Object.defineProperty(exports, '__esModule', { value: true });
    /******/
  };
  /******/
  /******/ // create a fake namespace object
  /******/ // mode & 1: value is a module id, require it
  /******/ // mode & 2: merge all properties of value into the ns
  /******/ // mode & 4: return value when already ns object
  /******/ // mode & 8|1: behave like require
  /******/ __webpack_require__.t = function (value, mode) {
    /******/ if (mode & 1) value = __webpack_require__(value);
    /******/ if (mode & 8) return value;
    /******/ if (
      mode & 4 &&
      typeof value === 'object' &&
      value &&
      value.__esModule
    )
      return value;
    /******/ var ns = Object.create(null);
    /******/ __webpack_require__.r(ns);
    /******/ Object.defineProperty(ns, 'default', {
      enumerable: true,
      value: value,
    });
    /******/ if (mode & 2 && typeof value != 'string')
      for (var key in value)
        __webpack_require__.d(
          ns,
          key,
          function (key) {
            return value[key];
          }.bind(null, key)
        );
    /******/ return ns;
    /******/
  };
  /******/
  /******/ // getDefaultExport function for compatibility with non-harmony modules
  /******/ __webpack_require__.n = function (module) {
    /******/ var getter =
      module && module.__esModule
        ? /******/ function getDefault() {
            return module['default'];
          }
        : /******/ function getModuleExports() {
            return module;
          };
    /******/ __webpack_require__.d(getter, 'a', getter);
    /******/ return getter;
    /******/
  };
  /******/
  /******/ // Object.prototype.hasOwnProperty.call
  /******/ __webpack_require__.o = function (object, property) {
    return Object.prototype.hasOwnProperty.call(object, property);
  };
  /******/
  /******/ // __webpack_public_path__
  /******/ __webpack_require__.p = '';
  /******/
  /******/
  /******/ // Load entry module and return exports
  /******/ return __webpack_require__(
    (__webpack_require__.s = './src/core/Gigya.Js.Adapters.Web/index.ts')
  );
  /******/
})(
  /************************************************************************/
  /******/ {
    /***/ '../node_modules/lodash.merge/index.js':
      /*!*********************************************!*\
  !*** ../node_modules/lodash.merge/index.js ***!
  \*********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        /* WEBPACK VAR INJECTION */ (function (global, module) {
          /**
           * Lodash (Custom Build) <https://lodash.com/>
           * Build: `lodash modularize exports="npm" -o ./`
           * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
           * Released under MIT license <https://lodash.com/license>
           * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
           * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
           */

          /** Used as the size to enable large array optimizations. */
          var LARGE_ARRAY_SIZE = 200;

          /** Used to stand-in for `undefined` hash values. */
          var HASH_UNDEFINED = '__lodash_hash_undefined__';

          /** Used to detect hot functions by number of calls within a span of milliseconds. */
          var HOT_COUNT = 800,
            HOT_SPAN = 16;

          /** Used as references for various `Number` constants. */
          var MAX_SAFE_INTEGER = 9007199254740991;

          /** `Object#toString` result references. */
          var argsTag = '[object Arguments]',
            arrayTag = '[object Array]',
            asyncTag = '[object AsyncFunction]',
            boolTag = '[object Boolean]',
            dateTag = '[object Date]',
            errorTag = '[object Error]',
            funcTag = '[object Function]',
            genTag = '[object GeneratorFunction]',
            mapTag = '[object Map]',
            numberTag = '[object Number]',
            nullTag = '[object Null]',
            objectTag = '[object Object]',
            proxyTag = '[object Proxy]',
            regexpTag = '[object RegExp]',
            setTag = '[object Set]',
            stringTag = '[object String]',
            undefinedTag = '[object Undefined]',
            weakMapTag = '[object WeakMap]';

          var arrayBufferTag = '[object ArrayBuffer]',
            dataViewTag = '[object DataView]',
            float32Tag = '[object Float32Array]',
            float64Tag = '[object Float64Array]',
            int8Tag = '[object Int8Array]',
            int16Tag = '[object Int16Array]',
            int32Tag = '[object Int32Array]',
            uint8Tag = '[object Uint8Array]',
            uint8ClampedTag = '[object Uint8ClampedArray]',
            uint16Tag = '[object Uint16Array]',
            uint32Tag = '[object Uint32Array]';

          /**
           * Used to match `RegExp`
           * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
           */
          var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

          /** Used to detect host constructors (Safari). */
          var reIsHostCtor = /^\[object .+?Constructor\]$/;

          /** Used to detect unsigned integer values. */
          var reIsUint = /^(?:0|[1-9]\d*)$/;

          /** Used to identify `toStringTag` values of typed arrays. */
          var typedArrayTags = {};
          typedArrayTags[float32Tag] =
            typedArrayTags[float64Tag] =
            typedArrayTags[int8Tag] =
            typedArrayTags[int16Tag] =
            typedArrayTags[int32Tag] =
            typedArrayTags[uint8Tag] =
            typedArrayTags[uint8ClampedTag] =
            typedArrayTags[uint16Tag] =
            typedArrayTags[uint32Tag] =
              true;
          typedArrayTags[argsTag] =
            typedArrayTags[arrayTag] =
            typedArrayTags[arrayBufferTag] =
            typedArrayTags[boolTag] =
            typedArrayTags[dataViewTag] =
            typedArrayTags[dateTag] =
            typedArrayTags[errorTag] =
            typedArrayTags[funcTag] =
            typedArrayTags[mapTag] =
            typedArrayTags[numberTag] =
            typedArrayTags[objectTag] =
            typedArrayTags[regexpTag] =
            typedArrayTags[setTag] =
            typedArrayTags[stringTag] =
            typedArrayTags[weakMapTag] =
              false;

          /** Detect free variable `global` from Node.js. */
          var freeGlobal =
            typeof global == 'object' &&
            global &&
            global.Object === Object &&
            global;

          /** Detect free variable `self`. */
          var freeSelf =
            typeof self == 'object' && self && self.Object === Object && self;

          /** Used as a reference to the global object. */
          var root = freeGlobal || freeSelf || Function('return this')();

          /** Detect free variable `exports`. */
          var freeExports = true && exports && !exports.nodeType && exports;

          /** Detect free variable `module`. */
          var freeModule =
            freeExports &&
            typeof module == 'object' &&
            module &&
            !module.nodeType &&
            module;

          /** Detect the popular CommonJS extension `module.exports`. */
          var moduleExports = freeModule && freeModule.exports === freeExports;

          /** Detect free variable `process` from Node.js. */
          var freeProcess = moduleExports && freeGlobal.process;

          /** Used to access faster Node.js helpers. */
          var nodeUtil = (function () {
            try {
              // Use `util.types` for Node.js 10+.
              var types =
                freeModule &&
                freeModule.require &&
                freeModule.require('util').types;

              if (types) {
                return types;
              }

              // Legacy `process.binding('util')` for Node.js < 10.
              return (
                freeProcess &&
                freeProcess.binding &&
                freeProcess.binding('util')
              );
            } catch (e) {}
          })();

          /* Node.js helper references. */
          var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

          /**
           * A faster alternative to `Function#apply`, this function invokes `func`
           * with the `this` binding of `thisArg` and the arguments of `args`.
           *
           * @private
           * @param {Function} func The function to invoke.
           * @param {*} thisArg The `this` binding of `func`.
           * @param {Array} args The arguments to invoke `func` with.
           * @returns {*} Returns the result of `func`.
           */
          function apply(func, thisArg, args) {
            switch (args.length) {
              case 0:
                return func.call(thisArg);
              case 1:
                return func.call(thisArg, args[0]);
              case 2:
                return func.call(thisArg, args[0], args[1]);
              case 3:
                return func.call(thisArg, args[0], args[1], args[2]);
            }
            return func.apply(thisArg, args);
          }

          /**
           * The base implementation of `_.times` without support for iteratee shorthands
           * or max array length checks.
           *
           * @private
           * @param {number} n The number of times to invoke `iteratee`.
           * @param {Function} iteratee The function invoked per iteration.
           * @returns {Array} Returns the array of results.
           */
          function baseTimes(n, iteratee) {
            var index = -1,
              result = Array(n);

            while (++index < n) {
              result[index] = iteratee(index);
            }
            return result;
          }

          /**
           * The base implementation of `_.unary` without support for storing metadata.
           *
           * @private
           * @param {Function} func The function to cap arguments for.
           * @returns {Function} Returns the new capped function.
           */
          function baseUnary(func) {
            return function (value) {
              return func(value);
            };
          }

          /**
           * Gets the value at `key` of `object`.
           *
           * @private
           * @param {Object} [object] The object to query.
           * @param {string} key The key of the property to get.
           * @returns {*} Returns the property value.
           */
          function getValue(object, key) {
            return object == null ? undefined : object[key];
          }

          /**
           * Creates a unary function that invokes `func` with its argument transformed.
           *
           * @private
           * @param {Function} func The function to wrap.
           * @param {Function} transform The argument transform.
           * @returns {Function} Returns the new function.
           */
          function overArg(func, transform) {
            return function (arg) {
              return func(transform(arg));
            };
          }

          /** Used for built-in method references. */
          var arrayProto = Array.prototype,
            funcProto = Function.prototype,
            objectProto = Object.prototype;

          /** Used to detect overreaching core-js shims. */
          var coreJsData = root['__core-js_shared__'];

          /** Used to resolve the decompiled source of functions. */
          var funcToString = funcProto.toString;

          /** Used to check objects for own properties. */
          var hasOwnProperty = objectProto.hasOwnProperty;

          /** Used to detect methods masquerading as native. */
          var maskSrcKey = (function () {
            var uid = /[^.]+$/.exec(
              (coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO) || ''
            );
            return uid ? 'Symbol(src)_1.' + uid : '';
          })();

          /**
           * Used to resolve the
           * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
           * of values.
           */
          var nativeObjectToString = objectProto.toString;

          /** Used to infer the `Object` constructor. */
          var objectCtorString = funcToString.call(Object);

          /** Used to detect if a method is native. */
          var reIsNative = RegExp(
            '^' +
              funcToString
                .call(hasOwnProperty)
                .replace(reRegExpChar, '\\$&')
                .replace(
                  /hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
                  '$1.*?'
                ) +
              '$'
          );

          /** Built-in value references. */
          var Buffer = moduleExports ? root.Buffer : undefined,
            Symbol = root.Symbol,
            Uint8Array = root.Uint8Array,
            allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,
            getPrototype = overArg(Object.getPrototypeOf, Object),
            objectCreate = Object.create,
            propertyIsEnumerable = objectProto.propertyIsEnumerable,
            splice = arrayProto.splice,
            symToStringTag = Symbol ? Symbol.toStringTag : undefined;

          var defineProperty = (function () {
            try {
              var func = getNative(Object, 'defineProperty');
              func({}, '', {});
              return func;
            } catch (e) {}
          })();

          /* Built-in method references for those with the same name as other `lodash` methods. */
          var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,
            nativeMax = Math.max,
            nativeNow = Date.now;

          /* Built-in method references that are verified to be native. */
          var Map = getNative(root, 'Map'),
            nativeCreate = getNative(Object, 'create');

          /**
           * The base implementation of `_.create` without support for assigning
           * properties to the created object.
           *
           * @private
           * @param {Object} proto The object to inherit from.
           * @returns {Object} Returns the new object.
           */
          var baseCreate = (function () {
            function object() {}
            return function (proto) {
              if (!isObject(proto)) {
                return {};
              }
              if (objectCreate) {
                return objectCreate(proto);
              }
              object.prototype = proto;
              var result = new object();
              object.prototype = undefined;
              return result;
            };
          })();

          /**
           * Creates a hash object.
           *
           * @private
           * @constructor
           * @param {Array} [entries] The key-value pairs to cache.
           */
          function Hash(entries) {
            var index = -1,
              length = entries == null ? 0 : entries.length;

            this.clear();
            while (++index < length) {
              var entry = entries[index];
              this.set(entry[0], entry[1]);
            }
          }

          /**
           * Removes all key-value entries from the hash.
           *
           * @private
           * @name clear
           * @memberOf Hash
           */
          function hashClear() {
            this.__data__ = nativeCreate ? nativeCreate(null) : {};
            this.size = 0;
          }

          /**
           * Removes `key` and its value from the hash.
           *
           * @private
           * @name delete
           * @memberOf Hash
           * @param {Object} hash The hash to modify.
           * @param {string} key The key of the value to remove.
           * @returns {boolean} Returns `true` if the entry was removed, else `false`.
           */
          function hashDelete(key) {
            var result = this.has(key) && delete this.__data__[key];
            this.size -= result ? 1 : 0;
            return result;
          }

          /**
           * Gets the hash value for `key`.
           *
           * @private
           * @name get
           * @memberOf Hash
           * @param {string} key The key of the value to get.
           * @returns {*} Returns the entry value.
           */
          function hashGet(key) {
            var data = this.__data__;
            if (nativeCreate) {
              var result = data[key];
              return result === HASH_UNDEFINED ? undefined : result;
            }
            return hasOwnProperty.call(data, key) ? data[key] : undefined;
          }

          /**
           * Checks if a hash value for `key` exists.
           *
           * @private
           * @name has
           * @memberOf Hash
           * @param {string} key The key of the entry to check.
           * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
           */
          function hashHas(key) {
            var data = this.__data__;
            return nativeCreate
              ? data[key] !== undefined
              : hasOwnProperty.call(data, key);
          }

          /**
           * Sets the hash `key` to `value`.
           *
           * @private
           * @name set
           * @memberOf Hash
           * @param {string} key The key of the value to set.
           * @param {*} value The value to set.
           * @returns {Object} Returns the hash instance.
           */
          function hashSet(key, value) {
            var data = this.__data__;
            this.size += this.has(key) ? 0 : 1;
            data[key] =
              nativeCreate && value === undefined ? HASH_UNDEFINED : value;
            return this;
          }

          // Add methods to `Hash`.
          Hash.prototype.clear = hashClear;
          Hash.prototype['delete'] = hashDelete;
          Hash.prototype.get = hashGet;
          Hash.prototype.has = hashHas;
          Hash.prototype.set = hashSet;

          /**
           * Creates an list cache object.
           *
           * @private
           * @constructor
           * @param {Array} [entries] The key-value pairs to cache.
           */
          function ListCache(entries) {
            var index = -1,
              length = entries == null ? 0 : entries.length;

            this.clear();
            while (++index < length) {
              var entry = entries[index];
              this.set(entry[0], entry[1]);
            }
          }

          /**
           * Removes all key-value entries from the list cache.
           *
           * @private
           * @name clear
           * @memberOf ListCache
           */
          function listCacheClear() {
            this.__data__ = [];
            this.size = 0;
          }

          /**
           * Removes `key` and its value from the list cache.
           *
           * @private
           * @name delete
           * @memberOf ListCache
           * @param {string} key The key of the value to remove.
           * @returns {boolean} Returns `true` if the entry was removed, else `false`.
           */
          function listCacheDelete(key) {
            var data = this.__data__,
              index = assocIndexOf(data, key);

            if (index < 0) {
              return false;
            }
            var lastIndex = data.length - 1;
            if (index == lastIndex) {
              data.pop();
            } else {
              splice.call(data, index, 1);
            }
            --this.size;
            return true;
          }

          /**
           * Gets the list cache value for `key`.
           *
           * @private
           * @name get
           * @memberOf ListCache
           * @param {string} key The key of the value to get.
           * @returns {*} Returns the entry value.
           */
          function listCacheGet(key) {
            var data = this.__data__,
              index = assocIndexOf(data, key);

            return index < 0 ? undefined : data[index][1];
          }

          /**
           * Checks if a list cache value for `key` exists.
           *
           * @private
           * @name has
           * @memberOf ListCache
           * @param {string} key The key of the entry to check.
           * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
           */
          function listCacheHas(key) {
            return assocIndexOf(this.__data__, key) > -1;
          }

          /**
           * Sets the list cache `key` to `value`.
           *
           * @private
           * @name set
           * @memberOf ListCache
           * @param {string} key The key of the value to set.
           * @param {*} value The value to set.
           * @returns {Object} Returns the list cache instance.
           */
          function listCacheSet(key, value) {
            var data = this.__data__,
              index = assocIndexOf(data, key);

            if (index < 0) {
              ++this.size;
              data.push([key, value]);
            } else {
              data[index][1] = value;
            }
            return this;
          }

          // Add methods to `ListCache`.
          ListCache.prototype.clear = listCacheClear;
          ListCache.prototype['delete'] = listCacheDelete;
          ListCache.prototype.get = listCacheGet;
          ListCache.prototype.has = listCacheHas;
          ListCache.prototype.set = listCacheSet;

          /**
           * Creates a map cache object to store key-value pairs.
           *
           * @private
           * @constructor
           * @param {Array} [entries] The key-value pairs to cache.
           */
          function MapCache(entries) {
            var index = -1,
              length = entries == null ? 0 : entries.length;

            this.clear();
            while (++index < length) {
              var entry = entries[index];
              this.set(entry[0], entry[1]);
            }
          }

          /**
           * Removes all key-value entries from the map.
           *
           * @private
           * @name clear
           * @memberOf MapCache
           */
          function mapCacheClear() {
            this.size = 0;
            this.__data__ = {
              hash: new Hash(),
              map: new (Map || ListCache)(),
              string: new Hash(),
            };
          }

          /**
           * Removes `key` and its value from the map.
           *
           * @private
           * @name delete
           * @memberOf MapCache
           * @param {string} key The key of the value to remove.
           * @returns {boolean} Returns `true` if the entry was removed, else `false`.
           */
          function mapCacheDelete(key) {
            var result = getMapData(this, key)['delete'](key);
            this.size -= result ? 1 : 0;
            return result;
          }

          /**
           * Gets the map value for `key`.
           *
           * @private
           * @name get
           * @memberOf MapCache
           * @param {string} key The key of the value to get.
           * @returns {*} Returns the entry value.
           */
          function mapCacheGet(key) {
            return getMapData(this, key).get(key);
          }

          /**
           * Checks if a map value for `key` exists.
           *
           * @private
           * @name has
           * @memberOf MapCache
           * @param {string} key The key of the entry to check.
           * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
           */
          function mapCacheHas(key) {
            return getMapData(this, key).has(key);
          }

          /**
           * Sets the map `key` to `value`.
           *
           * @private
           * @name set
           * @memberOf MapCache
           * @param {string} key The key of the value to set.
           * @param {*} value The value to set.
           * @returns {Object} Returns the map cache instance.
           */
          function mapCacheSet(key, value) {
            var data = getMapData(this, key),
              size = data.size;

            data.set(key, value);
            this.size += data.size == size ? 0 : 1;
            return this;
          }

          // Add methods to `MapCache`.
          MapCache.prototype.clear = mapCacheClear;
          MapCache.prototype['delete'] = mapCacheDelete;
          MapCache.prototype.get = mapCacheGet;
          MapCache.prototype.has = mapCacheHas;
          MapCache.prototype.set = mapCacheSet;

          /**
           * Creates a stack cache object to store key-value pairs.
           *
           * @private
           * @constructor
           * @param {Array} [entries] The key-value pairs to cache.
           */
          function Stack(entries) {
            var data = (this.__data__ = new ListCache(entries));
            this.size = data.size;
          }

          /**
           * Removes all key-value entries from the stack.
           *
           * @private
           * @name clear
           * @memberOf Stack
           */
          function stackClear() {
            this.__data__ = new ListCache();
            this.size = 0;
          }

          /**
           * Removes `key` and its value from the stack.
           *
           * @private
           * @name delete
           * @memberOf Stack
           * @param {string} key The key of the value to remove.
           * @returns {boolean} Returns `true` if the entry was removed, else `false`.
           */
          function stackDelete(key) {
            var data = this.__data__,
              result = data['delete'](key);

            this.size = data.size;
            return result;
          }

          /**
           * Gets the stack value for `key`.
           *
           * @private
           * @name get
           * @memberOf Stack
           * @param {string} key The key of the value to get.
           * @returns {*} Returns the entry value.
           */
          function stackGet(key) {
            return this.__data__.get(key);
          }

          /**
           * Checks if a stack value for `key` exists.
           *
           * @private
           * @name has
           * @memberOf Stack
           * @param {string} key The key of the entry to check.
           * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
           */
          function stackHas(key) {
            return this.__data__.has(key);
          }

          /**
           * Sets the stack `key` to `value`.
           *
           * @private
           * @name set
           * @memberOf Stack
           * @param {string} key The key of the value to set.
           * @param {*} value The value to set.
           * @returns {Object} Returns the stack cache instance.
           */
          function stackSet(key, value) {
            var data = this.__data__;
            if (data instanceof ListCache) {
              var pairs = data.__data__;
              if (!Map || pairs.length < LARGE_ARRAY_SIZE - 1) {
                pairs.push([key, value]);
                this.size = ++data.size;
                return this;
              }
              data = this.__data__ = new MapCache(pairs);
            }
            data.set(key, value);
            this.size = data.size;
            return this;
          }

          // Add methods to `Stack`.
          Stack.prototype.clear = stackClear;
          Stack.prototype['delete'] = stackDelete;
          Stack.prototype.get = stackGet;
          Stack.prototype.has = stackHas;
          Stack.prototype.set = stackSet;

          /**
           * Creates an array of the enumerable property names of the array-like `value`.
           *
           * @private
           * @param {*} value The value to query.
           * @param {boolean} inherited Specify returning inherited property names.
           * @returns {Array} Returns the array of property names.
           */
          function arrayLikeKeys(value, inherited) {
            var isArr = isArray(value),
              isArg = !isArr && isArguments(value),
              isBuff = !isArr && !isArg && isBuffer(value),
              isType = !isArr && !isArg && !isBuff && isTypedArray(value),
              skipIndexes = isArr || isArg || isBuff || isType,
              result = skipIndexes ? baseTimes(value.length, String) : [],
              length = result.length;

            for (var key in value) {
              if (
                (inherited || hasOwnProperty.call(value, key)) &&
                !(
                  skipIndexes &&
                  // Safari 9 has enumerable `arguments.length` in strict mode.
                  (key == 'length' ||
                    // Node.js 0.10 has enumerable non-index properties on buffers.
                    (isBuff && (key == 'offset' || key == 'parent')) ||
                    // PhantomJS 2 has enumerable non-index properties on typed arrays.
                    (isType &&
                      (key == 'buffer' ||
                        key == 'byteLength' ||
                        key == 'byteOffset')) ||
                    // Skip index properties.
                    isIndex(key, length))
                )
              ) {
                result.push(key);
              }
            }
            return result;
          }

          /**
           * This function is like `assignValue` except that it doesn't assign
           * `undefined` values.
           *
           * @private
           * @param {Object} object The object to modify.
           * @param {string} key The key of the property to assign.
           * @param {*} value The value to assign.
           */
          function assignMergeValue(object, key, value) {
            if (
              (value !== undefined && !eq(object[key], value)) ||
              (value === undefined && !(key in object))
            ) {
              baseAssignValue(object, key, value);
            }
          }

          /**
           * Assigns `value` to `key` of `object` if the existing value is not equivalent
           * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
           * for equality comparisons.
           *
           * @private
           * @param {Object} object The object to modify.
           * @param {string} key The key of the property to assign.
           * @param {*} value The value to assign.
           */
          function assignValue(object, key, value) {
            var objValue = object[key];
            if (
              !(hasOwnProperty.call(object, key) && eq(objValue, value)) ||
              (value === undefined && !(key in object))
            ) {
              baseAssignValue(object, key, value);
            }
          }

          /**
           * Gets the index at which the `key` is found in `array` of key-value pairs.
           *
           * @private
           * @param {Array} array The array to inspect.
           * @param {*} key The key to search for.
           * @returns {number} Returns the index of the matched value, else `-1`.
           */
          function assocIndexOf(array, key) {
            var length = array.length;
            while (length--) {
              if (eq(array[length][0], key)) {
                return length;
              }
            }
            return -1;
          }

          /**
           * The base implementation of `assignValue` and `assignMergeValue` without
           * value checks.
           *
           * @private
           * @param {Object} object The object to modify.
           * @param {string} key The key of the property to assign.
           * @param {*} value The value to assign.
           */
          function baseAssignValue(object, key, value) {
            if (key == '__proto__' && defineProperty) {
              defineProperty(object, key, {
                configurable: true,
                enumerable: true,
                value: value,
                writable: true,
              });
            } else {
              object[key] = value;
            }
          }

          /**
           * The base implementation of `baseForOwn` which iterates over `object`
           * properties returned by `keysFunc` and invokes `iteratee` for each property.
           * Iteratee functions may exit iteration early by explicitly returning `false`.
           *
           * @private
           * @param {Object} object The object to iterate over.
           * @param {Function} iteratee The function invoked per iteration.
           * @param {Function} keysFunc The function to get the keys of `object`.
           * @returns {Object} Returns `object`.
           */
          var baseFor = createBaseFor();

          /**
           * The base implementation of `getTag` without fallbacks for buggy environments.
           *
           * @private
           * @param {*} value The value to query.
           * @returns {string} Returns the `toStringTag`.
           */
          function baseGetTag(value) {
            if (value == null) {
              return value === undefined ? undefinedTag : nullTag;
            }
            return symToStringTag && symToStringTag in Object(value)
              ? getRawTag(value)
              : objectToString(value);
          }

          /**
           * The base implementation of `_.isArguments`.
           *
           * @private
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is an `arguments` object,
           */
          function baseIsArguments(value) {
            return isObjectLike(value) && baseGetTag(value) == argsTag;
          }

          /**
           * The base implementation of `_.isNative` without bad shim checks.
           *
           * @private
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a native function,
           *  else `false`.
           */
          function baseIsNative(value) {
            if (!isObject(value) || isMasked(value)) {
              return false;
            }
            var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
            return pattern.test(toSource(value));
          }

          /**
           * The base implementation of `_.isTypedArray` without Node.js optimizations.
           *
           * @private
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
           */
          function baseIsTypedArray(value) {
            return (
              isObjectLike(value) &&
              isLength(value.length) &&
              !!typedArrayTags[baseGetTag(value)]
            );
          }

          /**
           * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
           *
           * @private
           * @param {Object} object The object to query.
           * @returns {Array} Returns the array of property names.
           */
          function baseKeysIn(object) {
            if (!isObject(object)) {
              return nativeKeysIn(object);
            }
            var isProto = isPrototype(object),
              result = [];

            for (var key in object) {
              if (
                !(
                  key == 'constructor' &&
                  (isProto || !hasOwnProperty.call(object, key))
                )
              ) {
                result.push(key);
              }
            }
            return result;
          }

          /**
           * The base implementation of `_.merge` without support for multiple sources.
           *
           * @private
           * @param {Object} object The destination object.
           * @param {Object} source The source object.
           * @param {number} srcIndex The index of `source`.
           * @param {Function} [customizer] The function to customize merged values.
           * @param {Object} [stack] Tracks traversed source values and their merged
           *  counterparts.
           */
          function baseMerge(object, source, srcIndex, customizer, stack) {
            if (object === source) {
              return;
            }
            baseFor(
              source,
              function (srcValue, key) {
                stack || (stack = new Stack());
                if (isObject(srcValue)) {
                  baseMergeDeep(
                    object,
                    source,
                    key,
                    srcIndex,
                    baseMerge,
                    customizer,
                    stack
                  );
                } else {
                  var newValue = customizer
                    ? customizer(
                        safeGet(object, key),
                        srcValue,
                        key + '',
                        object,
                        source,
                        stack
                      )
                    : undefined;

                  if (newValue === undefined) {
                    newValue = srcValue;
                  }
                  assignMergeValue(object, key, newValue);
                }
              },
              keysIn
            );
          }

          /**
           * A specialized version of `baseMerge` for arrays and objects which performs
           * deep merges and tracks traversed objects enabling objects with circular
           * references to be merged.
           *
           * @private
           * @param {Object} object The destination object.
           * @param {Object} source The source object.
           * @param {string} key The key of the value to merge.
           * @param {number} srcIndex The index of `source`.
           * @param {Function} mergeFunc The function to merge values.
           * @param {Function} [customizer] The function to customize assigned values.
           * @param {Object} [stack] Tracks traversed source values and their merged
           *  counterparts.
           */
          function baseMergeDeep(
            object,
            source,
            key,
            srcIndex,
            mergeFunc,
            customizer,
            stack
          ) {
            var objValue = safeGet(object, key),
              srcValue = safeGet(source, key),
              stacked = stack.get(srcValue);

            if (stacked) {
              assignMergeValue(object, key, stacked);
              return;
            }
            var newValue = customizer
              ? customizer(objValue, srcValue, key + '', object, source, stack)
              : undefined;

            var isCommon = newValue === undefined;

            if (isCommon) {
              var isArr = isArray(srcValue),
                isBuff = !isArr && isBuffer(srcValue),
                isTyped = !isArr && !isBuff && isTypedArray(srcValue);

              newValue = srcValue;
              if (isArr || isBuff || isTyped) {
                if (isArray(objValue)) {
                  newValue = objValue;
                } else if (isArrayLikeObject(objValue)) {
                  newValue = copyArray(objValue);
                } else if (isBuff) {
                  isCommon = false;
                  newValue = cloneBuffer(srcValue, true);
                } else if (isTyped) {
                  isCommon = false;
                  newValue = cloneTypedArray(srcValue, true);
                } else {
                  newValue = [];
                }
              } else if (isPlainObject(srcValue) || isArguments(srcValue)) {
                newValue = objValue;
                if (isArguments(objValue)) {
                  newValue = toPlainObject(objValue);
                } else if (!isObject(objValue) || isFunction(objValue)) {
                  newValue = initCloneObject(srcValue);
                }
              } else {
                isCommon = false;
              }
            }
            if (isCommon) {
              // Recursively merge objects and arrays (susceptible to call stack limits).
              stack.set(srcValue, newValue);
              mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
              stack['delete'](srcValue);
            }
            assignMergeValue(object, key, newValue);
          }

          /**
           * The base implementation of `_.rest` which doesn't validate or coerce arguments.
           *
           * @private
           * @param {Function} func The function to apply a rest parameter to.
           * @param {number} [start=func.length-1] The start position of the rest parameter.
           * @returns {Function} Returns the new function.
           */
          function baseRest(func, start) {
            return setToString(overRest(func, start, identity), func + '');
          }

          /**
           * The base implementation of `setToString` without support for hot loop shorting.
           *
           * @private
           * @param {Function} func The function to modify.
           * @param {Function} string The `toString` result.
           * @returns {Function} Returns `func`.
           */
          var baseSetToString = !defineProperty
            ? identity
            : function (func, string) {
                return defineProperty(func, 'toString', {
                  configurable: true,
                  enumerable: false,
                  value: constant(string),
                  writable: true,
                });
              };

          /**
           * Creates a clone of  `buffer`.
           *
           * @private
           * @param {Buffer} buffer The buffer to clone.
           * @param {boolean} [isDeep] Specify a deep clone.
           * @returns {Buffer} Returns the cloned buffer.
           */
          function cloneBuffer(buffer, isDeep) {
            if (isDeep) {
              return buffer.slice();
            }
            var length = buffer.length,
              result = allocUnsafe
                ? allocUnsafe(length)
                : new buffer.constructor(length);

            buffer.copy(result);
            return result;
          }

          /**
           * Creates a clone of `arrayBuffer`.
           *
           * @private
           * @param {ArrayBuffer} arrayBuffer The array buffer to clone.
           * @returns {ArrayBuffer} Returns the cloned array buffer.
           */
          function cloneArrayBuffer(arrayBuffer) {
            var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
            new Uint8Array(result).set(new Uint8Array(arrayBuffer));
            return result;
          }

          /**
           * Creates a clone of `typedArray`.
           *
           * @private
           * @param {Object} typedArray The typed array to clone.
           * @param {boolean} [isDeep] Specify a deep clone.
           * @returns {Object} Returns the cloned typed array.
           */
          function cloneTypedArray(typedArray, isDeep) {
            var buffer = isDeep
              ? cloneArrayBuffer(typedArray.buffer)
              : typedArray.buffer;
            return new typedArray.constructor(
              buffer,
              typedArray.byteOffset,
              typedArray.length
            );
          }

          /**
           * Copies the values of `source` to `array`.
           *
           * @private
           * @param {Array} source The array to copy values from.
           * @param {Array} [array=[]] The array to copy values to.
           * @returns {Array} Returns `array`.
           */
          function copyArray(source, array) {
            var index = -1,
              length = source.length;

            array || (array = Array(length));
            while (++index < length) {
              array[index] = source[index];
            }
            return array;
          }

          /**
           * Copies properties of `source` to `object`.
           *
           * @private
           * @param {Object} source The object to copy properties from.
           * @param {Array} props The property identifiers to copy.
           * @param {Object} [object={}] The object to copy properties to.
           * @param {Function} [customizer] The function to customize copied values.
           * @returns {Object} Returns `object`.
           */
          function copyObject(source, props, object, customizer) {
            var isNew = !object;
            object || (object = {});

            var index = -1,
              length = props.length;

            while (++index < length) {
              var key = props[index];

              var newValue = customizer
                ? customizer(object[key], source[key], key, object, source)
                : undefined;

              if (newValue === undefined) {
                newValue = source[key];
              }
              if (isNew) {
                baseAssignValue(object, key, newValue);
              } else {
                assignValue(object, key, newValue);
              }
            }
            return object;
          }

          /**
           * Creates a function like `_.assign`.
           *
           * @private
           * @param {Function} assigner The function to assign values.
           * @returns {Function} Returns the new assigner function.
           */
          function createAssigner(assigner) {
            return baseRest(function (object, sources) {
              var index = -1,
                length = sources.length,
                customizer = length > 1 ? sources[length - 1] : undefined,
                guard = length > 2 ? sources[2] : undefined;

              customizer =
                assigner.length > 3 && typeof customizer == 'function'
                  ? (length--, customizer)
                  : undefined;

              if (guard && isIterateeCall(sources[0], sources[1], guard)) {
                customizer = length < 3 ? undefined : customizer;
                length = 1;
              }
              object = Object(object);
              while (++index < length) {
                var source = sources[index];
                if (source) {
                  assigner(object, source, index, customizer);
                }
              }
              return object;
            });
          }

          /**
           * Creates a base function for methods like `_.forIn` and `_.forOwn`.
           *
           * @private
           * @param {boolean} [fromRight] Specify iterating from right to left.
           * @returns {Function} Returns the new base function.
           */
          function createBaseFor(fromRight) {
            return function (object, iteratee, keysFunc) {
              var index = -1,
                iterable = Object(object),
                props = keysFunc(object),
                length = props.length;

              while (length--) {
                var key = props[fromRight ? length : ++index];
                if (iteratee(iterable[key], key, iterable) === false) {
                  break;
                }
              }
              return object;
            };
          }

          /**
           * Gets the data for `map`.
           *
           * @private
           * @param {Object} map The map to query.
           * @param {string} key The reference key.
           * @returns {*} Returns the map data.
           */
          function getMapData(map, key) {
            var data = map.__data__;
            return isKeyable(key)
              ? data[typeof key == 'string' ? 'string' : 'hash']
              : data.map;
          }

          /**
           * Gets the native function at `key` of `object`.
           *
           * @private
           * @param {Object} object The object to query.
           * @param {string} key The key of the method to get.
           * @returns {*} Returns the function if it's native, else `undefined`.
           */
          function getNative(object, key) {
            var value = getValue(object, key);
            return baseIsNative(value) ? value : undefined;
          }

          /**
           * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
           *
           * @private
           * @param {*} value The value to query.
           * @returns {string} Returns the raw `toStringTag`.
           */
          function getRawTag(value) {
            var isOwn = hasOwnProperty.call(value, symToStringTag),
              tag = value[symToStringTag];

            try {
              value[symToStringTag] = undefined;
              var unmasked = true;
            } catch (e) {}

            var result = nativeObjectToString.call(value);
            if (unmasked) {
              if (isOwn) {
                value[symToStringTag] = tag;
              } else {
                delete value[symToStringTag];
              }
            }
            return result;
          }

          /**
           * Initializes an object clone.
           *
           * @private
           * @param {Object} object The object to clone.
           * @returns {Object} Returns the initialized clone.
           */
          function initCloneObject(object) {
            return typeof object.constructor == 'function' &&
              !isPrototype(object)
              ? baseCreate(getPrototype(object))
              : {};
          }

          /**
           * Checks if `value` is a valid array-like index.
           *
           * @private
           * @param {*} value The value to check.
           * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
           * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
           */
          function isIndex(value, length) {
            var type = typeof value;
            length = length == null ? MAX_SAFE_INTEGER : length;

            return (
              !!length &&
              (type == 'number' ||
                (type != 'symbol' && reIsUint.test(value))) &&
              value > -1 &&
              value % 1 == 0 &&
              value < length
            );
          }

          /**
           * Checks if the given arguments are from an iteratee call.
           *
           * @private
           * @param {*} value The potential iteratee value argument.
           * @param {*} index The potential iteratee index or key argument.
           * @param {*} object The potential iteratee object argument.
           * @returns {boolean} Returns `true` if the arguments are from an iteratee call,
           *  else `false`.
           */
          function isIterateeCall(value, index, object) {
            if (!isObject(object)) {
              return false;
            }
            var type = typeof index;
            if (
              type == 'number'
                ? isArrayLike(object) && isIndex(index, object.length)
                : type == 'string' && index in object
            ) {
              return eq(object[index], value);
            }
            return false;
          }

          /**
           * Checks if `value` is suitable for use as unique object key.
           *
           * @private
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
           */
          function isKeyable(value) {
            var type = typeof value;
            return type == 'string' ||
              type == 'number' ||
              type == 'symbol' ||
              type == 'boolean'
              ? value !== '__proto__'
              : value === null;
          }

          /**
           * Checks if `func` has its source masked.
           *
           * @private
           * @param {Function} func The function to check.
           * @returns {boolean} Returns `true` if `func` is masked, else `false`.
           */
          function isMasked(func) {
            return !!maskSrcKey && maskSrcKey in func;
          }

          /**
           * Checks if `value` is likely a prototype object.
           *
           * @private
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
           */
          function isPrototype(value) {
            var Ctor = value && value.constructor,
              proto =
                (typeof Ctor == 'function' && Ctor.prototype) || objectProto;

            return value === proto;
          }

          /**
           * This function is like
           * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
           * except that it includes inherited enumerable properties.
           *
           * @private
           * @param {Object} object The object to query.
           * @returns {Array} Returns the array of property names.
           */
          function nativeKeysIn(object) {
            var result = [];
            if (object != null) {
              for (var key in Object(object)) {
                result.push(key);
              }
            }
            return result;
          }

          /**
           * Converts `value` to a string using `Object.prototype.toString`.
           *
           * @private
           * @param {*} value The value to convert.
           * @returns {string} Returns the converted string.
           */
          function objectToString(value) {
            return nativeObjectToString.call(value);
          }

          /**
           * A specialized version of `baseRest` which transforms the rest array.
           *
           * @private
           * @param {Function} func The function to apply a rest parameter to.
           * @param {number} [start=func.length-1] The start position of the rest parameter.
           * @param {Function} transform The rest array transform.
           * @returns {Function} Returns the new function.
           */
          function overRest(func, start, transform) {
            start = nativeMax(start === undefined ? func.length - 1 : start, 0);
            return function () {
              var args = arguments,
                index = -1,
                length = nativeMax(args.length - start, 0),
                array = Array(length);

              while (++index < length) {
                array[index] = args[start + index];
              }
              index = -1;
              var otherArgs = Array(start + 1);
              while (++index < start) {
                otherArgs[index] = args[index];
              }
              otherArgs[start] = transform(array);
              return apply(func, this, otherArgs);
            };
          }

          /**
           * Gets the value at `key`, unless `key` is "__proto__" or "constructor".
           *
           * @private
           * @param {Object} object The object to query.
           * @param {string} key The key of the property to get.
           * @returns {*} Returns the property value.
           */
          function safeGet(object, key) {
            if (key === 'constructor' && typeof object[key] === 'function') {
              return;
            }

            if (key == '__proto__') {
              return;
            }

            return object[key];
          }

          /**
           * Sets the `toString` method of `func` to return `string`.
           *
           * @private
           * @param {Function} func The function to modify.
           * @param {Function} string The `toString` result.
           * @returns {Function} Returns `func`.
           */
          var setToString = shortOut(baseSetToString);

          /**
           * Creates a function that'll short out and invoke `identity` instead
           * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`
           * milliseconds.
           *
           * @private
           * @param {Function} func The function to restrict.
           * @returns {Function} Returns the new shortable function.
           */
          function shortOut(func) {
            var count = 0,
              lastCalled = 0;

            return function () {
              var stamp = nativeNow(),
                remaining = HOT_SPAN - (stamp - lastCalled);

              lastCalled = stamp;
              if (remaining > 0) {
                if (++count >= HOT_COUNT) {
                  return arguments[0];
                }
              } else {
                count = 0;
              }
              return func.apply(undefined, arguments);
            };
          }

          /**
           * Converts `func` to its source code.
           *
           * @private
           * @param {Function} func The function to convert.
           * @returns {string} Returns the source code.
           */
          function toSource(func) {
            if (func != null) {
              try {
                return funcToString.call(func);
              } catch (e) {}
              try {
                return func + '';
              } catch (e) {}
            }
            return '';
          }

          /**
           * Performs a
           * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
           * comparison between two values to determine if they are equivalent.
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to compare.
           * @param {*} other The other value to compare.
           * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
           * @example
           *
           * var object = { 'a': 1 };
           * var other = { 'a': 1 };
           *
           * _.eq(object, object);
           * // => true
           *
           * _.eq(object, other);
           * // => false
           *
           * _.eq('a', 'a');
           * // => true
           *
           * _.eq('a', Object('a'));
           * // => false
           *
           * _.eq(NaN, NaN);
           * // => true
           */
          function eq(value, other) {
            return value === other || (value !== value && other !== other);
          }

          /**
           * Checks if `value` is likely an `arguments` object.
           *
           * @static
           * @memberOf _
           * @since 0.1.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is an `arguments` object,
           *  else `false`.
           * @example
           *
           * _.isArguments(function() { return arguments; }());
           * // => true
           *
           * _.isArguments([1, 2, 3]);
           * // => false
           */
          var isArguments = baseIsArguments(
            (function () {
              return arguments;
            })()
          )
            ? baseIsArguments
            : function (value) {
                return (
                  isObjectLike(value) &&
                  hasOwnProperty.call(value, 'callee') &&
                  !propertyIsEnumerable.call(value, 'callee')
                );
              };

          /**
           * Checks if `value` is classified as an `Array` object.
           *
           * @static
           * @memberOf _
           * @since 0.1.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is an array, else `false`.
           * @example
           *
           * _.isArray([1, 2, 3]);
           * // => true
           *
           * _.isArray(document.body.children);
           * // => false
           *
           * _.isArray('abc');
           * // => false
           *
           * _.isArray(_.noop);
           * // => false
           */
          var isArray = Array.isArray;

          /**
           * Checks if `value` is array-like. A value is considered array-like if it's
           * not a function and has a `value.length` that's an integer greater than or
           * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
           * @example
           *
           * _.isArrayLike([1, 2, 3]);
           * // => true
           *
           * _.isArrayLike(document.body.children);
           * // => true
           *
           * _.isArrayLike('abc');
           * // => true
           *
           * _.isArrayLike(_.noop);
           * // => false
           */
          function isArrayLike(value) {
            return (
              value != null && isLength(value.length) && !isFunction(value)
            );
          }

          /**
           * This method is like `_.isArrayLike` except that it also checks if `value`
           * is an object.
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is an array-like object,
           *  else `false`.
           * @example
           *
           * _.isArrayLikeObject([1, 2, 3]);
           * // => true
           *
           * _.isArrayLikeObject(document.body.children);
           * // => true
           *
           * _.isArrayLikeObject('abc');
           * // => false
           *
           * _.isArrayLikeObject(_.noop);
           * // => false
           */
          function isArrayLikeObject(value) {
            return isObjectLike(value) && isArrayLike(value);
          }

          /**
           * Checks if `value` is a buffer.
           *
           * @static
           * @memberOf _
           * @since 4.3.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
           * @example
           *
           * _.isBuffer(new Buffer(2));
           * // => true
           *
           * _.isBuffer(new Uint8Array(2));
           * // => false
           */
          var isBuffer = nativeIsBuffer || stubFalse;

          /**
           * Checks if `value` is classified as a `Function` object.
           *
           * @static
           * @memberOf _
           * @since 0.1.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a function, else `false`.
           * @example
           *
           * _.isFunction(_);
           * // => true
           *
           * _.isFunction(/abc/);
           * // => false
           */
          function isFunction(value) {
            if (!isObject(value)) {
              return false;
            }
            // The use of `Object#toString` avoids issues with the `typeof` operator
            // in Safari 9 which returns 'object' for typed arrays and other constructors.
            var tag = baseGetTag(value);
            return (
              tag == funcTag ||
              tag == genTag ||
              tag == asyncTag ||
              tag == proxyTag
            );
          }

          /**
           * Checks if `value` is a valid array-like length.
           *
           * **Note:** This method is loosely based on
           * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
           * @example
           *
           * _.isLength(3);
           * // => true
           *
           * _.isLength(Number.MIN_VALUE);
           * // => false
           *
           * _.isLength(Infinity);
           * // => false
           *
           * _.isLength('3');
           * // => false
           */
          function isLength(value) {
            return (
              typeof value == 'number' &&
              value > -1 &&
              value % 1 == 0 &&
              value <= MAX_SAFE_INTEGER
            );
          }

          /**
           * Checks if `value` is the
           * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
           * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
           *
           * @static
           * @memberOf _
           * @since 0.1.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is an object, else `false`.
           * @example
           *
           * _.isObject({});
           * // => true
           *
           * _.isObject([1, 2, 3]);
           * // => true
           *
           * _.isObject(_.noop);
           * // => true
           *
           * _.isObject(null);
           * // => false
           */
          function isObject(value) {
            var type = typeof value;
            return value != null && (type == 'object' || type == 'function');
          }

          /**
           * Checks if `value` is object-like. A value is object-like if it's not `null`
           * and has a `typeof` result of "object".
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
           * @example
           *
           * _.isObjectLike({});
           * // => true
           *
           * _.isObjectLike([1, 2, 3]);
           * // => true
           *
           * _.isObjectLike(_.noop);
           * // => false
           *
           * _.isObjectLike(null);
           * // => false
           */
          function isObjectLike(value) {
            return value != null && typeof value == 'object';
          }

          /**
           * Checks if `value` is a plain object, that is, an object created by the
           * `Object` constructor or one with a `[[Prototype]]` of `null`.
           *
           * @static
           * @memberOf _
           * @since 0.8.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
           * @example
           *
           * function Foo() {
           *   this.a = 1;
           * }
           *
           * _.isPlainObject(new Foo);
           * // => false
           *
           * _.isPlainObject([1, 2, 3]);
           * // => false
           *
           * _.isPlainObject({ 'x': 0, 'y': 0 });
           * // => true
           *
           * _.isPlainObject(Object.create(null));
           * // => true
           */
          function isPlainObject(value) {
            if (!isObjectLike(value) || baseGetTag(value) != objectTag) {
              return false;
            }
            var proto = getPrototype(value);
            if (proto === null) {
              return true;
            }
            var Ctor =
              hasOwnProperty.call(proto, 'constructor') && proto.constructor;
            return (
              typeof Ctor == 'function' &&
              Ctor instanceof Ctor &&
              funcToString.call(Ctor) == objectCtorString
            );
          }

          /**
           * Checks if `value` is classified as a typed array.
           *
           * @static
           * @memberOf _
           * @since 3.0.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
           * @example
           *
           * _.isTypedArray(new Uint8Array);
           * // => true
           *
           * _.isTypedArray([]);
           * // => false
           */
          var isTypedArray = nodeIsTypedArray
            ? baseUnary(nodeIsTypedArray)
            : baseIsTypedArray;

          /**
           * Converts `value` to a plain object flattening inherited enumerable string
           * keyed properties of `value` to own properties of the plain object.
           *
           * @static
           * @memberOf _
           * @since 3.0.0
           * @category Lang
           * @param {*} value The value to convert.
           * @returns {Object} Returns the converted plain object.
           * @example
           *
           * function Foo() {
           *   this.b = 2;
           * }
           *
           * Foo.prototype.c = 3;
           *
           * _.assign({ 'a': 1 }, new Foo);
           * // => { 'a': 1, 'b': 2 }
           *
           * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
           * // => { 'a': 1, 'b': 2, 'c': 3 }
           */
          function toPlainObject(value) {
            return copyObject(value, keysIn(value));
          }

          /**
           * Creates an array of the own and inherited enumerable property names of `object`.
           *
           * **Note:** Non-object values are coerced to objects.
           *
           * @static
           * @memberOf _
           * @since 3.0.0
           * @category Object
           * @param {Object} object The object to query.
           * @returns {Array} Returns the array of property names.
           * @example
           *
           * function Foo() {
           *   this.a = 1;
           *   this.b = 2;
           * }
           *
           * Foo.prototype.c = 3;
           *
           * _.keysIn(new Foo);
           * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
           */
          function keysIn(object) {
            return isArrayLike(object)
              ? arrayLikeKeys(object, true)
              : baseKeysIn(object);
          }

          /**
           * This method is like `_.assign` except that it recursively merges own and
           * inherited enumerable string keyed properties of source objects into the
           * destination object. Source properties that resolve to `undefined` are
           * skipped if a destination value exists. Array and plain object properties
           * are merged recursively. Other objects and value types are overridden by
           * assignment. Source objects are applied from left to right. Subsequent
           * sources overwrite property assignments of previous sources.
           *
           * **Note:** This method mutates `object`.
           *
           * @static
           * @memberOf _
           * @since 0.5.0
           * @category Object
           * @param {Object} object The destination object.
           * @param {...Object} [sources] The source objects.
           * @returns {Object} Returns `object`.
           * @example
           *
           * var object = {
           *   'a': [{ 'b': 2 }, { 'd': 4 }]
           * };
           *
           * var other = {
           *   'a': [{ 'c': 3 }, { 'e': 5 }]
           * };
           *
           * _.merge(object, other);
           * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }
           */
          var merge = createAssigner(function (object, source, srcIndex) {
            baseMerge(object, source, srcIndex);
          });

          /**
           * Creates a function that returns `value`.
           *
           * @static
           * @memberOf _
           * @since 2.4.0
           * @category Util
           * @param {*} value The value to return from the new function.
           * @returns {Function} Returns the new constant function.
           * @example
           *
           * var objects = _.times(2, _.constant({ 'a': 1 }));
           *
           * console.log(objects);
           * // => [{ 'a': 1 }, { 'a': 1 }]
           *
           * console.log(objects[0] === objects[1]);
           * // => true
           */
          function constant(value) {
            return function () {
              return value;
            };
          }

          /**
           * This method returns the first argument it receives.
           *
           * @static
           * @since 0.1.0
           * @memberOf _
           * @category Util
           * @param {*} value Any value.
           * @returns {*} Returns `value`.
           * @example
           *
           * var object = { 'a': 1 };
           *
           * console.log(_.identity(object) === object);
           * // => true
           */
          function identity(value) {
            return value;
          }

          /**
           * This method returns `false`.
           *
           * @static
           * @memberOf _
           * @since 4.13.0
           * @category Util
           * @returns {boolean} Returns `false`.
           * @example
           *
           * _.times(2, _.stubFalse);
           * // => [false, false]
           */
          function stubFalse() {
            return false;
          }

          module.exports = merge;

          /* WEBPACK VAR INJECTION */
        }).call(
          this,
          __webpack_require__(
            /*! ./../webpack/buildin/global.js */ '../node_modules/webpack/buildin/global.js'
          ),
          __webpack_require__(
            /*! ./../webpack/buildin/module.js */ '../node_modules/webpack/buildin/module.js'
          )(module)
        );

        /***/
      },

    /***/ '../node_modules/lodash.set/index.js':
      /*!*******************************************!*\
  !*** ../node_modules/lodash.set/index.js ***!
  \*******************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        /* WEBPACK VAR INJECTION */ (function (global) {
          /**
           * lodash (Custom Build) <https://lodash.com/>
           * Build: `lodash modularize exports="npm" -o ./`
           * Copyright jQuery Foundation and other contributors <https://jquery.org/>
           * Released under MIT license <https://lodash.com/license>
           * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
           * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
           */

          /** Used as the `TypeError` message for "Functions" methods. */
          var FUNC_ERROR_TEXT = 'Expected a function';

          /** Used to stand-in for `undefined` hash values. */
          var HASH_UNDEFINED = '__lodash_hash_undefined__';

          /** Used as references for various `Number` constants. */
          var INFINITY = 1 / 0,
            MAX_SAFE_INTEGER = 9007199254740991;

          /** `Object#toString` result references. */
          var funcTag = '[object Function]',
            genTag = '[object GeneratorFunction]',
            symbolTag = '[object Symbol]';

          /** Used to match property names within property paths. */
          var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
            reIsPlainProp = /^\w*$/,
            reLeadingDot = /^\./,
            rePropName =
              /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

          /**
           * Used to match `RegExp`
           * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
           */
          var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

          /** Used to match backslashes in property paths. */
          var reEscapeChar = /\\(\\)?/g;

          /** Used to detect host constructors (Safari). */
          var reIsHostCtor = /^\[object .+?Constructor\]$/;

          /** Used to detect unsigned integer values. */
          var reIsUint = /^(?:0|[1-9]\d*)$/;

          /** Detect free variable `global` from Node.js. */
          var freeGlobal =
            typeof global == 'object' &&
            global &&
            global.Object === Object &&
            global;

          /** Detect free variable `self`. */
          var freeSelf =
            typeof self == 'object' && self && self.Object === Object && self;

          /** Used as a reference to the global object. */
          var root = freeGlobal || freeSelf || Function('return this')();

          /**
           * Gets the value at `key` of `object`.
           *
           * @private
           * @param {Object} [object] The object to query.
           * @param {string} key The key of the property to get.
           * @returns {*} Returns the property value.
           */
          function getValue(object, key) {
            return object == null ? undefined : object[key];
          }

          /**
           * Checks if `value` is a host object in IE < 9.
           *
           * @private
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
           */
          function isHostObject(value) {
            // Many host objects are `Object` objects that can coerce to strings
            // despite having improperly defined `toString` methods.
            var result = false;
            if (value != null && typeof value.toString != 'function') {
              try {
                result = !!(value + '');
              } catch (e) {}
            }
            return result;
          }

          /** Used for built-in method references. */
          var arrayProto = Array.prototype,
            funcProto = Function.prototype,
            objectProto = Object.prototype;

          /** Used to detect overreaching core-js shims. */
          var coreJsData = root['__core-js_shared__'];

          /** Used to detect methods masquerading as native. */
          var maskSrcKey = (function () {
            var uid = /[^.]+$/.exec(
              (coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO) || ''
            );
            return uid ? 'Symbol(src)_1.' + uid : '';
          })();

          /** Used to resolve the decompiled source of functions. */
          var funcToString = funcProto.toString;

          /** Used to check objects for own properties. */
          var hasOwnProperty = objectProto.hasOwnProperty;

          /**
           * Used to resolve the
           * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
           * of values.
           */
          var objectToString = objectProto.toString;

          /** Used to detect if a method is native. */
          var reIsNative = RegExp(
            '^' +
              funcToString
                .call(hasOwnProperty)
                .replace(reRegExpChar, '\\$&')
                .replace(
                  /hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,
                  '$1.*?'
                ) +
              '$'
          );

          /** Built-in value references. */
          var Symbol = root.Symbol,
            splice = arrayProto.splice;

          /* Built-in method references that are verified to be native. */
          var Map = getNative(root, 'Map'),
            nativeCreate = getNative(Object, 'create');

          /** Used to convert symbols to primitives and strings. */
          var symbolProto = Symbol ? Symbol.prototype : undefined,
            symbolToString = symbolProto ? symbolProto.toString : undefined;

          /**
           * Creates a hash object.
           *
           * @private
           * @constructor
           * @param {Array} [entries] The key-value pairs to cache.
           */
          function Hash(entries) {
            var index = -1,
              length = entries ? entries.length : 0;

            this.clear();
            while (++index < length) {
              var entry = entries[index];
              this.set(entry[0], entry[1]);
            }
          }

          /**
           * Removes all key-value entries from the hash.
           *
           * @private
           * @name clear
           * @memberOf Hash
           */
          function hashClear() {
            this.__data__ = nativeCreate ? nativeCreate(null) : {};
          }

          /**
           * Removes `key` and its value from the hash.
           *
           * @private
           * @name delete
           * @memberOf Hash
           * @param {Object} hash The hash to modify.
           * @param {string} key The key of the value to remove.
           * @returns {boolean} Returns `true` if the entry was removed, else `false`.
           */
          function hashDelete(key) {
            return this.has(key) && delete this.__data__[key];
          }

          /**
           * Gets the hash value for `key`.
           *
           * @private
           * @name get
           * @memberOf Hash
           * @param {string} key The key of the value to get.
           * @returns {*} Returns the entry value.
           */
          function hashGet(key) {
            var data = this.__data__;
            if (nativeCreate) {
              var result = data[key];
              return result === HASH_UNDEFINED ? undefined : result;
            }
            return hasOwnProperty.call(data, key) ? data[key] : undefined;
          }

          /**
           * Checks if a hash value for `key` exists.
           *
           * @private
           * @name has
           * @memberOf Hash
           * @param {string} key The key of the entry to check.
           * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
           */
          function hashHas(key) {
            var data = this.__data__;
            return nativeCreate
              ? data[key] !== undefined
              : hasOwnProperty.call(data, key);
          }

          /**
           * Sets the hash `key` to `value`.
           *
           * @private
           * @name set
           * @memberOf Hash
           * @param {string} key The key of the value to set.
           * @param {*} value The value to set.
           * @returns {Object} Returns the hash instance.
           */
          function hashSet(key, value) {
            var data = this.__data__;
            data[key] =
              nativeCreate && value === undefined ? HASH_UNDEFINED : value;
            return this;
          }

          // Add methods to `Hash`.
          Hash.prototype.clear = hashClear;
          Hash.prototype['delete'] = hashDelete;
          Hash.prototype.get = hashGet;
          Hash.prototype.has = hashHas;
          Hash.prototype.set = hashSet;

          /**
           * Creates an list cache object.
           *
           * @private
           * @constructor
           * @param {Array} [entries] The key-value pairs to cache.
           */
          function ListCache(entries) {
            var index = -1,
              length = entries ? entries.length : 0;

            this.clear();
            while (++index < length) {
              var entry = entries[index];
              this.set(entry[0], entry[1]);
            }
          }

          /**
           * Removes all key-value entries from the list cache.
           *
           * @private
           * @name clear
           * @memberOf ListCache
           */
          function listCacheClear() {
            this.__data__ = [];
          }

          /**
           * Removes `key` and its value from the list cache.
           *
           * @private
           * @name delete
           * @memberOf ListCache
           * @param {string} key The key of the value to remove.
           * @returns {boolean} Returns `true` if the entry was removed, else `false`.
           */
          function listCacheDelete(key) {
            var data = this.__data__,
              index = assocIndexOf(data, key);

            if (index < 0) {
              return false;
            }
            var lastIndex = data.length - 1;
            if (index == lastIndex) {
              data.pop();
            } else {
              splice.call(data, index, 1);
            }
            return true;
          }

          /**
           * Gets the list cache value for `key`.
           *
           * @private
           * @name get
           * @memberOf ListCache
           * @param {string} key The key of the value to get.
           * @returns {*} Returns the entry value.
           */
          function listCacheGet(key) {
            var data = this.__data__,
              index = assocIndexOf(data, key);

            return index < 0 ? undefined : data[index][1];
          }

          /**
           * Checks if a list cache value for `key` exists.
           *
           * @private
           * @name has
           * @memberOf ListCache
           * @param {string} key The key of the entry to check.
           * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
           */
          function listCacheHas(key) {
            return assocIndexOf(this.__data__, key) > -1;
          }

          /**
           * Sets the list cache `key` to `value`.
           *
           * @private
           * @name set
           * @memberOf ListCache
           * @param {string} key The key of the value to set.
           * @param {*} value The value to set.
           * @returns {Object} Returns the list cache instance.
           */
          function listCacheSet(key, value) {
            var data = this.__data__,
              index = assocIndexOf(data, key);

            if (index < 0) {
              data.push([key, value]);
            } else {
              data[index][1] = value;
            }
            return this;
          }

          // Add methods to `ListCache`.
          ListCache.prototype.clear = listCacheClear;
          ListCache.prototype['delete'] = listCacheDelete;
          ListCache.prototype.get = listCacheGet;
          ListCache.prototype.has = listCacheHas;
          ListCache.prototype.set = listCacheSet;

          /**
           * Creates a map cache object to store key-value pairs.
           *
           * @private
           * @constructor
           * @param {Array} [entries] The key-value pairs to cache.
           */
          function MapCache(entries) {
            var index = -1,
              length = entries ? entries.length : 0;

            this.clear();
            while (++index < length) {
              var entry = entries[index];
              this.set(entry[0], entry[1]);
            }
          }

          /**
           * Removes all key-value entries from the map.
           *
           * @private
           * @name clear
           * @memberOf MapCache
           */
          function mapCacheClear() {
            this.__data__ = {
              hash: new Hash(),
              map: new (Map || ListCache)(),
              string: new Hash(),
            };
          }

          /**
           * Removes `key` and its value from the map.
           *
           * @private
           * @name delete
           * @memberOf MapCache
           * @param {string} key The key of the value to remove.
           * @returns {boolean} Returns `true` if the entry was removed, else `false`.
           */
          function mapCacheDelete(key) {
            return getMapData(this, key)['delete'](key);
          }

          /**
           * Gets the map value for `key`.
           *
           * @private
           * @name get
           * @memberOf MapCache
           * @param {string} key The key of the value to get.
           * @returns {*} Returns the entry value.
           */
          function mapCacheGet(key) {
            return getMapData(this, key).get(key);
          }

          /**
           * Checks if a map value for `key` exists.
           *
           * @private
           * @name has
           * @memberOf MapCache
           * @param {string} key The key of the entry to check.
           * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
           */
          function mapCacheHas(key) {
            return getMapData(this, key).has(key);
          }

          /**
           * Sets the map `key` to `value`.
           *
           * @private
           * @name set
           * @memberOf MapCache
           * @param {string} key The key of the value to set.
           * @param {*} value The value to set.
           * @returns {Object} Returns the map cache instance.
           */
          function mapCacheSet(key, value) {
            getMapData(this, key).set(key, value);
            return this;
          }

          // Add methods to `MapCache`.
          MapCache.prototype.clear = mapCacheClear;
          MapCache.prototype['delete'] = mapCacheDelete;
          MapCache.prototype.get = mapCacheGet;
          MapCache.prototype.has = mapCacheHas;
          MapCache.prototype.set = mapCacheSet;

          /**
           * Assigns `value` to `key` of `object` if the existing value is not equivalent
           * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
           * for equality comparisons.
           *
           * @private
           * @param {Object} object The object to modify.
           * @param {string} key The key of the property to assign.
           * @param {*} value The value to assign.
           */
          function assignValue(object, key, value) {
            var objValue = object[key];
            if (
              !(hasOwnProperty.call(object, key) && eq(objValue, value)) ||
              (value === undefined && !(key in object))
            ) {
              object[key] = value;
            }
          }

          /**
           * Gets the index at which the `key` is found in `array` of key-value pairs.
           *
           * @private
           * @param {Array} array The array to inspect.
           * @param {*} key The key to search for.
           * @returns {number} Returns the index of the matched value, else `-1`.
           */
          function assocIndexOf(array, key) {
            var length = array.length;
            while (length--) {
              if (eq(array[length][0], key)) {
                return length;
              }
            }
            return -1;
          }

          /**
           * The base implementation of `_.isNative` without bad shim checks.
           *
           * @private
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a native function,
           *  else `false`.
           */
          function baseIsNative(value) {
            if (!isObject(value) || isMasked(value)) {
              return false;
            }
            var pattern =
              isFunction(value) || isHostObject(value)
                ? reIsNative
                : reIsHostCtor;
            return pattern.test(toSource(value));
          }

          /**
           * The base implementation of `_.set`.
           *
           * @private
           * @param {Object} object The object to modify.
           * @param {Array|string} path The path of the property to set.
           * @param {*} value The value to set.
           * @param {Function} [customizer] The function to customize path creation.
           * @returns {Object} Returns `object`.
           */
          function baseSet(object, path, value, customizer) {
            if (!isObject(object)) {
              return object;
            }
            path = isKey(path, object) ? [path] : castPath(path);

            var index = -1,
              length = path.length,
              lastIndex = length - 1,
              nested = object;

            while (nested != null && ++index < length) {
              var key = toKey(path[index]),
                newValue = value;

              if (index != lastIndex) {
                var objValue = nested[key];
                newValue = customizer
                  ? customizer(objValue, key, nested)
                  : undefined;
                if (newValue === undefined) {
                  newValue = isObject(objValue)
                    ? objValue
                    : isIndex(path[index + 1])
                    ? []
                    : {};
                }
              }
              assignValue(nested, key, newValue);
              nested = nested[key];
            }
            return object;
          }

          /**
           * The base implementation of `_.toString` which doesn't convert nullish
           * values to empty strings.
           *
           * @private
           * @param {*} value The value to process.
           * @returns {string} Returns the string.
           */
          function baseToString(value) {
            // Exit early for strings to avoid a performance hit in some environments.
            if (typeof value == 'string') {
              return value;
            }
            if (isSymbol(value)) {
              return symbolToString ? symbolToString.call(value) : '';
            }
            var result = value + '';
            return result == '0' && 1 / value == -INFINITY ? '-0' : result;
          }

          /**
           * Casts `value` to a path array if it's not one.
           *
           * @private
           * @param {*} value The value to inspect.
           * @returns {Array} Returns the cast property path array.
           */
          function castPath(value) {
            return isArray(value) ? value : stringToPath(value);
          }

          /**
           * Gets the data for `map`.
           *
           * @private
           * @param {Object} map The map to query.
           * @param {string} key The reference key.
           * @returns {*} Returns the map data.
           */
          function getMapData(map, key) {
            var data = map.__data__;
            return isKeyable(key)
              ? data[typeof key == 'string' ? 'string' : 'hash']
              : data.map;
          }

          /**
           * Gets the native function at `key` of `object`.
           *
           * @private
           * @param {Object} object The object to query.
           * @param {string} key The key of the method to get.
           * @returns {*} Returns the function if it's native, else `undefined`.
           */
          function getNative(object, key) {
            var value = getValue(object, key);
            return baseIsNative(value) ? value : undefined;
          }

          /**
           * Checks if `value` is a valid array-like index.
           *
           * @private
           * @param {*} value The value to check.
           * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
           * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
           */
          function isIndex(value, length) {
            length = length == null ? MAX_SAFE_INTEGER : length;
            return (
              !!length &&
              (typeof value == 'number' || reIsUint.test(value)) &&
              value > -1 &&
              value % 1 == 0 &&
              value < length
            );
          }

          /**
           * Checks if `value` is a property name and not a property path.
           *
           * @private
           * @param {*} value The value to check.
           * @param {Object} [object] The object to query keys on.
           * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
           */
          function isKey(value, object) {
            if (isArray(value)) {
              return false;
            }
            var type = typeof value;
            if (
              type == 'number' ||
              type == 'symbol' ||
              type == 'boolean' ||
              value == null ||
              isSymbol(value)
            ) {
              return true;
            }
            return (
              reIsPlainProp.test(value) ||
              !reIsDeepProp.test(value) ||
              (object != null && value in Object(object))
            );
          }

          /**
           * Checks if `value` is suitable for use as unique object key.
           *
           * @private
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
           */
          function isKeyable(value) {
            var type = typeof value;
            return type == 'string' ||
              type == 'number' ||
              type == 'symbol' ||
              type == 'boolean'
              ? value !== '__proto__'
              : value === null;
          }

          /**
           * Checks if `func` has its source masked.
           *
           * @private
           * @param {Function} func The function to check.
           * @returns {boolean} Returns `true` if `func` is masked, else `false`.
           */
          function isMasked(func) {
            return !!maskSrcKey && maskSrcKey in func;
          }

          /**
           * Converts `string` to a property path array.
           *
           * @private
           * @param {string} string The string to convert.
           * @returns {Array} Returns the property path array.
           */
          var stringToPath = memoize(function (string) {
            string = toString(string);

            var result = [];
            if (reLeadingDot.test(string)) {
              result.push('');
            }
            string.replace(rePropName, function (match, number, quote, string) {
              result.push(
                quote ? string.replace(reEscapeChar, '$1') : number || match
              );
            });
            return result;
          });

          /**
           * Converts `value` to a string key if it's not a string or symbol.
           *
           * @private
           * @param {*} value The value to inspect.
           * @returns {string|symbol} Returns the key.
           */
          function toKey(value) {
            if (typeof value == 'string' || isSymbol(value)) {
              return value;
            }
            var result = value + '';
            return result == '0' && 1 / value == -INFINITY ? '-0' : result;
          }

          /**
           * Converts `func` to its source code.
           *
           * @private
           * @param {Function} func The function to process.
           * @returns {string} Returns the source code.
           */
          function toSource(func) {
            if (func != null) {
              try {
                return funcToString.call(func);
              } catch (e) {}
              try {
                return func + '';
              } catch (e) {}
            }
            return '';
          }

          /**
           * Creates a function that memoizes the result of `func`. If `resolver` is
           * provided, it determines the cache key for storing the result based on the
           * arguments provided to the memoized function. By default, the first argument
           * provided to the memoized function is used as the map cache key. The `func`
           * is invoked with the `this` binding of the memoized function.
           *
           * **Note:** The cache is exposed as the `cache` property on the memoized
           * function. Its creation may be customized by replacing the `_.memoize.Cache`
           * constructor with one whose instances implement the
           * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
           * method interface of `delete`, `get`, `has`, and `set`.
           *
           * @static
           * @memberOf _
           * @since 0.1.0
           * @category Function
           * @param {Function} func The function to have its output memoized.
           * @param {Function} [resolver] The function to resolve the cache key.
           * @returns {Function} Returns the new memoized function.
           * @example
           *
           * var object = { 'a': 1, 'b': 2 };
           * var other = { 'c': 3, 'd': 4 };
           *
           * var values = _.memoize(_.values);
           * values(object);
           * // => [1, 2]
           *
           * values(other);
           * // => [3, 4]
           *
           * object.a = 2;
           * values(object);
           * // => [1, 2]
           *
           * // Modify the result cache.
           * values.cache.set(object, ['a', 'b']);
           * values(object);
           * // => ['a', 'b']
           *
           * // Replace `_.memoize.Cache`.
           * _.memoize.Cache = WeakMap;
           */
          function memoize(func, resolver) {
            if (
              typeof func != 'function' ||
              (resolver && typeof resolver != 'function')
            ) {
              throw new TypeError(FUNC_ERROR_TEXT);
            }
            var memoized = function () {
              var args = arguments,
                key = resolver ? resolver.apply(this, args) : args[0],
                cache = memoized.cache;

              if (cache.has(key)) {
                return cache.get(key);
              }
              var result = func.apply(this, args);
              memoized.cache = cache.set(key, result);
              return result;
            };
            memoized.cache = new (memoize.Cache || MapCache)();
            return memoized;
          }

          // Assign cache to `_.memoize`.
          memoize.Cache = MapCache;

          /**
           * Performs a
           * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
           * comparison between two values to determine if they are equivalent.
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to compare.
           * @param {*} other The other value to compare.
           * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
           * @example
           *
           * var object = { 'a': 1 };
           * var other = { 'a': 1 };
           *
           * _.eq(object, object);
           * // => true
           *
           * _.eq(object, other);
           * // => false
           *
           * _.eq('a', 'a');
           * // => true
           *
           * _.eq('a', Object('a'));
           * // => false
           *
           * _.eq(NaN, NaN);
           * // => true
           */
          function eq(value, other) {
            return value === other || (value !== value && other !== other);
          }

          /**
           * Checks if `value` is classified as an `Array` object.
           *
           * @static
           * @memberOf _
           * @since 0.1.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is an array, else `false`.
           * @example
           *
           * _.isArray([1, 2, 3]);
           * // => true
           *
           * _.isArray(document.body.children);
           * // => false
           *
           * _.isArray('abc');
           * // => false
           *
           * _.isArray(_.noop);
           * // => false
           */
          var isArray = Array.isArray;

          /**
           * Checks if `value` is classified as a `Function` object.
           *
           * @static
           * @memberOf _
           * @since 0.1.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a function, else `false`.
           * @example
           *
           * _.isFunction(_);
           * // => true
           *
           * _.isFunction(/abc/);
           * // => false
           */
          function isFunction(value) {
            // The use of `Object#toString` avoids issues with the `typeof` operator
            // in Safari 8-9 which returns 'object' for typed array and other constructors.
            var tag = isObject(value) ? objectToString.call(value) : '';
            return tag == funcTag || tag == genTag;
          }

          /**
           * Checks if `value` is the
           * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
           * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
           *
           * @static
           * @memberOf _
           * @since 0.1.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is an object, else `false`.
           * @example
           *
           * _.isObject({});
           * // => true
           *
           * _.isObject([1, 2, 3]);
           * // => true
           *
           * _.isObject(_.noop);
           * // => true
           *
           * _.isObject(null);
           * // => false
           */
          function isObject(value) {
            var type = typeof value;
            return !!value && (type == 'object' || type == 'function');
          }

          /**
           * Checks if `value` is object-like. A value is object-like if it's not `null`
           * and has a `typeof` result of "object".
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
           * @example
           *
           * _.isObjectLike({});
           * // => true
           *
           * _.isObjectLike([1, 2, 3]);
           * // => true
           *
           * _.isObjectLike(_.noop);
           * // => false
           *
           * _.isObjectLike(null);
           * // => false
           */
          function isObjectLike(value) {
            return !!value && typeof value == 'object';
          }

          /**
           * Checks if `value` is classified as a `Symbol` primitive or object.
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to check.
           * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
           * @example
           *
           * _.isSymbol(Symbol.iterator);
           * // => true
           *
           * _.isSymbol('abc');
           * // => false
           */
          function isSymbol(value) {
            return (
              typeof value == 'symbol' ||
              (isObjectLike(value) && objectToString.call(value) == symbolTag)
            );
          }

          /**
           * Converts `value` to a string. An empty string is returned for `null`
           * and `undefined` values. The sign of `-0` is preserved.
           *
           * @static
           * @memberOf _
           * @since 4.0.0
           * @category Lang
           * @param {*} value The value to process.
           * @returns {string} Returns the string.
           * @example
           *
           * _.toString(null);
           * // => ''
           *
           * _.toString(-0);
           * // => '-0'
           *
           * _.toString([1, 2, 3]);
           * // => '1,2,3'
           */
          function toString(value) {
            return value == null ? '' : baseToString(value);
          }

          /**
           * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,
           * it's created. Arrays are created for missing index properties while objects
           * are created for all other missing properties. Use `_.setWith` to customize
           * `path` creation.
           *
           * **Note:** This method mutates `object`.
           *
           * @static
           * @memberOf _
           * @since 3.7.0
           * @category Object
           * @param {Object} object The object to modify.
           * @param {Array|string} path The path of the property to set.
           * @param {*} value The value to set.
           * @returns {Object} Returns `object`.
           * @example
           *
           * var object = { 'a': [{ 'b': { 'c': 3 } }] };
           *
           * _.set(object, 'a[0].b.c', 4);
           * console.log(object.a[0].b.c);
           * // => 4
           *
           * _.set(object, ['x', '0', 'y', 'z'], 5);
           * console.log(object.x[0].y.z);
           * // => 5
           */
          function set(object, path, value) {
            return object == null ? object : baseSet(object, path, value);
          }

          module.exports = set;

          /* WEBPACK VAR INJECTION */
        }).call(
          this,
          __webpack_require__(
            /*! ./../webpack/buildin/global.js */ '../node_modules/webpack/buildin/global.js'
          )
        );

        /***/
      },

    /***/ '../node_modules/tslib/tslib.es6.js':
      /*!******************************************!*\
  !*** ../node_modules/tslib/tslib.es6.js ***!
  \******************************************/
      /*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault, __classPrivateFieldGet, __classPrivateFieldSet */
      /***/ function (module, __webpack_exports__, __webpack_require__) {
        'use strict';
        __webpack_require__.r(__webpack_exports__);
        /* WEBPACK VAR INJECTION */ (function (
          __webpack_provided_Object_dot_assign
        ) {
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__extends',
            function () {
              return __extends;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__assign',
            function () {
              return __assign;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__rest',
            function () {
              return __rest;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__decorate',
            function () {
              return __decorate;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__param',
            function () {
              return __param;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__metadata',
            function () {
              return __metadata;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__awaiter',
            function () {
              return __awaiter;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__generator',
            function () {
              return __generator;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__exportStar',
            function () {
              return __exportStar;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__values',
            function () {
              return __values;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__read',
            function () {
              return __read;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__spread',
            function () {
              return __spread;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__spreadArrays',
            function () {
              return __spreadArrays;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__await',
            function () {
              return __await;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__asyncGenerator',
            function () {
              return __asyncGenerator;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__asyncDelegator',
            function () {
              return __asyncDelegator;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__asyncValues',
            function () {
              return __asyncValues;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__makeTemplateObject',
            function () {
              return __makeTemplateObject;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__importStar',
            function () {
              return __importStar;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__importDefault',
            function () {
              return __importDefault;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__classPrivateFieldGet',
            function () {
              return __classPrivateFieldGet;
            }
          );
          /* harmony export (binding) */ __webpack_require__.d(
            __webpack_exports__,
            '__classPrivateFieldSet',
            function () {
              return __classPrivateFieldSet;
            }
          );
          /*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
          /* global Reflect, Promise */

          var extendStatics = function (d, b) {
            extendStatics =
              Object.setPrototypeOf ||
              ({ __proto__: [] } instanceof Array &&
                function (d, b) {
                  d.__proto__ = b;
                }) ||
              function (d, b) {
                for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
              };
            return extendStatics(d, b);
          };

          function __extends(d, b) {
            extendStatics(d, b);
            function __() {
              this.constructor = d;
            }
            d.prototype =
              b === null
                ? Object.create(b)
                : ((__.prototype = b.prototype), new __());
          }

          var __assign = function () {
            __assign =
              __webpack_provided_Object_dot_assign ||
              function __assign(t) {
                for (var s, i = 1, n = arguments.length; i < n; i++) {
                  s = arguments[i];
                  for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
                }
                return t;
              };
            return __assign.apply(this, arguments);
          };

          function __rest(s, e) {
            var t = {};
            for (var p in s)
              if (
                Object.prototype.hasOwnProperty.call(s, p) &&
                e.indexOf(p) < 0
              )
                t[p] = s[p];
            if (s != null && typeof Object.getOwnPropertySymbols === 'function')
              for (
                var i = 0, p = Object.getOwnPropertySymbols(s);
                i < p.length;
                i++
              ) {
                if (
                  e.indexOf(p[i]) < 0 &&
                  Object.prototype.propertyIsEnumerable.call(s, p[i])
                )
                  t[p[i]] = s[p[i]];
              }
            return t;
          }

          function __decorate(decorators, target, key, desc) {
            var c = arguments.length,
              r =
                c < 3
                  ? target
                  : desc === null
                  ? (desc = Object.getOwnPropertyDescriptor(target, key))
                  : desc,
              d;
            if (
              typeof Reflect === 'object' &&
              typeof Reflect.decorate === 'function'
            )
              r = Reflect.decorate(decorators, target, key, desc);
            else
              for (var i = decorators.length - 1; i >= 0; i--)
                if ((d = decorators[i]))
                  r =
                    (c < 3
                      ? d(r)
                      : c > 3
                      ? d(target, key, r)
                      : d(target, key)) || r;
            return c > 3 && r && Object.defineProperty(target, key, r), r;
          }

          function __param(paramIndex, decorator) {
            return function (target, key) {
              decorator(target, key, paramIndex);
            };
          }

          function __metadata(metadataKey, metadataValue) {
            if (
              typeof Reflect === 'object' &&
              typeof Reflect.metadata === 'function'
            )
              return Reflect.metadata(metadataKey, metadataValue);
          }

          function __awaiter(thisArg, _arguments, P, generator) {
            function adopt(value) {
              return value instanceof P
                ? value
                : new P(function (resolve) {
                    resolve(value);
                  });
            }
            return new (P || (P = gigya.Promise))(function (resolve, reject) {
              function fulfilled(value) {
                try {
                  step(generator.next(value));
                } catch (e) {
                  reject(e);
                }
              }
              function rejected(value) {
                try {
                  step(generator['throw'](value));
                } catch (e) {
                  reject(e);
                }
              }
              function step(result) {
                result.done
                  ? resolve(result.value)
                  : adopt(result.value).then(fulfilled, rejected);
              }
              step(
                (generator = generator.apply(thisArg, _arguments || [])).next()
              );
            });
          }

          function __generator(thisArg, body) {
            var _ = {
                label: 0,
                sent: function () {
                  if (t[0] & 1) throw t[1];
                  return t[1];
                },
                trys: [],
                ops: [],
              },
              f,
              y,
              t,
              g;
            return (
              (g = { next: verb(0), throw: verb(1), return: verb(2) }),
              typeof Symbol === 'function' &&
                (g[Symbol.iterator] = function () {
                  return this;
                }),
              g
            );
            function verb(n) {
              return function (v) {
                return step([n, v]);
              };
            }
            function step(op) {
              if (f) throw new TypeError('Generator is already executing.');
              while (_)
                try {
                  if (
                    ((f = 1),
                    y &&
                      (t =
                        op[0] & 2
                          ? y['return']
                          : op[0]
                          ? y['throw'] || ((t = y['return']) && t.call(y), 0)
                          : y.next) &&
                      !(t = t.call(y, op[1])).done)
                  )
                    return t;
                  if (((y = 0), t)) op = [op[0] & 2, t.value];
                  switch (op[0]) {
                    case 0:
                    case 1:
                      t = op;
                      break;
                    case 4:
                      _.label++;
                      return { value: op[1], done: false };
                    case 5:
                      _.label++;
                      y = op[1];
                      op = [0];
                      continue;
                    case 7:
                      op = _.ops.pop();
                      _.trys.pop();
                      continue;
                    default:
                      if (
                        !((t = _.trys),
                        (t = t.length > 0 && t[t.length - 1])) &&
                        (op[0] === 6 || op[0] === 2)
                      ) {
                        _ = 0;
                        continue;
                      }
                      if (
                        op[0] === 3 &&
                        (!t || (op[1] > t[0] && op[1] < t[3]))
                      ) {
                        _.label = op[1];
                        break;
                      }
                      if (op[0] === 6 && _.label < t[1]) {
                        _.label = t[1];
                        t = op;
                        break;
                      }
                      if (t && _.label < t[2]) {
                        _.label = t[2];
                        _.ops.push(op);
                        break;
                      }
                      if (t[2]) _.ops.pop();
                      _.trys.pop();
                      continue;
                  }
                  op = body.call(thisArg, _);
                } catch (e) {
                  op = [6, e];
                  y = 0;
                } finally {
                  f = t = 0;
                }
              if (op[0] & 5) throw op[1];
              return { value: op[0] ? op[1] : void 0, done: true };
            }
          }

          function __exportStar(m, exports) {
            for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
          }

          function __values(o) {
            var s = typeof Symbol === 'function' && Symbol.iterator,
              m = s && o[s],
              i = 0;
            if (m) return m.call(o);
            if (o && typeof o.length === 'number')
              return {
                next: function () {
                  if (o && i >= o.length) o = void 0;
                  return { value: o && o[i++], done: !o };
                },
              };
            throw new TypeError(
              s ? 'Object is not iterable.' : 'Symbol.iterator is not defined.'
            );
          }

          function __read(o, n) {
            var m = typeof Symbol === 'function' && o[Symbol.iterator];
            if (!m) return o;
            var i = m.call(o),
              r,
              ar = [],
              e;
            try {
              while ((n === void 0 || n-- > 0) && !(r = i.next()).done)
                ar.push(r.value);
            } catch (error) {
              e = { error: error };
            } finally {
              try {
                if (r && !r.done && (m = i['return'])) m.call(i);
              } finally {
                if (e) throw e.error;
              }
            }
            return ar;
          }

          function __spread() {
            for (var ar = [], i = 0; i < arguments.length; i++)
              ar = ar.concat(__read(arguments[i]));
            return ar;
          }

          function __spreadArrays() {
            for (var s = 0, i = 0, il = arguments.length; i < il; i++)
              s += arguments[i].length;
            for (var r = Array(s), k = 0, i = 0; i < il; i++)
              for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
                r[k] = a[j];
            return r;
          }

          function __await(v) {
            return this instanceof __await
              ? ((this.v = v), this)
              : new __await(v);
          }

          function __asyncGenerator(thisArg, _arguments, generator) {
            if (!Symbol.asyncIterator)
              throw new TypeError('Symbol.asyncIterator is not defined.');
            var g = generator.apply(thisArg, _arguments || []),
              i,
              q = [];
            return (
              (i = {}),
              verb('next'),
              verb('throw'),
              verb('return'),
              (i[Symbol.asyncIterator] = function () {
                return this;
              }),
              i
            );
            function verb(n) {
              if (g[n])
                i[n] = function (v) {
                  return new gigya.Promise(function (a, b) {
                    q.push([n, v, a, b]) > 1 || resume(n, v);
                  });
                };
            }
            function resume(n, v) {
              try {
                step(g[n](v));
              } catch (e) {
                settle(q[0][3], e);
              }
            }
            function step(r) {
              r.value instanceof __await
                ? gigya.Promise.resolve(r.value.v).then(fulfill, reject)
                : settle(q[0][2], r);
            }
            function fulfill(value) {
              resume('next', value);
            }
            function reject(value) {
              resume('throw', value);
            }
            function settle(f, v) {
              if ((f(v), q.shift(), q.length)) resume(q[0][0], q[0][1]);
            }
          }

          function __asyncDelegator(o) {
            var i, p;
            return (
              (i = {}),
              verb('next'),
              verb('throw', function (e) {
                throw e;
              }),
              verb('return'),
              (i[Symbol.iterator] = function () {
                return this;
              }),
              i
            );
            function verb(n, f) {
              i[n] = o[n]
                ? function (v) {
                    return (p = !p)
                      ? { value: __await(o[n](v)), done: n === 'return' }
                      : f
                      ? f(v)
                      : v;
                  }
                : f;
            }
          }

          function __asyncValues(o) {
            if (!Symbol.asyncIterator)
              throw new TypeError('Symbol.asyncIterator is not defined.');
            var m = o[Symbol.asyncIterator],
              i;
            return m
              ? m.call(o)
              : ((o =
                  typeof __values === 'function'
                    ? __values(o)
                    : o[Symbol.iterator]()),
                (i = {}),
                verb('next'),
                verb('throw'),
                verb('return'),
                (i[Symbol.asyncIterator] = function () {
                  return this;
                }),
                i);
            function verb(n) {
              i[n] =
                o[n] &&
                function (v) {
                  return new gigya.Promise(function (resolve, reject) {
                    (v = o[n](v)), settle(resolve, reject, v.done, v.value);
                  });
                };
            }
            function settle(resolve, reject, d, v) {
              gigya.Promise.resolve(v).then(function (v) {
                resolve({ value: v, done: d });
              }, reject);
            }
          }

          function __makeTemplateObject(cooked, raw) {
            if (Object.defineProperty) {
              Object.defineProperty(cooked, 'raw', { value: raw });
            } else {
              cooked.raw = raw;
            }
            return cooked;
          }

          function __importStar(mod) {
            if (mod && mod.__esModule) return mod;
            var result = {};
            if (mod != null)
              for (var k in mod)
                if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
            result.default = mod;
            return result;
          }

          function __importDefault(mod) {
            return mod && mod.__esModule ? mod : { default: mod };
          }

          function __classPrivateFieldGet(receiver, privateMap) {
            if (!privateMap.has(receiver)) {
              throw new TypeError(
                'attempted to get private field on non-instance'
              );
            }
            return privateMap.get(receiver);
          }

          function __classPrivateFieldSet(receiver, privateMap, value) {
            if (!privateMap.has(receiver)) {
              throw new TypeError(
                'attempted to set private field on non-instance'
              );
            }
            privateMap.set(receiver, value);
            return value;
          }

          /* WEBPACK VAR INJECTION */
        }).call(
          this,
          __webpack_require__(
            /*! tslib */ '../node_modules/tslib/tslib.es6.js'
          )['__assign']
        );

        /***/
      },

    /***/ '../node_modules/webpack/buildin/global.js':
      /*!*************************************************!*\
  !*** ../node_modules/webpack/buildin/global.js ***!
  \*************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        var g;

        // This works in non-strict mode
        g = (function () {
          return this;
        })();

        try {
          // This works if eval is allowed (see CSP)
          g = g || new Function('return this')();
        } catch (e) {
          // This works if the window reference is available
          if (typeof window === 'object') g = window;
        }

        // g can still be undefined, but nothing to do about it...
        // We return undefined, instead of nothing here, so it's
        // easier to handle this case. if(!global) { ...}

        module.exports = g;

        /***/
      },

    /***/ '../node_modules/webpack/buildin/module.js':
      /*!*************************************************!*\
  !*** ../node_modules/webpack/buildin/module.js ***!
  \*************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        module.exports = function (module) {
          if (!module.webpackPolyfill) {
            module.deprecate = function () {};
            module.paths = [];
            // module.parent = undefined by default
            if (!module.children) module.children = [];
            Object.defineProperty(module, 'loaded', {
              enumerable: true,
              get: function () {
                return module.l;
              },
            });
            Object.defineProperty(module, 'id', {
              enumerable: true,
              get: function () {
                return module.i;
              },
            });
            module.webpackPolyfill = 1;
          }
          return module;
        };

        /***/
      },

    /***/ './src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts':
      /*!*******************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts ***!
  \*******************************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var utils_1 = __webpack_require__(
          /*! src/accounts/Gigya.JS.Plugin.screenSet2/app/utils */ './src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts'
        );
        var ConflictHandling;
        (function (ConflictHandling) {
          ConflictHandling[(ConflictHandling['fail'] = 0)] = 'fail';
          ConflictHandling[(ConflictHandling['saveProfileAndFail'] = 1)] =
            'saveProfileAndFail';
        })(
          (ConflictHandling =
            exports.ConflictHandling || (exports.ConflictHandling = {}))
        );
        exports.LoginModes = {
          connect: {
            name: 'connect',
          },
          standard: {
            name: 'standard',
            getLoginProviders: function (apiData, params, regToken) {
              var enabledProviders = params['enabledProviders'];
              if (typeof enabledProviders !== 'string') return null;
              return enabledProviders.toLowerCase();
            },
            filterParams: function (params) {
              delete params.regToken;
              delete params.instanceID;
              delete params.getInstance;
              return params;
            },
          },
          reAuth: {
            name: 'reAuth',
            getLoginProviders: function (apiData, params, regToken) {
              var currentProviders =
                apiData.getAccountInfo &&
                apiData.getAccountInfo.socialProviders;
              var identities =
                apiData.getAccountInfo && apiData.getAccountInfo.identities;
              if (!currentProviders) return null;
              currentProviders = currentProviders.toLowerCase();
              var providers = currentProviders.split(',');
              if (identities) {
                // remove identities that are allowLogin false
                utils_1.ForEach(identities, function (identity) {
                  if (!identity.allowsLogin) {
                    var idx = providers.indexOf(
                      identity.provider.toLowerCase()
                    );
                    if (idx > -1) providers.splice(idx, 1);
                  }
                });
              }
              return providers.join(',');
            },
            filterParams: function (params) {
              delete params.instanceID;
              delete params.getInstance;
              return params;
            },
          },
          link: {
            name: 'link',
            getLoginProviders: function (apiData, params, regToken) {
              var _a, _b, _c, _d;
              if (!regToken) return null;
              return (_d =
                (_c =
                  (_b =
                    (_a =
                      apiData === null || apiData === void 0
                        ? void 0
                        : apiData.getConflictingAccount) === null ||
                    _a === void 0
                      ? void 0
                      : _a.conflictingAccount) === null || _b === void 0
                    ? void 0
                    : _b.loginProviders) === null || _c === void 0
                  ? void 0
                  : _c.join(',')) === null || _d === void 0
                ? void 0
                : _d.toLowerCase();
            },
            filterParams: function (params) {
              delete params.instanceID;
              delete params.getInstance;
              return params;
            },
          },
        };
        utils_1.DeepFreeze(exports.LoginModes);

        /***/
      },

    /***/ './src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts':
      /*!*********************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts ***!
  \*********************************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        exports.Screen_CONSTS = {
          gigyaClass: 'gigya-screen',
          conditionalAttributePrefix: 'gigya-conditional',
          expressionAttributePrefix: 'gigya-expression',
          cssClass: 'data-css-class',
          dataVariantPercentage: 'data-variant-percentage',
          dataVariantGroup: 'data-variant-group',
          dataVariantOriginalScreen: 'data-variant-original-screen',
          dataVariantTestId: 'data-variant-test-id',
        };

        /***/
      },

    /***/ './src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts':
      /*!**************************************************************!*\
  !*** ./src/accounts/Gigya.JS.Plugin.screenSet2/app/utils.ts ***!
  \**************************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var ScreenConsts_1 = __webpack_require__(
          /*! src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts */ './src/accounts/Gigya.JS.Plugin.screenSet2/app/ScreenConsts.ts'
        );
        function isHidden(el) {
          while (el && el.parentElement) {
            if (
              el.style.visibility === 'hidden' || // hidden element
              el.style.display === 'none' || // hidden element
              (window.gigya.utils.DOM.isElementClass(
                el,
                'gigya-error-display'
              ) &&
                !window.gigya.utils.DOM.isElementClass(
                  el,
                  'gigya-error-display-active'
                )) || // hidden error message
              window.gigya.utils.DOM.isElementClass(el, 'ng-hide')
            ) {
              // angular hidden element
              return true;
            } else {
              el = el.parentElement;
            }
          }
          return false;
        }
        exports.isHidden = isHidden;
        function inIFrame() {
          try {
            return window.self !== window.top;
          } catch (e) {
            return true;
          }
        }
        exports.inIFrame = inIFrame;
        function isFieldInHiddenContainer(el) {
          var curr = el;
          while (curr) {
            if (
              window.gigya.utils.DOM.isElementClass(curr, 'gigya-container') &&
              !window.gigya.utils.DOM.isElementClass(
                curr,
                'gigya-container-enabled'
              )
            )
              return true;
            curr = curr.parentElement;
          }
          return false;
        }
        exports.isFieldInHiddenContainer = isFieldInHiddenContainer;
        function hasParentAttribute(el, attrName, attrValue) {
          var curr = el;
          while (curr) {
            if (curr.getAttribute(attrName) === attrValue) {
              return true;
            }
            curr = curr.parentElement;
          }
          return false;
        }
        exports.hasParentAttribute = hasParentAttribute;
        function firstPart(str, seperator) {
          var index = str.indexOf(seperator);
          return index > -1 ? str.substring(0, index) : str;
        }
        exports.firstPart = firstPart;
        function LastIndexOf(arr, val, fromIndex) {
          if (fromIndex === void 0) {
            fromIndex = 0;
          }
          for (var i = arr.length; --i >= fromIndex; ) {
            if (arr[i] === val) return i;
          }
          return -1;
        }
        exports.LastIndexOf = LastIndexOf;
        function ForEach(arr, action) {
          for (var i = 0; i < arr.length; ++i) {
            action(arr[i], i, arr);
          }
        }
        exports.ForEach = ForEach;
        function ForEachProp(obj, action) {
          for (var name in obj) {
            if (obj.hasOwnProperty(name)) action(obj[name], name, obj);
          }
        }
        exports.ForEachProp = ForEachProp;
        function Some(arr, condition) {
          for (var i = 0; i < arr.length; ++i) {
            if (condition(arr[i], i, arr)) return true;
          }
          return false;
        }
        exports.Some = Some;
        function Every(arr, condition) {
          for (var i = 0; i < arr.length; ++i) {
            if (!condition(arr[i], i, arr)) return false;
          }
          return true;
        }
        exports.Every = Every;
        function EveryProp(obj, condition) {
          for (var name in obj) {
            if (obj.hasOwnProperty(name) && !condition(obj[name], name, obj))
              return false;
          }
          return true;
        }
        exports.EveryProp = EveryProp;
        function Map(arr, action) {
          var result = new Array();
          ForEach(arr, function (item, idx, arr) {
            return result.push(action(item, idx, arr));
          });
          return result;
        }
        exports.Map = Map;
        function DeepFreeze(obj) {
          // Only once IE9 is the minimum - currently IE7 is supported
          /*
        if (obj instanceof Object && !Object.isFrozen(obj[key])) {
            ForEachProp(obj, (prop) => DeepFreeze(prop));

            Object.freeze(obj);
        }
        */
        }
        exports.DeepFreeze = DeepFreeze;
        function getElementsByHavingAttribute(
          parentElement,
          tagName,
          attributeName
        ) {
          var arEls = new Array();
          var els = parentElement.getElementsByTagName(tagName);
          ForEach(els, function (el) {
            if (el.getAttribute(attributeName)) {
              arEls.push(el);
            }
          });
          return arEls;
        }
        exports.getElementsByHavingAttribute = getElementsByHavingAttribute;
        function getElementsByHavingAttributePrefix(
          parentElement,
          attributePrefixes,
          tagNamesExceptions
        ) {
          if (tagNamesExceptions === void 0) {
            tagNamesExceptions = [];
          }
          if (typeof attributePrefixes === 'string') {
            attributePrefixes = [attributePrefixes];
          }
          var elements = parentElement.getElementsByTagName('*');
          var matchingElements = new Array();
          for (var i = 0; i <= elements.length - 1; i++) {
            var el = elements.item(i);
            if (
              window.gigya.utils.array.indexOf(
                tagNamesExceptions,
                el.tagName.toLowerCase()
              ) !== -1
            ) {
              continue;
            }
            for (
              var _i = 0, attributePrefixes_1 = attributePrefixes;
              _i < attributePrefixes_1.length;
              _i++
            ) {
              var attributePrefix = attributePrefixes_1[_i];
              if (
                isElementContainAttributePrefix(elements[i], attributePrefix)
              ) {
                matchingElements.push(elements[i]);
                continue;
              }
            }
          }
          return matchingElements;
        }
        exports.getElementsByHavingAttributePrefix =
          getElementsByHavingAttributePrefix;
        function isElementContainAttributePrefix(el, subString) {
          var elementAttributes = el.attributes;
          var containConditionalAttribute = false;
          if (elementAttributes) {
            for (var i = 0; i < elementAttributes.length; i++) {
              if (elementAttributes[i].nodeName.indexOf(subString) !== -1) {
                containConditionalAttribute = true;
                break;
              }
            }
          }
          return containConditionalAttribute;
        }
        exports.isElementContainAttributePrefix =
          isElementContainAttributePrefix;
        function getConditionalAttributeExpressions(element, isWidgetContext) {
          if (isWidgetContext === void 0) {
            isWidgetContext = false;
          }
          if (!element) {
            return [];
          }
          var conditionalExpressions = new Array();
          var conditionalDefaultValue;
          var lastAttributeValue;
          var isParamTag = false;
          var attributes = getAttributesAsArray(element);
          ForEach(attributes, function (at) {
            try {
              // Check for conditional attribute prefix which determines if this attribute be evaluated.
              var isConditionalAttribute =
                at.nodeName.indexOf(
                  ScreenConsts_1.Screen_CONSTS.conditionalAttributePrefix
                ) !== -1;
              var isExpressionAttribute =
                at.nodeName.indexOf(
                  ScreenConsts_1.Screen_CONSTS.expressionAttributePrefix
                ) !== -1;
              if (isConditionalAttribute || isExpressionAttribute) {
                var colonIndex = at.nodeName.indexOf(':');
                if (colonIndex !== -1) {
                  var targetAttribute = void 0;
                  if (isWidgetContext) {
                    conditionalDefaultValue =
                      window.gigya._.plugins.utils.DOM.getAttribute(
                        element,
                        'value'
                      );
                    targetAttribute =
                      window.gigya._.plugins.utils.DOM.getAttribute(
                        element,
                        'name'
                      );
                    isParamTag = element.tagName.toLowerCase() === 'param';
                  } else {
                    targetAttribute = at.nodeName.substring(
                      colonIndex + 1,
                      at.nodeName.length
                    );
                    lastAttributeValue =
                      window.gigya._.plugins.utils.DOM.getAttribute(
                        element,
                        targetAttribute
                      );
                    var defaultValueAttribute =
                      'gigya-default-' + targetAttribute;
                    if (
                      !window.gigya._.plugins.utils.DOM.getAttribute(
                        element,
                        defaultValueAttribute
                      )
                    ) {
                      window.gigya._.plugins.utils.DOM.setAttribute(
                        element,
                        defaultValueAttribute,
                        lastAttributeValue !== null
                          ? lastAttributeValue
                          : 'null'
                      );
                    }
                    var val = window.gigya._.plugins.utils.DOM.getAttribute(
                      element,
                      defaultValueAttribute
                    );
                    conditionalDefaultValue = val !== 'null' ? val : null;
                  }
                  // Conditionals are always ternary with special escaping and parsing done.
                  // In: expression ? value : otherValue
                  // Out: expression ? 'value' : 'otherValue'
                  //
                  // Expressions are parsed as-is and the returned value is set.
                  var conditionalExpression = !isExpressionAttribute
                    ? setupConditionalExpressionValue(
                        at.nodeValue,
                        conditionalDefaultValue
                      )
                    : at.nodeValue;
                  var conditional = {
                    attributeName: targetAttribute,
                    condition: conditionalExpression,
                    defaultValue: conditionalDefaultValue,
                    lastAttributeValue: lastAttributeValue,
                    isWidgetParamTag: isParamTag,
                  };
                  conditionalExpressions.push(conditional);
                }
              }
            } catch (e) {
              throw new Error('Conditional format error: ' + e);
            }
          });
          return conditionalExpressions;
        }
        exports.getConditionalAttributeExpressions =
          getConditionalAttributeExpressions;
        function setupConditionalExpressionValue(
          conditionalValue,
          defaultValue
        ) {
          var expressionWithFalseValue = setupConditionalFalseValue(
            conditionalValue,
            defaultValue
          );
          var expressionWithEscaping = escapeCharactersInConditionalValue(
            expressionWithFalseValue
          );
          var finalConditionalExpression = setUpLastFalseValue(
            expressionWithEscaping
          );
          if (!defaultValue) {
            // fix default value to be a falsy value instead of a string literal
            var defaultValueLocation = finalConditionalExpression.lastIndexOf(
              ":'" + defaultValue + "'"
            );
            if (defaultValueLocation > -1) {
              finalConditionalExpression =
                finalConditionalExpression.substring(0, defaultValueLocation) +
                ':null';
            }
          }
          return finalConditionalExpression;
        }
        exports.setupConditionalExpressionValue =
          setupConditionalExpressionValue;
        function setupConditionalFalseValue(conditionalValue, defaultValue) {
          // Make sure that the last 'false' value has a ':' sign and if it doesn't, add it and assign the default value, if there's one.
          var indexOfLastConditionResults = conditionalValue.lastIndexOf('?');
          var subStringOfLastConditionResults = conditionalValue.substr(
            indexOfLastConditionResults + 1,
            conditionalValue.length
          );
          var indexOfLastConditionResultsDivider =
            subStringOfLastConditionResults.indexOf(':');
          if (indexOfLastConditionResultsDivider === -1) {
            conditionalValue += ':';
            if (defaultValue) {
              conditionalValue += defaultValue;
            }
          } else {
            // check if there's a 'false' value or just an empty string
            var emptyFalseValue = subStringOfLastConditionResults.substr(
              indexOfLastConditionResultsDivider + 1,
              subStringOfLastConditionResults.length
            );
            if (emptyFalseValue === '') {
              conditionalValue =
                conditionalValue.substr(0, conditionalValue.length) +
                defaultValue;
            }
          }
          return conditionalValue;
        }
        function escapeCharactersInConditionalValue(conditionalValue) {
          // Escape any "'" signs.
          conditionalValue = conditionalValue.replace(/\'/g, "'");
          // Enclose all the 'true' values in ''
          conditionalValue = conditionalValue.replace(/\?/g, "?'");
          conditionalValue = conditionalValue.replace(/:/g, "':");
          return conditionalValue;
        }
        function setUpLastFalseValue(conditionalValue) {
          // Set an aphostrophe in the last 'false' if there isn't one
          // First: trim the last 'false' value for the aphostrophe insertion
          var indexOfLastConditionResults = conditionalValue.lastIndexOf('?');
          var subStringOfLastConditionResults = conditionalValue.substr(
            indexOfLastConditionResults + 1,
            conditionalValue.length
          );
          var falseResultStartIndex =
            subStringOfLastConditionResults.indexOf(':') + 1;
          var lastFalseResultValue = subStringOfLastConditionResults.substr(
            falseResultStartIndex,
            subStringOfLastConditionResults.length
          );
          lastFalseResultValue =
            window.gigya.utils.stringUtils.trim(lastFalseResultValue);
          if (lastFalseResultValue[0] != "'") {
            lastFalseResultValue = "'" + lastFalseResultValue;
          }
          if (lastFalseResultValue[lastFalseResultValue.length] != "'") {
            lastFalseResultValue += "'";
          }
          var lastTrueResultValue = subStringOfLastConditionResults.substr(
            0,
            falseResultStartIndex - 1
          );
          conditionalValue =
            conditionalValue.substr(0, indexOfLastConditionResults + 1) +
            lastTrueResultValue +
            ':' +
            lastFalseResultValue;
          return conditionalValue;
        }
        function isKeyCodeDisplayable(keycode) {
          return (
            (keycode > 47 && keycode < 58) || // number keys
            keycode == 32 ||
            keycode == 13 || // spacebar & return key(s)
            (keycode > 64 && keycode < 91) || // letter keys
            (keycode > 95 && keycode < 112) || // numpad keys
            (keycode > 185 && keycode < 193) || // ;=,-./` (in order)
            (keycode > 218 && keycode < 223)
          ); // [\]' (in order)
        }
        exports.isKeyCodeDisplayable = isKeyCodeDisplayable;
        exports.UnitMeasurementType = {
          pixel: 'px',
          percentage: '%',
          auto: '',
        };
        function getUnitMeasurementType(value) {
          if (value === void 0) {
            value = '';
          }
          var unitType;
          if (value === null || value == 'auto') {
            unitType = exports.UnitMeasurementType.auto;
          } else {
            unitType =
              value.indexOf('%') != -1
                ? exports.UnitMeasurementType.percentage
                : exports.UnitMeasurementType.pixel;
          }
          return unitType;
        }
        exports.getUnitMeasurementType = getUnitMeasurementType;
        function getAttributesAsArray(el) {
          var attributes = [];
          var elementAttributes = el.attributes;
          // A workaround for IE8
          for (var i = 0; i < elementAttributes.length; i++) {
            attributes.push(elementAttributes[i]);
          }
          return attributes;
        }
        exports.getAttributesAsArray = getAttributesAsArray;
        function endsWith(s, suffix) {
          return s.indexOf(suffix, s.length - suffix.length) !== -1;
        }
        exports.endsWith = endsWith;
        function hasIndex(key) {
          return /\[[0-9]]|\.[0-9]/.test(key);
        }
        exports.hasIndex = hasIndex;
        function removeSerializedKeyLastEnumerator(key) {
          return key
            .replace(/[0-9]\.(?=[^.]*$)/, '')
            .replace(/\[[0-9]](?=[^\[]*$)/, '');
        }
        exports.removeSerializedKeyLastEnumerator =
          removeSerializedKeyLastEnumerator;
        function removeSerializedKeyEdgeProperty(key) {
          return key.substr(0, key.lastIndexOf('.'));
        }
        exports.removeSerializedKeyEdgeProperty =
          removeSerializedKeyEdgeProperty;
        function IETemplateElementPolyfill(doc) {
          if (doc === void 0) {
            doc = document;
          }
          var support = 'content' in document.createElement('template');
          // Set the content property if missing
          if (!support) {
            var /**
               * Prefer an array to a NodeList
               * Otherwise, updating the content property of a node
               * will update the NodeList and we'll loose the nested <template>
               */ templates = Array.prototype.slice.call(
                document.getElementsByTagName('template')
              ),
              template,
              content,
              fragment,
              node,
              i = 0,
              j;
            // For each <template> element get its content and wrap it in a document fragment
            while ((template = templates[i++]) && !template.content) {
              content = template.children;
              fragment = document.createDocumentFragment();
              while (content[0]) {
                fragment.appendChild(content[0]);
              }
              template.content = fragment;
            }
          }
        }
        exports.IETemplateElementPolyfill = IETemplateElementPolyfill;
        function replaceAttribute(htmlElement, fromAttribute, toAttribute) {
          try {
            var templateEls =
              htmlElement === null || htmlElement === void 0
                ? void 0
                : htmlElement.querySelectorAll('[' + fromAttribute + ']');
            ForEach(templateEls, function (el) {
              el.setAttribute(toAttribute, el.getAttribute(fromAttribute));
              el.removeAttribute(fromAttribute);
            });
          } catch (ex) {}
        }
        exports.replaceAttribute = replaceAttribute;
        function isDOMXSS(text) {
          var dummyDomElement = document.createElement('span');
          dummyDomElement.innerText = text;
          return dummyDomElement.innerHTML !== text;
        }
        exports.isDOMXSS = isDOMXSS;

        /***/
      },

    /***/ './src/accounts/constants.ts':
      /*!***********************************!*\
  !*** ./src/accounts/constants.ts ***!
  \***********************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var EditableTfaProvidersTypes;
        (function (EditableTfaProvidersTypes) {
          EditableTfaProvidersTypes[
            (EditableTfaProvidersTypes['gigyaPhone'] = 0)
          ] = 'gigyaPhone';
          EditableTfaProvidersTypes[
            (EditableTfaProvidersTypes['gigyaTotp'] = 1)
          ] = 'gigyaTotp';
          EditableTfaProvidersTypes[
            (EditableTfaProvidersTypes['gigyaPush'] = 2)
          ] = 'gigyaPush';
          EditableTfaProvidersTypes[
            (EditableTfaProvidersTypes['livelink'] = 3)
          ] = 'livelink';
        })(
          (EditableTfaProvidersTypes =
            exports.EditableTfaProvidersTypes ||
            (exports.EditableTfaProvidersTypes = {}))
        );
        exports.gigyaAssertionExpiration = 60 * 5 * 1000;
        exports.sensitiveParamsOverride = 'login_token';
        exports.GIGYA_PARAM_PREFIX = 'gig_';
        exports.GIGYA_INTERNAL_PARAM_PREFIX = exports.GIGYA_PARAM_PREFIX + 'i_';
        exports.GIGYA_INTERNAL_PARAMS = exports.GIGYA_PARAM_PREFIX + 'actions';

        /***/
      },

    /***/ './src/core/ApiService/app/ApiService.ts':
      /*!***********************************************!*\
  !*** ./src/core/ApiService/app/ApiService.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var GroupApiDomainService_1 = __webpack_require__(
          /*! src/core/ApiService/app/GroupApiDomainService */ './src/core/ApiService/app/GroupApiDomainService.ts'
        );
        var RequestProvider_1 = __webpack_require__(
          /*! ./RequestProvider */ './src/core/ApiService/app/RequestProvider.ts'
        );
        var GmidProvider_1 = __webpack_require__(
          /*! ./GmidProvider */ './src/core/ApiService/app/GmidProvider.ts'
        );
        var HasGmid = GmidProvider_1.GmidProvider.HasGmid;
        var FlagService_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        var GMID_TICKET_EXPIRATION_INTERVAL = 1;
        exports.TokenKeys = {
          GMID: 'gig_gmid',
          UCID: 'gig_ucid',
          GMID_TICKET: 'gmidTicket',
          GMID_TICKET_EXPIRATION_TIME: 'gmidTicketExpiration',
        };
        var ApiService = /** @class */ (function () {
          function ApiService(
            _apiKey,
            _hasGmid,
            _domainResolver,
            _groupApiDomainService,
            _requestProvider,
            _storage
          ) {
            if (_groupApiDomainService === void 0) {
              _groupApiDomainService =
                new GroupApiDomainService_1.GroupApiDomainService();
            }
            if (_requestProvider === void 0) {
              _requestProvider = new RequestProvider_1.RequestProvider();
            }
            this._apiKey = _apiKey;
            this._hasGmid = _hasGmid;
            this._domainResolver = _domainResolver;
            this._groupApiDomainService = _groupApiDomainService;
            this._requestProvider = _requestProvider;
            this.didFallback = false;
            if (_storage) {
              this._storage = _storage;
            }
          }
          ApiService.prototype.getApiDomain = function (methodName) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              return tslib_1.__generator(this, function (_a) {
                return [
                  2 /*return*/,
                  this._domainResolver.getApiDomain(methodName),
                ];
              });
            });
          };
          ApiService.prototype.bootstrap = function (forceBootstrap) {
            if (forceBootstrap === void 0) {
              forceBootstrap = false;
            }
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var log, _a, webSDKBootstrapResponse, ex_1, ticketInfo, hasGmid;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    log = window.gigya.logger.group('bootstrap api service');
                    if (!!this._storage) return [3 /*break*/, 2];
                    window.gigya.logger.debug('init storage');
                    _a = this;
                    return [
                      4 /*yield*/,
                      new gigya.Promise(function (resolve) {
                        window.gigya.utils.localStorage.waitForService(
                          function (adapter) {
                            resolve(adapter);
                          }
                        );
                      }),
                    ];
                  case 1:
                    _a._storage = _b.sent();
                    _b.label = 2;
                  case 2:
                    if (!(this._hasGmid && !forceBootstrap))
                      return [3 /*break*/, 3];
                    window.gigya.logger.info('already has gmid');
                    return [3 /*break*/, 10];
                  case 3:
                    window.gigya.logger.info(
                      !this._hasGmid ? 'no gmid set' : 'forcing bootstrap'
                    );
                    if (!(!this._useStorage && this.canSaveGmidAsCookie()))
                      return [3 /*break*/, 8];
                    window.gigya.logger.info('save gmid as cookie');
                    _b.label = 4;
                  case 4:
                    _b.trys.push([4, 6, , 7]);
                    return [
                      4 /*yield*/,
                      this.sendRequest({
                        methodName: 'accounts.webSdkBootstrap',
                        params: { apiKey: this._apiKey },
                      }),
                    ];
                  case 5:
                    webSDKBootstrapResponse = _b.sent();
                    if (webSDKBootstrapResponse.errorCode !== 0) {
                      throw (
                        'error bootstrapping sdk\n' +
                        JSON.stringify(webSDKBootstrapResponse, null, 4)
                      );
                    }
                    return [3 /*break*/, 7];
                  case 6:
                    ex_1 = _b.sent();
                    throw new Error('accounts.webSdkBootstrap failed: ' + ex_1);
                  case 7:
                    return [3 /*break*/, 10];
                  case 8:
                    window.gigya.logger.info('save gmid in storage');
                    return [4 /*yield*/, this.setupWithStorage(forceBootstrap)];
                  case 9:
                    _b.sent();
                    this._useStorage = true;
                    _b.label = 10;
                  case 10:
                    if (!this._useStorage) return [3 /*break*/, 12];
                    return [4 /*yield*/, this.getGmidTicket()];
                  case 11:
                    ticketInfo = _b.sent();
                    return [3 /*break*/, 13];
                  case 12:
                    hasGmid =
                      window.gigya.utils.cookie.get('hasGmid') ||
                      (webSDKBootstrapResponse === null ||
                      webSDKBootstrapResponse === void 0
                        ? void 0
                        : webSDKBootstrapResponse.hasGmid);
                    this.cleanStorage();
                    _b.label = 13;
                  case 13:
                    log.end();
                    return [
                      2 /*return*/,
                      {
                        ticketInfo: ticketInfo,
                        hasGmid: hasGmid,
                      },
                    ];
                }
              });
            });
          };
          ApiService.prototype.setGroupApiDomain = function (apiDomain) {
            var baseDomain = window.gigya._.getBaseDomain(
              window.gigya.partnerSettings.baseDomains,
              this._domainResolver.originDomain,
              ['gigya.com', 'cn1.sapcdm.cn', window.gigya.defaultApiDomain]
            );
            if (baseDomain !== window.gigya.defaultApiDomain) {
              this._groupApiDomainService.set(apiDomain);
            }
          };
          ApiService.prototype.canSaveGmidAsCookie = function () {
            // api domain will be first party when site has a custom api domain prefix.
            if (FlagService_1.FlagService.alwaysCheckCookieSave) {
              return (
                this._domainResolver.isApiDomainFirstParty ||
                this._domainResolver.canSaveGmidAsCookie
              );
            }
            return (
              this._domainResolver.isApiDomainFirstParty ||
              window.gigya.utils.cookie.canSaveCookie()
            );
          };
          ApiService.prototype.sendRequest = function (data) {
            var _a, _b;
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var methodName, params, baseDomain, _c, res, err_1;
              return tslib_1.__generator(this, function (_d) {
                switch (_d.label) {
                  case 0:
                    //TODO: handle timeout
                    if (!data) {
                      window.gigya.logger.error(
                        'ApiService: request data must has methodName and params'
                      );
                      return [2 /*return*/];
                    }
                    methodName = data.methodName;
                    params = window.gigya.utils.object.clone(
                      data.params,
                      true,
                      true
                    );
                    params.pageURL = this._domainResolver.originDomain;
                    if (this._useStorage) {
                      params.gmid = this._storage.getItem(
                        exports.TokenKeys.GMID
                      );
                      params.ucid = this._storage.getItem(
                        exports.TokenKeys.UCID
                      );
                    }
                    _c = 'https://';
                    return [
                      4 /*yield*/,
                      this.getApiDomain(
                        (_b =
                          (_a = data.settings) === null || _a === void 0
                            ? void 0
                            : _a.namespace) !== null && _b !== void 0
                          ? _b
                          : data.methodName
                      ),
                    ];
                  case 1:
                    baseDomain = _c + _d.sent();
                    _d.label = 2;
                  case 2:
                    _d.trys.push([2, 4, , 5]);
                    return [
                      4 /*yield*/,
                      this._requestProvider.send(
                        baseDomain,
                        methodName,
                        params,
                        data.settings,
                        data.headers
                      ),
                    ];
                  case 3:
                    res = _d.sent();
                    return [3 /*break*/, 5];
                  case 4:
                    err_1 = _d.sent();
                    if (this.didFallback) {
                      res = err_1;
                    } else {
                      this.didFallback = true;
                      res = this.sendRequestFallback(
                        baseDomain,
                        methodName,
                        params,
                        data,
                        err_1
                      );
                    }
                    return [3 /*break*/, 5];
                  case 5:
                    return [2 /*return*/, res];
                }
              });
            });
          };
          ApiService.prototype.setupWithStorage = function (forceBootstrap) {
            var _a;
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var storageGmid,
                expirationTime,
                isGmidExistsInStorage,
                gmidVersion,
                tokens,
                ticketRes;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    storageGmid = this._storage.getItem(exports.TokenKeys.GMID);
                    expirationTime = parseInt(
                      this._storage.getItem(
                        exports.TokenKeys.GMID_TICKET_EXPIRATION_TIME
                      )
                    );
                    isGmidExistsInStorage = Boolean(storageGmid);
                    gmidVersion =
                      (_a = window.gigya.utils.array.getArrayFromString(
                        storageGmid,
                        '.'
                      )) === null || _a === void 0
                        ? void 0
                        : _a[1];
                    if (
                      !(
                        (forceBootstrap && gmidVersion !== HasGmid.ver4) ||
                        !isGmidExistsInStorage
                      )
                    )
                      return [3 /*break*/, 2];
                    window.gigya.logger.info('getting gmid by endpoint');
                    return [4 /*yield*/, this.getIds()];
                  case 1:
                    tokens = _b.sent();
                    if (!tokens.gcid || !tokens.ucid) {
                      throw 'ApiService getIDs: the request to the endpoint failed';
                    } else {
                      window.gigya.logger.info('setting gmid in storage');
                      this._storage.setItem(
                        exports.TokenKeys.GMID,
                        tokens.gcid
                      );
                      this._storage.setItem(
                        exports.TokenKeys.UCID,
                        tokens.ucid
                      );
                      ticketRes = this.createTicketResponse(tokens.gmidTicket);
                      this.updateGmidTicket(ticketRes);
                    }
                    return [3 /*break*/, 5];
                  case 2:
                    if (
                      !!window.gigya.utils.validation.isLaterThanNow(
                        expirationTime
                      )
                    )
                      return [3 /*break*/, 4];
                    return [4 /*yield*/, this.refreshGmidTicketFromServer()];
                  case 3:
                    _b.sent();
                    return [3 /*break*/, 5];
                  case 4:
                    window.gigya.logger.info('already has gmid in storage');
                    _b.label = 5;
                  case 5:
                    return [2 /*return*/];
                }
              });
            });
          };
          // createNew - if no gmidTicket exists, then create a new one instead of returning undefined
          ApiService.prototype.getGmidTicket = function (createNew) {
            if (createNew === void 0) {
              createNew = false;
            }
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var gmidTicket, expirationTime;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    gmidTicket = this._storage.getItem(
                      exports.TokenKeys.GMID_TICKET
                    );
                    if (!(!gmidTicket && !createNew)) return [3 /*break*/, 1];
                    return [2 /*return*/, undefined];
                  case 1:
                    expirationTime = parseInt(
                      this._storage.getItem(
                        exports.TokenKeys.GMID_TICKET_EXPIRATION_TIME
                      )
                    );
                    if (
                      !(
                        !createNew &&
                        gmidTicket &&
                        window.gigya.utils.validation.isLaterThanNow(
                          expirationTime
                        )
                      )
                    )
                      return [3 /*break*/, 2];
                    return [
                      2 /*return*/,
                      {
                        gmidTicket: gmidTicket,
                        expirationTime: parseInt(
                          this._storage.getItem(
                            exports.TokenKeys.GMID_TICKET_EXPIRATION_TIME
                          )
                        ),
                      },
                    ];
                  case 2:
                    this.deleteGmidTicket();
                    return [4 /*yield*/, this.refreshGmidTicketFromServer()];
                  case 3:
                    return [2 /*return*/, _a.sent()];
                }
              });
            });
          };
          // this should be removed in the feature, it's only use in case we need to send remove
          // and the top domain is not trusted
          ApiService.prototype.sendReport = function (message, details) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var params, request;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    if (Math.floor(Math.random() * 100) <= 5)
                      return [2 /*return*/];
                    params = {
                      message: message,
                      apiKey: window.gigya.apiKey,
                      page: this._domainResolver.originDomain,
                      buildVersion: window.gigya.build.version,
                      format: 'json',
                      sdk: 'web',
                    };
                    if (details) {
                      params['details'] = JSON.stringify(details);
                    }
                    request = {
                      methodName: 'sdk.errorReport',
                      params: params,
                    };
                    return [4 /*yield*/, this.sendRequest(request)];
                  case 1:
                    _a.sent();
                    return [2 /*return*/];
                }
              });
            });
          };
          ApiService.prototype.refreshGmidTicketFromServer = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var res;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    window.gigya.logger.info('refreshing gmid ticket');
                    return [
                      4 /*yield*/,
                      this.createGmidTicket(
                        this._storage.getItem(exports.TokenKeys.GMID)
                      ),
                    ];
                  case 1:
                    res = _a.sent();
                    if (res && res.gmidTicket) {
                      this.updateGmidTicket(res);
                    }
                    return [2 /*return*/, res];
                }
              });
            });
          };
          ApiService.prototype.updateGmidTicket = function (ticket) {
            window.gigya.logger.info('updating gmid ticket', ticket);
            this._storage.setItem(
              exports.TokenKeys.GMID_TICKET,
              ticket.gmidTicket
            );
            this._storage.setItem(
              exports.TokenKeys.GMID_TICKET_EXPIRATION_TIME,
              String(ticket.expirationTime)
            );
          };
          ApiService.prototype.deleteGmidTicket = function () {
            this._storage.removeItem(exports.TokenKeys.GMID_TICKET);
            this._storage.removeItem(
              exports.TokenKeys.GMID_TICKET_EXPIRATION_TIME
            );
          };
          ApiService.prototype.cleanStorage = function () {
            this._storage.removeItem(exports.TokenKeys.GMID);
            this._storage.removeItem(exports.TokenKeys.UCID);
            this.deleteGmidTicket();
          };
          ApiService.prototype.getIds = function () {
            return this.sendRequest({
              methodName: 'socialize.getIDs',
              params: {
                APIKey: this._apiKey,
                includeTicket: true,
              },
            });
          };
          ApiService.prototype.createGmidTicket = function (gmid, expires) {
            var _this = this;
            if (expires === void 0) {
              expires =
                window.gigya.partnerSettings.gmidTicketExpiration || 3600;
            }
            var params = {
              apiKey: this._apiKey,
              expires: expires,
            };
            if (gmid) params.gmid = gmid;
            return this.sendRequest({
              methodName: 'socialize.getGmidTicket',
              params: params,
            }).then(function (res) {
              if (res && res.gmidTicket) {
                return _this.createTicketResponse(res.gmidTicket);
              } else {
                window.gigya.logger.error('Failed to establish gmidTicket', {
                  response: JSON.stringify(res),
                  method: 'socialize.getGmidTicket',
                });
                _this.deleteGmidTicket();
              }
            });
          };
          ApiService.prototype.createTicketResponse = function (gmidTicket) {
            var currentGmidTicketDate = new Date();
            currentGmidTicketDate.setHours(
              currentGmidTicketDate.getHours() + GMID_TICKET_EXPIRATION_INTERVAL
            );
            var expirationTime = currentGmidTicketDate.getTime();
            return {
              gmidTicket: gmidTicket,
              expirationTime: expirationTime,
            };
          };
          ApiService.prototype.sendRequestFallback = function (
            baseDomain,
            methodName,
            params,
            data,
            err
          ) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var _i, _a, flag;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    window.gigya.logger.report(
                      'ApiService: Fallback with api flags turned off',
                      {
                        baseDomain: baseDomain,
                        methodName: methodName,
                        params: params,
                        data: data,
                        err: err,
                      }
                    );
                    for (
                      _i = 0, _a = FlagService_1.FlagService.apiFlags;
                      _i < _a.length;
                      _i++
                    ) {
                      flag = _a[_i];
                      window.gigya._.config.flags[flag] = false;
                    }
                    return [
                      4 /*yield*/,
                      this._requestProvider.send(
                        baseDomain,
                        methodName,
                        params,
                        data.settings,
                        data.headers
                      ),
                    ];
                  case 1:
                    return [2 /*return*/, _b.sent()];
                }
              });
            });
          };
          return ApiService;
        })();
        exports.ApiService = ApiService;

        /***/
      },

    /***/ './src/core/ApiService/app/GmidProvider.ts':
      /*!*************************************************!*\
  !*** ./src/core/ApiService/app/GmidProvider.ts ***!
  \*************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var FlagService_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        var SiteData_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Services/SiteData */ './src/core/Gigya.Js/app/Services/SiteData.ts'
        );
        var GmidProvider;
        (function (GmidProvider) {
          /**
           * Gmid version.
           */
          var HasGmid;
          (function (HasGmid) {
            HasGmid['ver2'] = 'ver2';
            HasGmid['ver3'] = 'ver3';
            HasGmid['ver4'] = 'ver4';
          })((HasGmid = GmidProvider.HasGmid || (GmidProvider.HasGmid = {})));
          /**
           * Search actual version in cookies or from backend configuration
           * (it is set up for client on the backend side as gigya.gmidVersion).
           */
          var VersionSearchStrategy;
          (function (VersionSearchStrategy) {
            VersionSearchStrategy['cookieFirst'] = 'cookieFirst';
            VersionSearchStrategy['configFirst'] = 'configFirst';
          })(
            (VersionSearchStrategy =
              GmidProvider.VersionSearchStrategy ||
              (GmidProvider.VersionSearchStrategy = {}))
          );
          /**
           * Return HasGmid context with all useful info.
           * @param gigyaObj Gigya global object.
           */
          function getHasGmidParam(gigyaObj) {
            var hasGmid =
              gigyaObj.utils.getParamValue(document.cookie, 'hasGmid', ';') ||
              getGmidBootstrapParam(gigyaObj);
            return {
              isV3: hasGmid === HasGmid.ver3,
              isV4: hasGmid === HasGmid.ver4,
              hasGmid: hasGmid,
            };
          }
          GmidProvider.getHasGmidParam = getHasGmidParam;
          /**
           * Return indication whether bootstrap need or not.
           * @param gigyaObj Gigya global object.
           * @param strategy Search actual version in cookies or from backend configuration.
           */
          function getGmidBootstrapIndicationToken(gigyaObj, strategy) {
            if (strategy === void 0) {
              strategy = VersionSearchStrategy.cookieFirst;
            }
            var version = getActualGmidVersion(gigyaObj, strategy);
            return convertHasGmidToBootstrapIndication(gigyaObj, version);
          }
          GmidProvider.getGmidBootstrapIndicationToken =
            getGmidBootstrapIndicationToken;
          /**
           * Return actual version of the gmid version cookie (ver3, ver4, etc).
           * @param gigyaObj Gigya global object.
           * @param strategy Search actual version in cookies or from backend configuration.
           */
          function getActualGmidVersion(gigyaObj, strategy) {
            if (strategy === void 0) {
              strategy = VersionSearchStrategy.cookieFirst;
            }
            var hasGmidContext = getHasGmidParam(gigyaObj);
            return strategy == VersionSearchStrategy.cookieFirst
              ? hasGmidContext.hasGmid || gigyaObj.gmidVersion || 'ver3'
              : gigyaObj.gmidVersion || hasGmidContext.hasGmid || 'ver3';
          }
          GmidProvider.getActualGmidVersion = getActualGmidVersion;
          /**
           * Return flag if the token is allowed to be regenerated.
           * (Allowed only in case when session is not active and gmid token is not latest.)
           * @param gigyaObj Gigya global object.
           * @param isSessionActive Is session active indicator.
           */
          function shouldRegenerateGmid(gigyaObj, isSessionActive) {
            var hasLatestVer4Gmid = hasLatestGmidVersion(gigyaObj);
            return (
              !isSessionActive && (shouldForceBootstrap() || !hasLatestVer4Gmid)
            );
          }
          GmidProvider.shouldRegenerateGmid = shouldRegenerateGmid;
          /**
           * Return flag whether hasGmid cookie has latest version.
           * @param gigyaObj Gigya global object.
           */
          function hasLatestGmidVersion(gigyaObj) {
            var hasGmidContext = getHasGmidParam(gigyaObj);
            return Boolean(hasGmidContext.hasGmid) && hasGmidContext.isV4;
          }
          GmidProvider.hasLatestGmidVersion = hasLatestGmidVersion;
          function convertHasGmidToBootstrapIndication(gigyaObj, gmidVersion) {
            return (
              (gigyaObj.partnerSettings.customAPIDomainPrefix || '_gigya') +
              ('_' + gmidVersion)
            );
          }
          GmidProvider.convertHasGmidToBootstrapIndication =
            convertHasGmidToBootstrapIndication;
          function getGmidBootstrapParam(gigyaObj) {
            var _a;
            var gmidBootstrapCookie = gigyaObj.utils.cookie.get(
              'gig_bootstrap_' + gigyaObj.apiKey
            );
            return (_a = gigyaObj.utils.array.getArrayFromString(
              gmidBootstrapCookie,
              '_'
            )) === null || _a === void 0
              ? void 0
              : _a.pop();
          }
          function shouldForceBootstrap() {
            return (
              FlagService_1.FlagService.forceWebSdkBootstrap &&
              !SiteData_1.siteData.didForcedBootstrap
            );
          }
          GmidProvider.shouldForceBootstrap = shouldForceBootstrap;
        })(
          (GmidProvider = exports.GmidProvider || (exports.GmidProvider = {}))
        );

        /***/
      },

    /***/ './src/core/ApiService/app/GroupApiDomainService.ts':
      /*!**********************************************************!*\
  !*** ./src/core/ApiService/app/GroupApiDomainService.ts ***!
  \**********************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var LocalInfo_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/LocalInfo */ './src/core/Gigya.Js/app/LocalInfo.ts'
        );
        var GroupApiDomainKey = 'apiDomain';
        var GroupApiDomainService = /** @class */ (function () {
          function GroupApiDomainService(_ssoKey, _storage, _pageDomain) {
            if (_ssoKey === void 0) {
              _ssoKey = window.gigya.partnerSettings.ssoKey;
            }
            if (_storage === void 0) {
              _storage = window.gigya.utils.localStorage.initializeAdapter(
                window.gigya.utils.localStorage.CookieStorageAdapter
              );
            }
            if (_pageDomain === void 0) {
              _pageDomain = LocalInfo_1.localInfo.pageDomain;
            }
            this._ssoKey = _ssoKey;
            this._storage = _storage;
            this._pageDomain = _pageDomain;
            this._cookieName = GroupApiDomainKey + '_' + this._ssoKey;
          }
          GroupApiDomainService.prototype.get = function () {
            return this._ssoKey
              ? this._storage.getItem(this._cookieName)
              : undefined;
          };
          GroupApiDomainService.prototype.set = function (apiDomain) {
            if (this._ssoKey) {
              window.gigya.logger.info(
                'setting as group api domain for ' + this._ssoKey
              );
              this._storage.removeItem(this._cookieName);
              this._storage.setItem(
                this._cookieName,
                apiDomain,
                undefined,
                this._pageDomain
              );
            }
          };
          return GroupApiDomainService;
        })();
        exports.GroupApiDomainService = GroupApiDomainService;

        /***/
      },

    /***/ './src/core/ApiService/app/Request.ts':
      /*!********************************************!*\
  !*** ./src/core/ApiService/app/Request.ts ***!
  \********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var GSErrors_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/GSErrors */ './src/core/Gigya.Js/app/GSErrors.ts'
        );
        var interfaces_1 = __webpack_require__(
          /*! ./interfaces */ './src/core/ApiService/app/interfaces.ts'
        );
        var LocalInfo_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/LocalInfo */ './src/core/Gigya.Js/app/LocalInfo.ts'
        );
        var constants_1 = __webpack_require__(
          /*! ../../../accounts/constants */ './src/accounts/constants.ts'
        );
        var Request = /** @class */ (function () {
          function Request(baseDomain, method, params, settings) {
            var _this = this;
            if (settings === void 0) {
              settings = {};
            }
            this.baseDomain = baseDomain;
            this.method = method;
            this.params = params;
            this.settings = settings;
            this.retry = 0;
            this.getUrl = function () {
              return window.gigya._.Uri.parse(
                _this.baseDomain + '/' + _this.method
              );
            };
          }
          Request.prototype.send = function (ignoreCacheTimeout) {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    if (!LocalInfo_1.localInfo.isOnLine()) {
                      return [2 /*return*/, this.networkErrorResponse()];
                    }
                    if (this.isRequestPathManipulated()) {
                      window.gigya.logger.warn(
                        'Aborting Request for ' +
                          this.method +
                          '. Path manipulation detected.'
                      );
                      return [2 /*return*/];
                    }
                    try {
                      this.params = window.gigya.utils.object.decodeObjectKeys(
                        this.params
                      );
                    } catch (ex) {
                      window.gigya.logger.error(
                        'Request API Error - Failed to decode object keys',
                        {
                          exception: ex,
                          requestParams: JSON.stringify(this.params),
                        }
                      );
                      return [2 /*return*/];
                    }
                    this.addDefaultParams();
                    return [
                      4 /*yield*/,
                      this.performSend(
                        this.getRequestType(),
                        ignoreCacheTimeout
                      ),
                    ];
                  case 1:
                    return [2 /*return*/, _a.sent()];
                }
              });
            });
          };
          Request.prototype.handleResponse = function (response) {
            var _this = this;
            if (this.settings.cacheTimeout) {
              window.gigya.utils.sessionCache.set(
                this.getCacheKey(),
                response['errorCode'] == GSErrors_1.GSErrors.OK
                  ? response
                  : null
              );
            }
            if (this.retryTimerID != null) {
              window.clearTimeout(this.retryTimerID);
            }
            if (response['errorCode'] == GSErrors_1.GSErrors.Data_Pending) {
              var t = this.getDataPendingTimeout(this.retry++);
              if (t > 0) {
                // retry
                window.setTimeout(function () {
                  _this.send();
                }, t);
                return;
              }
            } else {
              this.dispose();
              return response;
            }
          };
          Request.prototype.getCacheKey = function () {
            return (
              this.method +
              '_' +
              window.gigya.utils.keyValue.serialize(this.params)
            );
          };
          Request.prototype.getFullUrl = function () {
            var url = this.getUrl();
            return url.addToSearch(this.getFlattenParams()).href;
          };
          Request.prototype.addDefaultParams = function () {
            var _a, _b;
            this.params['sdk'] =
              'js_' +
              (((_a = window.gigya.build) === null || _a === void 0
                ? void 0
                : _a.version) || '');
            this.params['sdkBuild'] =
              ((_b = window.gigya.build) === null || _b === void 0
                ? void 0
                : _b.number) || 0;
          };
          Request.prototype.isRequestPathManipulated = function () {
            return (
              this.getUrl().href.toLowerCase() !==
                (this.baseDomain + '/' + this.method).toLowerCase() ||
              this.getUrl().search.length > 0
            );
          };
          Request.prototype.getDataPendingTimeout = function (retry) {
            if (retry <= 4) return 500;
            if (retry <= 4 + 4) return 1000;
            if (retry <= 4 + 4 + 13) return 2000;
            if (retry <= 4 + 4 + 13 + 18) return 5000;
            return -1;
          };
          Request.prototype.getRequestType = function () {
            if (
              this.isForcePost ||
              this.haveSensitiveParams() ||
              this.requestOversize()
            ) {
              return interfaces_1.RequestType.POST;
            }
            return interfaces_1.RequestType.GET;
          };
          Object.defineProperty(Request.prototype, 'isForcePost', {
            get: function () {
              return this.settings.forcePost;
            },
            enumerable: true,
            configurable: true,
          });
          Request.prototype.requestOversize = function () {
            var reqUrlLength = this.getRequestUrlLength();
            var _a = this.getUrlLengthFields(),
              extraLength = _a.extraLength,
              maxLength = _a.maxLength;
            return reqUrlLength + extraLength > maxLength;
          };
          Request.prototype.getRequestUrlLength = function () {
            var url = this.getUrl();
            return (
              url.href +
              window.gigya.utils.keyValue.serialize(this.getFlattenParams())
            ).length;
          };
          Request.prototype.getUrlLengthFields = function () {
            var extraLength = 0; //8000;
            var maxLength = 4 * 1024;
            if (
              window.gigya.localInfo.isIE ||
              window.gigya.localInfo.isEdgeLegacy
            ) {
              extraLength = 2 * 1024;
            }
            return { extraLength: extraLength, maxLength: maxLength };
          };
          Request.prototype.getFlattenParams = function () {
            return window.gigya.utils.keyValue.deserialize(
              window.gigya.utils.keyValue.serialize(this.params)
            );
          };
          Request.prototype.haveSensitiveParams = function () {
            var _a;
            for (
              var _i = 0,
                _b =
                  constants_1.sensitiveParamsOverride === null ||
                  constants_1.sensitiveParamsOverride === void 0
                    ? void 0
                    : constants_1.sensitiveParamsOverride.split('|');
              _i < _b.length;
              _i++
            ) {
              var param = _b[_i];
              if (
                (_a = this.params) === null || _a === void 0
                  ? void 0
                  : _a.hasOwnProperty(param)
              ) {
                return true;
              }
            }
          };
          return Request;
        })();
        exports.Request = Request;

        /***/
      },

    /***/ './src/core/ApiService/app/RequestProvider.ts':
      /*!****************************************************!*\
  !*** ./src/core/ApiService/app/RequestProvider.ts ***!
  \****************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var RequestProvider = /** @class */ (function () {
          function RequestProvider(_xhrRequest, timeout, _win) {
            if (_xhrRequest === void 0) {
              _xhrRequest = window.gigya.XhrRequest;
            }
            if (timeout === void 0) {
              timeout = 15000;
            }
            if (_win === void 0) {
              _win = window;
            }
            this._xhrRequest = _xhrRequest;
            this.timeout = timeout;
            this._win = _win;
          }
          RequestProvider.prototype.send = function (
            baseDomain,
            methodName,
            params,
            settings,
            headers
          ) {
            if (headers === void 0) {
              headers = {};
            }
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var _this = this;
              return tslib_1.__generator(this, function (_a) {
                return [
                  2 /*return*/,
                  new gigya.Promise(function (resolve, reject) {
                    return tslib_1.__awaiter(
                      _this,
                      void 0,
                      void 0,
                      function () {
                        var request, timeoutId, _a, err_1;
                        return tslib_1.__generator(this, function (_b) {
                          switch (_b.label) {
                            case 0:
                              request = new this._xhrRequest(
                                baseDomain,
                                methodName,
                                params,
                                settings,
                                headers
                              );
                              timeoutId = this._win.setTimeout(function () {
                                reject('API request timeout');
                              }, this.timeout);
                              _b.label = 1;
                            case 1:
                              _b.trys.push([1, 3, 4, 5]);
                              _a = resolve;
                              return [4 /*yield*/, request.send()];
                            case 2:
                              _a.apply(void 0, [_b.sent()]);
                              return [3 /*break*/, 5];
                            case 3:
                              err_1 = _b.sent();
                              window.gigya.logger.report('XHR request failed', {
                                methodName: methodName,
                                params: params,
                                settings: settings,
                                err: err_1,
                              });
                              reject('Request for ' + methodName + ' failed');
                              return [3 /*break*/, 5];
                            case 4:
                              this._win.clearTimeout(timeoutId);
                              return [7 /*endfinally*/];
                            case 5:
                              return [2 /*return*/];
                          }
                        });
                      }
                    );
                  }),
                ];
              });
            });
          };
          return RequestProvider;
        })();
        exports.RequestProvider = RequestProvider;

        /***/
      },

    /***/ './src/core/ApiService/app/XhrRequest.ts':
      /*!***********************************************!*\
  !*** ./src/core/ApiService/app/XhrRequest.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var Request_1 = __webpack_require__(
          /*! ./Request */ './src/core/ApiService/app/Request.ts'
        );
        var GSErrors_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/GSErrors */ './src/core/Gigya.Js/app/GSErrors.ts'
        );
        var interfaces_1 = __webpack_require__(
          /*! ./interfaces */ './src/core/ApiService/app/interfaces.ts'
        );
        var FlagService_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        var XhrRequest = /** @class */ (function (_super) {
          tslib_1.__extends(XhrRequest, _super);
          function XhrRequest(
            baseDomain,
            method,
            params,
            settings,
            requestHeaders
          ) {
            if (settings === void 0) {
              settings = {};
            }
            if (requestHeaders === void 0) {
              requestHeaders = {};
            }
            var _this =
              _super.call(this, baseDomain, method, params, settings) || this;
            _this.headers = {};
            _this.xhttp = new XMLHttpRequest();
            _this.setRequestHeaders(requestHeaders);
            return _this;
          }
          XhrRequest.prototype.performSend = function (
            requestType,
            ignoreCacheTimeout
          ) {
            var _this = this;
            return new gigya.Promise(function (resolve, reject) {
              var requestPostParams;
              var reqUrl = _this.getFullUrl();
              // Set request on load
              _this.xhttp.onload = function () {
                return _this.onRequestLoad(resolve, reject);
              };
              // Set request on error
              _this.xhttp.onerror = function () {
                return reject(
                  _this.createErrorFromResponse(
                    'XHR_FAILURE - http request onerror event'
                  )
                );
              };
              // Allow XMLHttp request to attach cookies
              _this.xhttp.withCredentials = true;
              if (requestType === interfaces_1.RequestType.POST) {
                reqUrl = _this.getUrl().href;
                // Option request go out without apiKey and fails
                // we add it in case headers has change
                if (_this.hasHeaders()) {
                  reqUrl += '?APIKey=' + _this.params['APIKey'];
                }
                requestPostParams = window.gigya.utils.keyValue.serialize(
                  _this.params
                );
                _this.headers['Content-Type'] =
                  'application/x-www-form-urlencoded';
              }
              _this.xhttp.open(requestType, reqUrl, true);
              // Add required headers to the request
              Object.keys(_this.headers).forEach(function (header) {
                _this.xhttp.setRequestHeader(header, _this.headers[header]);
              });
              _this.xhttp.send(requestPostParams);
            });
          };
          XhrRequest.prototype.hasHeaders = function () {
            return !!Object.keys(this.headers).length;
          };
          XhrRequest.prototype.onRequestLoad = function (resolve, reject) {
            var jsonResponse;
            try {
              jsonResponse = JSON.parse(this.xhttp.responseText);
            } catch (e) {
              window.gigya.logger.report(
                'XHR_FAILURE - failed to parse the response object',
                { responseText: this.xhttp.responseText }
              );
            }
            if (
              this.xhttp.readyState !== 4 ||
              !(jsonResponse === null || jsonResponse === void 0
                ? void 0
                : jsonResponse.statusCode)
            ) {
              reject(
                this.createErrorFromResponse(
                  'XHR_FAILURE - http request failed'
                )
              );
              return;
            }
            resolve(this.handleResponse(jsonResponse));
          };
          XhrRequest.prototype.createErrorFromResponse = function (message) {
            return {
              errorMessage: message,
              status: this.xhttp.status,
              readyState: this.xhttp.readyState,
              responseText: this.xhttp.responseText,
            };
          };
          XhrRequest.prototype.addDefaultParams = function () {
            _super.prototype.addDefaultParams.call(this);
            this.params['format'] = 'json';
            if (
              FlagService_1.FlagService.useHttpStatusCode &&
              this.settings.useHttpStatusCodes
            ) {
              this.params['httpStatusCodes'] = true;
            }
          };
          XhrRequest.prototype.networkErrorResponse = function () {
            return this.handleResponse({
              errorCode: GSErrors_1.GSErrors.NETWORK_ERROR,
              errorMessage: 'Network_error',
            });
          };
          XhrRequest.prototype.dispose = function () {};
          XhrRequest.prototype.setRequestHeaders = function (requestHeaders) {
            var _this = this;
            var supportedHeaders = ['Authorization'];
            Object.keys(requestHeaders)
              .filter(function (header) {
                return supportedHeaders.indexOf(header) !== -1;
              })
              .forEach(function (header) {
                var headerValue = requestHeaders[header];
                if (Boolean(headerValue) && typeof headerValue === 'string') {
                  _this.headers[header] = headerValue;
                }
              });
          };
          return XhrRequest;
        })(Request_1.Request);
        exports.XhrRequest = XhrRequest;

        /***/
      },

    /***/ './src/core/ApiService/app/interfaces.ts':
      /*!***********************************************!*\
  !*** ./src/core/ApiService/app/interfaces.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var RequestType;
        (function (RequestType) {
          RequestType['GET'] = 'GET';
          RequestType['POST'] = 'POST';
        })((RequestType = exports.RequestType || (exports.RequestType = {})));

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/ApiRequest.ts':
      /*!**********************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/ApiRequest.ts ***!
  \**********************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var BaseRequest_1 = __webpack_require__(
          /*! src/core/Gigya.Js.Adapters.Web/app/BaseRequest */ './src/core/Gigya.Js.Adapters.Web/app/BaseRequest.ts'
        );
        var ApiRequest = /** @class */ (function (_super) {
          tslib_1.__extends(ApiRequest, _super);
          function ApiRequest(methodName, params, callback, settings) {
            if (settings === void 0) {
              settings = {};
            }
            var _this =
              _super.call(
                this,
                window.gigya.defaultApiDomain,
                methodName,
                params,
                settings
              ) || this;
            _this.methodName = methodName;
            _this.params = params;
            _this.callback = callback;
            _this.settings = settings;
            return _this;
          }
          ApiRequest.prototype.sendAction = function (ignoreCacheTimeout) {
            window.gigya.utils.object.add(this.params, this.getAuthParams());
            window.gigya._.apiAdapters.web.apiService
              .sendRequest(this.json())
              .then(this.callback)
              .catch(function (err) {
                return console.error(err);
              });
          };
          ApiRequest.prototype.json = function () {
            return {
              methodName: this.methodName,
              params: this.params,
              settings: this.settings,
              headers: this.getHeaders(),
            };
          };
          return ApiRequest;
        })(BaseRequest_1.BaseRequest);
        exports.ApiRequest = ApiRequest;

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/BaseRequest.ts':
      /*!***********************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/BaseRequest.ts ***!
  \***********************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var TokenStore_1 = __webpack_require__(
          /*! src/core/Gigya.Js.Adapters.Web/app/TokenStore */ './src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts'
        );
        var REQ_MAX_RETRIES = 5;
        var BaseRequest = /** @class */ (function () {
          function BaseRequest(
            baseUrl,
            methodName,
            params,
            settings,
            _maxTries
          ) {
            if (settings === void 0) {
              settings = {};
            }
            if (_maxTries === void 0) {
              _maxTries = REQ_MAX_RETRIES;
            }
            this.baseUrl = baseUrl;
            this.methodName = methodName;
            this.params = params;
            this.settings = settings;
            this._maxTries = _maxTries;
            this._tries = 0;
            this.params['sdk'] = 'js_' + window.gigya.build.version;
          }
          BaseRequest.prototype.getUrl = function () {
            return this.baseUrl + '/' + this.methodName;
          };
          BaseRequest.prototype.send = function (maxRetriesCallback) {
            this._tries++;
            if (this._tries <= this._maxTries) {
              this.sendAction();
            } else if (maxRetriesCallback) {
              maxRetriesCallback();
            }
          };
          BaseRequest.prototype.getAuthParams = function () {
            var authParams = {};
            if (this.params['oauth_token']) {
              this.params['authMode'] = 'token';
              // The regToken takes priority over the login token because of SSO.
              // An account may be logged in (login_token) but still be pending reg because of child site schema requirements.
            } else if (!this.params['noAuth'] && !this.params['regToken']) {
              var loginToken = TokenStore_1.get(this.params['APIKey']);
              if (loginToken) {
                this.sentLoginToken = loginToken;
                var loginTokenExp = TokenStore_1.getGltexpCookie(
                  this.params['APIKey']
                );
                if (loginTokenExp != null) {
                  authParams['loginTokenExp'] = loginTokenExp;
                }
                authParams['login_token'] = loginToken;
              }
              authParams['authMode'] = 'cookie';
            }
            delete this.params['noAuth'];
            if (window.gigya.localInfo.isAndroidBrowser) {
              delete this.params['login_token'];
              delete this.params['loginTokenExp'];
              delete this.params['authMode'];
            }
            return authParams;
          };
          BaseRequest.prototype.getHeaders = function () {
            if (this.settings.useBearerToken) {
              return {
                Authorization: TokenStore_1.getBearerToken(),
              };
            }
            return {};
          };
          return BaseRequest;
        })();
        exports.BaseRequest = BaseRequest;

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/accountResidency.ts':
      /*!********************************************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/accountResidency.ts ***!
  \********************************************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var allowedResidencies = ['us1', 'eu1', 'au1', 'ru1', 'cn1', 'il1'];
        function setAccountResidency(dataCenter) {
          if (
            dataCenter &&
            allowedResidencies.indexOf(dataCenter.toLowerCase()) == -1
          )
            return window.gigya.logger.warn('invalid residency', {
              dataCenter: dataCenter,
            });
          window.gigya.globalAccount.dataCenter = dataCenter;
        }
        exports.setAccountResidency = setAccountResidency;

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/centralizedSSO.ts':
      /*!******************************************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/centralizedSSO.ts ***!
  \******************************************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var TokenStore_1 = __webpack_require__(
          /*! ../TokenStore */ './src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts'
        );
        var sessionHelpers_1 = __webpack_require__(
          /*! ./sessionHelpers */ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/sessionHelpers.ts'
        );
        var HTTP_1 = __webpack_require__(
          /*! ../../../Gigya.Js/app/Utils/HTTP */ './src/core/Gigya.Js/app/Utils/HTTP.ts'
        );
        var queue_1 = __webpack_require__(
          /*! ../../../Gigya.Js/app/Utils/queue */ './src/core/Gigya.Js/app/Utils/queue.ts'
        );
        var constants_1 = __webpack_require__(
          /*! ../../../../accounts/constants */ './src/accounts/constants.ts'
        );
        var UrlParamsHelper_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/UrlParamsHelper */ './src/core/Gigya.Js/app/Utils/UrlParamsHelper.ts'
        );
        function ssoLogin(params) {
          if (params === void 0) {
            params = {};
          }
          if (!verifySiteConfiguration()) {
            return;
          }
          if (!window.gigya.utils.toggles.isOn('keepSessionOnSSOLogin')) {
            TokenStore_1.remove();
          }
          window.gigya.accounts.sso.login(params);
        }
        exports.ssoLogin = ssoLogin;
        function continueSso(params) {
          if (params === void 0) {
            params = {};
          }
          var _a, _b, _c, _d, _e;
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            var log,
              endFlow,
              ssoToken,
              scope,
              APIKey,
              login_token,
              _f,
              serverParams,
              serverParams;
            return tslib_1.__generator(this, function (_g) {
              switch (_g.label) {
                case 0:
                  queue_1.hold('ssoContinue', 'API');
                  log = window.gigya.logger.group('sso.continue');
                  endFlow = function (warningMessage) {
                    warningMessage && window.gigya.logger.warn(warningMessage);
                    queue_1.release('ssoContinue', 'API');
                    return log.end();
                  };
                  if (!verifySiteConfiguration()) {
                    return [2 /*return*/, endFlow()];
                  }
                  ssoToken = window.gigya.getUrlParam('ssoToken');
                  scope = window.gigya.getUrlParam('scope');
                  if (!ssoToken) {
                    return [
                      2 /*return*/,
                      endFlow('ssoToken must be present in the url'),
                    ];
                  }
                  APIKey =
                    ((_b =
                      (_a = window.gigya.thisScript) === null || _a === void 0
                        ? void 0
                        : _a.globalConf) === null || _b === void 0
                      ? void 0
                      : _b.APIKey) ||
                    ((_c = window.gigya.thisScript) === null || _c === void 0
                      ? void 0
                      : _c.APIKey);
                  _f = TokenStore_1.get(APIKey);
                  if (_f) return [3 /*break*/, 2];
                  return [4 /*yield*/, sessionHelpers_1.syncGroupToken(APIKey)];
                case 1:
                  _f = _g.sent();
                  _g.label = 2;
                case 2:
                  login_token = _f;
                  if (!login_token) {
                    return [
                      2 /*return*/,
                      endFlow(
                        "can't continue with SSO login, missing local session"
                      ),
                    ];
                  }
                  params['sdk'] =
                    'js_' +
                    (((_d = window.gigya.build) === null || _d === void 0
                      ? void 0
                      : _d.version) || '');
                  params['sdkBuild'] =
                    ((_e = window.gigya.build) === null || _e === void 0
                      ? void 0
                      : _e.number) || 0;
                  log.end();
                  if (scope === 'device_sso') {
                    serverParams = tslib_1.__assign(
                      { context: ssoToken, login_token: login_token },
                      params
                    );
                    window.gigya.logger.info(
                      'redirect to oidc continue with params: ',
                      serverParams
                    );
                    window.gigya.fidm.oidc.op.redirectToContinue(
                      tslib_1.__assign(
                        { opKey: window.gigya.partnerSettings.ssoKey },
                        serverParams
                      )
                    );
                  } else {
                    serverParams = {
                      ssoToken: ssoToken,
                      login_token: login_token,
                      APIKey: APIKey,
                    };
                    window.gigya.logger.info(
                      'redirect to sso.continue with params: ',
                      serverParams
                    );
                    HTTP_1.redirect(
                      'https://' +
                        window.gigya._.getApiDomain() +
                        '/accounts.sso.continue',
                      [serverParams, params],
                      'POST'
                    );
                  }
                  return [2 /*return*/];
              }
            });
          });
        }
        exports.continueSso = continueSso;
        function getSsoContext(params) {
          var _a;
          params === null || params === void 0
            ? void 0
            : params.callback(
                ((_a = window.gigya._.sso) === null || _a === void 0
                  ? void 0
                  : _a.context) || {}
              );
        }
        exports.getSsoContext = getSsoContext;
        function setSsoContext(context) {
          try {
            var urlParams = getUrlContextParams();
            var rpContext = (
              context === null || context === void 0
                ? void 0
                : context.rpContext
            )
              ? JSON.parse(context.rpContext)
              : {};
            window.gigya._.sso.context = tslib_1.__assign(
              tslib_1.__assign({}, urlParams),
              rpContext
            );
          } catch (e) {
            window.gigya.logger.report('failed to set sso context');
          }
        }
        exports.setSsoContext = setSsoContext;
        function verifySiteConfiguration() {
          var _a, _b;
          if (!window.gigya.partnerSettings.ssoKey) {
            window.gigya.logger.warn('Not in SSO Group');
            return false;
          }
          if (
            !((_b =
              (_a = window.gigya.thisScript) === null || _a === void 0
                ? void 0
                : _a.globalConf) === null || _b === void 0
              ? void 0
              : _b['storageDomainOverride'])
          ) {
            window.gigya.logger.warn(
              'Central login page must configure storageDomainOverride in webSDK Configuration'
            );
            return false;
          }
          return true;
        }
        function getUrlContextParams() {
          return new UrlParamsHelper_1.default()
            .getGigParamsFromURL()
            .removeUnacceptableParams(
              new RegExp(
                constants_1.GIGYA_INTERNAL_PARAM_PREFIX +
                  '|' +
                  constants_1.GIGYA_INTERNAL_PARAMS +
                  '|gig_ssoToken'
              )
            )
            .removePrefix()
            .toObject();
        }

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/index.ts':
      /*!*********************************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/index.ts ***!
  \*********************************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        var _this = this;
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var functions_1 = __webpack_require__(
          /*! ../../../Gigya.Js/app/Utils/functions */ './src/core/Gigya.Js/app/Utils/functions.ts'
        );
        var accountResidency_1 = __webpack_require__(
          /*! ./accountResidency */ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/accountResidency.ts'
        );
        var seamlessSSO_1 = __webpack_require__(
          /*! ./seamlessSSO */ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/seamlessSSO.ts'
        );
        var sessionHelpers_1 = __webpack_require__(
          /*! ./sessionHelpers */ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/sessionHelpers.ts'
        );
        var centralizedSSO_1 = __webpack_require__(
          /*! ./centralizedSSO */ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/centralizedSSO.ts'
        );
        functions_1.createAlias(
          'gigya.setAccountResidency',
          accountResidency_1.setAccountResidency
        );
        functions_1.createAlias(
          'gigya.setGroupContext',
          seamlessSSO_1.setGroupContext
        );
        functions_1.createAlias('gigya.setSSOToken', seamlessSSO_1.setSSOToken);
        functions_1.createAlias(
          'gigya.syncGroupGltExp',
          seamlessSSO_1.syncGroupGltExp
        );
        functions_1.createAlias('gigya.hasSession', function () {
          return tslib_1.__awaiter(_this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
              return [
                2 /*return*/,
                new gigya.Promise(function (resolve) {
                  if (!window.gigya.isReady) {
                    console.warn(
                      '**** gigya.hasSession must be called AFTER gigya service ready ****'
                    );
                    window.gigya.logger.report(
                      'Bad Implementation: gigya.hasSession'
                    );
                  }
                  window.gigya.utils.queue.queueForExecution(
                    'API',
                    function () {
                      return sessionHelpers_1.hasSession().then(resolve);
                    }
                  );
                }),
              ];
            });
          });
        });
        functions_1.createAlias(
          'gigya.sso.getContext',
          centralizedSSO_1.getSsoContext
        );
        functions_1.createAlias('gigya.sso.login', centralizedSSO_1.ssoLogin);
        functions_1.createAlias('gigya.sso.continue', function () {
          var args = [];
          for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
          }
          window.gigya.utils.queue.queueForExecution(
            'API',
            centralizedSSO_1.continueSso,
            args
          );
        });

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/seamlessSSO.ts':
      /*!***************************************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/seamlessSSO.ts ***!
  \***************************************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var SsoService_1 = __webpack_require__(
          /*! ../SsoService */ './src/core/Gigya.Js.Adapters.Web/app/SsoService.ts'
        );
        var TokenStore_1 = __webpack_require__(
          /*! ../TokenStore */ './src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts'
        );
        function setGroupContext(groupContext) {
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            var service;
            return tslib_1.__generator(this, function (_a) {
              switch (_a.label) {
                case 0:
                  return [4 /*yield*/, SsoService_1.SsoService.getInstance()];
                case 1:
                  service = _a.sent();
                  return [
                    4 /*yield*/,
                    service === null || service === void 0
                      ? void 0
                      : service.setGroupContext(groupContext),
                  ];
                case 2:
                  _a.sent();
                  return [2 /*return*/];
              }
            });
          });
        }
        exports.setGroupContext = setGroupContext;
        function setSSOToken() {
          var args = [];
          for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
          }
          return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var params, redirectURL;
            return tslib_1.__generator(this, function (_a) {
              params = window.gigya.utils.object.merge([
                window.gigya.thisScript.globalConf,
                args,
              ]);
              redirectURL = params['redirectURL'] || document.location.href;
              window.gigya.utils.HTTP.redirect(
                redirectURL,
                [{}],
                'GET',
                '_top'
              );
              return [2 /*return*/];
            });
          });
        }
        exports.setSSOToken = setSSOToken;
        function syncGroupGltExp(gltexp) {
          if (gltexp === void 0) {
            gltexp = TokenStore_1.getGltexpCookie();
          }
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            var service, res, hasChanged;
            return tslib_1.__generator(this, function (_a) {
              switch (_a.label) {
                case 0:
                  if (!window.gigya.partnerSettings.ssoKey)
                    return [2 /*return*/, gigya.Promise.resolve()];
                  return [4 /*yield*/, SsoService_1.SsoService.getInstance()];
                case 1:
                  service = _a.sent();
                  return [
                    4 /*yield*/,
                    service === null || service === void 0
                      ? void 0
                      : service.setTokenExpiration(gltexp, false),
                  ];
                case 2:
                  res = _a.sent();
                  hasChanged =
                    (res === null || res === void 0 ? void 0 : res.gltexp) !==
                    gltexp;
                  if (hasChanged) {
                    TokenStore_1.setGltexp(res.gltexp);
                  }
                  return [
                    2 /*return*/,
                    {
                      hasChanged: hasChanged,
                      oldExpiration:
                        window.gigya.utils.gltexp.getMillis(gltexp),
                      newExpiration: window.gigya.utils.gltexp.getMillis(
                        res.gltexp || gltexp
                      ),
                    },
                  ];
              }
            });
          });
        }
        exports.syncGroupGltExp = syncGroupGltExp;

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/sessionHelpers.ts':
      /*!******************************************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/sessionHelpers.ts ***!
  \******************************************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var TokenStore_1 = __webpack_require__(
          /*! ../TokenStore */ './src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts'
        );
        var GSErrors_1 = __webpack_require__(
          /*! ../../../Gigya.Js/app/GSErrors */ './src/core/Gigya.Js/app/GSErrors.ts'
        );
        var SessionService_1 = __webpack_require__(
          /*! ../../../Gigya.Js/app/Services/SessionService */ './src/core/Gigya.Js/app/Services/SessionService.ts'
        );
        var SsoService_1 = __webpack_require__(
          /*! ../SsoService */ './src/core/Gigya.Js.Adapters.Web/app/SsoService.ts'
        );
        var promise_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/promise */ './src/core/Gigya.Js/app/Utils/promise.ts'
        );
        function hasSession() {
          var _a, _b, _c, _d;
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            var log, apiKey, gltToken, response, isSessionVerified, oURLParams;
            return tslib_1.__generator(this, function (_e) {
              switch (_e.label) {
                case 0:
                  log = window.gigya.logger.group('hasSession');
                  apiKey =
                    ((_b =
                      (_a = window.gigya.thisScript) === null || _a === void 0
                        ? void 0
                        : _a.globalConf) === null || _b === void 0
                      ? void 0
                      : _b['APIKey']) ||
                    ((_c = window.gigya.thisScript) === null || _c === void 0
                      ? void 0
                      : _c.APIKey);
                  window.gigya.logger.info(
                    'checking session exist for apiKey: ' + apiKey
                  );
                  if (
                    ((_d = window.gigya.thisScript) === null || _d === void 0
                      ? void 0
                      : _d.APIKey) !== apiKey
                  ) {
                    window.gigya.logger.info(
                      'effective apiKey for checking session and the apiKey that the script was loaded with are different'
                    );
                  }
                  gltToken = TokenStore_1.get();
                  if (!(!gltToken && window.gigya.partnerSettings.ssoKey))
                    return [3 /*break*/, 2];
                  window.gigya.logger.info(
                    'SSO group, sync login token from group'
                  );
                  return [4 /*yield*/, syncGroupToken(apiKey)];
                case 1:
                  gltToken = _e.sent();
                  _e.label = 2;
                case 2:
                  if (!gltToken) return [3 /*break*/, 6];
                  if (!SessionService_1.sessionData.isSessionVerified(gltToken))
                    return [3 /*break*/, 3];
                  window.gigya.logger.info(
                    'login token exist and session is already verified, session is valid'
                  );
                  log.end();
                  return [2 /*return*/, true];
                case 3:
                  window.gigya.logger.info(
                    'login token exist and session is not verified, verifying session...'
                  );
                  return [
                    4 /*yield*/,
                    promise_1.promisify(window.gigya.accounts.verifyLogin),
                  ];
                case 4:
                  response = _e.sent();
                  isSessionVerified =
                    (response === null || response === void 0
                      ? void 0
                      : response.errorCode) == GSErrors_1.GSErrors.OK;
                  SessionService_1.sessionData.setIsSessionVerified(
                    gltToken,
                    isSessionVerified
                  );
                  window.gigya.logger.info(
                    isSessionVerified
                      ? 'session verified'
                      : 'session is not verified'
                  );
                  log.end();
                  return [2 /*return*/, isSessionVerified];
                case 5:
                  return [3 /*break*/, 7];
                case 6:
                  oURLParams = window.gigya.utils.URL.getParamsFromURL(
                    document.location.href
                  );
                  if (oURLParams['errorCode'] && oURLParams['regToken']) {
                    window.gigya.logger.info(
                      'user is returned from redirect, wait for login completion'
                    );
                    log.end();
                    return [
                      2 /*return*/,
                      new gigya.Promise(function (resolve) {
                        window.gigya.accounts.addEventHandlers({
                          onLogin: function () {
                            return resolve(true);
                          },
                        });
                      }),
                    ];
                  }
                  window.gigya.logger.info("login token doesn't exist");
                  log.end();
                  return [2 /*return*/, false];
                case 7:
                  return [2 /*return*/];
              }
            });
          });
        }
        exports.hasSession = hasSession;
        function syncGroupToken(localApiKey) {
          if (localApiKey === void 0) {
            localApiKey = window.gigya.thisScript.APIKey;
          }
          return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var service, token;
            return tslib_1.__generator(this, function (_a) {
              switch (_a.label) {
                case 0:
                  window.gigya.logger.info('sync login token from group');
                  return [4 /*yield*/, SsoService_1.SsoService.getInstance()];
                case 1:
                  service = _a.sent();
                  return [
                    4 /*yield*/,
                    service === null || service === void 0
                      ? void 0
                      : service.getToken(),
                  ];
                case 2:
                  token = _a.sent();
                  return [
                    4 /*yield*/,
                    TokenStore_1.setFromSsoResponse(token, localApiKey),
                  ];
                case 3:
                  _a.sent();
                  return [2 /*return*/, TokenStore_1.get(localApiKey)];
              }
            });
          });
        }
        exports.syncGroupToken = syncGroupToken;

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/OauthRequest.ts':
      /*!************************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/OauthRequest.ts ***!
  \************************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        /* WEBPACK VAR INJECTION */ (function (
          __webpack_provided_Object_dot_assign
        ) {
          Object.defineProperty(exports, '__esModule', { value: true });
          var tslib_1 = __webpack_require__(
            /*! tslib */ '../node_modules/tslib/tslib.es6.js'
          );
          var BaseRequest_1 = __webpack_require__(
            /*! src/core/Gigya.Js.Adapters.Web/app/BaseRequest */ './src/core/Gigya.Js.Adapters.Web/app/BaseRequest.ts'
          );
          var IApiAdapter_1 = __webpack_require__(
            /*! src/core/Gigya.Js/interfaces/IApiAdapter */ './src/core/Gigya.Js/interfaces/IApiAdapter.ts'
          );
          var FlagService_1 = __webpack_require__(
            /*! src/core/Gigya.Js/app/Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
          );
          var linkAccountsHelper_1 = __webpack_require__(
            /*! ../../Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper */ './src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts'
          );
          var REDIRECT_ONLY_PROVIDERS = ['twitter'];
          var OauthRequest = /** @class */ (function (_super) {
            tslib_1.__extends(OauthRequest, _super);
            function OauthRequest(
              id,
              baseUrl,
              methodName,
              params,
              callback,
              settings
            ) {
              if (settings === void 0) {
                settings = {};
              }
              var _this =
                _super.call(this, baseUrl, methodName, params, settings) ||
                this;
              _this.id = id;
              _this.baseUrl = baseUrl;
              _this.methodName = methodName;
              _this.params = params;
              _this.callback = callback;
              _this.settings = settings;
              _this.windowName =
                _this.methodName.replace(/\./g, '_').replace(/\//g, '') +
                '_' +
                new Date().getTime();
              _this.requestID = _this.windowName + new Date().getTime();
              return _this;
            }
            OauthRequest.prototype.beforeRequest = function () {};
            OauthRequest.prototype.afterResponse = function (response) {
              if (!response['dontClose'] || response['dontClose'] === 'false') {
                window.gigya.utils.win.close(this.windowName);
              }
              this.callback(response);
            };
            OauthRequest.prototype.getAuthFlow = function () {
              // Force authFlow redirect on Windows Phone.
              if (
                window.gigya.localInfo.isWindowsPhone ||
                window.gigya.localInfo.isFacebookBrowser
              ) {
                return 'redirect';
              }
              if (this.enforceRedirectForSocial) {
                return 'redirect';
              }
              return this.params['authFlow']
                ? this.params['authFlow']
                : 'popup';
            };
            OauthRequest.prototype.getServerParamsString = function (provider) {
              return tslib_1.__awaiter(
                this,
                void 0,
                gigya.Promise,
                function () {
                  var serverParams, gmidTicket, urlParams;
                  return tslib_1.__generator(this, function (_a) {
                    switch (_a.label) {
                      case 0:
                        serverParams = this.getServerParams();
                        serverParams['state'] = this.getState(
                          this.requestID,
                          this.methodName,
                          this.getAuthFlow()
                        );
                        if (
                          this.settings.oauthMode ===
                          IApiAdapter_1.OAuthMode.Sso
                        ) {
                          delete serverParams['context']; // already included in state param
                          if (
                            this.getAuthFlow() != 'redirect' &&
                            serverParams['redirectURL']
                          ) {
                            window.gigya.logger.warn(
                              'redirectURL is valid only for "Redirect" auth flow'
                            );
                          }
                        }
                        window.gigya.utils.object.add(
                          serverParams,
                          this.getAuthParams()
                        );
                        return [
                          4 /*yield*/,
                          window.gigya._.apiAdapter.getGmidTicket(),
                        ];
                      case 1:
                        gmidTicket = _a.sent();
                        if (gmidTicket) {
                          serverParams['gmidTicket'] = gmidTicket;
                        }
                        this.sentLoginToken = serverParams['login_token'];
                        urlParams = window.gigya.utils.URL.getParamsFromURL(
                          window.location.href
                        );
                        if (
                          urlParams['scope'] === 'device_sso' &&
                          (provider === null || provider === void 0
                            ? void 0
                            : provider.name) === 'line'
                        ) {
                          serverParams['x_forceAuthentication'] = true;
                        }
                        return [
                          2 /*return*/,
                          window.gigya.utils.keyValue.serialize(serverParams),
                        ];
                    }
                  });
                }
              );
            };
            OauthRequest.prototype.sendAction = function () {
              return tslib_1.__awaiter(
                this,
                void 0,
                gigya.Promise,
                function () {
                  var provider,
                    serverParamsQuerystring,
                    windowOptions,
                    methodNameSplit,
                    methodName,
                    fullUrl;
                  var _this = this;
                  return tslib_1.__generator(this, function (_a) {
                    switch (_a.label) {
                      case 0:
                        this.beforeRequest();
                        if (this.params['provider']) {
                          provider = window.gigya.socialize._getProviderByName(
                            this.params['provider']
                          );
                        }
                        return [
                          4 /*yield*/,
                          this.getServerParamsString(provider),
                        ];
                      case 1:
                        serverParamsQuerystring = _a.sent();
                        windowOptions = {
                          menubar: 0,
                          resizable: 1,
                          scrollbars: 1,
                          width: provider ? provider.width : undefined,
                          height: provider ? provider.height : undefined,
                        };
                        if (this.params['enablePopupLocation']) {
                          windowOptions.location = 1;
                          windowOptions.toolbar = 1;
                        } else {
                          windowOptions.toolbar = 0;
                        }
                        methodNameSplit = this.methodName.split('.');
                        methodName =
                          this.params['originalMethodName'] ||
                          methodNameSplit[methodNameSplit.length - 1];
                        window.gigya.legacyReports.report(
                          methodName,
                          this.params['APIKey'],
                          this.params['cid'],
                          this.params['source'],
                          this.params['sourceData'],
                          {
                            sn: provider ? provider.toString() : null,
                          }
                        );
                        fullUrl = this.getUrl() + '?' + serverParamsQuerystring;
                        if (this.getAuthFlow() === 'redirect') {
                          window.gigya._.WindowProvider.top().document.location.href =
                            fullUrl;
                        } else {
                          window.gigya.utils.xd.addMessageListener(
                            this.requestID,
                            this.params,
                            true,
                            function (response) {
                              _this.afterResponse(response);
                            }
                          );
                          window.gigya.utils.win.open(
                            fullUrl,
                            this.windowName,
                            windowOptions
                          );
                        }
                        return [2 /*return*/];
                    }
                  });
                }
              );
            };
            Object.defineProperty(OauthRequest.prototype, 'domain', {
              get: function () {
                return document.location.href.split('?')[0].split('#')[0];
              },
              enumerable: true,
              configurable: true,
            });
            OauthRequest.prototype.getServerParams = function () {
              var _a;
              switch (
                (_a = this.settings) === null || _a === void 0
                  ? void 0
                  : _a.oauthMode
              ) {
                case IApiAdapter_1.OAuthMode.Sso:
                  return this._normalizeParamsForSSO();
                case IApiAdapter_1.OAuthMode.Social:
                default:
                  return this._normalizeParamsForSocial();
              }
            };
            OauthRequest.prototype.getState = function (
              requestID,
              methodName,
              authFlow
            ) {
              var _a;
              switch (
                (_a = this.settings) === null || _a === void 0
                  ? void 0
                  : _a.oauthMode
              ) {
                case IApiAdapter_1.OAuthMode.Sso:
                  return this._createSSOStateParam(
                    requestID,
                    methodName,
                    authFlow
                  );
                case IApiAdapter_1.OAuthMode.Social:
                default:
                  return this._createSocialStateParam(
                    requestID,
                    methodName,
                    authFlow
                  );
              }
            };
            OauthRequest.prototype._normalizeParamsForSSO = function () {
              return __webpack_provided_Object_dot_assign(
                {
                  APIKey: window.gigya.apiKey,
                  redirectURL: window.top.document.location.href,
                },
                this.params
              );
            };
            OauthRequest.prototype._normalizeParamsForSocial = function () {
              var serverParams = {};
              for (var paramName in this.params) {
                if (
                  paramName.indexOf('x_') !== 0 &&
                  this.params[paramName] != null
                ) {
                  serverParams['x_' + paramName] = this.params[paramName];
                  delete serverParams[paramName];
                }
              }
              if (serverParams['x_APIKey']) {
                serverParams['client_id'] = serverParams['x_APIKey'];
                delete serverParams['x_APIKey'];
              }
              if (serverParams['x_oauth_token']) {
                serverParams['oauth_token'] = serverParams['x_oauth_token'];
                delete serverParams['x_oauth_token'];
              }
              serverParams['redirect_uri'] = '/GS/AfterLogin.aspx';
              serverParams['response_type'] = this.params['authCodeOnly']
                ? 'code'
                : 'server_token';
              serverParams['x_sdk'] = 'js_' + window.gigya.build.version;
              if (FlagService_1.FlagService.enforceAuthFlowRedirectForSocial) {
                serverParams['x_authFlow'] = this.getAuthFlow();
              }
              var refUID = window.gigya.utils.cookie.get(
                '_gigRefUid_' + this.params['APIKey']
              );
              if (refUID) {
                serverParams['x_refUID'] = refUID;
              }
              delete serverParams['redirectURL']; // we don't need it since it's passed in state params
              return serverParams;
            };
            OauthRequest.prototype._createSSOStateParam = function (
              requestID,
              methodName,
              authFlow
            ) {
              var state = this._state;
              state['id'] = requestID;
              state['context'] = this.params['context'] || {};
              state['gig_actions'] = 'sso.login';
              state['authFlow'] = authFlow || 'redirect';
              return decodeURIComponent(JSON.stringify(state));
            };
            OauthRequest.prototype._createSocialStateParam = function (
              requestID,
              methodName,
              authFlow
            ) {
              var state = this._state;
              state['id'] = requestID;
              if (authFlow === 'redirect') {
                var sourceURL =
                  window.gigya._.WindowProvider.top().document.location.href;
                state['sourceURL'] = sourceURL;
                if (this.params['redirectURL']) {
                  state['redirectURL'] = window.gigya.utils.URL.addParamsToURL(
                    this.params['redirectURL'],
                    {
                      gig_events:
                        window.gigya.events.global.getEventsForOperation(
                          methodName
                        ),
                    }
                  );
                  if (this.params['redirectMethod']) {
                    state['redirectMethod'] = this.params['redirectMethod'];
                  }
                  // See #46301 - addUserInfo must only be passed when the user explictly passes a redirectURL.
                  state['addUserInfo'] = true;
                } else {
                  state['sourceURL'] = window.gigya.utils.URL.addParamsToURL(
                    state['sourceURL'],
                    {
                      gig_events:
                        window.gigya.events.global.getEventsForOperation(
                          methodName
                        ),
                    }
                  );
                }
                if (this.isLinkAccountsV2Flow(sourceURL)) {
                  state[
                    linkAccountsHelper_1.LinkAccountsWithRedirectParam.Provider
                  ] = this.extractProviderSessionForLinkAccounts(sourceURL);
                }
              }
              if (
                this.params['provider'] &&
                this.params['provider'].toLowerCase() == 'facebook'
              ) {
                state['invite'] = this.params['invite'];
              }
              return window.gigya.utils.keyValue.serialize(state);
            };
            Object.defineProperty(OauthRequest.prototype, '_messagingMethod', {
              get: function () {
                if (window.gigya.localInfo.isIE11 && window.indexedDB) {
                  return window.gigya._.MessagingMethod.LocalStorageListener;
                }
                // [#67641] - https://gigya.tpondemand.com/entity/67641-loccitane-social-login-to-line-hangs
                // if provider is Line, use LocalStorageListener because if Line's native app is installed on the device
                // it may "hijack" (deep-link) the OAuth request and prevent the PostMessage mechanism from working.
                if (
                  window.gigya.localInfo.isAndroid &&
                  this.params['provider'] &&
                  this.params['provider'].toLowerCase() == 'line'
                ) {
                  return window.gigya._.MessagingMethod.LocalStorageListener;
                }
                return window.gigya.localInfo.messagingMethod;
              },
              enumerable: true,
              configurable: true,
            });
            Object.defineProperty(OauthRequest.prototype, '_lid', {
              get: function () {
                if (
                  (window.gigya.thisScript.globalConf[
                    'legacyCrossSiteMethod'
                  ] &&
                    window.gigya.thisScript.globalConf[
                      'legacyCrossSiteMethod'
                    ].toLowerCase() !== 'localstorage') ||
                  (window.gigya.localInfo.isIE &&
                    window.navigator['msDoNotTrack'])
                ) {
                  return (
                    window.gigya.thisScript.globalConf[
                      'legacyCrossSiteMethod'
                    ] +
                    ':' +
                    window.gigya.utils.xd._flashListenerID
                  );
                }
                return window.gigya.utils.xd._flashListenerID;
              },
              enumerable: true,
              configurable: true,
            });
            Object.defineProperty(OauthRequest.prototype, '_state', {
              get: function () {
                return {
                  domain: this._domain,
                  lid: this._lid,
                  messaging: this._messagingMethod,
                };
              },
              enumerable: true,
              configurable: true,
            });
            Object.defineProperty(OauthRequest.prototype, '_domain', {
              get: function () {
                return document.location.href.split('?')[0].split('#')[0];
              },
              enumerable: true,
              configurable: true,
            });
            Object.defineProperty(
              OauthRequest.prototype,
              'enforceRedirectForSocial',
              {
                get: function () {
                  return (
                    FlagService_1.FlagService
                      .enforceAuthFlowRedirectForSocial &&
                    window.gigya.utils.array.includes(
                      REDIRECT_ONLY_PROVIDERS,
                      this.params['provider']
                    )
                  );
                },
                enumerable: true,
                configurable: true,
              }
            );
            OauthRequest.prototype.isLinkAccountsV2Flow = function (url) {
              var _a = window.gigya.utils.URL.getParamsFromURL(url) || {},
                errorCode = _a.errorCode,
                restParams = tslib_1.__rest(_a, ['errorCode']);
              return (
                linkAccountsHelper_1.isLinkAccountsV2Interruption(errorCode) &&
                linkAccountsHelper_1.isProviderSessionValid(restParams)
              );
            };
            OauthRequest.prototype.extractProviderSessionForLinkAccounts =
              function (sourceURL) {
                var params = window.gigya.utils.URL.getParamsFromURL(sourceURL);
                var providerSession =
                  linkAccountsHelper_1.getProviderSessionFromParams(params);
                return window.gigya.utils.JSON.serialize(providerSession);
              };
            return OauthRequest;
          })(BaseRequest_1.BaseRequest);
          exports.OauthRequest = OauthRequest;

          /* WEBPACK VAR INJECTION */
        }).call(
          this,
          __webpack_require__(
            /*! tslib */ '../node_modules/tslib/tslib.es6.js'
          )['__assign']
        );

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/SsoService.ts':
      /*!**********************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/SsoService.ts ***!
  \**********************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var sso_1 = __webpack_require__(
          /*! src/fidm/Gigya.JS.SSO/app/sso */ './src/fidm/Gigya.JS.SSO/app/sso.ts'
        );
        var domains_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Utils/domains */ './src/core/Gigya.Js/app/Utils/domains.ts'
        );
        var utils_1 = __webpack_require__(
          /*! ../../ServiceProxy/utils */ './src/core/ServiceProxy/utils.ts'
        );
        var FlagService_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        var ServiceProxy_1 = __webpack_require__(
          /*! ../../ServiceProxy/ServiceProxy */ './src/core/ServiceProxy/ServiceProxy.ts'
        );
        // ### Single Sign On across multiple domains ###
        var callbackCounter = 0;
        exports._requestTimeout = 3000;
        var SsoService = /** @class */ (function () {
          function SsoService() {}
          SsoService.getInstance = function (ssoKey) {
            if (ssoKey === void 0) {
              ssoKey = window.gigya.partnerSettings.ssoKey;
            }
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var qs, url, ssoAdapter, error_1;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    if (!!this._instance) return [3 /*break*/, 7];
                    if (!!ssoKey) return [3 /*break*/, 1];
                    return [2 /*return*/, null];
                  case 1:
                    if (!FlagService_1.FlagService.loadSsoFrameOnlyOnce)
                      return [3 /*break*/, 6];
                    qs = window.gigya.utils.keyValue.serialize({
                      APIKey: ssoKey,
                      version: window.gigya.build.version,
                      build: window.gigya.build.number || -1,
                      sourceKey: window.gigya.thisScript.APIKey,
                      oneFrame: true,
                      origin:
                        window.gigya.localInfo.protocol +
                        '://' +
                        document.location.hostname,
                      ssoSegment: window.gigya.partnerSettings.ssoSegment || '',
                    });
                    url =
                      'https://' +
                      domains_1.getStorageDomain() +
                      '/gs/sso.htm?' +
                      qs;
                    _a.label = 2;
                  case 2:
                    _a.trys.push([2, 4, , 5]);
                    ssoAdapter = new ServiceProxy_1.ServiceProxy(url);
                    return [4 /*yield*/, ssoAdapter.init('SSO')];
                  case 3:
                    _a.sent();
                    this._instance = ssoAdapter.wrapWith(sso_1.Sso);
                    return [3 /*break*/, 5];
                  case 4:
                    error_1 = _a.sent();
                    window.gigya.logger.error('error initialize sso frame', {
                      scope: 'SsoService.init',
                      error: error_1,
                    });
                    this._instance = new SsoService();
                    return [3 /*break*/, 5];
                  case 5:
                    return [3 /*break*/, 7];
                  case 6:
                    this._instance = new SsoService();
                    _a.label = 7;
                  case 7:
                    return [2 /*return*/, this._instance];
                }
              });
            });
          };
          SsoService.prototype.checkTokenRenew = function (loginToken) {
            return new gigya.Promise(function (resolve) {
              checkTokenRenew({ loginToken: loginToken, callback: resolve });
            });
          };
          SsoService.prototype.getToken = function () {
            return new gigya.Promise(function (resolve) {
              getGroupToken({ callback: resolve });
            });
          };
          SsoService.prototype.getTokenExpiration = function () {
            return new gigya.Promise(function (resolve) {
              getLoginTokenExp({
                callback: resolve,
              });
            });
          };
          SsoService.prototype.logout = function () {
            return new gigya.Promise(function (resolve) {
              logout({
                callback: resolve,
              });
            });
          };
          SsoService.prototype.removeToken = function () {
            return new gigya.Promise(function (resolve) {
              removeGroupToken({ callback: resolve });
            });
          };
          SsoService.prototype.setGroupContext = function (groupContext) {
            return new gigya.Promise(function (resolve) {
              setGroupContextCookie({
                groupContext: groupContext,
                callback: resolve,
              });
            });
          };
          SsoService.prototype.setToken = function (lt, expiration, gltexp) {
            return new gigya.Promise(function (resolve) {
              setGroupToken({
                lt: lt,
                expiration: expiration,
                gltexp: gltexp,
                callback: resolve,
              });
            });
          };
          SsoService.prototype.setTokenExpiration = function (
            loginTokenExp,
            useCache
          ) {
            if (useCache === void 0) {
              useCache = true;
            }
            return new gigya.Promise(function (resolve) {
              setLoginTokenExp(
                {
                  loginTokenExp: loginTokenExp,
                  callback: resolve,
                },
                useCache
              );
            });
          };
          SsoService.prototype.syncCanaryIndication = function (
            isCanary,
            canaryVersion
          ) {
            return new gigya.Promise(function (resolve) {
              syncCanaryIndication({
                isCanary: isCanary,
                canaryVersion: canaryVersion,
                callback: resolve,
              });
            });
          };
          SsoService.prototype.getGroupApiDomain = function () {
            return new gigya.Promise(function (resolve) {
              getGroupApiDomain({ callback: resolve });
            });
          };
          SsoService.prototype.setGroupApiDomain = function (domain) {
            return new gigya.Promise(function (resolve) {
              setGroupApiDomain({ callback: resolve, domain: domain });
            });
          };
          return SsoService;
        })();
        exports.SsoService = SsoService;
        function _request(mode, p) {
          if (!window.gigya.partnerSettings.ssoKey) {
            if (p && p.callback) {
              p.callback({});
            }
            return;
          }
          var params;
          if (!p) {
            params = {};
          } else {
            // Ensure the params passed are not modified by reference.
            params = window.gigya.utils.object.clone(p);
          }
          var ifr;
          var requestTimeoutId;
          var callback = function (response) {
            window.gigya.logger.debug('cleaning sso iframe');
            // cleanup iframe
            ifr.parentNode.removeChild(ifr);
            clearTimeout(requestTimeoutId);
            // Typecast response.
            if (response) {
              if (
                response.errorCode &&
                typeof response.errorCode === 'string'
              ) {
                response.errorCode = Number(response.errorCode);
              }
              if (
                response.expires_in &&
                typeof response.expires_in === 'string'
              ) {
                response.expires_in = Number(response.expires_in);
              }
            }
            if (p && p.callback) {
              p.callback(response);
            }
          };
          params.m = mode;
          params.d =
            window.gigya.localInfo.protocol +
            '://' +
            document.location.hostname;
          if (document.location.port) {
            params.d += ':' + document.location.port;
          }
          // Chrome caches the fragment when loaded for the first time. workaround:
          params.callbackID =
            'gig_sso_cb' + new Date().getTime() + '_' + callbackCounter++;
          params.sAPIKey = window.gigya.thisScript.APIKey;
          params[window.gigya.logger.configKey] = JSON.stringify(
            window.gigya.logger.getConfig()
          );
          var fragment = window.gigya.utils.keyValue.serialize(params);
          var iframeLoader = function (retries) {
            if (retries === void 0) {
              retries = 0;
            }
            window.gigya.utils.xd.addMessageListener(
              params.callbackID,
              {},
              false,
              callback,
              window.gigya._.MessagingMethod.PostMessage
            );
            ifr = _getIframe(params.callbackID);
            var fnOnLoad = function () {
              requestTimeoutId = setTimeout(function () {
                // total failure
                if (retries <= 0) {
                  window.gigya.logger.error('SSO Communication Timeout', {
                    IE11PrivateMode:
                      window.gigya.localInfo.isIE11 && !window.indexedDB,
                    mode: mode,
                  });
                  return;
                }
                // reset
                window.gigya.utils.xd.removeMessageListener(params.callbackID);
                window.gigya.utils.DOM.removeElement(ifr);
                // retry
                iframeLoader(retries - 1);
              }, exports._requestTimeout);
              var qs = window.gigya.utils.keyValue.serialize({
                APIKey: window.gigya.partnerSettings.ssoKey,
                ssoSegment: window.gigya.partnerSettings.ssoSegment || '',
                version: window.gigya.build.version,
                build: window.gigya.build.number || -1,
              });
              // should always load from gigya's domain except when overriden for #50261.
              ifr.src =
                'https://' +
                domains_1.getStorageDomain() +
                '/gs/sso.htm?' +
                qs +
                '#' +
                fragment;
              window.gigya.utils.DOM.removeEventListener(ifr, 'load', fnOnLoad);
            };
            window.gigya.utils.DOM.addEventListener(ifr, 'load', fnOnLoad);
            window.gigya.logger.debug('opening sso iframe', params);
            if (document.body) {
              window.gigya.utils.DOM.appendToBody(ifr);
            } else {
              window.gigya.utils.functions.invokeOnPageLoad(function () {
                return window.gigya.utils.DOM.appendToBody(ifr);
              });
            }
          };
          iframeLoader(3);
        }
        exports._request = _request;
        function _getIframe(requestId) {
          var ifr;
          if (FlagService_1.FlagService.hideSSOFrame) {
            ifr = utils_1.createIframe('SSO Frame');
          } else {
            ifr = document.createElement('iframe');
            // Absolute position with -1000px causes scrolling slowdowns on mobile devices.
            if (
              window.gigya.localInfo.isIOS ||
              window.gigya.localInfo.isIOSChrome ||
              window.gigya.localInfo.isAndroid
            ) {
              ifr.style.width = '0px';
              ifr.style.height = '0px';
              ifr.style.display = 'none';
            } else {
              ifr.style.width = '30px';
              ifr.style.height = '10px';
              ifr.style.position = 'absolute';
              ifr.style.top = '-1000px';
              ifr.style.left = '-1000px';
            }
          }
          ifr.id = 'gig_sso_' + requestId;
          window.gigya.utils.functions.addSrcToIFrameIfNeeded(ifr);
          return ifr;
        }
        function getGroupToken(params) {
          window.gigya.logger.info('trying to get sso group login token');
          _request('getToken', {
            callback: function (response) {
              exports._storedLoginTokenExp = response.gltexp;
              if (params && params.callback) {
                params.callback(response);
              }
            },
          });
        }
        exports.getGroupToken = getGroupToken;
        function setGroupToken(params) {
          // Add current gltexp cookie to the parameters automatically.
          if (!params.gltexp) {
            params.gltexp = window.gigya.utils.cookie.get(
              'gltexp_' + window.gigya.thisScript.APIKey
            );
          }
          _request('setToken', params);
        }
        exports.setGroupToken = setGroupToken;
        function logout(params) {
          _request('logout', params);
        }
        exports.logout = logout;
        function removeGroupToken(params) {
          _request('removeToken', params);
        }
        exports.removeGroupToken = removeGroupToken;
        function setLoginTokenExp(params, useCache) {
          if (useCache === void 0) {
            useCache = true;
          }
          // Don't store the login token again if we've already stored it.
          if (
            useCache &&
            exports._storedLoginTokenExp &&
            params.loginTokenExp === exports._storedLoginTokenExp
          ) {
            if (params.callback) {
              params.callback({ gltexp: exports._storedLoginTokenExp });
            }
            return;
          }
          exports._storedLoginTokenExp = params.loginTokenExp;
          _request('setLoginTokenExp', params);
        }
        exports.setLoginTokenExp = setLoginTokenExp;
        function getLoginTokenExp(params) {
          _request('getLoginTokenExp', params);
        }
        exports.getLoginTokenExp = getLoginTokenExp;
        function checkTokenRenew(params) {
          window.gigya.logger.info('verifying login token with sso group');
          _request('checkTokenRenew', params);
        }
        exports.checkTokenRenew = checkTokenRenew;
        function syncCanaryIndication(params) {
          _request('syncCanaryIndication', params);
        }
        exports.syncCanaryIndication = syncCanaryIndication;
        function setGroupContextCookie(params) {
          _request('setGroupContext', params);
        }
        exports.setGroupContextCookie = setGroupContextCookie;
        function setGroupApiDomain(params) {
          _request('setGroupApiDomain', params);
        }
        exports.setGroupApiDomain = setGroupApiDomain;
        function getGroupApiDomain(params) {
          _request('getGroupApiDomain', params);
        }
        exports.getGroupApiDomain = getGroupApiDomain;

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts':
      /*!**********************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts ***!
  \**********************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var SsoService_1 = __webpack_require__(
          /*! src/core/Gigya.Js.Adapters.Web/app/SsoService */ './src/core/Gigya.Js.Adapters.Web/app/SsoService.ts'
        );
        var GSErrors_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/GSErrors */ './src/core/Gigya.Js/app/GSErrors.ts'
        );
        var SessionService_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Services/SessionService */ './src/core/Gigya.Js/app/Services/SessionService.ts'
        );
        var FlagService_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        // Load and save tokens based on API keys
        var _curSessionExpiration;
        var _bearerToken = null;
        var _triedGACs = {};
        exports.activeNamespaces = {};
        function isValidGltExp(gltexp) {
          if (gltexp === void 0) {
            gltexp = getGltexpCookie();
          }
          return !gltexp || window.gigya.utils.gltexp.isValid(gltexp);
        }
        exports.isValidGltExp = isValidGltExp;
        function getGltexpCookie(APIKey) {
          if (APIKey === void 0) {
            APIKey = window.gigya.thisScript.APIKey;
          }
          return window.gigya.utils.cookie.get(getGltCookieKey(APIKey));
        }
        exports.getGltexpCookie = getGltexpCookie;
        function setGltexp(gltexp, APIKey) {
          if (APIKey === void 0) {
            APIKey = window.gigya.thisScript.APIKey;
          }
          if (gltexp && !isGigyaCookieDomain()) {
            window.gigya.utils.cookie.remove(getGltCookieKey(APIKey));
            if (FlagService_1.FlagService.setCookieSameSiteLaxSession) {
              window.gigya.utils.cookie.set(
                getGltCookieKey(APIKey),
                gltexp,
                null,
                null,
                null,
                'Lax'
              );
            } else {
              window.gigya.utils.cookie.set(getGltCookieKey(APIKey), gltexp);
            }
          }
        }
        exports.setGltexp = setGltexp;
        function getGltCookieKey(APIKey) {
          return 'gltexp_' + APIKey;
        }
        function _getTokenCookieName(APIKey) {
          if (APIKey === void 0) {
            APIKey = window.gigya.thisScript.APIKey;
          }
          if (APIKey) {
            return 'glt_' + APIKey;
          } else {
            return '_gig_lt';
          }
        }
        function get(APIKey) {
          if (APIKey === void 0) {
            APIKey = window.gigya.thisScript.APIKey;
          }
          var lt = window.gigya.utils.cookie.get(_getTokenCookieName(APIKey));
          if (lt) {
            return lt.split('|')[0];
          } else {
            return null;
          }
        }
        exports.get = get;
        function set(APIKey, login_token, expires_in, sessionExpiration) {
          window.gigya.utils.localStorage.removeItem('gigyaSettings');
          window.gigya.logger.info('setting a new login token');
          if (!APIKey) {
            APIKey = window.gigya.thisScript.APIKey;
          }
          if (APIKey) {
            if (FlagService_1.FlagService.setCookieSameSiteLaxSession) {
              window.gigya.utils.cookie.set(
                'glt_' + APIKey,
                login_token,
                expires_in,
                null,
                null,
                'Lax'
              );
            } else {
              window.gigya.utils.cookie.set(
                'glt_' + APIKey,
                login_token,
                expires_in
              );
            }
            window.gigya.utils.cookie.remove('gac_' + APIKey);
          } else {
            if (FlagService_1.FlagService.setCookieSameSiteLaxSession) {
              window.gigya.utils.cookie.set(
                '_gig_lt',
                login_token,
                expires_in,
                null,
                null,
                'Lax'
              );
            } else {
              window.gigya.utils.cookie.set('_gig_lt', login_token, expires_in);
            }
          }
          _curSessionExpiration = sessionExpiration;
        }
        exports.set = set;
        function getCurrentSessionExpiration() {
          return _curSessionExpiration;
        }
        exports.getCurrentSessionExpiration = getCurrentSessionExpiration;
        function getGACCookie() {
          return (
            window.gigya.thisScript.APIKey &&
            window.gigya.utils.cookie.get(
              'gac_' + window.gigya.thisScript.APIKey
            )
          );
        }
        exports.getGACCookie = getGACCookie;
        function setFromAuthCode(authCode) {
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
              return [
                2 /*return*/,
                new gigya.Promise(function (resolve) {
                  setFromGAC({}, resolve, authCode);
                }),
              ];
            });
          });
        }
        exports.setFromAuthCode = setFromAuthCode;
        function setFromGAC(params, callback, gac) {
          if (gac === void 0) {
            gac = getGACCookie();
          }
          if (window.gigya.thisScript.APIKey) {
            if (gac && !params['neverTryGAC']) {
              // Sometimes gac is set with surrounding double-quotes (like in java). Strip quotes.
              if (gac.charAt(0) === '"' && gac.charAt(gac.length - 1) === '"') {
                gac = gac.substring(1, gac.length - 1);
              }
              if (_triedGACs[gac]) {
                callback(); // Already tried, don't try again.
                return;
              }
              _triedGACs[gac] = true;
              window.gigya.socialize.updateRefUID();
              window.gigya.socialize.notifyLogin(
                {
                  ignoreApiQueue: true,
                  neverTryGAC: true,
                  authCode: gac,
                  APIKey: window.gigya.thisScript.APIKey,
                  client_id: window.gigya.thisScript.APIKey,
                },
                {
                  // Intentionally we're not raising onLogin event, as no login was made, just established (verified in bug 43419).
                  callback: function () {
                    window.gigya.utils.cookie.remove(
                      'gac_' + window.gigya.thisScript.APIKey
                    );
                    callback();
                    // neverTryGAC is used to avoid trying setFromGac forever if the cookie wasn't removed (when a wrong baseDomain is used)
                    window.gigya.socialize.refreshUI({
                      neverTryGAC: true,
                    });
                  },
                }
              );
            } else {
              callback();
            }
          } else {
            callback();
          }
        }
        exports.setFromGAC = setFromGAC;
        function setFromSsoResponse(res, APIKey) {
          if (APIKey === void 0) {
            APIKey = window.gigya.thisScript.APIKey;
          }
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
              return [
                2 /*return*/,
                new gigya.Promise(function (resolve) {
                  return tslib_1.__awaiter(_this, void 0, void 0, function () {
                    var _a, expires_in, groupContext, gltexpCookieName;
                    return tslib_1.__generator(this, function (_b) {
                      switch (_b.label) {
                        case 0:
                          if (!res) return [2 /*return*/];
                          _a = res.errorCode;
                          switch (_a) {
                            case GSErrors_1.GSErrors.UNAUTHORIZED_USER:
                              return [3 /*break*/, 1];
                            case GSErrors_1.GSErrors.INVALID_TOKEN:
                              return [3 /*break*/, 2];
                            case GSErrors_1.GSErrors.TOKEN_HAS_RENEWED:
                              return [3 /*break*/, 3];
                            case GSErrors_1.GSErrors.OK:
                              return [3 /*break*/, 3];
                            case GSErrors_1.GSErrors.NETWORK_ERROR:
                              return [3 /*break*/, 5];
                          }
                          return [3 /*break*/, 6];
                        case 1:
                          window.gigya.logger.info('no group session found');
                          remove(APIKey);
                          return [3 /*break*/, 7];
                        case 2:
                          window.gigya.logger.info(
                            'existing group session was revoked'
                          );
                          remove(APIKey);
                          window.gigya.events.global.dispatchWhenHandlerAdded({
                            eventName: 'accounts.logout',
                          });
                          window.gigya.events.global.dispatchWhenHandlerAdded({
                            eventName: 'logout',
                          });
                          return [3 /*break*/, 7];
                        case 3:
                          if (!res.login_token) return [2 /*return*/];
                          window.gigya.logger.info('new session from group');
                          expires_in = void 0;
                          groupContext = void 0;
                          if (res.groupContext) {
                            groupContext = JSON.parse(res.groupContext);
                          }
                          if (!isGigyaCookieDomain()) {
                            // It should never expire if a gltexp is present.
                            expires_in = !res.gltexp
                              ? res.expires_in
                              : window.gigya.utils.cookie.getInfiniteExpirationTimeInSeconds();
                            // Set login token cookie
                            set(APIKey, res.login_token, expires_in);
                            gltexpCookieName = 'gltexp_' + APIKey;
                            if (
                              res.gltexp &&
                              !window.gigya.utils.cookie.get(gltexpCookieName)
                            ) {
                              window.gigya.utils.cookie.set(
                                gltexpCookieName,
                                res.gltexp
                              );
                            }
                          }
                          return [
                            4 /*yield*/,
                            dispatchLoginEvent({
                              expires_in: expires_in,
                              groupContext: groupContext,
                            }),
                          ];
                        case 4:
                          _b.sent();
                          return [3 /*break*/, 7];
                        case 5:
                          window.gigya.logger.error(
                            'gigya: error loading sso frame',
                            { res: res }
                          );
                          window.gigya.events.global.dispatchWhenHandlersAdded(
                            ['accounts.error', 'socialize.error'],
                            res
                          );
                          return [3 /*break*/, 7];
                        case 6:
                          window.gigya.logger.error(
                            'sso: unsupported response'
                          );
                          throw 'gigya: unsupported response from sso';
                        case 7:
                          resolve();
                          return [2 /*return*/];
                      }
                    });
                  });
                }),
              ];
            });
          });
        }
        exports.setFromSsoResponse = setFromSsoResponse;
        function dispatchLoginEvent(eventParams) {
          if (eventParams === void 0) {
            eventParams = {};
          }
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            var _this = this;
            return tslib_1.__generator(this, function (_a) {
              return [
                2 /*return*/,
                new gigya.Promise(function (resolve) {
                  window.gigya.utils.queue.hold('verifyLogin', 'API');
                  window.gigya.accounts.verifyLogin({
                    ignoreApiQueue: true,
                    suppressLoginEvent: true,
                    include:
                      window.gigya.utils.stringUtils.mergeCommaSeparatedValues(
                        'profile,data',
                        window.gigya.thisScript.globalConf['include']
                      ),
                    extraProfileFields: 'samlData',
                    callback: function (accountInfoRes) {
                      window.gigya.utils.queue.release('verifyLogin', 'API'); // release the api queue
                      SessionService_1.sessionData.setIsSessionVerified(
                        get(),
                        accountInfoRes.errorCode == GSErrors_1.GSErrors.OK
                      );
                      // use whatever field you need from accountInfoRes now before accountInfoRes will be overridden (such as 'source')
                      var source = accountInfoRes.source;
                      window.gigya.events.global.dispatchWhenHandlerAdded(
                        { eventName: 'socialize.login' },
                        null,
                        function (eventObj, callback) {
                          if (!eventObj) {
                            eventObj = {};
                          }
                          eventObj = window.gigya.utils.object.merge([
                            eventObj,
                            eventParams,
                          ]);
                          if (
                            accountInfoRes.errorCode == GSErrors_1.GSErrors.OK
                          ) {
                            window.gigya.socialize.getUserInfo({
                              signIDs: true,
                              extraFields: 'samlData',
                              callback: function (userInfoRes) {
                                if (
                                  userInfoRes.errorCode ==
                                  GSErrors_1.GSErrors.OK
                                ) {
                                  eventObj = window.gigya._.addUserInfoToEvent(
                                    userInfoRes,
                                    { eventName: 'login' },
                                    true
                                  );
                                  // normalizing event fields for backwards compatibility
                                  eventObj['source'] = source;
                                  eventObj['newUser'] = false;
                                  eventObj['provider'] = 'site';
                                  eventObj['loginMode'] = 'standard';
                                  if (eventObj['user']) {
                                    eventObj['user'].errorCode =
                                      userInfoRes.errorCode;
                                    eventObj['user'].callId =
                                      userInfoRes.callId;
                                  }
                                  accountInfoRes.id_token &&
                                    (eventObj['id_token'] =
                                      accountInfoRes.id_token);
                                } else {
                                  eventObj['cancel'] = true;
                                }
                                callback(eventObj);
                              },
                            });
                          } else {
                            eventObj['cancel'] = true;
                            callback(eventObj);
                          }
                        }
                      );
                      window.gigya.events.global.dispatchWhenHandlerAdded(
                        { eventName: 'accounts.login' },
                        null,
                        function (eventObj, callback) {
                          return tslib_1.__awaiter(
                            _this,
                            void 0,
                            void 0,
                            function () {
                              return tslib_1.__generator(this, function (_a) {
                                switch (_a.label) {
                                  case 0:
                                    if (!eventObj) {
                                      eventObj = {};
                                    }
                                    eventObj = window.gigya.utils.object.merge([
                                      eventObj,
                                      eventParams,
                                    ]);
                                    if (
                                      !(
                                        accountInfoRes.errorCode ==
                                        GSErrors_1.GSErrors.OK
                                      )
                                    )
                                      return [3 /*break*/, 3];
                                    eventObj['eventName'] = 'accounts.login';
                                    if (!!accountInfoRes.UID)
                                      return [3 /*break*/, 2];
                                    return [
                                      4 /*yield*/,
                                      new gigya.Promise(function (r) {
                                        return window.gigya.accounts.getAccountInfo(
                                          {
                                            callback: r,
                                            include:
                                              window.gigya.utils.stringUtils.mergeCommaSeparatedValues(
                                                'profile,data',
                                                window.gigya.thisScript
                                                  .globalConf['include']
                                              ),
                                          }
                                        );
                                      }),
                                    ];
                                  case 1:
                                    accountInfoRes = _a.sent();
                                    _a.label = 2;
                                  case 2:
                                    window.gigya.utils.object.extractProperties(
                                      accountInfoRes,
                                      eventObj,
                                      'signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|dataCenter|id_token|groups'
                                    );
                                    return [3 /*break*/, 4];
                                  case 3:
                                    eventObj['cancel'] = true;
                                    _a.label = 4;
                                  case 4:
                                    callback(eventObj);
                                    return [2 /*return*/];
                                }
                              });
                            }
                          );
                        }
                      );
                      resolve();
                    },
                  });
                }),
              ];
            });
          });
        }
        exports.dispatchLoginEvent = dispatchLoginEvent;
        function remove(APIKey) {
          if (APIKey === void 0) {
            APIKey = window.gigya.thisScript.APIKey;
          }
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            var service;
            return tslib_1.__generator(this, function (_a) {
              switch (_a.label) {
                case 0:
                  if (get(APIKey)) {
                    window.gigya.logger.info('removing login token');
                  }
                  window.gigya.utils.cookie.remove('glt_' + APIKey);
                  window.gigya.utils.cookie.remove('_gig_lt');
                  window.gigya.utils.cookie.remove('gltexp_' + APIKey);
                  if (!window.gigya.partnerSettings.ssoKey)
                    return [3 /*break*/, 2];
                  window.gigya.logger.info('removing group login token');
                  return [4 /*yield*/, SsoService_1.SsoService.getInstance()];
                case 1:
                  service = _a.sent();
                  return [2 /*return*/, service.removeToken()];
                case 2:
                  return [2 /*return*/, gigya.Promise.resolve()];
              }
            });
          });
        }
        exports.remove = remove;
        function getTokenParam(APIKey, paramName) {
          var lt = window.gigya.utils.cookie.get(_getTokenCookieName(APIKey));
          if (lt) {
            var ltSegs = lt.split('|');
            if (ltSegs.length > 1) {
              return window.gigya.utils.keyValue.deserialize(ltSegs[1])[
                paramName
              ];
            } else {
              return null;
            }
          }
        }
        exports.getTokenParam = getTokenParam;
        function isGigyaCookieDomain() {
          var cookieDomain = window.gigya.utils.cookie.getDefaultDomain();
          return window.gigya.utils.stringUtils.endsWith(
            cookieDomain,
            window.gigya.defaultApiDomain
          );
        }
        function setBearerToken(bearerToken) {
          window.gigya.logger.info('setting a new Bearer token');
          _bearerToken = 'Bearer ' + bearerToken;
        }
        exports.setBearerToken = setBearerToken;
        function getBearerToken() {
          return _bearerToken;
        }
        exports.getBearerToken = getBearerToken;
        function removeBearerToken() {
          window.gigya.logger.info('Bearer token removed');
          _bearerToken = null;
        }
        exports.removeBearerToken = removeBearerToken;

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/app/WebAdapter.ts':
      /*!**********************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/app/WebAdapter.ts ***!
  \**********************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var tokenStore = __webpack_require__(
          /*! src/core/Gigya.Js.Adapters.Web/app/TokenStore */ './src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts'
        );
        var ApiRequest_1 = __webpack_require__(
          /*! src/core/Gigya.Js.Adapters.Web/app/ApiRequest */ './src/core/Gigya.Js.Adapters.Web/app/ApiRequest.ts'
        );
        var OauthRequest_1 = __webpack_require__(
          /*! src/core/Gigya.Js.Adapters.Web/app/OauthRequest */ './src/core/Gigya.Js.Adapters.Web/app/OauthRequest.ts'
        );
        var ServiceProxy_1 = __webpack_require__(
          /*! src/core/ServiceProxy/ServiceProxy */ './src/core/ServiceProxy/ServiceProxy.ts'
        );
        var ApiService_1 = __webpack_require__(
          /*! src/core/ApiService/app/ApiService */ './src/core/ApiService/app/ApiService.ts'
        );
        var GSErrors_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/GSErrors */ './src/core/Gigya.Js/app/GSErrors.ts'
        );
        var localStorage_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Utils/localStorage */ './src/core/Gigya.Js/app/Utils/localStorage.ts'
        );
        var GmidProvider_1 = __webpack_require__(
          /*! src/core/ApiService/app/GmidProvider */ './src/core/ApiService/app/GmidProvider.ts'
        );
        var domains_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Utils/domains */ './src/core/Gigya.Js/app/Utils/domains.ts'
        );
        var FlagService_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        var SessionService_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Services/SessionService */ './src/core/Gigya.Js/app/Services/SessionService.ts'
        );
        var SiteData_1 = __webpack_require__(
          /*! ../../Gigya.Js/app/Services/SiteData */ './src/core/Gigya.Js/app/Services/SiteData.ts'
        );
        var SsoService_1 = __webpack_require__(
          /*! ./SsoService */ './src/core/Gigya.Js.Adapters.Web/app/SsoService.ts'
        );
        var InternalFlows_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/InternalFlows */ './src/core/Gigya.Js/app/InternalFlows.ts'
        );
        var constants_1 = __webpack_require__(
          /*! src/accounts/constants */ './src/accounts/constants.ts'
        );
        var promise_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/promise */ './src/core/Gigya.Js/app/Utils/promise.ts'
        );
        var LoginModes_1 = __webpack_require__(
          /*! ../../../accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes */ './src/accounts/Gigya.JS.Plugin.screenSet2/app/LoginModes.ts'
        );
        var linkAccountsHelper_1 = __webpack_require__(
          /*! ../../Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper */ './src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts'
        );
        var consts_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/consts */ './src/core/Gigya.Js/app/consts.ts'
        );
        if (!window.gigya.isGigya) window.gigya.isGigya = true;
        exports.webAdapterName = 'Web';
        function newApiAdapter(adapterSettings) {
          return new WebAdapter(
            adapterSettings,
            new localStorage_1.CookieStorageAdapter()
          );
        }
        exports.newApiAdapter = newApiAdapter;
        var WebAdapter = /** @class */ (function () {
          function WebAdapter(adapterSettings, _storage) {
            this.adapterSettings = adapterSettings;
            this._storage = _storage;
            this.name = exports.webAdapterName;
            this._reBootstrapCount = 0;
          }
          WebAdapter.prototype.getStorage = function () {
            return this._storage;
          };
          WebAdapter.prototype.init = function (initCallback, retries) {
            if (retries === void 0) {
              retries = 0;
            }
            var _a, _b;
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var actualIndication,
                currentIndication,
                hasBootstrapped,
                log,
                _c,
                _d,
                _e,
                regenerateGmid,
                isValidSession,
                callback,
                res,
                tokenInfo,
                _f,
                error_1,
                responseEventObject;
              return tslib_1.__generator(this, function (_g) {
                switch (_g.label) {
                  case 0:
                    _g.trys.push([0, 14, , 17]);
                    actualIndication =
                      GmidProvider_1.GmidProvider.getGmidBootstrapIndicationToken(
                        window.gigya
                      );
                    currentIndication = this.getStorage().getItem(
                      WebAdapter.bootstrapIndicationCookieName(
                        window.gigya.thisScript.APIKey
                      )
                    );
                    hasBootstrapped = currentIndication === actualIndication;
                    window.gigya.logger.info(
                      'has bootstrapped: ' + hasBootstrapped
                    );
                    log = window.gigya.logger.group('create api service');
                    _c = this;
                    return [4 /*yield*/, SsoService_1.SsoService.getInstance()];
                  case 1:
                    _c._ssoService = _g.sent();
                    _d = window.gigya._.apiAdapters.web;
                    _e = this;
                    return [
                      4 /*yield*/,
                      this.createApiService(hasBootstrapped),
                    ];
                  case 2:
                    _d.apiService = _e._apiService = _g.sent();
                    log.end();
                    regenerateGmid =
                      GmidProvider_1.GmidProvider.shouldRegenerateGmid(
                        window.gigya,
                        this.hasSessionToken()
                      );
                    return [
                      4 /*yield*/,
                      this.bootstrapApiService(regenerateGmid),
                    ];
                  case 3:
                    _g.sent();
                    window.gigya.utils.functions.createAlias(
                      'gigya.auth.loginToken.get',
                      tokenStore.get
                    ); // TODO can this be removed?
                    if (
                      window.gigya.partnerSettings.ssoKey &&
                      window.gigya.canary &&
                      window.gigya.canary.config.probability
                    ) {
                      this.syncCanaryWithSSO();
                    }
                    return [4 /*yield*/, this.establishSession()];
                  case 4:
                    isValidSession = _g.sent();
                    if (isValidSession) {
                      window.gigya.services.accountService
                        .verifyLogin()
                        .then(function (loginVerified) {
                          if (!loginVerified)
                            window.gigya.events.global.dispatch({
                              eventName: 'logout,accounts.logout',
                            });
                        });
                    }
                    return [4 /*yield*/, this.checkReturnFromURL()];
                  case 5:
                    _g.sent();
                    if (!window.gigya._.isTrustedDomain) {
                      try {
                        this._apiService.sendReport('untrusted domain', {
                          domain: location.hostname,
                          trustedDomains:
                            window.gigya.partnerSettings.baseDomains,
                        });
                      } catch (e) {
                        console.error(e);
                      }
                    }
                    window.gigya.logger.info(
                      'user is ' + (isValidSession ? '' : 'not ') + 'logged-in'
                    );
                    if (!!window.gigya.partnerSettings.ssoKey)
                      return [3 /*break*/, 6];
                    initCallback();
                    return [3 /*break*/, 13];
                  case 6:
                    window.gigya.logger.info(
                      'sso group sync - ' + window.gigya.partnerSettings.ssoKey
                    );
                    callback = function (e) {
                      tokenStore.setFromSsoResponse(e);
                      initCallback();
                    };
                    if (
                      !(
                        SessionService_1.sessionData.isSessionVerified(
                          tokenStore.get()
                        ) &&
                        isValidSession &&
                        FlagService_1.FlagService.useSessionVerify
                      )
                    )
                      return [3 /*break*/, 8];
                    return [
                      4 /*yield*/,
                      promise_1.promisify(
                        window.gigya.accounts.session.verify,
                        { ignoreApiQueue: true }
                      ),
                    ];
                  case 7:
                    res = _g.sent();
                    isValidSession = res.errorCode === GSErrors_1.GSErrors.OK;
                    _g.label = 8;
                  case 8:
                    if (!isValidSession) return [3 /*break*/, 10];
                    return [
                      4 /*yield*/,
                      (_a = this._ssoService) === null || _a === void 0
                        ? void 0
                        : _a.checkTokenRenew(tokenStore.get()),
                    ];
                  case 9:
                    _f = _g.sent();
                    return [3 /*break*/, 12];
                  case 10:
                    return [
                      4 /*yield*/,
                      (_b = this._ssoService) === null || _b === void 0
                        ? void 0
                        : _b.getToken(),
                    ];
                  case 11:
                    _f = _g.sent();
                    _g.label = 12;
                  case 12:
                    tokenInfo = _f;
                    callback(tokenInfo);
                    _g.label = 13;
                  case 13:
                    return [3 /*break*/, 17];
                  case 14:
                    error_1 = _g.sent();
                    if (!(retries > 0)) return [3 /*break*/, 16];
                    return [4 /*yield*/, this.init(initCallback, retries - 1)];
                  case 15:
                    return [2 /*return*/, _g.sent()];
                  case 16:
                    window.gigya.logger.error('error bootstrapping sdk', {
                      type: 'bootstrap failed',
                      scope: 'WebAdapter.init',
                      error: error_1,
                    });
                    window.gigya.logger.debug('removing bootstrap indication');
                    this.getStorage().removeItem(
                      WebAdapter.bootstrapIndicationCookieName(
                        window.gigya.thisScript.APIKey
                      )
                    );
                    responseEventObject = {
                      status: 'FAIL_TO_BOOTSTRAP',
                      statusMessage: 'Web SDK failed to bootstrap',
                      errorCode: GSErrors_1.GSErrors.NETWORK_ERROR,
                      errorMessage:
                        'Web SDK failed to bootstrap: ' +
                        (error_1.message || error_1),
                    };
                    window.gigya.events.dispatchErrorFromResponse(
                      { eventName: 'init' },
                      responseEventObject
                    );
                    window.gigya.events.global.dispatchWhenHandlersAdded(
                      ['accounts.error', 'socialize.error'],
                      responseEventObject
                    );
                    initCallback();
                    return [3 /*break*/, 17];
                  case 17:
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.bootstrapApiService = function (force) {
            if (force === void 0) {
              force = false;
            }
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var info, ex_1;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    _a.trys.push([0, 2, , 3]);
                    return [4 /*yield*/, this._apiService.bootstrap(force)];
                  case 1:
                    info = _a.sent();
                    return [3 /*break*/, 3];
                  case 2:
                    ex_1 = _a.sent();
                    window.gigya.logger.error('error bootstrapping sdk', {
                      type: 'webSdkBootstrap failed',
                      scope: 'ApiService.bootstrap',
                      ex: ex_1,
                    });
                    window.gigya.events.global.dispatchWhenHandlersAdded(
                      ['accounts.error', 'socialize.error'],
                      {
                        status: 'FAIL_TO_BOOTSTRAP',
                        statusMessage:
                          'Web SDK bootstrap failure - APIService bootstrap',
                        errorCode: GSErrors_1.GSErrors.NETWORK_ERROR,
                        errorMessage:
                          'Web SDK bootstrap failure: ' +
                          (ex_1.message || ex_1),
                      }
                    );
                    return [3 /*break*/, 3];
                  case 3:
                    if (
                      info === null || info === void 0
                        ? void 0
                        : info.ticketInfo
                    ) {
                      this.setGmidTicket(info.ticketInfo);
                    } else if (
                      info === null || info === void 0 ? void 0 : info.hasGmid
                    ) {
                      this.bootstrapIndication = info.hasGmid;
                      SiteData_1.siteData.didForcedBootstrap = FlagService_1
                        .FlagService.forceWebSdkBootstrap
                        ? info.hasGmid
                        : null;
                    }
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.syncCanaryWithSSO = function () {
            var _a;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var isCanary, canaryVersion, canaryInfo;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    isCanary = this.getStorage().getItem(
                      window.gigya.canary.config.cookiesNames.isCanary
                    );
                    canaryVersion = this.getStorage().getItem(
                      window.gigya.canary.config.cookiesNames.version
                    );
                    return [
                      4 /*yield*/,
                      (_a = this._ssoService) === null || _a === void 0
                        ? void 0
                        : _a.syncCanaryIndication(isCanary, canaryVersion),
                    ];
                  case 1:
                    canaryInfo = _b.sent();
                    if (
                      (canaryInfo === null || canaryInfo === void 0
                        ? void 0
                        : canaryInfo.errorCode) === GSErrors_1.GSErrors.OK
                    ) {
                      if (
                        canaryInfo.isCanary &&
                        canaryInfo.isCanary !== isCanary
                      ) {
                        this.getStorage().setItem(
                          window.gigya.canary.config.cookiesNames.isCanary,
                          canaryInfo.isCanary
                        );
                      }
                      if (
                        canaryInfo.canaryVersion &&
                        canaryInfo.canaryVersion !== canaryVersion
                      ) {
                        this.getStorage().setItem(
                          window.gigya.canary.config.cookiesNames.version,
                          canaryInfo.canaryVersion
                        );
                      }
                    }
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.createApiService = function (hasBootstrapped) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var storageProtocol,
                loggerConfig,
                apiServiceUrl,
                apiServiceProxy,
                initInfo,
                apiDomain,
                forceSkipBootstrap,
                isApiDomainFirstParty;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    storageProtocol =
                      window.gigya.thisScript.globalConf[
                        'storageProtocolOverride'
                      ] || 'https';
                    loggerConfig =
                      window.gigya.logger.configKey +
                      '=' +
                      encodeURIComponent(
                        JSON.stringify(window.gigya.logger.getConfig())
                      );
                    apiServiceUrl =
                      storageProtocol +
                      '://' +
                      domains_1.getStorageDomain() +
                      '/gs/webSdk/Api.aspx?apiKey=' +
                      encodeURIComponent(window.gigya.thisScript.APIKey) +
                      '&version=' +
                      window.gigya.build.version +
                      '&build=' +
                      window.gigya.build.number +
                      '#origin=' +
                      document.location.href +
                      '&' +
                      loggerConfig;
                    window.gigya.logger.info('opening api frame');
                    apiServiceProxy = new ServiceProxy_1.ServiceProxy(
                      apiServiceUrl
                    );
                    window.gigya.logger.info('creating api service');
                    return [4 /*yield*/, apiServiceProxy.init('Api Service')];
                  case 1:
                    initInfo = _a.sent();
                    window.gigya.partnerSettings.plugins.apiDomain =
                      initInfo.apiDomain;
                    window.gigya._.getApiDomain =
                      window.gigya._.apiDomainFactory(
                        initInfo.apiDomain,
                        window.gigya.defaultApiDomain
                      );
                    apiDomain = window.gigya._.Uri.parse(initInfo.apiDomain);
                    window.gigya.logger.info('api domain is: ' + apiDomain);
                    window.gigya.logger.info(
                      'api domain is ' +
                        (initInfo.isGroupApiDomain ? '' : 'not ') +
                        'group domain'
                    );
                    forceSkipBootstrap =
                      window.gigya.thisScript.URLParams['bootstrap'] ===
                      'false';
                    // in gigya's domain
                    if (
                      apiDomain.isBaseOf(apiServiceUrl) &&
                      !forceSkipBootstrap &&
                      !window.gigya.thisScript.globalConf[
                        'storageDomainOverride'
                      ]
                    ) {
                      window.gigya.logger.info(
                        "api domain is gigya's so keep working with frame"
                      );
                      return [
                        2 /*return*/,
                        apiServiceProxy.wrapWith(ApiService_1.ApiService),
                      ];
                    }
                    // either prefixed domain or group domain
                    else {
                      window.gigya.logger.info('closing api frame');
                      apiServiceProxy.stop(true).then(function () {
                        return window.gigya.logger.info('api frame closed');
                      }); // no need to wait for this
                      if (forceSkipBootstrap) {
                        hasBootstrapped = true;
                      } else if (initInfo.hasGroupApiDomainChanged) {
                        // if group api domain changed, we need to re-bootstrap
                        // (it won't change if the site isn't in sso group)
                        hasBootstrapped = false;
                      }
                      isApiDomainFirstParty = true;
                      if (FlagService_1.FlagService.alwaysCheckCookieSave) {
                        try {
                          isApiDomainFirstParty = window.gigya._.Uri.parse(
                            window.gigya.localInfo.baseDomain || ''
                          ).isBaseOf(apiDomain.domain);
                        } catch (e) {
                          window.gigya.logger.report(
                            'Error evaluating first party domain',
                            {
                              baseDomain: window.gigya.localInfo.baseDomain,
                              apiDomain: apiDomain.domain,
                            }
                          );
                        }
                      }
                      window.gigya.logger.info(
                        'create and work with api service from top frame'
                      );
                      return [
                        2 /*return*/,
                        new ApiService_1.ApiService(
                          window.gigya.thisScript.APIKey,
                          hasBootstrapped,
                          {
                            originDomain: location.href,
                            isGroupApiDomain: initInfo.isGroupApiDomain,
                            getApiDomain: window.gigya._.getApiDomain,
                            isApiDomainFirstParty: isApiDomainFirstParty,
                            hasGroupApiDomainChanged: false,
                            canSaveGmidAsCookie: initInfo.canSaveGmidAsCookie,
                          }
                        ),
                      ];
                    }
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.isSessionValid = function (params, callback) {
            var _this = this;
            if (params === void 0) {
              params = {};
            }
            tokenStore.setFromGAC(params, function () {
              if (callback) {
                callback(_this.hasSessionToken(params));
              }
            });
          };
          WebAdapter.prototype.hasSessionToken = function (params) {
            if (params === void 0) {
              params = {};
            }
            return (
              tokenStore.get(params['APIKey']) != null ||
              params['oauth_token'] != null
            );
          };
          WebAdapter.prototype.registerForNamespaceEvents = function (
            namespace
          ) {};
          WebAdapter.prototype.onPluginEvent = function (event) {};
          WebAdapter.prototype.onJSLog = function (logType, logInfo) {};
          WebAdapter.prototype.sendRequest = function (
            methodName,
            params,
            callback,
            settings
          ) {
            if (settings === void 0) {
              settings = {};
            }
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var fnAfterResponse, proxyReqCallback, proxyReq;
              var _this = this;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    return [
                      4 /*yield*/,
                      this.beforeRequest(methodName, params, settings),
                    ];
                  case 1:
                    _a.sent();
                    fnAfterResponse = function (response, callback) {
                      _this.afterResponse(proxyReq, response, function () {
                        if (typeof callback === 'function') {
                          callback(
                            window.gigya.utils.object.clone(response, true)
                          );
                        }
                      });
                    };
                    proxyReqCallback = function (response) {
                      fnAfterResponse(response, callback);
                    };
                    proxyReq = new ApiRequest_1.ApiRequest(
                      methodName,
                      params,
                      proxyReqCallback,
                      settings
                    );
                    proxyReq.send();
                    if (
                      window.gigya._.logoutMethods[methodName] &&
                      window.gigya._.logoutBehaviour.logoutBeforeServerResponse
                    ) {
                      this.clearSession(params);
                    }
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.clearSession = function (params, callback) {
            tokenStore.remove(params['APIKey']);
            if (callback) {
              callback();
            }
          };
          WebAdapter.prototype.setGltexpFromSSO = function (apiKey) {
            if (apiKey === void 0) {
              apiKey = window.gigya.thisScript.APIKey;
            }
            var _a;
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var res;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    if (
                      !(
                        window.gigya.partnerSettings.ssoKey &&
                        !tokenStore.isValidGltExp()
                      )
                    )
                      return [3 /*break*/, 2];
                    return [
                      4 /*yield*/,
                      (_a = this._ssoService) === null || _a === void 0
                        ? void 0
                        : _a.getTokenExpiration(),
                    ];
                  case 1:
                    res = _b.sent();
                    if (
                      (res === null || res === void 0
                        ? void 0
                        : res.errorCode) === GSErrors_1.GSErrors.OK &&
                      res.gltexp &&
                      tokenStore.isValidGltExp(res.gltexp)
                    ) {
                      tokenStore.setGltexp(res.gltexp);
                      return [2 /*return*/, true];
                    }
                    _b.label = 2;
                  case 2:
                    return [2 /*return*/, false];
                }
              });
            });
          };
          WebAdapter.prototype.sendOauthRequest = function (
            methodName,
            params,
            callback,
            settings
          ) {
            var _this = this;
            this.beforeRequest(methodName, params, settings);
            var baseUrl = 'https://' + window.gigya._.getApiDomain('socialize');
            var req = new OauthRequest_1.OauthRequest(
              '',
              baseUrl,
              methodName,
              params,
              function (response) {
                _this.afterResponse(req, response, function (res) {
                  if (res.errorCode != '0') {
                    callback(res);
                  } else {
                    // social login (oauth request) makes gigya's domain visited so we re-bootstrap.
                    _this.bootstrapApiService().then(function () {
                      return callback(res);
                    });
                  }
                });
              },
              settings
            );
            req.send();
          };
          WebAdapter.prototype.beforeRequest = function (
            methodName,
            params,
            settings
          ) {
            if (settings === void 0) {
              settings = {};
            }
            var _a, _b;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              return tslib_1.__generator(this, function (_c) {
                if (
                  settings.clearSession ||
                  (settings.clearSessionCondition &&
                    settings.clearSessionCondition(params))
                ) {
                  window.gigya.logger.info(
                    'clearing session before request for ' + methodName
                  );
                  tokenStore.remove(params['APIKey']);
                }
                if (
                  Number(params['sessionExpiration']) === -2 &&
                  ((_b =
                    (_a = window.gigya.thisScript) === null || _a === void 0
                      ? void 0
                      : _a.globalConf) === null || _b === void 0
                    ? void 0
                    : _b['storageDomainOverride'])
                ) {
                  window.gigya.logger.info(
                    'session expiration -2 was converted to 1 year fixed expiration'
                  );
                  params['sessionExpiration'] =
                    window.gigya.utils.cookie.getInfiniteExpirationTimeInSeconds();
                }
                return [2 /*return*/];
              });
            });
          };
          WebAdapter.prototype.afterResponse = function (
            req,
            response,
            callback
          ) {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var _this = this;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    if (
                      !(
                        response.errorDetails == 'Missing cookie' ||
                        response.errorDetails ==
                          'Session is invalid (Missing DeviceId)' ||
                        response.errorDetails ==
                          'Missing required parameter: gcid or ucid cookie' ||
                        (response.errorCode ===
                          GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE &&
                          response.errorFlags === 'missingKey')
                      )
                    )
                      return [3 /*break*/, 2];
                    window.gigya.logger.info(
                      'missing cookie error - forcing bootstrap'
                    );
                    if (this._reBootstrapCount >= 2) {
                      window.gigya.logger.report('multiple reBootstrap error');
                      this._reBootstrapCount = 0;
                      callback(response);
                      return [2 /*return*/];
                    }
                    this._reBootstrapCount++;
                    return [4 /*yield*/, this.bootstrapApiService(true)];
                  case 1:
                    _a.sent();
                    window.gigya.logger.info('resending request');
                    req.send();
                    return [2 /*return*/];
                  case 2:
                    this._reBootstrapCount = 0;
                    this.handleTokenResponse(req, response, function () {
                      _this.logoutSsoIfNeeded(req, response, function () {
                        callback(response);
                      });
                    });
                    _a.label = 3;
                  case 3:
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.onSDKEvent = function (eventObject) {};
          WebAdapter.prototype.getTokenParam = function (APIKey, paramName) {
            return tokenStore.getTokenParam(APIKey, paramName);
          };
          WebAdapter.prototype.establishSession = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var oURLParams;
              var _this = this;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    oURLParams = window.gigya.utils.URL.getParamsFromURL(
                      document.location.href
                    );
                    if (
                      !(
                        oURLParams['gig_actions'] === 'sso.login' &&
                        !this.hasSessionToken() &&
                        oURLParams['authCode']
                      )
                    )
                      return [3 /*break*/, 2];
                    return [
                      4 /*yield*/,
                      tokenStore.setFromAuthCode(oURLParams['authCode']),
                    ];
                  case 1:
                    _a.sent();
                    return [2 /*return*/, this.hasSessionToken()];
                  case 2:
                    return [
                      4 /*yield*/,
                      new gigya.Promise(function (resolve) {
                        return _this.isSessionValid(
                          undefined,
                          function (isValid) {
                            return resolve(isValid);
                          }
                        );
                      }),
                    ];
                  case 3:
                    return [2 /*return*/, _a.sent()];
                }
              });
            });
          };
          WebAdapter.prototype.checkReturnFromURL = function () {
            var _a;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var oURLParams, GIGYA_PREFIXES, params, gigActions, events_1;
              var _this = this;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    oURLParams = window.gigya.utils.URL.getParamsFromURL(
                      document.location.href
                    );
                    GIGYA_PREFIXES = new RegExp(
                      constants_1.GIGYA_INTERNAL_PARAM_PREFIX +
                        '|' +
                        constants_1.GIGYA_PARAM_PREFIX
                    );
                    params = window.gigya.utils.object.removePropertiesPrefix(
                      oURLParams,
                      GIGYA_PREFIXES
                    );
                    gigActions = oURLParams['gig_actions'];
                    if (gigActions === 'sso.login' && !oURLParams['authCode']) {
                      this.syncSsoLogin(params);
                    }
                    if (!(gigActions === 'magicLink')) return [3 /*break*/, 2];
                    return [4 /*yield*/, this.handleMagicLink(params)];
                  case 1:
                    _b.sent();
                    _b.label = 2;
                  case 2:
                    if (gigActions === 'confirmInvite') {
                      InternalFlows_1.checkGroupInvitation(params);
                    }
                    if (!this.shouldFinalizeLinkAccountsV2(oURLParams))
                      return [3 /*break*/, 4];
                    return [4 /*yield*/, this.finalizeLinkAccounts(oURLParams)];
                  case 3:
                    _b.sent();
                    _b.label = 4;
                  case 4:
                    if (!oURLParams['gig_events']) {
                      return [2 /*return*/];
                    }
                    if (
                      oURLParams['errorCode'] ==
                      GSErrors_1.GSErrors.ACCOUNTS_LINKED
                    ) {
                      window.gigya.accounts.finalizeRegistration({
                        regToken: oURLParams['regToken'],
                        callback: function () {
                          var _a;
                          return (_a = _this._ssoService) === null ||
                            _a === void 0
                            ? void 0
                            : _a.setToken(
                                tokenStore.get(),
                                oURLParams['expires_in'] ||
                                  consts_1.SessionExpiration.Forever
                              );
                        },
                      });
                    }
                    if (
                      !(
                        oURLParams['errorCode'] == GSErrors_1.GSErrors.OK &&
                        tokenStore.get() != null
                      )
                    )
                      return [3 /*break*/, 6];
                    window.gigya.logger.info(
                      'returned from redirection with error code'
                    );
                    return [
                      4 /*yield*/,
                      (_a = this._ssoService) === null || _a === void 0
                        ? void 0
                        : _a.setToken(
                            tokenStore.get(),
                            oURLParams['expires_in'] ||
                              consts_1.SessionExpiration.Forever
                          ),
                    ];
                  case 5:
                    _b.sent();
                    events_1 = oURLParams['gig_events'].split(',');
                    // Accounts is enabled
                    if (
                      window.gigya.utils.array.indexOf(
                        events_1,
                        'accounts.login'
                      ) !== -1
                    ) {
                      window.gigya.accounts.getAccountInfo({
                        extraProfileFields: 'samlData',
                        include:
                          window.gigya.utils.stringUtils.mergeCommaSeparatedValues(
                            'profile,data,userinfo',
                            window.gigya.thisScript.globalConf['include']
                          ),
                        callback: function (accountInfoRes) {
                          var accountsEvent = {
                            errorCode: 0,
                            eventName: 'accounts.login',
                          };
                          window.gigya.utils.object.extractProperties(
                            accountInfoRes,
                            accountsEvent,
                            'signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data|id_token'
                          );
                          window.gigya.events.global.dispatchWhenHandlerAdded(
                            accountsEvent
                          );
                          if (
                            window.gigya.utils.array.indexOf(
                              events_1,
                              'socialize.login'
                            ) !== -1
                          ) {
                            var socializeEvent =
                              window.gigya._.addUserInfoToEvent(
                                accountInfoRes,
                                {
                                  errorCode: 0,
                                  eventName: 'socialize.login',
                                },
                                true
                              );
                            window.gigya.events.global.dispatchWhenHandlerAdded(
                              socializeEvent
                            );
                          }
                        },
                      });
                    } else {
                      window.gigya.socialize.getUserInfo({
                        signIDs: true,
                        extraFields: 'samlData',
                        callback: function (userInfoRes) {
                          for (var i = 0; i < events_1.length; i++) {
                            var oEvent = window.gigya._.addUserInfoToEvent(
                              userInfoRes,
                              {
                                errorCode: 0,
                                eventName: events_1[i],
                              },
                              true
                            );
                            window.gigya.events.global.dispatchWhenHandlerAdded(
                              oEvent
                            );
                          }
                        },
                      });
                    }
                    _b.label = 6;
                  case 6:
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.handleMagicLink = function (magicLinkParams) {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              return tslib_1.__generator(this, function (_a) {
                return [
                  2 /*return*/,
                  new gigya.Promise(function (resolve) {
                    window.gigya.accounts.auth.magiclink.email.login(
                      tslib_1.__assign(tslib_1.__assign({}, magicLinkParams), {
                        ignoreApiQueue: true,
                        callback: function (response) {
                          if (
                            (response === null || response === void 0
                              ? void 0
                              : response.errorCode) !== GSErrors_1.GSErrors.OK
                          ) {
                            window.gigya.events.global.dispatchWhenHandlersAdded(
                              ['accounts.error', 'socialize.error'],
                              response
                            );
                          }
                          resolve();
                        },
                      })
                    );
                  }),
                ];
              });
            });
          };
          WebAdapter.prototype.finalizeLinkAccounts = function (params) {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var providerSession, payload, response, error_2;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    _a.trys.push([0, 2, , 3]);
                    providerSession =
                      linkAccountsHelper_1.getProviderSessionForLinkAccountsAfterRedirect(
                        params
                      );
                    payload = {
                      ignoreApiQueue: true,
                      ignoreInterruptions: true,
                      loginMode: LoginModes_1.LoginModes.connect.name,
                      providerSessions:
                        linkAccountsHelper_1.extractProviderSessions(
                          providerSession
                        ),
                    };
                    return [
                      4 /*yield*/,
                      promise_1.promisify(
                        window.gigya.accounts.notifySocialLogin,
                        payload
                      ),
                    ];
                  case 1:
                    response = _a.sent();
                    if (response.errorCode !== GSErrors_1.GSErrors.OK) {
                      window.gigya.events.global.dispatchWhenHandlersAdded(
                        ['accounts.error', 'socialize.error'],
                        response
                      );
                    }
                    return [3 /*break*/, 3];
                  case 2:
                    error_2 = _a.sent();
                    window.gigya.events.global.dispatchWhenHandlersAdded(
                      ['accounts.error', 'socialize.error'],
                      error_2
                    );
                    return [3 /*break*/, 3];
                  case 3:
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.shouldFinalizeLinkAccountsV2 = function (
            urlParams
          ) {
            return (
              Number(urlParams.errorCode) === GSErrors_1.GSErrors.OK &&
              linkAccountsHelper_1.hasProviderSessionForLinkAccountsInParamsAfterRedirect(
                urlParams
              )
            );
          };
          WebAdapter.prototype.setNewLoginTokenFromResponse = function (
            req,
            response,
            callback
          ) {
            var _a;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var newLoginToken, expiresIn, sessionExpiration, apiKey;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    newLoginToken = response['sessionInfo']
                      ? response['sessionInfo']['login_token']
                      : response['login_token'];
                    if (!newLoginToken) return [3 /*break*/, 6];
                    if (!this.isFakeToken(newLoginToken))
                      return [3 /*break*/, 2];
                    window.gigya.logger.info(
                      'fake login token returned (no gmid) - forcing bootstrap'
                    );
                    return [4 /*yield*/, this.bootstrapApiService(true)];
                  case 1:
                    _b.sent();
                    window.gigya.logger.info('resending the login request');
                    req.send();
                    return [2 /*return*/];
                  case 2:
                    expiresIn =
                      response['sessionInfo'] != null
                        ? response['sessionInfo']['expires_in']
                        : response['expires_in'];
                    sessionExpiration = req.params['sessionExpiration'];
                    if (
                      (!expiresIn || expiresIn == 0) &&
                      sessionExpiration < 0
                    ) {
                      expiresIn =
                        window.gigya.utils.cookie.getInfiniteExpirationTimeInSeconds();
                    }
                    apiKey = req.params['APIKey'];
                    if (
                      window.gigya.utils.toggles.isOn(
                        WebAdapter.serverGltToggleName
                      )
                    ) {
                      this.setLoginTokenIfNotExist(
                        apiKey,
                        newLoginToken,
                        expiresIn,
                        sessionExpiration
                      );
                    } else {
                      tokenStore.set(
                        apiKey,
                        newLoginToken,
                        expiresIn,
                        sessionExpiration
                      );
                    }
                    this.getStorage().removeItem(
                      'gltexp_' + req.params['APIKey']
                    ); // Clear cookie, will propagate into SSO store.
                    window.gigya.legacyReports.trackAddressBarShares();
                    if (
                      !(
                        window.gigya.partnerSettings.ssoKey &&
                        FlagService_1.FlagService.setGroupApiDomainAfterLogin
                      )
                    )
                      return [3 /*break*/, 4];
                    return [
                      4 /*yield*/,
                      this._ssoService.setGroupApiDomain(
                        window.gigya._.getApiDomain()
                      ),
                    ];
                  case 3:
                    _b.sent();
                    _b.label = 4;
                  case 4:
                    return [
                      4 /*yield*/,
                      (_a = this._ssoService) === null || _a === void 0
                        ? void 0
                        : _a.setToken(newLoginToken, expiresIn),
                    ];
                  case 5:
                    _b.sent();
                    _b.label = 6;
                  case 6:
                    callback();
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.setLoginTokenIfNotExist = function (
            apiKey,
            login_token,
            expiresIn,
            sessionExpiration
          ) {
            if (
              !tokenStore.get(apiKey) ||
              tokenStore.get(apiKey) !== login_token
            ) {
              tokenStore.set(apiKey, login_token, expiresIn, sessionExpiration);
              window.gigya.logger.info('glt cookie was set by javascript', {
                login_token: login_token,
              });
            } else {
              window.gigya.logger.info('glt cookie was set by server', {
                login_token: login_token,
              });
            }
          };
          WebAdapter.prototype.isFakeToken = function (token) {
            return token.split('.')[1] == 'ffs';
          };
          WebAdapter.prototype.onInvalidTokenResponse = function (
            req,
            callback
          ) {
            var _a;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var tokenResponse;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    if (req.paramsLoginToken) {
                      // Do not attempt to retry if loginToken was provided from the parameters
                      callback();
                      return [2 /*return*/];
                    }
                    return [
                      4 /*yield*/,
                      (_a = this._ssoService) === null || _a === void 0
                        ? void 0
                        : _a.getToken(),
                    ];
                  case 1:
                    tokenResponse = _b.sent();
                    if (
                      !(
                        tokenResponse &&
                        tokenResponse.login_token &&
                        tokenResponse.login_token.split('|')[0] !==
                          req.sentLoginToken &&
                        !req.paramsLoginToken
                      )
                    )
                      return [3 /*break*/, 3];
                    return [4 /*yield*/, this.bootstrapApiService()];
                  case 2:
                    _b.sent();
                    tokenStore.setFromSsoResponse(
                      tokenResponse,
                      req.params['APIKey']
                    );
                    req.params['login_token'] = undefined; // remove the login token from previous attempt
                    req.send();
                    return [3 /*break*/, 4];
                  case 3:
                    tokenStore.remove(req.params['APIKey']);
                    // If the method doesn't require a session, try again without a login token.
                    if (!req.settings.requiresSession()) {
                      delete req.params['login_token'];
                      delete req.sentLoginToken;
                      req.send(callback);
                    } else {
                      callback();
                    }
                    _b.label = 4;
                  case 4:
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.handleTokenResponse = function (
            req,
            res,
            callback
          ) {
            var _a;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var _this = this;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    res = window.gigya.utils.object.clone(res);
                    if (
                      res['errorCode'] ==
                      GSErrors_1.GSErrors.SESSION_EXPIRED_RETRY
                    ) {
                      // Session_expired_retry - when a provider session expires.
                      // The method should deal with retry when provider SDK is up.
                      if (this.shouldWaitForService(req, res)) {
                        return [2 /*return*/];
                      }
                    } else if (
                      res['errorCode'] ==
                      GSErrors_1.GSErrors.INVALID_GMID_TICKET
                    ) {
                      // Invalid_gmid_ticket
                      this._gmidTicket = null;
                      window.gigya.utils.localStorage.removeItem('_gig_gmidt');
                    }
                    if (
                      req.sentLoginToken &&
                      window.gigya._.logoutMethods[req.methodName] &&
                      res['errorCode'] == GSErrors_1.GSErrors.OK &&
                      res['logoutActiveSession']
                    ) {
                      this.clearSession(req.params);
                    }
                    // Persist dynamic expiration signature to SSO if necessary.
                    if (
                      window.gigya.partnerSettings.ssoKey &&
                      req.sentLoginToken &&
                      res['errorCode'] == GSErrors_1.GSErrors.OK &&
                      req.params['loginTokenExp']
                    ) {
                      (_a = this._ssoService) === null || _a === void 0
                        ? void 0
                        : _a.setTokenExpiration(req.params['loginTokenExp']);
                    }
                    if (!(!this.hasSessionToken() && res['authCode']))
                      return [3 /*break*/, 2];
                    return [
                      4 /*yield*/,
                      tokenStore.setFromAuthCode(res['authCode']),
                    ];
                  case 1:
                    _b.sent();
                    return [3 /*break*/, 3];
                  case 2:
                    this.setNewLoginTokenFromResponse(req, res, function () {
                      if (
                        req.sentLoginToken &&
                        res['errorCode'] ==
                          GSErrors_1.GSErrors.UNAUTHORIZED_USER
                      ) {
                        _this.onInvalidTokenResponse(req, callback);
                      } else {
                        callback();
                      }
                    });
                    _b.label = 3;
                  case 3:
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.logoutSsoIfNeeded = function (
            req,
            res,
            callback
          ) {
            var _a;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var logoutRes, removeAfter;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    if (
                      !(
                        window.gigya.partnerSettings.ssoKey &&
                        window.gigya._.logoutMethods[req.methodName] &&
                        res['errorCode'] == GSErrors_1.GSErrors.OK &&
                        res['logoutActiveSession']
                      )
                    )
                      return [3 /*break*/, 4];
                    if (
                      !(
                        document.location.href !=
                        window.gigya.partnerSettings.ssoLogoutUrl
                      )
                    )
                      return [3 /*break*/, 2];
                    return [
                      4 /*yield*/,
                      (_a = this._ssoService) === null || _a === void 0
                        ? void 0
                        : _a.logout(),
                    ];
                  case 1:
                    logoutRes = _b.sent();
                    removeAfter = void 0;
                    if (req.params['sustainLogoutURLs'] !== undefined) {
                      removeAfter = !req.params['sustainLogoutURLs'];
                    }
                    this.loadLogoutUrls(
                      logoutRes['logoutURLs'],
                      callback,
                      {
                        UID: res['UID'],
                        UIDSignature: res['UIDSignature'],
                        signatureTimestamp: res['signatureTimestamp'],
                      },
                      removeAfter
                    );
                    return [3 /*break*/, 3];
                  case 2:
                    callback();
                    _b.label = 3;
                  case 3:
                    return [3 /*break*/, 5];
                  case 4:
                    callback();
                    _b.label = 5;
                  case 5:
                    return [2 /*return*/];
                }
              });
            });
          };
          WebAdapter.prototype.loadLogoutUrls = function (
            logoutUrlsList,
            callback,
            queryStringParams,
            removeAfter
          ) {
            var loadedLength = 0;
            var logoutUrls = logoutUrlsList ? logoutUrlsList.split(',') : [];
            var fnLoaded = function () {
              loadedLength++;
              if (loadedLength > logoutUrls.length) {
                callback();
              }
            };
            for (var i = 0; i < logoutUrls.length; i++) {
              if (!logoutUrls[i]) {
                fnLoaded(); // mark site as loaded if no url to go to
                continue;
              }
              var url = window.gigya.utils.URL.addParamsToURL(
                logoutUrls[i],
                queryStringParams
              );
              this.loadLogoutUrl(url, fnLoaded, removeAfter);
            }
            fnLoaded(); // make sure call is made at least once even if logout URLs list is empty
          };
          WebAdapter.prototype.loadLogoutUrl = function (
            url,
            callback,
            removeAfter
          ) {
            if (removeAfter === void 0) {
              removeAfter = 5000;
            }
            var ifr = document.createElement('iframe');
            ifr.src = url;
            ifr.style.position = 'absolute';
            ifr.style.top = '-1000px';
            ifr.style.left = '-1000px';
            var loaded = false;
            var onIfrLoaded = function () {
              loaded = true;
              if (removeAfter !== false) {
                ifr.parentElement.removeChild(ifr);
              }
              callback();
            };
            window.setTimeout(function () {
              if (!loaded) {
                onIfrLoaded();
              }
            }, removeAfter);
            ifr.onload = function () {
              onIfrLoaded();
            };
            window.gigya.utils.DOM.prependToBody(ifr);
          };
          WebAdapter.prototype.shouldWaitForService = function (
            request,
            response
          ) {
            if (request.params['retryPossible']) {
              request.params['retryPossible'] = false;
              window.gigya.external.facebook.runWhenLoaded(function () {
                request.send();
              });
              return true;
            }
            return false;
          };
          WebAdapter.prototype.getGmidTicket = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              return tslib_1.__generator(this, function (_a) {
                if (this._gmidTicket) {
                  // if it exists, each time we use gmidTicket we need to refresh it.
                  this.refreshGmidTicket();
                }
                return [2 /*return*/, this._gmidTicket];
              });
            });
          };
          WebAdapter.prototype.refreshGmidTicket = function () {
            var _this = this;
            this._apiService
              .getGmidTicket(true)
              .then(function (gmidTicketData) {
                return _this.setGmidTicket(gmidTicketData);
              });
          };
          WebAdapter.prototype.setGmidTicket = function (gmidTicketData) {
            var _this = this;
            if (!gmidTicketData || !gmidTicketData.gmidTicket) {
              window.gigya.logger.info('clean gmidTicket');
              delete this._gmidTicket;
            } else {
              window.gigya.logger.info('set gmidTicket (set auto-refresh)');
              this._gmidTicket = gmidTicketData.gmidTicket;
              var nextRuntimeInterval = this.calculateGmidTicketNextRun(
                gmidTicketData.expirationTime
              );
              setTimeout(function () {
                return _this.refreshGmidTicket();
              }, nextRuntimeInterval);
            }
          };
          Object.defineProperty(WebAdapter.prototype, 'bootstrapIndication', {
            get: function () {
              return this.getStorage().getItem(
                WebAdapter.bootstrapIndicationCookieName(
                  window.gigya.thisScript.APIKey
                )
              );
            },
            set: function (hasGmid) {
              var cookieName = WebAdapter.bootstrapIndicationCookieName(
                window.gigya.thisScript.APIKey
              );
              var cookieValue =
                GmidProvider_1.GmidProvider.convertHasGmidToBootstrapIndication(
                  window.gigya,
                  hasGmid
                );
              this.getStorage().setItem(cookieName, cookieValue);
              window.gigya.logger.debug(
                'set bootstrap indication on top frame: ' + cookieValue
              );
            },
            enumerable: true,
            configurable: true,
          });
          WebAdapter.prototype.calculateGmidTicketNextRun = function (
            expirationTime
          ) {
            var gmidTicketExpirationTime = new Date(expirationTime).getTime();
            return gmidTicketExpirationTime - new Date().getTime();
          };
          WebAdapter.prototype.syncSsoLogin = function (ssoLoginParams) {
            var context;
            for (var loginParam in ssoLoginParams) {
              if (typeof context === 'undefined') context = {};
              context[loginParam] = ssoLoginParams[loginParam];
            }
            if (
              FlagService_1.FlagService.verifyLoginOnlyOnce &&
              SessionService_1.sessionData.isSessionVerified(tokenStore.get())
            ) {
              return;
            }
            tokenStore.dispatchLoginEvent({ context: context });
          };
          WebAdapter.serverGltToggleName = 'enableServerGLT';
          WebAdapter.bootstrapIndicationCookieName = function (apiKey) {
            return 'gig_bootstrap_' + apiKey;
          };
          return WebAdapter;
        })();
        exports.WebAdapter = WebAdapter;

        /***/
      },

    /***/ './src/core/Gigya.Js.Adapters.Web/index.ts':
      /*!*************************************************!*\
  !*** ./src/core/Gigya.Js.Adapters.Web/index.ts ***!
  \*************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        /* WEBPACK VAR INJECTION */ (function (
          __webpack_provided_Object_dot_assign
        ) {
          Object.defineProperty(exports, '__esModule', { value: true });
          var ServicesProxyInterfaces = __webpack_require__(
            /*! src/core/ServiceProxy/interfaces */ './src/core/ServiceProxy/interfaces.ts'
          );
          var ProxyListener = __webpack_require__(
            /*! src/core/ServiceProxy/ProxyListener */ './src/core/ServiceProxy/ProxyListener.ts'
          );
          var ServiceProxy = __webpack_require__(
            /*! src/core/ServiceProxy/ServiceProxy */ './src/core/ServiceProxy/ServiceProxy.ts'
          );
          var ServicesProxyUtils = __webpack_require__(
            /*! src/core/ServiceProxy/utils */ './src/core/ServiceProxy/utils.ts'
          );
          var ApiService = __webpack_require__(
            /*! src/core/ApiService/app/ApiService */ './src/core/ApiService/app/ApiService.ts'
          );
          var GroupApiDomainService = __webpack_require__(
            /*! src/core/ApiService/app/GroupApiDomainService */ './src/core/ApiService/app/GroupApiDomainService.ts'
          );
          var ApiServiceInterfaces = __webpack_require__(
            /*! src/core/ApiService/app/interfaces */ './src/core/ApiService/app/interfaces.ts'
          );
          var XhrRequest = __webpack_require__(
            /*! src/core/ApiService/app/XhrRequest */ './src/core/ApiService/app/XhrRequest.ts'
          );
          var Request = __webpack_require__(
            /*! src/core/ApiService/app/Request */ './src/core/ApiService/app/Request.ts'
          );
          var ApiRequest = __webpack_require__(
            /*! src/core/Gigya.Js.Adapters.Web/app/ApiRequest */ './src/core/Gigya.Js.Adapters.Web/app/ApiRequest.ts'
          );
          var BaseRequest = __webpack_require__(
            /*! src/core/Gigya.Js.Adapters.Web/app/BaseRequest */ './src/core/Gigya.Js.Adapters.Web/app/BaseRequest.ts'
          );
          var OauthRequest = __webpack_require__(
            /*! src/core/Gigya.Js.Adapters.Web/app/OauthRequest */ './src/core/Gigya.Js.Adapters.Web/app/OauthRequest.ts'
          );
          var SSOBridge = __webpack_require__(
            /*! src/core/Gigya.Js.Adapters.Web/app/SsoService */ './src/core/Gigya.Js.Adapters.Web/app/SsoService.ts'
          );
          var TokenStore = __webpack_require__(
            /*! src/core/Gigya.Js.Adapters.Web/app/TokenStore */ './src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts'
          );
          var WebAdapter = __webpack_require__(
            /*! src/core/Gigya.Js.Adapters.Web/app/WebAdapter */ './src/core/Gigya.Js.Adapters.Web/app/WebAdapter.ts'
          );
          __webpack_require__(
            /*! src/core/Gigya.Js.Adapters.Web/app/ExternalMethods */ './src/core/Gigya.Js.Adapters.Web/app/ExternalMethods/index.ts'
          );
          if (!window.gigya.services) {
            window.gigya.services = {};
          }
          if (!window.gigya.services.proxy) {
            window.gigya.services.proxy = {};
          }
          if (!window.gigya.services.proxy.utils) {
            window.gigya.services.proxy.utils = {};
          }
          if (!window.gigya._) {
            window.gigya._ = {};
          }
          if (!window.gigya._.apiAdapters) {
            window.gigya._.apiAdapters = {};
          }
          if (!window.gigya._.apiAdapters.web) {
            window.gigya._.apiAdapters.web = {};
          }
          if (!window.gigya._.apiAdapters.web.sso) {
            window.gigya._.apiAdapters.web.sso = {};
          }
          if (!window.gigya._.apiAdapters.web.tokenStore) {
            window.gigya._.apiAdapters.web.tokenStore = {};
          }
          __webpack_provided_Object_dot_assign(
            window.gigya.services.proxy,
            ServicesProxyInterfaces,
            ProxyListener,
            ServiceProxy
          );
          __webpack_provided_Object_dot_assign(
            window.gigya.services.proxy.utils,
            ServicesProxyUtils
          );
          __webpack_provided_Object_dot_assign(
            window.gigya.services,
            ApiService,
            GroupApiDomainService,
            ApiServiceInterfaces
          );
          __webpack_provided_Object_dot_assign(
            window.gigya,
            Request,
            XhrRequest
          );
          __webpack_provided_Object_dot_assign(
            window.gigya._.apiAdapters.web,
            ApiRequest,
            BaseRequest,
            OauthRequest,
            WebAdapter
          );
          __webpack_provided_Object_dot_assign(
            window.gigya._.apiAdapters.web.sso,
            SSOBridge
          );
          __webpack_provided_Object_dot_assign(
            window.gigya._.apiAdapters.web.tokenStore,
            TokenStore
          );

          /* WEBPACK VAR INJECTION */
        }).call(
          this,
          __webpack_require__(
            /*! tslib */ '../node_modules/tslib/tslib.es6.js'
          )['__assign']
        );

        /***/
      },

    /***/ './src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts':
      /*!**************************************************************************!*\
  !*** ./src/core/Gigya.Js.Plugin/app/Utils/general/linkAccountsHelper.ts ***!
  \**************************************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var GSErrors_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/GSErrors */ './src/core/Gigya.Js/app/GSErrors.ts'
        );
        var promise_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/promise */ './src/core/Gigya.Js/app/Utils/promise.ts'
        );
        var phoneNumberUtil_1 = __webpack_require__(
          /*! ./phoneNumberUtil */ './src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil.ts'
        );
        var LinkAccountsWithRedirectParam;
        (function (LinkAccountsWithRedirectParam) {
          LinkAccountsWithRedirectParam['Provider'] = 'gig_provider';
          LinkAccountsWithRedirectParam['AccessToken'] = 'gig_access_token';
        })(
          (LinkAccountsWithRedirectParam =
            exports.LinkAccountsWithRedirectParam ||
            (exports.LinkAccountsWithRedirectParam = {}))
        );
        function connectAccounts(providerSessionInfo, requestParams) {
          if (requestParams === void 0) {
            requestParams = {};
          }
          return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            var providerSessions;
            return tslib_1.__generator(this, function (_a) {
              providerSessions = extractProviderSessions(providerSessionInfo);
              return [
                2 /*return*/,
                promise_1.promisify(
                  window.gigya.accounts.notifySocialLogin,
                  tslib_1.__assign(tslib_1.__assign({}, requestParams), {
                    loginMode: 'connect',
                    providerSessions: providerSessions,
                    ignoreApiQueue: true,
                  })
                ),
              ];
            });
          });
        }
        exports.connectAccounts = connectAccounts;
        function extractProviderSessions(providerSessionInfo) {
          var _a;
          var idToken = providerSessionInfo.idToken,
            provider = providerSessionInfo.provider,
            code = providerSessionInfo.code,
            access_token = providerSessionInfo.access_token,
            lastName = providerSessionInfo.lastName,
            firstName = providerSessionInfo.firstName;
          return (
            (_a = {}),
            (_a[provider] = {
              authToken: access_token,
              idToken: idToken,
              code: code,
              lastName: lastName,
              firstName: firstName,
            }),
            _a
          );
        }
        exports.extractProviderSessions = extractProviderSessions;
        function extractProviderInfoFromResponse(response) {
          if (
            response.errorCode !=
            GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS
          ) {
            return response;
          }
          var providerSessionInfo = getProviderSessionFromParams(response);
          return tslib_1.__assign(tslib_1.__assign({}, response), {
            providerSessionInfo: providerSessionInfo,
          });
        }
        exports.extractProviderInfoFromResponse =
          extractProviderInfoFromResponse;
        function getLoginId(conflictingAccount) {
          var _a;
          return (
            (conflictingAccount === null || conflictingAccount === void 0
              ? void 0
              : conflictingAccount.loginID) ||
            ((_a =
              conflictingAccount === null || conflictingAccount === void 0
                ? void 0
                : conflictingAccount.emails) === null || _a === void 0
              ? void 0
              : _a[0])
          );
        }
        exports.getLoginId = getLoginId;
        function getObfuscatedPhone(conflictingAccount) {
          var phone = getPhone(conflictingAccount);
          return phoneNumberUtil_1.formatObfuscatedPhoneNumber(phone);
        }
        exports.getObfuscatedPhone = getObfuscatedPhone;
        function getPhone(conflictingAccount) {
          var _a;
          return (_a =
            conflictingAccount === null || conflictingAccount === void 0
              ? void 0
              : conflictingAccount.phones) === null || _a === void 0
            ? void 0
            : _a[0];
        }
        exports.getPhone = getPhone;
        function isLinkAccountsV2Interruption(errorCode) {
          return (
            Number(errorCode) ===
            GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS
          );
        }
        exports.isLinkAccountsV2Interruption = isLinkAccountsV2Interruption;
        function hasProviderSessionForLinkAccountsInParamsAfterRedirect(
          params
        ) {
          var providerSession =
            getProviderSessionForLinkAccountsAfterRedirect(params);
          return isProviderSessionValid(providerSession);
        }
        exports.hasProviderSessionForLinkAccountsInParamsAfterRedirect =
          hasProviderSessionForLinkAccountsInParamsAfterRedirect;
        function getProviderSessionForLinkAccountsAfterRedirect(params) {
          try {
            var gig_provider = params.gig_provider;
            if (!gig_provider) return {};
            var providerSession =
              window.gigya.utils.JSON.deserialize(gig_provider);
            return providerSession;
          } catch (error) {
            window.gigya.logger.error(
              'Error while getting provider session from params after redirect',
              error
            );
            return {};
          }
        }
        exports.getProviderSessionForLinkAccountsAfterRedirect =
          getProviderSessionForLinkAccountsAfterRedirect;
        function getProviderSessionFromParams(params) {
          if (!params) return null;
          var providerSessionInfo = {
            access_token: params.access_token,
            provider: params.provider,
            provider_uid: params.provider_uid,
            idToken: params.id_token,
            code: params.code,
            lastName: params.lastName,
            firstName: params.firstName,
          };
          return providerSessionInfo;
        }
        exports.getProviderSessionFromParams = getProviderSessionFromParams;
        function isProviderSessionValid(params) {
          return Boolean(
            (params === null || params === void 0 ? void 0 : params.provider) &&
              (params === null || params === void 0
                ? void 0
                : params.access_token)
          );
        }
        exports.isProviderSessionValid = isProviderSessionValid;

        /***/
      },

    /***/ './src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil.ts':
      /*!***********************************************************************!*\
  !*** ./src/core/Gigya.Js.Plugin/app/Utils/general/phoneNumberUtil.ts ***!
  \***********************************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        function formatObfuscatedPhoneNumber(phoneData) {
          var phone =
            phoneData === null || phoneData === void 0
              ? void 0
              : phoneData.obfuscated;
          return phone === null || phone === void 0
            ? void 0
            : phone.replace(/#/g, '*').replace(/(\*+)/, ' $1 ');
        }
        exports.formatObfuscatedPhoneNumber = formatObfuscatedPhoneNumber;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/GSErrors.ts':
      /*!*******************************************!*\
  !*** ./src/core/Gigya.Js/app/GSErrors.ts ***!
  \*******************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var GSErrors;
        (function (GSErrors) {
          GSErrors[(GSErrors['OK'] = 0)] = 'OK';
          GSErrors[(GSErrors['Data_Pending'] = 100001)] = 'Data_Pending';
          GSErrors[(GSErrors['NETWORK_ERROR'] = 500026)] = 'NETWORK_ERROR';
          GSErrors[(GSErrors['DATA_PENDING'] = 100001)] = 'DATA_PENDING';
          GSErrors[(GSErrors['OPERATION_CANCELED'] = 200001)] =
            'OPERATION_CANCELED';
          GSErrors[(GSErrors['PERMISSION_GRANTED'] = 200002)] =
            'PERMISSION_GRANTED';
          GSErrors[(GSErrors['PERMISSION_NOT_GRANTED'] = 200003)] =
            'PERMISSION_NOT_GRANTED';
          GSErrors[(GSErrors['REDIRECT'] = 200004)] = 'REDIRECT';
          GSErrors[(GSErrors['NEW_USER'] = 200005)] = 'NEW_USER';
          GSErrors[(GSErrors['OPERATION_DONE'] = 200006)] = 'OPERATION_DONE';
          GSErrors[(GSErrors['UPDATE_USER'] = 200007)] = 'UPDATE_USER';
          GSErrors[(GSErrors['OK_WITH_ERRORS'] = 200008)] = 'OK_WITH_ERRORS';
          GSErrors[(GSErrors['ACCOUNTS_LINKED'] = 200009)] = 'ACCOUNTS_LINKED';
          GSErrors[
            (GSErrors['OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS'] = 200010)
          ] = 'OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS';
          GSErrors[(GSErrors['ACCOUNT_PENDING_REGISTRATION'] = 206001)] =
            'ACCOUNT_PENDING_REGISTRATION';
          GSErrors[(GSErrors['ACCOUNT_PENDING_VERIFICATION'] = 206002)] =
            'ACCOUNT_PENDING_VERIFICATION';
          GSErrors[(GSErrors['ACCOUNT_MISSING_LOGINID'] = 206003)] =
            'ACCOUNT_MISSING_LOGINID';
          GSErrors[(GSErrors['IDENTITY_ALREADY_ASSIGNED'] = 206004)] =
            'IDENTITY_ALREADY_ASSIGNED';
          GSErrors[(GSErrors['AFTER_EMAIL_VERIFICATION'] = 206005)] =
            'AFTER_EMAIL_VERIFICATION';
          GSErrors[(GSErrors['PENDING_CODE_VERIFICATION'] = 206006)] =
            'PENDING_CODE_VERIFICATION';
          GSErrors[(GSErrors['CLIENT_LOG'] = 300001)] = 'CLIENT_LOG';
          GSErrors[(GSErrors['INVALID_DATA_CENTER'] = 301001)] =
            'INVALID_DATA_CENTER';
          GSErrors[(GSErrors['INVALID_REQUEST_FORMAT'] = 400001)] =
            'INVALID_REQUEST_FORMAT';
          GSErrors[(GSErrors['MISSING_REQUIRED_PARAMETER'] = 400002)] =
            'MISSING_REQUIRED_PARAMETER';
          GSErrors[(GSErrors['UNIQUE_IDENTIFIER_EXISTS'] = 400003)] =
            'UNIQUE_IDENTIFIER_EXISTS';
          GSErrors[(GSErrors['INVALID_PARAMETER_FORMAT'] = 400004)] =
            'INVALID_PARAMETER_FORMAT';
          GSErrors[(GSErrors['INVALID_PARAMETER_VALUE'] = 400006)] =
            'INVALID_PARAMETER_VALUE';
          GSErrors[(GSErrors['DUPLICATE_VALUE'] = 400007)] = 'DUPLICATE_VALUE';
          GSErrors[(GSErrors['INVALID_AUTHENTICATION_HEADER'] = 400008)] =
            'INVALID_AUTHENTICATION_HEADER';
          GSErrors[(GSErrors['VALIDATION_ERROR'] = 400009)] =
            'VALIDATION_ERROR';
          GSErrors[(GSErrors['INVALID_REDIRECT_URI'] = 400011)] =
            'INVALID_REDIRECT_URI';
          GSErrors[(GSErrors['INVALID_RESPONSE_TYPE'] = 400012)] =
            'INVALID_RESPONSE_TYPE';
          GSErrors[(GSErrors['UNSUPPORTED_GRANT_TYPE'] = 400013)] =
            'UNSUPPORTED_GRANT_TYPE';
          GSErrors[(GSErrors['INVALID_GRANT'] = 400014)] = 'INVALID_GRANT';
          GSErrors[(GSErrors['CODE_EXPIRED'] = 400015)] = 'CODE_EXPIRED';
          GSErrors[(GSErrors['SCHEMA_VALIDATION_FAILED'] = 400020)] =
            'SCHEMA_VALIDATION_FAILED';
          GSErrors[(GSErrors['CAPTCHA_VERIFICATION_FAILED'] = 400021)] =
            'CAPTCHA_VERIFICATION_FAILED';
          GSErrors[(GSErrors['UNIQUE_INDEX_VALIDATION_ERROR'] = 400022)] =
            'UNIQUE_INDEX_VALIDATION_ERROR';
          GSErrors[(GSErrors['INVALID_TYPE_VALIDATION_ERROR'] = 400023)] =
            'INVALID_TYPE_VALIDATION_ERROR';
          GSErrors[(GSErrors['DYNAMIC_FIELDS_VALIDATION_ERROR'] = 400024)] =
            'DYNAMIC_FIELDS_VALIDATION_ERROR';
          GSErrors[(GSErrors['WRITE_ACCESS_VALIDATION_ERROR'] = 400025)] =
            'WRITE_ACCESS_VALIDATION_ERROR';
          GSErrors[(GSErrors['INVALID_FORMAT_VALIDATION_ERROR'] = 400026)] =
            'INVALID_FORMAT_VALIDATION_ERROR';
          GSErrors[(GSErrors['REQUIRED_VALUE_VALIDATION_ERROR'] = 400027)] =
            'REQUIRED_VALUE_VALIDATION_ERROR';
          GSErrors[(GSErrors['EMAIL_NOT_VERIFIED'] = 400028)] =
            'EMAIL_NOT_VERIFIED';
          GSErrors[(GSErrors['SCHEMA_CONFLICT_ERROR'] = 400029)] =
            'SCHEMA_CONFLICT_ERROR';
          GSErrors[(GSErrors['OPERATION_NOT_ALLOWED'] = 400030)] =
            'OPERATION_NOT_ALLOWED';
          GSErrors[(GSErrors['SECURITY_VERIFICATION_FAILED'] = 400050)] =
            'SECURITY_VERIFICATION_FAILED';
          GSErrors[(GSErrors['INVALID_APIKEY_PARAMETER'] = 400093)] =
            'INVALID_APIKEY_PARAMETER';
          GSErrors[(GSErrors['NOT_SUPPORTED'] = 400096)] = 'NOT_SUPPORTED';
          GSErrors[(GSErrors['UNSUPPORTED_USER_AGENT'] = 400097)] =
            'UNSUPPORTED_USER_AGENT';
          GSErrors[(GSErrors['NO_PROVIDERS'] = 400100)] = 'NO_PROVIDERS';
          GSErrors[(GSErrors['POPUP_BLOCKED'] = 400101)] = 'POPUP_BLOCKED';
          GSErrors[(GSErrors['INVALID_EVENT_HANDLER'] = 400102)] =
            'INVALID_EVENT_HANDLER';
          GSErrors[(GSErrors['INVALID_CONTAINERID'] = 400103)] =
            'INVALID_CONTAINERID';
          GSErrors[(GSErrors['NOT_CONNECTED'] = 400106)] = 'NOT_CONNECTED';
          GSErrors[(GSErrors['INVALID_SITE_DOMAIN'] = 400120)] =
            'INVALID_SITE_DOMAIN';
          GSErrors[(GSErrors['PROVIDER_CONFIGURATION_ERROR'] = 400122)] =
            'PROVIDER_CONFIGURATION_ERROR';
          GSErrors[(GSErrors['LIMIT_REACHED'] = 400124)] = 'LIMIT_REACHED';
          GSErrors[(GSErrors['FREQUENCY_LIMIT_REACHED'] = 400125)] =
            'FREQUENCY_LIMIT_REACHED';
          GSErrors[(GSErrors['INVALID_ACTION'] = 400126)] = 'INVALID_ACTION';
          GSErrors[(GSErrors['INSUFFICIENT_POINTS_TO_REDEEM'] = 400127)] =
            'INSUFFICIENT_POINTS_TO_REDEEM';
          GSErrors[(GSErrors['SIGNATURE_TIMESTAMP_EXPIRED'] = 400128)] =
            'SIGNATURE_TIMESTAMP_EXPIRED';
          GSErrors[(GSErrors['Error_During_Extensions_Operation'] = 400302)] =
            'Error_During_Extensions_Operation';
          GSErrors[(GSErrors['Extension_Point_Custom_Error'] = 400303)] =
            'Extension_Point_Custom_Error';
          GSErrors[(GSErrors['INVALID_POLICY_CONFIGURATION'] = 401000)] =
            'INVALID_POLICY_CONFIGURATION';
          GSErrors[(GSErrors['SUSPECTED_SPAM'] = 401010)] = 'SUSPECTED_SPAM';
          GSErrors[(GSErrors['LOGIN_FAILED_CAPTCHA_REQUIRED'] = 401020)] =
            'LOGIN_FAILED_CAPTCHA_REQUIRED';
          GSErrors[(GSErrors['REQUEST_FAILED_CAPTCHA_REQUIRED'] = 401023)] =
            'REQUEST_FAILED_CAPTCHA_REQUIRED';
          GSErrors[(GSErrors['LOGIN_FAILED_WRONG_CAPTCHA'] = 401021)] =
            'LOGIN_FAILED_WRONG_CAPTCHA';
          GSErrors[(GSErrors['OLD_PASSWORD_USED'] = 401030)] =
            'OLD_PASSWORD_USED';
          GSErrors[(GSErrors['FORBIDDEN'] = 403000)] = 'FORBIDDEN';
          GSErrors[(GSErrors['INVALID_SESSION_TOKEN'] = 403001)] =
            'INVALID_SESSION_TOKEN';
          GSErrors[(GSErrors['REQUEST_HAS_EXPIRED'] = 403002)] =
            'REQUEST_HAS_EXPIRED';
          GSErrors[(GSErrors['INVALID_REQUEST_SIGNATURE'] = 403003)] =
            'INVALID_REQUEST_SIGNATURE';
          GSErrors[(GSErrors['DUPLICATE_NONCE'] = 403004)] = 'DUPLICATE_NONCE';
          GSErrors[(GSErrors['UNAUTHORIZED_USER'] = 403005)] =
            'UNAUTHORIZED_USER';
          GSErrors[(GSErrors['SENSITIVE_DATA_SENT_OVER_HTTP'] = 403006)] =
            'SENSITIVE_DATA_SENT_OVER_HTTP';
          GSErrors[(GSErrors['PERMISSION_DENIED'] = 403007)] =
            'PERMISSION_DENIED';
          GSErrors[(GSErrors['INVALID_OPENID_URL'] = 403008)] =
            'INVALID_OPENID_URL';
          GSErrors[(GSErrors['PROVIDER_SESSION_EXPIRED'] = 403009)] =
            'PROVIDER_SESSION_EXPIRED';
          GSErrors[(GSErrors['INVALID_SECRET'] = 403010)] = 'INVALID_SECRET';
          GSErrors[(GSErrors['SESSION_HAS_EXPIRED'] = 403011)] =
            'SESSION_HAS_EXPIRED';
          GSErrors[(GSErrors['NO_VALID_SESSION'] = 403012)] =
            'NO_VALID_SESSION';
          GSErrors[(GSErrors['UNVERIFIED_USER'] = 403013)] = 'UNVERIFIED_USER';
          GSErrors[(GSErrors['MISSING_REQUEST_REFERRER'] = 403015)] =
            'MISSING_REQUEST_REFERRER';
          GSErrors[(GSErrors['UNEXPECTED_PROVIDER_USER'] = 403017)] =
            'UNEXPECTED_PROVIDER_USER';
          GSErrors[(GSErrors['PERMISSION_NOT_REQUESTED'] = 403022)] =
            'PERMISSION_NOT_REQUESTED';
          GSErrors[(GSErrors['NO_USER_PERMISSION'] = 403023)] =
            'NO_USER_PERMISSION';
          GSErrors[(GSErrors['PROVIDER_LIMIT_REACHED'] = 403024)] =
            'PROVIDER_LIMIT_REACHED';
          GSErrors[(GSErrors['INVALID_TOKEN'] = 403025)] = 'INVALID_TOKEN';
          GSErrors[(GSErrors['UNAUTHORIZED_ACCESS_ERROR'] = 403026)] =
            'UNAUTHORIZED_ACCESS_ERROR';
          GSErrors[(GSErrors['DIFFERENT_USER_FOR_REAUTH'] = 403027)] =
            'DIFFERENT_USER_FOR_REAUTH';
          GSErrors[(GSErrors['SESSION_EXPIRED_RETRY'] = 403030)] =
            'SESSION_EXPIRED_RETRY';
          GSErrors[(GSErrors['APPROVED_BY_MODERATOR'] = 403031)] =
            'APPROVED_BY_MODERATOR';
          GSErrors[(GSErrors['TOKEN_HAS_RENEWED'] = 403032)] =
            'TOKEN_HAS_RENEWED';
          GSErrors[(GSErrors['NO_USER_COOKIE'] = 403035)] = 'NO_USER_COOKIE';
          GSErrors[(GSErrors['UNAUTHORIZED_PARTNER'] = 403036)] =
            'UNAUTHORIZED_PARTNER';
          GSErrors[(GSErrors['POST_DENIED'] = 403037)] = 'POST_DENIED';
          GSErrors[(GSErrors['NO_LOGIN_TICKET'] = 403040)] = 'NO_LOGIN_TICKET';
          GSErrors[(GSErrors['ACCOUNT_DISABLED'] = 403041)] =
            'ACCOUNT_DISABLED';
          GSErrors[(GSErrors['INVALID_LOGINID'] = 403042)] = 'INVALID_LOGINID';
          GSErrors[(GSErrors['LOGIN_IDENTIFIER_EXISTS'] = 403043)] =
            'LOGIN_IDENTIFIER_EXISTS';
          GSErrors[(GSErrors['UNDERAGE_USER'] = 403044)] = 'UNDERAGE_USER';
          GSErrors[(GSErrors['INVALID_SITE_CONFIGURATION_ERROR'] = 403045)] =
            'INVALID_SITE_CONFIGURATION_ERROR';
          GSErrors[(GSErrors['LOGINID_DOES_NOT_EXIST'] = 403047)] =
            'LOGINID_DOES_NOT_EXIST';
          GSErrors[(GSErrors['API_RATE_LIMIT_EXCEEDED'] = 403048)] =
            'API_RATE_LIMIT_EXCEEDED';
          GSErrors[(GSErrors['PENDING_PASSWORD_CHANGE'] = 403100)] =
            'PENDING_PASSWORD_CHANGE';
          GSErrors[(GSErrors['ACCOUNT_PENDING_TFA_VERIFICATION'] = 403101)] =
            'ACCOUNT_PENDING_TFA_VERIFICATION';
          GSErrors[(GSErrors['ACCOUNT_PENDING_TFA_REGISTRATION'] = 403102)] =
            'ACCOUNT_PENDING_TFA_REGISTRATION';
          GSErrors[(GSErrors['ACCOUNT_PENDING_RECENT_LOGIN'] = 403110)] =
            'ACCOUNT_PENDING_RECENT_LOGIN';
          GSErrors[(GSErrors['ACCOUNT_TEMPORARILY_LOCKED_OUT'] = 403120)] =
            'ACCOUNT_TEMPORARILY_LOCKED_OUT';
          GSErrors[(GSErrors['REDUNDANT_OPERATION'] = 403200)] =
            'REDUNDANT_OPERATION';
          GSErrors[(GSErrors['INVALID_APPLICATION_ID'] = 403201)] =
            'INVALID_APPLICATION_ID';
          GSErrors[(GSErrors['NOT_FOUND'] = 404000)] = 'NOT_FOUND';
          GSErrors[(GSErrors['FRIEND_NOT_FOUND'] = 404001)] =
            'FRIEND_NOT_FOUND';
          GSErrors[(GSErrors['CATEGORY_NOT_FOUND'] = 404002)] =
            'CATEGORY_NOT_FOUND';
          GSErrors[(GSErrors['UID_NOT_FOUND'] = 404003)] = 'UID_NOT_FOUND';
          GSErrors[(GSErrors['RESOURCE_NOT_FOUND'] = 404004)] =
            'RESOURCE_NOT_FOUND';
          GSErrors[(GSErrors['INVALID_API_METHOD'] = 405001)] =
            'INVALID_API_METHOD';
          GSErrors[(GSErrors['IDENTITY_EXISTS'] = 409001)] = 'IDENTITY_EXISTS';
          GSErrors[(GSErrors['GONE'] = 410000)] = 'GONE';
          GSErrors[(GSErrors['REQUEST_ENTITY_TOO_LARGE'] = 413001)] =
            'REQUEST_ENTITY_TOO_LARGE';
          GSErrors[(GSErrors['COMMENT_TEXT_TOO_LARGE'] = 413002)] =
            'COMMENT_TEXT_TOO_LARGE';
          GSErrors[(GSErrors['OBJECT_TOO_LARGE'] = 413003)] =
            'OBJECT_TOO_LARGE';
          GSErrors[(GSErrors['PROFILE_PHOTO_TOO_LARGE'] = 413004)] =
            'PROFILE_PHOTO_TOO_LARGE';
          GSErrors[(GSErrors['REQUEST_URI_TOO_LONG'] = 414000)] =
            'REQUEST_URI_TOO_LONG';
          GSErrors[(GSErrors['MISSING_USER_PHOTO'] = 409010)] =
            'MISSING_USER_PHOTO';
          GSErrors[(GSErrors['COUNTER_NOT_REGISTERED'] = 409011)] =
            'COUNTER_NOT_REGISTERED';
          GSErrors[(GSErrors['INVALID_GMID_TICKET'] = 409012)] =
            'INVALID_GMID_TICKET';
          GSErrors[(GSErrors['SAML_MAPPED_ATTRIBUTE_NOT_FOUND'] = 409013)] =
            'SAML_MAPPED_ATTRIBUTE_NOT_FOUND';
          GSErrors[(GSErrors['SAML_CERTIFICATE_NOT_FOUND'] = 409014)] =
            'SAML_CERTIFICATE_NOT_FOUND';
          GSErrors[(GSErrors['SAML_MESSAGE_NOT_FOUND'] = 409015)] =
            'SAML_MESSAGE_NOT_FOUND';
          GSErrors[(GSErrors['GENERAL_SERVER_ERROR'] = 500001)] =
            'GENERAL_SERVER_ERROR';
          GSErrors[(GSErrors['SERVER_LOGIN_ERROR'] = 500002)] =
            'SERVER_LOGIN_ERROR';
          GSErrors[
            (GSErrors['DEFAULT_APPLICATION_CONFIGURATION_ERROR'] = 500003)
          ] = 'DEFAULT_APPLICATION_CONFIGURATION_ERROR';
          GSErrors[(GSErrors['SESSION_MIGRATION_ERROR'] = 500014)] =
            'SESSION_MIGRATION_ERROR';
          GSErrors[(GSErrors['PROVIDER_ERROR'] = 500023)] = 'PROVIDER_ERROR';
          GSErrors[(GSErrors['DATABASE_ERROR'] = 500028)] = 'DATABASE_ERROR';
          GSErrors[(GSErrors['USERNAME_REQUIRED'] = 500029)] =
            'USERNAME_REQUIRED';
          GSErrors[(GSErrors['NO_PROVIDER_APPLICATION'] = 500031)] =
            'NO_PROVIDER_APPLICATION';
          GSErrors[(GSErrors['LOAD_FAILED'] = 500032)] = 'LOAD_FAILED';
          GSErrors[(GSErrors['INVALID_ENVIRONMENT_CONFIG'] = 500033)] =
            'INVALID_ENVIRONMENT_CONFIG';
          GSErrors[(GSErrors['ERROR_DURING_BACKEND_OPERATION'] = 500034)] =
            'ERROR_DURING_BACKEND_OPERATION';
          GSErrors[(GSErrors['TIMEOUT'] = 504001)] = 'TIMEOUT';
          GSErrors[(GSErrors['CLIENTTIMEOUT'] = 504002)] = 'CLIENTTIMEOUT';
          GSErrors[(GSErrors['INVALID_URL'] = 404004)] = 'INVALID_URL';
          GSErrors[(GSErrors['MEDIA_ITEMS_NOT_SUPPORTED'] = 401001)] =
            'MEDIA_ITEMS_NOT_SUPPORTED';
          GSErrors[(GSErrors['MISSING_ERROR_CODE'] = 599999)] =
            'MISSING_ERROR_CODE';
          GSErrors[
            (GSErrors[
              'THIS_AUTHENTICATION_METHOD_IS_CURRENTLY_DISABLED'
            ] = 403300)
          ] = 'THIS_AUTHENTICATION_METHOD_IS_CURRENTLY_DISABLED';
          GSErrors[(GSErrors['FORCE_LINK_LOGIN_IDENTIFIER_EXISTS'] = 409003)] =
            'FORCE_LINK_LOGIN_IDENTIFIER_EXISTS';
          GSErrors[(GSErrors['PASSKEY_AUTHENTICATOR_REGISTERED'] = 400130)] =
            'PASSKEY_AUTHENTICATOR_REGISTERED';
          GSErrors[(GSErrors['PASSKEY_ABORTED'] = 400131)] = 'PASSKEY_ABORTED';
          GSErrors[(GSErrors['PASSKEY_ERROR'] = 500131)] = 'PASSKEY_ERROR';
        })((GSErrors = exports.GSErrors || (exports.GSErrors = {})));
        var GSErrorDetails;
        (function (GSErrorDetails) {
          GSErrorDetails[(GSErrorDetails['None'] = 0)] = 'None';
          GSErrorDetails[(GSErrorDetails['Same_password'] = 100001)] =
            'Same_password';
          GSErrorDetails[(GSErrorDetails['Invalid_password'] = 100002)] =
            'Invalid_password';
          GSErrorDetails[
            (GSErrorDetails['Invalid_counters_query_with_cursor'] = 100003)
          ] = 'Invalid_counters_query_with_cursor';
        })(
          (GSErrorDetails =
            exports.GSErrorDetails || (exports.GSErrorDetails = {}))
        );

        /***/
      },

    /***/ './src/core/Gigya.Js/app/InternalFlows.ts':
      /*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/InternalFlows.ts ***!
  \************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var GSErrors_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/GSErrors */ './src/core/Gigya.Js/app/GSErrors.ts'
        );
        var LocalInfo_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/LocalInfo */ './src/core/Gigya.Js/app/LocalInfo.ts'
        );
        var tokenStore = __webpack_require__(
          /*! src/core/Gigya.Js.Adapters.Web/app/TokenStore */ './src/core/Gigya.Js.Adapters.Web/app/TokenStore.ts'
        );
        var localStorageUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/localStorage */ './src/core/Gigya.Js/app/Utils/localStorage.ts'
        );
        var JSONUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/JSON */ './src/core/Gigya.Js/app/Utils/JSON.ts'
        );
        var objectUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/object */ './src/core/Gigya.Js/app/Utils/object.ts'
        );
        var URLUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/URL */ './src/core/Gigya.Js/app/Utils/URL.ts'
        );
        var MessagingMethod;
        (function (MessagingMethod) {
          MessagingMethod[(MessagingMethod['LocalStorageListener'] = 0)] =
            'LocalStorageListener';
          MessagingMethod[(MessagingMethod['PostMessage'] = 1)] = 'PostMessage';
          MessagingMethod[(MessagingMethod['Flash'] = 2)] = 'Flash';
        })(
          (MessagingMethod =
            exports.MessagingMethod || (exports.MessagingMethod = {}))
        );
        function checkCompleteRegistration(res, params, methodName, callback) {
          var screenSet;
          var retry;
          var pending = false;
          var providerSessionInfo;
          if (
            res['errorCode'] == GSErrors_1.GSErrors.AFTER_EMAIL_VERIFICATION
          ) {
            // Handle autoLogin from registration link
            window.gigya.logger.info(
              'finalizing registration after email verification'
            );
            pending = true;
            window.gigya.accounts.finalizeRegistration({
              regToken: res['regToken'],
              ignoreApiQueue: true,
              callback: callback,
            });
          } else if (
            !params['ignoreInterruptions'] &&
            !params['dontHandleScreenSet'] &&
            (((res['regToken'] || params['regToken']) && // has regToken
              (res['errorCode'] ==
                GSErrors_1.GSErrors.OK_WITH_ERROR_LOGIN_IDENTIFIER_EXISTS || // socialLogin/setAccountInfo saved with loginID exist error
                res['errorCode'] ==
                  GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS || //forceLinking loginId exists
                res['errorCode'] ==
                  GSErrors_1.GSErrors.LOGIN_IDENTIFIER_EXISTS)) || // loginID exists
              res['errorCode'] ==
                GSErrors_1.GSErrors.ACCOUNT_PENDING_REGISTRATION || // pending registration
              res['errorCode'] ==
                GSErrors_1.GSErrors.ACCOUNT_PENDING_VERIFICATION || // pending email verification
              res['errorCode'] == GSErrors_1.GSErrors.ACCOUNT_MISSING_LOGINID || // pending LoginID
              res['errorCode'] ==
                GSErrors_1.GSErrors.ACCOUNT_PENDING_TFA_VERIFICATION || // pending TFA verification
              res['errorCode'] ==
                GSErrors_1.GSErrors.ACCOUNT_PENDING_TFA_REGISTRATION || // pending TFA registration
              res['errorCode'] ==
                GSErrors_1.GSErrors.ACCOUNT_PENDING_RECENT_LOGIN || // pending recent login
              res['errorCode'] == GSErrors_1.GSErrors.PENDING_PASSWORD_CHANGE || // pending password change
              res['errorCode'] == GSErrors_1.GSErrors.PENDING_CODE_VERIFICATION) // pending code verification
          ) {
            if (
              res['errorCode'] ==
              GSErrors_1.GSErrors.FORCE_LINK_LOGIN_IDENTIFIER_EXISTS
            ) {
              providerSessionInfo = {
                access_token: res['access_token'],
                provider: res['provider'],
                provider_uid: res['provider_uid'],
                idToken: res['id_token'],
                code: res['code'],
                lastName: res['lastName'],
                firstName: res['firstName'],
              };
            }
            var newModal;
            if (
              res['errorCode'] ==
              GSErrors_1.GSErrors.ACCOUNT_PENDING_RECENT_LOGIN
            ) {
              retry = true;
              newModal = true;
            }
            if (
              params['defaultMobileRegScreenSet'] &&
              LocalInfo_1.localInfo.isMobile
            ) {
              screenSet = params['defaultMobileRegScreenSet'];
            } else if (params['defaultRegScreenSet']) {
              screenSet = params['defaultRegScreenSet'];
            }
          }
          if (screenSet) {
            window.gigya.logger.info(
              "showing screenset '" +
                screenSet +
                "' for errorCode " +
                res['errorCode']
            );
            window.gigya.logger.group(screenSet);
            window.gigya.accounts.showScreenSet({
              ignoreApiQueue: true,
              newModal: newModal,
              screenSet: screenSet,
              initialMethod: methodName,
              initialResponse: res,
              suppressLoginEvent: params['suppressLoginEvent'],
              providerSessionInfo: providerSessionInfo,
              onError: function (e) {
                callback(res);
              },
              onHide: function (e) {
                window.gigya.logger.groupEnd(screenSet);
                if (e.reason === 'finished' && e.user) {
                  var successResponse = {
                    errorCode: 0,
                    userInfo: e.user,
                    source: e.source,
                  };
                  callback(successResponse, true, retry);
                } else {
                  callback(res);
                }
              },
            });
          } else if (!pending) {
            callback(res);
          }
        }
        exports.checkCompleteRegistration = checkCompleteRegistration;
        function checkGroupInvitation(params) {
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            var confirmation, screenSet;
            return tslib_1.__generator(this, function (_a) {
              switch (_a.label) {
                case 0:
                  if (!params.invitationId) {
                    window.gigya.events.global.dispatchWhenHandlersAdded(
                      ['accounts.error', 'socialize.error'],
                      {
                        status: 'MISSING_REQUIRED_PARAMETER',
                        statusMessage:
                          'Missing required parameter: invitationId',
                        errorCode:
                          GSErrors_1.GSErrors.MISSING_REQUIRED_PARAMETER,
                        errorMessage:
                          'Missing required parameter: invitationId',
                      }
                    );
                  }
                  return [
                    4 /*yield*/,
                    confirmGroupInvitation(params.invitationId),
                  ];
                case 1:
                  confirmation = _a.sent();
                  if (!!confirmation.token) return [3 /*break*/, 2];
                  window.gigya.events.global.dispatchWhenHandlersAdded(
                    ['accounts.error', 'socialize.error'],
                    confirmation
                  );
                  return [3 /*break*/, 5];
                case 2:
                  if (!(tokenStore.get() === null)) return [3 /*break*/, 3];
                  window.gigya.accounts.addEventHandlers({
                    onLogin: function () {
                      return tslib_1.__awaiter(
                        this,
                        void 0,
                        void 0,
                        function () {
                          return tslib_1.__generator(this, function (_a) {
                            switch (_a.label) {
                              case 0:
                                return [
                                  4 /*yield*/,
                                  finalizeGroupInvitation(confirmation.token),
                                ];
                              case 1:
                                _a.sent();
                                return [2 /*return*/];
                            }
                          });
                        }
                      );
                    },
                  });
                  screenSet = LocalInfo_1.localInfo.isMobile
                    ? window.gigya.thisScript.globalConf
                        .defaultMobileRegScreenSet
                    : window.gigya.thisScript.globalConf.defaultRegScreenSet;
                  window.gigya.accounts.showScreenSet({
                    ignoreApiQueue: true,
                    screenSet: screenSet,
                  });
                  return [3 /*break*/, 5];
                case 3:
                  return [
                    4 /*yield*/,
                    finalizeGroupInvitation(confirmation.token),
                  ];
                case 4:
                  _a.sent();
                  _a.label = 5;
                case 5:
                  return [2 /*return*/];
              }
            });
          });
        }
        exports.checkGroupInvitation = checkGroupInvitation;
        function confirmGroupInvitation(invitationId) {
          return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
              return [
                2 /*return*/,
                new gigya.Promise(function (resolve) {
                  window.gigya.accounts.groups.invitationConfirm({
                    ignoreApiQueue: true,
                    invitationId: invitationId,
                    callback: resolve,
                  });
                }),
              ];
            });
          });
        }
        function finalizeGroupInvitation(token) {
          return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
              return [
                2 /*return*/,
                new gigya.Promise(function (resolve) {
                  window.gigya.accounts.groups.finalizeInvitation({
                    ignoreApiQueue: true,
                    token: token,
                    callback: function (result) {
                      if (result.errorCode !== GSErrors_1.GSErrors.OK) {
                        window.gigya.events.global.dispatchWhenHandlersAdded(
                          ['accounts.error', 'socialize.error'],
                          result
                        );
                      } else {
                        window.gigya.events.global.dispatchWhenHandlersAdded(
                          [
                            'accounts.finalizeGroupInvitation',
                            'socialize.finalizeGroupInvitation',
                          ],
                          result
                        );
                      }
                      resolve();
                    },
                  });
                }),
              ];
            });
          });
        }
        function getGigyaSettings(group) {
          var gigyaSettings = localStorageUtils.getObject('gigyaSettings');
          return JSONUtils.serialize(gigyaSettings[group]);
        }
        exports.getGigyaSettings = getGigyaSettings;
        function setGigyaSettings(group, settings) {
          var _a;
          var gigyaSettings = localStorageUtils.getObject(
            'gigyaSettings',
            ((_a = {}), (_a[group] = {}), _a)
          );
          for (var p in settings) {
            gigyaSettings[group][p] = settings[p];
          }
          localStorageUtils.setItem(
            'gigyaSettings',
            JSONUtils.serialize(gigyaSettings)
          );
        }
        exports.setGigyaSettings = setGigyaSettings;
        function delGigyaSettings(group) {
          if (!group) {
            localStorageUtils.removeItem('gigyaSettings');
          } else {
            var gigyaSettings = localStorageUtils.getObject('gigyaSettings');
            if (gigyaSettings) {
              delete gigyaSettings[group];
              localStorageUtils.setItem(
                'gigyaSettings',
                JSONUtils.serialize(gigyaSettings)
              );
            }
          }
        }
        exports.delGigyaSettings = delGigyaSettings;
        function handleSpecialFields(o) {
          var collection = window.gigya.socialize.Collection;
          var toTyped = function (arr, ctor) {
            var oarr = [];
            var i = 0;
            var el = arr[i];
            while (el) {
              oarr.push(new ctor(el));
              if (oarr[i].identities) {
                convertIdentitiesArrayToObject(oarr[i]);
              }
              el = arr[++i];
            }
            return oarr;
          };
          if (o.photos) o.photos = new collection(o.photos, 'photoID');
          if (o.albums) o.albums = new collection(o.albums, 'albumID');
          if (o.contacts)
            o.contacts = new collection(
              toTyped(o.contacts, window.gigya.socialize.Contact),
              'email'
            );
          if (o.friend)
            o.friend = new collection(
              toTyped(o.friend, window.gigya.socialize.Friend),
              'UID'
            );
          if (o.user) o.user = new window.gigya.socialize.User(o.user);
          if (o.friends && o.friends instanceof Array) {
            var arUIDs = [];
            for (var i = 0; i < o.friends.length; i++) {
              arUIDs.push(o.friends[i].UID);
            }
            o.UIDs = arUIDs.join(',');
            o.friends = new collection(
              toTyped(o.friends, window.gigya.socialize.Friend),
              'UID'
            );
          }
        }
        exports.handleSpecialFields = handleSpecialFields;
        function convertIdentitiesArrayToObject(o) {
          if (o.identities == null) {
            o.identities = {};
            return;
          }
          if (o.identities.constructor != Array) {
            return;
          }
          var identitiesArray = o.identities;
          o.identities = {};
          for (var i = 0; i < identitiesArray.length; i++) {
            o.identities[identitiesArray[i].provider] =
              new window.gigya.socialize.Identity(identitiesArray[i]);
          }
        }
        exports.convertIdentitiesArrayToObject = convertIdentitiesArrayToObject;
        function addUserInfoToEvent(
          response,
          targetObject,
          addLoginProperties,
          useBasePhotoURL
        ) {
          var oUser = response['user'] || response['userInfo'];
          if (targetObject == null) targetObject = {};
          if (oUser != null) {
            targetObject['user'] = objectUtils.clone(oUser);
            if (response['isLoggedIn'] != null)
              targetObject['user']['isLoggedIn'] = response['isLoggedIn'];
            if (response['isSiteUID'] != null)
              targetObject['user']['isSiteUID'] = response['isSiteUID'];
            if (response['iRank'] != null)
              targetObject['user']['iRank'] = response['iRank'];
          }
          if (addLoginProperties) {
            objectUtils.extractProperties(
              response,
              targetObject,
              'signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|signKeysUIDSignature|dataCenter|id_token|groups'
            );
            if (targetObject['user'] != null) {
              targetObject['UID'] = oUser.UID;
              targetObject['isSiteUID'] = oUser.isSiteUID;
              // isSiteUID is temporary for https://gigya.my.salesforce.com/5004000000T3qcZ
            }
          }
          return targetObject;
        }
        exports.addUserInfoToEvent = addUserInfoToEvent;
        function sendEmailNative(params) {
          var userAction = params['userAction'] || {};
          var subject = userAction['title'] || '';
          var body = userAction['linkBack'] || '';
          document.location.href =
            'mailto:?to=&subject=' +
            URLUtils.URLEncode(subject) +
            '&body=' +
            URLUtils.URLEncode(body);
          window.gigya.socialize.sendEmail(params, { dontSendEmail: true }); // To report that send without sending it
        }
        exports.sendEmailNative = sendEmailNative;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/LocalInfo.ts':
      /*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/LocalInfo.ts ***!
  \********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        // Local environment info (browser, capabilities, hosting domain)
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var userAgent = navigator.userAgent.toLowerCase();
        exports.localInfo = {
          baseDomain: '',
          isBrowserSupportsFilesAPI: (function () {
            return (
              typeof FileReader === 'function' || typeof FileReader === 'object'
            );
          })(),
          initTime: new Date(),
          version: 0,
          pageDomain: document.location.hostname,
          protocol: document.location.protocol == 'http:' ? 'http' : 'https',
          userAgent: userAgent,
          isWin: userAgent.indexOf('win') != -1,
          isIE:
            userAgent.indexOf('msie') != -1 ||
            (userAgent.indexOf('mozilla') != -1 &&
              userAgent.indexOf('trident') != -1),
          isIE6: userAgent.indexOf('msie 6.') != -1,
          isIE7: userAgent.indexOf('msie 7.') != -1,
          isIE8: userAgent.indexOf('msie 8.') != -1,
          isIE9: userAgent.indexOf('msie 9.') != -1,
          isIE10: userAgent.indexOf('msie 10.') != -1,
          isIE11:
            userAgent.indexOf('mozilla') != -1 &&
            userAgent.indexOf('trident/7.0') != -1,
          isEdgeLegacy: userAgent.indexOf('edge') != -1,
          isEdge: RegExp(/edg(?!e)/).test(userAgent),
          isIOS:
            userAgent.indexOf('iphone') != -1 ||
            userAgent.indexOf('ipad') != -1 ||
            userAgent.indexOf('ipod') != -1,
          isSafari534: userAgent.indexOf('safari/534') != -1,
          isWeChat: userAgent.indexOf('micromessenger') != -1,
          iosVersion: (function () {
            if (
              userAgent.indexOf('applewebkit') != -1 &&
              userAgent.indexOf('version/') != -1
            ) {
              return parseInt(userAgent.split('version/')[1].split(' ')[0]);
            } else return 0;
          })(),
          isAndroid: userAgent.indexOf('android') != -1,
          isAndroidBrowser: (function (userAgent) {
            if (userAgent.indexOf('mozilla/5.0') === -1) return false;
            if (userAgent.indexOf('android 4') === -1) return false;
            if (userAgent.indexOf('applewebkit') === -1) return false;
            if (userAgent.indexOf('windows phone') !== -1) return false;
            // Special user agents found so far that violate the existance of chrome rule
            // Bug 38367 Android Browser: Mozilla/5.0 (Linux; Android 4.2.2; en-us; SAMSUNG GT-I9500 Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Version/1.0 Chrome/18.0.1025.308 Mobile Safari/535.19
            // Bug 40209 Chrome Browser: Mozilla/5.0 (Linux; Android 4.2.2; SAMSUNG SGT-I747 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.93 Mobile Safari/537.36
            // Windows Phone Browser: Mozilla/5.0 (Mobile; Windows Phone 8.1; Android 4.0; ARM; Trident/7.0; Touch; rv:11.0; IEMobile/11.0; NOKIA; Lumia 920) like iPhone OS 7_0_3 Mac OS X AppleWebKit/537 (KHTML, like Gecko) Mobile Safari/537
            // Chrome Browser: Mozilla/5.0 (Linux; Android 4.2.2; en-gb; SAMSUNG GT-I9500 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Version/1.5 Chrome/28.0.1500.94 Mobile Safari/537.36
            var chromeInfo = /chrome\/(\d+)/.exec(userAgent);
            if (!chromeInfo) return true;
            var chromeVersion = parseInt(chromeInfo[1]);
            return chromeVersion < 20;
          })(userAgent),
          currentBrowser: '',
          androidVersion: (function () {
            if (userAgent.indexOf('android') != -1) {
              return parseFloat(
                userAgent.slice(userAgent.indexOf('android') + 8)
              );
            } else return 0;
          })(),
          isChrome:
            userAgent.indexOf('chrome') != -1 && userAgent.indexOf('edg') == -1,
          isGoogleBot: userAgent.indexOf('googlebot') != -1,
          isFF: userAgent.indexOf('firefox') != -1,
          isOpera: userAgent.indexOf('opera') != -1,
          isSafari:
            navigator.appVersion &&
            navigator.appVersion.toLowerCase().indexOf('safari') != -1 &&
            navigator.appVersion.toLowerCase().indexOf('chrome') == -1 &&
            userAgent.indexOf('android') == -1,
          isIOSWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(
            navigator.userAgent
          ),
          isIOSChrome: userAgent.indexOf('crios') != -1,
          isMAC:
            navigator.appVersion &&
            navigator.appVersion.toLowerCase().indexOf('mac') != -1,
          isWindowsPhone: userAgent.indexOf('windows phone') != -1,
          isFacebookBrowser:
            userAgent.indexOf('fban') != -1 || userAgent.indexOf('fbav') != -1,
          supportsPostMessage:
            window.postMessage != null &&
            (userAgent.indexOf('msie') == -1 ||
              userAgent.indexOf('iemobile') != -1),
          supportsLocalStorage: false,
          supportsSessionStorage: false,
          supportsFlash: (function () {
            // http://stackoverflow.com/questions/998245/how-can-i-detect-if-flash-is-installed-and-if-not-display-a-hidden-div-that-inf
            var supportsFlash = false;
            try {
              if (
                navigator.mimeTypes &&
                navigator.mimeTypes['application/x-shockwave-flash'] !=
                  undefined &&
                navigator.mimeTypes['application/x-shockwave-flash']
                  .enabledPlugin
              ) {
                supportsFlash = true;
              } else {
                var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
                if (fo) {
                  supportsFlash = true;
                }
              }
            } catch (e) {}
            return supportsFlash;
          })(),
          quirksMode:
            document.compatMode == 'BackCompat' &&
            userAgent.indexOf('msie') != -1,
          backCompat: document.compatMode == 'BackCompat',
          // TODO: Add isTablet function for devices non-Mobile
          isMobile: (function () {
            var mobileClients = [
              'iphone',
              'ipod',
              'android',
              'midp',
              '240x320',
              'blackberry',
              'netfront',
              'nokia',
              'panasonic',
              'portalmmm',
              'sharp',
              'sie-',
              'sonyericsson',
              'symbian',
              'windows ce',
              'benq',
              'mda',
              'mot-',
              'opera mini',
              'philips',
              'pocket pc',
              'sagem',
              'samsung',
              'htc',
            ];
            for (var i in mobileClients) {
              if (userAgent.indexOf(mobileClients[i]) != -1) {
                return true;
              }
            }
            return false;
          })(),
          isMobileApp: (function () {
            if (!document.getElementsByTagName)
              // for old IE
              return false;
            var metaTags = document.getElementsByTagName('meta');
            for (var i = 0; i < metaTags.length; i++) {
              if (metaTags[i].getAttribute('name') == 'viewport') {
                var content = metaTags[i].getAttribute('content');
                if (content && content.indexOf('width=device-width') !== -1)
                  return true;
              }
            }
            return false;
          })(),
          isNativeMobileApp: false,
          isTouch: (function () {
            if ('ontouchstart' in window)
              // works on most browsers
              return true;
            if ('onmsgesturechange' in window) {
              // works on ie10
              // Try to determine if IE is open in metro mode. Metro doesn't allow activeX, that's the best test available as of IE11.
              try {
                new ActiveXObject('htmlfile');
                return false;
              } catch (e) {
                return true;
              }
            }
            return false;
          })(),
          isOnLine: function () {
            return navigator.onLine;
          },
          messagingMethod: 1,
        };
        var isStorageEnabled = function (storageName) {
          try {
            var storage = window[storageName];
            if (!storage) {
              return false;
            }
            var testName = '_gig_localStorage_test';
            var testValue = 'just checking for localStorage';
            storage.setItem(testName, testValue);
            var result = storage.getItem(testName) === testValue;
            storage.removeItem(testName);
            return result;
          } catch (ex) {
            // Reasons:
            // - Inside 3rd party API proxy iFrame.
            // - Safari in incognito mode will error with "quota exceeded".
            // - Chrome with 3rd party cookies disabled will throw an error if you access the window.localStorage object in ANY way.
            return false;
          }
        };
        exports.localInfo.supportsLocalStorage =
          isStorageEnabled('localStorage');
        exports.localInfo.supportsSessionStorage =
          isStorageEnabled('sessionStorage');
        exports.localInfo.isMAC =
          exports.localInfo.isMAC && !exports.localInfo.isIOS;
        var os = exports.localInfo.isWin
          ? 'windows'
          : exports.localInfo.isWindowsPhone
          ? 'winphone'
          : exports.localInfo.isIOS
          ? 'ios-v' + exports.localInfo.iosVersion
          : exports.localInfo.isMAC
          ? 'mac'
          : exports.localInfo.isAndroid
          ? 'android'
          : '';
        if (os) os += ' ';
        var browser = exports.localInfo.isChrome
          ? 'chrome'
          : exports.localInfo.isFF
          ? 'firefox'
          : exports.localInfo.isSafari
          ? 'safari'
          : exports.localInfo.isEdge
          ? 'edge'
          : exports.localInfo.isEdgeLegacy
          ? 'edge legacy'
          : exports.localInfo.isIE11
          ? 'ie11'
          : exports.localInfo.isIE10
          ? 'ie10'
          : exports.localInfo.isIE9
          ? 'ie9'
          : exports.localInfo.isIE8
          ? 'ie8'
          : '';
        exports.localInfo.currentBrowser = os + browser;
        var ClientFeature = /** @class */ (function () {
          function ClientFeature(navigator, screen) {
            if (navigator === void 0) {
              navigator = window.gigya._.WindowProvider.navigator();
            }
            if (screen === void 0) {
              screen = window.gigya._.WindowProvider.screen();
            }
            this.navigator = navigator;
            this.screen = screen;
            this.collectData();
          }
          ClientFeature.prototype.collectData = function () {
            var _a, _b, _c, _d, _e, _f, _g;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var permissionStatus,
                state,
                batteryInfo,
                _h,
                charging,
                chargingTime,
                dischargingTime,
                level;
              return tslib_1.__generator(this, function (_j) {
                switch (_j.label) {
                  case 0:
                    this.userAgent =
                      (_a = this.navigator) === null || _a === void 0
                        ? void 0
                        : _a.userAgent;
                    this.plugins = Array.from(
                      ((_b = this.navigator) === null || _b === void 0
                        ? void 0
                        : _b.plugins) || []
                    ).map(function (_a) {
                      var name = _a.name,
                        filename = _a.filename,
                        length = _a.length;
                      return { name: name, filename: filename, length: length };
                    });
                    this.localTime = new Date().toLocaleTimeString();
                    this.timezoneOffset = new Date().getTimezoneOffset();
                    return [
                      4 /*yield*/,
                      (_d =
                        (_c = this.navigator) === null || _c === void 0
                          ? void 0
                          : _c.permissions) === null || _d === void 0
                        ? void 0
                        : _d.query({ name: 'notifications' }),
                    ];
                  case 1:
                    permissionStatus = _j.sent();
                    if (permissionStatus) {
                      state = permissionStatus.state;
                      this.permissionStatus = { state: state };
                    }
                    this.webdriver =
                      (_e = this.navigator) === null || _e === void 0
                        ? void 0
                        : _e.webdriver;
                    _h = this.navigator.getBattery;
                    if (!_h) return [3 /*break*/, 3];
                    return [4 /*yield*/, this.navigator.getBattery()];
                  case 2:
                    _h = _j.sent();
                    _j.label = 3;
                  case 3:
                    batteryInfo = _h;
                    if (batteryInfo) {
                      (charging = batteryInfo.charging),
                        (chargingTime = batteryInfo.chargingTime),
                        (dischargingTime = batteryInfo.dischargingTime),
                        (level = batteryInfo.level);
                      this.batteryInfo = {
                        charging: charging,
                        chargingTime: chargingTime,
                        dischargingTime: dischargingTime,
                        level: level,
                      };
                    }
                    this.features = [
                      ((_f = this.navigator) === null || _f === void 0
                        ? void 0
                        : _f.maxTouchPoints) ||
                        ((_g = this.navigator) === null || _g === void 0
                          ? void 0
                          : _g.msMaxTouchPoints),
                      this.screen.width +
                        '|' +
                        this.screen.height +
                        '|' +
                        this.screen.colorDepth,
                      this.navigator.javaEnabled(),
                      'sendBeacon' in this.navigator,
                    ];
                    return [2 /*return*/];
                }
              });
            });
          };
          return ClientFeature;
        })();
        exports.ClientFeature = ClientFeature;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Services/FlagService.ts':
      /*!*******************************************************!*\
  !*** ./src/core/Gigya.Js/app/Services/FlagService.ts ***!
  \*******************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var FlagService = /** @class */ (function () {
          function FlagService() {}
          Object.defineProperty(FlagService, 'forceWebSdkBootstrap', {
            get: function () {
              return this.get('forceWebSdkBootstrap');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'useGigyaJsBaseDomain', {
            get: function () {
              return this.get('useGigyaJsBaseDomain');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'hideSSOFrame', {
            get: function () {
              return this.get('hideSSOFrame');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'wcagContrastFix', {
            get: function () {
              return this.get('wcagContrastFix');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'newFormLinkInstanceElement', {
            get: function () {
              return this.get('newFormLinkInstanceElement');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'stopSendingReports', {
            get: function () {
              return this.get('stopSendingReports');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'setGroupApiDomainAfterLogin', {
            get: function () {
              return this.get('setGroupApiDomainAfterLogin');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'useHttpStatusCode', {
            get: function () {
              return this.get('useHttpStatusCode');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'alwaysCheckCookieSave', {
            get: function () {
              return this.get('alwaysCheckCookieSave');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'fixPhoneTFATranslations', {
            get: function () {
              return this.get('fixPhoneTFATranslations');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'loadSsoFrameOnlyOnce', {
            get: function () {
              return this.get('loadSsoFrameOnlyOnce');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'verifyLoginOnlyOnce', {
            get: function () {
              return this.get('verifyLoginOnlyOnce');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'sendLangForEmailOTP', {
            get: function () {
              return this.get('sendLangForEmailOTP');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'setProviderFromResponse', {
            get: function () {
              return this.get('setProviderFromResponse');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'setCookieSameSiteLaxSession', {
            get: function () {
              return this.get('setCookieSameSiteLaxSession');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'setCookieSameSiteLaxSocial', {
            get: function () {
              return this.get('setCookieSameSiteLaxSocial');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(
            FlagService,
            'setCookieSameSiteLaxLowPriority',
            {
              get: function () {
                return this.get('setCookieSameSiteLaxLowPriority');
              },
              enumerable: true,
              configurable: true,
            }
          );
          Object.defineProperty(FlagService, 'forceErrorReport', {
            get: function () {
              return this.get('forceErrorReport');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'skipSameScreenCheckOnSwitch', {
            get: function () {
              return this.get('skipSameScreenCheckOnSwitch');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'getOnlyVisibleField', {
            get: function () {
              return this.get('getOnlyVisibleField');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'updateAccountInfoAsync', {
            get: function () {
              return this.get('updateAccountInfoAsync');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'sanitizeEvaluatedValue', {
            get: function () {
              return this.get('sanitizeEvaluatedValue');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'useSessionVerify', {
            get: function () {
              return this.get('useSessionVerify');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'useExtendedPhoneNumberRegex', {
            get: function () {
              return this.get('useExtendedPhoneNumberRegex');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'generateNewCodeWcagCompliance', {
            get: function () {
              return this.get('generateNewCodeWcagCompliance');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(
            FlagService,
            'enforceAuthFlowRedirectForSocial',
            {
              get: function () {
                return this.get('enforceAuthFlowRedirectForSocial');
              },
              enumerable: true,
              configurable: true,
            }
          );
          Object.defineProperty(FlagService, 'useDecodeURIComponent', {
            get: function () {
              return this.get('useDecodeURIComponent');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'useOidcGetParamHashOldStyle', {
            get: function () {
              return this.get('useOidcGetParamHashOldStyle');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(FlagService, 'useViewportPollerAction', {
            get: function () {
              return this.get('useViewportPollerAction');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(
            FlagService,
            'ignoreInterruptionsInOidcPassiveLogin',
            {
              get: function () {
                return this.get('ignoreInterruptionsInOidcPassiveLogin');
              },
              enumerable: true,
              configurable: true,
            }
          );
          Object.defineProperty(FlagService, 'overrideAllChildContext', {
            get: function () {
              return this.get('overrideAllChildContext');
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(
            FlagService,
            'dispatchLoginEventWhenHandlerAdded',
            {
              get: function () {
                return this.get('dispatchLoginEventWhenHandlerAdded');
              },
              enumerable: true,
              configurable: true,
            }
          );
          FlagService.get = function (name) {
            var _a, _b;
            return (
              (((_a = window.gigya._.config) === null || _a === void 0
                ? void 0
                : _a.flags) &&
                ((_b = window.gigya._.config) === null || _b === void 0
                  ? void 0
                  : _b.flags[name])) ||
              false
            );
          };
          Object.defineProperty(FlagService, 'apiFlags', {
            // Every flag that is associated with data modification related to the api layer
            get: function () {
              return [];
            },
            enumerable: true,
            configurable: true,
          });
          return FlagService;
        })();
        exports.FlagService = FlagService;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Services/SessionService.ts':
      /*!**********************************************************!*\
  !*** ./src/core/Gigya.Js/app/Services/SessionService.ts ***!
  \**********************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var sessionCache_1 = __webpack_require__(
          /*! ../Utils/sessionCache */ './src/core/Gigya.Js/app/Utils/sessionCache.ts'
        );
        var object_1 = __webpack_require__(
          /*! ../Utils/object */ './src/core/Gigya.Js/app/Utils/object.ts'
        );
        var SessionService = /** @class */ (function () {
          function SessionService() {}
          SessionService.prototype.isSessionVerified = function (glt, apiKey) {
            if (apiKey === void 0) {
              apiKey = window.gigya.thisScript.APIKey;
            }
            var key = this.createKey(glt, apiKey);
            return sessionCache_1.get(key) === 'true';
          };
          SessionService.prototype.setIsSessionVerified = function (
            glt,
            verified,
            apiKey
          ) {
            if (apiKey === void 0) {
              apiKey = window.gigya.thisScript.APIKey;
            }
            var key = this.createKey(glt, apiKey);
            sessionCache_1.set(key, '' + verified);
          };
          SessionService.prototype.createKey = function (glt, apiKey) {
            var key = object_1.getMurmurHash(glt + '_' + apiKey, 15).toString();
            return btoa(key);
          };
          return SessionService;
        })();
        exports.sessionData = new SessionService();

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Services/SiteData.ts':
      /*!****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Services/SiteData.ts ***!
  \****************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var localStorage_1 = __webpack_require__(
          /*! ../Utils/localStorage */ './src/core/Gigya.Js/app/Utils/localStorage.ts'
        );
        var object_1 = __webpack_require__(
          /*! ../Utils/object */ './src/core/Gigya.Js/app/Utils/object.ts'
        );
        var _merge = __webpack_require__(
          /*! lodash.merge */ '../node_modules/lodash.merge/index.js'
        );
        var MAX_LIMIT_OF_USERS_PREFERRED_LOGIN_METHODS_PER_SITE = 10;
        var SiteDataService = /** @class */ (function () {
          function SiteDataService() {}
          Object.defineProperty(SiteDataService, 'SITE_PREFERENCES_KEY', {
            get: function () {
              return window.gigya.apiKey + '_preferences';
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(SiteDataService, 'SITE_GIG_KEY', {
            get: function () {
              return window.gigya.apiKey + '_gig';
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(
            SiteDataService.prototype,
            'didForcedBootstrap',
            {
              get: function () {
                return (
                  this.getDataByKey(SiteDataService.SITE_GIG_KEY)
                    .didForcedBootstrap || null
                );
              },
              set: function (didForcedBootstrap) {
                this.setDataByKey(SiteDataService.SITE_GIG_KEY, {
                  didForcedBootstrap: didForcedBootstrap,
                });
              },
              enumerable: true,
              configurable: true,
            }
          );
          SiteDataService.prototype.getPreferredLoginMethod = function (
            identifier
          ) {
            var _a, _b, _c, _d;
            if (!identifier) {
              return '';
            }
            var userPreferences = this.getDataByKey(
              SiteDataService.SITE_PREFERENCES_KEY
            );
            var usersPreferredLoginMethods =
              (_b =
                (_a =
                  userPreferences === null || userPreferences === void 0
                    ? void 0
                    : userPreferences.authentication) === null || _a === void 0
                  ? void 0
                  : _a.usersPreferredLoginMethods) !== null && _b !== void 0
                ? _b
                : [];
            return (_d =
              (_c = usersPreferredLoginMethods.find(function (user) {
                return user.identifier === identifier;
              })) === null || _c === void 0
                ? void 0
                : _c.preferredLoginMethod) !== null && _d !== void 0
              ? _d
              : '';
          };
          SiteDataService.prototype.setPreferredLoginMethod = function (
            authMethod,
            identifier
          ) {
            var _a, _b, _c, _d;
            if (!identifier) {
              return;
            }
            var userPreferences = this.getDataByKey(
              SiteDataService.SITE_PREFERENCES_KEY
            );
            var usersPreferredLoginMethods = tslib_1.__spreadArrays(
              (_b =
                (_a =
                  userPreferences === null || userPreferences === void 0
                    ? void 0
                    : userPreferences.authentication) === null || _a === void 0
                  ? void 0
                  : _a.usersPreferredLoginMethods) !== null && _b !== void 0
                ? _b
                : []
            );
            var tfaPreferredMethod =
              (_d =
                (_c =
                  userPreferences === null || userPreferences === void 0
                    ? void 0
                    : userPreferences.authentication) === null || _c === void 0
                  ? void 0
                  : _c.tfaPreferredMethod) !== null && _d !== void 0
                ? _d
                : '';
            var isUserExists = usersPreferredLoginMethods.some(function (user) {
              return user.identifier === identifier;
            });
            if (
              this.isMaxLimitUsersPreferredLoginMethodsReached(
                usersPreferredLoginMethods
              ) &&
              !isUserExists
            ) {
              usersPreferredLoginMethods =
                this.removeOldestUserPreferredLoginMethod(
                  usersPreferredLoginMethods
                );
            }
            if (!isUserExists) {
              usersPreferredLoginMethods = this.addUserPreferredLoginMethod(
                usersPreferredLoginMethods,
                { identifier: identifier, preferredLoginMethod: authMethod }
              );
            }
            if (isUserExists) {
              usersPreferredLoginMethods =
                this.refreshExistingUserPreferredLoginMethod({
                  authMethod: authMethod,
                  identifier: identifier,
                  usersPreferredLoginMethods: usersPreferredLoginMethods,
                });
            }
            this.setDataByKey(SiteDataService.SITE_PREFERENCES_KEY, {
              authentication: {
                usersPreferredLoginMethods: usersPreferredLoginMethods,
                tfaPreferredMethod: tfaPreferredMethod,
              },
            });
          };
          SiteDataService.prototype.setScreenVariant = function (
            screenSetId,
            screenId,
            testId,
            variantId
          ) {
            var _a, _b, _c;
            this.setDataByKey(
              SiteDataService.SITE_PREFERENCES_KEY,
              ((_a = {}),
              (_a[screenSetId] = {
                screens:
                  ((_b = {}),
                  (_b[screenId] =
                    ((_c = {}), (_c[testId] = { variant: variantId }), _c)),
                  _b),
              }),
              _a)
            );
          };
          SiteDataService.prototype.getScreenVariant = function (
            screenSetId,
            screenId,
            testId
          ) {
            var _a, _b, _c, _d;
            var preferences = this.getDataByKey(
              SiteDataService.SITE_PREFERENCES_KEY
            );
            return (_d =
              (_c =
                (_b =
                  (_a =
                    preferences === null || preferences === void 0
                      ? void 0
                      : preferences[screenSetId]) === null || _a === void 0
                    ? void 0
                    : _a.screens) === null || _b === void 0
                  ? void 0
                  : _b[screenId]) === null || _c === void 0
                ? void 0
                : _c[testId]) === null || _d === void 0
              ? void 0
              : _d.variant;
          };
          SiteDataService.prototype.getDataByKey = function (key) {
            return localStorage_1.getObject(key, {});
          };
          SiteDataService.prototype.setDataByKey = function (key, newData) {
            var oldData = this.getDataByKey(key);
            try {
              localStorage_1.setObject(
                key,
                object_1.removeUndefined(_merge(oldData, newData))
              );
            } catch (error) {
              window.gigya.logger.report('Failed to save local site data', {
                error: error,
                key: key,
              });
            }
          };
          SiteDataService.prototype.refreshExistingUserPreferredLoginMethod =
            function (_a) {
              var usersPreferredLoginMethods = _a.usersPreferredLoginMethods,
                identifier = _a.identifier,
                authMethod = _a.authMethod;
              var remainingMethods = this.removeUserPreferredLoginMethod(
                usersPreferredLoginMethods,
                identifier
              );
              return this.addUserPreferredLoginMethod(remainingMethods, {
                identifier: identifier,
                preferredLoginMethod: authMethod,
              });
            };
          SiteDataService.prototype.removeUserPreferredLoginMethod = function (
            usersPreferredLoginMethods,
            identifier
          ) {
            return usersPreferredLoginMethods.filter(function (
              userLoginMethod
            ) {
              return userLoginMethod.identifier !== identifier;
            });
          };
          SiteDataService.prototype.isMaxLimitUsersPreferredLoginMethodsReached =
            function (usersPreferredLoginMethods) {
              return (
                usersPreferredLoginMethods.length ===
                MAX_LIMIT_OF_USERS_PREFERRED_LOGIN_METHODS_PER_SITE
              );
            };
          SiteDataService.prototype.removeOldestUserPreferredLoginMethod =
            function (usersPreferredLoginMethods) {
              var oldestMethod = usersPreferredLoginMethods[0];
              return this.removeUserPreferredLoginMethod(
                usersPreferredLoginMethods,
                oldestMethod === null || oldestMethod === void 0
                  ? void 0
                  : oldestMethod.identifier
              );
            };
          SiteDataService.prototype.addUserPreferredLoginMethod = function (
            usersPreferredLoginMethods,
            userPreferredLogin
          ) {
            return tslib_1.__spreadArrays(usersPreferredLoginMethods, [
              userPreferredLogin,
            ]);
          };
          return SiteDataService;
        })();
        exports.SiteDataService = SiteDataService;
        exports.siteData = new SiteDataService();

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/DOM.ts':
      /*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/DOM.ts ***!
  \********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var LocalInfo_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/LocalInfo */ './src/core/Gigya.Js/app/LocalInfo.ts'
        );
        var viewportUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/viewport */ './src/core/Gigya.Js/app/Utils/viewport.ts'
        );
        var functionsUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/functions */ './src/core/Gigya.Js/app/Utils/functions.ts'
        );
        exports._popupContainers = [];
        exports._pseudoContainers = [];
        var _nextZIndex = 999999999;
        var backListener = null;
        function getNextZIndex() {
          _nextZIndex++;
          return _nextZIndex;
        }
        exports.getNextZIndex = getNextZIndex;
        function getGigyaScriptElement(fileNames) {
          var scripts = document.getElementsByTagName('script');
          var scriptElement;
          var gigyaCdnRegex = /\/\/cdn(s)?\.(ru1\.)?gigya.com/;
          for (var i = scripts.length - 1; i >= 0; i--) {
            var script = scripts[i];
            var src = script.src.toLowerCase();
            if (src !== '') {
              if (gigyaCdnRegex.test(src) || src.indexOf('?apikey=') > -1) {
                var isFileNameExistInSrc =
                  fileNames.length === 0 ||
                  fileNames.some(function (fileName) {
                    return src.indexOf(fileName) > -1;
                  });
                if (isFileNameExistInSrc) {
                  scriptElement = script;
                  break;
                }
              }
            }
          }
          return scriptElement;
        }
        exports.getGigyaScriptElement = getGigyaScriptElement;
        function dispatch(el, eventName) {
          var event;
          try {
            event = new Event(eventName);
          } catch (e) {
            // IE10 and below support
            event = document.createEvent('CustomEvent');
            event.initCustomEvent(eventName, true, true, {});
          }
          el.dispatchEvent(event);
        }
        exports.dispatch = dispatch;
        function addButtonSubmitListener(el, handler, event, debugName) {
          if (event === void 0) {
            event = 'click';
          }
          // Just in case the element does not exist.
          if (!el) {
            return;
          }
          el.setAttribute('role', 'button');
          if (el.getAttribute('tabindex') != '-1') {
            el.setAttribute('tabindex', '0');
          }
          addEventListener(el, event, function (e) {
            return handler(e);
          });
          addEventListener(el, 'keydown', function (e) {
            if ((e.which || e.keyCode) == 13) {
              e.preventDefault();
              handler(e);
            }
          });
        }
        exports.addButtonSubmitListener = addButtonSubmitListener;
        function addEventListener(el, eventName, handler) {
          if (!el || !handler) return;
          if (el.addEventListener) {
            el.addEventListener(eventName, handler, true);
          } else {
            el.attachEvent('on' + eventName, handler);
          }
        }
        exports.addEventListener = addEventListener;
        function addActivationHandler(el, handler) {
          if (!el || !handler) return;
          this.addEventListener(el, 'keydown', function (event) {
            if (event.code === 'Space' || event.code === 'Enter') {
              handler();
            }
          });
          this.addEventListener(el, 'click', handler);
        }
        exports.addActivationHandler = addActivationHandler;
        function removeEventListener(el, eventName, handler) {
          if (!el || !handler) return;
          if (el.removeEventListener) {
            el.removeEventListener(eventName, handler, true);
          } else {
            el.detachEvent('on' + eventName, handler);
          }
        }
        exports.removeEventListener = removeEventListener;
        function disableDefaultEventHandling(event) {
          if (event.preventDefault) {
            event.preventDefault();
          } else if (window.event) {
            window.event.returnValue = false;
          }
        }
        exports.disableDefaultEventHandling = disableDefaultEventHandling;
        function addDialogBackListener(handler) {
          _removeDialogBackListener();
          // This should fire when back is clicked
          backListener = function (e) {
            if (e && e.newURL && e.newURL.indexOf('|gigyaMobileDialog') == -1) {
              handler(e);
              _removeDialogBackListener();
            }
          };
          // hash could change right after the call if it was initiated from a link that didn't return false
          window.setTimeout(function () {
            if (window.location.hash.indexOf('|gigyaMobileDialog') == -1) {
              window.location.hash =
                window.location.hash + '|gigyaMobileDialog';
            }
            addEventListener(window, 'hashchange', backListener);
          }, 50);
        }
        exports.addDialogBackListener = addDialogBackListener;
        function _removeDialogBackListener() {
          if (!backListener) return;
          removeEventListener(window, 'hashchange', backListener);
          backListener = null;
          //restore previous hash
          window.location.hash = window.location.hash.replace(
            '|gigyaMobileDialog',
            ''
          );
        }
        exports._removeDialogBackListener = _removeDialogBackListener;
        function prependToBody(el, document) {
          if (document === void 0) {
            document = window.document;
          }
          if (!document.body) return;
          if (document.body.insertBefore && document.body.firstChild) {
            document.body.insertBefore(el, document.body.firstChild);
          } else {
            // Backward compatibility
            document.body.appendChild(el);
          }
        }
        exports.prependToBody = prependToBody;
        function appendToBody(el, document) {
          if (document === void 0) {
            document = window.document;
          }
          if (!document.body) return;
          document.body.appendChild(el);
        }
        exports.appendToBody = appendToBody;
        function removeElement(el) {
          if (el && el.parentElement) {
            el.parentElement.removeChild(el);
          }
        }
        exports.removeElement = removeElement;
        function isChildOf(child, parent) {
          var directParent = child.parentNode;
          while (directParent) {
            if (parent == directParent) {
              return true;
            }
            directParent = directParent.parentNode;
          }
          return false;
        }
        exports.isChildOf = isChildOf;
        function isVisible(el) {
          while (el) {
            var computedStyle = getComputedStyle(el);
            if (
              computedStyle.display === 'none' ||
              computedStyle.visibility === 'hidden'
            ) {
              return false;
            } else {
              el = el.parentElement;
            }
          }
          return true;
        }
        exports.isVisible = isVisible;
        function getCenteredDivID(name) {
          return (
            'gig_' +
            LocalInfo_1.localInfo.initTime.getTime().toString() +
            '_' +
            name
          );
        }
        exports.getCenteredDivID = getCenteredDivID;
        function createElementWithAttributes(domElemName, domElemAttrs) {
          var newDomElem = document.createElement(domElemName);
          if (domElemAttrs) {
            for (var elemAttr in domElemAttrs) {
              newDomElem[elemAttr] = domElemAttrs[elemAttr];
            }
          }
          return newDomElem;
        }
        exports.createElementWithAttributes = createElementWithAttributes;
        function createTopLevelDiv(id) {
          var el = document.createElement('div');
          if (el.style.zIndex != null) {
            el.style.zIndex = '' + getNextZIndex();
          }
          el.innerHTML = '';
          if (id) {
            el.id = id;
          }
          if (document.body) {
            if (document.body.insertBefore && document.body.firstChild) {
              document.body.insertBefore(el, document.body.firstChild);
            } else if (document.body.appendChild) {
              document.body.appendChild(el);
            }
          }
          return el;
        }
        exports.createTopLevelDiv = createTopLevelDiv;
        function hideByID(id) {
          var el = document.getElementById(id);
          if (el) {
            el.style.display = 'none';
          }
        }
        exports.hideByID = hideByID;
        function showByID(id) {
          var el = document.getElementById(id);
          if (el) {
            el.style.display = LocalInfo_1.localInfo.isIE6
              ? el.tagName == 'TD'
                ? 'table-cell'
                : el.tagName == 'TR'
                ? ''
                : el.tagName == 'TABLE'
                ? ''
                : 'block'
              : '';
          }
        }
        exports.showByID = showByID;
        function clearByID(id) {
          try {
            var c = document.getElementById(id);
            if (c != null) {
              c.innerHTML = '';
            }
          } catch (e) {}
        }
        exports.clearByID = clearByID;
        function getHTMLSize(html, container) {
          var divMeasure = document.createElement('div');
          divMeasure.style.position = 'absolute';
          divMeasure.style.left = '-1000px';
          divMeasure.innerHTML = html;
          container.appendChild(divMeasure);
          var w = divMeasure.offsetWidth;
          var h = divMeasure.offsetHeight;
          divMeasure.parentNode.removeChild(divMeasure);
          return { w: w, h: h };
        }
        exports.getHTMLSize = getHTMLSize;
        function getElementsByClass(parentElement, className, includeParent) {
          if (!parentElement) {
            return [];
          }
          var arEls = [];
          if (includeParent && isElementClass(parentElement, className)) {
            arEls.push(parentElement);
          }
          var els = parentElement.getElementsByTagName('*');
          for (var i = 0; i < els.length; i++) {
            if (isElementClass(els[i], className)) {
              arEls.push(els[i]);
            }
          }
          return arEls || [];
        }
        exports.getElementsByClass = getElementsByClass;
        function getElementsByAttribute(
          parentElement,
          tagName,
          attributeName,
          attributeValue
        ) {
          var arEls = [];
          var els = parentElement.getElementsByTagName(tagName);
          for (var i = 0; i < els.length; i++) {
            if (els[i].getAttribute(attributeName) == attributeValue) {
              arEls.push(els[i]);
            }
          }
          return arEls;
        }
        exports.getElementsByAttribute = getElementsByAttribute;
        function getElementPosition(el) {
          if (!el) {
            return { left: 0, top: 0, bottom: 0, right: 0 };
          }
          var rect = el.getBoundingClientRect();
          var scroll = viewportUtils.getScroll();
          var left = rect.left + scroll.left;
          var top = rect.top + scroll.top;
          return {
            left: left,
            top: top,
            right: left + rect.width,
            bottom: top + rect.height,
          };
        }
        exports.getElementPosition = getElementPosition;
        function addClassToElement(el, className) {
          if (!el) {
            return;
          }
          var existingClasses = el.className ? getClassNames(el) : [];
          var existingOriginalLength = existingClasses.length;
          var newClasses = className.split(' ');
          for (var j in newClasses) {
            var exists = false;
            if (!newClasses[j]) {
              break;
            }
            for (var i in existingClasses) {
              if (existingClasses[i] === newClasses[j]) {
                exists = true;
                break;
              }
            }
            if (!exists) {
              existingClasses.push(newClasses[j]);
            }
          }
          if (existingClasses.length !== existingOriginalLength) {
            el.className = existingClasses.join(' ');
          }
        }
        exports.addClassToElement = addClassToElement;
        function removeClassFromElement(el, className, substring) {
          if (substring === void 0) {
            substring = false;
          }
          if (!el) {
            return;
          }
          var arClass = getClassNames(el);
          for (var i = arClass.length - 1; i >= 0; i--) {
            if (
              arClass[i] === className ||
              (substring && arClass[i].indexOf(className) !== -1)
            ) {
              arClass.splice(i, 1);
            }
          }
          el.className = arClass.join(' ');
        }
        exports.removeClassFromElement = removeClassFromElement;
        function getClassNames(el) {
          var classes = [];
          if (typeof el.className === 'string') {
            classes = el.className.split(' ');
          }
          return classes;
        }
        exports.getClassNames = getClassNames;
        function isElementClass(el, className) {
          if (!el) return false;
          else if (!className) return true;
          else if (!el.className) return false;
          var exists = false;
          var arClass = getClassNames(el);
          for (var i = 0; i < arClass.length; i++) {
            if (arClass[i] === className) {
              exists = true;
              break;
            }
          }
          return exists;
        }
        exports.isElementClass = isElementClass;
        function cancelEvent(event) {
          if (!event) return;
          if ('cancelable' in event)
            // All browsers except <IE9
            event.preventDefault();
          else event.returnValue = false;
        }
        exports.cancelEvent = cancelEvent;
        function createElement(type, name) {
          var divContainer = document.createElement('div');
          name = name || '';
          divContainer.innerHTML =
            '<' +
            type +
            ' name="' +
            name +
            '" id="' +
            name +
            '"></' +
            type +
            '>';
          return divContainer.firstChild;
        }
        exports.createElement = createElement;
        function setSize(container, w, h, center) {
          if (container == null || container.style == null) {
            return;
          }
          if (w) {
            w = '' + w;
            var isWidthPrecentage = w.indexOf('%') > 0;
            if (!isNaN(w) || isWidthPrecentage) {
              var widthValue = '' + (isWidthPrecentage ? w : w + 'px');
              if (container.style.width != widthValue) {
                container.style.width = widthValue;
              }
            }
          }
          if (h) {
            h = '' + h;
            var isHeightPrecentage = h.indexOf('%') > 0;
            if (!isNaN(w) || isHeightPrecentage) {
              var heightValue = '' + (isHeightPrecentage ? h : h + 'px');
              if (container.style.height !== heightValue) {
                container.style.height = heightValue;
              }
            }
          }
          if (center && w && h) {
            if (container.style.zIndex == null || center) {
              container.style.zIndex = '' + getNextZIndex();
            }
            var vp = viewportUtils.getInnerSize();
            var scrl = viewportUtils.getScroll();
            var vpt = scrl.top;
            var vpl = scrl.left;
            container.style.top =
              '' + Math.max(0, vpt + Math.floor((vp.h - h) / 2)) + 'px';
            container.style.left =
              '' + Math.max(0, vpl + Math.floor((vp.w - w) / 2)) + 'px';
            container.style.visibility = '';
          }
        }
        exports.setSize = setSize;
        function createHiddenIframe(src) {
          var ifr = document.createElement('iframe');
          ifr.src = src;
          ifr.style.width = '30px';
          ifr.style.height = '10px';
          ifr.style.position = 'absolute';
          ifr.style.top = '-1000px';
          ifr.style.left = '-1000px';
          if (document.body) {
            appendToBody(ifr);
          } else {
            functionsUtils.invokeOnPageLoad(function () {
              appendToBody(ifr);
            });
          }
          return ifr;
        }
        exports.createHiddenIframe = createHiddenIframe;
        function attributeEncode(value) {
          return value
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/\"/g, '&quot;')
            .replace(/\'/g, '&#39;'); // IE8 doesn't support &apos;
        }
        exports.attributeEncode = attributeEncode;
        function manipulateAttributes(
          elements,
          matcher,
          replacePredicate,
          criteria
        ) {
          if (criteria === void 0) {
            criteria = function () {
              return true;
            };
          }
          elements.forEach(function (el) {
            if (!el.attributes) return;
            Array.prototype.slice.call(el.attributes).forEach(function (attr) {
              if (criteria(attr)) {
                attr.value = attr.value.replace(matcher, replacePredicate);
              }
            });
          });
        }
        exports.manipulateAttributes = manipulateAttributes;
        function textNodesUnder(el) {
          var n;
          var textNodes = [];
          var treeWalker = document.createTreeWalker(
            el,
            NodeFilter.SHOW_TEXT,
            null,
            false
          );
          while ((n = treeWalker.nextNode())) {
            textNodes.push(n);
          }
          return textNodes;
        }
        exports.textNodesUnder = textNodesUnder;
        function isHTMLBooleanAttribute(attrName) {
          return (
            [
              'autocomplete',
              'autofocus',
              'checked',
              'disabled',
              'hidden',
              'readonly',
              'required',
              'selected',
            ].indexOf(attrName) > -1
          );
        }
        exports.isHTMLBooleanAttribute = isHTMLBooleanAttribute;
        function isBelongToGigyaFieldset(el) {
          if (!el || el instanceof HTMLFormElement) {
            return false; // end of recursion - element is not a child of a fieldset
          }
          if (isElementClass(el.parentElement, 'gigya-fieldset')) {
            return true;
          }
          return isBelongToGigyaFieldset(el.parentElement);
        }
        exports.isBelongToGigyaFieldset = isBelongToGigyaFieldset;
        function getClosestElement(elem, selector, parent) {
          if (parent === void 0) {
            parent = document;
          }
          setMatchesPolyfill();
          // Get the closest matching element
          for (; elem && elem !== parent; elem = elem.parentNode) {
            if (
              elem === null || elem === void 0 ? void 0 : elem.matches(selector)
            )
              return elem;
          }
          return null;
        }
        exports.getClosestElement = getClosestElement;
        function createElementFromTemplate(template) {
          if (template === void 0) {
            template = '';
          }
          var _a;
          var div = document.createElement('div');
          div.innerHTML =
            template === null || template === void 0 ? void 0 : template.trim();
          return (_a = div.firstChild) !== null && _a !== void 0 ? _a : div;
        }
        exports.createElementFromTemplate = createElementFromTemplate;
        function setMatchesPolyfill() {
          if (!Element.prototype.matches) {
            // @ts-ignore
            Element.prototype.matches =
              Element.prototype.msMatchesSelector ||
              Element.prototype.webkitMatchesSelector;
          }
        }
        function isParentHasClass(nativeElement, className) {
          var _a;
          if (
            (_a =
              nativeElement === null || nativeElement === void 0
                ? void 0
                : nativeElement.classList) === null || _a === void 0
              ? void 0
              : _a.contains(className)
          ) {
            return true;
          }
          if (
            !(nativeElement === null || nativeElement === void 0
              ? void 0
              : nativeElement.parentElement)
          ) {
            return false;
          }
          return isParentHasClass(
            nativeElement === null || nativeElement === void 0
              ? void 0
              : nativeElement.parentElement,
            className
          );
        }
        exports.isParentHasClass = isParentHasClass;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/HTTP.ts':
      /*!*********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/HTTP.ts ***!
  \*********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var objectUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/object */ './src/core/Gigya.Js/app/Utils/object.ts'
        );
        var DOMUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/DOM */ './src/core/Gigya.Js/app/Utils/DOM.ts'
        );
        var Uri_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/Uri */ './src/core/Gigya.Js/app/Utils/Uri.ts'
        );
        function redirect(url, arParams, method, target, workDocument) {
          if (workDocument === void 0) {
            workDocument = window.document;
          }
          if (method && method.toLowerCase() == 'post') {
            var form = workDocument.createElement('form');
            var arFieldsHTML = [];
            form.setAttribute('accept-charset', 'UTF-8');
            form.setAttribute('method', 'POST');
            form.setAttribute('action', url);
            if (target) form.setAttribute('target', target);
            var params = objectUtils.merge(arParams);
            for (var p in params) {
              if (
                (typeof params[p] == 'number' ||
                  typeof params[p] == 'boolean' ||
                  typeof params[p] == 'string') &&
                p != 'eventName'
              ) {
                arFieldsHTML.push(
                  '<textarea name="' +
                    encodeURIComponent(p) +
                    '">' +
                    params[p].toString().replace(/\&/g, '&amp;') +
                    '</textarea>'
                );
              }
            }
            form.innerHTML = arFieldsHTML.join('');
            form.style.display = 'none';
            DOMUtils.appendToBody(form, workDocument);
            form.submit();
          } else {
            var uri = new Uri_1.Uri(url);
            var query = {};
            for (var i = 0; i < arParams.length; i++) {
              var params_1 = arParams[i];
              for (var name in params_1) {
                if (params_1.hasOwnProperty(name)) {
                  var val = params_1[name];
                  query[name] = val;
                }
              }
            }
            uri.addToSearch(query);
            workDocument.location.href = uri.toString();
          }
        }
        exports.redirect = redirect;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/JSON.ts':
      /*!*********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/JSON.ts ***!
  \*********************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        function serialize(obj, includeFunctions, prettyPrint, l, maxLevel) {
          if (includeFunctions === void 0) {
            includeFunctions = false;
          }
          if (prettyPrint === void 0) {
            prettyPrint = false;
          }
          if (l === void 0) {
            l = 0;
          }
          if (maxLevel === void 0) {
            maxLevel = 20;
          }
          if (!window.gigya.localInfo.isIE8) {
            return window['JSON'].stringify(obj);
          } else {
            if (!l) l = 0;
            if (l > maxLevel) return '[Too deep]';
            var prefix = '';
            var newline = '';
            var tab = '';
            if (prettyPrint) {
              tab = '\t';
              newline = '\n';
              for (var i = 0; i < l + 1; i++) {
                prefix += tab;
              }
            }
            var t = typeof obj;
            if (t == 'function') {
              return t.toString();
            }
            if (t != 'object' || obj === null) {
              // simple data type
              if (t == 'string')
                obj =
                  '"' +
                  obj
                    .replace(/(\"|\\)/g, '\\$1')
                    .replace(/\r\n|\r|\n/g, '\\n') +
                  '"';
              return String(obj);
            } else {
              var n,
                v,
                json = [],
                arr = obj && obj.constructor == Array;
              if (arr) {
                for (var i = 0; i < obj.length; i++) {
                  v = obj[i];
                  t = typeof v;
                  if (v == null || t == 'undefined') v = '';
                  else if (t == 'string')
                    v =
                      '"' +
                      v
                        .replace(/(\"|\\)/g, '\\$1')
                        .replace(/\r\n|\r|\n/g, '\\n') +
                      '"';
                  else if (t == 'function') {
                    if (includeFunctions) v = 'Function';
                    else v = '';
                  } else if (v.parentNode && v.innerHTML) v = 'HTMLElement';
                  else if (v.constructor == Date) v = '';
                  else if (t == 'object' && v !== null)
                    v = serialize(v, includeFunctions, prettyPrint, l + 1);
                  if (String(v) != '') json.push(prefix + tab + String(v));
                }
              } else {
                for (n in obj) {
                  v = obj[n];
                  t = typeof v;
                  if (v == null || t == 'undefined') v = String(v);
                  else if (t == 'string')
                    v =
                      '"' +
                      v
                        .replace(/(\"|\\)/g, '\\$1')
                        .replace(/\r\n|\r|\n/g, '\\n') +
                      '"';
                  else if (t == 'function') {
                    if (includeFunctions) {
                      v = 'Function';
                    } else {
                      v = '';
                    }
                  } else if (v.parentNode && v.innerHTML) v = 'HTMLElement';
                  else if (v.constructor == Date) v = '';
                  else if (t == 'object' && v !== null)
                    v =
                      newline +
                      serialize(v, includeFunctions, prettyPrint, l + 1);
                  if (String(v) != '')
                    json.push(
                      prefix +
                        tab +
                        '"' +
                        n
                          .replace(/(\"|\\)/g, '\\$1')
                          .replace(/\r\n|\r|\n/g, '\\n') +
                        '":' +
                        String(v)
                    );
                }
              }
              return (
                newline +
                prefix +
                (arr ? '[' : '{') +
                newline +
                json.join(',' + newline) +
                newline +
                prefix +
                (arr ? ']' : '}')
              );
            }
          }
        }
        exports.serialize = serialize;
        function deserialize(json, defaultValue, scope) {
          // Return default value if is empty string (or similar).
          if (!json || !json.replace(/^\s+|\s+$/g, '')) {
            return defaultValue || {};
          }
          // Attempt to parse. On error, warn in console and return default value.
          try {
            var keys = [];
            var values = [];
            if (scope) {
              for (var key in scope) {
                keys.push(key);
                values.push(scope[key]);
              }
            }
            var fn = eval(
              '(function(' +
                keys.join(',') +
                ') { return ' +
                json.trim() +
                '; })'
            );
            return fn.apply(undefined, values);
          } catch (e) {
            console.warn('Error deserializing JavaScript', e);
            return defaultValue || {};
          }
        }
        exports.deserialize = deserialize;
        function parse(json, defaultValue) {
          if (window.gigya.localInfo.isIE8) {
            return deserialize(json, defaultValue);
          } else {
            try {
              return window['JSON'].parse(json);
            } catch (e) {
              return defaultValue || {};
            }
          }
        }
        exports.parse = parse;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/URL.ts':
      /*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/URL.ts ***!
  \********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var constants_1 = __webpack_require__(
          /*! ./../../../../accounts/constants */ './src/accounts/constants.ts'
        );
        var keyValueUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/keyValue */ './src/core/Gigya.Js/app/Utils/keyValue.ts'
        );
        var objectUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/object */ './src/core/Gigya.Js/app/Utils/object.ts'
        );
        function URLEncode(value) {
          return encodeURIComponent(value);
        }
        exports.URLEncode = URLEncode;
        function URLDecode(value) {
          return decodeURIComponent(value.replace(/\+/g, ' '));
        }
        exports.URLDecode = URLDecode;
        function URLDecodeRecursive(value) {
          var prevDecodingRes = '';
          var currDecodingRes = value;
          // keep decoding until we can't decode anymore
          while (currDecodingRes != prevDecodingRes) {
            // store the last decoding result
            prevDecodingRes = currDecodingRes;
            // decode the string once again
            currDecodingRes = URLDecode(prevDecodingRes);
          }
          return currDecodingRes;
        }
        exports.URLDecodeRecursive = URLDecodeRecursive;
        function getParamsFromURL(url, keysToLower) {
          if (!url || url.indexOf('?') === -1) {
            return {};
          }
          return keyValueUtils.deserialize(
            url.split('#')[0].split('?')[1],
            '&',
            keysToLower
          );
        }
        exports.getParamsFromURL = getParamsFromURL;
        function getGigParamsFromURL(config) {
          var _a = config || {},
            url = _a.url,
            paramPrefix = _a.paramPrefix,
            keysToLower = _a.keysToLower,
            removePrefix = _a.removePrefix;
          var prefix = paramPrefix || constants_1.GIGYA_PARAM_PREFIX;
          var urlParams = getParamsFromURL(url, keysToLower);
          return Object.keys(urlParams)
            .filter(function (key) {
              return key.indexOf(prefix) === 0 && key !== prefix;
            })
            .reduce(function (obj, key) {
              var newKey = removePrefix ? key.slice(4) : key;
              obj[newKey] = urlParams[key];
              return obj;
            }, {});
        }
        exports.getGigParamsFromURL = getGigParamsFromURL;
        function getParamValueFromURL(param, url, defaultValue) {
          if (null == url || '' == url) {
            return defaultValue;
          }
          var iqm = url.indexOf('?');
          if (iqm === -1) {
            return defaultValue;
          }
          var qs = '&' + url.substr(iqm + 1);
          var idx = qs.toLowerCase().indexOf('&' + param.toLowerCase() + '=');
          if (idx === -1) {
            return defaultValue;
          }
          var valAndMore = qs.substr(idx + (1 + param.length + 1)) + '&';
          idx = valAndMore.indexOf('&');
          return valAndMore.substr(0, idx);
        }
        exports.getParamValueFromURL = getParamValueFromURL;
        function addParamsToURL(url, oParams) {
          var params = getParamsFromURL(url);
          objectUtils.add(params, oParams);
          var urlHashSplit = url.split('#');
          var finalUrl =
            urlHashSplit[0].split('?')[0] +
            '?' +
            keyValueUtils.serialize(params, '&');
          if (urlHashSplit.length > 1) {
            finalUrl += '#' + urlHashSplit[1];
          }
          return finalUrl;
        }
        exports.addParamsToURL = addParamsToURL;
        var removeUnacceptableParams = function (params, unacceptableParams) {
          if (!unacceptableParams) {
            return params;
          }
          var validParams = {};
          Object.entries(params || {})
            .filter(function (_a) {
              var paramName = _a[0];
              return !unacceptableParams.test(paramName);
            })
            .forEach(function (_a) {
              var paramName = _a[0],
                paramValue = _a[1];
              return (validParams[paramName] = paramValue);
            });
          return validParams;
        };
        function getContextParamsFromUrl(config) {
          var _a = config || {},
            url = _a.url,
            paramPrefix = _a.paramPrefix,
            unacceptableParams = _a.unacceptableParams;
          if (!url) {
            return {};
          }
          var params = window.gigya.utils.URL.getGigParamsFromURL({
            url: url,
            paramPrefix: paramPrefix,
          });
          return removeUnacceptableParams(params, unacceptableParams);
        }
        exports.getContextParamsFromUrl = getContextParamsFromUrl;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/Uri.ts':
      /*!********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/Uri.ts ***!
  \********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var stringUtilsUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/stringUtils */ './src/core/Gigya.Js/app/Utils/stringUtils.ts'
        );
        var Uri = /** @class */ (function () {
          function Uri(url, isAbsolute) {
            if (isAbsolute === void 0) {
              isAbsolute = true;
            }
            this._anchor = document.createElement('a');
            var protocol =
              document.location.protocol == 'http:' ? 'http' : 'https';
            if (
              isAbsolute &&
              url.indexOf('://') === -1 &&
              url.charAt(0) !== '/'
            )
              url = protocol + '://' + url;
            this._anchor.href = url;
          }
          Object.defineProperty(Uri.prototype, 'domain', {
            get: function () {
              return this._anchor.hostname;
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(Uri.prototype, 'path', {
            get: function () {
              return this._anchor.pathname;
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(Uri.prototype, 'href', {
            get: function () {
              return this._anchor.href;
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(Uri.prototype, 'search', {
            get: function () {
              return this._anchor.search.slice(1);
            }, // dropping '?'
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(Uri.prototype, 'hash', {
            get: function () {
              return this._anchor.hash.slice(1);
            }, // dropping '#'
            enumerable: true,
            configurable: true,
          });
          Uri.prototype.toString = function () {
            return this._anchor.href;
          };
          Uri.prototype.addToSearch = function (params) {
            for (var name in params) {
              var val = params[name];
              if (
                (typeof val == 'boolean' ||
                  typeof val == 'number' ||
                  typeof val == 'string') &&
                name != 'eventName'
              ) {
                var addition = this._anchor.search ? '&' : '';
                this._anchor.search +=
                  '' + addition + name + '=' + encodeURIComponent(params[name]);
              }
            }
            return this;
          };
          Uri.prototype.fetch = function (retries) {
            if (retries === void 0) {
              retries = 0;
            }
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var _a, e_1;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    _b.trys.push([0, 5, , 8]);
                    if (!window.fetch) return [3 /*break*/, 2];
                    return [4 /*yield*/, this.browserFetch()];
                  case 1:
                    _a = _b.sent();
                    return [3 /*break*/, 4];
                  case 2:
                    return [4 /*yield*/, this.xhr()];
                  case 3:
                    _a = _b.sent();
                    _b.label = 4;
                  case 4:
                    return [2 /*return*/, _a];
                  case 5:
                    e_1 = _b.sent();
                    if (retries <= 0) throw new Error('fetch failed: ' + e_1);
                    return [4 /*yield*/, this.delay(1)];
                  case 6:
                    _b.sent();
                    return [4 /*yield*/, this.fetch(retries - 1)];
                  case 7:
                    return [2 /*return*/, _b.sent()];
                  case 8:
                    return [2 /*return*/];
                }
              });
            });
          };
          Uri.prototype.isBaseOf = function (url) {
            return Uri.parse(url).isIn(this);
          };
          Uri.prototype.isIn = function (base) {
            if (typeof base === 'string') {
              base = Uri.parse(base);
            }
            return (
              (this.domain == base.domain || // page is the base domain
                this.isSubDomainOf(base)) && // or sub-domain of it
              (!base.path || this.path.indexOf(base.path) == 0)
            ); // page is also in base's defined path;
          };
          Uri.prototype.isForSubDomains = function () {
            return this.domain.indexOf('.') == 0;
          };
          Uri.prototype.isSubDomainOf = function (base) {
            var domain = '';
            if (!base.isForSubDomains()) domain = '.';
            domain += base.domain;
            return stringUtilsUtils.endsWith(this.domain, domain);
          };
          Uri.parse = function (url, isAbsolute) {
            if (isAbsolute === void 0) {
              isAbsolute = true;
            }
            if (!url) return undefined;
            return new Uri(url, isAbsolute);
          };
          Uri.prototype.browserFetch = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var url, response;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    url = this.toString();
                    return [4 /*yield*/, window.fetch(url)];
                  case 1:
                    response = _a.sent();
                    if (!response.ok) throw new Error('fetch failed');
                    return [2 /*return*/, response.json()];
                }
              });
            });
          };
          Uri.prototype.xhr = function () {
            var url = this.toString();
            return new gigya.Promise(function (resolve, reject) {
              var xhr = new XMLHttpRequest();
              xhr.open('GET', url);
              xhr.send();
              xhr.onerror = reject;
              xhr.onload = function () {
                if (xhr.readyState !== 4 || xhr.status !== 200) {
                  return reject(
                    'xhr failed - ' + xhr.status + ' - ' + xhr.statusText
                  );
                }
                try {
                  var jsonResponse = JSON.parse(xhr.responseText);
                  return resolve(jsonResponse);
                } catch (e) {
                  return reject(e);
                }
              };
            });
          };
          Uri.prototype.delay = function (ms) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              return tslib_1.__generator(this, function (_a) {
                return [
                  2 /*return*/,
                  new gigya.Promise(function (r) {
                    return setTimeout(r, ms);
                  }),
                ];
              });
            });
          };
          return Uri;
        })();
        exports.Uri = Uri;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/UrlParamsHelper.ts':
      /*!********************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/UrlParamsHelper.ts ***!
  \********************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var constants_1 = __webpack_require__(
          /*! ../../../../accounts/constants */ './src/accounts/constants.ts'
        );
        var _set = __webpack_require__(
          /*! lodash.set */ '../node_modules/lodash.set/index.js'
        );
        var URL_1 = __webpack_require__(
          /*! ./URL */ './src/core/Gigya.Js/app/Utils/URL.ts'
        );
        var UrlParamsHelper = /** @class */ (function () {
          function UrlParamsHelper(_win) {
            var _this = this;
            if (_win === void 0) {
              _win = window.gigya._.WindowProvider;
            }
            this._win = _win;
            this.currentParams = [];
            var params = new URLSearchParams(_win.location().search);
            params.forEach(function (value, key) {
              var urlParam;
              try {
                var decodedKey = URL_1.URLDecode(key);
                var decodedValue = URL_1.URLDecode(value);
                urlParam = { key: decodedKey, value: decodedValue };
              } catch (e) {
                urlParam = { key: key, value: value };
                window.gigya.logger.report('failed to decode url param', {
                  urlParam: urlParam,
                });
              }
              _this.currentParams.push(urlParam);
            });
          }
          UrlParamsHelper.prototype.getGigParamsFromURL = function (
            paramPrefix
          ) {
            if (paramPrefix === void 0) {
              paramPrefix = constants_1.GIGYA_PARAM_PREFIX;
            }
            this.currentParams = this.currentParams.filter(function (param) {
              return (
                param.key.indexOf(paramPrefix) === 0 &&
                param.key !== paramPrefix
              );
            });
            return this;
          };
          UrlParamsHelper.prototype.removePrefix = function (prefix) {
            if (prefix === void 0) {
              prefix = constants_1.GIGYA_PARAM_PREFIX;
            }
            this.currentParams.forEach(function (param) {
              if (param.key.startsWith(prefix)) {
                param.key = param.key.slice(prefix.length);
              }
            });
            return this;
          };
          UrlParamsHelper.prototype.keysToLower = function () {
            this.currentParams.forEach(function (param) {
              param.key = param.key.toLowerCase();
            });
            return this;
          };
          UrlParamsHelper.prototype.removeUnacceptableParams = function (
            unacceptableParams
          ) {
            if (!unacceptableParams) {
              return this;
            }
            this.currentParams = this.currentParams.filter(function (param) {
              return !unacceptableParams.test(param.key);
            });
            return this;
          };
          UrlParamsHelper.prototype.toObject = function () {
            var result = {};
            this.currentParams.forEach(function (param) {
              _set(result, param.key, param.value);
            });
            return result;
          };
          return UrlParamsHelper;
        })();
        exports.default = UrlParamsHelper;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/cookie.ts':
      /*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/cookie.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var LocalInfo_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/LocalInfo */ './src/core/Gigya.Js/app/LocalInfo.ts'
        );
        var global_1 = __webpack_require__(
          /*! ./global */ './src/core/Gigya.Js/app/Utils/global.ts'
        );
        var CookieUtils = /** @class */ (function () {
          function CookieUtils(_cookieStore) {
            if (_cookieStore === void 0) {
              _cookieStore = new global_1.CookieStore();
            }
            this._cookieStore = _cookieStore;
          }
          CookieUtils.prototype.set = function (
            name,
            value,
            expires_in,
            cookieDomain,
            dontUseRootPath,
            sameSite
          ) {
            if (cookieDomain == null) {
              cookieDomain = this.getDefaultDomain();
            }
            var path = dontUseRootPath ? '' : '/';
            var expireMs = this._getExpirationInMs(expires_in);
            var expires = null;
            if (expireMs != null) {
              expires = new Date();
              expires.setTime(expires.getTime() + expireMs);
            }
            var cookieExist = this._setCookieInternal(
              name,
              value,
              path,
              expires,
              cookieDomain,
              sameSite
            );
            var shouldCookieExist = !expireMs || expireMs > 0;
            if (shouldCookieExist === cookieExist) {
              return true;
            }
            // If failed to set cookie, retry;
            // it might be because the domain is listed as TLD https://data.iana.org/TLD/tlds-alpha-by-domain.txt
            var pageDomain = LocalInfo_1.localInfo.pageDomain;
            cookieExist = this._setCookieInternal(
              name,
              value,
              path,
              expires,
              pageDomain,
              sameSite
            );
            return cookieExist === shouldCookieExist;
          };
          CookieUtils.prototype.get = function (name) {
            return this._cookieStore.getCookie(name);
          };
          CookieUtils.prototype.remove = function (name, domain) {
            if (domain === void 0) {
              domain = LocalInfo_1.localInfo.pageDomain;
            }
            this._removeFromBaseDomains(name, domain);
            this.set(name, '', -1, '', false);
            this.set(name, '', -1, '', true);
          };
          CookieUtils.prototype.getInfiniteExpirationTimeInSeconds =
            function () {
              // Set expiration time to 1 years
              return 60 * 60 * 24 * 365;
            };
          CookieUtils.prototype.canSaveCookie = function (cookieDomain) {
            if (cookieDomain === void 0) {
              cookieDomain = null;
            }
            try {
              return this.set(
                CookieUtils.testCookieName,
                'true',
                1,
                cookieDomain,
                null
              );
            } catch (e) {
              // iOS 10 webview throws in some scenarios
              return false;
            }
          };
          CookieUtils.prototype.getDefaultDomain = function (
            pageDomain,
            baseDomain
          ) {
            if (pageDomain === void 0) {
              pageDomain = LocalInfo_1.localInfo.pageDomain;
            }
            if (baseDomain === void 0) {
              baseDomain = LocalInfo_1.localInfo.baseDomain || '';
            }
            return baseDomain.length > 0 &&
              pageDomain.length >= baseDomain.length &&
              pageDomain.lastIndexOf(baseDomain) ===
                pageDomain.length - baseDomain.length
              ? baseDomain
              : pageDomain;
          };
          CookieUtils.prototype._getExpirationInMs = function (expiresIn) {
            var expireMs;
            if (expiresIn == null || expiresIn === '' || isNaN(expiresIn)) {
              expireMs = 1000 * this.getInfiniteExpirationTimeInSeconds();
            } else if (expiresIn == 0) {
              // 0 means Session
              expireMs = null;
            } else {
              // Any other value is number of seconds (A negative value would mean expire now!)
              expireMs = expiresIn * 1000;
            }
            return expireMs;
          };
          CookieUtils.prototype._setCookieInternal = function (
            name,
            value,
            path,
            expires,
            cookieDomain,
            sameSiteMode
          ) {
            if (sameSiteMode === void 0) {
              sameSiteMode = CookieUtils._getSameSiteMode();
            }
            var _a;
            var protocol =
              (_a =
                LocalInfo_1.localInfo === null ||
                LocalInfo_1.localInfo === void 0
                  ? void 0
                  : LocalInfo_1.localInfo.protocol) !== null && _a !== void 0
                ? _a
                : document.location.protocol;
            var isSecured = protocol.indexOf('https') === 0;
            this._cookieStore.setCookie(name, value, {
              path: path,
              expires: expires,
              domain: cookieDomain,
              sameSite: sameSiteMode,
              secure: isSecured,
            });
            if (this.get(name)) {
              return true;
            }
            if (!sameSiteMode) {
              //if failed to write cookie without sameSite mode, then stop here
              return false;
            }
            if (sameSiteMode !== 'None') {
              this._fallbackToSameSiteNone(
                name,
                value,
                path,
                expires,
                cookieDomain,
                isSecured
              );
            }
            if (this.get(name)) {
              this._reportFallback('Setting SameSite=None', {
                name: name,
                value: value,
                sameSiteMode: sameSiteMode,
              });
              return true;
            }
            // If failed to write cookie with sameSite mode, retry without;
            this._cookieStore.setCookie(name, value, {
              path: path,
              expires: expires,
              domain: cookieDomain,
              secure: isSecured,
            });
            if (this.get(name)) {
              this._reportFallback(
                'Cookie established only without sameSite mode',
                { name: name, value: value, sameSiteMode: sameSiteMode }
              );
              return true;
            }
            return false;
          };
          CookieUtils.prototype._removeFromBaseDomains = function (
            name,
            domain
          ) {
            var domainParts = domain.split('.');
            // when clearing from a.b.c.d.com --> clear from a.b.c.d.com, b.c.d.com, c.d.com, d.com
            for (var i = 0; i < domainParts.length - 1; i++) {
              var domain_1 = domainParts.slice(i).join('.');
              this.set(name, '', -1, domain_1, false);
              this.set(name, '', -1, domain_1, true);
            }
          };
          CookieUtils._getSameSiteMode = function () {
            if (!CookieUtils._disallowSameSiteMode()) return 'None';
          };
          CookieUtils._disallowSameSiteMode = function () {
            var _a, _b;
            var protocol =
              (_a =
                LocalInfo_1.localInfo === null ||
                LocalInfo_1.localInfo === void 0
                  ? void 0
                  : LocalInfo_1.localInfo.protocol) !== null && _a !== void 0
                ? _a
                : document.location.protocol;
            var ua =
              (_b =
                LocalInfo_1.localInfo === null ||
                LocalInfo_1.localInfo === void 0
                  ? void 0
                  : LocalInfo_1.localInfo.userAgent) !== null && _b !== void 0
                ? _b
                : navigator.userAgent.toLowerCase();
            var isSecured = protocol.indexOf('https') === 0;
            return (
              !isSecured ||
              !ua ||
              // Cover all iOS based browsers here. This includes:
              // - Safari on iOS 12 for iPhone, iPod Touch, iPad
              // - WkWebview on iOS 12 for iPhone, iPod Touch, iPad
              // - Chrome on iOS 12 for iPhone, iPod Touch, iPad
              // All of which are broken by SameSite=None, because they use the iOS networking stack
              ua.indexOf('CPU iPhone OS 12') > -1 ||
              ua.indexOf('iPad; CPU OS 12') > -1 ||
              // Cover Mac OS X based browsers that use the Mac OS networking stack. This includes:
              // - Safari on Mac OS X.
              // This does not include:
              // - Chrome on Mac OS X
              // Because they do not use the Mac OS networking stack.
              (ua.indexOf('Macintosh; Intel Mac OS X 10_14') > -1 &&
                ua.indexOf('Version/') > -1 &&
                ua.indexOf('Safari') > -1) ||
              // Cover Chrome 50-69, because some versions are broken by SameSite=None,
              // and none in this range require it.
              // Note: this covers some pre-Chromium Edge versions,
              // but pre-Chromium Edge does not require SameSite=None.
              (ua.indexOf('Chrome/5') > -1 && ua.indexOf('Chrome/6') > -1)
            );
          };
          CookieUtils.prototype._fallbackToSameSiteNone = function (
            name,
            value,
            path,
            expires,
            cookieDomain,
            secure
          ) {
            this._cookieStore.setCookie(name, value, {
              path: path,
              expires: expires,
              domain: cookieDomain,
              sameSite: 'None',
              secure: secure,
            });
          };
          CookieUtils.prototype._reportFallback = function (message, details) {
            window.gigya.logger.report(
              'Cookie Policy Fallback: ' + message,
              tslib_1.__assign(tslib_1.__assign({}, details), {
                isIframe: this._isIFrame(),
              }),
              false
            );
          };
          CookieUtils.prototype._isIFrame = function () {
            var _a;
            try {
              return (
                (window === null || window === void 0
                  ? void 0
                  : window.location) !==
                ((_a =
                  window === null || window === void 0
                    ? void 0
                    : window.parent) === null || _a === void 0
                  ? void 0
                  : _a.location)
              );
            } catch (e) {
              return true;
            }
          };
          CookieUtils.testCookieName = 'gig3pctest';
          return CookieUtils;
        })();
        exports.CookieUtils = CookieUtils;
        exports.default = new CookieUtils();

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/domains.ts':
      /*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/domains.ts ***!
  \************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        var _a, _b;
        Object.defineProperty(exports, '__esModule', { value: true });
        var Uri_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/Uri */ './src/core/Gigya.Js/app/Utils/Uri.ts'
        );
        var stringUtilsUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/stringUtils */ './src/core/Gigya.Js/app/Utils/stringUtils.ts'
        );
        var LocalInfo_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/LocalInfo */ './src/core/Gigya.Js/app/LocalInfo.ts'
        );
        var FlagService_1 = __webpack_require__(
          /*! ../Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        var cookie_1 = __webpack_require__(
          /*! ./cookie */ './src/core/Gigya.Js/app/Utils/cookie.ts'
        );
        // TODO: move to config
        var baseDomains;
        if (
          (_b =
            (_a = window.gigya.partnerSettings) === null || _a === void 0
              ? void 0
              : _a.baseDomains) === null || _b === void 0
            ? void 0
            : _b.length
        ) {
          baseDomains = window.gigya.partnerSettings.baseDomains;
        } else {
          if (window.self === window.top) {
            // only in the top frame
            window.gigya.logger.warn('gigya: missing base domains for site');
          }
          baseDomains = [document.location.hostname];
        }
        LocalInfo_1.localInfo.baseDomain = getBaseDomain(baseDomains);
        var gigyaDomainNamespaces = [
          'socialize',
          'accounts',
          'fidm',
          'gm',
          'comments',
          'gcs',
          'ids',
          'ds',
          'gscounters',
          'reports',
        ];
        function apiDomainFactory(apiDomain, defaultApiDomain) {
          if (apiDomain === void 0) {
            apiDomain = resolveApiDomain();
          }
          if (defaultApiDomain === void 0) {
            defaultApiDomain = window.gigya.defaultApiDomain;
          }
          var shouldAddNamespace = Uri_1.Uri.parse(apiDomain).isIn(
            Uri_1.Uri.parse(defaultApiDomain)
          );
          return function (namespace) {
            if (namespace && shouldAddNamespace) {
              var subDomain = namespace.split('.')[0];
              if (subDomain === 'sdk' || subDomain === 'oauth') {
                subDomain = 'accounts';
              } else if (gigyaDomainNamespaces.indexOf(subDomain) == -1) {
                window.gigya.logger.error(
                  'trying to send request to an invalid domain'
                );
                subDomain = gigyaDomainNamespaces[0];
              }
              return subDomain + '.' + apiDomain;
            } else {
              return apiDomain;
            }
          };
        }
        exports.apiDomainFactory = apiDomainFactory;
        function getGigyaDomain(namespace, dataCenter, defaultDomain) {
          if (dataCenter === void 0) {
            dataCenter = window.gigya.dataCenter;
          }
          if (defaultDomain === void 0) {
            defaultDomain = window.gigya.defaultApiDomain;
          }
          if (defaultDomain === 'sapcdm.cn' && dataCenter !== 'cn1') {
            defaultDomain = 'cn1.' + defaultDomain; //Fix for cn1-st1. it should be cn1-st1.cn1.sapcdm.cn and not cn1-st1.sapcdm.cn
          }
          var domain = dataCenter + '.' + defaultDomain;
          if (namespace) return namespace + '.' + domain;
          else return domain;
        }
        exports.getGigyaDomain = getGigyaDomain;
        function getBaseDomain(baseDomains, currentDomain, defaultDomains) {
          if (baseDomains === void 0) {
            baseDomains = window.gigya.partnerSettings.baseDomains;
          }
          if (currentDomain === void 0) {
            currentDomain = location.hostname;
          }
          if (defaultDomains === void 0) {
            defaultDomains = [
              'gigya.com',
              'cn1.sapcdm.cn',
              'localhost',
              window.gigya.defaultApiDomain,
            ];
          }
          // #49786 - Support webview without hostname.
          if (!currentDomain) {
            return '';
          }
          if (typeof baseDomains == 'string') {
            baseDomains = baseDomains.split(',');
          }
          var originURI = Uri_1.Uri.parse(currentDomain);
          if (defaultDomains) {
            baseDomains = baseDomains.concat(defaultDomains);
          }
          for (
            var _i = 0, baseDomains_1 = baseDomains;
            _i < baseDomains_1.length;
            _i++
          ) {
            var rawDomain = baseDomains_1[_i];
            // This does not take care of wildcards in the middle of string.
            var baseDomain = stringUtilsUtils.replaceAll(rawDomain, '*', '');
            var baseUri = Uri_1.Uri.parse(baseDomain);
            if (baseUri && originURI.isIn(baseUri)) {
              if (!window.gigya._) {
                window.gigya._ = {};
              }
              window.gigya._.isTrustedDomain = true;
              if (baseUri.isForSubDomains()) {
                return originURI.domain;
              } else {
                return baseUri.domain;
              }
            }
          }
          // fallback to the parent's window domain (for backward compatibility).
          return originURI.domain;
        }
        exports.getBaseDomain = getBaseDomain;
        function resolveApiDomain(
          customApiDomainPrefix,
          baseDomain,
          dataCenter,
          defaultApiDomain
        ) {
          if (customApiDomainPrefix === void 0) {
            customApiDomainPrefix =
              window.gigya.partnerSettings &&
              window.gigya.partnerSettings.customAPIDomainPrefix;
          }
          if (baseDomain === void 0) {
            baseDomain = LocalInfo_1.localInfo.baseDomain;
          }
          if (dataCenter === void 0) {
            dataCenter = window.gigya.dataCenter;
          }
          if (defaultApiDomain === void 0) {
            defaultApiDomain = window.gigya.defaultApiDomain;
          }
          var _a;
          var apiDomain = getHostedPagesApiDomainCookie();
          if (apiDomain) {
            return apiDomain;
          }
          // TODO: remove once a solution will be found for hosted pages
          if (
            baseDomain.endsWith(
              ((_a = window.gigya._.config) === null || _a === void 0
                ? void 0
                : _a.hostedPagesDomain) || 'my.gigya-ext.com'
            )
          ) {
            return baseDomain;
          }
          if (
            customApiDomainPrefix &&
            baseDomain &&
            baseDomain !== defaultApiDomain
          ) {
            return customApiDomainPrefix + '.' + baseDomain;
          }
          return getGigyaDomain(undefined, dataCenter, defaultApiDomain);
        }
        exports.resolveApiDomain = resolveApiDomain;
        function getStorageDomain() {
          var _a, _b, _c;
          var apiDomain = getHostedPagesApiDomainCookie();
          if (apiDomain) {
            return apiDomain;
          }
          if (
            (_b =
              (_a = window.gigya.thisScript) === null || _a === void 0
                ? void 0
                : _a.globalConf) === null || _b === void 0
              ? void 0
              : _b['storageDomainOverride']
          ) {
            return window.gigya.thisScript.globalConf['storageDomainOverride'];
          }
          if (
            ((_c = window.gigya.thisScript) === null || _c === void 0
              ? void 0
              : _c.baseDomain) &&
            FlagService_1.FlagService.useGigyaJsBaseDomain
          ) {
            return window.gigya.thisScript.baseDomain;
          }
          var domain = window.gigya.defaultApiDomain;
          if (
            window.gigya.utils.stringUtils.endsWith(domain, 'sapcdm.cn') &&
            window.gigya.dataCenter !== 'cn1'
          ) {
            // special case with china domain staging
            domain = 'cn1.sapcdm.cn';
          }
          var prefix =
            window.gigya.dataCenter !== 'global'
              ? 'cdns.' + window.gigya.dataCenter
              : 'cdns';
          return prefix + '.' + domain;
        }
        exports.getStorageDomain = getStorageDomain;
        function getHostedPagesApiDomainCookie() {
          return cookie_1.default.get('pages_apiDomain_' + window.gigya.apiKey);
        }

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/functions.ts':
      /*!**************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/functions.ts ***!
  \**************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var DOMUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/DOM */ './src/core/Gigya.Js/app/Utils/DOM.ts'
        );
        var cdn_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/cdn */ './src/core/Gigya.Js/app/cdn.ts'
        );
        var LocalInfo_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/LocalInfo */ './src/core/Gigya.Js/app/LocalInfo.ts'
        );
        function callAsync(methodName, params) {
          if (params === void 0) {
            params = {};
          }
          return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
            return tslib_1.__generator(this, function (_a) {
              return [
                2 /*return*/,
                new gigya.Promise(function (resolve) {
                  callFunction('gigya.' + methodName, [
                    tslib_1.__assign(tslib_1.__assign({}, params), {
                      callback: resolve,
                    }),
                  ]);
                }),
              ];
            });
          });
        }
        exports.callAsync = callAsync;
        function callFunction(name, arParams) {
          var fn = eval(name);
          var arParts = name.split('.');
          arParts.splice(arParts.length - 1, 1);
          var scope = eval(arParts.join('.'));
          fn.apply(scope, arParams);
        }
        exports.callFunction = callFunction;
        function invokeOnPageLoad(func, completeOnly) {
          if (
            (!document.readyState && document.body) ||
            document.readyState === 'complete' ||
            (!completeOnly &&
              document.readyState === 'interactive' &&
              document.body)
          ) {
            func();
          } else {
            var called_1 = false;
            var fnOnLoad = function () {
              if (!called_1) {
                called_1 = true;
                func();
              }
            };
            window.setTimeout(fnOnLoad, 20000); // fallback - sometimes readystate stays stuck on interactive
            DOMUtils.addEventListener(window, 'load', fnOnLoad);
            DOMUtils.addEventListener(document, 'DOMContentLoaded', fnOnLoad);
          }
        }
        exports.invokeOnPageLoad = invokeOnPageLoad;
        function createAlias(publicName, fnc) {
          var arNameSegments = publicName.split('.');
          var oCurrentSegment = window;
          for (
            var iSegment = 0;
            iSegment < arNameSegments.length - 1;
            iSegment++
          ) {
            var sSegment = arNameSegments[iSegment];
            if (!oCurrentSegment[sSegment]) {
              oCurrentSegment[sSegment] = {};
            }
            oCurrentSegment = oCurrentSegment[sSegment];
          }
          oCurrentSegment[arNameSegments[arNameSegments.length - 1]] = fnc;
        }
        exports.createAlias = createAlias;
        function debounce(fn, delayMilliseconds) {
          var timer = undefined;
          return function () {
            if (timer !== undefined) {
              clearTimeout(timer);
            }
            timer = setTimeout(function () {
              timer = undefined;
              fn();
            }, delayMilliseconds);
          };
        }
        exports.debounce = debounce;
        function addSrcToIFrameIfNeeded(iframe, src) {
          if (src === void 0) {
            src = cdn_1.getCdnResource('/');
          }
          if (
            LocalInfo_1.localInfo.isIOSWebView ||
            (LocalInfo_1.localInfo.isIOS && LocalInfo_1.localInfo.isWeChat)
          ) {
            iframe.setAttribute('src', src);
          }
        }
        exports.addSrcToIFrameIfNeeded = addSrcToIFrameIfNeeded;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/global.ts':
      /*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/global.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var CookieStore = /** @class */ (function () {
          function CookieStore(_win) {
            if (_win === void 0) {
              _win = window;
            }
            this._win = _win;
          }
          CookieStore.prototype.setCookie = function (name, value, options) {
            var cookieString = name + '=' + escape(value);
            if (options.path) cookieString += '; path=' + options.path;
            if (options.expires)
              cookieString += '; expires=' + options.expires.toUTCString();
            if (options.domain && options.domain.indexOf('.') != -1)
              cookieString += '; domain=' + options.domain;
            if (options.sameSite)
              cookieString += '; sameSite=' + options.sameSite;
            if (options.secure) cookieString += '; secure';
            this._win.document.cookie = cookieString;
          };
          CookieStore.prototype.getCookie = function (name) {
            name = name
              .replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1')
              .replace(/^[ \t]+|[ \t]+$/g, '');
            var regex = new RegExp('(?:^|;)\\s?' + name + '=(.*?)(?:;|$)');
            var match = this._win.document.cookie.match(regex);
            return match && unescape(match[1]);
          };
          return CookieStore;
        })();
        exports.CookieStore = CookieStore;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/gltexp.ts':
      /*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/gltexp.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        function isValid(gltexp) {
          return getMillis(gltexp) > Date.now();
        }
        exports.isValid = isValid;
        function getMax() {
          var gltexps = [];
          for (var _i = 0; _i < arguments.length; _i++) {
            gltexps[_i] = arguments[_i];
          }
          if (!gltexps || !gltexps.length) return undefined;
          return gltexps.sort(function (gltexpA, gltexpB) {
            return getMillis(gltexpB) - getMillis(gltexpA);
          })[0];
        }
        exports.getMax = getMax;
        function getMillis(gltExp) {
          return !gltExp
            ? 0
            : Number(gltExp.substr(0, gltExp.indexOf('_'))) * 1000;
        }
        exports.getMillis = getMillis;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/keyValue.ts':
      /*!*************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/keyValue.ts ***!
  \*************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var URLUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/URL */ './src/core/Gigya.Js/app/Utils/URL.ts'
        );
        var JSONUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/JSON */ './src/core/Gigya.Js/app/Utils/JSON.ts'
        );
        var FlagService_1 = __webpack_require__(
          /*! ../Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        function serialize(oKeyValue, delimiter) {
          var a = [];
          if (!delimiter) {
            delimiter = '&';
          }
          for (var p in oKeyValue) {
            switch (typeof oKeyValue[p]) {
              case 'function':
                break;
              case 'object':
                if (oKeyValue[p] != null) {
                  a.push(
                    p +
                      '=' +
                      URLUtils.URLEncode(JSONUtils.serialize(oKeyValue[p]))
                  );
                }
                break;
              case 'undefined':
                break;
              default:
                a.push(p + '=' + URLUtils.URLEncode(oKeyValue[p]));
            }
          }
          var s = a.join(delimiter);
          return s;
        }
        exports.serialize = serialize;
        function deserialize(
          urlEncodedString,
          delimiter,
          keysToLower,
          useUnescape
        ) {
          var o = {};
          if (!urlEncodedString) {
            return o;
          }
          if (!delimiter) {
            delimiter = '&';
          }
          var pairs = urlEncodedString.split(delimiter);
          for (var iPair = 0; iPair < pairs.length; iPair++) {
            var pair = pairs[iPair];
            var eqPos = pair.indexOf('=');
            if (eqPos === -1) {
              var key = keysToLower ? pair.toLowerCase() : pair;
              o[key] = '1';
            } else {
              var key = pair.substr(0, eqPos);
              if (keysToLower) {
                key = key.toLowerCase();
              }
              var serializedValue = pair.substr(eqPos + 1).replace(/\+/g, ' ');
              try {
                if (useUnescape) {
                  o[key] = FlagService_1.FlagService.useDecodeURIComponent
                    ? compareResultsAndReturnURLDecode(serializedValue)
                    : unescape(serializedValue);
                } else {
                  o[key] = URLUtils.URLDecode(serializedValue);
                }
              } catch (ex) {
                o[key] = FlagService_1.FlagService.useDecodeURIComponent
                  ? URLUtils.URLDecode(serializedValue)
                  : unescape(serializedValue);
              }
            }
          }
          return o;
        }
        exports.deserialize = deserialize;
        function compareResultsAndReturnURLDecode(serializedValue) {
          var unescapedResult = unescape(serializedValue);
          var urlDecodeResult = URLUtils.URLDecode(serializedValue);
          unescapedResult.localeCompare(urlDecodeResult) !== 0 &&
            window.gigya.logger.report(
              'urlDecoder and unescaped have different values',
              {
                unescapedResult: unescapedResult,
                urlDecodeResult: urlDecodeResult,
              }
            );
          return urlDecodeResult;
        }

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/localStorage.ts':
      /*!*****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/localStorage.ts ***!
  \*****************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var JSONUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/JSON */ './src/core/Gigya.Js/app/Utils/JSON.ts'
        );
        var LocalInfo_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/LocalInfo */ './src/core/Gigya.Js/app/LocalInfo.ts'
        );
        var cookie_1 = __webpack_require__(
          /*! ./cookie */ './src/core/Gigya.Js/app/Utils/cookie.ts'
        );
        var AbstractLocalStorageAdapter = /** @class */ (function () {
          function AbstractLocalStorageAdapter() {}
          AbstractLocalStorageAdapter.getName = function () {
            return 'AbstractAdapter';
          };
          /**
           * Set object to storage.
           */
          AbstractLocalStorageAdapter.prototype.setObject = function (key, o) {
            this.setItem(key, JSONUtils.serialize(o));
          };
          /**
           * Get object from local storage.
           */
          AbstractLocalStorageAdapter.prototype.getObject = function (
            key,
            defaultValue
          ) {
            return JSONUtils.deserialize(this.getItem(key), defaultValue);
          };
          /**
           * Is persistent storage. Returns false when data is not persisted.
           */
          AbstractLocalStorageAdapter.prototype.isPersistent = function () {
            return true;
          };
          return AbstractLocalStorageAdapter;
        })();
        exports.AbstractLocalStorageAdapter = AbstractLocalStorageAdapter;
        var AbstractAsyncLocalStorageAdapter = /** @class */ (function (
          _super
        ) {
          tslib_1.__extends(AbstractAsyncLocalStorageAdapter, _super);
          function AbstractAsyncLocalStorageAdapter() {
            var _this = _super.call(this) || this;
            _this.isLoaded = false;
            return _this;
          }
          AbstractAsyncLocalStorageAdapter.prototype.isReady = function () {
            return this.isLoaded;
          };
          /**
           * Used when there is initialization time on the local storage adapter.
           */
          AbstractAsyncLocalStorageAdapter.prototype.waitForService = function (
            callback
          ) {
            var _this = this;
            if (this.isReady()) {
              callback();
              return;
            } else {
              setTimeout(function () {
                return _this.waitForService(callback);
              }, 50);
            }
          };
          return AbstractAsyncLocalStorageAdapter;
        })(AbstractLocalStorageAdapter);
        exports.AbstractAsyncLocalStorageAdapter =
          AbstractAsyncLocalStorageAdapter;
        var StorageAdapter = /** @class */ (function (_super) {
          tslib_1.__extends(StorageAdapter, _super);
          function StorageAdapter() {
            return (_super !== null && _super.apply(this, arguments)) || this;
          }
          StorageAdapter.prototype.getItem = function (key) {
            return this.storage[key];
          };
          StorageAdapter.prototype.setItem = function (key, value, expiresIn) {
            try {
              this.storage[key] = value;
            } catch (ex) {}
          };
          StorageAdapter.prototype.removeItem = function (key) {
            this.storage.removeItem(key);
          };
          return StorageAdapter;
        })(AbstractLocalStorageAdapter);
        var LocalStorageAdapter = /** @class */ (function (_super) {
          tslib_1.__extends(LocalStorageAdapter, _super);
          function LocalStorageAdapter() {
            var _this = _super.call(this) || this;
            _this.storage = window.localStorage;
            return _this;
          }
          LocalStorageAdapter.getName = function () {
            return 'LocalStorageAdapter';
          };
          LocalStorageAdapter.isAvailable = function () {
            return LocalInfo_1.localInfo.supportsLocalStorage;
          };
          return LocalStorageAdapter;
        })(StorageAdapter);
        var SessionStorageAdapter = /** @class */ (function (_super) {
          tslib_1.__extends(SessionStorageAdapter, _super);
          function SessionStorageAdapter() {
            var _this = _super.call(this) || this;
            _this.storage = window.sessionStorage;
            return _this;
          }
          SessionStorageAdapter.getName = function () {
            return 'SessionStorageAdapter';
          };
          SessionStorageAdapter.isAvailable = function () {
            return LocalInfo_1.localInfo.supportsSessionStorage;
          };
          return SessionStorageAdapter;
        })(StorageAdapter);
        var FirefoxStorageAdapter = /** @class */ (function (_super) {
          tslib_1.__extends(FirefoxStorageAdapter, _super);
          function FirefoxStorageAdapter() {
            return (_super !== null && _super.apply(this, arguments)) || this;
          }
          FirefoxStorageAdapter.isAvailable = function () {
            return LocalInfo_1.localInfo.isFF && window['globalStorage'];
          };
          FirefoxStorageAdapter.getName = function () {
            return 'FirefoxStorageAdapter';
          };
          FirefoxStorageAdapter.prototype.getItem = function (key) {
            return window['globalStorage'][location.hostname][key];
          };
          FirefoxStorageAdapter.prototype.setItem = function (
            key,
            value,
            expiresIn
          ) {
            try {
              window['globalStorage'][location.hostname][key] = value;
            } catch (ex) {}
          };
          FirefoxStorageAdapter.prototype.removeItem = function (key) {
            delete window['globalStorage'][location.hostname][key];
          };
          return FirefoxStorageAdapter;
        })(AbstractLocalStorageAdapter);
        var CookieStorageAdapter = /** @class */ (function (_super) {
          tslib_1.__extends(CookieStorageAdapter, _super);
          function CookieStorageAdapter() {
            return (_super !== null && _super.apply(this, arguments)) || this;
          }
          CookieStorageAdapter.isAvailable = function () {
            return cookie_1.default.canSaveCookie();
          };
          CookieStorageAdapter.getName = function () {
            return 'CookieStorageAdapter';
          };
          CookieStorageAdapter.prototype.getItem = function (key) {
            return cookie_1.default.get(key);
          };
          CookieStorageAdapter.prototype.setItem = function (
            key,
            value,
            expiresIn,
            domain,
            additionalParams
          ) {
            if (additionalParams === void 0) {
              additionalParams = {};
            }
            cookie_1.default.set(
              key,
              value,
              expiresIn,
              domain,
              additionalParams.dontUseRootPath,
              additionalParams.sameSite
            );
          };
          CookieStorageAdapter.prototype.removeItem = function (key) {
            cookie_1.default.remove(key);
          };
          return CookieStorageAdapter;
        })(AbstractLocalStorageAdapter);
        exports.CookieStorageAdapter = CookieStorageAdapter;
        var MemoryStorageAdapter = /** @class */ (function (_super) {
          tslib_1.__extends(MemoryStorageAdapter, _super);
          function MemoryStorageAdapter() {
            var _this = _super.call(this) || this;
            _this.memory = {};
            return _this;
          }
          MemoryStorageAdapter.isAvailable = function () {
            return true;
          };
          MemoryStorageAdapter.getName = function () {
            return 'MemoryStorageAdapter';
          };
          MemoryStorageAdapter.prototype.getItem = function (key) {
            return this.memory[key];
          };
          MemoryStorageAdapter.prototype.setItem = function (
            key,
            value,
            expiresIn
          ) {
            this.memory[key] = value;
          };
          MemoryStorageAdapter.prototype.removeItem = function (key) {
            delete this.memory[key];
          };
          /**
           * Is persistent storage. Returns false when data is not persisted.
           */
          MemoryStorageAdapter.prototype.isPersistent = function () {
            return false;
          };
          return MemoryStorageAdapter;
        })(AbstractLocalStorageAdapter);
        exports.MemoryStorageAdapter = MemoryStorageAdapter;
        exports.adapters = [
          LocalStorageAdapter,
          SessionStorageAdapter,
          FirefoxStorageAdapter,
          CookieStorageAdapter,
          MemoryStorageAdapter,
        ];
        exports.instances = {};
        function initializeAdapter(adapter) {
          var adapterName = adapter.getName() || adapter.name;
          if (!exports.instances[adapterName]) {
            exports.instances[adapterName] = new adapter();
          }
          return exports.instances[adapterName];
        }
        exports.initializeAdapter = initializeAdapter;
        function waitForService(callback) {
          // Select compatible adapter.
          var storage;
          for (
            var _i = 0, adapters_1 = exports.adapters;
            _i < adapters_1.length;
            _i++
          ) {
            var adapter_1 = adapters_1[_i];
            if (adapter_1.isAvailable()) {
              // Don't select adapter if it's async and a callback wasn't provided.
              if (
                adapter_1.prototype instanceof
                  AbstractAsyncLocalStorageAdapter &&
                !callback
              ) {
                continue;
              }
              storage = initializeAdapter(adapter_1);
              break;
            }
          }
          // Fallback to memory-based non-persistent storage.
          if (!storage) {
            storage = initializeAdapter(MemoryStorageAdapter);
          }
          // Trigger callback when adapter finishes loading (or instantly, if not required to wait).
          if (callback) {
            if (storage instanceof AbstractAsyncLocalStorageAdapter) {
              storage.waitForService(function () {
                callback(storage);
              });
            } else {
              callback(storage);
            }
          }
          return storage;
        }
        exports.waitForService = waitForService;
        var adapter = waitForService();
        function getItem(key) {
          return adapter.getItem(key);
        }
        exports.getItem = getItem;
        function setItem(key, value, expiresIn) {
          return adapter.setItem(key, value, expiresIn);
        }
        exports.setItem = setItem;
        function removeItem(key) {
          return adapter.removeItem(key);
        }
        exports.removeItem = removeItem;
        function setObject(key, o) {
          return adapter.setObject(key, o);
        }
        exports.setObject = setObject;
        function getObject(key, defaultValue) {
          return adapter.getObject(key, defaultValue);
        }
        exports.getObject = getObject;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/object.ts':
      /*!***********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/object.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        /* WEBPACK VAR INJECTION */ (function (
          __webpack_provided_Object_dot_assign
        ) {
          Object.defineProperty(exports, '__esModule', { value: true });
          var JSONUtils = __webpack_require__(
            /*! src/core/Gigya.Js/app/Utils/JSON */ './src/core/Gigya.Js/app/Utils/JSON.ts'
          );
          var toggles_1 = __webpack_require__(
            /*! ./toggles */ './src/core/Gigya.Js/app/Utils/toggles.ts'
          );
          function removeUndefined(o) {
            var o2 = {};
            for (var p in o) {
              if (o[p] != null && o[p] != undefined) {
                o2[p] = o[p];
              }
            }
            return o2;
          }
          exports.removeUndefined = removeUndefined;
          function expressionHelper(context) {
            context = context || {};
            return {
              getField: function (path) {
                if (!path) return undefined;
                var paths = path.split('.'),
                  current = context,
                  i;
                for (i = 0; i < paths.length; ++i) {
                  if (current[paths[i]] == undefined) {
                    return undefined;
                  } else {
                    current = current[paths[i]];
                  }
                }
                return current;
              },
            };
          }
          exports.expressionHelper = expressionHelper;
          function getPropertyBySerializedName(o, name, createMissingObjects) {
            if (!name) return o;
            var oResult = o;
            var arNameSegments = name.split('.');
            for (
              var iSegment = 0;
              iSegment < arNameSegments.length;
              iSegment++
            ) {
              var sSegment = arNameSegments[iSegment];
              var sIndex = null;
              //Support for array access. i.e. "obj.prop1[0].prop2"
              if (sSegment.match(/\[[0-9]+]/)) {
                sIndex = Number(
                  sSegment.match(/\[[0-9]+]/)[0].replace(/[\[\]]/g, '')
                );
              }
              sSegment = sSegment.split(/\[[0-9]+]/).join('');
              var res =
                (sIndex || sIndex === 0) && oResult[sSegment]
                  ? oResult[sSegment][sIndex]
                  : oResult[sSegment];
              if (createMissingObjects && !oResult[sSegment]) {
                oResult[sSegment] = {};
              } else if (createMissingObjects && !res && res !== false) {
                oResult[sSegment] = [];
              }
              if (res || res === false) {
                oResult = res;
              } else {
                return null;
              }
            }
            return oResult;
          }
          exports.getPropertyBySerializedName = getPropertyBySerializedName;
          function setPropertyBySerializedName(o, name, value) {
            var arNameSegments = name.split('.');
            var propertyName = arNameSegments.pop();
            getPropertyBySerializedName(o, arNameSegments.join('.'), true)[
              propertyName
            ] = value;
          }
          exports.setPropertyBySerializedName = setPropertyBySerializedName;
          function add(oTarget, o, dontOverride) {
            for (var p in o) {
              if (!dontOverride || typeof oTarget[p] === 'undefined') {
                oTarget[p] = o[p];
              }
            }
          }
          exports.add = add;
          function getHash(o) {
            var ar = [];
            for (var p in o) {
              var s;
              if (typeof o[p] == 'object') s = JSONUtils.serialize(o[p], false);
              else if (o[p]) s = o[p].toString();
              ar.push(p + '=' + s);
            }
            return ar.sort().join('&');
          }
          exports.getHash = getHash;
          function getMurmurHash(key, seed) {
            if (!seed) seed = 0;
            var remainder, bytes, h1, h1b, c1, c1b, c2, c2b, k1, i;
            remainder = key.length & 3; // key.length % 4
            bytes = key.length - remainder;
            h1 = seed;
            c1 = 0xcc9e2d51;
            c2 = 0x1b873593;
            i = 0;
            while (i < bytes) {
              k1 =
                (key.charCodeAt(i) & 0xff) |
                ((key.charCodeAt(++i) & 0xff) << 8) |
                ((key.charCodeAt(++i) & 0xff) << 16) |
                ((key.charCodeAt(++i) & 0xff) << 24);
              ++i;
              k1 =
                ((k1 & 0xffff) * c1 + ((((k1 >>> 16) * c1) & 0xffff) << 16)) &
                0xffffffff;
              k1 = (k1 << 15) | (k1 >>> 17);
              k1 =
                ((k1 & 0xffff) * c2 + ((((k1 >>> 16) * c2) & 0xffff) << 16)) &
                0xffffffff;
              h1 ^= k1;
              h1 = (h1 << 13) | (h1 >>> 19);
              h1b =
                ((h1 & 0xffff) * 5 + ((((h1 >>> 16) * 5) & 0xffff) << 16)) &
                0xffffffff;
              h1 =
                (h1b & 0xffff) +
                0x6b64 +
                ((((h1b >>> 16) + 0xe654) & 0xffff) << 16);
            }
            k1 = 0;
            switch (remainder) {
              case 3:
                k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
              case 2:
                k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
              case 1:
                k1 ^= key.charCodeAt(i) & 0xff;
                k1 =
                  ((k1 & 0xffff) * c1 + ((((k1 >>> 16) * c1) & 0xffff) << 16)) &
                  0xffffffff;
                k1 = (k1 << 15) | (k1 >>> 17);
                k1 =
                  ((k1 & 0xffff) * c2 + ((((k1 >>> 16) * c2) & 0xffff) << 16)) &
                  0xffffffff;
                h1 ^= k1;
            }
            h1 ^= key.length;
            h1 ^= h1 >>> 16;
            h1 =
              ((h1 & 0xffff) * 0x85ebca6b +
                ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) &
              0xffffffff;
            h1 ^= h1 >>> 13;
            h1 =
              ((h1 & 0xffff) * 0xc2b2ae35 +
                ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16)) &
              0xffffffff;
            h1 ^= h1 >>> 16;
            return h1 >>> 0;
          }
          exports.getMurmurHash = getMurmurHash;
          function clone(
            obj,
            deepCopy,
            ignoreFunctions,
            maxLevel,
            level,
            ignoreContext
          ) {
            if (maxLevel === void 0) {
              maxLevel = 20;
            }
            if (level === void 0) {
              level = 0;
            }
            if (obj === window) return window; // do not clone the window object
            if (level > maxLevel) return null; // Too deep
            if (typeof obj == 'undefined' || obj == null) {
              return toggles_1.default.isOn('removeUndefinedProperties')
                ? obj
                : null;
            } else if (typeof obj == 'function' && ignoreFunctions) {
              return null;
            } else if (obj.constructor == Array) {
              var ar = [];
              for (var i = 0; i < obj.length; i++) {
                if (!ignoreFunctions || typeof obj[i] != 'function') {
                  if (deepCopy) {
                    ar[i] = clone(
                      obj[i],
                      deepCopy,
                      ignoreFunctions,
                      maxLevel,
                      level + 1,
                      ignoreContext
                    );
                  } else {
                    ar[i] = obj[i];
                  }
                }
              }
              return ar;
            } else if (typeof obj == 'object') {
              var o = {};
              for (var p in obj) {
                if (ignoreContext && p == 'context') continue;
                if (!ignoreFunctions || typeof obj[p] != 'function') {
                  if (deepCopy) {
                    o[p] = clone(
                      obj[p],
                      deepCopy,
                      ignoreFunctions,
                      maxLevel,
                      level + 1,
                      ignoreContext
                    );
                  } else {
                    o[p] = obj[p];
                  }
                }
              }
              return o;
            } else {
              return obj;
            }
          }
          exports.clone = clone;
          function merge(args, isDeepMerge) {
            var o = {};
            for (var i = 0; i < args.length; i++) {
              if (args[i] && args[i].length) {
                for (var u = 0; u < args[i].length; u++) {
                  for (var p in args[i][u]) {
                    o[p] = args[i][u][p];
                  }
                }
              } else {
                // Merge objects.
                if (!isDeepMerge) {
                  // Flat merge.
                  for (var p in args[i]) {
                    o[p] = args[i][p];
                  }
                } else {
                  // Deep merge.
                  for (var p in args[i]) {
                    //we override primitive / array
                    if (typeof o[p] !== 'object' || o[p] instanceof Array) {
                      o[p] = args[i][p];
                    } else {
                      o[p] = merge([o[p], args[i][p]], true);
                    }
                  }
                }
              }
            }
            return o;
          }
          exports.merge = merge;
          function unflatten(data) {
            if (Object(data) !== data || Array.isArray(data)) {
              return data;
            }
            var result = {};
            for (var p in data) {
              var cur = result;
              var prop = '';
              var parts = p.replace(/\[([0-9])]/, '.$1').split('.');
              for (var i = 0; i < parts.length; i++) {
                var idx = !isNaN(Number(parts[i]));
                cur = cur[prop] || (cur[prop] = idx ? [] : {});
                prop = parts[i];
              }
              cur[prop] = data[p];
            }
            return result[''] || {};
          }
          exports.unflatten = unflatten;
          function flatten(data, withBracket) {
            if (withBracket === void 0) {
              withBracket = false;
            }
            var result = {};
            function recurse(cur, prop) {
              if (Object(cur) !== cur) {
                result[prop] = cur;
              } else if (Array.isArray(cur)) {
                var l = cur.length;
                for (var i = 0; i < l; i++) {
                  var nestedProperty = withBracket
                    ? prop + '[' + i + ']'
                    : prop + '.' + i;
                  recurse(cur[i], prop ? nestedProperty : String(i));
                }
                if (l === 0) {
                  result[prop] = [];
                }
              } else {
                var isEmpty = true;
                for (var p in cur) {
                  isEmpty = false;
                  recurse(cur[p], prop ? prop + '.' + p : p);
                }
                if (isEmpty && prop !== '') {
                  result[prop] = {};
                }
              }
            }
            recurse(data, '');
            return result;
          }
          exports.flatten = flatten;
          function extractProperties(src, dest, schema) {
            if (src == null) return;
            if (dest == null) dest = {};
            if (src.constructor == Array) {
              for (var iSrc = 0; iSrc < src.length; iSrc++) {
                extractProperties(src[iSrc], dest, schema);
              }
            } else if (schema) {
              var arSchema = schema.split('|');
              var srcLCase = {};
              for (var fieldName in src) {
                srcLCase[fieldName.toLowerCase()] = 1;
              }
              for (var i = 0; i < arSchema.length; i++) {
                var fieldName2 = arSchema[i];
                if (srcLCase[fieldName2.toLowerCase()])
                  dest[fieldName2] = src[fieldName2];
              }
            } else {
              dest = clone(src, false);
            }
            return dest;
          }
          exports.extractProperties = extractProperties;
          function extractProperty(src, paramName) {
            var params;
            return extractProperties(src, params, paramName)[paramName];
          }
          exports.extractProperty = extractProperty;
          function parseToObject(str) {
            try {
              var parsedVal = window['JSON'].parse(str);
              if (typeof parsedVal == 'object') {
                return parsedVal;
              }
            } catch (e) {}
            return undefined;
          }
          exports.parseToObject = parseToObject;
          function removePropertiesPrefix(obj, prefix) {
            if (obj === void 0) {
              obj = {};
            }
            if (prefix === void 0) {
              prefix = '';
            }
            return Object.keys(obj).reduce(function (acc, curr) {
              var _a;
              return __webpack_provided_Object_dot_assign(
                acc,
                ((_a = {}), (_a[curr.replace(prefix, '')] = obj[curr]), _a)
              );
            }, {});
          }
          exports.removePropertiesPrefix = removePropertiesPrefix;
          function addPrefixToProperties(obj, prefix) {
            if (obj === void 0) {
              obj = {};
            }
            if (prefix === void 0) {
              prefix = '';
            }
            return Object.keys(obj).reduce(function (acc, key) {
              if (key.indexOf(prefix) !== 0) {
                acc['' + prefix + key] = obj[key];
              } else {
                acc[key] = obj[key];
              }
              return acc;
            }, {});
          }
          exports.addPrefixToProperties = addPrefixToProperties;
          function normalizeObjectKeysToLowerCase(object) {
            // Normalize all keys to lowercase in addition to their original casing.
            for (var key in object) {
              object[key.toLowerCase()] = object[key];
            }
            return object;
          }
          exports.normalizeObjectKeysToLowerCase =
            normalizeObjectKeysToLowerCase;
          function decodeObjectKeys(obj) {
            var decodeObjectKeys = {};
            for (var key in obj) {
              var decodedKey = key;
              while (decodedKey.indexOf('%') !== -1) {
                decodedKey = decodeURIComponent(decodedKey);
              }
              decodeObjectKeys[decodedKey] = obj[key];
            }
            return decodeObjectKeys;
          }
          exports.decodeObjectKeys = decodeObjectKeys;

          /* WEBPACK VAR INJECTION */
        }).call(
          this,
          __webpack_require__(
            /*! tslib */ '../node_modules/tslib/tslib.es6.js'
          )['__assign']
        );

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/promise.ts':
      /*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/promise.ts ***!
  \************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        function promisify(method, params) {
          if (params === void 0) {
            params = {};
          }
          return new gigya.Promise(function (resolve) {
            method(
              tslib_1.__assign(tslib_1.__assign({}, params), {
                callback: function (response) {
                  resolve(response);
                },
              })
            );
          });
        }
        exports.promisify = promisify;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/queue.ts':
      /*!**********************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/queue.ts ***!
  \**********************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var _q = {};
        function _servicesStatus() {
          var services = {};
          for (var service in _q) {
            var active = isActive(service);
            if (active) {
              services[service] = {
                active: true,
                waitingFor: _q[service].ids,
                queuedCount: _q[service].q.length,
              };
            } else {
              services[service] = {
                active: false,
              };
            }
          }
          return services;
        }
        exports._servicesStatus = _servicesStatus;
        function isActive(service) {
          if (!_q[service]) return false;
          for (var id in _q[service].ids) return true;
          return false;
        }
        exports.isActive = isActive;
        function release(id, service) {
          window.gigya.logger.debug('releasing ' + service + ' queue by ' + id);
          if (!_q[service]) return;
          delete _q[service].ids[id];
          if (!isActive(service)) {
            var q = _q[service].q;
            _q[service].q = [];
            while (q.length > 0) {
              var o = q.splice(0, 1)[0];
              try {
                o.func.apply(this, o.args);
              } catch (ex) {
                if (typeof console == 'object' && console.log) {
                  console.log(
                    'Gigya: Exception while invoking queued method (' +
                      service +
                      ': ' +
                      id +
                      ')'
                  );
                }
              }
              if (isActive(service)) {
                //queue became inactive
                _q[service].q = q;
                break;
              }
            }
          }
        }
        exports.release = release;
        function hold(id, service) {
          window.gigya.logger.debug('locking queue ' + service + ' by ' + id);
          if (!_q[service]) _q[service] = { q: [], ids: {} };
          _q[service].ids[id] = true;
        }
        exports.hold = hold;
        function waitFor(service, fnc, args) {
          if (!_q[service]) _q[service] = { q: [], ids: {} };
          _q[service].q.push({ func: fnc, args: args });
        }
        exports.waitFor = waitFor;
        function queueForExecution(service, func, args) {
          args = args || [];
          if (isActive(service)) {
            waitFor(service, func, args);
          } else {
            func.apply(this, args);
          }
        }
        exports.queueForExecution = queueForExecution;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/sessionCache.ts':
      /*!*****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/sessionCache.ts ***!
  \*****************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var JSONUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/JSON */ './src/core/Gigya.Js/app/Utils/JSON.ts'
        );
        var queueUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/queue */ './src/core/Gigya.Js/app/Utils/queue.ts'
        );
        var FlagService_1 = __webpack_require__(
          /*! ../Services/FlagService */ './src/core/Gigya.Js/app/Services/FlagService.ts'
        );
        var sessionStorageEnabled;
        try {
          sessionStorageEnabled = Boolean(window.sessionStorage); // when 3pc blocked, chrome throws when trying to access session storage.
        } catch (ex) {
          sessionStorageEnabled = false;
        }
        function set(key, response) {
          if (!sessionStorageEnabled) return;
          var oGigya;
          try {
            oGigya = JSONUtils.deserialize(
              window.sessionStorage.getItem('gigyaCache')
            );
            if (response == null && oGigya[key]) {
              delete oGigya[key];
            } else {
              var time = new Date().getTime();
              oGigya[key] = { response: response, time: time };
              if (key.indexOf('gig_oidcContext_') >= 0) {
                window.gigya.logger.report(
                  'oidc storage logs - set',
                  {
                    key: key,
                    value: oGigya[key],
                  },
                  false,
                  FlagService_1.FlagService.forceErrorReport
                );
              }
            }
            window.sessionStorage.setItem(
              'gigyaCache',
              JSONUtils.serialize(oGigya)
            );
          } catch (ex) {}
          queueUtils.release('cache', 'cache_' + key);
        }
        exports.set = set;
        function get(key, cacheTimeout) {
          if (cacheTimeout === void 0) {
            cacheTimeout = -1;
          }
          if (!sessionStorageEnabled) {
            return null;
          }
          try {
            if (!queueUtils.isActive('cache_' + key)) {
              var sGigyaCache = window.sessionStorage.getItem('gigyaCache');
              var oGigya = JSONUtils.deserialize(sGigyaCache);
              var cached = oGigya[key];
              if (cached) {
                var currentTime = new Date().getTime();
                if (
                  cacheTimeout < 0 ||
                  cacheTimeout + cached.time > currentTime
                ) {
                  //cached
                  return cached.response;
                } else {
                  if (key.indexOf('gig_oidcContext_') >= 0) {
                    window.gigya.logger.report(
                      'oidc storage logs - get',
                      {
                        key: key,
                        value: oGigya[key],
                        cacheTime: cached.time,
                        currentTime: currentTime,
                      },
                      false,
                      FlagService_1.FlagService.forceErrorReport
                    );
                  }
                  //expired
                  remove(key);
                  return null;
                }
              }
              if (!cached) {
                //not cached (first time)
                queueUtils.hold('cache', 'cache_' + key); //so that future requests will wait for the first one's response.
                return null;
              }
            } else {
              //wait for first response
              queueUtils.waitFor('cache_' + key, get, arguments);
              return null;
            }
          } catch (ex) {}
          return null;
        }
        exports.get = get;
        function remove(key) {
          set(key, null);
        }
        exports.remove = remove;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/stringUtils.ts':
      /*!****************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/stringUtils.ts ***!
  \****************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        function trim(s) {
          return s.replace(/^\s*(\S*(.*\S)?)\s*$/, '$1');
        }
        exports.trim = trim;
        function format(s) {
          var rest = [];
          for (var _i = 1; _i < arguments.length; _i++) {
            rest[_i - 1] = arguments[_i];
          }
          for (var i = 0; i < arguments.length - 1; i++) {
            if (arguments[i + 1] != null) {
              s = s.split('{' + i + '}').join(arguments[i + 1]);
            }
          }
          return s;
        }
        exports.format = format;
        function capitalize(s) {
          return s.substring(0, 1).toUpperCase() + s.substring(1);
        }
        exports.capitalize = capitalize;
        function endsWith(s, suffix) {
          return s.indexOf(suffix, s.length - suffix.length) !== -1;
        }
        exports.endsWith = endsWith;
        function escapeRegExp(str) {
          return str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, '\\$1');
        }
        exports.escapeRegExp = escapeRegExp;
        function replaceAll(str, find, replace) {
          if (!find) return str;
          return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);
        }
        exports.replaceAll = replaceAll;
        function mergeCommaSeparatedValues(str1, str2) {
          if (str1 === void 0) {
            str1 = '';
          }
          if (str2 === void 0) {
            str2 = '';
          }
          var arr = str1.concat(',', str2).split(',');
          return window.gigya.utils.array
            .getUniqueValues(arr)
            .filter(function (x) {
              return x;
            })
            .join(',');
        }
        exports.mergeCommaSeparatedValues = mergeCommaSeparatedValues;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/toggles.ts':
      /*!************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/toggles.ts ***!
  \************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var objectUtils = __webpack_require__(
          /*! ./object */ './src/core/Gigya.Js/app/Utils/object.ts'
        );
        var WebSDKToggles = /** @class */ (function () {
          function WebSDKToggles() {}
          WebSDKToggles.prototype.has = function (key) {
            return typeof this._toggles[key] != 'undefined';
          };
          WebSDKToggles.prototype.get = function (key) {
            return this._toggles[key];
          };
          WebSDKToggles.prototype.isOn = function (key) {
            return this.has(key) && this.get(key);
          };
          Object.defineProperty(WebSDKToggles.prototype, '_toggles', {
            get: function () {
              return objectUtils.merge([
                this._globalConfToggles,
                this._webSdkConfigToggles,
              ]);
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(WebSDKToggles.prototype, '_globalConfToggles', {
            get: function () {
              var _a, _b;
              return (
                ((_b =
                  (_a = window.gigya.thisScript) === null || _a === void 0
                    ? void 0
                    : _a.globalConf) === null || _b === void 0
                  ? void 0
                  : _b.toggles) || {}
              );
            },
            enumerable: true,
            configurable: true,
          });
          Object.defineProperty(
            WebSDKToggles.prototype,
            '_webSdkConfigToggles',
            {
              get: function () {
                var _a, _b;
                var toggles =
                  ((_b =
                    (_a = window.gigya._) === null || _a === void 0
                      ? void 0
                      : _a.config) === null || _b === void 0
                    ? void 0
                    : _b.toggles) || {};
                return Object.keys(toggles).reduce(function (newToggles, key) {
                  newToggles[key] = toggles[key] === 'on';
                  return newToggles;
                }, {});
              },
              enumerable: true,
              configurable: true,
            }
          );
          return WebSDKToggles;
        })();
        exports.default = new WebSDKToggles();

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/validation.ts':
      /*!***************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/validation.ts ***!
  \***************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        function isExplicitTrue(val) {
          var lc = ('' + val).toLowerCase();
          return lc == 'true' || lc == '1';
        }
        exports.isExplicitTrue = isExplicitTrue;
        function isExplicitFalse(val) {
          var lc = ('' + val).toLowerCase();
          return lc == 'false' || lc == '0';
        }
        exports.isExplicitFalse = isExplicitFalse;
        function isLaterThanNow(expirationTime) {
          return expirationTime > new Date().getTime();
        }
        exports.isLaterThanNow = isLaterThanNow;
        function allDefinedOrAllUndefined() {
          var args = [];
          for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
          }
          var anyUndefined = args.some(function (x) {
            return typeof x === 'undefined';
          });
          var anyDefined = args.some(function (x) {
            return typeof x !== 'undefined';
          });
          return (anyDefined && !anyUndefined) || (!anyDefined && anyUndefined);
        }
        exports.allDefinedOrAllUndefined = allDefinedOrAllUndefined;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/Utils/viewport.ts':
      /*!*************************************************!*\
  !*** ./src/core/Gigya.Js/app/Utils/viewport.ts ***!
  \*************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        function getScroll() {
          var scrOfX = 0,
            scrOfY = 0;
          if (typeof window.pageYOffset == 'number') {
            scrOfY = window.pageYOffset;
            scrOfX = window.pageXOffset;
          } else if (
            document.body &&
            (document.body.scrollLeft || document.body.scrollTop)
          ) {
            scrOfY = document.body.scrollTop;
            scrOfX = document.body.scrollLeft;
          } else if (
            document.documentElement &&
            (document.documentElement.scrollLeft ||
              document.documentElement.scrollTop)
          ) {
            scrOfY = document.documentElement.scrollTop;
            scrOfX = document.documentElement.scrollLeft;
          }
          return { left: scrOfX, top: scrOfY };
        }
        exports.getScroll = getScroll;
        function getFullSize() {
          var de = document.documentElement;
          var db = document.body;
          var h = de.clientHeight;
          if (h == 0) h = db.clientHeight;
          var w = de.clientWidth;
          if (w == 0) w = db.clientWidth;
          return { w: w, h: h };
        }
        exports.getFullSize = getFullSize;
        function getOrientation() {
          var orientation = parseInt(window['orientation'] || '0');
          if (orientation < 0) orientation += 360;
          return orientation;
        }
        exports.getOrientation = getOrientation;
        function getOuterSize() {
          var h;
          var w;
          var de = document.documentElement;
          var db = document.body;
          if (window.outerHeight) {
            h = window.outerHeight;
            w = window.outerWidth;
          } else {
            h = de.clientHeight;
            if (h == 0) h = db.clientHeight;
            w = de.clientWidth;
            if (w == 0) w = db.clientWidth;
          }
          return { w: w, h: h };
        }
        exports.getOuterSize = getOuterSize;
        function getInnerSize() {
          var h;
          var w;
          var de = document.documentElement;
          var db = document.body;
          if (window.innerHeight) {
            h = window.innerHeight;
            w = window.innerWidth;
          } else {
            h = de.clientHeight;
            if (h == 0) h = db.clientHeight;
            w = de.clientWidth;
            if (w == 0) w = db.clientWidth;
          }
          return { w: w, h: h };
        }
        exports.getInnerSize = getInnerSize;
        function getMiddleCenter() {
          var scroll = getScroll();
          var size = getInnerSize();
          return {
            top: scroll.top + Math.floor(size.h / 2),
            left: scroll.left + Math.floor(size.w / 2),
          };
        }
        exports.getMiddleCenter = getMiddleCenter;
        function isRectHorizontallyVisible(rect) {
          var scroll = getScroll();
          var size = getInnerSize();
          return rect.left >= scroll.left && rect.right <= scroll.left + size.w;
        }
        exports.isRectHorizontallyVisible = isRectHorizontallyVisible;
        function isRectFullyVisible(rect) {
          var scroll = getScroll();
          var size = getInnerSize();
          return (
            rect.top >= scroll.top &&
            rect.bottom <= scroll.top + size.h &&
            rect.left >= scroll.left &&
            rect.right <= scroll.left + size.w
          );
        }
        exports.isRectFullyVisible = isRectFullyVisible;
        function scrollIntoView(element) {
          if (element && element.scrollIntoView) {
            element.scrollIntoView();
          }
        }
        exports.scrollIntoView = scrollIntoView;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/cdn.ts':
      /*!**************************************!*\
  !*** ./src/core/Gigya.Js/app/cdn.ts ***!
  \**************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var selectedCdnHostsIndex = 0;
        exports.CDN_HOSTS = {
          http: [
            'cdn.gigya.com',
            'cdn1.gigya.com',
            'cdn2.gigya.com',
            'cdn3.gigya.com',
          ],
          https: [
            'cdns.gigya.com',
            'cdns1.gigya.com',
            'cdns2.gigya.com',
            'cdns3.gigya.com',
          ],
        };
        function getCdnResource(path) {
          var _a, _b, _c, _d;
          // gigya.thisScript may not exist if loaded for ssoOrig.
          var baseDomain =
            (_b =
              (_a = window.gigya.thisScript) === null || _a === void 0
                ? void 0
                : _a.baseDomain) !== null && _b !== void 0
              ? _b
              : '';
          var protocol =
            (_d =
              (_c = window.gigya.thisScript) === null || _c === void 0
                ? void 0
                : _c.protocol) !== null && _d !== void 0
              ? _d
              : 'https';
          // If no base domain or if base domain ends with .gigya.com, use Gigya CDN.
          // Otherwise use the base domain.
          if (!baseDomain || /cdns?\.gigya\.com$/.test(baseDomain)) {
            var selectedSchemaRepository = exports.CDN_HOSTS[protocol];
            if (selectedSchemaRepository.length <= selectedCdnHostsIndex) {
              selectedCdnHostsIndex = 0;
            }
            baseDomain = selectedSchemaRepository[selectedCdnHostsIndex++];
          }
          // Ensure the path starts with "/".
          if (path) {
            if (path.indexOf('/') !== 0) {
              path = '/' + path;
            }
          }
          return protocol + '://' + baseDomain + (path || '');
        }
        exports.getCdnResource = getCdnResource;
        function getImgCdnResource() {
          return getCdnResource('/gs/i/');
        }
        exports.getImgCdnResource = getImgCdnResource;

        /***/
      },

    /***/ './src/core/Gigya.Js/app/consts.ts':
      /*!*****************************************!*\
  !*** ./src/core/Gigya.Js/app/consts.ts ***!
  \*****************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var SessionExpiration;
        (function (SessionExpiration) {
          SessionExpiration[(SessionExpiration['Session'] = 0)] = 'Session';
          SessionExpiration[(SessionExpiration['Dynamic'] = -1)] = 'Dynamic';
          SessionExpiration[(SessionExpiration['Forever'] = -2)] = 'Forever'; // one year
        })(
          (SessionExpiration =
            exports.SessionExpiration || (exports.SessionExpiration = {}))
        );

        /***/
      },

    /***/ './src/core/Gigya.Js/interfaces/IApiAdapter.ts':
      /*!*****************************************************!*\
  !*** ./src/core/Gigya.Js/interfaces/IApiAdapter.ts ***!
  \*****************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var OAuthMode;
        (function (OAuthMode) {
          OAuthMode[(OAuthMode['Social'] = 0)] = 'Social';
          OAuthMode[(OAuthMode['Sso'] = 1)] = 'Sso';
        })((OAuthMode = exports.OAuthMode || (exports.OAuthMode = {})));

        /***/
      },

    /***/ './src/core/ServiceProxy/ProxyListener.ts':
      /*!************************************************!*\
  !*** ./src/core/ServiceProxy/ProxyListener.ts ***!
  \************************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var utils = __webpack_require__(
          /*! src/core/ServiceProxy/utils */ './src/core/ServiceProxy/utils.ts'
        );
        var interfaces_1 = __webpack_require__(
          /*! src/core/ServiceProxy/interfaces */ './src/core/ServiceProxy/interfaces.ts'
        );
        var ProxyListener = /** @class */ (function () {
          function ProxyListener(
            _service,
            origin,
            _allowedMethods,
            _target,
            _win
          ) {
            var _this = this;
            if (origin === void 0) {
              origin = utils.getParentUrl();
            }
            if (_allowedMethods === void 0) {
              _allowedMethods = utils.getAllClassMethodsNames(_service);
            }
            if (_target === void 0) {
              _target = window.parent;
            }
            if (_win === void 0) {
              _win = window;
            }
            this._service = _service;
            this.origin = origin;
            this._allowedMethods = _allowedMethods;
            this._target = _target;
            this._win = _win;
            this.stopCancellers = [];
            this._listening = false;
            this.onRequest = function (e) {
              return tslib_1.__awaiter(
                _this,
                void 0,
                gigya.Promise,
                function () {
                  var req, e_1;
                  return tslib_1.__generator(this, function (_a) {
                    switch (_a.label) {
                      case 0:
                        if (!utils.validateOrigin(this.origin, e.origin))
                          return [3 /*break*/, 7];
                        req = JSON.parse(e.data);
                        _a.label = 1;
                      case 1:
                        _a.trys.push([1, 6, , 7]);
                        if (!interfaces_1.isSignalRequest(req))
                          return [3 /*break*/, 3];
                        return [4 /*yield*/, this.handleSignalRequest(req)];
                      case 2:
                        _a.sent();
                        return [3 /*break*/, 5];
                      case 3:
                        // normal request
                        return [4 /*yield*/, this.handleProxyRequest(req)];
                      case 4:
                        // normal request
                        _a.sent();
                        _a.label = 5;
                      case 5:
                        return [3 /*break*/, 7];
                      case 6:
                        e_1 = _a.sent();
                        this.postError({ res: e_1.message || e_1, id: req.id });
                        return [3 /*break*/, 7];
                      case 7:
                        return [2 /*return*/];
                    }
                  });
                }
              );
            };
          }
          Object.defineProperty(ProxyListener.prototype, 'isListening', {
            get: function () {
              return this._listening;
            },
            enumerable: true,
            configurable: true,
          });
          ProxyListener.prototype.listen = function (payload) {
            var _this = this;
            if (!this.isListening) {
              this._win.setTimeout(function () {
                // setTimeout workaround for IE9. else we'll get JSON is undefined
                _this._win.addEventListener('message', _this.onRequest, true);
                _this.postMessage({
                  id: undefined,
                  signal: 'listening',
                  res: payload,
                });
                _this._listening = true;
              }, 1);
            }
          };
          ProxyListener.prototype.postError = function (res) {
            res.signal = 'error';
            this.postMessage(res);
          };
          ProxyListener.prototype.stopListen = function () {
            if (this.isListening) {
              this._win.removeEventListener('message', this.onRequest, true);
              this._listening = false;
            }
          };
          ProxyListener.prototype.handleSignalRequest = function (req) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var _a, cancel, res, payload;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    _a = req.signal;
                    switch (_a) {
                      case 'stop':
                        return [3 /*break*/, 1];
                    }
                    return [3 /*break*/, 7];
                  case 1:
                    return [4 /*yield*/, this.getCancelResult()];
                  case 2:
                    cancel = _b.sent();
                    res = void 0;
                    if (!!cancel) return [3 /*break*/, 5];
                    this.stopListen();
                    payload = void 0;
                    if (!this.onStop) return [3 /*break*/, 4];
                    payload = this.onStop();
                    if (!payload.then) return [3 /*break*/, 4];
                    return [4 /*yield*/, payload];
                  case 3:
                    payload = _b.sent();
                    _b.label = 4;
                  case 4:
                    res = {
                      id: req.id,
                      signal: 'stop',
                      res: payload,
                    };
                    return [3 /*break*/, 6];
                  case 5:
                    res = {
                      id: req.id,
                      signal: 'error',
                      res: cancel,
                    };
                    _b.label = 6;
                  case 6:
                    this.postMessage(res);
                    return [3 /*break*/, 8];
                  case 7:
                    // ignore
                    return [3 /*break*/, 8];
                  case 8:
                    return [2 /*return*/];
                }
              });
            });
          };
          ProxyListener.prototype.getCancelResult = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var _i, _a, shouldCancelStop, res;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    (_i = 0), (_a = this.stopCancellers);
                    _b.label = 1;
                  case 1:
                    if (!(_i < _a.length)) return [3 /*break*/, 5];
                    shouldCancelStop = _a[_i];
                    res = shouldCancelStop();
                    if (!res.then) return [3 /*break*/, 3];
                    return [4 /*yield*/, res];
                  case 2:
                    res = _b.sent();
                    _b.label = 3;
                  case 3:
                    if (res) return [2 /*return*/, res];
                    _b.label = 4;
                  case 4:
                    _i++;
                    return [3 /*break*/, 1];
                  case 5:
                    return [2 /*return*/, undefined];
                }
              });
            });
          };
          ProxyListener.prototype.handleProxyRequest = function (req) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var res;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    this.validateRequest(req);
                    return [4 /*yield*/, this.forwardToService(req)];
                  case 1:
                    res = _a.sent();
                    this.postMessage({
                      id: req.id,
                      res: res,
                    });
                    return [2 /*return*/];
                }
              });
            });
          };
          ProxyListener.prototype.validateRequest = function (req) {
            if (
              !req.id ||
              !req.methodName ||
              this._allowedMethods.indexOf(req.methodName) < 0
            ) {
              throw 'proxy request in invalid format';
            }
          };
          ProxyListener.prototype.forwardToService = function (req) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var method, result;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    method = this._service[req.methodName];
                    result = method.apply(this._service, req.params);
                    if (!(result && result.then)) return [3 /*break*/, 2];
                    return [4 /*yield*/, result];
                  case 1:
                    result = _a.sent();
                    _a.label = 2;
                  case 2:
                    return [2 /*return*/, result];
                }
              });
            });
          };
          ProxyListener.prototype.postMessage = function (msg) {
            var message = typeof msg === 'object' ? JSON.stringify(msg) : msg;
            this._target.postMessage(message, this.origin);
          };
          return ProxyListener;
        })();
        exports.ProxyListener = ProxyListener;

        /***/
      },

    /***/ './src/core/ServiceProxy/ServiceProxy.ts':
      /*!***********************************************!*\
  !*** ./src/core/ServiceProxy/ServiceProxy.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var utils = __webpack_require__(
          /*! src/core/ServiceProxy/utils */ './src/core/ServiceProxy/utils.ts'
        );
        var ServiceProxy = /** @class */ (function () {
          function ServiceProxy(
            url,
            timeout,
            _idCreator,
            _iframeCreator,
            getIframeHost,
            _win
          ) {
            var _this = this;
            if (timeout === void 0) {
              timeout = 60000;
            }
            if (_idCreator === void 0) {
              _idCreator = utils.generateId;
            }
            if (_iframeCreator === void 0) {
              _iframeCreator = utils.createIframe;
            }
            if (getIframeHost === void 0) {
              getIframeHost = function () {
                return new gigya.Promise(function (resolve) {
                  if (document.body) resolve(document.body);
                  else
                    document.addEventListener('DOMContentLoaded', function () {
                      return resolve(document.body);
                    });
                });
              };
            }
            if (_win === void 0) {
              _win = window;
            }
            this.url = url;
            this.timeout = timeout;
            this._idCreator = _idCreator;
            this._iframeCreator = _iframeCreator;
            this.getIframeHost = getIframeHost;
            this._win = _win;
            this._pendingReqs = [];
            this._mutationObservers = [];
            this.onResponse = function (e) {
              // arrow function to preserve context
              var msg = window.gigya.utils.JSON.parse(e.data);
              if (
                msg &&
                _this._pendingReqs[msg.id] &&
                _this.validateOrigin(e.origin)
              ) {
                _this._pendingReqs[msg.id](msg);
                delete _this._pendingReqs[msg.id];
              }
            };
          }
          Object.defineProperty(ServiceProxy.prototype, 'isInit', {
            get: function () {
              return Boolean(this._iframe);
            },
            enumerable: true,
            configurable: true,
          });
          ServiceProxy.prototype.init = function (title) {
            var _this = this;
            if (this.isInit)
              return gigya.Promise.reject('proxy already initialized');
            else
              return new gigya.Promise(function (resolve, reject) {
                _this._iframe = _this._iframeCreator(title);
                _this._iframe.src = _this.url;
                _this.getIframeHost().then(function (host) {
                  _this._iframeHost = host;
                  _this._iframeHost.appendChild(_this._iframe);
                  if (window.gigya.logger.isEnabled) {
                    // observe iframe removal only if gigya.logger is explicitly enabled
                    _this.startObservingIFrameRemoval();
                  }
                  var timeoutId = _this._win.setTimeout(function () {
                    return reject('proxy init timeout');
                  }, _this.timeout);
                  var onInitResponse = function (e) {
                    if (_this.validateOrigin(e.origin)) {
                      var response = _this._tryParseResponse(e.data);
                      if (
                        response === null || response === void 0
                          ? void 0
                          : response.signal
                      ) {
                        _this._win.clearTimeout(timeoutId);
                        _this._win.removeEventListener(
                          'message',
                          onInitResponse,
                          true
                        );
                        switch (response.signal) {
                          case 'listening':
                            _this._win.addEventListener(
                              'message',
                              _this.onResponse,
                              true
                            );
                            resolve(response.res);
                            break;
                          case 'error':
                          case 'stop':
                            reject(response.res);
                            break;
                          default:
                            reject('unsupported response');
                            break;
                        }
                      }
                    }
                  };
                  _this._win.addEventListener('message', onInitResponse, true);
                });
              });
          };
          ServiceProxy.prototype.validateOrigin = function (checked) {
            return utils.validateOrigin(this._iframe.src, checked);
          };
          ServiceProxy.prototype.postToIFrame = function (req) {
            var onMsgResponse = this.registerMessage(req);
            var message = typeof req === 'object' ? JSON.stringify(req) : req;
            this._iframe.contentWindow.postMessage(message, this._iframe.src);
            return onMsgResponse;
          };
          ServiceProxy.prototype.registerMessage = function (req, timeout) {
            var _this = this;
            if (timeout === void 0) {
              timeout = this.timeout;
            }
            return new gigya.Promise(function (resolve, reject) {
              var timeoutId = _this._win.setTimeout(function () {
                reject('proxy request timeout');
              }, timeout);
              _this._pendingReqs[req.id] = function (e) {
                _this._win.clearTimeout(timeoutId);
                if (e.signal === 'error') {
                  reject(e.res);
                } else {
                  resolve(e.res);
                }
              };
            });
          };
          ServiceProxy.prototype.sendRequest = function (methodName, params) {
            return this.postToIFrame({
              id: this._idCreator(),
              methodName: methodName,
              params: params,
            });
          };
          ServiceProxy.prototype.stop = function (forceClose) {
            if (forceClose === void 0) {
              forceClose = false;
            }
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var error, e_1;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    if (!!this.isInit) return [3 /*break*/, 1];
                    throw 'proxy is not active';
                  case 1:
                    error = void 0;
                    _a.label = 2;
                  case 2:
                    _a.trys.push([2, 4, 5, 6]);
                    return [
                      4 /*yield*/,
                      this.postToIFrame({
                        id: this._idCreator(),
                        signal: 'stop',
                      }),
                    ];
                  case 3:
                    return [2 /*return*/, _a.sent()];
                  case 4:
                    e_1 = _a.sent();
                    error = e_1;
                    throw e_1;
                  case 5:
                    if (!error || forceClose) {
                      if (
                        this._mutationObservers &&
                        this._mutationObservers.length
                      ) {
                        // disconnect mutation observers, if any.
                        this.stopObservingIFrameRemoval();
                      }
                      this._win.removeEventListener(
                        'message',
                        this.onResponse,
                        true
                      );
                      this._iframeHost.removeChild(this._iframe);
                      delete this._iframe;
                    }
                    return [7 /*endfinally*/];
                  case 6:
                    return [2 /*return*/];
                }
              });
            });
          };
          ServiceProxy.prototype.wrapWith = function (type) {
            var keys;
            if (typeof type === 'function')
              keys = utils.getAllClassMethodsNames(type);
            else if (type instanceof Array) keys = type;
            else if (typeof type === 'object') keys = Object.keys(type);
            //.concat(getAllClassMethodsNames(Object.getPrototypeOf(type)));
            else throw 'unsupported type for wrapper';
            return this.proxyFromKeys(keys);
          };
          ServiceProxy.prototype.proxyFromKeys = function (keys) {
            var _this = this;
            var proxy = {};
            keys.forEach(function (key) {
              return (proxy[key] = function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                  args[_i] = arguments[_i];
                }
                return _this.sendRequest(key, args);
              });
            });
            return proxy;
          };
          ServiceProxy.prototype.startObservingIFrameRemoval = function () {
            var targetNode = this._iframe;
            while (targetNode.parentElement) {
              // observe the iframe and its parents (iframe,body)
              this.addMutationObserver(targetNode);
              targetNode = targetNode.parentElement;
            }
          };
          ServiceProxy.prototype.stopObservingIFrameRemoval = function () {
            this._mutationObservers.forEach(function (observer) {
              if (observer && observer.disconnect) {
                observer.disconnect();
              }
            });
            this._mutationObservers = [];
          };
          ServiceProxy.prototype.addMutationObserver = function (targetNode) {
            var _this = this;
            var mutationCallback = function (mutationsList) {
              for (
                var _i = 0, mutationsList_1 = mutationsList;
                _i < mutationsList_1.length;
                _i++
              ) {
                var mutation = mutationsList_1[_i];
                if (
                  mutation.type == 'childList' &&
                  mutation.removedNodes.length
                ) {
                  // A child node has been removed.
                  for (var i = 0; i < mutation.removedNodes.length; i++) {
                    var removedNode = mutation.removedNodes.item(i);
                    if (removedNode === targetNode) {
                      window.gigya.logger.warn(
                        "### Gigya's service proxy has been unexpectedly detached from the DOM. " +
                          'This may cause unexpected behavior including a complete loss of service. ###'
                      );
                      _this.stopObservingIFrameRemoval(); // can stop observing for iframe removal
                      return; // stop the loop
                    }
                  }
                }
              }
            };
            // Create an observer instance linked to the callback function to execute when mutations are observed
            var observer = new MutationObserver(mutationCallback);
            // Start observing the the target-node's parent element for configured mutations
            observer.observe(targetNode.parentElement, {
              childList: true,
              subtree: false,
            });
            this._mutationObservers.push(observer);
          };
          ServiceProxy.prototype._tryParseResponse = function (dataStr) {
            try {
              return JSON.parse(dataStr);
            } catch (e) {
              window.gigya.logger.warn('received message with invalid format', {
                data: dataStr,
              });
            }
          };
          return ServiceProxy;
        })();
        exports.ServiceProxy = ServiceProxy;

        /***/
      },

    /***/ './src/core/ServiceProxy/interfaces.ts':
      /*!*********************************************!*\
  !*** ./src/core/ServiceProxy/interfaces.ts ***!
  \*********************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        function isSignalRequest(req) {
          return Boolean(req.signal);
        }
        exports.isSignalRequest = isSignalRequest;

        /***/
      },

    /***/ './src/core/ServiceProxy/utils.ts':
      /*!****************************************!*\
  !*** ./src/core/ServiceProxy/utils.ts ***!
  \****************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        exports.getParentUrl = function (win, doc) {
          if (win === void 0) {
            win = window;
          }
          if (doc === void 0) {
            doc = document;
          }
          return win.location != win.parent.location
            ? doc.referrer
            : doc.location.href;
        };
        exports.getBodyElement = function (doc) {
          if (doc === void 0) {
            doc = document;
          }
          return new gigya.Promise(function (resolve) {
            if (doc.body) resolve(doc.body);
            else
              doc.addEventListener('DOMContentLoaded', function () {
                return resolve(doc.body);
              });
          });
        };
        exports.validateOrigin = function (origin, checked) {
          var _a;
          return (
            ((_a =
              origin === null || origin === void 0
                ? void 0
                : origin.toLowerCase()) === null || _a === void 0
              ? void 0
              : _a.indexOf(
                  checked === null || checked === void 0
                    ? void 0
                    : checked.toLowerCase()
                )) === 0
          );
        };
        exports.createIframe = function (title, doc) {
          if (title === void 0) {
            title = 'Gigya Frame';
          }
          if (doc === void 0) {
            doc = document;
          }
          var iframe = doc.createElement('iframe');
          iframe.style.position = 'absolute';
          iframe.style.height = '0px';
          iframe.style.width = '0px';
          iframe.style.display = 'none';
          iframe.title = title;
          iframe.setAttribute('aria-hidden', 'true');
          return iframe;
        };
        var _counter = 1;
        exports.generateId = function () {
          return String(_counter++);
        };
        function isClass(type) {
          return !!type.prototype;
        }
        exports.getAllClassMethodsNames = function (type) {
          var props = [];
          var proto = isClass(type) ? type.prototype : type;
          do {
            try {
              /** initial implementation - using filter **/
              var l = Object.getOwnPropertyNames(proto)
                // .concat(Object.getOwnPropertySymbols(proto).map(s => s.toString()))
                .map(function (s) {
                  return s.toString();
                })
                .sort()
                .filter(function (p, i, arr) {
                  return (
                    typeof proto[p] === 'function' && //only the methods
                    p !== 'constructor' && //not the constructor
                    (i == 0 || p !== arr[i - 1]) && //not overriding in this prototype
                    props.indexOf(p) === -1
                  );
                });
              props = props.concat(l);
            } catch (e) {
              /** bug fix implementation - using custom our own filter logic
             case of Array.filter polyfill causing "can not read property '0' of undefined" **/
              var arr = Object.getOwnPropertyNames(proto)
                // .concat(Object.getOwnPropertySymbols(proto).map(s => s.toString()))
                .map(function (s) {
                  return s.toString();
                })
                .sort();
              var l = [];
              for (var i = 0; i < arr.length; i++) {
                var p = arr[i];
                if (
                  typeof proto[p] === 'function' && //only the methods
                  p !== 'constructor' && //not the constructor
                  (i == 0 || p !== arr[i - 1]) && //not overriding in this prototype
                  props.indexOf(p) === -1
                ) {
                  //not overridden in a child
                  l.push(p);
                }
              }
              props = props.concat(l);
            }
          } while (
            (proto = Object.getPrototypeOf(proto)) && //walk-up the prototype chain
            Object.getPrototypeOf(proto) //not the the Object prototype methods (hasOwnProperty, etc...)
          );
          return props;
        };

        /***/
      },

    /***/ './src/fidm/Gigya.JS.SSO/app/globalProvider.ts':
      /*!*****************************************************!*\
  !*** ./src/fidm/Gigya.JS.SSO/app/globalProvider.ts ***!
  \*****************************************************/
      /*! no static exports found */
      /***/ function (module, exports) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var GlobalProvider = /** @class */ (function () {
          function GlobalProvider() {}
          GlobalProvider.prototype.documentLocation = function () {
            return document.location;
          };
          GlobalProvider.prototype.postMessageToParent = function (
            message,
            targetOrigin,
            transfer
          ) {
            window.parent.postMessage(message, targetOrigin, transfer);
          };
          return GlobalProvider;
        })();
        exports.GlobalProvider = GlobalProvider;
        exports.default = new GlobalProvider();

        /***/
      },

    /***/ './src/fidm/Gigya.JS.SSO/app/sso.ts':
      /*!******************************************!*\
  !*** ./src/fidm/Gigya.JS.SSO/app/sso.ts ***!
  \******************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var tslib_1 = __webpack_require__(
          /*! tslib */ '../node_modules/tslib/tslib.es6.js'
        );
        var GSErrors_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/GSErrors */ './src/core/Gigya.Js/app/GSErrors.ts'
        );
        var ssoUtils_1 = __webpack_require__(
          /*! src/fidm/Gigya.JS.SSO/app/ssoUtils */ './src/fidm/Gigya.JS.SSO/app/ssoUtils.ts'
        );
        var Sso = /** @class */ (function () {
          function Sso(
            _apiKey,
            _siteApiKey,
            _ssoSegment,
            _ssoConfig,
            _utils,
            _storage
          ) {
            var _this = this;
            if (_ssoConfig === void 0) {
              _ssoConfig = {
                validDomains: [],
                logoutURLs: {},
                canaryCookiesNames: {
                  isCanary: 'gig_isCanary',
                  version: 'gig_canary_ver',
                },
              };
            }
            if (_utils === void 0) {
              _utils = new ssoUtils_1.SsoUtils();
            }
            if (_storage === void 0) {
              _storage = _utils.getCookiesStorage();
            }
            this._apiKey = _apiKey;
            this._siteApiKey = _siteApiKey;
            this._ssoSegment = _ssoSegment;
            this._ssoConfig = _ssoConfig;
            this._utils = _utils;
            this._storage = _storage;
            this._checkFragment = function () {
              var fragment = _this._utils.getFragment();
              if (fragment && fragment !== _this._currentFragment) {
                _this._currentFragment = fragment;
                _this._start(_this._utils.deserialize(fragment));
              }
              window.setTimeout(_this._checkFragment, 200);
            };
            this._storageKey = this._createKey('gig_loginToken');
            var canaryCookiesNames = this._ssoConfig.canaryCookiesNames;
            if (typeof canaryCookiesNames !== 'undefined') {
              this._canaryKey = this._createKey(canaryCookiesNames.isCanary);
              this._canaryVerKey = this._createKey(canaryCookiesNames.version);
            }
          }
          Sso.prototype.init = function () {
            // Start repeatedly checking fragment for a new call.
            this._checkFragment();
          };
          Sso.prototype._start = function (params) {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var response, _a;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    this._mode = params.m;
                    this._requestDomain = params.d; // Receiving domain.
                    this._lid = params.lid;
                    this._callbackID = params.callbackID;
                    this._siteApiKey = params.sAPIKey;
                    // Abort if not in iFrame
                    if (!window.parent) {
                      console.log('gigya sso: invalid use');
                      return [2 /*return*/];
                    } else if (
                      !this._utils.isValidDomain(
                        this._ssoConfig.validDomains,
                        this._requestDomain
                      )
                    ) {
                      console.log(
                        'gigya sso: ' +
                          this._requestDomain +
                          ' is not in valid domain: ' +
                          this._ssoConfig.validDomains.join(',')
                      );
                      return [2 /*return*/];
                    }
                    _a = params.m;
                    switch (_a) {
                      case 'logout':
                        return [3 /*break*/, 1];
                      case 'removeToken':
                        return [3 /*break*/, 3];
                      case 'getToken':
                        return [3 /*break*/, 5];
                      case 'setToken':
                        return [3 /*break*/, 7];
                      case 'setGroupContext':
                        return [3 /*break*/, 9];
                      case 'setLoginTokenExp':
                        return [3 /*break*/, 11];
                      case 'getLoginTokenExp':
                        return [3 /*break*/, 13];
                      case 'checkTokenRenew':
                        return [3 /*break*/, 15];
                      case 'syncCanaryIndication':
                        return [3 /*break*/, 17];
                      case 'setGroupApiDomain':
                        return [3 /*break*/, 19];
                      case 'getGroupApiDomain':
                        return [3 /*break*/, 21];
                    }
                    return [3 /*break*/, 23];
                  case 1:
                    return [4 /*yield*/, this.logout()];
                  case 2:
                    response = _b.sent();
                    return [3 /*break*/, 24];
                  case 3:
                    return [4 /*yield*/, this.removeToken()];
                  case 4:
                    _b.sent();
                    return [3 /*break*/, 24];
                  case 5:
                    return [4 /*yield*/, this.getToken()];
                  case 6:
                    response = _b.sent();
                    return [3 /*break*/, 24];
                  case 7:
                    return [
                      4 /*yield*/,
                      this.setToken(
                        params.lt,
                        String(params.expiration),
                        params.gltexp
                      ),
                    ];
                  case 8:
                    _b.sent();
                    return [3 /*break*/, 24];
                  case 9:
                    return [
                      4 /*yield*/,
                      this.setGroupContext(params.groupContext),
                    ];
                  case 10:
                    _b.sent();
                    return [3 /*break*/, 24];
                  case 11:
                    return [
                      4 /*yield*/,
                      this.setTokenExpiration(params.loginTokenExp),
                    ];
                  case 12:
                    response = _b.sent();
                    return [3 /*break*/, 24];
                  case 13:
                    return [4 /*yield*/, this.getTokenExpiration()];
                  case 14:
                    response = _b.sent();
                    return [3 /*break*/, 24];
                  case 15:
                    return [
                      4 /*yield*/,
                      this.checkTokenRenew(params.loginToken),
                    ];
                  case 16:
                    response = _b.sent();
                    return [3 /*break*/, 24];
                  case 17:
                    return [
                      4 /*yield*/,
                      this.syncCanaryIndication(
                        params.isCanary,
                        params.canaryVersion
                      ),
                    ];
                  case 18:
                    response = _b.sent();
                    return [3 /*break*/, 24];
                  case 19:
                    return [4 /*yield*/, this.setGroupApiDomain(params.domain)];
                  case 20:
                    _b.sent();
                    return [3 /*break*/, 24];
                  case 21:
                    return [4 /*yield*/, this.getGroupApiDomain()];
                  case 22:
                    response = _b.sent();
                    return [3 /*break*/, 24];
                  case 23:
                    response = {
                      errorCode: GSErrors_1.GSErrors.INVALID_API_METHOD,
                    };
                    _b.label = 24;
                  case 24:
                    this._utils.sendMessage(
                      response,
                      this._callbackID,
                      this._requestDomain
                    );
                    return [2 /*return*/];
                }
              });
            });
          };
          Sso.prototype.getGroupApiDomain = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var domain;
              return tslib_1.__generator(this, function (_a) {
                domain = this._storage.getItem('apiDomain_' + this._apiKey);
                return [
                  2 /*return*/,
                  {
                    errorCode: GSErrors_1.GSErrors.OK,
                    domain: domain,
                  },
                ];
              });
            });
          };
          Sso.prototype.setGroupApiDomain = function (domain) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              return tslib_1.__generator(this, function (_a) {
                this._storage.setItem('apiDomain_' + this._apiKey, domain);
                return [2 /*return*/];
              });
            });
          };
          Sso.prototype.logout = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var logoutURLs;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    logoutURLs = this._getLogoutURLs();
                    return [4 /*yield*/, this.removeToken()];
                  case 1:
                    _a.sent();
                    this._storage.removeItem(this._storageKey + '_visited');
                    return [2 /*return*/, { logoutURLs: logoutURLs }];
                }
              });
            });
          };
          Sso.prototype.removeToken = function () {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var loginToken;
              return tslib_1.__generator(this, function (_a) {
                loginToken = this._storage.getItem(this._storageKey);
                if (loginToken) {
                  this._markRevokedLoginToken(loginToken);
                  this._storage.removeItem(this._storageKey);
                }
                this._storage.removeItem(this._storageKey + '_exp');
                this._storage.removeItem(this._storageKey + '_gltexp');
                this._storage.removeItem(this._storageKey + '_session');
                this._storage.removeItem(this._storageKey + '_context');
                return [2 /*return*/];
              });
            });
          };
          Sso.prototype.getToken = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var errorCode,
                lt,
                storageExp,
                exp,
                twoYearFromNow,
                gltexp,
                groupContext,
                inSession,
                response;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    errorCode = 0;
                    lt = this._storage.getItem(this._storageKey);
                    storageExp = this._storage.getItem(
                      this._storageKey + '_exp'
                    );
                    if (storageExp === 'undefined') {
                      exp = Date.now() - 1000;
                    } else {
                      exp = Number(storageExp);
                      twoYearFromNow =
                        Date.now() + 1000 * 60 * 60 * 24 * 365 * 2;
                      if (exp > twoYearFromNow) {
                        exp = Date.now() - 1000;
                      }
                    }
                    gltexp = this._storage.getItem(
                      this._storageKey + '_gltexp'
                    );
                    groupContext = this._storage.getItem(
                      this._storageKey + '_context'
                    );
                    inSession =
                      gltexp ||
                      this._storage.getItem(this._storageKey + '_session') ===
                        '1';
                    if (
                      !(
                        !isNaN(exp) &&
                        ((exp === 0 && !inSession) ||
                          (exp > 0 && new Date().getTime() > exp))
                      )
                    )
                      return [3 /*break*/, 2];
                    // expired!
                    return [4 /*yield*/, this.removeToken()];
                  case 1:
                    // expired!
                    _a.sent();
                    lt = undefined;
                    _a.label = 2;
                  case 2:
                    if (!lt) {
                      // no user
                      return [
                        2 /*return*/,
                        {
                          errorCode: GSErrors_1.GSErrors.UNAUTHORIZED_USER,
                        },
                      ];
                    } else {
                      this._markSiteVisited();
                    }
                    response = {
                      errorCode: errorCode,
                      login_token: lt,
                      expires_in:
                        exp === 0
                          ? 0
                          : Math.round((exp - new Date().getTime()) / 1000),
                    };
                    if (groupContext) {
                      response.groupContext = groupContext;
                    }
                    if (exp === 0 && gltexp) {
                      response.gltexp = gltexp;
                    }
                    return [2 /*return*/, response];
                }
              });
            });
          };
          Sso.prototype.setToken = function (lt, expiration, gltexp) {
            var _a;
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              var oldToken, expiresIn, expiresInMs;
              return tslib_1.__generator(this, function (_b) {
                switch (_b.label) {
                  case 0:
                    lt = lt.split('|')[0];
                    oldToken =
                      (_a = this._storage.getItem(this._storageKey)) === null ||
                      _a === void 0
                        ? void 0
                        : _a.split('|')[0];
                    if (lt !== oldToken) {
                      this._markRevokedLoginToken(oldToken);
                    }
                    if (lt) {
                      this._storage.setItem(this._storageKey, lt);
                    }
                    if (expiration) {
                      expiresIn =
                        typeof expiration === 'string' && expiration
                          ? Number(expiration)
                          : expiration;
                      if (expiresIn === 0) {
                        // Session cookie or dynamic session cookie.
                        // Either way, flag the expiration as 0.
                        expiration = 0;
                      } else {
                        expiresInMs = void 0;
                        if (!expiresIn || expiresIn === -2) {
                          expiresInMs = 1000 * 60 * 60 * 24 * 365;
                        } else {
                          expiresInMs = Number(expiresIn) * 1000;
                        }
                        // Convert expires in milliseconds to an a timestamp (also milliseconds).
                        expiresIn = Date.now() + expiresInMs;
                      }
                      this._storage.setItem(
                        this._storageKey + '_exp',
                        '' + expiresIn
                      );
                      if (expiration === 0) {
                        this._storage.setItem(
                          this._storageKey + '_session',
                          '1',
                          0
                        );
                      }
                    }
                    if (!(gltexp !== undefined)) return [3 /*break*/, 2];
                    return [4 /*yield*/, this.setTokenExpiration(gltexp)];
                  case 1:
                    _b.sent();
                    _b.label = 2;
                  case 2:
                    if (!lt) return [3 /*break*/, 4];
                    return [4 /*yield*/, this._markSiteVisited()];
                  case 3:
                    _b.sent();
                    _b.label = 4;
                  case 4:
                    return [2 /*return*/];
                }
              });
            });
          };
          Sso.prototype.setGroupContext = function (groupContext) {
            return tslib_1.__awaiter(this, void 0, void 0, function () {
              return tslib_1.__generator(this, function (_a) {
                this._storage.setItem(
                  this._storageKey + '_context',
                  JSON.stringify(groupContext)
                );
                return [2 /*return*/];
              });
            });
          };
          Sso.prototype.setTokenExpiration = function (gltexp) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var _a, _b, _c;
              return tslib_1.__generator(this, function (_d) {
                switch (_d.label) {
                  case 0:
                    if (!!this._utils.isValidGltExp(gltexp))
                      return [3 /*break*/, 1];
                    this._storage.removeItem(this._storageKey + '_gltexp');
                    gltexp = null;
                    return [3 /*break*/, 3];
                  case 1:
                    _b = (_a = this._utils).getMaxGltExp;
                    _c = [gltexp];
                    return [4 /*yield*/, this.getTokenExpiration()];
                  case 2:
                    gltexp = _b.apply(_a, _c.concat([_d.sent().gltexp]));
                    this._storage.setItem(this._storageKey + '_gltexp', gltexp);
                    this._storage.removeItem(this._storageKey + '_exp');
                    _d.label = 3;
                  case 3:
                    return [
                      2 /*return*/,
                      {
                        errorCode: GSErrors_1.GSErrors.OK,
                        gltexp: gltexp,
                      },
                    ];
                }
              });
            });
          };
          Sso.prototype.getTokenExpiration = function () {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var lt;
              return tslib_1.__generator(this, function (_a) {
                lt = this._storage.getItem(this._storageKey);
                if (!lt) {
                  return [
                    2 /*return*/,
                    {
                      errorCode: GSErrors_1.GSErrors.UNAUTHORIZED_USER,
                    },
                  ];
                }
                return [
                  2 /*return*/,
                  {
                    errorCode: GSErrors_1.GSErrors.OK,
                    gltexp: this._storage.getItem(this._storageKey + '_gltexp'),
                  },
                ];
              });
            });
          };
          Sso.prototype.checkTokenRenew = function (loginToken) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var groupToken, invalidTokens, isInvalid;
              return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                  case 0:
                    return [4 /*yield*/, this.getToken()];
                  case 1:
                    groupToken = _a.sent();
                    invalidTokens =
                      this._storage.getItem(
                        this._storageKey + '_revoked_tokens'
                      ) || '';
                    isInvalid = invalidTokens.indexOf(loginToken) >= 0;
                    if (!!isInvalid) return [3 /*break*/, 3];
                    return [4 /*yield*/, this.setToken(loginToken)];
                  case 2:
                    _a.sent();
                    return [
                      2 /*return*/,
                      { errorCode: GSErrors_1.GSErrors.OK },
                    ];
                  case 3:
                    if (
                      groupToken.errorCode === GSErrors_1.GSErrors.OK &&
                      invalidTokens.indexOf(groupToken.login_token) < 0
                    ) {
                      // just changing the error code - but returning the same session info of the group
                      groupToken.errorCode =
                        GSErrors_1.GSErrors.TOKEN_HAS_RENEWED;
                      return [2 /*return*/, groupToken];
                    } else {
                      return [
                        2 /*return*/,
                        { errorCode: GSErrors_1.GSErrors.INVALID_TOKEN },
                      ];
                    }
                    _a.label = 4;
                  case 4:
                    return [2 /*return*/];
                }
              });
            });
          };
          Sso.prototype.syncCanaryIndication = function (
            isCanary,
            versionSignature
          ) {
            return tslib_1.__awaiter(this, void 0, gigya.Promise, function () {
              var SSOIsCanary,
                SSOVersionSignature,
                response,
                siteCanaryVersion,
                SSOCanaryVersion;
              return tslib_1.__generator(this, function (_a) {
                if (!this._canaryKey || !this._canaryVerKey) {
                  return [
                    2 /*return*/,
                    {
                      errorCode: GSErrors_1.GSErrors.INVALID_ENVIRONMENT_CONFIG,
                    },
                  ];
                }
                SSOIsCanary = this._storage.getItem(this._canaryKey);
                SSOVersionSignature = this._storage.getItem(this._canaryVerKey);
                response = {
                  errorCode: GSErrors_1.GSErrors.OK,
                  isCanary: isCanary,
                  canaryVersion: versionSignature,
                };
                if (
                  !this._utils
                    .validations()
                    .allDefinedOrAllUndefined(SSOIsCanary, SSOVersionSignature)
                ) {
                  // not legal
                  response.errorCode =
                    GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE;
                  return [2 /*return*/, response];
                }
                if (
                  !this._utils
                    .validations()
                    .allDefinedOrAllUndefined(isCanary, versionSignature)
                ) {
                  // not legal
                  return [
                    2 /*return*/,
                    {
                      errorCode: GSErrors_1.GSErrors.INVALID_PARAMETER_VALUE,
                      isCanary: SSOIsCanary,
                      canaryVersion: SSOVersionSignature,
                    },
                  ];
                }
                siteCanaryVersion =
                  this._parseCanaryVersionSignature(versionSignature);
                SSOCanaryVersion =
                  this._parseCanaryVersionSignature(SSOVersionSignature);
                if (siteCanaryVersion.timestamp > SSOCanaryVersion.timestamp) {
                  this._storage.setItem(this._canaryKey, isCanary);
                  this._storage.setItem(this._canaryVerKey, versionSignature);
                } else {
                  response.isCanary = SSOIsCanary;
                  response.canaryVersion = SSOVersionSignature;
                }
                return [2 /*return*/, response];
              });
            });
          };
          Sso.prototype._markSiteVisited = function () {
            var visitedStorageKey = this._storageKey + '_visited';
            var visited = this._storage.getItem(visitedStorageKey) || '';
            if (visited.indexOf(this._siteApiKey) === -1) {
              visited += ',' + this._siteApiKey;
            }
            this._storage.setItem(visitedStorageKey, visited);
          };
          Sso.prototype._markRevokedLoginToken = function (loginToken) {
            if (!loginToken) return;
            var invalidTokensStorageKey = this._storageKey + '_revoked_tokens';
            var invalidTokens =
              this._storage.getItem(invalidTokensStorageKey) || '';
            var arrInvalidTokens = invalidTokens.split(',');
            if (arrInvalidTokens.length > 3) {
              //delete one old revoked token
              arrInvalidTokens.splice(1, 1); // first element is always empty
            }
            invalidTokens = arrInvalidTokens.join(',');
            if (invalidTokens.indexOf(loginToken) < 0) {
              invalidTokens += ',' + loginToken;
            }
            this._storage.setItem(invalidTokensStorageKey, invalidTokens);
          };
          Sso.prototype._getLogoutURLs = function () {
            var visited = this._storage.getItem(this._storageKey + '_visited');
            if (!visited) {
              return '';
            }
            var arLogoutURLs = [];
            for (var siteKey in this._ssoConfig.logoutURLs) {
              if (visited.indexOf(',' + siteKey) !== -1) {
                arLogoutURLs.push(this._ssoConfig.logoutURLs[siteKey]);
              }
            }
            return arLogoutURLs.join(',');
          };
          Sso.prototype._createKey = function (name) {
            return (
              name +
              '_' +
              this._apiKey +
              (this._ssoSegment ? '_' + this._ssoSegment : '')
            );
          };
          Sso.prototype._parseCanaryVersionSignature = function (
            canaryVersionSig
          ) {
            var defaultData = { build: 0, probability: 0, timestamp: -1 };
            if (!canaryVersionSig) return defaultData;
            var parts = canaryVersionSig.split('-');
            if (parts.length < 3) {
              return defaultData;
            }
            return {
              build: Number(parts[0]),
              probability: Number(parts[1]),
              timestamp: Number(parts[2]),
            };
          };
          return Sso;
        })();
        exports.Sso = Sso;

        /***/
      },

    /***/ './src/fidm/Gigya.JS.SSO/app/ssoUtils.ts':
      /*!***********************************************!*\
  !*** ./src/fidm/Gigya.JS.SSO/app/ssoUtils.ts ***!
  \***********************************************/
      /*! no static exports found */
      /***/ function (module, exports, __webpack_require__) {
        Object.defineProperty(exports, '__esModule', { value: true });
        var Uri_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/Uri */ './src/core/Gigya.Js/app/Utils/Uri.ts'
        );
        var validationUtils = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/validation */ './src/core/Gigya.Js/app/Utils/validation.ts'
        );
        var globalProvider_1 = __webpack_require__(
          /*! ./globalProvider */ './src/fidm/Gigya.JS.SSO/app/globalProvider.ts'
        );
        var localStorage_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/localStorage */ './src/core/Gigya.Js/app/Utils/localStorage.ts'
        );
        var keyValue_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/keyValue */ './src/core/Gigya.Js/app/Utils/keyValue.ts'
        );
        var gltexp_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/gltexp */ './src/core/Gigya.Js/app/Utils/gltexp.ts'
        );
        var URL_1 = __webpack_require__(
          /*! src/core/Gigya.Js/app/Utils/URL */ './src/core/Gigya.Js/app/Utils/URL.ts'
        );
        var defaultValidDomains = [
          'gigya-api.com',
          'gigya-api.cn',
          'gigya.com',
          'my.gigya-ext.com',
          'localhost',
        ];
        var SsoUtils = /** @class */ (function () {
          function SsoUtils(_global, _defaultValidDomains) {
            if (_global === void 0) {
              _global = globalProvider_1.default;
            }
            if (_defaultValidDomains === void 0) {
              _defaultValidDomains = defaultValidDomains;
            }
            this._global = _global;
            this._defaultValidDomains = _defaultValidDomains;
          }
          SsoUtils.prototype.getPageUrl = function () {
            return this._global.documentLocation().toString();
          };
          SsoUtils.prototype.isValidDomain = function (
            validDomains,
            candidate
          ) {
            var domain = Uri_1.Uri.parse(candidate).domain;
            var arValidDomains = validDomains.concat(this._defaultValidDomains);
            for (var i = 0; i < arValidDomains.length; i++) {
              var validDomain = arValidDomains[i]
                .replace('*', '')
                .split(':')[0];
              var indexOfValidDomain = domain.indexOf(validDomain);
              if (
                indexOfValidDomain >= 0 &&
                indexOfValidDomain === domain.length - validDomain.length &&
                (indexOfValidDomain === 0 ||
                  domain.charAt(indexOfValidDomain - 1) === '.' ||
                  domain.charAt(indexOfValidDomain - 1) === '/')
              ) {
                return true;
              }
            }
            return false;
          };
          SsoUtils.prototype.sendMessage = function (
            res,
            callbackID,
            requestDomain
          ) {
            var strMessage = '';
            for (var p in res) {
              if (res[p] != null) {
                strMessage += escape(
                  p + '=' + encodeURIComponent(res[p]) + '&'
                );
              }
            }
            this._global.postMessageToParent(
              callbackID + '=' + strMessage,
              requestDomain
            );
          };
          SsoUtils.prototype.isValidGltExp = function (gltExp) {
            return gltexp_1.isValid(gltExp);
          };
          SsoUtils.prototype.getMaxGltExp = function (gltExp1, gltExp2) {
            return gltexp_1.getMax(gltExp1, gltExp2);
          };
          SsoUtils.prototype.decodeUrl = function (value) {
            return URL_1.URLDecodeRecursive(value);
          };
          SsoUtils.prototype.deserialize = function (value) {
            return keyValue_1.deserialize(value);
          };
          SsoUtils.prototype.getCookiesStorage = function () {
            return localStorage_1.initializeAdapter(
              localStorage_1.CookieStorageAdapter
            );
          };
          SsoUtils.prototype.validations = function () {
            return validationUtils;
          };
          SsoUtils.prototype.UriFactory = function (url, isAbsolute) {
            if (isAbsolute === void 0) {
              isAbsolute = true;
            }
            return new Uri_1.Uri(url, isAbsolute);
          };
          SsoUtils.prototype.getFragment = function () {
            var pageURL = this.getPageUrl();
            if (pageURL.indexOf('#') !== -1) {
              return pageURL.split('#')[1];
            }
            return null;
          };
          return SsoUtils;
        })();
        exports.SsoUtils = SsoUtils;

        /***/
      },

    /******/
  }
);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2gubWVyZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4uL25vZGVfbW9kdWxlcy9sb2Rhc2guc2V0L2luZGV4LmpzIiwid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL3dlYnBhY2svYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Mb2dpbk1vZGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuQ29uc3RzLnRzIiwid2VicGFjazovLy8uL3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FjY291bnRzL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9BcGlTZXJ2aWNlL2FwcC9BcGlTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0FwaVNlcnZpY2UvYXBwL0dtaWRQcm92aWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9BcGlTZXJ2aWNlL2FwcC9Hcm91cEFwaURvbWFpblNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvQXBpU2VydmljZS9hcHAvUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9BcGlTZXJ2aWNlL2FwcC9SZXF1ZXN0UHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvQXBpU2VydmljZS9hcHAvWGhyUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9BcGlTZXJ2aWNlL2FwcC9pbnRlcmZhY2VzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvQXBpUmVxdWVzdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy5BZGFwdGVycy5XZWIvYXBwL0Jhc2VSZXF1ZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvRXh0ZXJuYWxNZXRob2RzL2FjY291bnRSZXNpZGVuY3kudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9FeHRlcm5hbE1ldGhvZHMvY2VudHJhbGl6ZWRTU08udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9FeHRlcm5hbE1ldGhvZHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9FeHRlcm5hbE1ldGhvZHMvc2VhbWxlc3NTU08udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9FeHRlcm5hbE1ldGhvZHMvc2Vzc2lvbkhlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9PYXV0aFJlcXVlc3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9Tc29TZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvVG9rZW5TdG9yZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy5BZGFwdGVycy5XZWIvYXBwL1dlYkFkYXB0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvVXRpbHMvZ2VuZXJhbC9saW5rQWNjb3VudHNIZWxwZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMuUGx1Z2luL2FwcC9VdGlscy9nZW5lcmFsL3Bob25lTnVtYmVyVXRpbC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvR1NFcnJvcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL0ludGVybmFsRmxvd3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mby50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvU2VydmljZXMvRmxhZ1NlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1NlcnZpY2VzL1Nlc3Npb25TZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9TaXRlRGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvRE9NLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9IVFRQLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9KU09OLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9VUkwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL1VyaS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvVXJsUGFyYW1zSGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9jb29raWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2RvbWFpbnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2Z1bmN0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvZ2xvYmFsLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9nbHRleHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2tleVZhbHVlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9sb2NhbFN0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL29iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvcHJvbWlzZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvcXVldWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3Nlc3Npb25DYWNoZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvc3RyaW5nVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3RvZ2dsZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3ZpZXdwb3J0LnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9jZG4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvR2lneWEuSnMvYXBwL2NvbnN0cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9HaWd5YS5Kcy9pbnRlcmZhY2VzL0lBcGlBZGFwdGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL1NlcnZpY2VQcm94eS9Qcm94eUxpc3RlbmVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL1NlcnZpY2VQcm94eS9TZXJ2aWNlUHJveHkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvU2VydmljZVByb3h5L2ludGVyZmFjZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvU2VydmljZVByb3h5L3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9maWRtL0dpZ3lhLkpTLlNTTy9hcHAvZ2xvYmFsUHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpZG0vR2lneWEuSlMuU1NPL2FwcC9zc28udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpZG0vR2lneWEuSlMuU1NPL2FwcC9zc29VdGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1FBQUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7OztRQUdBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwwQ0FBMEMsZ0NBQWdDO1FBQzFFO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0Esd0RBQXdELGtCQUFrQjtRQUMxRTtRQUNBLGlEQUFpRCxjQUFjO1FBQy9EOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSx5Q0FBeUMsaUNBQWlDO1FBQzFFLGdIQUFnSCxtQkFBbUIsRUFBRTtRQUNySTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDJCQUEyQiwwQkFBMEIsRUFBRTtRQUN2RCxpQ0FBaUMsZUFBZTtRQUNoRDtRQUNBO1FBQ0E7O1FBRUE7UUFDQSxzREFBc0QsK0RBQStEOztRQUVySDtRQUNBOzs7UUFHQTtRQUNBOzs7Ozs7Ozs7Ozs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQzs7QUFFcEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixLQUEwQjs7QUFFNUM7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQixXQUFXLEVBQUU7QUFDYixXQUFXLE1BQU07QUFDakIsYUFBYSxFQUFFO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFNBQVM7QUFDcEIsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLE9BQU87QUFDbEIsYUFBYSxFQUFFO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEIsV0FBVyxTQUFTO0FBQ3BCLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxRQUFRO0FBQ25CO0FBQ0EsR0FBRztBQUNILENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsTUFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsRUFBRTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsRUFBRTtBQUNiLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsTUFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLEVBQUU7QUFDZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsRUFBRTtBQUNiLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxFQUFFO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxFQUFFO0FBQ2IsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxNQUFNO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYSxFQUFFO0FBQ2Y7QUFD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OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrQkFBa0IsRUFBRTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGtCQUFrQixFQUFFO0FBQ2xFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsRUFBRTtBQUNiLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsRUFBRTtBQUNiLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEVBQUU7QUFDYixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxFQUFFO0FBQ2IsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFHLFVBQVUsQ0FBQztJQUNoQixFQUFFLEdBQUcsVUFBVSxDQUFDO0lBQ2hCLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFTixPQUFPLENBQUMsR0FBRyxLQUFLLEVBQUU7UUFDZCxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBQ3BKLEVBQUUsQ0FBQyxDQUFDO1FBRUosRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDO1FBQy9FLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUM5QixFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUM7UUFFL0UsRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUNULEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUM5QixHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUM7UUFDOUUsRUFBRSxHQUFHLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztLQUM3RTtJQUVELEVBQUUsR0FBRyxDQUFDLENBQUM7SUFFUCxRQUFRLFNBQVMsRUFBRTtRQUNmLEtBQUssQ0FBQztZQUNGLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMvQyxLQUFLLENBQUM7WUFDRixFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUMsS0FBSyxDQUFDO1lBQ0YsRUFBRSxJQUFJLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO1lBRS9CLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQztZQUMvRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FB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IkFwaUFkYXB0ZXJzL2dpZ3lhLmFkYXB0ZXJzLndlYi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2luZGV4LnRzXCIpO1xuIiwiLyoqXG4gKiBMb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBPcGVuSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL29wZW5qc2Yub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgc2l6ZSB0byBlbmFibGUgbGFyZ2UgYXJyYXkgb3B0aW1pemF0aW9ucy4gKi9cbnZhciBMQVJHRV9BUlJBWV9TSVpFID0gMjAwO1xuXG4vKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBob3QgZnVuY3Rpb25zIGJ5IG51bWJlciBvZiBjYWxscyB3aXRoaW4gYSBzcGFuIG9mIG1pbGxpc2Vjb25kcy4gKi9cbnZhciBIT1RfQ09VTlQgPSA4MDAsXG4gICAgSE9UX1NQQU4gPSAxNjtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGFzeW5jVGFnID0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBudWxsVGFnID0gJ1tvYmplY3QgTnVsbF0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHByb3h5VGFnID0gJ1tvYmplY3QgUHJveHldJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICB1bmRlZmluZWRUYWcgPSAnW29iamVjdCBVbmRlZmluZWRdJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJyxcbiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxuLyoqXG4gKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgXG4gKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXBhdHRlcm5zKS5cbiAqL1xudmFyIHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbnZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxcZCopJC87XG5cbi8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cbnZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xudHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG50eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG50eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG50eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9XG50eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9XG50eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9XG50eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID0gdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9XG50eXBlZEFycmF5VGFnc1tzZXRUYWddID0gdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9XG50eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AuICovXG52YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC4gKi9cbnZhciBmcmVlTW9kdWxlID0gZnJlZUV4cG9ydHMgJiYgdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cbi8qKiBEZXRlY3QgdGhlIHBvcHVsYXIgQ29tbW9uSlMgZXh0ZW5zaW9uIGBtb2R1bGUuZXhwb3J0c2AuICovXG52YXIgbW9kdWxlRXhwb3J0cyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0cztcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBwcm9jZXNzYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZVByb2Nlc3MgPSBtb2R1bGVFeHBvcnRzICYmIGZyZWVHbG9iYWwucHJvY2VzcztcblxuLyoqIFVzZWQgdG8gYWNjZXNzIGZhc3RlciBOb2RlLmpzIGhlbHBlcnMuICovXG52YXIgbm9kZVV0aWwgPSAoZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgLy8gVXNlIGB1dGlsLnR5cGVzYCBmb3IgTm9kZS5qcyAxMCsuXG4gICAgdmFyIHR5cGVzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLnJlcXVpcmUgJiYgZnJlZU1vZHVsZS5yZXF1aXJlKCd1dGlsJykudHlwZXM7XG5cbiAgICBpZiAodHlwZXMpIHtcbiAgICAgIHJldHVybiB0eXBlcztcbiAgICB9XG5cbiAgICAvLyBMZWdhY3kgYHByb2Nlc3MuYmluZGluZygndXRpbCcpYCBmb3IgTm9kZS5qcyA8IDEwLlxuICAgIHJldHVybiBmcmVlUHJvY2VzcyAmJiBmcmVlUHJvY2Vzcy5iaW5kaW5nICYmIGZyZWVQcm9jZXNzLmJpbmRpbmcoJ3V0aWwnKTtcbiAgfSBjYXRjaCAoZSkge31cbn0oKSk7XG5cbi8qIE5vZGUuanMgaGVscGVyIHJlZmVyZW5jZXMuICovXG52YXIgbm9kZUlzVHlwZWRBcnJheSA9IG5vZGVVdGlsICYmIG5vZGVVdGlsLmlzVHlwZWRBcnJheTtcblxuLyoqXG4gKiBBIGZhc3RlciBhbHRlcm5hdGl2ZSB0byBgRnVuY3Rpb24jYXBwbHlgLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgYGZ1bmNgXG4gKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBhcmd1bWVudHMgb2YgYGFyZ3NgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBmdW5jYC5cbiAqL1xuZnVuY3Rpb24gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncykge1xuICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdKTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICB9XG4gIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuYXJ5YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0b3JpbmcgbWV0YWRhdGEuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhcCBhcmd1bWVudHMgZm9yLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgY2FwcGVkIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlVW5hcnkoZnVuYykge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZnVuYyh2YWx1ZSk7XG4gIH07XG59XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldFZhbHVlKG9iamVjdCwga2V5KSB7XG4gIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB1bmFyeSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggaXRzIGFyZ3VtZW50IHRyYW5zZm9ybWVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBmdW5jKHRyYW5zZm9ybShhcmcpKTtcbiAgfTtcbn1cblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsXG4gICAgZnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlLFxuICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xudmFyIGNvcmVKc0RhdGEgPSByb290WydfX2NvcmUtanNfc2hhcmVkX18nXTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG1ldGhvZHMgbWFzcXVlcmFkaW5nIGFzIG5hdGl2ZS4gKi9cbnZhciBtYXNrU3JjS2V5ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuICByZXR1cm4gdWlkID8gKCdTeW1ib2woc3JjKV8xLicgKyB1aWQpIDogJyc7XG59KCkpO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgbmF0aXZlT2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gaW5mZXIgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yLiAqL1xudmFyIG9iamVjdEN0b3JTdHJpbmcgPSBmdW5jVG9TdHJpbmcuY2FsbChPYmplY3QpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xudmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcbiAgZnVuY1RvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UocmVSZWdFeHBDaGFyLCAnXFxcXCQmJylcbiAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4pO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBCdWZmZXIgPSBtb2R1bGVFeHBvcnRzID8gcm9vdC5CdWZmZXIgOiB1bmRlZmluZWQsXG4gICAgU3ltYm9sID0gcm9vdC5TeW1ib2wsXG4gICAgVWludDhBcnJheSA9IHJvb3QuVWludDhBcnJheSxcbiAgICBhbGxvY1Vuc2FmZSA9IEJ1ZmZlciA/IEJ1ZmZlci5hbGxvY1Vuc2FmZSA6IHVuZGVmaW5lZCxcbiAgICBnZXRQcm90b3R5cGUgPSBvdmVyQXJnKE9iamVjdC5nZXRQcm90b3R5cGVPZiwgT2JqZWN0KSxcbiAgICBvYmplY3RDcmVhdGUgPSBPYmplY3QuY3JlYXRlLFxuICAgIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGUsXG4gICAgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2UsXG4gICAgc3ltVG9TdHJpbmdUYWcgPSBTeW1ib2wgPyBTeW1ib2wudG9TdHJpbmdUYWcgOiB1bmRlZmluZWQ7XG5cbnZhciBkZWZpbmVQcm9wZXJ0eSA9IChmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICB2YXIgZnVuYyA9IGdldE5hdGl2ZShPYmplY3QsICdkZWZpbmVQcm9wZXJ0eScpO1xuICAgIGZ1bmMoe30sICcnLCB7fSk7XG4gICAgcmV0dXJuIGZ1bmM7XG4gIH0gY2F0Y2ggKGUpIHt9XG59KCkpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlSXNCdWZmZXIgPSBCdWZmZXIgPyBCdWZmZXIuaXNCdWZmZXIgOiB1bmRlZmluZWQsXG4gICAgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTm93ID0gRGF0ZS5ub3c7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBNYXAgPSBnZXROYXRpdmUocm9vdCwgJ01hcCcpLFxuICAgIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jcmVhdGVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXNzaWduaW5nXG4gKiBwcm9wZXJ0aWVzIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHByb3RvIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAqL1xudmFyIGJhc2VDcmVhdGUgPSAoZnVuY3Rpb24oKSB7XG4gIGZ1bmN0aW9uIG9iamVjdCgpIHt9XG4gIHJldHVybiBmdW5jdGlvbihwcm90bykge1xuICAgIGlmICghaXNPYmplY3QocHJvdG8pKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGlmIChvYmplY3RDcmVhdGUpIHtcbiAgICAgIHJldHVybiBvYmplY3RDcmVhdGUocHJvdG8pO1xuICAgIH1cbiAgICBvYmplY3QucHJvdG90eXBlID0gcHJvdG87XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBvYmplY3Q7XG4gICAgb2JqZWN0LnByb3RvdHlwZSA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufSgpKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgSGFzaFxuICovXG5mdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuYXRpdmVDcmVhdGUgPyBuYXRpdmVDcmVhdGUobnVsbCkgOiB7fTtcbiAgdGhpcy5zaXplID0gMDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtPYmplY3R9IGhhc2ggVGhlIGhhc2ggdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hEZWxldGUoa2V5KSB7XG4gIHZhciByZXN1bHQgPSB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG4gIHRoaXMuc2l6ZSAtPSByZXN1bHQgPyAxIDogMDtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGhhc2hHZXQoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKG5hdGl2ZUNyZWF0ZSkge1xuICAgIHZhciByZXN1bHQgPSBkYXRhW2tleV07XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSA/IGRhdGFba2V5XSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBoYXNoIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoSGFzKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIHJldHVybiBuYXRpdmVDcmVhdGUgPyAoZGF0YVtrZXldICE9PSB1bmRlZmluZWQpIDogaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICB0aGlzLnNpemUgKz0gdGhpcy5oYXMoa2V5KSA/IDAgOiAxO1xuICBkYXRhW2tleV0gPSAobmF0aXZlQ3JlYXRlICYmIHZhbHVlID09PSB1bmRlZmluZWQpID8gSEFTSF9VTkRFRklORUQgOiB2YWx1ZTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cbkhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuSGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcbkhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5IYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuSGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPT0gbnVsbCA/IDAgOiBlbnRyaWVzLmxlbmd0aDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gW107XG4gIHRoaXMuc2l6ZSA9IDA7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcbiAgICBkYXRhLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIHNwbGljZS5jYWxsKGRhdGEsIGluZGV4LCAxKTtcbiAgfVxuICAtLXRoaXMuc2l6ZTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICByZXR1cm4gaW5kZXggPCAwID8gdW5kZWZpbmVkIDogZGF0YVtpbmRleF1bMV07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgICsrdGhpcy5zaXplO1xuICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuICB9IGVsc2Uge1xuICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGxpc3RDYWNoZUNsZWFyO1xuTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcbkxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gbGlzdENhY2hlSGFzO1xuTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcCBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBNYXBDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA9PSBudWxsID8gMCA6IGVudHJpZXMubGVuZ3RoO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuc2l6ZSA9IDA7XG4gIHRoaXMuX19kYXRhX18gPSB7XG4gICAgJ2hhc2gnOiBuZXcgSGFzaCxcbiAgICAnbWFwJzogbmV3IChNYXAgfHwgTGlzdENhY2hlKSxcbiAgICAnc3RyaW5nJzogbmV3IEhhc2hcbiAgfTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlRGVsZXRlKGtleSkge1xuICB2YXIgcmVzdWx0ID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpWydkZWxldGUnXShrZXkpO1xuICB0aGlzLnNpemUgLT0gcmVzdWx0ID8gMSA6IDA7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbWFwIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUdldChrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5nZXQoa2V5KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBtYXAgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbWFwIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLFxuICAgICAgc2l6ZSA9IGRhdGEuc2l6ZTtcblxuICBkYXRhLnNldChrZXksIHZhbHVlKTtcbiAgdGhpcy5zaXplICs9IGRhdGEuc2l6ZSA9PSBzaXplID8gMCA6IDE7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuTWFwQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gbWFwQ2FjaGVDbGVhcjtcbk1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBDYWNoZURlbGV0ZTtcbk1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcbk1hcENhY2hlLnByb3RvdHlwZS5oYXMgPSBtYXBDYWNoZUhhcztcbk1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBDYWNoZVNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlKGVudHJpZXMpO1xuICB0aGlzLnNpemUgPSBkYXRhLnNpemU7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgc3RhY2suXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqL1xuZnVuY3Rpb24gc3RhY2tDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGU7XG4gIHRoaXMuc2l6ZSA9IDA7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrRGVsZXRlKGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICByZXN1bHQgPSBkYXRhWydkZWxldGUnXShrZXkpO1xuXG4gIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBzdGFjayB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmdldChrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tIYXMoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHN0YWNrIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBzdGFja1NldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBMaXN0Q2FjaGUpIHtcbiAgICB2YXIgcGFpcnMgPSBkYXRhLl9fZGF0YV9fO1xuICAgIGlmICghTWFwIHx8IChwYWlycy5sZW5ndGggPCBMQVJHRV9BUlJBWV9TSVpFIC0gMSkpIHtcbiAgICAgIHBhaXJzLnB1c2goW2tleSwgdmFsdWVdKTtcbiAgICAgIHRoaXMuc2l6ZSA9ICsrZGF0YS5zaXplO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGRhdGEgPSB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlKHBhaXJzKTtcbiAgfVxuICBkYXRhLnNldChrZXksIHZhbHVlKTtcbiAgdGhpcy5zaXplID0gZGF0YS5zaXplO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYFN0YWNrYC5cblN0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7XG5TdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gc3RhY2tEZWxldGU7XG5TdGFjay5wcm90b3R5cGUuZ2V0ID0gc3RhY2tHZXQ7XG5TdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7XG5TdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiB0aGUgYXJyYXktbGlrZSBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5oZXJpdGVkIFNwZWNpZnkgcmV0dXJuaW5nIGluaGVyaXRlZCBwcm9wZXJ0eSBuYW1lcy5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGFycmF5TGlrZUtleXModmFsdWUsIGluaGVyaXRlZCkge1xuICB2YXIgaXNBcnIgPSBpc0FycmF5KHZhbHVlKSxcbiAgICAgIGlzQXJnID0gIWlzQXJyICYmIGlzQXJndW1lbnRzKHZhbHVlKSxcbiAgICAgIGlzQnVmZiA9ICFpc0FyciAmJiAhaXNBcmcgJiYgaXNCdWZmZXIodmFsdWUpLFxuICAgICAgaXNUeXBlID0gIWlzQXJyICYmICFpc0FyZyAmJiAhaXNCdWZmICYmIGlzVHlwZWRBcnJheSh2YWx1ZSksXG4gICAgICBza2lwSW5kZXhlcyA9IGlzQXJyIHx8IGlzQXJnIHx8IGlzQnVmZiB8fCBpc1R5cGUsXG4gICAgICByZXN1bHQgPSBza2lwSW5kZXhlcyA/IGJhc2VUaW1lcyh2YWx1ZS5sZW5ndGgsIFN0cmluZykgOiBbXSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYgKChpbmhlcml0ZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwga2V5KSkgJiZcbiAgICAgICAgIShza2lwSW5kZXhlcyAmJiAoXG4gICAgICAgICAgIC8vIFNhZmFyaSA5IGhhcyBlbnVtZXJhYmxlIGBhcmd1bWVudHMubGVuZ3RoYCBpbiBzdHJpY3QgbW9kZS5cbiAgICAgICAgICAga2V5ID09ICdsZW5ndGgnIHx8XG4gICAgICAgICAgIC8vIE5vZGUuanMgMC4xMCBoYXMgZW51bWVyYWJsZSBub24taW5kZXggcHJvcGVydGllcyBvbiBidWZmZXJzLlxuICAgICAgICAgICAoaXNCdWZmICYmIChrZXkgPT0gJ29mZnNldCcgfHwga2V5ID09ICdwYXJlbnQnKSkgfHxcbiAgICAgICAgICAgLy8gUGhhbnRvbUpTIDIgaGFzIGVudW1lcmFibGUgbm9uLWluZGV4IHByb3BlcnRpZXMgb24gdHlwZWQgYXJyYXlzLlxuICAgICAgICAgICAoaXNUeXBlICYmIChrZXkgPT0gJ2J1ZmZlcicgfHwga2V5ID09ICdieXRlTGVuZ3RoJyB8fCBrZXkgPT0gJ2J5dGVPZmZzZXQnKSkgfHxcbiAgICAgICAgICAgLy8gU2tpcCBpbmRleCBwcm9wZXJ0aWVzLlxuICAgICAgICAgICBpc0luZGV4KGtleSwgbGVuZ3RoKVxuICAgICAgICApKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGFzc2lnblZhbHVlYCBleGNlcHQgdGhhdCBpdCBkb2Vzbid0IGFzc2lnblxuICogYHVuZGVmaW5lZGAgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhc3NpZ24uXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbk1lcmdlVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIGlmICgodmFsdWUgIT09IHVuZGVmaW5lZCAmJiAhZXEob2JqZWN0W2tleV0sIHZhbHVlKSkgfHxcbiAgICAgICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpKSB7XG4gICAgYmFzZUFzc2lnblZhbHVlKG9iamVjdCwga2V5LCB2YWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NpZ25zIGB2YWx1ZWAgdG8gYGtleWAgb2YgYG9iamVjdGAgaWYgdGhlIGV4aXN0aW5nIHZhbHVlIGlzIG5vdCBlcXVpdmFsZW50XG4gKiB1c2luZyBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhc3NpZ24uXG4gKi9cbmZ1bmN0aW9uIGFzc2lnblZhbHVlKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XTtcbiAgaWYgKCEoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYgZXEob2JqVmFsdWUsIHZhbHVlKSkgfHxcbiAgICAgICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpKSB7XG4gICAgYmFzZUFzc2lnblZhbHVlKG9iamVjdCwga2V5LCB2YWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICogQHBhcmFtIHsqfSBrZXkgVGhlIGtleSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cbiAqL1xuZnVuY3Rpb24gYXNzb2NJbmRleE9mKGFycmF5LCBrZXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKGVxKGFycmF5W2xlbmd0aF1bMF0sIGtleSkpIHtcbiAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgYXNzaWduVmFsdWVgIGFuZCBgYXNzaWduTWVyZ2VWYWx1ZWAgd2l0aG91dFxuICogdmFsdWUgY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBhc3NpZ24uXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhc3NpZ24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VBc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSA9PSAnX19wcm90b19fJyAmJiBkZWZpbmVQcm9wZXJ0eSkge1xuICAgIGRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCB7XG4gICAgICAnY29uZmlndXJhYmxlJzogdHJ1ZSxcbiAgICAgICdlbnVtZXJhYmxlJzogdHJ1ZSxcbiAgICAgICd2YWx1ZSc6IHZhbHVlLFxuICAgICAgJ3dyaXRhYmxlJzogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgYmFzZUZvck93bmAgd2hpY2ggaXRlcmF0ZXMgb3ZlciBgb2JqZWN0YFxuICogcHJvcGVydGllcyByZXR1cm5lZCBieSBga2V5c0Z1bmNgIGFuZCBpbnZva2VzIGBpdGVyYXRlZWAgZm9yIGVhY2ggcHJvcGVydHkuXG4gKiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbnZhciBiYXNlRm9yID0gY3JlYXRlQmFzZUZvcigpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgIHdpdGhvdXQgZmFsbGJhY2tzIGZvciBidWdneSBlbnZpcm9ubWVudHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkVGFnIDogbnVsbFRhZztcbiAgfVxuICByZXR1cm4gKHN5bVRvU3RyaW5nVGFnICYmIHN5bVRvU3RyaW5nVGFnIGluIE9iamVjdCh2YWx1ZSkpXG4gICAgPyBnZXRSYXdUYWcodmFsdWUpXG4gICAgOiBvYmplY3RUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNBcmd1bWVudHNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCxcbiAqL1xuZnVuY3Rpb24gYmFzZUlzQXJndW1lbnRzKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IGFyZ3NUYWc7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYXRpdmVgIHdpdGhvdXQgYmFkIHNoaW0gY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcGF0dGVybiA9IGlzRnVuY3Rpb24odmFsdWUpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3RvcjtcbiAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzVHlwZWRBcnJheWAgd2l0aG91dCBOb2RlLmpzIG9wdGltaXphdGlvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB0eXBlZCBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmXG4gICAgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW2Jhc2VHZXRUYWcodmFsdWUpXTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzSW5gIHdoaWNoIGRvZXNuJ3QgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYmFzZUtleXNJbihvYmplY3QpIHtcbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgcmV0dXJuIG5hdGl2ZUtleXNJbihvYmplY3QpO1xuICB9XG4gIHZhciBpc1Byb3RvID0gaXNQcm90b3R5cGUob2JqZWN0KSxcbiAgICAgIHJlc3VsdCA9IFtdO1xuXG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoIShrZXkgPT0gJ2NvbnN0cnVjdG9yJyAmJiAoaXNQcm90byB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tZXJnZWAgd2l0aG91dCBzdXBwb3J0IGZvciBtdWx0aXBsZSBzb3VyY2VzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHBhcmFtIHtudW1iZXJ9IHNyY0luZGV4IFRoZSBpbmRleCBvZiBgc291cmNlYC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIG1lcmdlZCB2YWx1ZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSB2YWx1ZXMgYW5kIHRoZWlyIG1lcmdlZFxuICogIGNvdW50ZXJwYXJ0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZU1lcmdlKG9iamVjdCwgc291cmNlLCBzcmNJbmRleCwgY3VzdG9taXplciwgc3RhY2spIHtcbiAgaWYgKG9iamVjdCA9PT0gc291cmNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGJhc2VGb3Ioc291cmNlLCBmdW5jdGlvbihzcmNWYWx1ZSwga2V5KSB7XG4gICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICBpZiAoaXNPYmplY3Qoc3JjVmFsdWUpKSB7XG4gICAgICBiYXNlTWVyZ2VEZWVwKG9iamVjdCwgc291cmNlLCBrZXksIHNyY0luZGV4LCBiYXNlTWVyZ2UsIGN1c3RvbWl6ZXIsIHN0YWNrKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgbmV3VmFsdWUgPSBjdXN0b21pemVyXG4gICAgICAgID8gY3VzdG9taXplcihzYWZlR2V0KG9iamVjdCwga2V5KSwgc3JjVmFsdWUsIChrZXkgKyAnJyksIG9iamVjdCwgc291cmNlLCBzdGFjaylcbiAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gc3JjVmFsdWU7XG4gICAgICB9XG4gICAgICBhc3NpZ25NZXJnZVZhbHVlKG9iamVjdCwga2V5LCBuZXdWYWx1ZSk7XG4gICAgfVxuICB9LCBrZXlzSW4pO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZU1lcmdlYCBmb3IgYXJyYXlzIGFuZCBvYmplY3RzIHdoaWNoIHBlcmZvcm1zXG4gKiBkZWVwIG1lcmdlcyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICogcmVmZXJlbmNlcyB0byBiZSBtZXJnZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIG1lcmdlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNyY0luZGV4IFRoZSBpbmRleCBvZiBgc291cmNlYC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IG1lcmdlRnVuYyBUaGUgZnVuY3Rpb24gdG8gbWVyZ2UgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2UgdmFsdWVzIGFuZCB0aGVpciBtZXJnZWRcbiAqICBjb3VudGVycGFydHMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VNZXJnZURlZXAob2JqZWN0LCBzb3VyY2UsIGtleSwgc3JjSW5kZXgsIG1lcmdlRnVuYywgY3VzdG9taXplciwgc3RhY2spIHtcbiAgdmFyIG9ialZhbHVlID0gc2FmZUdldChvYmplY3QsIGtleSksXG4gICAgICBzcmNWYWx1ZSA9IHNhZmVHZXQoc291cmNlLCBrZXkpLFxuICAgICAgc3RhY2tlZCA9IHN0YWNrLmdldChzcmNWYWx1ZSk7XG5cbiAgaWYgKHN0YWNrZWQpIHtcbiAgICBhc3NpZ25NZXJnZVZhbHVlKG9iamVjdCwga2V5LCBzdGFja2VkKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG5ld1ZhbHVlID0gY3VzdG9taXplclxuICAgID8gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIChrZXkgKyAnJyksIG9iamVjdCwgc291cmNlLCBzdGFjaylcbiAgICA6IHVuZGVmaW5lZDtcblxuICB2YXIgaXNDb21tb24gPSBuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkO1xuXG4gIGlmIChpc0NvbW1vbikge1xuICAgIHZhciBpc0FyciA9IGlzQXJyYXkoc3JjVmFsdWUpLFxuICAgICAgICBpc0J1ZmYgPSAhaXNBcnIgJiYgaXNCdWZmZXIoc3JjVmFsdWUpLFxuICAgICAgICBpc1R5cGVkID0gIWlzQXJyICYmICFpc0J1ZmYgJiYgaXNUeXBlZEFycmF5KHNyY1ZhbHVlKTtcblxuICAgIG5ld1ZhbHVlID0gc3JjVmFsdWU7XG4gICAgaWYgKGlzQXJyIHx8IGlzQnVmZiB8fCBpc1R5cGVkKSB7XG4gICAgICBpZiAoaXNBcnJheShvYmpWYWx1ZSkpIHtcbiAgICAgICAgbmV3VmFsdWUgPSBvYmpWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGlzQXJyYXlMaWtlT2JqZWN0KG9ialZhbHVlKSkge1xuICAgICAgICBuZXdWYWx1ZSA9IGNvcHlBcnJheShvYmpWYWx1ZSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChpc0J1ZmYpIHtcbiAgICAgICAgaXNDb21tb24gPSBmYWxzZTtcbiAgICAgICAgbmV3VmFsdWUgPSBjbG9uZUJ1ZmZlcihzcmNWYWx1ZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChpc1R5cGVkKSB7XG4gICAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgICAgIG5ld1ZhbHVlID0gY2xvbmVUeXBlZEFycmF5KHNyY1ZhbHVlLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBuZXdWYWx1ZSA9IFtdO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHNyY1ZhbHVlKSB8fCBpc0FyZ3VtZW50cyhzcmNWYWx1ZSkpIHtcbiAgICAgIG5ld1ZhbHVlID0gb2JqVmFsdWU7XG4gICAgICBpZiAoaXNBcmd1bWVudHMob2JqVmFsdWUpKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gdG9QbGFpbk9iamVjdChvYmpWYWx1ZSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICghaXNPYmplY3Qob2JqVmFsdWUpIHx8IGlzRnVuY3Rpb24ob2JqVmFsdWUpKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gaW5pdENsb25lT2JqZWN0KHNyY1ZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpc0NvbW1vbiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBpZiAoaXNDb21tb24pIHtcbiAgICAvLyBSZWN1cnNpdmVseSBtZXJnZSBvYmplY3RzIGFuZCBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBzdGFjay5zZXQoc3JjVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICBtZXJnZUZ1bmMobmV3VmFsdWUsIHNyY1ZhbHVlLCBzcmNJbmRleCwgY3VzdG9taXplciwgc3RhY2spO1xuICAgIHN0YWNrWydkZWxldGUnXShzcmNWYWx1ZSk7XG4gIH1cbiAgYXNzaWduTWVyZ2VWYWx1ZShvYmplY3QsIGtleSwgbmV3VmFsdWUpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnJlc3RgIHdoaWNoIGRvZXNuJ3QgdmFsaWRhdGUgb3IgY29lcmNlIGFyZ3VtZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUmVzdChmdW5jLCBzdGFydCkge1xuICByZXR1cm4gc2V0VG9TdHJpbmcob3ZlclJlc3QoZnVuYywgc3RhcnQsIGlkZW50aXR5KSwgZnVuYyArICcnKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgc2V0VG9TdHJpbmdgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaG90IGxvb3Agc2hvcnRpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHN0cmluZyBUaGUgYHRvU3RyaW5nYCByZXN1bHQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYGZ1bmNgLlxuICovXG52YXIgYmFzZVNldFRvU3RyaW5nID0gIWRlZmluZVByb3BlcnR5ID8gaWRlbnRpdHkgOiBmdW5jdGlvbihmdW5jLCBzdHJpbmcpIHtcbiAgcmV0dXJuIGRlZmluZVByb3BlcnR5KGZ1bmMsICd0b1N0cmluZycsIHtcbiAgICAnY29uZmlndXJhYmxlJzogdHJ1ZSxcbiAgICAnZW51bWVyYWJsZSc6IGZhbHNlLFxuICAgICd2YWx1ZSc6IGNvbnN0YW50KHN0cmluZyksXG4gICAgJ3dyaXRhYmxlJzogdHJ1ZVxuICB9KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mICBgYnVmZmVyYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZmZlciBUaGUgYnVmZmVyIHRvIGNsb25lLlxuICogQHBhcmFtIHtib29sZWFufSBbaXNEZWVwXSBTcGVjaWZ5IGEgZGVlcCBjbG9uZS5cbiAqIEByZXR1cm5zIHtCdWZmZXJ9IFJldHVybnMgdGhlIGNsb25lZCBidWZmZXIuXG4gKi9cbmZ1bmN0aW9uIGNsb25lQnVmZmVyKGJ1ZmZlciwgaXNEZWVwKSB7XG4gIGlmIChpc0RlZXApIHtcbiAgICByZXR1cm4gYnVmZmVyLnNsaWNlKCk7XG4gIH1cbiAgdmFyIGxlbmd0aCA9IGJ1ZmZlci5sZW5ndGgsXG4gICAgICByZXN1bHQgPSBhbGxvY1Vuc2FmZSA/IGFsbG9jVW5zYWZlKGxlbmd0aCkgOiBuZXcgYnVmZmVyLmNvbnN0cnVjdG9yKGxlbmd0aCk7XG5cbiAgYnVmZmVyLmNvcHkocmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2xvbmUgb2YgYGFycmF5QnVmZmVyYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheUJ1ZmZlcn0gYXJyYXlCdWZmZXIgVGhlIGFycmF5IGJ1ZmZlciB0byBjbG9uZS5cbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gUmV0dXJucyB0aGUgY2xvbmVkIGFycmF5IGJ1ZmZlci5cbiAqL1xuZnVuY3Rpb24gY2xvbmVBcnJheUJ1ZmZlcihhcnJheUJ1ZmZlcikge1xuICB2YXIgcmVzdWx0ID0gbmV3IGFycmF5QnVmZmVyLmNvbnN0cnVjdG9yKGFycmF5QnVmZmVyLmJ5dGVMZW5ndGgpO1xuICBuZXcgVWludDhBcnJheShyZXN1bHQpLnNldChuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcikpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiBgdHlwZWRBcnJheWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlZEFycmF5IFRoZSB0eXBlZCBhcnJheSB0byBjbG9uZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzRGVlcF0gU3BlY2lmeSBhIGRlZXAgY2xvbmUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjbG9uZWQgdHlwZWQgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGNsb25lVHlwZWRBcnJheSh0eXBlZEFycmF5LCBpc0RlZXApIHtcbiAgdmFyIGJ1ZmZlciA9IGlzRGVlcCA/IGNsb25lQXJyYXlCdWZmZXIodHlwZWRBcnJheS5idWZmZXIpIDogdHlwZWRBcnJheS5idWZmZXI7XG4gIHJldHVybiBuZXcgdHlwZWRBcnJheS5jb25zdHJ1Y3RvcihidWZmZXIsIHR5cGVkQXJyYXkuYnl0ZU9mZnNldCwgdHlwZWRBcnJheS5sZW5ndGgpO1xufVxuXG4vKipcbiAqIENvcGllcyB0aGUgdmFsdWVzIG9mIGBzb3VyY2VgIHRvIGBhcnJheWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgZnJvbS5cbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheT1bXV0gVGhlIGFycmF5IHRvIGNvcHkgdmFsdWVzIHRvLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gKi9cbmZ1bmN0aW9uIGNvcHlBcnJheShzb3VyY2UsIGFycmF5KSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gc291cmNlLmxlbmd0aDtcblxuICBhcnJheSB8fCAoYXJyYXkgPSBBcnJheShsZW5ndGgpKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBhcnJheVtpbmRleF0gPSBzb3VyY2VbaW5kZXhdO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgcHJvcGVydGllcyBvZiBgc291cmNlYCB0byBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxuICogQHBhcmFtIHtBcnJheX0gcHJvcHMgVGhlIHByb3BlcnR5IGlkZW50aWZpZXJzIHRvIGNvcHkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdD17fV0gVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgdG8uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb3BpZWQgdmFsdWVzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gY29weU9iamVjdChzb3VyY2UsIHByb3BzLCBvYmplY3QsIGN1c3RvbWl6ZXIpIHtcbiAgdmFyIGlzTmV3ID0gIW9iamVjdDtcbiAgb2JqZWN0IHx8IChvYmplY3QgPSB7fSk7XG5cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuXG4gICAgdmFyIG5ld1ZhbHVlID0gY3VzdG9taXplclxuICAgICAgPyBjdXN0b21pemVyKG9iamVjdFtrZXldLCBzb3VyY2Vba2V5XSwga2V5LCBvYmplY3QsIHNvdXJjZSlcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG5ld1ZhbHVlID0gc291cmNlW2tleV07XG4gICAgfVxuICAgIGlmIChpc05ldykge1xuICAgICAgYmFzZUFzc2lnblZhbHVlKG9iamVjdCwga2V5LCBuZXdWYWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2lnblZhbHVlKG9iamVjdCwga2V5LCBuZXdWYWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGxpa2UgYF8uYXNzaWduYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gYXNzaWduZXIgVGhlIGZ1bmN0aW9uIHRvIGFzc2lnbiB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhc3NpZ25lciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQXNzaWduZXIoYXNzaWduZXIpIHtcbiAgcmV0dXJuIGJhc2VSZXN0KGZ1bmN0aW9uKG9iamVjdCwgc291cmNlcykge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBzb3VyY2VzLmxlbmd0aCxcbiAgICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA+IDEgPyBzb3VyY2VzW2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkLFxuICAgICAgICBndWFyZCA9IGxlbmd0aCA+IDIgPyBzb3VyY2VzWzJdIDogdW5kZWZpbmVkO1xuXG4gICAgY3VzdG9taXplciA9IChhc3NpZ25lci5sZW5ndGggPiAzICYmIHR5cGVvZiBjdXN0b21pemVyID09ICdmdW5jdGlvbicpXG4gICAgICA/IChsZW5ndGgtLSwgY3VzdG9taXplcilcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHNvdXJjZXNbMF0sIHNvdXJjZXNbMV0sIGd1YXJkKSkge1xuICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiBjdXN0b21pemVyO1xuICAgICAgbGVuZ3RoID0gMTtcbiAgICB9XG4gICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgYXNzaWduZXIob2JqZWN0LCBzb3VyY2UsIGluZGV4LCBjdXN0b21pemVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGJhc2UgZnVuY3Rpb24gZm9yIG1ldGhvZHMgbGlrZSBgXy5mb3JJbmAgYW5kIGBfLmZvck93bmAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYmFzZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNGdW5jKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGl0ZXJhYmxlID0gT2JqZWN0KG9iamVjdCksXG4gICAgICAgIHByb3BzID0ga2V5c0Z1bmMob2JqZWN0KSxcbiAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICB2YXIga2V5ID0gcHJvcHNbZnJvbVJpZ2h0ID8gbGVuZ3RoIDogKytpbmRleF07XG4gICAgICBpZiAoaXRlcmF0ZWUoaXRlcmFibGVba2V5XSwga2V5LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hcCBkYXRhLlxuICovXG5mdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG4gIHZhciBkYXRhID0gbWFwLl9fZGF0YV9fO1xuICByZXR1cm4gaXNLZXlhYmxlKGtleSlcbiAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuICAgIDogZGF0YS5tYXA7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShvYmplY3QsIGtleSk7XG4gIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlR2V0VGFnYCB3aGljaCBpZ25vcmVzIGBTeW1ib2wudG9TdHJpbmdUYWdgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSByYXcgYHRvU3RyaW5nVGFnYC5cbiAqL1xuZnVuY3Rpb24gZ2V0UmF3VGFnKHZhbHVlKSB7XG4gIHZhciBpc093biA9IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHN5bVRvU3RyaW5nVGFnKSxcbiAgICAgIHRhZyA9IHZhbHVlW3N5bVRvU3RyaW5nVGFnXTtcblxuICB0cnkge1xuICAgIHZhbHVlW3N5bVRvU3RyaW5nVGFnXSA9IHVuZGVmaW5lZDtcbiAgICB2YXIgdW5tYXNrZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlKSB7fVxuXG4gIHZhciByZXN1bHQgPSBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgaWYgKHVubWFza2VkKSB7XG4gICAgaWYgKGlzT3duKSB7XG4gICAgICB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ10gPSB0YWc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB2YWx1ZVtzeW1Ub1N0cmluZ1RhZ107XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYW4gb2JqZWN0IGNsb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2xvbmUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBpbml0aWFsaXplZCBjbG9uZS5cbiAqL1xuZnVuY3Rpb24gaW5pdENsb25lT2JqZWN0KG9iamVjdCkge1xuICByZXR1cm4gKHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNQcm90b3R5cGUob2JqZWN0KSlcbiAgICA/IGJhc2VDcmVhdGUoZ2V0UHJvdG90eXBlKG9iamVjdCkpXG4gICAgOiB7fTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcblxuICByZXR1cm4gISFsZW5ndGggJiZcbiAgICAodHlwZSA9PSAnbnVtYmVyJyB8fFxuICAgICAgKHR5cGUgIT0gJ3N5bWJvbCcgJiYgcmVJc1VpbnQudGVzdCh2YWx1ZSkpKSAmJlxuICAgICAgICAodmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIHZhbHVlIGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfSBpbmRleCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIGluZGV4IG9yIGtleSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgb2JqZWN0IGFyZ3VtZW50LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDtcbiAgaWYgKHR5cGUgPT0gJ251bWJlcidcbiAgICAgICAgPyAoaXNBcnJheUxpa2Uob2JqZWN0KSAmJiBpc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSlcbiAgICAgICAgOiAodHlwZSA9PSAnc3RyaW5nJyAmJiBpbmRleCBpbiBvYmplY3QpXG4gICAgICApIHtcbiAgICByZXR1cm4gZXEob2JqZWN0W2luZGV4XSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3IgdXNlIGFzIHVuaXF1ZSBvYmplY3Qga2V5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcbiAgICA/ICh2YWx1ZSAhPT0gJ19fcHJvdG9fXycpXG4gICAgOiAodmFsdWUgPT09IG51bGwpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgZnVuY2AgaGFzIGl0cyBzb3VyY2UgbWFza2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTWFza2VkKGZ1bmMpIHtcbiAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG4gIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblxuICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZVxuICogW2BPYmplY3Qua2V5c2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5rZXlzKVxuICogZXhjZXB0IHRoYXQgaXQgaW5jbHVkZXMgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gbmF0aXZlS2V5c0luKG9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIGlmIChvYmplY3QgIT0gbnVsbCkge1xuICAgIGZvciAodmFyIGtleSBpbiBPYmplY3Qob2JqZWN0KSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIHVzaW5nIGBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiBuYXRpdmVPYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VSZXN0YCB3aGljaCB0cmFuc2Zvcm1zIHRoZSByZXN0IGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSByZXN0IGFycmF5IHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBvdmVyUmVzdChmdW5jLCBzdGFydCwgdHJhbnNmb3JtKSB7XG4gIHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQgPyAoZnVuYy5sZW5ndGggLSAxKSA6IHN0YXJ0LCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgIGFycmF5ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBhcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuICAgIH1cbiAgICBpbmRleCA9IC0xO1xuICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICB9XG4gICAgb3RoZXJBcmdzW3N0YXJ0XSA9IHRyYW5zZm9ybShhcnJheSk7XG4gICAgcmV0dXJuIGFwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7XG4gIH07XG59XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAsIHVubGVzcyBga2V5YCBpcyBcIl9fcHJvdG9fX1wiIG9yIFwiY29uc3RydWN0b3JcIi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIHNhZmVHZXQob2JqZWN0LCBrZXkpIHtcbiAgaWYgKGtleSA9PT0gJ2NvbnN0cnVjdG9yJyAmJiB0eXBlb2Ygb2JqZWN0W2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoa2V5ID09ICdfX3Byb3RvX18nKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmV0dXJuIG9iamVjdFtrZXldO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGB0b1N0cmluZ2AgbWV0aG9kIG9mIGBmdW5jYCB0byByZXR1cm4gYHN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHN0cmluZyBUaGUgYHRvU3RyaW5nYCByZXN1bHQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgYGZ1bmNgLlxuICovXG52YXIgc2V0VG9TdHJpbmcgPSBzaG9ydE91dChiYXNlU2V0VG9TdHJpbmcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0J2xsIHNob3J0IG91dCBhbmQgaW52b2tlIGBpZGVudGl0eWAgaW5zdGVhZFxuICogb2YgYGZ1bmNgIHdoZW4gaXQncyBjYWxsZWQgYEhPVF9DT1VOVGAgb3IgbW9yZSB0aW1lcyBpbiBgSE9UX1NQQU5gXG4gKiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHJlc3RyaWN0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc2hvcnRhYmxlIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBzaG9ydE91dChmdW5jKSB7XG4gIHZhciBjb3VudCA9IDAsXG4gICAgICBsYXN0Q2FsbGVkID0gMDtcblxuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YW1wID0gbmF0aXZlTm93KCksXG4gICAgICAgIHJlbWFpbmluZyA9IEhPVF9TUEFOIC0gKHN0YW1wIC0gbGFzdENhbGxlZCk7XG5cbiAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XG4gICAgaWYgKHJlbWFpbmluZyA+IDApIHtcbiAgICAgIGlmICgrK2NvdW50ID49IEhPVF9DT1VOVCkge1xuICAgICAgICByZXR1cm4gYXJndW1lbnRzWzBdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb3VudCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjb252ZXJ0LlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG4gKi9cbmZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcbiAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFBlcmZvcm1zIGFcbiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07XG4gKlxuICogXy5lcShvYmplY3QsIG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcShvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcSgnYScsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5lcShOYU4sIE5hTik7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGBhcmd1bWVudHNgIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJndW1lbnRzID0gYmFzZUlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpID8gYmFzZUlzQXJndW1lbnRzIDogZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG4gICAgIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKTtcbn07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3NcbiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3JcbiAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgXG4gKiBpcyBhbiBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgYnVmZmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4zLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgYnVmZmVyLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNCdWZmZXIobmV3IEJ1ZmZlcigyKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0J1ZmZlcihuZXcgVWludDhBcnJheSgyKSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNCdWZmZXIgPSBuYXRpdmVJc0J1ZmZlciB8fCBzdHViRmFsc2U7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Z1bmN0aW9uKF8pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAvLyBpbiBTYWZhcmkgOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheXMgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy5cbiAgdmFyIHRhZyA9IGJhc2VHZXRUYWcodmFsdWUpO1xuICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZyB8fCB0YWcgPT0gYXN5bmNUYWcgfHwgdGFnID09IHByb3h5VGFnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0xlbmd0aCgzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aCgnMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuOC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHBsYWluIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiB9XG4gKlxuICogXy5pc1BsYWluT2JqZWN0KG5ldyBGb28pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KHsgJ3gnOiAwLCAneSc6IDAgfSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3RMaWtlKHZhbHVlKSB8fCBiYXNlR2V0VGFnKHZhbHVlKSAhPSBvYmplY3RUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHByb3RvID0gZ2V0UHJvdG90eXBlKHZhbHVlKTtcbiAgaWYgKHByb3RvID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdmFyIEN0b3IgPSBoYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3RvLCAnY29uc3RydWN0b3InKSAmJiBwcm90by5jb25zdHJ1Y3RvcjtcbiAgcmV0dXJuIHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3RvciBpbnN0YW5jZW9mIEN0b3IgJiZcbiAgICBmdW5jVG9TdHJpbmcuY2FsbChDdG9yKSA9PSBvYmplY3RDdG9yU3RyaW5nO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDMuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHR5cGVkIGFycmF5LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNUeXBlZEFycmF5ID0gbm9kZUlzVHlwZWRBcnJheSA/IGJhc2VVbmFyeShub2RlSXNUeXBlZEFycmF5KSA6IGJhc2VJc1R5cGVkQXJyYXk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHBsYWluIG9iamVjdCBmbGF0dGVuaW5nIGluaGVyaXRlZCBlbnVtZXJhYmxlIHN0cmluZ1xuICoga2V5ZWQgcHJvcGVydGllcyBvZiBgdmFsdWVgIHRvIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBwbGFpbiBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAzLjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgcGxhaW4gb2JqZWN0LlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmFzc2lnbih7ICdhJzogMSB9LCBuZXcgRm9vKTtcbiAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIgfVxuICpcbiAqIF8uYXNzaWduKHsgJ2EnOiAxIH0sIF8udG9QbGFpbk9iamVjdChuZXcgRm9vKSk7XG4gKiAvLyA9PiB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfVxuICovXG5mdW5jdGlvbiB0b1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBjb3B5T2JqZWN0KHZhbHVlLCBrZXlzSW4odmFsdWUpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5c0luKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InLCAnYyddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKi9cbmZ1bmN0aW9uIGtleXNJbihvYmplY3QpIHtcbiAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iamVjdCkgPyBhcnJheUxpa2VLZXlzKG9iamVjdCwgdHJ1ZSkgOiBiYXNlS2V5c0luKG9iamVjdCk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5hc3NpZ25gIGV4Y2VwdCB0aGF0IGl0IHJlY3Vyc2l2ZWx5IG1lcmdlcyBvd24gYW5kXG4gKiBpbmhlcml0ZWQgZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0cyBpbnRvIHRoZVxuICogZGVzdGluYXRpb24gb2JqZWN0LiBTb3VyY2UgcHJvcGVydGllcyB0aGF0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAgYXJlXG4gKiBza2lwcGVkIGlmIGEgZGVzdGluYXRpb24gdmFsdWUgZXhpc3RzLiBBcnJheSBhbmQgcGxhaW4gb2JqZWN0IHByb3BlcnRpZXNcbiAqIGFyZSBtZXJnZWQgcmVjdXJzaXZlbHkuIE90aGVyIG9iamVjdHMgYW5kIHZhbHVlIHR5cGVzIGFyZSBvdmVycmlkZGVuIGJ5XG4gKiBhc3NpZ25tZW50LiBTb3VyY2Ugb2JqZWN0cyBhcmUgYXBwbGllZCBmcm9tIGxlZnQgdG8gcmlnaHQuIFN1YnNlcXVlbnRcbiAqIHNvdXJjZXMgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjUuMFxuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0ge1xuICogICAnYSc6IFt7ICdiJzogMiB9LCB7ICdkJzogNCB9XVxuICogfTtcbiAqXG4gKiB2YXIgb3RoZXIgPSB7XG4gKiAgICdhJzogW3sgJ2MnOiAzIH0sIHsgJ2UnOiA1IH1dXG4gKiB9O1xuICpcbiAqIF8ubWVyZ2Uob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiB7ICdhJzogW3sgJ2InOiAyLCAnYyc6IDMgfSwgeyAnZCc6IDQsICdlJzogNSB9XSB9XG4gKi9cbnZhciBtZXJnZSA9IGNyZWF0ZUFzc2lnbmVyKGZ1bmN0aW9uKG9iamVjdCwgc291cmNlLCBzcmNJbmRleCkge1xuICBiYXNlTWVyZ2Uob2JqZWN0LCBzb3VyY2UsIHNyY0luZGV4KTtcbn0pO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYHZhbHVlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgVXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcmV0dXJuIGZyb20gdGhlIG5ldyBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNvbnN0YW50IGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0cyA9IF8udGltZXMoMiwgXy5jb25zdGFudCh7ICdhJzogMSB9KSk7XG4gKlxuICogY29uc29sZS5sb2cob2JqZWN0cyk7XG4gKiAvLyA9PiBbeyAnYSc6IDEgfSwgeyAnYSc6IDEgfV1cbiAqXG4gKiBjb25zb2xlLmxvZyhvYmplY3RzWzBdID09PSBvYmplY3RzWzFdKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gY29uc3RhbnQodmFsdWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBpdCByZWNlaXZlcy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgVXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAqXG4gKiBjb25zb2xlLmxvZyhfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdCk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIGBmYWxzZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEzLjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRpbWVzKDIsIF8uc3R1YkZhbHNlKTtcbiAqIC8vID0+IFtmYWxzZSwgZmFsc2VdXG4gKi9cbmZ1bmN0aW9uIHN0dWJGYWxzZSgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1lcmdlO1xuIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIElORklOSVRZID0gMSAvIDAsXG4gICAgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nLFxuICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVJc0RlZXBQcm9wID0gL1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxcbiAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC8sXG4gICAgcmVMZWFkaW5nRG90ID0gL15cXC4vLFxuICAgIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oPzpcXC58XFxbXFxdKSg/OlxcLnxcXFtcXF18JCkpL2c7XG5cbi8qKlxuICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYFxuICogW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1wYXR0ZXJucykuXG4gKi9cbnZhciByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0IGluIElFIDwgOS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZSkge1xuICAvLyBNYW55IGhvc3Qgb2JqZWN0cyBhcmUgYE9iamVjdGAgb2JqZWN0cyB0aGF0IGNhbiBjb2VyY2UgdG8gc3RyaW5nc1xuICAvLyBkZXNwaXRlIGhhdmluZyBpbXByb3Blcmx5IGRlZmluZWQgYHRvU3RyaW5nYCBtZXRob2RzLlxuICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gIGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS50b1N0cmluZyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9ICEhKHZhbHVlICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsXG4gICAgZnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlLFxuICAgIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xudmFyIGNvcmVKc0RhdGEgPSByb290WydfX2NvcmUtanNfc2hhcmVkX18nXTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG1ldGhvZHMgbWFzcXVlcmFkaW5nIGFzIG5hdGl2ZS4gKi9cbnZhciBtYXNrU3JjS2V5ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuICByZXR1cm4gdWlkID8gKCdTeW1ib2woc3JjKV8xLicgKyB1aWQpIDogJyc7XG59KCkpO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gZnVuY1Byb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGZ1bmNUb1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KS5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFwkJicpXG4gIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2wsXG4gICAgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2U7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBNYXAgPSBnZXROYXRpdmUocm9vdCwgJ01hcCcpLFxuICAgIG5hdGl2ZUNyZWF0ZSA9IGdldE5hdGl2ZShPYmplY3QsICdjcmVhdGUnKTtcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIEhhc2hcbiAqL1xuZnVuY3Rpb24gaGFzaENsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmF0aXZlQ3JlYXRlID8gbmF0aXZlQ3JlYXRlKG51bGwpIDoge307XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIFRoZSBoYXNoIHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkge1xuICByZXR1cm4gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGhhc2ggdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gaGFzaEdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAobmF0aXZlQ3JlYXRlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0ID09PSBIQVNIX1VOREVGSU5FRCA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGhhc2ggdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgcmV0dXJuIG5hdGl2ZUNyZWF0ZSA/IGRhdGFba2V5XSAhPT0gdW5kZWZpbmVkIDogaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBkYXRhW2tleV0gPSAobmF0aXZlQ3JlYXRlICYmIHZhbHVlID09PSB1bmRlZmluZWQpID8gSEFTSF9VTkRFRklORUQgOiB2YWx1ZTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cbkhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuSGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcbkhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5IYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuSGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IFtdO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbGFzdEluZGV4ID0gZGF0YS5sZW5ndGggLSAxO1xuICBpZiAoaW5kZXggPT0gbGFzdEluZGV4KSB7XG4gICAgZGF0YS5wb3AoKTtcbiAgfSBlbHNlIHtcbiAgICBzcGxpY2UuY2FsbChkYXRhLCBpbmRleCwgMSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICByZXR1cm4gaW5kZXggPCAwID8gdW5kZWZpbmVkIDogZGF0YVtpbmRleF1bMV07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuICB9IGVsc2Uge1xuICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGxpc3RDYWNoZUNsZWFyO1xuTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcbkxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gbGlzdENhY2hlSGFzO1xuTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcCBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBNYXBDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIG1hcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0ge1xuICAgICdoYXNoJzogbmV3IEhhc2gsXG4gICAgJ21hcCc6IG5ldyAoTWFwIHx8IExpc3RDYWNoZSksXG4gICAgJ3N0cmluZyc6IG5ldyBIYXNoXG4gIH07XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZURlbGV0ZShrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIG1hcCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBtYXAgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLnNldChrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuXG5NYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IG1hcENhY2hlRGVsZXRlO1xuTWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcENhY2hlR2V0O1xuTWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcENhY2hlU2V0O1xuXG4vKipcbiAqIEFzc2lnbnMgYHZhbHVlYCB0byBga2V5YCBvZiBgb2JqZWN0YCBpZiB0aGUgZXhpc3RpbmcgdmFsdWUgaXMgbm90IGVxdWl2YWxlbnRcbiAqIHVzaW5nIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBmb3IgZXF1YWxpdHkgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGFzc2lnbi5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGFzc2lnbi5cbiAqL1xuZnVuY3Rpb24gYXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldO1xuICBpZiAoIShoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSAmJiBlcShvYmpWYWx1ZSwgdmFsdWUpKSB8fFxuICAgICAgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkpIHtcbiAgICBvYmplY3Rba2V5XSA9IHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7Kn0ga2V5IFRoZSBrZXkgdG8gc2VhcmNoIGZvci5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGFzc29jSW5kZXhPZihhcnJheSwga2V5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChlcShhcnJheVtsZW5ndGhdWzBdLCBrZXkpKSB7XG4gICAgICByZXR1cm4gbGVuZ3RoO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYXRpdmVgIHdpdGhvdXQgYmFkIHNoaW0gY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcGF0dGVybiA9IChpc0Z1bmN0aW9uKHZhbHVlKSB8fCBpc0hvc3RPYmplY3QodmFsdWUpKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7XG4gIHJldHVybiBwYXR0ZXJuLnRlc3QodG9Tb3VyY2UodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zZXRgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIHBhdGggY3JlYXRpb24uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBiYXNlU2V0KG9iamVjdCwgcGF0aCwgdmFsdWUsIGN1c3RvbWl6ZXIpIHtcbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGgsXG4gICAgICBsYXN0SW5kZXggPSBsZW5ndGggLSAxLFxuICAgICAgbmVzdGVkID0gb2JqZWN0O1xuXG4gIHdoaWxlIChuZXN0ZWQgIT0gbnVsbCAmJiArK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHRvS2V5KHBhdGhbaW5kZXhdKSxcbiAgICAgICAgbmV3VmFsdWUgPSB2YWx1ZTtcblxuICAgIGlmIChpbmRleCAhPSBsYXN0SW5kZXgpIHtcbiAgICAgIHZhciBvYmpWYWx1ZSA9IG5lc3RlZFtrZXldO1xuICAgICAgbmV3VmFsdWUgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihvYmpWYWx1ZSwga2V5LCBuZXN0ZWQpIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKG5ld1ZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3VmFsdWUgPSBpc09iamVjdChvYmpWYWx1ZSlcbiAgICAgICAgICA/IG9ialZhbHVlXG4gICAgICAgICAgOiAoaXNJbmRleChwYXRoW2luZGV4ICsgMV0pID8gW10gOiB7fSk7XG4gICAgICB9XG4gICAgfVxuICAgIGFzc2lnblZhbHVlKG5lc3RlZCwga2V5LCBuZXdWYWx1ZSk7XG4gICAgbmVzdGVkID0gbmVzdGVkW2tleV07XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcbiAqIHZhbHVlcyB0byBlbXB0eSBzdHJpbmdzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN5bWJvbFRvU3RyaW5nID8gc3ltYm9sVG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2FzdHMgYHZhbHVlYCB0byBhIHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjYXN0IHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGNhc3RQYXRoKHZhbHVlKSB7XG4gIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogc3RyaW5nVG9QYXRoKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcmVmZXJlbmNlIGtleS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS5cbiAqL1xuZnVuY3Rpb24gZ2V0TWFwRGF0YShtYXAsIGtleSkge1xuICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXztcbiAgcmV0dXJuIGlzS2V5YWJsZShrZXkpXG4gICAgPyBkYXRhW3R5cGVvZiBrZXkgPT0gJ3N0cmluZycgPyAnc3RyaW5nJyA6ICdoYXNoJ11cbiAgICA6IGRhdGEubWFwO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuICByZXR1cm4gYmFzZUlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmXG4gICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSBhbmQgbm90IGEgcHJvcGVydHkgcGF0aC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzS2V5KHZhbHVlLCBvYmplY3QpIHtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICBpZiAodHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nIHx8XG4gICAgICB2YWx1ZSA9PSBudWxsIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiByZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpIHx8ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSkgfHxcbiAgICAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gT2JqZWN0KG9iamVjdCkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gKHR5cGUgPT0gJ3N0cmluZycgfHwgdHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nKVxuICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcbiAgICA6ICh2YWx1ZSA9PT0gbnVsbCk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBmdW5jYCBpcyBtYXNrZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuICByZXR1cm4gISFtYXNrU3JjS2V5ICYmIChtYXNrU3JjS2V5IGluIGZ1bmMpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGEgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbnZhciBzdHJpbmdUb1BhdGggPSBtZW1vaXplKGZ1bmN0aW9uKHN0cmluZykge1xuICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuXG4gIHZhciByZXN1bHQgPSBbXTtcbiAgaWYgKHJlTGVhZGluZ0RvdC50ZXN0KHN0cmluZykpIHtcbiAgICByZXN1bHQucHVzaCgnJyk7XG4gIH1cbiAgc3RyaW5nLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59KTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGtleSBpZiBpdCdzIG5vdCBhIHN0cmluZyBvciBzeW1ib2wuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7c3RyaW5nfHN5bWJvbH0gUmV0dXJucyB0aGUga2V5LlxuICovXG5mdW5jdGlvbiB0b0tleSh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ29udmVydHMgYGZ1bmNgIHRvIGl0cyBzb3VyY2UgY29kZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLlxuICovXG5mdW5jdGlvbiB0b1NvdXJjZShmdW5jKSB7XG4gIGlmIChmdW5jICE9IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGZ1bmNUb1N0cmluZy5jYWxsKGZ1bmMpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAoZnVuYyArICcnKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpc1xuICogcHJvdmlkZWQsIGl0IGRldGVybWluZXMgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0IGJhc2VkIG9uIHRoZVxuICogYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbi4gQnkgZGVmYXVsdCwgdGhlIGZpcnN0IGFyZ3VtZW50XG4gKiBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgbWFwIGNhY2hlIGtleS4gVGhlIGBmdW5jYFxuICogaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gKlxuICogKipOb3RlOioqIFRoZSBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZFxuICogZnVuY3Rpb24uIEl0cyBjcmVhdGlvbiBtYXkgYmUgY3VzdG9taXplZCBieSByZXBsYWNpbmcgdGhlIGBfLm1lbW9pemUuQ2FjaGVgXG4gKiBjb25zdHJ1Y3RvciB3aXRoIG9uZSB3aG9zZSBpbnN0YW5jZXMgaW1wbGVtZW50IHRoZVxuICogW2BNYXBgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1wcm9wZXJ0aWVzLW9mLXRoZS1tYXAtcHJvdG90eXBlLW9iamVjdClcbiAqIG1ldGhvZCBpbnRlcmZhY2Ugb2YgYGRlbGV0ZWAsIGBnZXRgLCBgaGFzYCwgYW5kIGBzZXRgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc29sdmVyXSBUaGUgZnVuY3Rpb24gdG8gcmVzb2x2ZSB0aGUgY2FjaGUga2V5LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdjJzogMywgJ2QnOiA0IH07XG4gKlxuICogdmFyIHZhbHVlcyA9IF8ubWVtb2l6ZShfLnZhbHVlcyk7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsxLCAyXVxuICpcbiAqIHZhbHVlcyhvdGhlcik7XG4gKiAvLyA9PiBbMywgNF1cbiAqXG4gKiBvYmplY3QuYSA9IDI7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsxLCAyXVxuICpcbiAqIC8vIE1vZGlmeSB0aGUgcmVzdWx0IGNhY2hlLlxuICogdmFsdWVzLmNhY2hlLnNldChvYmplY3QsIFsnYScsICdiJ10pO1xuICogdmFsdWVzKG9iamVjdCk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddXG4gKlxuICogLy8gUmVwbGFjZSBgXy5tZW1vaXplLkNhY2hlYC5cbiAqIF8ubWVtb2l6ZS5DYWNoZSA9IFdlYWtNYXA7XG4gKi9cbmZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicgfHwgKHJlc29sdmVyICYmIHR5cGVvZiByZXNvbHZlciAhPSAnZnVuY3Rpb24nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB2YXIgbWVtb2l6ZWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmdzKSA6IGFyZ3NbMF0sXG4gICAgICAgIGNhY2hlID0gbWVtb2l6ZWQuY2FjaGU7XG5cbiAgICBpZiAoY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgbWVtb2l6ZWQuY2FjaGUgPSBjYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIG1lbW9pemVkLmNhY2hlID0gbmV3IChtZW1vaXplLkNhY2hlIHx8IE1hcENhY2hlKTtcbiAgcmV0dXJuIG1lbW9pemVkO1xufVxuXG4vLyBBc3NpZ24gY2FjaGUgdG8gYF8ubWVtb2l6ZWAuXG5tZW1vaXplLkNhY2hlID0gTWFwQ2FjaGU7XG5cbi8qKlxuICogUGVyZm9ybXMgYVxuICogW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAqIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVpdmFsZW50LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSB9O1xuICogdmFyIG90aGVyID0geyAnYSc6IDEgfTtcbiAqXG4gKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKCdhJywgJ2EnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKE5hTiwgTmFOKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gb3RoZXIgfHwgKHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXIpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIFNhZmFyaSA4LTkgd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy5cbiAgdmFyIHRhZyA9IGlzT2JqZWN0KHZhbHVlKSA/IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZy4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkIGZvciBgbnVsbGBcbiAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvU3RyaW5nKG51bGwpO1xuICogLy8gPT4gJydcbiAqXG4gKiBfLnRvU3RyaW5nKC0wKTtcbiAqIC8vID0+ICctMCdcbiAqXG4gKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiAnMSwyLDMnXG4gKi9cbmZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiBiYXNlVG9TdHJpbmcodmFsdWUpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBgb2JqZWN0YC4gSWYgYSBwb3J0aW9uIG9mIGBwYXRoYCBkb2Vzbid0IGV4aXN0LFxuICogaXQncyBjcmVhdGVkLiBBcnJheXMgYXJlIGNyZWF0ZWQgZm9yIG1pc3NpbmcgaW5kZXggcHJvcGVydGllcyB3aGlsZSBvYmplY3RzXG4gKiBhcmUgY3JlYXRlZCBmb3IgYWxsIG90aGVyIG1pc3NpbmcgcHJvcGVydGllcy4gVXNlIGBfLnNldFdpdGhgIHRvIGN1c3RvbWl6ZVxuICogYHBhdGhgIGNyZWF0aW9uLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy43LjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcbiAqXG4gKiBfLnNldChvYmplY3QsICdhWzBdLmIuYycsIDQpO1xuICogY29uc29sZS5sb2cob2JqZWN0LmFbMF0uYi5jKTtcbiAqIC8vID0+IDRcbiAqXG4gKiBfLnNldChvYmplY3QsIFsneCcsICcwJywgJ3knLCAneiddLCA1KTtcbiAqIGNvbnNvbGUubG9nKG9iamVjdC54WzBdLnkueik7XG4gKiAvLyA9PiA1XG4gKi9cbmZ1bmN0aW9uIHNldChvYmplY3QsIHBhdGgsIHZhbHVlKSB7XG4gIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IG9iamVjdCA6IGJhc2VTZXQob2JqZWN0LCBwYXRoLCB2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0O1xuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYgKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59O1xuIiwiaW1wb3J0IHsgSVNjcmVlblNldFBhcmFtcyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuU2V0UGx1Z2luJztcbmltcG9ydCB7IEZvckVhY2gsIERlZXBGcmVlemUgfSBmcm9tICdzcmMvYWNjb3VudHMvR2lneWEuSlMuUGx1Z2luLnNjcmVlblNldDIvYXBwL3V0aWxzJztcblxuZXhwb3J0IGVudW0gQ29uZmxpY3RIYW5kbGluZyB7XG4gICAgZmFpbCxcbiAgICBzYXZlUHJvZmlsZUFuZEZhaWwsXG59XG5leHBvcnQgaW50ZXJmYWNlIElMb2dpbk1vZGUge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBnZXRMb2dpblByb3ZpZGVycyhhcGlEYXRhOiBhbnksIHBhcmFtczogYW55LCByZWdUb2tlbjogc3RyaW5nKTogc3RyaW5nO1xuICAgIGZpbHRlclBhcmFtcyhwYXJhbXM6IElTY3JlZW5TZXRQYXJhbXMpOiBJU2NyZWVuU2V0UGFyYW1zO1xufVxuaW50ZXJmYWNlIElJZGVudGl0eSB7XG4gICAgYWxsb3dzTG9naW46IGJvb2xlYW47XG4gICAgcHJvdmlkZXI6IHN0cmluZztcbn1cbmV4cG9ydCB2YXIgTG9naW5Nb2RlcyA9IHtcbiAgICBjb25uZWN0OntcbiAgICAgICAgbmFtZTogJ2Nvbm5lY3QnXG4gICAgfSxcbiAgICBzdGFuZGFyZDoge1xuICAgICAgICBuYW1lOiAnc3RhbmRhcmQnLFxuICAgICAgICBnZXRMb2dpblByb3ZpZGVyczogKGFwaURhdGEsIHBhcmFtcywgcmVnVG9rZW4pOiBzdHJpbmcgPT4ge1xuICAgICAgICAgICAgdmFyIGVuYWJsZWRQcm92aWRlcnM6IHN0cmluZyA9IHBhcmFtc1snZW5hYmxlZFByb3ZpZGVycyddO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGVuYWJsZWRQcm92aWRlcnMgIT09ICdzdHJpbmcnKSByZXR1cm4gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIGVuYWJsZWRQcm92aWRlcnMudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZmlsdGVyUGFyYW1zOiBwYXJhbXMgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5yZWdUb2tlbjtcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXMuaW5zdGFuY2VJRDtcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXMuZ2V0SW5zdGFuY2U7XG4gICAgICAgICAgICByZXR1cm4gcGFyYW1zO1xuICAgICAgICB9LFxuICAgIH0sXG4gICAgcmVBdXRoOiB7XG4gICAgICAgIG5hbWU6ICdyZUF1dGgnLFxuICAgICAgICBnZXRMb2dpblByb3ZpZGVyczogKGFwaURhdGEsIHBhcmFtcywgcmVnVG9rZW4pOiBzdHJpbmcgPT4ge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRQcm92aWRlcnM6IHN0cmluZyA9IGFwaURhdGEuZ2V0QWNjb3VudEluZm8gJiYgYXBpRGF0YS5nZXRBY2NvdW50SW5mby5zb2NpYWxQcm92aWRlcnM7XG4gICAgICAgICAgICB2YXIgaWRlbnRpdGllczogQXJyYXk8SUlkZW50aXR5PiA9IGFwaURhdGEuZ2V0QWNjb3VudEluZm8gJiYgYXBpRGF0YS5nZXRBY2NvdW50SW5mby5pZGVudGl0aWVzO1xuXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRQcm92aWRlcnMpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICBjdXJyZW50UHJvdmlkZXJzID0gY3VycmVudFByb3ZpZGVycy50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICB2YXIgcHJvdmlkZXJzID0gY3VycmVudFByb3ZpZGVycy5zcGxpdCgnLCcpO1xuXG4gICAgICAgICAgICBpZiAoaWRlbnRpdGllcykge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBpZGVudGl0aWVzIHRoYXQgYXJlIGFsbG93TG9naW4gZmFsc2VcbiAgICAgICAgICAgICAgICBGb3JFYWNoKGlkZW50aXRpZXMsIGlkZW50aXR5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZGVudGl0eS5hbGxvd3NMb2dpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHByb3ZpZGVycy5pbmRleE9mKGlkZW50aXR5LnByb3ZpZGVyLnRvTG93ZXJDYXNlKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ID4gLTEpIHByb3ZpZGVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXJzLmpvaW4oJywnKTtcbiAgICAgICAgfSxcbiAgICAgICAgZmlsdGVyUGFyYW1zOiBwYXJhbXMgPT4ge1xuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5pbnN0YW5jZUlEO1xuICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5nZXRJbnN0YW5jZTtcbiAgICAgICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBsaW5rOiB7XG4gICAgICAgIG5hbWU6ICdsaW5rJyxcbiAgICAgICAgZ2V0TG9naW5Qcm92aWRlcnM6IChhcGlEYXRhLCBwYXJhbXMsIHJlZ1Rva2VuKTogc3RyaW5nID0+IHtcbiAgICAgICAgICAgIGlmICghcmVnVG9rZW4pIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICByZXR1cm4gIGFwaURhdGE/LmdldENvbmZsaWN0aW5nQWNjb3VudD8uY29uZmxpY3RpbmdBY2NvdW50Py5sb2dpblByb3ZpZGVycz8uam9pbignLCcpPy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBmaWx0ZXJQYXJhbXM6IHBhcmFtcyA9PiB7XG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zLmluc3RhbmNlSUQ7XG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zLmdldEluc3RhbmNlO1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICAgICAgfSxcbiAgICB9LFxufTtcbkRlZXBGcmVlemUoTG9naW5Nb2Rlcyk7XG4iLCJleHBvcnQgdmFyIFNjcmVlbl9DT05TVFMgPSB7XG4gICAgZ2lneWFDbGFzczogJ2dpZ3lhLXNjcmVlbicsXG4gICAgY29uZGl0aW9uYWxBdHRyaWJ1dGVQcmVmaXg6ICdnaWd5YS1jb25kaXRpb25hbCcsXG4gICAgZXhwcmVzc2lvbkF0dHJpYnV0ZVByZWZpeDogJ2dpZ3lhLWV4cHJlc3Npb24nLFxuICAgIGNzc0NsYXNzOiAnZGF0YS1jc3MtY2xhc3MnLFxuICAgIGRhdGFWYXJpYW50UGVyY2VudGFnZTogJ2RhdGEtdmFyaWFudC1wZXJjZW50YWdlJyxcbiAgICBkYXRhVmFyaWFudEdyb3VwOiAnZGF0YS12YXJpYW50LWdyb3VwJyxcbiAgICBkYXRhVmFyaWFudE9yaWdpbmFsU2NyZWVuOiAnZGF0YS12YXJpYW50LW9yaWdpbmFsLXNjcmVlbicsXG4gICAgZGF0YVZhcmlhbnRUZXN0SWQ6ICdkYXRhLXZhcmlhbnQtdGVzdC1pZCcsXG59O1xuIiwiaW1wb3J0IHsgSUNvbmRpdGlvbmFsQXR0cmlidXRlIH0gZnJvbSAnc3JjL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9UZW1wbGF0ZUVsZW1lbnQnO1xuaW1wb3J0IHsgU2NyZWVuX0NPTlNUUyB9IGZyb20gJ3NyYy9hY2NvdW50cy9HaWd5YS5KUy5QbHVnaW4uc2NyZWVuU2V0Mi9hcHAvU2NyZWVuQ29uc3RzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzSGlkZGVuKGVsOiBIVE1MRWxlbWVudCkge1xuICAgIHdoaWxlIChlbCAmJiBlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGVsLnN0eWxlLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nIHx8IC8vIGhpZGRlbiBlbGVtZW50XG4gICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgLy8gaGlkZGVuIGVsZW1lbnRcbiAgICAgICAgICAgIChnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoZWwsICdnaWd5YS1lcnJvci1kaXNwbGF5JykgJiYgIWdpZ3lhLnV0aWxzLkRPTS5pc0VsZW1lbnRDbGFzcyhlbCwgJ2dpZ3lhLWVycm9yLWRpc3BsYXktYWN0aXZlJykpIHx8IC8vIGhpZGRlbiBlcnJvciBtZXNzYWdlXG4gICAgICAgICAgICBnaWd5YS51dGlscy5ET00uaXNFbGVtZW50Q2xhc3MoZWwsICduZy1oaWRlJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBhbmd1bGFyIGhpZGRlbiBlbGVtZW50XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbklGcmFtZSgpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gd2luZG93LnNlbGYgIT09IHdpbmRvdy50b3A7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNGaWVsZEluSGlkZGVuQ29udGFpbmVyKGVsOiBIVE1MRWxlbWVudCkge1xuICAgIGxldCBjdXJyID0gZWw7XG5cbiAgICB3aGlsZSAoY3Vycikge1xuICAgICAgICBpZiAoZ2lneWEudXRpbHMuRE9NLmlzRWxlbWVudENsYXNzKGN1cnIsICdnaWd5YS1jb250YWluZXInKSAmJiAhZ2lneWEudXRpbHMuRE9NLmlzRWxlbWVudENsYXNzKGN1cnIsICdnaWd5YS1jb250YWluZXItZW5hYmxlZCcpKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICBjdXJyID0gY3Vyci5wYXJlbnRFbGVtZW50O1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1BhcmVudEF0dHJpYnV0ZShlbDogSFRNTEVsZW1lbnQsIGF0dHJOYW1lOiBzdHJpbmcsIGF0dHJWYWx1ZTogc3RyaW5nKSB7XG4gICAgbGV0IGN1cnIgPSBlbDtcblxuICAgIHdoaWxlIChjdXJyKSB7XG4gICAgICAgIGlmIChjdXJyLmdldEF0dHJpYnV0ZShhdHRyTmFtZSkgPT09IGF0dHJWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyID0gY3Vyci5wYXJlbnRFbGVtZW50O1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuaW50ZXJmYWNlIElEaW1tZWRIVE1MRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBlbERpbTogSFRNTERpdkVsZW1lbnQ7XG4gICAgZWxQcm9ncmVzczogSFRNTERpdkVsZW1lbnQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZmlyc3RQYXJ0KHN0cjogc3RyaW5nLCBzZXBlcmF0b3I6IHN0cmluZykge1xuICAgIHZhciBpbmRleCA9IHN0ci5pbmRleE9mKHNlcGVyYXRvcik7XG5cbiAgICByZXR1cm4gaW5kZXggPiAtMSA/IHN0ci5zdWJzdHJpbmcoMCwgaW5kZXgpIDogc3RyO1xufVxuZXhwb3J0IGludGVyZmFjZSBJTnVtZXJpY01hcDxUPiB7XG4gICAgW2tleTogbnVtYmVyXTogVDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSU1hcDxUPiB7XG4gICAgW2tleTogc3RyaW5nXTogVDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUVudW1lcmFibGU8VD4ge1xuICAgIGxlbmd0aDogbnVtYmVyO1xuICAgIFtpOiBudW1iZXJdOiBUO1xufVxuZXhwb3J0IGZ1bmN0aW9uIExhc3RJbmRleE9mPFQ+KGFycjogSUVudW1lcmFibGU8VD4sIHZhbDogVCwgZnJvbUluZGV4ID0gMCk6IG51bWJlciB7XG4gICAgZm9yICh2YXIgaSA9IGFyci5sZW5ndGg7IC0taSA+PSBmcm9tSW5kZXg7ICkge1xuICAgICAgICBpZiAoYXJyW2ldID09PSB2YWwpIHJldHVybiBpO1xuICAgIH1cblxuICAgIHJldHVybiAtMTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBGb3JFYWNoPFQ+KGFycjogSUVudW1lcmFibGU8VD4sIGFjdGlvbjogKGVsZW1lbnQ6IFQsIGluZGV4PzogbnVtYmVyLCBhcnI/OiBJRW51bWVyYWJsZTxUPikgPT4gdm9pZCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGFjdGlvbihhcnJbaV0sIGksIGFycik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIEZvckVhY2hQcm9wPFQ+KG9iajogSU1hcDxUPiwgYWN0aW9uOiAocHJvcDogVCwgbmFtZTogc3RyaW5nLCBvYmo6IElNYXA8VD4pID0+IHZvaWQpO1xuZXhwb3J0IGZ1bmN0aW9uIEZvckVhY2hQcm9wPFQgZXh0ZW5kcyBPYmplY3Q+KG9iajogVCwgYWN0aW9uOiAocHJvcDogYW55LCBuYW1lOiBzdHJpbmcsIG9iajogVCkgPT4gdm9pZCk7XG5leHBvcnQgZnVuY3Rpb24gRm9yRWFjaFByb3Aob2JqOiBPYmplY3QsIGFjdGlvbjogKHByb3A6IGFueSwgbmFtZTogc3RyaW5nLCBvYmo6IE9iamVjdCkgPT4gdm9pZCkge1xuICAgIGZvciAodmFyIG5hbWUgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobmFtZSkpIGFjdGlvbihvYmpbbmFtZV0sIG5hbWUsIG9iaik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIFNvbWU8VD4oYXJyOiBJRW51bWVyYWJsZTxUPiwgY29uZGl0aW9uOiAoZWxlbWVudDogVCwgaW5kZXg/OiBudW1iZXIsIGFycj86IElFbnVtZXJhYmxlPFQ+KSA9PiBib29sZWFuKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGNvbmRpdGlvbihhcnJbaV0sIGksIGFycikpIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBFdmVyeTxUPihhcnI6IElFbnVtZXJhYmxlPFQ+LCBjb25kaXRpb246IChlbGVtZW50OiBULCBpbmRleD86IG51bWJlciwgYXJyPzogSUVudW1lcmFibGU8VD4pID0+IGJvb2xlYW4pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoIWNvbmRpdGlvbihhcnJbaV0sIGksIGFycikpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBFdmVyeVByb3A8VD4ob2JqOiBJTWFwPFQ+LCBjb25kaXRpb246IChwcm9wOiBULCBuYW1lOiBzdHJpbmcsIG9iajogSU1hcDxUPikgPT4gYm9vbGVhbik7XG5leHBvcnQgZnVuY3Rpb24gRXZlcnlQcm9wPFQ+KG9iajogVCwgY29uZGl0aW9uOiAocHJvcCwgbmFtZTogc3RyaW5nLCBvYmo6IFQpID0+IGJvb2xlYW4pO1xuZXhwb3J0IGZ1bmN0aW9uIEV2ZXJ5UHJvcChvYmo6IE9iamVjdCwgY29uZGl0aW9uOiAocHJvcCwgbmFtZTogc3RyaW5nLCBvYmo6IE9iamVjdCkgPT4gYm9vbGVhbikge1xuICAgIGZvciAodmFyIG5hbWUgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIWNvbmRpdGlvbihvYmpbbmFtZV0sIG5hbWUsIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBNYXA8UywgVD4oYXJyOiBJRW51bWVyYWJsZTxTPiwgYWN0aW9uOiAoZWxlbWVudDogUywgaW5kZXg/OiBudW1iZXIsIGFycj86IElFbnVtZXJhYmxlPFM+KSA9PiBUKSB7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheTxUPigpO1xuXG4gICAgRm9yRWFjaChhcnIsIChpdGVtLCBpZHgsIGFycikgPT4gcmVzdWx0LnB1c2goYWN0aW9uKGl0ZW0sIGlkeCwgYXJyKSkpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBEZWVwRnJlZXplKG9iajogT2JqZWN0KSB7XG4gICAgLy8gT25seSBvbmNlIElFOSBpcyB0aGUgbWluaW11bSAtIGN1cnJlbnRseSBJRTcgaXMgc3VwcG9ydGVkXG4gICAgLypcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiAhT2JqZWN0LmlzRnJvemVuKG9ialtrZXldKSkge1xuICAgICAgICAgICAgRm9yRWFjaFByb3Aob2JqLCAocHJvcCkgPT4gRGVlcEZyZWV6ZShwcm9wKSk7XG5cbiAgICAgICAgICAgIE9iamVjdC5mcmVlemUob2JqKTtcbiAgICAgICAgfVxuICAgICAgICAqL1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGUocGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsIHRhZ05hbWU6IHN0cmluZywgYXR0cmlidXRlTmFtZTogc3RyaW5nKSB7XG4gICAgdmFyIGFyRWxzID0gbmV3IEFycmF5PEhUTUxFbGVtZW50PigpO1xuICAgIHZhciBlbHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKSBhcyBhbnk7XG5cbiAgICBGb3JFYWNoKGVscywgZWwgPT4ge1xuICAgICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgICAgICBhckVscy5wdXNoKGVsKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGFyRWxzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRzQnlIYXZpbmdBdHRyaWJ1dGVQcmVmaXgoXG4gICAgcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgYXR0cmlidXRlUHJlZml4ZXM6IHN0cmluZyB8IEFycmF5PHN0cmluZz4sXG4gICAgdGFnTmFtZXNFeGNlcHRpb25zOiBBcnJheTxzdHJpbmc+ID0gW10sXG4pOiBBcnJheTxIVE1MRWxlbWVudD4ge1xuICAgIGlmICh0eXBlb2YgYXR0cmlidXRlUHJlZml4ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGF0dHJpYnV0ZVByZWZpeGVzID0gW2F0dHJpYnV0ZVByZWZpeGVzXTtcbiAgICB9XG4gICAgY29uc3QgZWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpIGFzIGFueTtcbiAgICBjb25zdCBtYXRjaGluZ0VsZW1lbnRzID0gbmV3IEFycmF5PEhUTUxFbGVtZW50PigpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGVsZW1lbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBlbCA9IGVsZW1lbnRzLml0ZW0oaSk7XG4gICAgICAgIGlmIChnaWd5YS51dGlscy5hcnJheS5pbmRleE9mKHRhZ05hbWVzRXhjZXB0aW9ucywgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgYXR0cmlidXRlUHJlZml4IG9mIGF0dHJpYnV0ZVByZWZpeGVzKSB7XG4gICAgICAgICAgICBpZiAoaXNFbGVtZW50Q29udGFpbkF0dHJpYnV0ZVByZWZpeChlbGVtZW50c1tpXSwgYXR0cmlidXRlUHJlZml4KSkge1xuICAgICAgICAgICAgICAgIG1hdGNoaW5nRWxlbWVudHMucHVzaChlbGVtZW50c1tpXSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoaW5nRWxlbWVudHM7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50Q29udGFpbkF0dHJpYnV0ZVByZWZpeChlbDogSFRNTEVsZW1lbnQsIHN1YlN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdmFyIGVsZW1lbnRBdHRyaWJ1dGVzOiBOYW1lZE5vZGVNYXAgPSBlbC5hdHRyaWJ1dGVzO1xuICAgIHZhciBjb250YWluQ29uZGl0aW9uYWxBdHRyaWJ1dGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBpZiAoZWxlbWVudEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50QXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRBdHRyaWJ1dGVzW2ldLm5vZGVOYW1lLmluZGV4T2Yoc3ViU3RyaW5nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb250YWluQ29uZGl0aW9uYWxBdHRyaWJ1dGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb250YWluQ29uZGl0aW9uYWxBdHRyaWJ1dGU7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZGl0aW9uYWxBdHRyaWJ1dGVFeHByZXNzaW9ucyhlbGVtZW50OiBIVE1MRWxlbWVudCwgaXNXaWRnZXRDb250ZXh0OiBib29sZWFuID0gZmFsc2UpOiBBcnJheTxJQ29uZGl0aW9uYWxBdHRyaWJ1dGU+IHtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB2YXIgY29uZGl0aW9uYWxFeHByZXNzaW9ucyA9IG5ldyBBcnJheTxJQ29uZGl0aW9uYWxBdHRyaWJ1dGU+KCk7XG4gICAgdmFyIGNvbmRpdGlvbmFsRGVmYXVsdFZhbHVlOiBzdHJpbmc7XG4gICAgbGV0IGxhc3RBdHRyaWJ1dGVWYWx1ZTogc3RyaW5nO1xuICAgIHZhciBpc1BhcmFtVGFnOiBib29sZWFuID0gZmFsc2U7XG4gICAgdmFyIGF0dHJpYnV0ZXMgPSBnZXRBdHRyaWJ1dGVzQXNBcnJheShlbGVtZW50KTtcblxuICAgIEZvckVhY2goYXR0cmlidXRlcywgYXQgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGNvbmRpdGlvbmFsIGF0dHJpYnV0ZSBwcmVmaXggd2hpY2ggZGV0ZXJtaW5lcyBpZiB0aGlzIGF0dHJpYnV0ZSBiZSBldmFsdWF0ZWQuXG4gICAgICAgICAgICBjb25zdCBpc0NvbmRpdGlvbmFsQXR0cmlidXRlID0gYXQubm9kZU5hbWUuaW5kZXhPZihTY3JlZW5fQ09OU1RTLmNvbmRpdGlvbmFsQXR0cmlidXRlUHJlZml4KSAhPT0gLTE7XG4gICAgICAgICAgICBjb25zdCBpc0V4cHJlc3Npb25BdHRyaWJ1dGUgPSBhdC5ub2RlTmFtZS5pbmRleE9mKFNjcmVlbl9DT05TVFMuZXhwcmVzc2lvbkF0dHJpYnV0ZVByZWZpeCkgIT09IC0xO1xuXG4gICAgICAgICAgICBpZiAoaXNDb25kaXRpb25hbEF0dHJpYnV0ZSB8fCBpc0V4cHJlc3Npb25BdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvbkluZGV4ID0gYXQubm9kZU5hbWUuaW5kZXhPZignOicpO1xuICAgICAgICAgICAgICAgIGlmIChjb2xvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0QXR0cmlidXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaWRnZXRDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb25hbERlZmF1bHRWYWx1ZSA9IGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uZ2V0QXR0cmlidXRlKGVsZW1lbnQsICd2YWx1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXR0cmlidXRlID0gZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgJ25hbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGFyYW1UYWcgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3BhcmFtJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEF0dHJpYnV0ZSA9IGF0Lm5vZGVOYW1lLnN1YnN0cmluZyhjb2xvbkluZGV4ICsgMSwgYXQubm9kZU5hbWUubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RBdHRyaWJ1dGVWYWx1ZSA9IGdpZ3lhLl8ucGx1Z2lucy51dGlscy5ET00uZ2V0QXR0cmlidXRlKGVsZW1lbnQsIHRhcmdldEF0dHJpYnV0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVBdHRyaWJ1dGUgPSAnZ2lneWEtZGVmYXVsdC0nICsgdGFyZ2V0QXR0cmlidXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFnaWd5YS5fLnBsdWdpbnMudXRpbHMuRE9NLmdldEF0dHJpYnV0ZShlbGVtZW50LCBkZWZhdWx0VmFsdWVBdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgZGVmYXVsdFZhbHVlQXR0cmlidXRlLCBsYXN0QXR0cmlidXRlVmFsdWUgIT09IG51bGwgPyBsYXN0QXR0cmlidXRlVmFsdWUgOiAnbnVsbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZ2lneWEuXy5wbHVnaW5zLnV0aWxzLkRPTS5nZXRBdHRyaWJ1dGUoZWxlbWVudCwgZGVmYXVsdFZhbHVlQXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbmFsRGVmYXVsdFZhbHVlID0gdmFsICE9PSAnbnVsbCcgPyB2YWwgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uZGl0aW9uYWxzIGFyZSBhbHdheXMgdGVybmFyeSB3aXRoIHNwZWNpYWwgZXNjYXBpbmcgYW5kIHBhcnNpbmcgZG9uZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gSW46IGV4cHJlc3Npb24gPyB2YWx1ZSA6IG90aGVyVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgLy8gT3V0OiBleHByZXNzaW9uID8gJ3ZhbHVlJyA6ICdvdGhlclZhbHVlJ1xuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBFeHByZXNzaW9ucyBhcmUgcGFyc2VkIGFzLWlzIGFuZCB0aGUgcmV0dXJuZWQgdmFsdWUgaXMgc2V0LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb25hbEV4cHJlc3Npb24gPSAhaXNFeHByZXNzaW9uQXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHNldHVwQ29uZGl0aW9uYWxFeHByZXNzaW9uVmFsdWUoYXQubm9kZVZhbHVlLCBjb25kaXRpb25hbERlZmF1bHRWYWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYXQubm9kZVZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbmFsOiBJQ29uZGl0aW9uYWxBdHRyaWJ1dGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiB0YXJnZXRBdHRyaWJ1dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvbmFsRXhwcmVzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogY29uZGl0aW9uYWxEZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0QXR0cmlidXRlVmFsdWU6IGxhc3RBdHRyaWJ1dGVWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzV2lkZ2V0UGFyYW1UYWc6IGlzUGFyYW1UYWcsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbmFsRXhwcmVzc2lvbnMucHVzaChjb25kaXRpb25hbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbmRpdGlvbmFsIGZvcm1hdCBlcnJvcjogJyArIGUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbmRpdGlvbmFsRXhwcmVzc2lvbnM7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0dXBDb25kaXRpb25hbEV4cHJlc3Npb25WYWx1ZShjb25kaXRpb25hbFZhbHVlOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBleHByZXNzaW9uV2l0aEZhbHNlVmFsdWUgPSBzZXR1cENvbmRpdGlvbmFsRmFsc2VWYWx1ZShjb25kaXRpb25hbFZhbHVlLCBkZWZhdWx0VmFsdWUpO1xuICAgIGNvbnN0IGV4cHJlc3Npb25XaXRoRXNjYXBpbmcgPSBlc2NhcGVDaGFyYWN0ZXJzSW5Db25kaXRpb25hbFZhbHVlKGV4cHJlc3Npb25XaXRoRmFsc2VWYWx1ZSk7XG4gICAgbGV0IGZpbmFsQ29uZGl0aW9uYWxFeHByZXNzaW9uID0gc2V0VXBMYXN0RmFsc2VWYWx1ZShleHByZXNzaW9uV2l0aEVzY2FwaW5nKTtcbiAgICBpZiAoIWRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAvLyBmaXggZGVmYXVsdCB2YWx1ZSB0byBiZSBhIGZhbHN5IHZhbHVlIGluc3RlYWQgb2YgYSBzdHJpbmcgbGl0ZXJhbFxuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVMb2NhdGlvbiA9IGZpbmFsQ29uZGl0aW9uYWxFeHByZXNzaW9uLmxhc3RJbmRleE9mKGA6JyR7ZGVmYXVsdFZhbHVlfSdgKTtcbiAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZUxvY2F0aW9uID4gLTEpIHtcbiAgICAgICAgICAgIGZpbmFsQ29uZGl0aW9uYWxFeHByZXNzaW9uID0gYCR7ZmluYWxDb25kaXRpb25hbEV4cHJlc3Npb24uc3Vic3RyaW5nKDAsIGRlZmF1bHRWYWx1ZUxvY2F0aW9uKX06bnVsbGA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZpbmFsQ29uZGl0aW9uYWxFeHByZXNzaW9uO1xufVxuZnVuY3Rpb24gc2V0dXBDb25kaXRpb25hbEZhbHNlVmFsdWUoY29uZGl0aW9uYWxWYWx1ZTogc3RyaW5nLCBkZWZhdWx0VmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGxhc3QgJ2ZhbHNlJyB2YWx1ZSBoYXMgYSAnOicgc2lnbiBhbmQgaWYgaXQgZG9lc24ndCwgYWRkIGl0IGFuZCBhc3NpZ24gdGhlIGRlZmF1bHQgdmFsdWUsIGlmIHRoZXJlJ3Mgb25lLlxuICAgIHZhciBpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHMgPSBjb25kaXRpb25hbFZhbHVlLmxhc3RJbmRleE9mKCc/Jyk7XG4gICAgdmFyIHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMgPSBjb25kaXRpb25hbFZhbHVlLnN1YnN0cihpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHMgKyAxLCBjb25kaXRpb25hbFZhbHVlLmxlbmd0aCk7XG5cbiAgICB2YXIgaW5kZXhPZkxhc3RDb25kaXRpb25SZXN1bHRzRGl2aWRlciA9IHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMuaW5kZXhPZignOicpO1xuICAgIGlmIChpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHNEaXZpZGVyID09PSAtMSkge1xuICAgICAgICBjb25kaXRpb25hbFZhbHVlICs9ICc6JztcbiAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgY29uZGl0aW9uYWxWYWx1ZSArPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSdzIGEgJ2ZhbHNlJyB2YWx1ZSBvciBqdXN0IGFuIGVtcHR5IHN0cmluZ1xuICAgICAgICB2YXIgZW1wdHlGYWxzZVZhbHVlID0gc3ViU3RyaW5nT2ZMYXN0Q29uZGl0aW9uUmVzdWx0cy5zdWJzdHIoaW5kZXhPZkxhc3RDb25kaXRpb25SZXN1bHRzRGl2aWRlciArIDEsIHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMubGVuZ3RoKTtcbiAgICAgICAgaWYgKGVtcHR5RmFsc2VWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbmFsVmFsdWUgPSBjb25kaXRpb25hbFZhbHVlLnN1YnN0cigwLCBjb25kaXRpb25hbFZhbHVlLmxlbmd0aCkgKyBkZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbmRpdGlvbmFsVmFsdWU7XG59XG5mdW5jdGlvbiBlc2NhcGVDaGFyYWN0ZXJzSW5Db25kaXRpb25hbFZhbHVlKGNvbmRpdGlvbmFsVmFsdWUpOiBzdHJpbmcge1xuICAgIC8vIEVzY2FwZSBhbnkgXCInXCIgc2lnbnMuXG4gICAgY29uZGl0aW9uYWxWYWx1ZSA9IGNvbmRpdGlvbmFsVmFsdWUucmVwbGFjZSgvXFwnL2csIFwiJ1wiKTtcbiAgICAvLyBFbmNsb3NlIGFsbCB0aGUgJ3RydWUnIHZhbHVlcyBpbiAnJ1xuICAgIGNvbmRpdGlvbmFsVmFsdWUgPSBjb25kaXRpb25hbFZhbHVlLnJlcGxhY2UoL1xcPy9nLCBcIj8nXCIpO1xuICAgIGNvbmRpdGlvbmFsVmFsdWUgPSBjb25kaXRpb25hbFZhbHVlLnJlcGxhY2UoLzovZywgXCInOlwiKTtcbiAgICByZXR1cm4gY29uZGl0aW9uYWxWYWx1ZTtcbn1cbmZ1bmN0aW9uIHNldFVwTGFzdEZhbHNlVmFsdWUoY29uZGl0aW9uYWxWYWx1ZSk6IHN0cmluZyB7XG4gICAgLy8gU2V0IGFuIGFwaG9zdHJvcGhlIGluIHRoZSBsYXN0ICdmYWxzZScgaWYgdGhlcmUgaXNuJ3Qgb25lXG4gICAgLy8gRmlyc3Q6IHRyaW0gdGhlIGxhc3QgJ2ZhbHNlJyB2YWx1ZSBmb3IgdGhlIGFwaG9zdHJvcGhlIGluc2VydGlvblxuICAgIHZhciBpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHMgPSBjb25kaXRpb25hbFZhbHVlLmxhc3RJbmRleE9mKCc/Jyk7XG4gICAgdmFyIHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMgPSBjb25kaXRpb25hbFZhbHVlLnN1YnN0cihpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHMgKyAxLCBjb25kaXRpb25hbFZhbHVlLmxlbmd0aCk7XG4gICAgdmFyIGZhbHNlUmVzdWx0U3RhcnRJbmRleCA9IHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMuaW5kZXhPZignOicpICsgMTtcbiAgICB2YXIgbGFzdEZhbHNlUmVzdWx0VmFsdWUgPSBzdWJTdHJpbmdPZkxhc3RDb25kaXRpb25SZXN1bHRzLnN1YnN0cihmYWxzZVJlc3VsdFN0YXJ0SW5kZXgsIHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMubGVuZ3RoKTtcbiAgICBsYXN0RmFsc2VSZXN1bHRWYWx1ZSA9IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLnRyaW0obGFzdEZhbHNlUmVzdWx0VmFsdWUpO1xuICAgIGlmIChsYXN0RmFsc2VSZXN1bHRWYWx1ZVswXSAhPSBcIidcIikge1xuICAgICAgICBsYXN0RmFsc2VSZXN1bHRWYWx1ZSA9IFwiJ1wiICsgbGFzdEZhbHNlUmVzdWx0VmFsdWU7XG4gICAgfVxuICAgIGlmIChsYXN0RmFsc2VSZXN1bHRWYWx1ZVtsYXN0RmFsc2VSZXN1bHRWYWx1ZS5sZW5ndGhdICE9IFwiJ1wiKSB7XG4gICAgICAgIGxhc3RGYWxzZVJlc3VsdFZhbHVlICs9IFwiJ1wiO1xuICAgIH1cbiAgICB2YXIgbGFzdFRydWVSZXN1bHRWYWx1ZSA9IHN1YlN0cmluZ09mTGFzdENvbmRpdGlvblJlc3VsdHMuc3Vic3RyKDAsIGZhbHNlUmVzdWx0U3RhcnRJbmRleCAtIDEpO1xuICAgIGNvbmRpdGlvbmFsVmFsdWUgPSBjb25kaXRpb25hbFZhbHVlLnN1YnN0cigwLCBpbmRleE9mTGFzdENvbmRpdGlvblJlc3VsdHMgKyAxKSArIGxhc3RUcnVlUmVzdWx0VmFsdWUgKyAnOicgKyBsYXN0RmFsc2VSZXN1bHRWYWx1ZTtcbiAgICByZXR1cm4gY29uZGl0aW9uYWxWYWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0tleUNvZGVEaXNwbGF5YWJsZShrZXljb2RlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAoa2V5Y29kZSA+IDQ3ICYmIGtleWNvZGUgPCA1OCkgfHwgLy8gbnVtYmVyIGtleXNcbiAgICAgICAgKGtleWNvZGUgPT0gMzIgfHwga2V5Y29kZSA9PSAxMykgfHwgLy8gc3BhY2ViYXIgJiByZXR1cm4ga2V5KHMpXG4gICAgICAgIChrZXljb2RlID4gNjQgJiYga2V5Y29kZSA8IDkxKSB8fCAvLyBsZXR0ZXIga2V5c1xuICAgICAgICAoa2V5Y29kZSA+IDk1ICYmIGtleWNvZGUgPCAxMTIpIHx8IC8vIG51bXBhZCBrZXlzXG4gICAgICAgIChrZXljb2RlID4gMTg1ICYmIGtleWNvZGUgPCAxOTMpIHx8IC8vIDs9LC0uL2AgKGluIG9yZGVyKVxuICAgICAgICAoa2V5Y29kZSA+IDIxOCAmJiBrZXljb2RlIDwgMjIzKVxuICAgICk7IC8vIFtcXF0nIChpbiBvcmRlcilcbn1cbmV4cG9ydCB2YXIgVW5pdE1lYXN1cmVtZW50VHlwZSA9IHtcbiAgICBwaXhlbDogJ3B4JyxcbiAgICBwZXJjZW50YWdlOiAnJScsXG4gICAgYXV0bzogJycsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXRNZWFzdXJlbWVudFR5cGUodmFsdWUgPSAnJyk6IHN0cmluZyB7XG4gICAgdmFyIHVuaXRUeXBlOiBzdHJpbmc7XG5cbiAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT0gJ2F1dG8nKSB7XG4gICAgICAgIHVuaXRUeXBlID0gVW5pdE1lYXN1cmVtZW50VHlwZS5hdXRvO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaXRUeXBlID0gdmFsdWUuaW5kZXhPZignJScpICE9IC0xID8gVW5pdE1lYXN1cmVtZW50VHlwZS5wZXJjZW50YWdlIDogVW5pdE1lYXN1cmVtZW50VHlwZS5waXhlbDtcbiAgICB9XG4gICAgcmV0dXJuIHVuaXRUeXBlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEF0dHJpYnV0ZXNBc0FycmF5KGVsOiBIVE1MRWxlbWVudCk6IEFycmF5PEF0dHI+IHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gW107XG4gICAgY29uc3QgZWxlbWVudEF0dHJpYnV0ZXM6IE5hbWVkTm9kZU1hcCA9IGVsLmF0dHJpYnV0ZXM7XG5cbiAgICAvLyBBIHdvcmthcm91bmQgZm9yIElFOFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudEF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXR0cmlidXRlcy5wdXNoKGVsZW1lbnRBdHRyaWJ1dGVzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cmlidXRlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHMuaW5kZXhPZihzdWZmaXgsIHMubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgIT09IC0xO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0luZGV4KGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIC9cXFtbMC05XV18XFwuWzAtOV0vLnRlc3Qoa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVTZXJpYWxpemVkS2V5TGFzdEVudW1lcmF0b3Ioa2V5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4ga2V5LnJlcGxhY2UoL1swLTldXFwuKD89W14uXSokKS8sICcnKS5yZXBsYWNlKC9cXFtbMC05XV0oPz1bXlxcW10qJCkvLCAnJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU2VyaWFsaXplZEtleUVkZ2VQcm9wZXJ0eShrZXk6IHN0cmluZykge1xuICAgIHJldHVybiBrZXkuc3Vic3RyKDAsIGtleS5sYXN0SW5kZXhPZignLicpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBJRVRlbXBsYXRlRWxlbWVudFBvbHlmaWxsKGRvYyA9IGRvY3VtZW50KSB7XG4gICAgdmFyIHN1cHBvcnQgPSAnY29udGVudCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblxuICAgIC8vIFNldCB0aGUgY29udGVudCBwcm9wZXJ0eSBpZiBtaXNzaW5nXG4gICAgaWYgKCFzdXBwb3J0KSB7XG4gICAgICAgIHZhciAvKipcbiAgICAgICAgICAgICAqIFByZWZlciBhbiBhcnJheSB0byBhIE5vZGVMaXN0XG4gICAgICAgICAgICAgKiBPdGhlcndpc2UsIHVwZGF0aW5nIHRoZSBjb250ZW50IHByb3BlcnR5IG9mIGEgbm9kZVxuICAgICAgICAgICAgICogd2lsbCB1cGRhdGUgdGhlIE5vZGVMaXN0IGFuZCB3ZSdsbCBsb29zZSB0aGUgbmVzdGVkIDx0ZW1wbGF0ZT5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGVtcGxhdGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RlbXBsYXRlJykpIGFzIGFueSxcbiAgICAgICAgICAgIHRlbXBsYXRlLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIGZyYWdtZW50LFxuICAgICAgICAgICAgbm9kZSxcbiAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgajtcblxuICAgICAgICAvLyBGb3IgZWFjaCA8dGVtcGxhdGU+IGVsZW1lbnQgZ2V0IGl0cyBjb250ZW50IGFuZCB3cmFwIGl0IGluIGEgZG9jdW1lbnQgZnJhZ21lbnRcbiAgICAgICAgd2hpbGUgKCh0ZW1wbGF0ZSA9IHRlbXBsYXRlc1tpKytdKSAmJiAhdGVtcGxhdGUuY29udGVudCkge1xuICAgICAgICAgICAgY29udGVudCA9IHRlbXBsYXRlLmNoaWxkcmVuO1xuICAgICAgICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgICAgIHdoaWxlIChjb250ZW50WzBdKSB7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoY29udGVudFswXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRlbXBsYXRlLmNvbnRlbnQgPSBmcmFnbWVudDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQXR0cmlidXRlKGh0bWxFbGVtZW50OiBIVE1MRWxlbWVudCwgZnJvbUF0dHJpYnV0ZTogc3RyaW5nLCB0b0F0dHJpYnV0ZTogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVFbHMgPSBodG1sRWxlbWVudD8ucXVlcnlTZWxlY3RvckFsbChgWyR7ZnJvbUF0dHJpYnV0ZX1dYCk7XG4gICAgICAgIEZvckVhY2godGVtcGxhdGVFbHMsIGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSh0b0F0dHJpYnV0ZSwgZWwuZ2V0QXR0cmlidXRlKGZyb21BdHRyaWJ1dGUpKTtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShmcm9tQXR0cmlidXRlKTtcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXgpIHt9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RPTVhTUyh0ZXh0OiBzdHJpbmcpOiBib29sZWFue1xuICAgIGNvbnN0IGR1bW15RG9tRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBkdW1teURvbUVsZW1lbnQuaW5uZXJUZXh0ID0gdGV4dDtcbiAgICByZXR1cm4gZHVtbXlEb21FbGVtZW50LmlubmVySFRNTCAhPT0gdGV4dDtcbn1cbiIsImV4cG9ydCBlbnVtIEVkaXRhYmxlVGZhUHJvdmlkZXJzVHlwZXMge1xuICAgIGdpZ3lhUGhvbmUsXG4gICAgZ2lneWFUb3RwLFxuICAgIGdpZ3lhUHVzaCxcbiAgICBsaXZlbGluayxcbn1cbmV4cG9ydCBjb25zdCBnaWd5YUFzc2VydGlvbkV4cGlyYXRpb24gPSA2MCAqIDUgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IHNlbnNpdGl2ZVBhcmFtc092ZXJyaWRlID0gJ2xvZ2luX3Rva2VuJztcblxuZXhwb3J0IGNvbnN0IEdJR1lBX1BBUkFNX1BSRUZJWCA9ICdnaWdfJ1xuXG5leHBvcnQgY29uc3QgR0lHWUFfSU5URVJOQUxfUEFSQU1fUFJFRklYID0gYCR7R0lHWUFfUEFSQU1fUFJFRklYfWlfYFxuXG5leHBvcnQgY29uc3QgR0lHWUFfSU5URVJOQUxfUEFSQU1TID0gYCR7R0lHWUFfUEFSQU1fUFJFRklYfWFjdGlvbnNgXG4iLCJpbXBvcnQgeyBJQXBpU2VydmljZSwgSURvbWFpblJlc29sdmVyLCBJQXBpU2VydmljZUJvb3RzdHJhcEluZm8sIElBcGlTZXJ2aWNlUmVxdWVzdCwgSVRva2VuSWRzLCBJR2V0R21pZFRpY2tldFJlcXVlc3QgfSBmcm9tICdzcmMvY29yZS9BcGlTZXJ2aWNlL2FwcC9pbnRlcmZhY2VzJztcbmltcG9ydCB7IEdyb3VwQXBpRG9tYWluU2VydmljZSB9IGZyb20gJ3NyYy9jb3JlL0FwaVNlcnZpY2UvYXBwL0dyb3VwQXBpRG9tYWluU2VydmljZSc7XG5pbXBvcnQge0lHbWlkVGlja2V0UmVzcG9uc2V9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2ludGVyZmFjZXMvSUFwaUFkYXB0ZXInO1xuaW1wb3J0IHtSZXF1ZXN0UHJvdmlkZXJ9IGZyb20gJy4vUmVxdWVzdFByb3ZpZGVyJztcbmltcG9ydCB7R21pZFByb3ZpZGVyfSBmcm9tIFwiLi9HbWlkUHJvdmlkZXJcIjtcbmltcG9ydCBIYXNHbWlkID0gR21pZFByb3ZpZGVyLkhhc0dtaWQ7XG5pbXBvcnQge0ZsYWdTZXJ2aWNlfSBmcm9tICcuLi8uLi9HaWd5YS5Kcy9hcHAvU2VydmljZXMvRmxhZ1NlcnZpY2UnO1xuXG5jb25zdCBHTUlEX1RJQ0tFVF9FWFBJUkFUSU9OX0lOVEVSVkFMID0gMTtcbmV4cG9ydCBjb25zdCBUb2tlbktleXMgPSB7XG4gICAgR01JRDogJ2dpZ19nbWlkJyxcbiAgICBVQ0lEOiAnZ2lnX3VjaWQnLFxuICAgIEdNSURfVElDS0VUOiAnZ21pZFRpY2tldCcsXG4gICAgR01JRF9USUNLRVRfRVhQSVJBVElPTl9USU1FOiAnZ21pZFRpY2tldEV4cGlyYXRpb24nLFxufTtcbmV4cG9ydCBjbGFzcyBBcGlTZXJ2aWNlIGltcGxlbWVudHMgSUFwaVNlcnZpY2Uge1xuICAgIHByaXZhdGUgX3VzZVN0b3JhZ2U6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfc3RvcmFnZTogZ2lneWEudXRpbHMubG9jYWxTdG9yYWdlLkFic3RyYWN0TG9jYWxTdG9yYWdlQWRhcHRlcjtcbiAgICBwcml2YXRlIGRpZEZhbGxiYWNrID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfYXBpS2V5OiBzdHJpbmcsXG4gICAgICAgIHByaXZhdGUgX2hhc0dtaWQ6IGJvb2xlYW4sXG4gICAgICAgIHByaXZhdGUgX2RvbWFpblJlc29sdmVyOiBJRG9tYWluUmVzb2x2ZXIsXG4gICAgICAgIHByaXZhdGUgX2dyb3VwQXBpRG9tYWluU2VydmljZSA9IG5ldyBHcm91cEFwaURvbWFpblNlcnZpY2UoKSxcbiAgICAgICAgcHJpdmF0ZSBfcmVxdWVzdFByb3ZpZGVyID0gbmV3IFJlcXVlc3RQcm92aWRlcigpLFxuICAgICAgICBfc3RvcmFnZT86IGdpZ3lhLnV0aWxzLmxvY2FsU3RvcmFnZS5BYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIsXG4gICAgKSB7XG4gICAgICAgIGlmIChfc3RvcmFnZSkge1xuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZSA9IF9zdG9yYWdlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldEFwaURvbWFpbihtZXRob2ROYW1lPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvbWFpblJlc29sdmVyLmdldEFwaURvbWFpbihtZXRob2ROYW1lKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgYm9vdHN0cmFwKGZvcmNlQm9vdHN0cmFwID0gZmFsc2UpOiBQcm9taXNlPElBcGlTZXJ2aWNlQm9vdHN0cmFwSW5mbz4ge1xuICAgICAgICBjb25zdCBsb2cgPSBnaWd5YS5sb2dnZXIuZ3JvdXAoYGJvb3RzdHJhcCBhcGkgc2VydmljZWApO1xuXG4gICAgICAgIC8vIENyZWF0aW5nIHRoZSBzdG9yYWdlIGFkYXB0ZXIgYXN5bmMgYWxsb3dzIGZvciB0aGUgcG9zc2liaWxpdHkgb2YgdXNpbmcgRmxhc2ggc3RvcmFnZS5cbiAgICAgICAgaWYgKCF0aGlzLl9zdG9yYWdlKSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZGVidWcoYGluaXQgc3RvcmFnZWApO1xuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZSA9IGF3YWl0IG5ldyBQcm9taXNlPGdpZ3lhLnV0aWxzLmxvY2FsU3RvcmFnZS5BYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXI+KHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmxvY2FsU3RvcmFnZS53YWl0Rm9yU2VydmljZShhZGFwdGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShhZGFwdGVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHdlYlNES0Jvb3RzdHJhcFJlc3BvbnNlO1xuICAgICAgICBpZiAodGhpcy5faGFzR21pZCAmJiAhZm9yY2VCb290c3RyYXApIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBhbHJlYWR5IGhhcyBnbWlkYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyghdGhpcy5faGFzR21pZCA/IGBubyBnbWlkIHNldGAgOiBgZm9yY2luZyBib290c3RyYXBgKTtcblxuICAgICAgICAgICAgLy8gb25seSBpZiBub3QgdXNpbmcgc3RvcmFnZSB0byBhdm9pZCBjb25mbGljdCB3aXRoIHByZXZpb3VzbHkgZXN0YWJsaXNoZWQgc2Vzc2lvbiBzZWNyZXQga2V5IChha2EgZ21pZClcbiAgICAgICAgICAgIGlmICghdGhpcy5fdXNlU3RvcmFnZSAmJiB0aGlzLmNhblNhdmVHbWlkQXNDb29raWUoKSkge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBzYXZlIGdtaWQgYXMgY29va2llYCk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB3ZWJTREtCb290c3RyYXBSZXNwb25zZSA9IGF3YWl0IHRoaXMuc2VuZFJlcXVlc3Q8eyBlcnJvckNvZGU6IG51bWJlciB9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnYWNjb3VudHMud2ViU2RrQm9vdHN0cmFwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczoge2FwaUtleTogdGhpcy5fYXBpS2V5fVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAod2ViU0RLQm9vdHN0cmFwUmVzcG9uc2UuZXJyb3JDb2RlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAnZXJyb3IgYm9vdHN0cmFwcGluZyBzZGtcXG4nICsgSlNPTi5zdHJpbmdpZnkod2ViU0RLQm9vdHN0cmFwUmVzcG9uc2UsIG51bGwsIDQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaChleCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGFjY291bnRzLndlYlNka0Jvb3RzdHJhcCBmYWlsZWQ6ICR7ZXh9YCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBzYXZlIGdtaWQgaW4gc3RvcmFnZWApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dXBXaXRoU3RvcmFnZShmb3JjZUJvb3RzdHJhcCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXNlU3RvcmFnZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGlja2V0SW5mbzogSUdtaWRUaWNrZXRSZXNwb25zZTtcbiAgICAgICAgbGV0IGhhc0dtaWQ6IHN0cmluZztcblxuICAgICAgICBpZiAodGhpcy5fdXNlU3RvcmFnZSkge1xuICAgICAgICAgICAgdGlja2V0SW5mbyA9IGF3YWl0IHRoaXMuZ2V0R21pZFRpY2tldCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGFzR21pZCA9IGdpZ3lhLnV0aWxzLmNvb2tpZS5nZXQoJ2hhc0dtaWQnKSB8fCB3ZWJTREtCb290c3RyYXBSZXNwb25zZT8uaGFzR21pZDtcbiAgICAgICAgICAgIHRoaXMuY2xlYW5TdG9yYWdlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBsb2cuZW5kKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpY2tldEluZm8sXG4gICAgICAgICAgICBoYXNHbWlkXG4gICAgICAgIH0gYXMgSUFwaVNlcnZpY2VCb290c3RyYXBJbmZvO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRHcm91cEFwaURvbWFpbihhcGlEb21haW4/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYmFzZURvbWFpbiA9IGdpZ3lhLl8uZ2V0QmFzZURvbWFpbihcbiAgICAgICAgICAgIGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5iYXNlRG9tYWlucyxcbiAgICAgICAgICAgIHRoaXMuX2RvbWFpblJlc29sdmVyLm9yaWdpbkRvbWFpbixcbiAgICAgICAgICAgIFsnZ2lneWEuY29tJywgJ2NuMS5zYXBjZG0uY24nLCBnaWd5YS5kZWZhdWx0QXBpRG9tYWluXVxuICAgICAgICApO1xuICAgICAgICBpZihiYXNlRG9tYWluICE9PSBnaWd5YS5kZWZhdWx0QXBpRG9tYWluKSB7XG4gICAgICAgICAgICB0aGlzLl9ncm91cEFwaURvbWFpblNlcnZpY2Uuc2V0KGFwaURvbWFpbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2FuU2F2ZUdtaWRBc0Nvb2tpZSgpOiBib29sZWFuIHtcbiAgICAgICAgLy8gYXBpIGRvbWFpbiB3aWxsIGJlIGZpcnN0IHBhcnR5IHdoZW4gc2l0ZSBoYXMgYSBjdXN0b20gYXBpIGRvbWFpbiBwcmVmaXguXG4gICAgICAgIGlmKEZsYWdTZXJ2aWNlLmFsd2F5c0NoZWNrQ29va2llU2F2ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RvbWFpblJlc29sdmVyLmlzQXBpRG9tYWluRmlyc3RQYXJ0eSB8fCB0aGlzLl9kb21haW5SZXNvbHZlci5jYW5TYXZlR21pZEFzQ29va2llO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kb21haW5SZXNvbHZlci5pc0FwaURvbWFpbkZpcnN0UGFydHkgfHwgZ2lneWEudXRpbHMuY29va2llLmNhblNhdmVDb29raWUoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgc2VuZFJlcXVlc3Q8VD4oZGF0YTogSUFwaVNlcnZpY2VSZXF1ZXN0KTogUHJvbWlzZTxUPiB7XG4gICAgICAgIC8vVE9ETzogaGFuZGxlIHRpbWVvdXRcbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ0FwaVNlcnZpY2U6IHJlcXVlc3QgZGF0YSBtdXN0IGhhcyBtZXRob2ROYW1lIGFuZCBwYXJhbXMnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtZXRob2ROYW1lID0gZGF0YS5tZXRob2ROYW1lO1xuICAgICAgICBsZXQgcGFyYW1zID0gZ2lneWEudXRpbHMub2JqZWN0LmNsb25lKGRhdGEucGFyYW1zLCB0cnVlLCB0cnVlKTtcblxuICAgICAgICBwYXJhbXMucGFnZVVSTCA9IHRoaXMuX2RvbWFpblJlc29sdmVyLm9yaWdpbkRvbWFpbjtcbiAgICAgICAgaWYgKHRoaXMuX3VzZVN0b3JhZ2UpIHtcbiAgICAgICAgICAgIHBhcmFtcy5nbWlkID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKFRva2VuS2V5cy5HTUlEKTtcbiAgICAgICAgICAgIHBhcmFtcy51Y2lkID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKFRva2VuS2V5cy5VQ0lEKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJhc2VEb21haW4gPSBgaHR0cHM6Ly8ke2F3YWl0IHRoaXMuZ2V0QXBpRG9tYWluKGRhdGEuc2V0dGluZ3M/Lm5hbWVzcGFjZSA/PyBkYXRhLm1ldGhvZE5hbWUpfWA7XG4gICAgICAgIGxldCByZXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXMgPSBhd2FpdCB0aGlzLl9yZXF1ZXN0UHJvdmlkZXIuc2VuZChiYXNlRG9tYWluLCBtZXRob2ROYW1lLCBwYXJhbXMsIGRhdGEuc2V0dGluZ3MsIGRhdGEuaGVhZGVycyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGlkRmFsbGJhY2spIHtcbiAgICAgICAgICAgICAgICByZXMgPSBlcnI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlkRmFsbGJhY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlcyA9IHRoaXMuc2VuZFJlcXVlc3RGYWxsYmFjayhiYXNlRG9tYWluLCBtZXRob2ROYW1lLCBwYXJhbXMsIGRhdGEsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzIGFzIFQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzZXR1cFdpdGhTdG9yYWdlKGZvcmNlQm9vdHN0cmFwOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2VHbWlkID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKFRva2VuS2V5cy5HTUlEKTtcbiAgICAgICAgY29uc3QgZXhwaXJhdGlvblRpbWUgPSBwYXJzZUludCh0aGlzLl9zdG9yYWdlLmdldEl0ZW0oVG9rZW5LZXlzLkdNSURfVElDS0VUX0VYUElSQVRJT05fVElNRSkpO1xuICAgICAgICBjb25zdCBpc0dtaWRFeGlzdHNJblN0b3JhZ2UgPSBCb29sZWFuKHN0b3JhZ2VHbWlkKTtcbiAgICAgICAgY29uc3QgZ21pZFZlcnNpb24gPSBnaWd5YS51dGlscy5hcnJheS5nZXRBcnJheUZyb21TdHJpbmcoc3RvcmFnZUdtaWQsICcuJyk/LlsxXVxuXG4gICAgICAgIGlmICgoZm9yY2VCb290c3RyYXAgJiYgZ21pZFZlcnNpb24gIT09IEhhc0dtaWQudmVyNCkgfHwgIWlzR21pZEV4aXN0c0luU3RvcmFnZSkge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGdldHRpbmcgZ21pZCBieSBlbmRwb2ludGApO1xuXG4gICAgICAgICAgICBjb25zdCB0b2tlbnMgPSBhd2FpdCB0aGlzLmdldElkcygpO1xuICAgICAgICAgICAgaWYgKCF0b2tlbnMuZ2NpZCB8fCAhdG9rZW5zLnVjaWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBgQXBpU2VydmljZSBnZXRJRHM6IHRoZSByZXF1ZXN0IHRvIHRoZSBlbmRwb2ludCBmYWlsZWRgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgc2V0dGluZyBnbWlkIGluIHN0b3JhZ2VgKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0oVG9rZW5LZXlzLkdNSUQsIHRva2Vucy5nY2lkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0oVG9rZW5LZXlzLlVDSUQsIHRva2Vucy51Y2lkKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aWNrZXRSZXMgPSB0aGlzLmNyZWF0ZVRpY2tldFJlc3BvbnNlKHRva2Vucy5nbWlkVGlja2V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUdtaWRUaWNrZXQodGlja2V0UmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghZ2lneWEudXRpbHMudmFsaWRhdGlvbi5pc0xhdGVyVGhhbk5vdyhleHBpcmF0aW9uVGltZSkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEdtaWRUaWNrZXRGcm9tU2VydmVyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgYWxyZWFkeSBoYXMgZ21pZCBpbiBzdG9yYWdlYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjcmVhdGVOZXcgLSBpZiBubyBnbWlkVGlja2V0IGV4aXN0cywgdGhlbiBjcmVhdGUgYSBuZXcgb25lIGluc3RlYWQgb2YgcmV0dXJuaW5nIHVuZGVmaW5lZFxuICAgIHB1YmxpYyBhc3luYyBnZXRHbWlkVGlja2V0KGNyZWF0ZU5ldyA9IGZhbHNlKTogUHJvbWlzZTxJR21pZFRpY2tldFJlc3BvbnNlPiB7XG4gICAgICAgIGxldCBnbWlkVGlja2V0ID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKFRva2VuS2V5cy5HTUlEX1RJQ0tFVCk7XG5cbiAgICAgICAgaWYgKCFnbWlkVGlja2V0ICYmICFjcmVhdGVOZXcpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBleHBpcmF0aW9uVGltZSA9IHBhcnNlSW50KHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShUb2tlbktleXMuR01JRF9USUNLRVRfRVhQSVJBVElPTl9USU1FKSk7XG4gICAgICAgICAgICBpZiAoIWNyZWF0ZU5ldyAmJiBnbWlkVGlja2V0ICYmIGdpZ3lhLnV0aWxzLnZhbGlkYXRpb24uaXNMYXRlclRoYW5Ob3coZXhwaXJhdGlvblRpbWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZ21pZFRpY2tldDogZ21pZFRpY2tldCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IHBhcnNlSW50KHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShUb2tlbktleXMuR01JRF9USUNLRVRfRVhQSVJBVElPTl9USU1FKSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGVHbWlkVGlja2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucmVmcmVzaEdtaWRUaWNrZXRGcm9tU2VydmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0aGlzIHNob3VsZCBiZSByZW1vdmVkIGluIHRoZSBmZWF0dXJlLCBpdCdzIG9ubHkgdXNlIGluIGNhc2Ugd2UgbmVlZCB0byBzZW5kIHJlbW92ZVxuICAgIC8vIGFuZCB0aGUgdG9wIGRvbWFpbiBpcyBub3QgdHJ1c3RlZFxuICAgIHB1YmxpYyBhc3luYyBzZW5kUmVwb3J0KG1lc3NhZ2U6IHN0cmluZywgZGV0YWlscz86IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSA8PSA1KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGFwaUtleTogZ2lneWEuYXBpS2V5LFxuICAgICAgICAgICAgcGFnZTogdGhpcy5fZG9tYWluUmVzb2x2ZXIub3JpZ2luRG9tYWluLFxuICAgICAgICAgICAgYnVpbGRWZXJzaW9uOiBnaWd5YS5idWlsZC52ZXJzaW9uLFxuICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgICAgICBzZGs6ICd3ZWInLFxuICAgICAgICB9XG4gICAgICAgIGlmIChkZXRhaWxzKSB7XG4gICAgICAgICAgICBwYXJhbXNbJ2RldGFpbHMnXSA9IEpTT04uc3RyaW5naWZ5KGRldGFpbHMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XG4gICAgICAgICAgICBtZXRob2ROYW1lOiAnc2RrLmVycm9yUmVwb3J0JyxcbiAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgfSBhcyBJQXBpU2VydmljZVJlcXVlc3RcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kUmVxdWVzdChyZXF1ZXN0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlZnJlc2hHbWlkVGlja2V0RnJvbVNlcnZlcigpOiBQcm9taXNlPElHbWlkVGlja2V0UmVzcG9uc2U+IHtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlZnJlc2hpbmcgZ21pZCB0aWNrZXRgKTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jcmVhdGVHbWlkVGlja2V0KHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShUb2tlbktleXMuR01JRCkpO1xuICAgICAgICBpZihyZXMgJiYgcmVzLmdtaWRUaWNrZXQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlR21pZFRpY2tldChyZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUdtaWRUaWNrZXQodGlja2V0OiBJR21pZFRpY2tldFJlc3BvbnNlKTogdm9pZCB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGB1cGRhdGluZyBnbWlkIHRpY2tldGAsIHRpY2tldCk7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShUb2tlbktleXMuR01JRF9USUNLRVQsIHRpY2tldC5nbWlkVGlja2V0KTtcbiAgICAgICAgdGhpcy5fc3RvcmFnZS5zZXRJdGVtKFRva2VuS2V5cy5HTUlEX1RJQ0tFVF9FWFBJUkFUSU9OX1RJTUUsIFN0cmluZyh0aWNrZXQuZXhwaXJhdGlvblRpbWUpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlbGV0ZUdtaWRUaWNrZXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UucmVtb3ZlSXRlbShUb2tlbktleXMuR01JRF9USUNLRVQpO1xuICAgICAgICB0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oVG9rZW5LZXlzLkdNSURfVElDS0VUX0VYUElSQVRJT05fVElNRSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGVhblN0b3JhZ2UoKSB7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UucmVtb3ZlSXRlbShUb2tlbktleXMuR01JRCk7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UucmVtb3ZlSXRlbShUb2tlbktleXMuVUNJRCk7XG4gICAgICAgIHRoaXMuZGVsZXRlR21pZFRpY2tldCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SWRzKCk6IFByb21pc2U8SVRva2VuSWRzPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0PElUb2tlbklkcz4oe1xuICAgICAgICAgICAgbWV0aG9kTmFtZTogJ3NvY2lhbGl6ZS5nZXRJRHMnLFxuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgQVBJS2V5OiB0aGlzLl9hcGlLZXksXG4gICAgICAgICAgICAgICAgaW5jbHVkZVRpY2tldDogdHJ1ZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVHbWlkVGlja2V0KGdtaWQ/OiBzdHJpbmcsIGV4cGlyZXMgPSBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MuZ21pZFRpY2tldEV4cGlyYXRpb24gfHwgMzYwMCk6IFByb21pc2U8SUdtaWRUaWNrZXRSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuX2FwaUtleSxcbiAgICAgICAgICAgIGV4cGlyZXMsXG4gICAgICAgIH0gYXMgSUdldEdtaWRUaWNrZXRSZXF1ZXN0O1xuXG4gICAgICAgIGlmIChnbWlkKSBwYXJhbXMuZ21pZCA9IGdtaWQ7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3Q8eyBnbWlkVGlja2V0OiBzdHJpbmcgfT4oe1xuICAgICAgICAgICAgbWV0aG9kTmFtZTogJ3NvY2lhbGl6ZS5nZXRHbWlkVGlja2V0JyxcbiAgICAgICAgICAgIHBhcmFtc1xuICAgICAgICB9KS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICBpZihyZXMgJiYgcmVzLmdtaWRUaWNrZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUaWNrZXRSZXNwb25zZShyZXMuZ21pZFRpY2tldCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGVzdGFibGlzaCBnbWlkVGlja2V0Jywge3Jlc3BvbnNlOiBKU09OLnN0cmluZ2lmeShyZXMpLCBtZXRob2Q6ICdzb2NpYWxpemUuZ2V0R21pZFRpY2tldCd9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUdtaWRUaWNrZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVUaWNrZXRSZXNwb25zZShnbWlkVGlja2V0OiBzdHJpbmcpOiBJR21pZFRpY2tldFJlc3BvbnNlIHtcbiAgICAgICAgbGV0IGN1cnJlbnRHbWlkVGlja2V0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGN1cnJlbnRHbWlkVGlja2V0RGF0ZS5zZXRIb3VycyhjdXJyZW50R21pZFRpY2tldERhdGUuZ2V0SG91cnMoKSArIEdNSURfVElDS0VUX0VYUElSQVRJT05fSU5URVJWQUwpO1xuICAgICAgICBjb25zdCBleHBpcmF0aW9uVGltZSA9IGN1cnJlbnRHbWlkVGlja2V0RGF0ZS5nZXRUaW1lKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdtaWRUaWNrZXQsXG4gICAgICAgICAgICBleHBpcmF0aW9uVGltZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNlbmRSZXF1ZXN0RmFsbGJhY2s8VD4oYmFzZURvbWFpbjogc3RyaW5nLCBtZXRob2ROYW1lOiBzdHJpbmcsIHBhcmFtczogYW55LCBkYXRhOiAgSUFwaVNlcnZpY2VSZXF1ZXN0LCBlcnI6IGFueSk6IFByb21pc2U8VD4ge1xuICAgICAgICBnaWd5YS5sb2dnZXIucmVwb3J0KCdBcGlTZXJ2aWNlOiBGYWxsYmFjayB3aXRoIGFwaSBmbGFncyB0dXJuZWQgb2ZmJywge2Jhc2VEb21haW4sIG1ldGhvZE5hbWUsIHBhcmFtcywgZGF0YSwgZXJyfSk7XG4gICAgICAgIGZvciAoY29uc3QgZmxhZyBvZiBGbGFnU2VydmljZS5hcGlGbGFncykge1xuICAgICAgICAgICAgZ2lneWEuXy5jb25maWcuZmxhZ3NbZmxhZ10gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuX3JlcXVlc3RQcm92aWRlci5zZW5kKGJhc2VEb21haW4sIG1ldGhvZE5hbWUsIHBhcmFtcywgZGF0YS5zZXR0aW5ncywgZGF0YS5oZWFkZXJzKSkgYXMgVDtcbiAgICB9XG59XG4iLCJpbXBvcnQge0ZsYWdTZXJ2aWNlfSBmcm9tICcuLi8uLi9HaWd5YS5Kcy9hcHAvU2VydmljZXMvRmxhZ1NlcnZpY2UnO1xuaW1wb3J0IHtzaXRlRGF0YX0gZnJvbSAnLi4vLi4vR2lneWEuSnMvYXBwL1NlcnZpY2VzL1NpdGVEYXRhJztcblxuZXhwb3J0IG5hbWVzcGFjZSBHbWlkUHJvdmlkZXIge1xuICAgIC8qKlxuICAgICAqIE1vZGVsIGZvciBIYXNHbWlkIGNvbnRleHQuXG4gICAgICovXG4gICAgZXhwb3J0IGludGVyZmFjZSBIYXNHbWlkQ29udGV4dCB7XG4gICAgICAgIHJlYWRvbmx5IGhhc0dtaWQ6IEhhc0dtaWQ7XG4gICAgICAgIHJlYWRvbmx5IGlzVjM6IGJvb2xlYW47XG4gICAgICAgIHJlYWRvbmx5IGlzVjQ6IGJvb2xlYW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR21pZCB2ZXJzaW9uLlxuICAgICAqL1xuICAgIGV4cG9ydCBlbnVtIEhhc0dtaWQge1xuICAgICAgICB2ZXIyID0gJ3ZlcjInLFxuICAgICAgICB2ZXIzID0gJ3ZlcjMnLFxuICAgICAgICB2ZXI0ID0gJ3ZlcjQnXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGFjdHVhbCB2ZXJzaW9uIGluIGNvb2tpZXMgb3IgZnJvbSBiYWNrZW5kIGNvbmZpZ3VyYXRpb25cbiAgICAgKiAoaXQgaXMgc2V0IHVwIGZvciBjbGllbnQgb24gdGhlIGJhY2tlbmQgc2lkZSBhcyBnaWd5YS5nbWlkVmVyc2lvbikuXG4gICAgICovXG4gICAgZXhwb3J0IGVudW0gVmVyc2lvblNlYXJjaFN0cmF0ZWd5IHtcbiAgICAgICAgY29va2llRmlyc3QgPSAnY29va2llRmlyc3QnLFxuICAgICAgICBjb25maWdGaXJzdCA9ICdjb25maWdGaXJzdCdcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gSGFzR21pZCBjb250ZXh0IHdpdGggYWxsIHVzZWZ1bCBpbmZvLlxuICAgICAqIEBwYXJhbSBnaWd5YU9iaiBHaWd5YSBnbG9iYWwgb2JqZWN0LlxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRIYXNHbWlkUGFyYW0oXG4gICAgICAgIGdpZ3lhT2JqOiB0eXBlb2YgZ2lneWFcbiAgICApOiBIYXNHbWlkQ29udGV4dCB7XG4gICAgICAgIGNvbnN0IGhhc0dtaWQgPSBnaWd5YU9iai51dGlscy5nZXRQYXJhbVZhbHVlKGRvY3VtZW50LmNvb2tpZSwgJ2hhc0dtaWQnLCAnOycpIHx8IGdldEdtaWRCb290c3RyYXBQYXJhbShnaWd5YU9iaik7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzVjM6IGhhc0dtaWQgPT09IEhhc0dtaWQudmVyMyxcbiAgICAgICAgICAgIGlzVjQ6IGhhc0dtaWQgPT09IEhhc0dtaWQudmVyNCxcbiAgICAgICAgICAgIGhhc0dtaWRcbiAgICAgICAgfSBhcyBIYXNHbWlkQ29udGV4dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gaW5kaWNhdGlvbiB3aGV0aGVyIGJvb3RzdHJhcCBuZWVkIG9yIG5vdC5cbiAgICAgKiBAcGFyYW0gZ2lneWFPYmogR2lneWEgZ2xvYmFsIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gc3RyYXRlZ3kgU2VhcmNoIGFjdHVhbCB2ZXJzaW9uIGluIGNvb2tpZXMgb3IgZnJvbSBiYWNrZW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldEdtaWRCb290c3RyYXBJbmRpY2F0aW9uVG9rZW4oXG4gICAgICAgIGdpZ3lhT2JqOiB0eXBlb2YgZ2lneWEsXG4gICAgICAgIHN0cmF0ZWd5OiBWZXJzaW9uU2VhcmNoU3RyYXRlZ3kgPSBWZXJzaW9uU2VhcmNoU3RyYXRlZ3kuY29va2llRmlyc3RcbiAgICApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB2ZXJzaW9uID0gZ2V0QWN0dWFsR21pZFZlcnNpb24oZ2lneWFPYmosIHN0cmF0ZWd5KTtcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRIYXNHbWlkVG9Cb290c3RyYXBJbmRpY2F0aW9uKGdpZ3lhT2JqLCB2ZXJzaW9uKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhY3R1YWwgdmVyc2lvbiBvZiB0aGUgZ21pZCB2ZXJzaW9uIGNvb2tpZSAodmVyMywgdmVyNCwgZXRjKS5cbiAgICAgKiBAcGFyYW0gZ2lneWFPYmogR2lneWEgZ2xvYmFsIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gc3RyYXRlZ3kgU2VhcmNoIGFjdHVhbCB2ZXJzaW9uIGluIGNvb2tpZXMgb3IgZnJvbSBiYWNrZW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldEFjdHVhbEdtaWRWZXJzaW9uKFxuICAgICAgICBnaWd5YU9iajogdHlwZW9mIGdpZ3lhLFxuICAgICAgICBzdHJhdGVneTogVmVyc2lvblNlYXJjaFN0cmF0ZWd5ID0gVmVyc2lvblNlYXJjaFN0cmF0ZWd5LmNvb2tpZUZpcnN0XG4gICAgKTogSGFzR21pZCB7XG4gICAgICAgIGNvbnN0IGhhc0dtaWRDb250ZXh0OiBIYXNHbWlkQ29udGV4dCA9IGdldEhhc0dtaWRQYXJhbShnaWd5YU9iaik7XG5cbiAgICAgICAgcmV0dXJuIHN0cmF0ZWd5ID09IFZlcnNpb25TZWFyY2hTdHJhdGVneS5jb29raWVGaXJzdFxuICAgICAgICAgICAgPyAoaGFzR21pZENvbnRleHQuaGFzR21pZCB8fCBnaWd5YU9iai5nbWlkVmVyc2lvbiB8fCAndmVyMycpIGFzIEhhc0dtaWRcbiAgICAgICAgICAgIDogKGdpZ3lhT2JqLmdtaWRWZXJzaW9uIHx8IGhhc0dtaWRDb250ZXh0Lmhhc0dtaWQgfHwgJ3ZlcjMnKSBhcyBIYXNHbWlkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiBmbGFnIGlmIHRoZSB0b2tlbiBpcyBhbGxvd2VkIHRvIGJlIHJlZ2VuZXJhdGVkLlxuICAgICAqIChBbGxvd2VkIG9ubHkgaW4gY2FzZSB3aGVuIHNlc3Npb24gaXMgbm90IGFjdGl2ZSBhbmQgZ21pZCB0b2tlbiBpcyBub3QgbGF0ZXN0LilcbiAgICAgKiBAcGFyYW0gZ2lneWFPYmogR2lneWEgZ2xvYmFsIG9iamVjdC5cbiAgICAgKiBAcGFyYW0gaXNTZXNzaW9uQWN0aXZlIElzIHNlc3Npb24gYWN0aXZlIGluZGljYXRvci5cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gc2hvdWxkUmVnZW5lcmF0ZUdtaWQoXG4gICAgICAgIGdpZ3lhT2JqOiB0eXBlb2YgZ2lneWEsXG4gICAgICAgIGlzU2Vzc2lvbkFjdGl2ZTogYm9vbGVhblxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBoYXNMYXRlc3RWZXI0R21pZCA9IGhhc0xhdGVzdEdtaWRWZXJzaW9uKGdpZ3lhT2JqKTtcbiAgICAgICAgcmV0dXJuICFpc1Nlc3Npb25BY3RpdmUgJiYgKHNob3VsZEZvcmNlQm9vdHN0cmFwKCkgfHwgICFoYXNMYXRlc3RWZXI0R21pZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGZsYWcgd2hldGhlciBoYXNHbWlkIGNvb2tpZSBoYXMgbGF0ZXN0IHZlcnNpb24uXG4gICAgICogQHBhcmFtIGdpZ3lhT2JqIEdpZ3lhIGdsb2JhbCBvYmplY3QuXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhc0xhdGVzdEdtaWRWZXJzaW9uKFxuICAgICAgICBnaWd5YU9iajogdHlwZW9mIGdpZ3lhXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGhhc0dtaWRDb250ZXh0OiBIYXNHbWlkQ29udGV4dCA9IGdldEhhc0dtaWRQYXJhbShnaWd5YU9iaik7XG4gICAgICAgIHJldHVybiBCb29sZWFuKGhhc0dtaWRDb250ZXh0Lmhhc0dtaWQpICYmIGhhc0dtaWRDb250ZXh0LmlzVjQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRIYXNHbWlkVG9Cb290c3RyYXBJbmRpY2F0aW9uKGdpZ3lhT2JqOiB0eXBlb2YgZ2lneWEsIGdtaWRWZXJzaW9uOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gKGdpZ3lhT2JqLnBhcnRuZXJTZXR0aW5ncy5jdXN0b21BUElEb21haW5QcmVmaXggfHwgJ19naWd5YScpICsgYF8ke2dtaWRWZXJzaW9ufWA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0R21pZEJvb3RzdHJhcFBhcmFtKGdpZ3lhT2JqOiB0eXBlb2YgZ2lneWEpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBnbWlkQm9vdHN0cmFwQ29va2llID0gZ2lneWFPYmoudXRpbHMuY29va2llLmdldChgZ2lnX2Jvb3RzdHJhcF8ke2dpZ3lhT2JqLmFwaUtleX1gKTtcbiAgICAgICAgcmV0dXJuIGdpZ3lhT2JqLnV0aWxzLmFycmF5LmdldEFycmF5RnJvbVN0cmluZyhnbWlkQm9vdHN0cmFwQ29va2llLCAnXycpPy5wb3AoKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gc2hvdWxkRm9yY2VCb290c3RyYXAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBGbGFnU2VydmljZS5mb3JjZVdlYlNka0Jvb3RzdHJhcCAmJiAhc2l0ZURhdGEuZGlkRm9yY2VkQm9vdHN0cmFwO1xuICAgIH1cbn1cbiIsImltcG9ydCB7bG9jYWxJbmZvfSBmcm9tIFwiLi4vLi4vR2lneWEuSnMvYXBwL0xvY2FsSW5mb1wiO1xuXG5jb25zdCBHcm91cEFwaURvbWFpbktleSA9ICdhcGlEb21haW4nO1xuZXhwb3J0IGNsYXNzIEdyb3VwQXBpRG9tYWluU2VydmljZSB7XG4gICAgcHJpdmF0ZSBfY29va2llTmFtZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3Nzb0tleSA9IGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXksXG4gICAgICAgIHByaXZhdGUgX3N0b3JhZ2UgPSBnaWd5YS51dGlscy5sb2NhbFN0b3JhZ2UuaW5pdGlhbGl6ZUFkYXB0ZXIoZ2lneWEudXRpbHMubG9jYWxTdG9yYWdlLkNvb2tpZVN0b3JhZ2VBZGFwdGVyKSxcbiAgICAgICAgcHJpdmF0ZSBfcGFnZURvbWFpbiA9IGxvY2FsSW5mby5wYWdlRG9tYWluXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2Nvb2tpZU5hbWUgPSBgJHtHcm91cEFwaURvbWFpbktleX1fJHt0aGlzLl9zc29LZXl9YDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3NvS2V5ID8gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHRoaXMuX2Nvb2tpZU5hbWUpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0KGFwaURvbWFpbjogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLl9zc29LZXkpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBzZXR0aW5nIGFzIGdyb3VwIGFwaSBkb21haW4gZm9yICR7dGhpcy5fc3NvS2V5fWApO1xuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuX2Nvb2tpZU5hbWUpO1xuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5zZXRJdGVtKHRoaXMuX2Nvb2tpZU5hbWUsIGFwaURvbWFpbiwgdW5kZWZpbmVkLCB0aGlzLl9wYWdlRG9tYWluKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7QXBpQWRhcHRlclNldHRpbmdzfSBmcm9tIFwiLi4vLi4vR2lneWEuSnMvaW50ZXJmYWNlcy9JQXBpQWRhcHRlclwiO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSBcIi4uLy4uL0dpZ3lhLkpzL2FwcC9HU0Vycm9yc1wiO1xuaW1wb3J0IHtSZXF1ZXN0VHlwZSwgVXJsTGVuZ3RoRmllbGRzfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuaW1wb3J0IHtsb2NhbEluZm99IGZyb20gXCIuLi8uLi9HaWd5YS5Kcy9hcHAvTG9jYWxJbmZvXCI7XG5pbXBvcnQge3NlbnNpdGl2ZVBhcmFtc092ZXJyaWRlfSBmcm9tIFwiLi4vLi4vLi4vYWNjb3VudHMvY29uc3RhbnRzXCI7XG5pbXBvcnQge0ZsYWdTZXJ2aWNlfSBmcm9tICcuLi8uLi9HaWd5YS5Kcy9hcHAvU2VydmljZXMvRmxhZ1NlcnZpY2UnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVxdWVzdCB7XG5cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBiYXNlRG9tYWluOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBtZXRob2Q6IHN0cmluZyxcbiAgICAgICAgcHVibGljIHBhcmFtczogT2JqZWN0LFxuICAgICAgICBwdWJsaWMgc2V0dGluZ3M6IEFwaUFkYXB0ZXJTZXR0aW5ncyA9IHt9LFxuICAgICkge1xuICAgIH1cblxuICAgIHByb3RlY3RlZCByZXRyeVRpbWVySUQ6IG51bWJlcjtcbiAgICBwcm90ZWN0ZWQgcmV0cnk6IG51bWJlciA9IDA7XG5cbiAgICBwdWJsaWMgYXN5bmMgc2VuZChpZ25vcmVDYWNoZVRpbWVvdXQ/OiBib29sZWFuKSB7XG4gICAgICAgIGlmKCFsb2NhbEluZm8uaXNPbkxpbmUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV0d29ya0Vycm9yUmVzcG9uc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzUmVxdWVzdFBhdGhNYW5pcHVsYXRlZCgpKSAge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oYEFib3J0aW5nIFJlcXVlc3QgZm9yICR7dGhpcy5tZXRob2R9LiBQYXRoIG1hbmlwdWxhdGlvbiBkZXRlY3RlZC5gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnBhcmFtcyA9IGdpZ3lhLnV0aWxzLm9iamVjdC5kZWNvZGVPYmplY3RLZXlzKHRoaXMucGFyYW1zKTtcbiAgICAgICAgfSBjYXRjaChleCkge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmVycm9yKCdSZXF1ZXN0IEFQSSBFcnJvciAtIEZhaWxlZCB0byBkZWNvZGUgb2JqZWN0IGtleXMnLCB7XG4gICAgICAgICAgICAgICAgZXhjZXB0aW9uOiBleCxcbiAgICAgICAgICAgICAgICByZXF1ZXN0UGFyYW1zOiBKU09OLnN0cmluZ2lmeSh0aGlzLnBhcmFtcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGREZWZhdWx0UGFyYW1zKCk7XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGVyZm9ybVNlbmQodGhpcy5nZXRSZXF1ZXN0VHlwZSgpLCBpZ25vcmVDYWNoZVRpbWVvdXQpO1xuICAgIH07XG5cbiAgICBwdWJsaWMgaGFuZGxlUmVzcG9uc2UocmVzcG9uc2U6IE9iamVjdCkge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jYWNoZVRpbWVvdXQpIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLnNlc3Npb25DYWNoZS5zZXQodGhpcy5nZXRDYWNoZUtleSgpLCByZXNwb25zZVsnZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuT0sgPyByZXNwb25zZSA6IG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJldHJ5VGltZXJJRCAhPSBudWxsKSB7XG4gICAgICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lcklEKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZVsnZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuRGF0YV9QZW5kaW5nKSB7XG4gICAgICAgICAgICBsZXQgdCA9IHRoaXMuZ2V0RGF0YVBlbmRpbmdUaW1lb3V0KHRoaXMucmV0cnkrKyk7XG4gICAgICAgICAgICBpZiAodCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyByZXRyeVxuICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKCk7XG4gICAgICAgICAgICAgICAgfSwgdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VXJsID0gKCkgPT4gZ2lneWEuXy5VcmkucGFyc2UoYCR7dGhpcy5iYXNlRG9tYWlufS8ke3RoaXMubWV0aG9kfWApO1xuXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGRpc3Bvc2UoKTtcblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBwZXJmb3JtU2VuZChyZXF1ZXN0VHlwZTogUmVxdWVzdFR5cGUsIGlnbm9yZUNhY2hlVGltZW91dD86IGJvb2xlYW4pO1xuXG4gICAgcHJvdGVjdGVkIGdldENhY2hlS2V5KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLm1ldGhvZH1fJHtnaWd5YS51dGlscy5rZXlWYWx1ZS5zZXJpYWxpemUodGhpcy5wYXJhbXMpfWA7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldEZ1bGxVcmwoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5nZXRVcmwoKTtcblxuICAgICAgICByZXR1cm4gdXJsLmFkZFRvU2VhcmNoKHRoaXMuZ2V0RmxhdHRlblBhcmFtcygpKS5ocmVmO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhZGREZWZhdWx0UGFyYW1zKCkge1xuICAgICAgICB0aGlzLnBhcmFtc1snc2RrJ10gPSAnanNfJyArIChnaWd5YS5idWlsZD8udmVyc2lvbiB8fCAnJyk7XG4gICAgICAgIHRoaXMucGFyYW1zWydzZGtCdWlsZCddID0gZ2lneWEuYnVpbGQ/Lm51bWJlciB8fCAwO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBuZXR3b3JrRXJyb3JSZXNwb25zZSgpO1xuXG4gICAgcHJpdmF0ZSBpc1JlcXVlc3RQYXRoTWFuaXB1bGF0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVybCgpLmhyZWYudG9Mb3dlckNhc2UoKSAhPT0gYCR7dGhpcy5iYXNlRG9tYWlufS8ke3RoaXMubWV0aG9kfWAudG9Mb3dlckNhc2UoKSB8fCB0aGlzLmdldFVybCgpLnNlYXJjaC5sZW5ndGggPiAwIDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldERhdGFQZW5kaW5nVGltZW91dChyZXRyeSkge1xuICAgICAgICBpZiAocmV0cnkgPD0gNCkgcmV0dXJuIDUwMDtcbiAgICAgICAgaWYgKHJldHJ5IDw9IDQgKyA0KSByZXR1cm4gMTAwMDtcbiAgICAgICAgaWYgKHJldHJ5IDw9IDQgKyA0ICsgMTMpIHJldHVybiAyMDAwO1xuICAgICAgICBpZiAocmV0cnkgPD0gNCArIDQgKyAxMyArIDE4KSByZXR1cm4gNTAwMDtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UmVxdWVzdFR5cGUoKTogUmVxdWVzdFR5cGUge1xuICAgICAgICBpZiAodGhpcy5pc0ZvcmNlUG9zdCB8fCB0aGlzLmhhdmVTZW5zaXRpdmVQYXJhbXMoKSB8fCB0aGlzLnJlcXVlc3RPdmVyc2l6ZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVxdWVzdFR5cGUuUE9TVDtcbiAgICAgICAgfVxuXG4gICAgICAgcmV0dXJuIFJlcXVlc3RUeXBlLkdFVDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBpc0ZvcmNlUG9zdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuZm9yY2VQb3N0O1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVxdWVzdE92ZXJzaXplKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCByZXFVcmxMZW5ndGg6IGFueSA9IHRoaXMuZ2V0UmVxdWVzdFVybExlbmd0aCgpO1xuICAgICAgICBjb25zdCB7ZXh0cmFMZW5ndGgsIG1heExlbmd0aH0gPSB0aGlzLmdldFVybExlbmd0aEZpZWxkcygpO1xuXG4gICAgICAgIHJldHVybiByZXFVcmxMZW5ndGggKyBleHRyYUxlbmd0aCA+IG1heExlbmd0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFJlcXVlc3RVcmxMZW5ndGgoKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgdXJsID0gdGhpcy5nZXRVcmwoKTtcblxuICAgICAgICByZXR1cm4gKHVybC5ocmVmICsgZ2lneWEudXRpbHMua2V5VmFsdWUuc2VyaWFsaXplKHRoaXMuZ2V0RmxhdHRlblBhcmFtcygpKSkubGVuZ3RoO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VXJsTGVuZ3RoRmllbGRzKCk6IFVybExlbmd0aEZpZWxkcyB7XG4gICAgICAgIGxldCBleHRyYUxlbmd0aCA9IDA7IC8vODAwMDtcbiAgICAgICAgY29uc3QgbWF4TGVuZ3RoID0gNCAqIDEwMjQ7XG4gICAgICAgIGlmIChnaWd5YS5sb2NhbEluZm8uaXNJRSB8fCBnaWd5YS5sb2NhbEluZm8uaXNFZGdlTGVnYWN5KSB7XG4gICAgICAgICAgICBleHRyYUxlbmd0aCA9IDIgKiAxMDI0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtleHRyYUxlbmd0aCwgbWF4TGVuZ3RofTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEZsYXR0ZW5QYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5rZXlWYWx1ZS5kZXNlcmlhbGl6ZShnaWd5YS51dGlscy5rZXlWYWx1ZS5zZXJpYWxpemUodGhpcy5wYXJhbXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhdmVTZW5zaXRpdmVQYXJhbXMoKTogYm9vbGVhbiB7XG4gICAgICAgIGZvciAoY29uc3QgcGFyYW0gb2Ygc2Vuc2l0aXZlUGFyYW1zT3ZlcnJpZGU/LnNwbGl0KCd8JykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtcz8uaGFzT3duUHJvcGVydHkocGFyYW0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIlxuZXhwb3J0IGNsYXNzIFJlcXVlc3RQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3hoclJlcXVlc3QgPSBnaWd5YS5YaHJSZXF1ZXN0LFxuICAgICAgICBwdWJsaWMgdGltZW91dCA9IDE1MDAwLFxuICAgICAgICBwcml2YXRlIF93aW4gPSB3aW5kb3dcbiAgICApIHt9XG5cbiAgICBhc3luYyBzZW5kKGJhc2VEb21haW4sIG1ldGhvZE5hbWUsIHBhcmFtcywgc2V0dGluZ3MsIGhlYWRlcnMgPSB7fSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyB0aGlzLl94aHJSZXF1ZXN0KGJhc2VEb21haW4sIG1ldGhvZE5hbWUsIHBhcmFtcywgc2V0dGluZ3MsIGhlYWRlcnMpO1xuICAgICAgICAgICAgY29uc3QgdGltZW91dElkID0gdGhpcy5fd2luLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdCgnQVBJIHJlcXVlc3QgdGltZW91dCcpO1xuICAgICAgICAgICAgfSwgdGhpcy50aW1lb3V0KTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGF3YWl0IHJlcXVlc3Quc2VuZCgpKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoJ1hIUiByZXF1ZXN0IGZhaWxlZCcsIHttZXRob2ROYW1lLCBwYXJhbXMsIHNldHRpbmdzLCBlcnJ9KTtcbiAgICAgICAgICAgICAgICByZWplY3QoYFJlcXVlc3QgZm9yICR7bWV0aG9kTmFtZX0gZmFpbGVkYCk7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dpbi5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtSZXF1ZXN0fSBmcm9tICcuL1JlcXVlc3QnO1xuaW1wb3J0IHtBcGlBZGFwdGVyU2V0dGluZ3N9IGZyb20gXCIuLi8uLi9HaWd5YS5Kcy9pbnRlcmZhY2VzL0lBcGlBZGFwdGVyXCI7XG5pbXBvcnQge0dTRXJyb3JzfSBmcm9tIFwiLi4vLi4vR2lneWEuSnMvYXBwL0dTRXJyb3JzXCI7XG5pbXBvcnQge1JlcXVlc3RUeXBlfSBmcm9tIFwiLi9pbnRlcmZhY2VzXCI7XG5pbXBvcnQgR2lneWFSZXNwb25zZSBmcm9tIFwiZ2lneWEvZGlzdC9saWIvaW50ZXJmYWNlcy9naWd5YS1yZXNwb25zZVwiO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSBcIi4uLy4uL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9GbGFnU2VydmljZVwiO1xuXG5leHBvcnQgY2xhc3MgWGhyUmVxdWVzdCBleHRlbmRzIFJlcXVlc3Qge1xuICAgIHByaXZhdGUgeGh0dHA7XG4gICAgcHJpdmF0ZSBoZWFkZXJzOiB7W2tleTogc3RyaW5nXTogc3RyaW5nfSA9IHt9O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGJhc2VEb21haW46IHN0cmluZyxcbiAgICAgICAgbWV0aG9kOiBzdHJpbmcsXG4gICAgICAgIHBhcmFtczogT2JqZWN0LFxuICAgICAgICBzZXR0aW5nczogQXBpQWRhcHRlclNldHRpbmdzID0ge30sXG4gICAgICAgIHJlcXVlc3RIZWFkZXJzID0ge31cbiAgICApIHtcbiAgICAgICAgc3VwZXIoYmFzZURvbWFpbiwgbWV0aG9kLCBwYXJhbXMsIHNldHRpbmdzKTtcbiAgICAgICAgdGhpcy54aHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB0aGlzLnNldFJlcXVlc3RIZWFkZXJzKHJlcXVlc3RIZWFkZXJzKTtcbiAgICB9O1xuXG4gICAgcHJvdGVjdGVkIHBlcmZvcm1TZW5kKHJlcXVlc3RUeXBlOiBSZXF1ZXN0VHlwZSwgaWdub3JlQ2FjaGVUaW1lb3V0PzogYm9vbGVhbikge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3RQb3N0UGFyYW1zOiBzdHJpbmc7XG4gICAgICAgICAgICBsZXQgcmVxVXJsID0gdGhpcy5nZXRGdWxsVXJsKCk7XG5cbiAgICAgICAgICAgIC8vIFNldCByZXF1ZXN0IG9uIGxvYWRcbiAgICAgICAgICAgIHRoaXMueGh0dHAub25sb2FkID0gKCkgPT4gdGhpcy5vblJlcXVlc3RMb2FkKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAvLyBTZXQgcmVxdWVzdCBvbiBlcnJvclxuICAgICAgICAgICAgdGhpcy54aHR0cC5vbmVycm9yID0gKCkgPT4gcmVqZWN0KHRoaXMuY3JlYXRlRXJyb3JGcm9tUmVzcG9uc2UoJ1hIUl9GQUlMVVJFIC0gaHR0cCByZXF1ZXN0IG9uZXJyb3IgZXZlbnQnKSk7XG4gICAgICAgICAgICAvLyBBbGxvdyBYTUxIdHRwIHJlcXVlc3QgdG8gYXR0YWNoIGNvb2tpZXNcbiAgICAgICAgICAgIHRoaXMueGh0dHAud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKHJlcXVlc3RUeXBlID09PSBSZXF1ZXN0VHlwZS5QT1NUKSB7XG4gICAgICAgICAgICAgICAgcmVxVXJsID0gdGhpcy5nZXRVcmwoKS5ocmVmO1xuICAgICAgICAgICAgICAgIC8vIE9wdGlvbiByZXF1ZXN0IGdvIG91dCB3aXRob3V0IGFwaUtleSBhbmQgZmFpbHNcbiAgICAgICAgICAgICAgICAvLyB3ZSBhZGQgaXQgaW4gY2FzZSBoZWFkZXJzIGhhcyBjaGFuZ2VcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNIZWFkZXJzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxVXJsICs9IGA/QVBJS2V5PSR7dGhpcy5wYXJhbXNbJ0FQSUtleSddfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcXVlc3RQb3N0UGFyYW1zID0gZ2lneWEudXRpbHMua2V5VmFsdWUuc2VyaWFsaXplKHRoaXMucGFyYW1zKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMueGh0dHAub3BlbihyZXF1ZXN0VHlwZSwgcmVxVXJsLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gQWRkIHJlcXVpcmVkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3RcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuaGVhZGVycykuZm9yRWFjaChoZWFkZXIgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMueGh0dHAuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIsIHRoaXMuaGVhZGVyc1toZWFkZXJdKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnhodHRwLnNlbmQocmVxdWVzdFBvc3RQYXJhbXMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBoYXNIZWFkZXJzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISFPYmplY3Qua2V5cyh0aGlzLmhlYWRlcnMpLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uUmVxdWVzdExvYWQocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGxldCBqc29uUmVzcG9uc2U6IEdpZ3lhUmVzcG9uc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBqc29uUmVzcG9uc2UgPSBKU09OLnBhcnNlKHRoaXMueGh0dHAucmVzcG9uc2VUZXh0KSBhcyBHaWd5YVJlc3BvbnNlO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIucmVwb3J0KCdYSFJfRkFJTFVSRSAtIGZhaWxlZCB0byBwYXJzZSB0aGUgcmVzcG9uc2Ugb2JqZWN0Jywge3Jlc3BvbnNlVGV4dDogdGhpcy54aHR0cC5yZXNwb25zZVRleHR9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnhodHRwLnJlYWR5U3RhdGUgIT09IDQgfHwgIWpzb25SZXNwb25zZT8uc3RhdHVzQ29kZSkge1xuICAgICAgICAgICAgcmVqZWN0KHRoaXMuY3JlYXRlRXJyb3JGcm9tUmVzcG9uc2UoJ1hIUl9GQUlMVVJFIC0gaHR0cCByZXF1ZXN0IGZhaWxlZCcpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKHRoaXMuaGFuZGxlUmVzcG9uc2UoanNvblJlc3BvbnNlKSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgY3JlYXRlRXJyb3JGcm9tUmVzcG9uc2UobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICBzdGF0dXM6IHRoaXMueGh0dHAuc3RhdHVzLFxuICAgICAgICAgICAgcmVhZHlTdGF0ZTogdGhpcy54aHR0cC5yZWFkeVN0YXRlLFxuICAgICAgICAgICAgcmVzcG9uc2VUZXh0OiB0aGlzLnhodHRwLnJlc3BvbnNlVGV4dFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFkZERlZmF1bHRQYXJhbXMoKSB7XG4gICAgICAgIHN1cGVyLmFkZERlZmF1bHRQYXJhbXMoKTtcbiAgICAgICAgdGhpcy5wYXJhbXNbJ2Zvcm1hdCddID0gJ2pzb24nO1xuICAgICAgICBpZiAoRmxhZ1NlcnZpY2UudXNlSHR0cFN0YXR1c0NvZGUgJiYgdGhpcy5zZXR0aW5ncy51c2VIdHRwU3RhdHVzQ29kZXMpIHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1zWydodHRwU3RhdHVzQ29kZXMnXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgbmV0d29ya0Vycm9yUmVzcG9uc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVJlc3BvbnNlKHtcbiAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuTkVUV09SS19FUlJPUixcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZTogJ05ldHdvcmtfZXJyb3InLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZGlzcG9zZSgpIHt9O1xuXG4gICAgcHJpdmF0ZSBzZXRSZXF1ZXN0SGVhZGVycyhyZXF1ZXN0SGVhZGVyczogb2JqZWN0KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHN1cHBvcnRlZEhlYWRlcnMgPSBbJ0F1dGhvcml6YXRpb24nXTtcblxuICAgICAgICBPYmplY3Qua2V5cyhyZXF1ZXN0SGVhZGVycykuZmlsdGVyKGhlYWRlciA9PiBzdXBwb3J0ZWRIZWFkZXJzLmluZGV4T2YoaGVhZGVyKSAhPT0gLTEpLmZvckVhY2goaGVhZGVyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlclZhbHVlID0gcmVxdWVzdEhlYWRlcnNbaGVhZGVyXTtcbiAgICAgICAgICAgIGlmIChCb29sZWFuKGhlYWRlclZhbHVlKSAmJiB0eXBlb2YgaGVhZGVyVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJzW2hlYWRlcl0gPSBoZWFkZXJWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQXBpQWRhcHRlclNldHRpbmdzLCBJR21pZFRpY2tldFJlc3BvbnNlIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvaW50ZXJmYWNlcy9JQXBpQWRhcHRlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURvbWFpblJlc29sdmVyIGV4dGVuZHMgSUdyb3VwQXBpRG9tYWluSW5mbyB7XG4gICAgb3JpZ2luRG9tYWluOiBzdHJpbmc7XG4gICAgZ2V0QXBpRG9tYWluOiAobmFtZXNwYWNlPzogc3RyaW5nKSA9PiBzdHJpbmc7XG4gICAgaXNBcGlEb21haW5GaXJzdFBhcnR5OiBib29sZWFuO1xuICAgIGNhblNhdmVHbWlkQXNDb29raWU/OiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBJQXBpU2VydmljZUluaXRJbmZvIGV4dGVuZHMgSUdyb3VwQXBpRG9tYWluSW5mbyB7XG4gICAgYXBpRG9tYWluOiBzdHJpbmc7XG4gICAgY2FuU2F2ZUdtaWRBc0Nvb2tpZT86IGJvb2xlYW47XG59XG5leHBvcnQgaW50ZXJmYWNlIElHcm91cEFwaURvbWFpbkluZm8ge1xuICAgIGlzR3JvdXBBcGlEb21haW46IGJvb2xlYW47XG4gICAgaGFzR3JvdXBBcGlEb21haW5DaGFuZ2VkOiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBJQXBpU2VydmljZVJlcXVlc3Qge1xuICAgIG1ldGhvZE5hbWU6IHN0cmluZztcbiAgICBwYXJhbXM6IE9iamVjdDtcbiAgICBzZXR0aW5ncz86IEFwaUFkYXB0ZXJTZXR0aW5ncztcbiAgICBoZWFkZXJzPzoge1trZXk6IHN0cmluZ106IHN0cmluZ31cbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUFwaVNlcnZpY2Uge1xuICAgIGJvb3RzdHJhcChmb3JjZT86IGJvb2xlYW4pOiBQcm9taXNlPElBcGlTZXJ2aWNlQm9vdHN0cmFwSW5mbz47XG4gICAgc2VuZFJlcXVlc3Q8VD4oZGF0YTogSUFwaVNlcnZpY2VSZXF1ZXN0KTogUHJvbWlzZTxUPjtcbiAgICBnZXRHbWlkVGlja2V0KGNyZWF0ZU5ldz86IGJvb2xlYW4pOiBQcm9taXNlPElHbWlkVGlja2V0UmVzcG9uc2U+O1xuICAgIGdldEFwaURvbWFpbihtZXRob2ROYW1lPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIHNldEdyb3VwQXBpRG9tYWluKGFwaURvbWFpbj86IHN0cmluZyk7XG4gICAgc2VuZFJlcG9ydChtZXNzYWdlOiBzdHJpbmcsIGRldGFpbHM/OiBhbnkpOiBQcm9taXNlPHZvaWQ+O1xufVxuZXhwb3J0IGludGVyZmFjZSBJQXBpU2VydmljZUJvb3RzdHJhcEluZm8ge1xuICAgIHRpY2tldEluZm8/OiBJR21pZFRpY2tldFJlc3BvbnNlO1xuICAgIGhhc0dtaWQ/OiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIElUb2tlbklkcyB7XG4gICAgZ2NpZDogc3RyaW5nO1xuICAgIHVjaWQ6IHN0cmluZztcbiAgICBnbWlkVGlja2V0OiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIElHZXRHbWlkVGlja2V0UmVxdWVzdCB7XG4gICAgYXBpS2V5OiBzdHJpbmc7XG4gICAgZXhwaXJlczogbnVtYmVyO1xuICAgIGdtaWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdFNldHRpbmdzIHtcbiAgICBmb3JjZVBvc3Q/OiBib29sZWFuO1xuICAgIGZvcmNlR2lneWFEb21haW4/OiBib29sZWFuOyAvLyBmb3IgYW5vbnltb3VzIHVzZXJzXG4gICAgZGlzYWJsZUNhY2hlPzogYm9vbGVhbjtcbiAgICByZXF1aXJlc1Nlc3Npb24/OiAoKSA9PiBib29sZWFuO1xuICAgIGNsZWFyU2Vzc2lvbj86IGJvb2xlYW47XG4gICAgY2xlYXJTZXNzaW9uQ29uZGl0aW9uPzogKHBhcmFtczogYW55KSA9PiBib29sZWFuO1xuICAgIGNhY2hlVGltZW91dD86IG51bWJlcjtcbiAgICBqc1Nka1JlcXVlc3RJZD86IHN0cmluZztcbiAgICBwcmVwcm9jZXNzb3I/OiAocGFyYW1zLCBjYWxsYmFjazogKCkgPT4gdm9pZCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVcmxMZW5ndGhGaWVsZHMge1xuICAgIGV4dHJhTGVuZ3RoOiBudW1iZXIsXG4gICAgbWF4TGVuZ3RoOiBudW1iZXIsXG59XG5cbmV4cG9ydCBlbnVtIFJlcXVlc3RUeXBlIHtcbiAgICBHRVQgPSAnR0VUJyxcbiAgICBQT1NUID0gJ1BPU1QnXG59XG4iLCJpbXBvcnQgeyBCYXNlUmVxdWVzdCB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvQmFzZVJlcXVlc3QnO1xuaW1wb3J0IHsgQXBpQWRhcHRlclNldHRpbmdzIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvaW50ZXJmYWNlcy9JQXBpQWRhcHRlcic7XG5leHBvcnQgY2xhc3MgQXBpUmVxdWVzdCBleHRlbmRzIEJhc2VSZXF1ZXN0IHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbWV0aG9kTmFtZTogc3RyaW5nLCBwdWJsaWMgcGFyYW1zOiBPYmplY3QsIHB1YmxpYyBjYWxsYmFjazogKHJlcykgPT4gdm9pZCwgcHVibGljIHNldHRpbmdzOiBBcGlBZGFwdGVyU2V0dGluZ3MgPSB7fSkge1xuICAgICAgICBzdXBlcihnaWd5YS5kZWZhdWx0QXBpRG9tYWluLCBtZXRob2ROYW1lLCBwYXJhbXMsIHNldHRpbmdzKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2VuZEFjdGlvbihpZ25vcmVDYWNoZVRpbWVvdXQ/OiBib29sZWFuKSB7XG4gICAgICAgIGdpZ3lhLnV0aWxzLm9iamVjdC5hZGQodGhpcy5wYXJhbXMsIHRoaXMuZ2V0QXV0aFBhcmFtcygpKTtcbiAgICAgICAgZ2lneWEuXy5hcGlBZGFwdGVycy53ZWIuYXBpU2VydmljZVxuICAgICAgICAgICAgLnNlbmRSZXF1ZXN0KHRoaXMuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4odGhpcy5jYWxsYmFjaylcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGpzb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2ROYW1lOiB0aGlzLm1ldGhvZE5hbWUsXG4gICAgICAgICAgICBwYXJhbXM6IHRoaXMucGFyYW1zLFxuICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmdldEhlYWRlcnMoKVxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEFwaUFkYXB0ZXJTZXR0aW5ncyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2ludGVyZmFjZXMvSUFwaUFkYXB0ZXInO1xuaW1wb3J0IHtnZXQsIGdldEJlYXJlclRva2VuLCBnZXRHbHRleHBDb29raWV9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvVG9rZW5TdG9yZSc7XG5cbmNvbnN0IFJFUV9NQVhfUkVUUklFUyA9IDU7XG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZVJlcXVlc3Qge1xuICAgIHByaXZhdGUgX3RyaWVzID0gMDtcblxuICAgIHB1YmxpYyBsb2FkZWQ6IGJvb2xlYW47XG4gICAgcHVibGljIHNlbnRMb2dpblRva2VuOiBzdHJpbmc7XG4gICAgcHVibGljIHBhcmFtc0xvZ2luVG9rZW46IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgYmFzZVVybDogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgbWV0aG9kTmFtZTogc3RyaW5nLFxuICAgICAgICBwdWJsaWMgcGFyYW1zOiBPYmplY3QsXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nczogQXBpQWRhcHRlclNldHRpbmdzID0ge30sXG4gICAgICAgIHByaXZhdGUgX21heFRyaWVzID0gUkVRX01BWF9SRVRSSUVTLFxuICAgICkge1xuICAgICAgICB0aGlzLnBhcmFtc1snc2RrJ10gPSAnanNfJyArIGdpZ3lhLmJ1aWxkLnZlcnNpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldFVybCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZVVybCArICcvJyArIHRoaXMubWV0aG9kTmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2VuZChtYXhSZXRyaWVzQ2FsbGJhY2s/OiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX3RyaWVzKys7XG5cbiAgICAgICAgaWYgKHRoaXMuX3RyaWVzIDw9IHRoaXMuX21heFRyaWVzKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRBY3Rpb24oKTtcbiAgICAgICAgfSBlbHNlIGlmIChtYXhSZXRyaWVzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgIG1heFJldHJpZXNDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IHNlbmRBY3Rpb24oKTtcblxuICAgIHB1YmxpYyBnZXRBdXRoUGFyYW1zKCkge1xuICAgICAgICB2YXIgYXV0aFBhcmFtczogT2JqZWN0ID0ge307XG5cbiAgICAgICAgaWYgKHRoaXMucGFyYW1zWydvYXV0aF90b2tlbiddKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmFtc1snYXV0aE1vZGUnXSA9ICd0b2tlbic7XG5cbiAgICAgICAgICAgIC8vIFRoZSByZWdUb2tlbiB0YWtlcyBwcmlvcml0eSBvdmVyIHRoZSBsb2dpbiB0b2tlbiBiZWNhdXNlIG9mIFNTTy5cbiAgICAgICAgICAgIC8vIEFuIGFjY291bnQgbWF5IGJlIGxvZ2dlZCBpbiAobG9naW5fdG9rZW4pIGJ1dCBzdGlsbCBiZSBwZW5kaW5nIHJlZyBiZWNhdXNlIG9mIGNoaWxkIHNpdGUgc2NoZW1hIHJlcXVpcmVtZW50cy5cbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXJhbXNbJ25vQXV0aCddICYmICF0aGlzLnBhcmFtc1sncmVnVG9rZW4nXSkge1xuICAgICAgICAgICAgdmFyIGxvZ2luVG9rZW4gPSBnZXQodGhpcy5wYXJhbXNbJ0FQSUtleSddKTtcbiAgICAgICAgICAgIGlmIChsb2dpblRva2VuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW50TG9naW5Ub2tlbiA9IGxvZ2luVG9rZW47XG5cbiAgICAgICAgICAgICAgICB2YXIgbG9naW5Ub2tlbkV4cCA9IGdldEdsdGV4cENvb2tpZSh0aGlzLnBhcmFtc1snQVBJS2V5J10pO1xuICAgICAgICAgICAgICAgIGlmIChsb2dpblRva2VuRXhwICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0aFBhcmFtc1snbG9naW5Ub2tlbkV4cCddID0gbG9naW5Ub2tlbkV4cDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBhdXRoUGFyYW1zWydsb2dpbl90b2tlbiddID0gbG9naW5Ub2tlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1dGhQYXJhbXNbJ2F1dGhNb2RlJ10gPSAnY29va2llJztcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSB0aGlzLnBhcmFtc1snbm9BdXRoJ107XG5cbiAgICAgICAgaWYgKGdpZ3lhLmxvY2FsSW5mby5pc0FuZHJvaWRCcm93c2VyKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wYXJhbXNbJ2xvZ2luX3Rva2VuJ107XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5wYXJhbXNbJ2xvZ2luVG9rZW5FeHAnXTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBhcmFtc1snYXV0aE1vZGUnXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhdXRoUGFyYW1zO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRIZWFkZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy51c2VCZWFyZXJUb2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGdldEJlYXJlclRva2VuKClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbn1cbiIsImNvbnN0IGFsbG93ZWRSZXNpZGVuY2llcyA9IFtcInVzMVwiLCBcImV1MVwiLCBcImF1MVwiLCBcInJ1MVwiLCBcImNuMVwiLCBcImlsMVwiXTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRBY2NvdW50UmVzaWRlbmN5KGRhdGFDZW50ZXI6IHN0cmluZyl7IC8vIHZhbHVlIGNhbiBiZSBjbGVhcmVkIGJ5IGludm9raW5nIHRoaXMgYXBpIHdpdGggYW4gZW1wdHkgc3RyaW5nIHZhbHVlIC0gXCJcIlxuICAgIGlmIChkYXRhQ2VudGVyICYmIGFsbG93ZWRSZXNpZGVuY2llcy5pbmRleE9mKGRhdGFDZW50ZXIudG9Mb3dlckNhc2UoKSkgPT0gLTEpXG4gICAgICAgIHJldHVybiBnaWd5YS5sb2dnZXIud2FybignaW52YWxpZCByZXNpZGVuY3knLCB7ZGF0YUNlbnRlcn0pO1xuICAgIGdpZ3lhLmdsb2JhbEFjY291bnQuZGF0YUNlbnRlciA9IGRhdGFDZW50ZXI7XG59XG5cbiIsImltcG9ydCB7Z2V0IGFzIGdldEdsdFRva2VuLCByZW1vdmUgYXMgcmVtb3ZlR2x0VG9rZW59IGZyb20gXCIuLi9Ub2tlblN0b3JlXCI7XG5pbXBvcnQge3N5bmNHcm91cFRva2VufSBmcm9tIFwiLi9zZXNzaW9uSGVscGVyc1wiO1xuaW1wb3J0IHtyZWRpcmVjdH0gZnJvbSBcIi4uLy4uLy4uL0dpZ3lhLkpzL2FwcC9VdGlscy9IVFRQXCI7XG5pbXBvcnQge2hvbGQsIHJlbGVhc2V9IGZyb20gJy4uLy4uLy4uL0dpZ3lhLkpzL2FwcC9VdGlscy9xdWV1ZSc7XG5pbXBvcnQgSVNTT0NvbnRleHQgPSBnaWd5YS5maWRtLm9pZGMuSVNTT0NvbnRleHQ7XG5pbXBvcnQgSUJhc2VQYXJhbXMgPSBnaWd5YS5maWRtLm9pZGMuSUJhc2VQYXJhbXM7XG5pbXBvcnQge0dJR1lBX0lOVEVSTkFMX1BBUkFNX1BSRUZJWCwgR0lHWUFfSU5URVJOQUxfUEFSQU1TfSBmcm9tIFwiLi4vLi4vLi4vLi4vYWNjb3VudHMvY29uc3RhbnRzXCI7XG5pbXBvcnQgVXJsUGFyYW1zSGVscGVyIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9VcmxQYXJhbXNIZWxwZXInXG5cbmV4cG9ydCBmdW5jdGlvbiBzc29Mb2dpbihwYXJhbXM6IE9iamVjdCA9IHt9KSB7XG4gICAgaWYoIXZlcmlmeVNpdGVDb25maWd1cmF0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWdpZ3lhLnV0aWxzLnRvZ2dsZXMuaXNPbigna2VlcFNlc3Npb25PblNTT0xvZ2luJykpIHtcbiAgICAgICAgcmVtb3ZlR2x0VG9rZW4oKTtcbiAgICB9XG4gICAgZ2lneWEuYWNjb3VudHMuc3NvLmxvZ2luKHBhcmFtcyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb250aW51ZVNzbyhwYXJhbXM6IE9iamVjdCA9IHt9KSB7XG4gICAgaG9sZCgnc3NvQ29udGludWUnLCAnQVBJJyk7XG5cbiAgICBjb25zdCBsb2cgID0gZ2lneWEubG9nZ2VyLmdyb3VwKGBzc28uY29udGludWVgKTtcbiAgICBjb25zdCBlbmRGbG93ID0gKHdhcm5pbmdNZXNzYWdlPzogc3RyaW5nKSA9PiB7XG4gICAgICAgIHdhcm5pbmdNZXNzYWdlICYmIGdpZ3lhLmxvZ2dlci53YXJuKHdhcm5pbmdNZXNzYWdlKTtcbiAgICAgICAgcmVsZWFzZSgnc3NvQ29udGludWUnLCAnQVBJJyk7XG4gICAgICAgIHJldHVybiBsb2cuZW5kKCk7XG4gICAgfVxuICAgIGlmKCF2ZXJpZnlTaXRlQ29uZmlndXJhdGlvbigpKSB7XG4gICAgICAgIHJldHVybiBlbmRGbG93KCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3NvVG9rZW4gPSBnaWd5YS5nZXRVcmxQYXJhbSgnc3NvVG9rZW4nKTtcbiAgICBjb25zdCBzY29wZSA9IGdpZ3lhLmdldFVybFBhcmFtKCdzY29wZScpO1xuXG4gICAgaWYoIXNzb1Rva2VuKSB7XG4gICAgICAgIHJldHVybiBlbmRGbG93KGBzc29Ub2tlbiBtdXN0IGJlIHByZXNlbnQgaW4gdGhlIHVybGApO1xuICAgIH1cblxuICAgIGNvbnN0IEFQSUtleSA9IGdpZ3lhLnRoaXNTY3JpcHQ/Lmdsb2JhbENvbmY/LkFQSUtleSB8fCBnaWd5YS50aGlzU2NyaXB0Py5BUElLZXk7XG5cbiAgICBjb25zdCBsb2dpbl90b2tlbiA9IGdldEdsdFRva2VuKEFQSUtleSkgfHwgYXdhaXQgc3luY0dyb3VwVG9rZW4oQVBJS2V5KTtcblxuICAgIGlmKCFsb2dpbl90b2tlbikge1xuICAgICAgICByZXR1cm4gZW5kRmxvdyhgY2FuJ3QgY29udGludWUgd2l0aCBTU08gbG9naW4sIG1pc3NpbmcgbG9jYWwgc2Vzc2lvbmApO1xuICAgIH1cblxuICAgIHBhcmFtc1snc2RrJ10gPSAnanNfJyArIChnaWd5YS5idWlsZD8udmVyc2lvbiB8fCAnJyk7XG4gICAgcGFyYW1zWydzZGtCdWlsZCddID0gZ2lneWEuYnVpbGQ/Lm51bWJlciB8fCAwO1xuXG4gICAgbG9nLmVuZCgpO1xuICAgIGlmIChzY29wZSA9PT0gJ2RldmljZV9zc28nKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlclBhcmFtcyA9IHsgY29udGV4dDogc3NvVG9rZW4sIGxvZ2luX3Rva2VuLCAuLi5wYXJhbXMgfTtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlZGlyZWN0IHRvIG9pZGMgY29udGludWUgd2l0aCBwYXJhbXM6IGAsIHNlcnZlclBhcmFtcyk7XG4gICAgICAgIGdpZ3lhLmZpZG0ub2lkYy5vcC5yZWRpcmVjdFRvQ29udGludWUoe1xuICAgICAgICAgICAgb3BLZXk6IGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXksXG4gICAgICAgICAgICAuLi5zZXJ2ZXJQYXJhbXNcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2VydmVyUGFyYW1zID0geyBzc29Ub2tlbiwgbG9naW5fdG9rZW4sIEFQSUtleSB9O1xuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgcmVkaXJlY3QgdG8gc3NvLmNvbnRpbnVlIHdpdGggcGFyYW1zOiBgLCBzZXJ2ZXJQYXJhbXMpO1xuICAgICAgICByZWRpcmVjdChgaHR0cHM6Ly8ke2dpZ3lhLl8uZ2V0QXBpRG9tYWluKCl9L2FjY291bnRzLnNzby5jb250aW51ZWAsIFtzZXJ2ZXJQYXJhbXMsIHBhcmFtc10sICdQT1NUJyk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3NvQ29udGV4dChwYXJhbXM6IElCYXNlUGFyYW1zKSB7XG4gICAgcGFyYW1zPy5jYWxsYmFjayhnaWd5YS5fLnNzbz8uY29udGV4dCB8fCB7fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTc29Db250ZXh0KGNvbnRleHQ6IElTU09Db250ZXh0KXtcbiAgICB0cnl7XG4gICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IGdldFVybENvbnRleHRQYXJhbXMoKTtcbiAgICAgICAgY29uc3QgcnBDb250ZXh0ID0gY29udGV4dD8ucnBDb250ZXh0ID8gSlNPTi5wYXJzZShjb250ZXh0LnJwQ29udGV4dCkgOiB7fTtcbiAgICAgICAgZ2lneWEuXy5zc28uY29udGV4dCA9IHsuLi51cmxQYXJhbXMsIC4uLnJwQ29udGV4dH1cbiAgICB9Y2F0Y2goZSl7XG4gICAgICAgZ2lneWEubG9nZ2VyLnJlcG9ydCgnZmFpbGVkIHRvIHNldCBzc28gY29udGV4dCcpO1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiB2ZXJpZnlTaXRlQ29uZmlndXJhdGlvbigpOiBib29sZWFuIHtcbiAgICBpZighZ2lneWEucGFydG5lclNldHRpbmdzLnNzb0tleSkge1xuICAgICAgICBnaWd5YS5sb2dnZXIud2FybihgTm90IGluIFNTTyBHcm91cGApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmKCFnaWd5YS50aGlzU2NyaXB0Py5nbG9iYWxDb25mPy5bJ3N0b3JhZ2VEb21haW5PdmVycmlkZSddKSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGBDZW50cmFsIGxvZ2luIHBhZ2UgbXVzdCBjb25maWd1cmUgc3RvcmFnZURvbWFpbk92ZXJyaWRlIGluIHdlYlNESyBDb25maWd1cmF0aW9uYCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGdldFVybENvbnRleHRQYXJhbXMoKXtcbiAgIHJldHVybiBuZXcgVXJsUGFyYW1zSGVscGVyKClcbiAgICAgICAgLmdldEdpZ1BhcmFtc0Zyb21VUkwoKVxuICAgICAgICAucmVtb3ZlVW5hY2NlcHRhYmxlUGFyYW1zKG5ldyBSZWdFeHAoYCR7R0lHWUFfSU5URVJOQUxfUEFSQU1fUFJFRklYfXwke0dJR1lBX0lOVEVSTkFMX1BBUkFNU318Z2lnX3Nzb1Rva2VuYCkpXG4gICAgICAgIC5yZW1vdmVQcmVmaXgoKVxuICAgICAgICAudG9PYmplY3QoKTtcbn1cbiIsImltcG9ydCB7Y3JlYXRlQWxpYXN9IGZyb20gXCIuLi8uLi8uLi9HaWd5YS5Kcy9hcHAvVXRpbHMvZnVuY3Rpb25zXCI7XG5pbXBvcnQge3NldEFjY291bnRSZXNpZGVuY3l9IGZyb20gXCIuL2FjY291bnRSZXNpZGVuY3lcIjtcbmltcG9ydCB7c2V0R3JvdXBDb250ZXh0LCBzZXRTU09Ub2tlbiwgc3luY0dyb3VwR2x0RXhwfSBmcm9tIFwiLi9zZWFtbGVzc1NTT1wiO1xuaW1wb3J0IHtoYXNTZXNzaW9ufSBmcm9tIFwiLi9zZXNzaW9uSGVscGVyc1wiO1xuaW1wb3J0IHtjb250aW51ZVNzbywgc3NvTG9naW4sIGdldFNzb0NvbnRleHR9IGZyb20gXCIuL2NlbnRyYWxpemVkU1NPXCI7XG5cbmNyZWF0ZUFsaWFzKCdnaWd5YS5zZXRBY2NvdW50UmVzaWRlbmN5Jywgc2V0QWNjb3VudFJlc2lkZW5jeSk7XG5cbmNyZWF0ZUFsaWFzKCdnaWd5YS5zZXRHcm91cENvbnRleHQnLCBzZXRHcm91cENvbnRleHQpO1xuY3JlYXRlQWxpYXMoJ2dpZ3lhLnNldFNTT1Rva2VuJywgc2V0U1NPVG9rZW4pO1xuY3JlYXRlQWxpYXMoJ2dpZ3lhLnN5bmNHcm91cEdsdEV4cCcsIHN5bmNHcm91cEdsdEV4cCk7XG5cbmNyZWF0ZUFsaWFzKCdnaWd5YS5oYXNTZXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgaWYgKCFnaWd5YS5pc1JlYWR5KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJyoqKiogZ2lneWEuaGFzU2Vzc2lvbiBtdXN0IGJlIGNhbGxlZCBBRlRFUiBnaWd5YSBzZXJ2aWNlIHJlYWR5ICoqKionKTtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoJ0JhZCBJbXBsZW1lbnRhdGlvbjogZ2lneWEuaGFzU2Vzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIGdpZ3lhLnV0aWxzLnF1ZXVlLnF1ZXVlRm9yRXhlY3V0aW9uKCdBUEknLCAoKSA9PiBoYXNTZXNzaW9uKCkudGhlbihyZXNvbHZlKSk7XG4gICAgfSk7XG59KTtcbmNyZWF0ZUFsaWFzKCdnaWd5YS5zc28uZ2V0Q29udGV4dCcsIGdldFNzb0NvbnRleHQpO1xuY3JlYXRlQWxpYXMoJ2dpZ3lhLnNzby5sb2dpbicsIHNzb0xvZ2luKTtcbmNyZWF0ZUFsaWFzKCdnaWd5YS5zc28uY29udGludWUnLCAoLi4uYXJncykgPT4ge1xuICAgIGdpZ3lhLnV0aWxzLnF1ZXVlLnF1ZXVlRm9yRXhlY3V0aW9uKCdBUEknLCBjb250aW51ZVNzbywgYXJncyk7XG59KTtcbiIsImltcG9ydCB7U3NvU2VydmljZX0gZnJvbSBcIi4uL1Nzb1NlcnZpY2VcIjtcbmltcG9ydCB7Z2V0R2x0ZXhwQ29va2llLCBzZXRHbHRleHB9IGZyb20gXCIuLi9Ub2tlblN0b3JlXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRHcm91cENvbnRleHQoZ3JvdXBDb250ZXh0OmFueSl7XG4gICAgY29uc3Qgc2VydmljZSA9IGF3YWl0IFNzb1NlcnZpY2UuZ2V0SW5zdGFuY2UoKVxuICAgIGF3YWl0IHNlcnZpY2U/LnNldEdyb3VwQ29udGV4dChncm91cENvbnRleHQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0U1NPVG9rZW4oLi4uYXJncyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbZ2lneWEudGhpc1NjcmlwdC5nbG9iYWxDb25mLCBhcmdzXSk7XG4gICAgY29uc3QgcmVkaXJlY3RVUkwgPSBwYXJhbXNbJ3JlZGlyZWN0VVJMJ10gfHwgZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcbiAgICBnaWd5YS51dGlscy5IVFRQLnJlZGlyZWN0KHJlZGlyZWN0VVJMLCBbe31dLCAnR0VUJywgJ190b3AnKTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzeW5jR3JvdXBHbHRFeHAoZ2x0ZXhwID0gZ2V0R2x0ZXhwQ29va2llKCkpIHtcbiAgICBpZiAoIWdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICBjb25zdCBzZXJ2aWNlID0gYXdhaXQgU3NvU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHNlcnZpY2U/LnNldFRva2VuRXhwaXJhdGlvbihnbHRleHAsIGZhbHNlKTtcbiAgICBjb25zdCBoYXNDaGFuZ2VkID0gcmVzPy5nbHRleHAgIT09IGdsdGV4cDtcbiAgICBpZiAoaGFzQ2hhbmdlZCkge1xuICAgICAgICBzZXRHbHRleHAocmVzLmdsdGV4cCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGhhc0NoYW5nZWQsXG4gICAgICAgIG9sZEV4cGlyYXRpb246IGdpZ3lhLnV0aWxzLmdsdGV4cC5nZXRNaWxsaXMoZ2x0ZXhwKSxcbiAgICAgICAgbmV3RXhwaXJhdGlvbjogZ2lneWEudXRpbHMuZ2x0ZXhwLmdldE1pbGxpcyhyZXMuZ2x0ZXhwIHx8IGdsdGV4cCksXG4gICAgfTtcbn1cbiIsImltcG9ydCB7Z2V0IGFzIGdldEdsdFRva2VuLCBzZXRGcm9tU3NvUmVzcG9uc2V9IGZyb20gXCIuLi9Ub2tlblN0b3JlXCI7XG5pbXBvcnQge0dTRXJyb3JzfSBmcm9tIFwiLi4vLi4vLi4vR2lneWEuSnMvYXBwL0dTRXJyb3JzXCI7XG5pbXBvcnQge3Nlc3Npb25EYXRhfSBmcm9tIFwiLi4vLi4vLi4vR2lneWEuSnMvYXBwL1NlcnZpY2VzL1Nlc3Npb25TZXJ2aWNlXCI7XG5pbXBvcnQge1Nzb1NlcnZpY2V9IGZyb20gXCIuLi9Tc29TZXJ2aWNlXCI7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3Byb21pc2UnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzU2Vzc2lvbigpIHtcbiAgICBjb25zdCBsb2cgPSBnaWd5YS5sb2dnZXIuZ3JvdXAoYGhhc1Nlc3Npb25gKTtcbiAgICBjb25zdCBhcGlLZXkgPSBnaWd5YS50aGlzU2NyaXB0Py5nbG9iYWxDb25mPy5bJ0FQSUtleSddIHx8IGdpZ3lhLnRoaXNTY3JpcHQ/LkFQSUtleTtcblxuICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBjaGVja2luZyBzZXNzaW9uIGV4aXN0IGZvciBhcGlLZXk6ICR7YXBpS2V5fWApO1xuICAgIGlmKGdpZ3lhLnRoaXNTY3JpcHQ/LkFQSUtleSAhPT0gYXBpS2V5KSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBlZmZlY3RpdmUgYXBpS2V5IGZvciBjaGVja2luZyBzZXNzaW9uIGFuZCB0aGUgYXBpS2V5IHRoYXQgdGhlIHNjcmlwdCB3YXMgbG9hZGVkIHdpdGggYXJlIGRpZmZlcmVudGApO1xuICAgIH1cbiAgICBsZXQgZ2x0VG9rZW4gPSBnZXRHbHRUb2tlbigpO1xuICAgIGlmKCFnbHRUb2tlbiAmJiBnaWd5YS5wYXJ0bmVyU2V0dGluZ3Muc3NvS2V5KSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBTU08gZ3JvdXAsIHN5bmMgbG9naW4gdG9rZW4gZnJvbSBncm91cGApO1xuICAgICAgICBnbHRUb2tlbiA9IGF3YWl0IHN5bmNHcm91cFRva2VuKGFwaUtleSk7XG4gICAgfVxuICAgIGlmKGdsdFRva2VuKSB7XG4gICAgICAgIGlmKHNlc3Npb25EYXRhLmlzU2Vzc2lvblZlcmlmaWVkKGdsdFRva2VuKSkge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGxvZ2luIHRva2VuIGV4aXN0IGFuZCBzZXNzaW9uIGlzIGFscmVhZHkgdmVyaWZpZWQsIHNlc3Npb24gaXMgdmFsaWRgKTtcbiAgICAgICAgICAgIGxvZy5lbmQoKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGxvZ2luIHRva2VuIGV4aXN0IGFuZCBzZXNzaW9uIGlzIG5vdCB2ZXJpZmllZCwgdmVyaWZ5aW5nIHNlc3Npb24uLi5gKTtcbiAgICAgICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHByb21pc2lmeShnaWd5YS5hY2NvdW50cy52ZXJpZnlMb2dpbik7XG4gICAgICAgICAgICBjb25zdCBpc1Nlc3Npb25WZXJpZmllZCA9IHJlc3BvbnNlPy5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0s7XG4gICAgICAgICAgICBzZXNzaW9uRGF0YS5zZXRJc1Nlc3Npb25WZXJpZmllZChnbHRUb2tlbiwgaXNTZXNzaW9uVmVyaWZpZWQpXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhpc1Nlc3Npb25WZXJpZmllZCA/IGBzZXNzaW9uIHZlcmlmaWVkYCA6IGBzZXNzaW9uIGlzIG5vdCB2ZXJpZmllZGApO1xuICAgICAgICAgICAgbG9nLmVuZCgpO1xuICAgICAgICAgICAgcmV0dXJuIGlzU2Vzc2lvblZlcmlmaWVkO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgb1VSTFBhcmFtcyA9IGdpZ3lhLnV0aWxzLlVSTC5nZXRQYXJhbXNGcm9tVVJMKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICBpZihvVVJMUGFyYW1zWydlcnJvckNvZGUnXSAmJiBvVVJMUGFyYW1zWydyZWdUb2tlbiddKSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgdXNlciBpcyByZXR1cm5lZCBmcm9tIHJlZGlyZWN0LCB3YWl0IGZvciBsb2dpbiBjb21wbGV0aW9uYCk7XG4gICAgICAgICAgICBsb2cuZW5kKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuYWRkRXZlbnRIYW5kbGVycyh7b25Mb2dpbjogKCkgPT4gcmVzb2x2ZSh0cnVlKX0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGxvZ2luIHRva2VuIGRvZXNuJ3QgZXhpc3RgKTtcbiAgICAgICAgbG9nLmVuZCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3luY0dyb3VwVG9rZW4obG9jYWxBcGlLZXk6IHN0cmluZyA9IGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBnaWd5YS5sb2dnZXIuaW5mbyhgc3luYyBsb2dpbiB0b2tlbiBmcm9tIGdyb3VwYCk7XG4gICAgY29uc3Qgc2VydmljZSA9IGF3YWl0IFNzb1NlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHNlcnZpY2U/LmdldFRva2VuKCk7XG4gICAgYXdhaXQgc2V0RnJvbVNzb1Jlc3BvbnNlKHRva2VuLCBsb2NhbEFwaUtleSk7XG4gICAgcmV0dXJuIGdldEdsdFRva2VuKGxvY2FsQXBpS2V5KTtcbn1cbiIsImltcG9ydCB7QmFzZVJlcXVlc3R9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvQmFzZVJlcXVlc3QnO1xuaW1wb3J0IHtBcGlBZGFwdGVyU2V0dGluZ3MsIE9BdXRoTW9kZX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvaW50ZXJmYWNlcy9JQXBpQWRhcHRlcic7XG5pbXBvcnQgUHJvdmlkZXIgPSBnaWd5YS5fLnByb3ZpZGVycy5Qcm92aWRlcjtcbmltcG9ydCB7RmxhZ1NlcnZpY2V9IGZyb20gXCJzcmMvY29yZS9HaWd5YS5Kcy9hcHAvU2VydmljZXMvRmxhZ1NlcnZpY2VcIjtcbmltcG9ydCB7Z2V0UHJvdmlkZXJTZXNzaW9uRnJvbVBhcmFtcywgaXNQcm92aWRlclNlc3Npb25WYWxpZCwgaXNMaW5rQWNjb3VudHNWMkludGVycnVwdGlvbiwgTGlua0FjY291bnRzV2l0aFJlZGlyZWN0UGFyYW19IGZyb20gJy4uLy4uL0dpZ3lhLkpzLlBsdWdpbi9hcHAvVXRpbHMvZ2VuZXJhbC9saW5rQWNjb3VudHNIZWxwZXInO1xuXG5jb25zdCBSRURJUkVDVF9PTkxZX1BST1ZJREVSUyA9IFsndHdpdHRlciddO1xuXG5leHBvcnQgY2xhc3MgT2F1dGhSZXF1ZXN0IGV4dGVuZHMgQmFzZVJlcXVlc3Qge1xuICAgIHByaXZhdGUgd2luZG93TmFtZTogc3RyaW5nO1xuICAgIHByaXZhdGUgcmVxdWVzdElEOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGlkOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBiYXNlVXJsOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBtZXRob2ROYW1lOiBzdHJpbmcsXG4gICAgICAgIHB1YmxpYyBwYXJhbXM6IE9iamVjdCxcbiAgICAgICAgcHVibGljIGNhbGxiYWNrOiAocmVzcG9uc2U6IE9iamVjdCkgPT4gdm9pZCxcbiAgICAgICAgcHVibGljIHNldHRpbmdzOiBBcGlBZGFwdGVyU2V0dGluZ3MgPSB7fVxuICAgICkge1xuICAgICAgICBzdXBlcihiYXNlVXJsLCBtZXRob2ROYW1lLCBwYXJhbXMsIHNldHRpbmdzKTtcbiAgICAgICAgdGhpcy53aW5kb3dOYW1lID0gdGhpcy5tZXRob2ROYW1lLnJlcGxhY2UoL1xcLi9nLCAnXycpLnJlcGxhY2UoL1xcLy9nLCAnJykgKyAnXycgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0SUQgPSB0aGlzLndpbmRvd05hbWUgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9XG5cbiAgICBiZWZvcmVSZXF1ZXN0KCkge31cblxuICAgIGFmdGVyUmVzcG9uc2UocmVzcG9uc2U6IE9iamVjdCkge1xuICAgICAgICBpZiAoIXJlc3BvbnNlWydkb250Q2xvc2UnXSB8fCByZXNwb25zZVsnZG9udENsb3NlJ10gPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLndpbi5jbG9zZSh0aGlzLndpbmRvd05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FsbGJhY2socmVzcG9uc2UpO1xuICAgIH1cblxuICAgIGdldEF1dGhGbG93KCk6IHN0cmluZyB7XG4gICAgICAgIC8vIEZvcmNlIGF1dGhGbG93IHJlZGlyZWN0IG9uIFdpbmRvd3MgUGhvbmUuXG4gICAgICAgIGlmIChnaWd5YS5sb2NhbEluZm8uaXNXaW5kb3dzUGhvbmUgfHwgZ2lneWEubG9jYWxJbmZvLmlzRmFjZWJvb2tCcm93c2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3JlZGlyZWN0JztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmVuZm9yY2VSZWRpcmVjdEZvclNvY2lhbCkge1xuICAgICAgICAgICAgcmV0dXJuICdyZWRpcmVjdCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXNbJ2F1dGhGbG93J10gPyB0aGlzLnBhcmFtc1snYXV0aEZsb3cnXSA6ICdwb3B1cCc7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIGdldFNlcnZlclBhcmFtc1N0cmluZyhwcm92aWRlcj86IFByb3ZpZGVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3Qgc2VydmVyUGFyYW1zID0gdGhpcy5nZXRTZXJ2ZXJQYXJhbXMoKTtcblxuICAgICAgICBzZXJ2ZXJQYXJhbXNbJ3N0YXRlJ10gPSB0aGlzLmdldFN0YXRlKHRoaXMucmVxdWVzdElELCB0aGlzLm1ldGhvZE5hbWUsIHRoaXMuZ2V0QXV0aEZsb3coKSk7XG4gICAgICAgIGlmKHRoaXMuc2V0dGluZ3Mub2F1dGhNb2RlID09PSBPQXV0aE1vZGUuU3NvKSB7XG4gICAgICAgICAgICBkZWxldGUgc2VydmVyUGFyYW1zWydjb250ZXh0J107IC8vIGFscmVhZHkgaW5jbHVkZWQgaW4gc3RhdGUgcGFyYW1cbiAgICAgICAgICAgIGlmKHRoaXMuZ2V0QXV0aEZsb3coKSAhPSAncmVkaXJlY3QnICYmIHNlcnZlclBhcmFtc1sncmVkaXJlY3RVUkwnXSkge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGByZWRpcmVjdFVSTCBpcyB2YWxpZCBvbmx5IGZvciBcIlJlZGlyZWN0XCIgYXV0aCBmbG93YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBnaWd5YS51dGlscy5vYmplY3QuYWRkKHNlcnZlclBhcmFtcywgdGhpcy5nZXRBdXRoUGFyYW1zKCkpO1xuICAgICAgICBjb25zdCBnbWlkVGlja2V0ID0gYXdhaXQgZ2lneWEuXy5hcGlBZGFwdGVyLmdldEdtaWRUaWNrZXQoKTtcbiAgICAgICAgaWYgKGdtaWRUaWNrZXQpIHtcbiAgICAgICAgICAgIHNlcnZlclBhcmFtc1snZ21pZFRpY2tldCddID0gZ21pZFRpY2tldDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2VudExvZ2luVG9rZW4gPSBzZXJ2ZXJQYXJhbXNbJ2xvZ2luX3Rva2VuJ107XG5cbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gZ2lneWEudXRpbHMuVVJMLmdldFBhcmFtc0Zyb21VUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgICAgICBpZiAodXJsUGFyYW1zWydzY29wZSddID09PSAnZGV2aWNlX3NzbycgJiYgIHByb3ZpZGVyPy5uYW1lID09PSAnbGluZScpIHtcbiAgICAgICAgICAgIHNlcnZlclBhcmFtc1sneF9mb3JjZUF1dGhlbnRpY2F0aW9uJ10gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdpZ3lhLnV0aWxzLmtleVZhbHVlLnNlcmlhbGl6ZShzZXJ2ZXJQYXJhbXMpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBzZW5kQWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLmJlZm9yZVJlcXVlc3QoKTtcbiAgICAgICAgbGV0IHByb3ZpZGVyOiBQcm92aWRlcjtcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zWydwcm92aWRlciddKSB7XG4gICAgICAgICAgICBwcm92aWRlciA9IGdpZ3lhLnNvY2lhbGl6ZS5fZ2V0UHJvdmlkZXJCeU5hbWUodGhpcy5wYXJhbXNbJ3Byb3ZpZGVyJ10pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNlcnZlclBhcmFtc1F1ZXJ5c3RyaW5nID0gYXdhaXQgdGhpcy5nZXRTZXJ2ZXJQYXJhbXNTdHJpbmcocHJvdmlkZXIpO1xuXG4gICAgICAgIC8vIEFsbG93IGxvY2F0aW9uL3Rvb2xiYXIgdG8gYmUgdG9nZ2xlZCBvbi5cbiAgICAgICAgY29uc3Qgd2luZG93T3B0aW9uczogZ2lneWEudXRpbHMud2luLldpbmRvd09wdGlvbnMgPSB7XG4gICAgICAgICAgICBtZW51YmFyOiAwLFxuICAgICAgICAgICAgcmVzaXphYmxlOiAxLFxuICAgICAgICAgICAgc2Nyb2xsYmFyczogMSxcbiAgICAgICAgICAgIHdpZHRoOiBwcm92aWRlciA/IHByb3ZpZGVyLndpZHRoIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaGVpZ2h0OiBwcm92aWRlciA/IHByb3ZpZGVyLmhlaWdodCA6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zWydlbmFibGVQb3B1cExvY2F0aW9uJ10pIHtcbiAgICAgICAgICAgIHdpbmRvd09wdGlvbnMubG9jYXRpb24gPSAxO1xuICAgICAgICAgICAgd2luZG93T3B0aW9ucy50b29sYmFyID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvd09wdGlvbnMudG9vbGJhciA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXRob2ROYW1lU3BsaXQgPSB0aGlzLm1ldGhvZE5hbWUuc3BsaXQoJy4nKTtcbiAgICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHRoaXMucGFyYW1zWydvcmlnaW5hbE1ldGhvZE5hbWUnXSB8fCBtZXRob2ROYW1lU3BsaXRbbWV0aG9kTmFtZVNwbGl0Lmxlbmd0aCAtIDFdO1xuICAgICAgICBnaWd5YS5sZWdhY3lSZXBvcnRzLnJlcG9ydChtZXRob2ROYW1lLCB0aGlzLnBhcmFtc1snQVBJS2V5J10sIHRoaXMucGFyYW1zWydjaWQnXSwgdGhpcy5wYXJhbXNbJ3NvdXJjZSddLCB0aGlzLnBhcmFtc1snc291cmNlRGF0YSddLCB7XG4gICAgICAgICAgICBzbjogcHJvdmlkZXIgPyBwcm92aWRlci50b1N0cmluZygpIDogbnVsbCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZnVsbFVybCA9IHRoaXMuZ2V0VXJsKCkgKyAnPycgKyBzZXJ2ZXJQYXJhbXNRdWVyeXN0cmluZztcblxuICAgICAgICBpZiAodGhpcy5nZXRBdXRoRmxvdygpID09PSAncmVkaXJlY3QnKSB7XG4gICAgICAgICAgICBnaWd5YS5fLldpbmRvd1Byb3ZpZGVyLnRvcCgpLmRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSBmdWxsVXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMueGQuYWRkTWVzc2FnZUxpc3RlbmVyKHRoaXMucmVxdWVzdElELCB0aGlzLnBhcmFtcywgdHJ1ZSwgKHJlc3BvbnNlOiBPYmplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyUmVzcG9uc2UocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLndpbi5vcGVuKGZ1bGxVcmwsIHRoaXMud2luZG93TmFtZSwgd2luZG93T3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IGRvbWFpbigpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKVswXS5zcGxpdCgnIycpWzBdO1xuICAgIH1cblxuICAgIGdldFNlcnZlclBhcmFtcygpOiBPYmplY3Qge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc2V0dGluZ3M/Lm9hdXRoTW9kZSkge1xuICAgICAgICAgICAgY2FzZSBPQXV0aE1vZGUuU3NvOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9ub3JtYWxpemVQYXJhbXNGb3JTU08oKTtcbiAgICAgICAgICAgIGNhc2UgT0F1dGhNb2RlLlNvY2lhbDogZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbm9ybWFsaXplUGFyYW1zRm9yU29jaWFsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRTdGF0ZShyZXF1ZXN0SUQ6IHN0cmluZywgbWV0aG9kTmFtZTogc3RyaW5nLCBhdXRoRmxvdzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnNldHRpbmdzPy5vYXV0aE1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgT0F1dGhNb2RlLlNzbzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlU1NPU3RhdGVQYXJhbShyZXF1ZXN0SUQsIG1ldGhvZE5hbWUsIGF1dGhGbG93KTtcbiAgICAgICAgICAgIGNhc2UgT0F1dGhNb2RlLlNvY2lhbDogZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY3JlYXRlU29jaWFsU3RhdGVQYXJhbShyZXF1ZXN0SUQsIG1ldGhvZE5hbWUsIGF1dGhGbG93KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX25vcm1hbGl6ZVBhcmFtc0ZvclNTTygpOiBPYmplY3Qge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBBUElLZXk6IGdpZ3lhLmFwaUtleSxcbiAgICAgICAgICAgIHJlZGlyZWN0VVJMOiB3aW5kb3cudG9wLmRvY3VtZW50LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgfSwgdGhpcy5wYXJhbXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX25vcm1hbGl6ZVBhcmFtc0ZvclNvY2lhbCgpOiBPYmplY3Qge1xuXG4gICAgICAgIGNvbnN0IHNlcnZlclBhcmFtcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmFtTmFtZSBpbiB0aGlzLnBhcmFtcykge1xuICAgICAgICAgICAgaWYgKHBhcmFtTmFtZS5pbmRleE9mKCd4XycpICE9PSAwICYmIHRoaXMucGFyYW1zW3BhcmFtTmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNlcnZlclBhcmFtc1sneF8nICsgcGFyYW1OYW1lXSA9IHRoaXMucGFyYW1zW3BhcmFtTmFtZV07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNlcnZlclBhcmFtc1twYXJhbU5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlcnZlclBhcmFtc1sneF9BUElLZXknXSkge1xuICAgICAgICAgICAgc2VydmVyUGFyYW1zWydjbGllbnRfaWQnXSA9IHNlcnZlclBhcmFtc1sneF9BUElLZXknXTtcbiAgICAgICAgICAgIGRlbGV0ZSBzZXJ2ZXJQYXJhbXNbJ3hfQVBJS2V5J107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VydmVyUGFyYW1zWyd4X29hdXRoX3Rva2VuJ10pIHtcbiAgICAgICAgICAgIHNlcnZlclBhcmFtc1snb2F1dGhfdG9rZW4nXSA9IHNlcnZlclBhcmFtc1sneF9vYXV0aF90b2tlbiddO1xuICAgICAgICAgICAgZGVsZXRlIHNlcnZlclBhcmFtc1sneF9vYXV0aF90b2tlbiddO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VydmVyUGFyYW1zWydyZWRpcmVjdF91cmknXSA9ICcvR1MvQWZ0ZXJMb2dpbi5hc3B4JztcbiAgICAgICAgc2VydmVyUGFyYW1zWydyZXNwb25zZV90eXBlJ10gPSB0aGlzLnBhcmFtc1snYXV0aENvZGVPbmx5J10gPyAnY29kZScgOiAnc2VydmVyX3Rva2VuJztcblxuICAgICAgICBzZXJ2ZXJQYXJhbXNbJ3hfc2RrJ10gPSAnanNfJyArIGdpZ3lhLmJ1aWxkLnZlcnNpb247XG5cbiAgICAgICAgaWYgKEZsYWdTZXJ2aWNlLmVuZm9yY2VBdXRoRmxvd1JlZGlyZWN0Rm9yU29jaWFsKSB7XG4gICAgICAgICAgICBzZXJ2ZXJQYXJhbXNbJ3hfYXV0aEZsb3cnXSA9IHRoaXMuZ2V0QXV0aEZsb3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWZVSUQgPSBnaWd5YS51dGlscy5jb29raWUuZ2V0KCdfZ2lnUmVmVWlkXycgKyB0aGlzLnBhcmFtc1snQVBJS2V5J10pO1xuICAgICAgICBpZiAocmVmVUlEKSB7XG4gICAgICAgICAgICBzZXJ2ZXJQYXJhbXNbJ3hfcmVmVUlEJ10gPSByZWZVSUQ7XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgc2VydmVyUGFyYW1zWydyZWRpcmVjdFVSTCddOyAvLyB3ZSBkb24ndCBuZWVkIGl0IHNpbmNlIGl0J3MgcGFzc2VkIGluIHN0YXRlIHBhcmFtc1xuXG4gICAgICAgIHJldHVybiBzZXJ2ZXJQYXJhbXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY3JlYXRlU1NPU3RhdGVQYXJhbShyZXF1ZXN0SUQ6IHN0cmluZywgbWV0aG9kTmFtZTogc3RyaW5nLCBhdXRoRmxvdzogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fc3RhdGU7XG4gICAgICAgIHN0YXRlWydpZCddID0gcmVxdWVzdElEO1xuICAgICAgICBzdGF0ZVsnY29udGV4dCddID0gdGhpcy5wYXJhbXNbJ2NvbnRleHQnXSB8fCB7fTtcbiAgICAgICAgc3RhdGVbJ2dpZ19hY3Rpb25zJ10gPSAnc3NvLmxvZ2luJztcbiAgICAgICAgc3RhdGVbJ2F1dGhGbG93J10gPSBhdXRoRmxvdyB8fCAncmVkaXJlY3QnO1xuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY3JlYXRlU29jaWFsU3RhdGVQYXJhbShyZXF1ZXN0SUQ6IHN0cmluZywgbWV0aG9kTmFtZTogc3RyaW5nLCBhdXRoRmxvdzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9zdGF0ZTtcbiAgICAgICAgc3RhdGVbJ2lkJ10gPSByZXF1ZXN0SUQ7XG5cbiAgICAgICAgaWYgKGF1dGhGbG93ID09PSAncmVkaXJlY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VVUkwgPSBnaWd5YS5fLldpbmRvd1Byb3ZpZGVyLnRvcCgpLmRvY3VtZW50LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgICAgIHN0YXRlWydzb3VyY2VVUkwnXSA9IHNvdXJjZVVSTDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtc1sncmVkaXJlY3RVUkwnXSkge1xuICAgICAgICAgICAgICAgIHN0YXRlWydyZWRpcmVjdFVSTCddID0gZ2lneWEudXRpbHMuVVJMLmFkZFBhcmFtc1RvVVJMKHRoaXMucGFyYW1zWydyZWRpcmVjdFVSTCddLCB7XG4gICAgICAgICAgICAgICAgICAgIGdpZ19ldmVudHM6IGdpZ3lhLmV2ZW50cy5nbG9iYWwuZ2V0RXZlbnRzRm9yT3BlcmF0aW9uKG1ldGhvZE5hbWUpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmFtc1sncmVkaXJlY3RNZXRob2QnXSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZVsncmVkaXJlY3RNZXRob2QnXSA9IHRoaXMucGFyYW1zWydyZWRpcmVjdE1ldGhvZCddO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNlZSAjNDYzMDEgLSBhZGRVc2VySW5mbyBtdXN0IG9ubHkgYmUgcGFzc2VkIHdoZW4gdGhlIHVzZXIgZXhwbGljdGx5IHBhc3NlcyBhIHJlZGlyZWN0VVJMLlxuICAgICAgICAgICAgICAgIHN0YXRlWydhZGRVc2VySW5mbyddID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhdGVbJ3NvdXJjZVVSTCddID0gZ2lneWEudXRpbHMuVVJMLmFkZFBhcmFtc1RvVVJMKHN0YXRlWydzb3VyY2VVUkwnXSwge1xuICAgICAgICAgICAgICAgICAgICBnaWdfZXZlbnRzOiBnaWd5YS5ldmVudHMuZ2xvYmFsLmdldEV2ZW50c0Zvck9wZXJhdGlvbihtZXRob2ROYW1lKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuaXNMaW5rQWNjb3VudHNWMkZsb3coc291cmNlVVJMKSkge1xuXG4gICAgICAgICAgICAgIHN0YXRlW0xpbmtBY2NvdW50c1dpdGhSZWRpcmVjdFBhcmFtLlByb3ZpZGVyXSA9IHRoaXMuZXh0cmFjdFByb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50cyhzb3VyY2VVUkwpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBhcmFtc1sncHJvdmlkZXInXSAmJiB0aGlzLnBhcmFtc1sncHJvdmlkZXInXS50b0xvd2VyQ2FzZSgpID09ICdmYWNlYm9vaycpIHtcbiAgICAgICAgICAgIHN0YXRlWydpbnZpdGUnXSA9IHRoaXMucGFyYW1zWydpbnZpdGUnXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy5rZXlWYWx1ZS5zZXJpYWxpemUoc3RhdGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IF9tZXNzYWdpbmdNZXRob2QoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKGdpZ3lhLmxvY2FsSW5mby5pc0lFMTEgJiYgd2luZG93LmluZGV4ZWREQikge1xuICAgICAgICAgICAgcmV0dXJuIGdpZ3lhLl8uTWVzc2FnaW5nTWV0aG9kLkxvY2FsU3RvcmFnZUxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIC8vIFsjNjc2NDFdIC0gaHR0cHM6Ly9naWd5YS50cG9uZGVtYW5kLmNvbS9lbnRpdHkvNjc2NDEtbG9jY2l0YW5lLXNvY2lhbC1sb2dpbi10by1saW5lLWhhbmdzXG4gICAgICAgIC8vIGlmIHByb3ZpZGVyIGlzIExpbmUsIHVzZSBMb2NhbFN0b3JhZ2VMaXN0ZW5lciBiZWNhdXNlIGlmIExpbmUncyBuYXRpdmUgYXBwIGlzIGluc3RhbGxlZCBvbiB0aGUgZGV2aWNlXG4gICAgICAgIC8vIGl0IG1heSBcImhpamFja1wiIChkZWVwLWxpbmspIHRoZSBPQXV0aCByZXF1ZXN0IGFuZCBwcmV2ZW50IHRoZSBQb3N0TWVzc2FnZSBtZWNoYW5pc20gZnJvbSB3b3JraW5nLlxuICAgICAgICBpZiAoZ2lneWEubG9jYWxJbmZvLmlzQW5kcm9pZCAmJiB0aGlzLnBhcmFtc1sncHJvdmlkZXInXSAmJiB0aGlzLnBhcmFtc1sncHJvdmlkZXInXS50b0xvd2VyQ2FzZSgpID09ICdsaW5lJykge1xuICAgICAgICAgICAgcmV0dXJuIGdpZ3lhLl8uTWVzc2FnaW5nTWV0aG9kLkxvY2FsU3RvcmFnZUxpc3RlbmVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnaWd5YS5sb2NhbEluZm8ubWVzc2FnaW5nTWV0aG9kO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IF9saWQoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChnaWd5YS50aGlzU2NyaXB0Lmdsb2JhbENvbmZbJ2xlZ2FjeUNyb3NzU2l0ZU1ldGhvZCddICYmIGdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZlsnbGVnYWN5Q3Jvc3NTaXRlTWV0aG9kJ10udG9Mb3dlckNhc2UoKSAhPT0gJ2xvY2Fsc3RvcmFnZScpIHx8XG4gICAgICAgICAgICAoZ2lneWEubG9jYWxJbmZvLmlzSUUgJiYgd2luZG93Lm5hdmlnYXRvclsnbXNEb05vdFRyYWNrJ10pXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZlsnbGVnYWN5Q3Jvc3NTaXRlTWV0aG9kJ10gKyAnOicgKyBnaWd5YS51dGlscy54ZC5fZmxhc2hMaXN0ZW5lcklEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnaWd5YS51dGlscy54ZC5fZmxhc2hMaXN0ZW5lcklEO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IF9zdGF0ZSgpOiBPYmplY3Qge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZG9tYWluOiB0aGlzLl9kb21haW4sXG4gICAgICAgICAgICBsaWQ6IHRoaXMuX2xpZCxcbiAgICAgICAgICAgIG1lc3NhZ2luZzogdGhpcy5fbWVzc2FnaW5nTWV0aG9kLCAvLyBob3cgdG8gcmV0dXJuIGxvZ2luIHJlc3BvbnNlIGZyb20gcG9wdXAgdG8gbWFpbiBmcmFtZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgX2RvbWFpbigpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKVswXS5zcGxpdCgnIycpWzBdO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGVuZm9yY2VSZWRpcmVjdEZvclNvY2lhbCgpIHtcbiAgICAgICAgcmV0dXJuIEZsYWdTZXJ2aWNlLmVuZm9yY2VBdXRoRmxvd1JlZGlyZWN0Rm9yU29jaWFsICYmIGdpZ3lhLnV0aWxzLmFycmF5LmluY2x1ZGVzKFJFRElSRUNUX09OTFlfUFJPVklERVJTLCB0aGlzLnBhcmFtc1sncHJvdmlkZXInXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0xpbmtBY2NvdW50c1YyRmxvdyh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xuXG4gICAgICBjb25zdCB7ZXJyb3JDb2RlLCAuLi5yZXN0UGFyYW1zfSA9IGdpZ3lhLnV0aWxzLlVSTC5nZXRQYXJhbXNGcm9tVVJMKHVybCkgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB8fCB7fVxuXG4gICAgICByZXR1cm4gaXNMaW5rQWNjb3VudHNWMkludGVycnVwdGlvbihlcnJvckNvZGUpICYmIGlzUHJvdmlkZXJTZXNzaW9uVmFsaWQocmVzdFBhcmFtcylcbiAgICAgIFxuICAgIH1cblxuICAgIHByaXZhdGUgZXh0cmFjdFByb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50cyhzb3VyY2VVUkw6c3RyaW5nKTogc3RyaW5nIHtcbiAgICAgIFxuICAgICAgY29uc3QgcGFyYW1zID0gZ2lneWEudXRpbHMuVVJMLmdldFBhcmFtc0Zyb21VUkwoc291cmNlVVJMKSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG5cbiAgICAgIGNvbnN0IHByb3ZpZGVyU2Vzc2lvbiA9IGdldFByb3ZpZGVyU2Vzc2lvbkZyb21QYXJhbXMocGFyYW1zKVxuXG4gICAgICByZXR1cm4gZ2lneWEudXRpbHMuSlNPTi5zZXJpYWxpemUocHJvdmlkZXJTZXNzaW9uKTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7XG4gICAgTW9kZSxcbiAgICBTREtTZXRHcm91cFRva2VuUGFyYW1zLFxuICAgIFNES0dldEdyb3VwVG9rZW5QYXJhbXMsXG4gICAgU0RLTG9nb3V0UGFyYW1zLFxuICAgIFNES1JlbW92ZUdyb3VwVG9rZW5QYXJhbXMsXG4gICAgU0RLU2V0TG9naW5Ub2tlbkV4cFBhcmFtcyxcbiAgICBTREtHZXRMb2dpblRva2VuRXhwUGFyYW1zLFxuICAgIFNES0NoZWNrVG9rZW5SZW5ld1BhcmFtcyxcbiAgICBTREtDYW5hcnlJbmRpY2F0aW9uUGFyYW1zLFxuICAgIFNES0Jhc2VQYXJhbXMsXG4gICAgRnJhbWVCYXNlUGFyYW1zLFxuICAgIEdldEdyb3VwVG9rZW5SZXNwb25zZSxcbiAgICBTREtTZXRHcm91cENvbnRleHQsXG4gICAgSVNzb1NlcnZpY2UsXG4gICAgR2V0TG9naW5Ub2tlbkV4cFJlc3BvbnNlLFxuICAgIENhbmFyeUluZGljYXRpb25SZXNwb25zZSxcbiAgICBTZXRMb2dpblRva2VuRXhwUmVzcG9uc2UsXG4gICAgR2V0R3JvdXBBcGlEb21haW5SZXNwb25zZSxcbiAgICBTZXRHcm91cEFwaURvbWFpblBhcmFtcyxcbiAgICBTREtHZXRHcm91cEFwaURvbWFpblBhcmFtcyxcbiAgICBTREtTZXRHcm91cEFwaURvbWFpblBhcmFtcyxcbiAgICBTREtMb2dvdXRSZXNwb25zZSxcbn0gZnJvbSAnc3JjL2ZpZG0vR2lneWEuSlMuU1NPL2FwcC9pbnRlcmZhY2VzJztcbmltcG9ydCB7U3NvfSBmcm9tICdzcmMvZmlkbS9HaWd5YS5KUy5TU08vYXBwL3Nzbyc7XG5pbXBvcnQge2dldFN0b3JhZ2VEb21haW59IGZyb20gJy4uLy4uL0dpZ3lhLkpzL2FwcC9VdGlscy9kb21haW5zJztcbmltcG9ydCB7Y3JlYXRlSWZyYW1lfSBmcm9tIFwiLi4vLi4vU2VydmljZVByb3h5L3V0aWxzXCI7XG5pbXBvcnQge0ZsYWdTZXJ2aWNlfSBmcm9tIFwiLi4vLi4vR2lneWEuSnMvYXBwL1NlcnZpY2VzL0ZsYWdTZXJ2aWNlXCI7XG5pbXBvcnQge1NlcnZpY2VQcm94eX0gZnJvbSAnLi4vLi4vU2VydmljZVByb3h5L1NlcnZpY2VQcm94eSc7XG5cbi8vICMjIyBTaW5nbGUgU2lnbiBPbiBhY3Jvc3MgbXVsdGlwbGUgZG9tYWlucyAjIyNcblxubGV0IGNhbGxiYWNrQ291bnRlciA9IDA7XG5leHBvcnQgdmFyIF9zdG9yZWRMb2dpblRva2VuRXhwOiBzdHJpbmc7XG5leHBvcnQgbGV0IF9yZXF1ZXN0VGltZW91dDogbnVtYmVyID0gMzAwMDtcblxuZXhwb3J0IGNsYXNzIFNzb1NlcnZpY2UgaW1wbGVtZW50cyBJU3NvU2VydmljZSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBJU3NvU2VydmljZTtcblxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRJbnN0YW5jZShzc29LZXk6IHN0cmluZyA9IGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXkpOiBQcm9taXNlPElTc29TZXJ2aWNlPiB7XG4gICAgICAgIGlmICghdGhpcy5faW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGlmICghc3NvS2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEZsYWdTZXJ2aWNlLmxvYWRTc29GcmFtZU9ubHlPbmNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcXMgPSBnaWd5YS51dGlscy5rZXlWYWx1ZS5zZXJpYWxpemUoe1xuICAgICAgICAgICAgICAgICAgICBBUElLZXk6IHNzb0tleSxcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogZ2lneWEuYnVpbGQudmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgYnVpbGQ6IGdpZ3lhLmJ1aWxkLm51bWJlciB8fCAtMSxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlS2V5OiBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSxcbiAgICAgICAgICAgICAgICAgICAgb25lRnJhbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogYCR7Z2lneWEubG9jYWxJbmZvLnByb3RvY29sfTovLyR7ZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgc3NvU2VnbWVudDogZ2lneWEucGFydG5lclNldHRpbmdzLnNzb1NlZ21lbnQgfHwgJydcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovLyR7Z2V0U3RvcmFnZURvbWFpbigpfS9ncy9zc28uaHRtPyR7cXN9YDtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNzb0FkYXB0ZXIgPSBuZXcgU2VydmljZVByb3h5KHVybClcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3NvQWRhcHRlci5pbml0KCdTU08nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBzc29BZGFwdGVyLndyYXBXaXRoPElTc29TZXJ2aWNlPihTc28pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcihgZXJyb3IgaW5pdGlhbGl6ZSBzc28gZnJhbWVgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZTogJ1Nzb1NlcnZpY2UuaW5pdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG5ldyBTc29TZXJ2aWNlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbmV3IFNzb1NlcnZpY2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5faW5zdGFuY2U7XG4gICAgfVxuXG4gICAgcHVibGljIGNoZWNrVG9rZW5SZW5ldyhsb2dpblRva2VuOiBzdHJpbmcpOiBQcm9taXNlPEdldEdyb3VwVG9rZW5SZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBjaGVja1Rva2VuUmVuZXcoe2xvZ2luVG9rZW4sIGNhbGxiYWNrOiByZXNvbHZlfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUb2tlbigpOiBQcm9taXNlPEdldEdyb3VwVG9rZW5SZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBnZXRHcm91cFRva2VuKHtjYWxsYmFjazogcmVzb2x2ZX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VG9rZW5FeHBpcmF0aW9uKCk6IFByb21pc2U8R2V0TG9naW5Ub2tlbkV4cFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGdldExvZ2luVG9rZW5FeHAoe1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwdWJsaWMgbG9nb3V0KCk6IFByb21pc2U8U0RLTG9nb3V0UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgbG9nb3V0KHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogcmVzb2x2ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVRva2VuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiAge1xuICAgICAgICAgICAgcmVtb3ZlR3JvdXBUb2tlbih7Y2FsbGJhY2s6IHJlc29sdmV9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0R3JvdXBDb250ZXh0KGdyb3VwQ29udGV4dDogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHNldEdyb3VwQ29udGV4dENvb2tpZSh7Z3JvdXBDb250ZXh0LCBjYWxsYmFjazogcmVzb2x2ZX0pXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRUb2tlbihsdDogc3RyaW5nLCBleHBpcmF0aW9uPzogbnVtYmVyIHwgc3RyaW5nLCBnbHRleHA/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgc2V0R3JvdXBUb2tlbih7XG4gICAgICAgICAgICAgICAgbHQsIGV4cGlyYXRpb24sIGdsdGV4cCwgY2FsbGJhY2s6IHJlc29sdmVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRUb2tlbkV4cGlyYXRpb24obG9naW5Ub2tlbkV4cDogc3RyaW5nLCB1c2VDYWNoZTogYm9vbGVhbiA9IHRydWUpOiBQcm9taXNlPFNldExvZ2luVG9rZW5FeHBSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICBzZXRMb2dpblRva2VuRXhwKHtcbiAgICAgICAgICAgICAgICBsb2dpblRva2VuRXhwLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlXG4gICAgICAgICAgICB9LCB1c2VDYWNoZSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBwdWJsaWMgc3luY0NhbmFyeUluZGljYXRpb24oaXNDYW5hcnk6IHN0cmluZywgY2FuYXJ5VmVyc2lvbjogc3RyaW5nKTogUHJvbWlzZTxDYW5hcnlJbmRpY2F0aW9uUmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgc3luY0NhbmFyeUluZGljYXRpb24oe2lzQ2FuYXJ5LCBjYW5hcnlWZXJzaW9uLCBjYWxsYmFjazogcmVzb2x2ZX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0R3JvdXBBcGlEb21haW4oKTogUHJvbWlzZTxHZXRHcm91cEFwaURvbWFpblJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIGdldEdyb3VwQXBpRG9tYWluKHtjYWxsYmFjazogcmVzb2x2ZX0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0R3JvdXBBcGlEb21haW4oZG9tYWluOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgc2V0R3JvdXBBcGlEb21haW4oe2NhbGxiYWNrOiByZXNvbHZlLCBkb21haW59KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBfcmVxdWVzdChcbiAgICBtb2RlOiBNb2RlLFxuICAgIHA6XG4gICAgICAgIHwgU0RLU2V0R3JvdXBUb2tlblBhcmFtc1xuICAgICAgICB8IFNES0dldEdyb3VwVG9rZW5QYXJhbXNcbiAgICAgICAgfCBTREtMb2dvdXRQYXJhbXNcbiAgICAgICAgfCBTREtSZW1vdmVHcm91cFRva2VuUGFyYW1zXG4gICAgICAgIHwgU0RLU2V0TG9naW5Ub2tlbkV4cFBhcmFtc1xuICAgICAgICB8IFNES0dldExvZ2luVG9rZW5FeHBQYXJhbXNcbiAgICAgICAgfCBTREtDaGVja1Rva2VuUmVuZXdQYXJhbXNcbiAgICAgICAgfCBTREtDYW5hcnlJbmRpY2F0aW9uUGFyYW1zXG4gICAgICAgIHwgU0RLU2V0R3JvdXBDb250ZXh0XG4pIHtcbiAgICBpZiAoIWdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXkpIHtcbiAgICAgICAgaWYgKHAgJiYgcC5jYWxsYmFjaykge1xuICAgICAgICAgICAgKHAgYXMgU0RLQmFzZVBhcmFtcykuY2FsbGJhY2soe30pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgcGFyYW1zOiBGcmFtZUJhc2VQYXJhbXM7XG4gICAgaWYgKCFwKSB7XG4gICAgICAgIHBhcmFtcyA9IHt9IGFzIGFueTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBFbnN1cmUgdGhlIHBhcmFtcyBwYXNzZWQgYXJlIG5vdCBtb2RpZmllZCBieSByZWZlcmVuY2UuXG4gICAgICAgIHBhcmFtcyA9IGdpZ3lhLnV0aWxzLm9iamVjdC5jbG9uZShwKTtcbiAgICB9XG5cbiAgICBsZXQgaWZyOiBIVE1MSUZyYW1lRWxlbWVudDtcbiAgICBsZXQgcmVxdWVzdFRpbWVvdXRJZDtcblxuICAgIGNvbnN0IGNhbGxiYWNrID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmRlYnVnKGBjbGVhbmluZyBzc28gaWZyYW1lYCk7XG5cbiAgICAgICAgLy8gY2xlYW51cCBpZnJhbWVcbiAgICAgICAgaWZyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaWZyKTtcblxuICAgICAgICBjbGVhclRpbWVvdXQocmVxdWVzdFRpbWVvdXRJZCk7XG5cbiAgICAgICAgLy8gVHlwZWNhc3QgcmVzcG9uc2UuXG4gICAgICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSAmJiB0eXBlb2YgcmVzcG9uc2UuZXJyb3JDb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmVycm9yQ29kZSA9IE51bWJlcihyZXNwb25zZS5lcnJvckNvZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmV4cGlyZXNfaW4gJiYgdHlwZW9mIHJlc3BvbnNlLmV4cGlyZXNfaW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZXhwaXJlc19pbiA9IE51bWJlcihyZXNwb25zZS5leHBpcmVzX2luKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwICYmIHAuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIChwIGFzIFNES0Jhc2VQYXJhbXMpLmNhbGxiYWNrKHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcGFyYW1zLm0gPSBtb2RlO1xuICAgIHBhcmFtcy5kID0gYCR7Z2lneWEubG9jYWxJbmZvLnByb3RvY29sfTovLyR7ZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWV9YDtcblxuICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5wb3J0KSB7XG4gICAgICAgIHBhcmFtcy5kICs9ICc6JyArIGRvY3VtZW50LmxvY2F0aW9uLnBvcnQ7XG4gICAgfVxuXG4gICAgLy8gQ2hyb21lIGNhY2hlcyB0aGUgZnJhZ21lbnQgd2hlbiBsb2FkZWQgZm9yIHRoZSBmaXJzdCB0aW1lLiB3b3JrYXJvdW5kOlxuICAgIHBhcmFtcy5jYWxsYmFja0lEID0gJ2dpZ19zc29fY2InICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAnXycgKyBjYWxsYmFja0NvdW50ZXIrKztcbiAgICBwYXJhbXMuc0FQSUtleSA9IGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5O1xuICAgIHBhcmFtc1tnaWd5YS5sb2dnZXIuY29uZmlnS2V5XSA9IEpTT04uc3RyaW5naWZ5KGdpZ3lhLmxvZ2dlci5nZXRDb25maWcoKSk7XG4gICAgY29uc3QgZnJhZ21lbnQgPSBnaWd5YS51dGlscy5rZXlWYWx1ZS5zZXJpYWxpemUocGFyYW1zKTtcblxuICAgIGNvbnN0IGlmcmFtZUxvYWRlciA9IChyZXRyaWVzID0gMCkgPT4ge1xuXG4gICAgICAgIGdpZ3lhLnV0aWxzLnhkLmFkZE1lc3NhZ2VMaXN0ZW5lcihwYXJhbXMuY2FsbGJhY2tJRCwge30sIGZhbHNlLCBjYWxsYmFjaywgZ2lneWEuXy5NZXNzYWdpbmdNZXRob2QuUG9zdE1lc3NhZ2UpO1xuICAgICAgICBpZnIgPSBfZ2V0SWZyYW1lKHBhcmFtcy5jYWxsYmFja0lEKTtcblxuICAgICAgICBjb25zdCBmbk9uTG9hZCA9ICgpID0+IHtcblxuICAgICAgICAgICAgcmVxdWVzdFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgLy8gdG90YWwgZmFpbHVyZVxuICAgICAgICAgICAgICAgIGlmIChyZXRyaWVzIDw9IDApe1xuICAgICAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoYFNTTyBDb21tdW5pY2F0aW9uIFRpbWVvdXRgLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBJRTExUHJpdmF0ZU1vZGU6IGdpZ3lhLmxvY2FsSW5mby5pc0lFMTEgJiYgIXdpbmRvdy5pbmRleGVkREIsIG1vZGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyByZXNldFxuICAgICAgICAgICAgICAgIGdpZ3lhLnV0aWxzLnhkLnJlbW92ZU1lc3NhZ2VMaXN0ZW5lcihwYXJhbXMuY2FsbGJhY2tJRCk7XG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUVsZW1lbnQoaWZyKTtcblxuICAgICAgICAgICAgICAgIC8vIHJldHJ5XG4gICAgICAgICAgICAgICAgaWZyYW1lTG9hZGVyKHJldHJpZXMgLSAxKTtcblxuICAgICAgICAgICAgfSwgX3JlcXVlc3RUaW1lb3V0KTtcblxuICAgICAgICAgICAgY29uc3QgcXMgPSBnaWd5YS51dGlscy5rZXlWYWx1ZS5zZXJpYWxpemUoe1xuICAgICAgICAgICAgICAgIEFQSUtleTogZ2lneWEucGFydG5lclNldHRpbmdzLnNzb0tleSxcbiAgICAgICAgICAgICAgICBzc29TZWdtZW50OiBnaWd5YS5wYXJ0bmVyU2V0dGluZ3Muc3NvU2VnbWVudCB8fCAnJywgLy8gVGhlcmUgaXMgbm8gZGVmYXVsdCBzZWdtZW50IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBnaWd5YS5idWlsZC52ZXJzaW9uLFxuICAgICAgICAgICAgICAgIGJ1aWxkOiBnaWd5YS5idWlsZC5udW1iZXIgfHwgLTEsIC8vIFRvIGNsZWFyIENETiBjYWNoZS4sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gc2hvdWxkIGFsd2F5cyBsb2FkIGZyb20gZ2lneWEncyBkb21haW4gZXhjZXB0IHdoZW4gb3ZlcnJpZGVuIGZvciAjNTAyNjEuXG4gICAgICAgICAgICBpZnIuc3JjID0gYGh0dHBzOi8vJHtnZXRTdG9yYWdlRG9tYWluKCl9L2dzL3Nzby5odG0/JHtxc30jJHtmcmFnbWVudH1gO1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuRE9NLnJlbW92ZUV2ZW50TGlzdGVuZXIoaWZyLCAnbG9hZCcsIGZuT25Mb2FkKTtcbiAgICAgICAgfTtcblxuICAgICAgICBnaWd5YS51dGlscy5ET00uYWRkRXZlbnRMaXN0ZW5lcihpZnIsICdsb2FkJywgZm5PbkxvYWQpO1xuXG4gICAgICAgIGdpZ3lhLmxvZ2dlci5kZWJ1Zyhgb3BlbmluZyBzc28gaWZyYW1lYCwgcGFyYW1zKTtcbiAgICAgICAgaWYgKGRvY3VtZW50LmJvZHkpIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5hcHBlbmRUb0JvZHkoaWZyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmZ1bmN0aW9ucy5pbnZva2VPblBhZ2VMb2FkKCgpID0+IGdpZ3lhLnV0aWxzLkRPTS5hcHBlbmRUb0JvZHkoaWZyKSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWZyYW1lTG9hZGVyKDMpO1xufVxuZnVuY3Rpb24gX2dldElmcmFtZShyZXF1ZXN0SWQ6IHN0cmluZyk6IEhUTUxJRnJhbWVFbGVtZW50IHtcbiAgICBsZXQgaWZyO1xuICAgIGlmIChGbGFnU2VydmljZS5oaWRlU1NPRnJhbWUpIHtcbiAgICAgICAgaWZyID0gY3JlYXRlSWZyYW1lKCdTU08gRnJhbWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgICAgLy8gQWJzb2x1dGUgcG9zaXRpb24gd2l0aCAtMTAwMHB4IGNhdXNlcyBzY3JvbGxpbmcgc2xvd2Rvd25zIG9uIG1vYmlsZSBkZXZpY2VzLlxuICAgICAgICBpZiAoZ2lneWEubG9jYWxJbmZvLmlzSU9TIHx8IGdpZ3lhLmxvY2FsSW5mby5pc0lPU0Nocm9tZSB8fCBnaWd5YS5sb2NhbEluZm8uaXNBbmRyb2lkKSB7XG4gICAgICAgICAgICBpZnIuc3R5bGUud2lkdGggPSAnMHB4JztcbiAgICAgICAgICAgIGlmci5zdHlsZS5oZWlnaHQgPSAnMHB4JztcbiAgICAgICAgICAgIGlmci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWZyLnN0eWxlLndpZHRoID0gJzMwcHgnO1xuICAgICAgICAgICAgaWZyLnN0eWxlLmhlaWdodCA9ICcxMHB4JztcbiAgICAgICAgICAgIGlmci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBpZnIuc3R5bGUudG9wID0gJy0xMDAwcHgnO1xuICAgICAgICAgICAgaWZyLnN0eWxlLmxlZnQgPSAnLTEwMDBweCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZnIuaWQgPSAnZ2lnX3Nzb18nICsgcmVxdWVzdElkO1xuICAgIGdpZ3lhLnV0aWxzLmZ1bmN0aW9ucy5hZGRTcmNUb0lGcmFtZUlmTmVlZGVkKGlmcik7XG5cbiAgICByZXR1cm4gaWZyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyb3VwVG9rZW4ocGFyYW1zPzogU0RLR2V0R3JvdXBUb2tlblBhcmFtcyk6IHZvaWQge1xuICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGB0cnlpbmcgdG8gZ2V0IHNzbyBncm91cCBsb2dpbiB0b2tlbmApO1xuXG4gICAgX3JlcXVlc3QoJ2dldFRva2VuJywge1xuICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlOiBHZXRHcm91cFRva2VuUmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIF9zdG9yZWRMb2dpblRva2VuRXhwID0gcmVzcG9uc2UuZ2x0ZXhwO1xuICAgICAgICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMuY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0R3JvdXBUb2tlbihwYXJhbXM6IFNES1NldEdyb3VwVG9rZW5QYXJhbXMpOiB2b2lkIHtcbiAgICAvLyBBZGQgY3VycmVudCBnbHRleHAgY29va2llIHRvIHRoZSBwYXJhbWV0ZXJzIGF1dG9tYXRpY2FsbHkuXG4gICAgaWYgKCFwYXJhbXMuZ2x0ZXhwKSB7XG4gICAgICAgIHBhcmFtcy5nbHRleHAgPSBnaWd5YS51dGlscy5jb29raWUuZ2V0KGBnbHRleHBfJHtnaWd5YS50aGlzU2NyaXB0LkFQSUtleX1gKTtcbiAgICB9XG4gICAgX3JlcXVlc3QoJ3NldFRva2VuJywgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvZ291dChwYXJhbXM/OiBTREtMb2dvdXRQYXJhbXMpOiB2b2lkIHtcbiAgICBfcmVxdWVzdCgnbG9nb3V0JywgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUdyb3VwVG9rZW4ocGFyYW1zPzogU0RLUmVtb3ZlR3JvdXBUb2tlblBhcmFtcyk6IHZvaWQge1xuICAgIF9yZXF1ZXN0KCdyZW1vdmVUb2tlbicsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRMb2dpblRva2VuRXhwKHBhcmFtczogU0RLU2V0TG9naW5Ub2tlbkV4cFBhcmFtcywgdXNlQ2FjaGUgPSB0cnVlKTogdm9pZCB7XG4gICAgLy8gRG9uJ3Qgc3RvcmUgdGhlIGxvZ2luIHRva2VuIGFnYWluIGlmIHdlJ3ZlIGFscmVhZHkgc3RvcmVkIGl0LlxuICAgIGlmICh1c2VDYWNoZSAmJiBfc3RvcmVkTG9naW5Ub2tlbkV4cCAmJiBwYXJhbXMubG9naW5Ub2tlbkV4cCA9PT0gX3N0b3JlZExvZ2luVG9rZW5FeHApIHtcbiAgICAgICAgaWYgKHBhcmFtcy5jYWxsYmFjaykge1xuICAgICAgICAgICAgcGFyYW1zLmNhbGxiYWNrKHsgZ2x0ZXhwOiBfc3RvcmVkTG9naW5Ub2tlbkV4cCB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIF9zdG9yZWRMb2dpblRva2VuRXhwID0gcGFyYW1zLmxvZ2luVG9rZW5FeHA7XG4gICAgX3JlcXVlc3QoJ3NldExvZ2luVG9rZW5FeHAnLCBwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9naW5Ub2tlbkV4cChwYXJhbXM6IFNES0dldExvZ2luVG9rZW5FeHBQYXJhbXMpOiB2b2lkIHtcbiAgICBfcmVxdWVzdCgnZ2V0TG9naW5Ub2tlbkV4cCcsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1Rva2VuUmVuZXcocGFyYW1zOiBTREtDaGVja1Rva2VuUmVuZXdQYXJhbXMpOiB2b2lkIHtcbiAgICBnaWd5YS5sb2dnZXIuaW5mbyhgdmVyaWZ5aW5nIGxvZ2luIHRva2VuIHdpdGggc3NvIGdyb3VwYCk7XG4gICAgX3JlcXVlc3QoJ2NoZWNrVG9rZW5SZW5ldycsIHBhcmFtcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzeW5jQ2FuYXJ5SW5kaWNhdGlvbihwYXJhbXM6IFNES0NhbmFyeUluZGljYXRpb25QYXJhbXMpOiB2b2lkIHtcbiAgICBfcmVxdWVzdCgnc3luY0NhbmFyeUluZGljYXRpb24nLCBwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0R3JvdXBDb250ZXh0Q29va2llKHBhcmFtczogU0RLU2V0R3JvdXBDb250ZXh0KXtcbiAgICBfcmVxdWVzdCgnc2V0R3JvdXBDb250ZXh0JywgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEdyb3VwQXBpRG9tYWluKHBhcmFtczogU0RLU2V0R3JvdXBBcGlEb21haW5QYXJhbXMpOiB2b2lkIHtcbiAgICBfcmVxdWVzdCgnc2V0R3JvdXBBcGlEb21haW4nLCBwYXJhbXMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JvdXBBcGlEb21haW4ocGFyYW1zOiBTREtHZXRHcm91cEFwaURvbWFpblBhcmFtcyl7XG4gICAgX3JlcXVlc3QoJ2dldEdyb3VwQXBpRG9tYWluJywgcGFyYW1zKTtcbn1cbiIsImltcG9ydCB7IEdldEdyb3VwVG9rZW5SZXNwb25zZSB9IGZyb20gJ3NyYy9maWRtL0dpZ3lhLkpTLlNTTy9hcHAvaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBTc29TZXJ2aWNlIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9Tc29TZXJ2aWNlJztcbmltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7IHNlc3Npb25EYXRhIH0gIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9TZXNzaW9uU2VydmljZSc7XG5pbXBvcnQge0ZsYWdTZXJ2aWNlfSBmcm9tICAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1NlcnZpY2VzL0ZsYWdTZXJ2aWNlJztcblxuLy8gTG9hZCBhbmQgc2F2ZSB0b2tlbnMgYmFzZWQgb24gQVBJIGtleXNcbmxldCBfY3VyU2Vzc2lvbkV4cGlyYXRpb246IG51bWJlcjtcbmxldCBfYmVhcmVyVG9rZW4gPSBudWxsO1xuY29uc3QgX3RyaWVkR0FDcyA9IHt9O1xuZXhwb3J0IGNvbnN0IGFjdGl2ZU5hbWVzcGFjZXMgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkR2x0RXhwKGdsdGV4cDogc3RyaW5nID0gZ2V0R2x0ZXhwQ29va2llKCkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIWdsdGV4cCB8fCBnaWd5YS51dGlscy5nbHRleHAuaXNWYWxpZChnbHRleHApO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEdsdGV4cENvb2tpZShBUElLZXk6IHN0cmluZyA9IGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KSB7XG4gICAgcmV0dXJuIGdpZ3lhLnV0aWxzLmNvb2tpZS5nZXQoZ2V0R2x0Q29va2llS2V5KEFQSUtleSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldEdsdGV4cChnbHRleHA6IHN0cmluZywgQVBJS2V5OiBzdHJpbmcgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgIGlmIChnbHRleHAgJiYgIWlzR2lneWFDb29raWVEb21haW4oKSkge1xuICAgICAgICBnaWd5YS51dGlscy5jb29raWUucmVtb3ZlKGdldEdsdENvb2tpZUtleShBUElLZXkpKTtcblxuICAgICAgICBpZihGbGFnU2VydmljZS5zZXRDb29raWVTYW1lU2l0ZUxheFNlc3Npb24pIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmNvb2tpZS5zZXQoZ2V0R2x0Q29va2llS2V5KEFQSUtleSksIGdsdGV4cCwgbnVsbCwgbnVsbCwgbnVsbCwgJ0xheCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuY29va2llLnNldChnZXRHbHRDb29raWVLZXkoQVBJS2V5KSwgZ2x0ZXhwKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0R2x0Q29va2llS2V5KEFQSUtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGdsdGV4cF8ke0FQSUtleX1gO1xufVxuXG5mdW5jdGlvbiBfZ2V0VG9rZW5Db29raWVOYW1lKEFQSUtleSA9IGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KSB7XG4gICAgaWYgKEFQSUtleSkge1xuICAgICAgICByZXR1cm4gJ2dsdF8nICsgQVBJS2V5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnX2dpZ19sdCc7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldChBUElLZXkgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgIGNvbnN0IGx0ID0gZ2lneWEudXRpbHMuY29va2llLmdldChfZ2V0VG9rZW5Db29raWVOYW1lKEFQSUtleSkpO1xuICAgIGlmIChsdCkge1xuICAgICAgICByZXR1cm4gbHQuc3BsaXQoJ3wnKVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0KEFQSUtleTogc3RyaW5nLCBsb2dpbl90b2tlbjogc3RyaW5nLCBleHBpcmVzX2luPzogbnVtYmVyIHwgc3RyaW5nLCBzZXNzaW9uRXhwaXJhdGlvbj86IG51bWJlcikge1xuICAgIGdpZ3lhLnV0aWxzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdnaWd5YVNldHRpbmdzJyk7XG5cbiAgICBnaWd5YS5sb2dnZXIuaW5mbyhgc2V0dGluZyBhIG5ldyBsb2dpbiB0b2tlbmApO1xuXG4gICAgaWYgKCFBUElLZXkpIHtcbiAgICAgICAgQVBJS2V5ID0gZ2lneWEudGhpc1NjcmlwdC5BUElLZXk7XG4gICAgfVxuICAgIGlmIChBUElLZXkpIHtcbiAgICAgICAgaWYoRmxhZ1NlcnZpY2Uuc2V0Q29va2llU2FtZVNpdGVMYXhTZXNzaW9uKSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5jb29raWUuc2V0KCdnbHRfJyArIEFQSUtleSwgbG9naW5fdG9rZW4sIGV4cGlyZXNfaW4sIG51bGwsIG51bGwsICdMYXgnKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEudXRpbHMuY29va2llLnNldCgnZ2x0XycgKyBBUElLZXksIGxvZ2luX3Rva2VuLCBleHBpcmVzX2luKTtcbiAgICAgICAgfVxuICAgICAgICBnaWd5YS51dGlscy5jb29raWUucmVtb3ZlKCdnYWNfJyArIEFQSUtleSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYoRmxhZ1NlcnZpY2Uuc2V0Q29va2llU2FtZVNpdGVMYXhTZXNzaW9uKSB7XG4gICAgICAgICAgICBnaWd5YS51dGlscy5jb29raWUuc2V0KCdfZ2lnX2x0JywgbG9naW5fdG9rZW4sIGV4cGlyZXNfaW4sIG51bGwsIG51bGwsICdMYXgnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmNvb2tpZS5zZXQoJ19naWdfbHQnLCBsb2dpbl90b2tlbiwgZXhwaXJlc19pbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfY3VyU2Vzc2lvbkV4cGlyYXRpb24gPSBzZXNzaW9uRXhwaXJhdGlvbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50U2Vzc2lvbkV4cGlyYXRpb24oKSB7XG4gICAgcmV0dXJuIF9jdXJTZXNzaW9uRXhwaXJhdGlvbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRHQUNDb29raWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZ2lneWEudGhpc1NjcmlwdC5BUElLZXkgJiYgZ2lneWEudXRpbHMuY29va2llLmdldCgnZ2FjXycgKyBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSlcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRGcm9tQXV0aENvZGUoYXV0aENvZGU6IHN0cmluZykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgc2V0RnJvbUdBQyh7fSwgcmVzb2x2ZSwgYXV0aENvZGUpO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldEZyb21HQUMocGFyYW1zOiBPYmplY3QsIGNhbGxiYWNrOiBGdW5jdGlvbiwgZ2FjOiBzdHJpbmcgPSBnZXRHQUNDb29raWUoKSkge1xuICAgIGlmIChnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgICAgICBpZiAoZ2FjICYmICFwYXJhbXNbJ25ldmVyVHJ5R0FDJ10pIHtcbiAgICAgICAgICAgIC8vIFNvbWV0aW1lcyBnYWMgaXMgc2V0IHdpdGggc3Vycm91bmRpbmcgZG91YmxlLXF1b3RlcyAobGlrZSBpbiBqYXZhKS4gU3RyaXAgcXVvdGVzLlxuICAgICAgICAgICAgaWYgKGdhYy5jaGFyQXQoMCkgPT09ICdcIicgJiYgZ2FjLmNoYXJBdChnYWMubGVuZ3RoIC0gMSkgPT09ICdcIicpIHtcbiAgICAgICAgICAgICAgICBnYWMgPSBnYWMuc3Vic3RyaW5nKDEsIGdhYy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKF90cmllZEdBQ3NbZ2FjXSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7IC8vIEFscmVhZHkgdHJpZWQsIGRvbid0IHRyeSBhZ2Fpbi5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdHJpZWRHQUNzW2dhY10gPSB0cnVlO1xuXG4gICAgICAgICAgICBnaWd5YS5zb2NpYWxpemUudXBkYXRlUmVmVUlEKCk7XG5cbiAgICAgICAgICAgIGdpZ3lhLnNvY2lhbGl6ZS5ub3RpZnlMb2dpbihcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBuZXZlclRyeUdBQzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXV0aENvZGU6IGdhYyxcbiAgICAgICAgICAgICAgICAgICAgQVBJS2V5OiBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSxcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50X2lkOiBnaWd5YS50aGlzU2NyaXB0LkFQSUtleVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbnRlbnRpb25hbGx5IHdlJ3JlIG5vdCByYWlzaW5nIG9uTG9naW4gZXZlbnQsIGFzIG5vIGxvZ2luIHdhcyBtYWRlLCBqdXN0IGVzdGFibGlzaGVkICh2ZXJpZmllZCBpbiBidWcgNDM0MTkpLlxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5jb29raWUucmVtb3ZlKCdnYWNfJyArIGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5ldmVyVHJ5R0FDIGlzIHVzZWQgdG8gYXZvaWQgdHJ5aW5nIHNldEZyb21HYWMgZm9yZXZlciBpZiB0aGUgY29va2llIHdhc24ndCByZW1vdmVkICh3aGVuIGEgd3JvbmcgYmFzZURvbWFpbiBpcyB1c2VkKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEuc29jaWFsaXplLnJlZnJlc2hVSSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV2ZXJUcnlHQUM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldEZyb21Tc29SZXNwb25zZShyZXM6IEdldEdyb3VwVG9rZW5SZXNwb25zZSwgQVBJS2V5OiBzdHJpbmcgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyByZXNvbHZlID0+IHtcbiAgICAgICAgaWYgKCFyZXMpIHJldHVybjtcbiAgICAgICAgc3dpdGNoIChyZXMuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlVOQVVUSE9SSVpFRF9VU0VSOlxuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBubyBncm91cCBzZXNzaW9uIGZvdW5kYCk7XG4gICAgICAgICAgICAgICAgcmVtb3ZlKEFQSUtleSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLklOVkFMSURfVE9LRU46XG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGV4aXN0aW5nIGdyb3VwIHNlc3Npb24gd2FzIHJldm9rZWRgKTtcbiAgICAgICAgICAgICAgICByZW1vdmUoQVBJS2V5KTtcbiAgICAgICAgICAgICAgICBnaWd5YS5ldmVudHMuZ2xvYmFsLmRpc3BhdGNoV2hlbkhhbmRsZXJBZGRlZCh7ZXZlbnROYW1lOiAnYWNjb3VudHMubG9nb3V0J30pO1xuICAgICAgICAgICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlckFkZGVkKHtldmVudE5hbWU6ICdsb2dvdXQnfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLlRPS0VOX0hBU19SRU5FV0VEOlxuICAgICAgICAgICAgY2FzZSBHU0Vycm9ycy5PSzpcbiAgICAgICAgICAgICAgICBpZiAoIXJlcy5sb2dpbl90b2tlbikgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYG5ldyBzZXNzaW9uIGZyb20gZ3JvdXBgKTtcblxuICAgICAgICAgICAgICAgIGxldCBleHBpcmVzX2luOiBudW1iZXIgfCBzdHJpbmc7XG4gICAgICAgICAgICAgICAgbGV0IGdyb3VwQ29udGV4dDogYW55O1xuICAgICAgICAgICAgICAgIGlmIChyZXMuZ3JvdXBDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwQ29udGV4dCA9IEpTT04ucGFyc2UocmVzLmdyb3VwQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaXNHaWd5YUNvb2tpZURvbWFpbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEl0IHNob3VsZCBuZXZlciBleHBpcmUgaWYgYSBnbHRleHAgaXMgcHJlc2VudC5cbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc19pbiA9ICFyZXMuZ2x0ZXhwID8gcmVzLmV4cGlyZXNfaW4gOiBnaWd5YS51dGlscy5jb29raWUuZ2V0SW5maW5pdGVFeHBpcmF0aW9uVGltZUluU2Vjb25kcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBsb2dpbiB0b2tlbiBjb29raWVcbiAgICAgICAgICAgICAgICAgICAgc2V0KEFQSUtleSwgcmVzLmxvZ2luX3Rva2VuLCBleHBpcmVzX2luKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBnbHRleHBDb29raWVOYW1lID0gYGdsdGV4cF8ke0FQSUtleX1gO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmdsdGV4cCAmJiAhZ2lneWEudXRpbHMuY29va2llLmdldChnbHRleHBDb29raWVOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMuY29va2llLnNldChnbHRleHBDb29raWVOYW1lLCByZXMuZ2x0ZXhwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF3YWl0IGRpc3BhdGNoTG9naW5FdmVudCh7ZXhwaXJlc19pbiwgZ3JvdXBDb250ZXh0fSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEdTRXJyb3JzLk5FVFdPUktfRVJST1I6XG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmVycm9yKGBnaWd5YTogZXJyb3IgbG9hZGluZyBzc28gZnJhbWVgLCB7cmVzfSk7XG4gICAgICAgICAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyc0FkZGVkKFsnYWNjb3VudHMuZXJyb3InLCAnc29jaWFsaXplLmVycm9yJ10sIHJlcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcihgc3NvOiB1bnN1cHBvcnRlZCByZXNwb25zZWApO1xuICAgICAgICAgICAgICAgIHRocm93ICdnaWd5YTogdW5zdXBwb3J0ZWQgcmVzcG9uc2UgZnJvbSBzc28nO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaXNwYXRjaExvZ2luRXZlbnQoZXZlbnRQYXJhbXMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgZ2lneWEudXRpbHMucXVldWUuaG9sZCgndmVyaWZ5TG9naW4nLCAnQVBJJyk7XG4gICAgICAgIGdpZ3lhLmFjY291bnRzLnZlcmlmeUxvZ2luKHtcbiAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlLCAvLyBpZ25vcmUgdGhlIGFwaSBxdWV1ZVxuICAgICAgICAgICAgc3VwcHJlc3NMb2dpbkV2ZW50OiB0cnVlLCAvLyB0aGUgY2FsbGJhY2sgYmVsb3cgd2lsbCB0cmlnZ2VyIHRoZSBsb2dpbiBldmVudHNcbiAgICAgICAgICAgIGluY2x1ZGU6IGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLm1lcmdlQ29tbWFTZXBhcmF0ZWRWYWx1ZXMoJ3Byb2ZpbGUsZGF0YScsIGdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZlsnaW5jbHVkZSddKSxcbiAgICAgICAgICAgIGV4dHJhUHJvZmlsZUZpZWxkczogJ3NhbWxEYXRhJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhY2NvdW50SW5mb1JlcyA9PiB7XG4gICAgICAgICAgICAgICAgZ2lneWEudXRpbHMucXVldWUucmVsZWFzZSgndmVyaWZ5TG9naW4nLCAnQVBJJyk7IC8vIHJlbGVhc2UgdGhlIGFwaSBxdWV1ZVxuICAgICAgICAgICAgICAgIHNlc3Npb25EYXRhLnNldElzU2Vzc2lvblZlcmlmaWVkKGdldCgpLCBhY2NvdW50SW5mb1Jlcy5lcnJvckNvZGUgPT0gR1NFcnJvcnMuT0spO1xuXG4gICAgICAgICAgICAgICAgLy8gdXNlIHdoYXRldmVyIGZpZWxkIHlvdSBuZWVkIGZyb20gYWNjb3VudEluZm9SZXMgbm93IGJlZm9yZSBhY2NvdW50SW5mb1JlcyB3aWxsIGJlIG92ZXJyaWRkZW4gKHN1Y2ggYXMgJ3NvdXJjZScpXG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlID0gYWNjb3VudEluZm9SZXMuc291cmNlO1xuXG4gICAgICAgICAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyQWRkZWQoeyBldmVudE5hbWU6ICdzb2NpYWxpemUubG9naW4nIH0sIG51bGwsXG4gICAgICAgICAgICAgICAgICAgIChldmVudE9iajogT2JqZWN0LCBjYWxsYmFjazogRnVuY3Rpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnRPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE9iaiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmogPSBnaWd5YS51dGlscy5vYmplY3QubWVyZ2UoW2V2ZW50T2JqLCBldmVudFBhcmFtc10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY291bnRJbmZvUmVzLmVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLnNvY2lhbGl6ZS5nZXRVc2VySW5mbyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25JRHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhRmllbGRzOiAnc2FtbERhdGEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogdXNlckluZm9SZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJJbmZvUmVzLmVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqID0gZ2lneWEuXy5hZGRVc2VySW5mb1RvRXZlbnQodXNlckluZm9SZXMsIHtldmVudE5hbWU6ICdsb2dpbid9LCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6aW5nIGV2ZW50IGZpZWxkcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE9ialsnc291cmNlJ10gPSBzb3VyY2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmpbJ25ld1VzZXInXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqWydwcm92aWRlciddID0gJ3NpdGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqWydsb2dpbk1vZGUnXSA9ICdzdGFuZGFyZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50T2JqWyd1c2VyJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmpbJ3VzZXInXS5lcnJvckNvZGUgPSB1c2VySW5mb1Jlcy5lcnJvckNvZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqWyd1c2VyJ10uY2FsbElkID0gdXNlckluZm9SZXMuY2FsbElkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJbmZvUmVzLmlkX3Rva2VuICYmIChldmVudE9ialsnaWRfdG9rZW4nXSA9IGFjY291bnRJbmZvUmVzLmlkX3Rva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmpbJ2NhbmNlbCddID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50T2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE9ialsnY2FuY2VsJ10gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50T2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBnaWd5YS5ldmVudHMuZ2xvYmFsLmRpc3BhdGNoV2hlbkhhbmRsZXJBZGRlZCh7IGV2ZW50TmFtZTogJ2FjY291bnRzLmxvZ2luJyB9LCBudWxsLCBhc3luYyAoZXZlbnRPYmo6IE9iamVjdCwgY2FsbGJhY2s6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXZlbnRPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50T2JqID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBldmVudE9iaiA9IGdpZ3lhLnV0aWxzLm9iamVjdC5tZXJnZShbZXZlbnRPYmosIGV2ZW50UGFyYW1zXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY291bnRJbmZvUmVzLmVycm9yQ29kZSA9PSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRPYmpbJ2V2ZW50TmFtZSddID0gJ2FjY291bnRzLmxvZ2luJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWNjb3VudEluZm9SZXMuVUlEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudEluZm9SZXMgPSBhd2FpdCBuZXcgUHJvbWlzZTxhbnk+KHIgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuZ2V0QWNjb3VudEluZm8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IHIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlOiBnaWd5YS51dGlscy5zdHJpbmdVdGlscy5tZXJnZUNvbW1hU2VwYXJhdGVkVmFsdWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwcm9maWxlLGRhdGEnLCBnaWd5YS50aGlzU2NyaXB0Lmdsb2JhbENvbmZbJ2luY2x1ZGUnXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS51dGlscy5vYmplY3QuZXh0cmFjdFByb3BlcnRpZXMoYWNjb3VudEluZm9SZXMsIGV2ZW50T2JqLCAnc2lnbmF0dXJlfFVJRFNpZ3x0aW1lc3RhbXB8VUlEU2lnbmF0dXJlfHNpZ25hdHVyZVRpbWVzdGFtcHxVSUR8cHJvZmlsZXxkYXRhfGRhdGFDZW50ZXJ8aWRfdG9rZW58Z3JvdXBzJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudE9ialsnY2FuY2VsJ10gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGV2ZW50T2JqKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZShBUElLZXkgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgIGlmIChnZXQoQVBJS2V5KSkge1xuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgcmVtb3ZpbmcgbG9naW4gdG9rZW5gKTtcbiAgICB9XG4gICAgZ2lneWEudXRpbHMuY29va2llLnJlbW92ZShgZ2x0XyR7QVBJS2V5fWApO1xuICAgIGdpZ3lhLnV0aWxzLmNvb2tpZS5yZW1vdmUoJ19naWdfbHQnKTtcbiAgICBnaWd5YS51dGlscy5jb29raWUucmVtb3ZlKGBnbHRleHBfJHtBUElLZXl9YCk7XG4gICAgaWYgKGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXkpIHtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHJlbW92aW5nIGdyb3VwIGxvZ2luIHRva2VuYCk7XG4gICAgICAgIGNvbnN0IHNlcnZpY2UgPSBhd2FpdCBTc29TZXJ2aWNlLmdldEluc3RhbmNlKCk7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlLnJlbW92ZVRva2VuKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2tlblBhcmFtKEFQSUtleTogc3RyaW5nLCBwYXJhbU5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IGx0ID0gZ2lneWEudXRpbHMuY29va2llLmdldChfZ2V0VG9rZW5Db29raWVOYW1lKEFQSUtleSkpO1xuICAgIGlmIChsdCkge1xuICAgICAgICBjb25zdCBsdFNlZ3MgPSBsdC5zcGxpdCgnfCcpO1xuICAgICAgICBpZiAobHRTZWdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBnaWd5YS51dGlscy5rZXlWYWx1ZS5kZXNlcmlhbGl6ZShsdFNlZ3NbMV0pW3BhcmFtTmFtZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGlzR2lneWFDb29raWVEb21haW4oKSB7XG4gICAgY29uc3QgY29va2llRG9tYWluID0gZ2lneWEudXRpbHMuY29va2llLmdldERlZmF1bHREb21haW4oKTtcbiAgICByZXR1cm4gZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMuZW5kc1dpdGgoY29va2llRG9tYWluLCBnaWd5YS5kZWZhdWx0QXBpRG9tYWluKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRCZWFyZXJUb2tlbihiZWFyZXJUb2tlbjogc3RyaW5nKSB7XG4gICAgZ2lneWEubG9nZ2VyLmluZm8oYHNldHRpbmcgYSBuZXcgQmVhcmVyIHRva2VuYCk7XG4gICAgX2JlYXJlclRva2VuID0gJ0JlYXJlciAnICsgYmVhcmVyVG9rZW47XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QmVhcmVyVG9rZW4oKSB7XG4gICAgcmV0dXJuIF9iZWFyZXJUb2tlbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVCZWFyZXJUb2tlbigpIHtcbiAgICBnaWd5YS5sb2dnZXIuaW5mbyhgQmVhcmVyIHRva2VuIHJlbW92ZWRgKTtcbiAgICBfYmVhcmVyVG9rZW4gPSBudWxsO1xufVxuIiwiaW1wb3J0IHtJQXBpU2VydmljZSwgSUFwaVNlcnZpY2VCb290c3RyYXBJbmZvLCBJQXBpU2VydmljZUluaXRJbmZvfSBmcm9tICdzcmMvY29yZS9BcGlTZXJ2aWNlL2FwcC9pbnRlcmZhY2VzJztcbmltcG9ydCB7XG4gICAgQXBpQWRhcHRlclNldHRpbmdzLFxuICAgIElBcGlBZGFwdGVyLFxuICAgIElBcGlBZGFwdGVySW5pdFNldHRpbmdzLFxuICAgIElHbWlkVGlja2V0UmVzcG9uc2Vcbn0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvaW50ZXJmYWNlcy9JQXBpQWRhcHRlcic7XG5pbXBvcnQgKiBhcyB0b2tlblN0b3JlIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvVG9rZW5TdG9yZSc7XG5pbXBvcnQge0FwaVJlcXVlc3R9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvQXBpUmVxdWVzdCc7XG5pbXBvcnQge09hdXRoUmVxdWVzdH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9PYXV0aFJlcXVlc3QnO1xuaW1wb3J0IHtCYXNlUmVxdWVzdH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9CYXNlUmVxdWVzdCc7XG5pbXBvcnQge1NlcnZpY2VQcm94eX0gZnJvbSAnc3JjL2NvcmUvU2VydmljZVByb3h5L1NlcnZpY2VQcm94eSc7XG5pbXBvcnQge0FwaVNlcnZpY2V9IGZyb20gJ3NyYy9jb3JlL0FwaVNlcnZpY2UvYXBwL0FwaVNlcnZpY2UnO1xuaW1wb3J0IHtHU0Vycm9yc30gZnJvbSAnLi4vLi4vR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7QWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyLCBDb29raWVTdG9yYWdlQWRhcHRlcn0gZnJvbSAnLi4vLi4vR2lneWEuSnMvYXBwL1V0aWxzL2xvY2FsU3RvcmFnZSc7XG5pbXBvcnQge0dtaWRQcm92aWRlcn0gZnJvbSAnc3JjL2NvcmUvQXBpU2VydmljZS9hcHAvR21pZFByb3ZpZGVyJztcbmltcG9ydCB7Z2V0U3RvcmFnZURvbWFpbn0gZnJvbSAnLi4vLi4vR2lneWEuSnMvYXBwL1V0aWxzL2RvbWFpbnMnO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSAnLi4vLi4vR2lneWEuSnMvYXBwL1NlcnZpY2VzL0ZsYWdTZXJ2aWNlJztcbmltcG9ydCB7c2Vzc2lvbkRhdGF9IGZyb20gJy4uLy4uL0dpZ3lhLkpzL2FwcC9TZXJ2aWNlcy9TZXNzaW9uU2VydmljZSc7XG5pbXBvcnQge3NpdGVEYXRhfSBmcm9tICcuLi8uLi9HaWd5YS5Kcy9hcHAvU2VydmljZXMvU2l0ZURhdGEnO1xuaW1wb3J0IHtJU3NvU2VydmljZX0gZnJvbSAnc3JjL2ZpZG0vR2lneWEuSlMuU1NPL2FwcC9pbnRlcmZhY2VzJztcbmltcG9ydCB7U3NvU2VydmljZX0gZnJvbSAnLi9Tc29TZXJ2aWNlJztcbmltcG9ydCB7Y2hlY2tHcm91cEludml0YXRpb259IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9JbnRlcm5hbEZsb3dzJztcbmltcG9ydCB7IEdJR1lBX0lOVEVSTkFMX1BBUkFNX1BSRUZJWCwgR0lHWUFfUEFSQU1fUFJFRklYIH0gZnJvbSAnc3JjL2FjY291bnRzL2NvbnN0YW50cyc7XG5pbXBvcnQge3Byb21pc2lmeX0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3Byb21pc2UnO1xuaW1wb3J0IHsgTG9naW5Nb2RlcyB9IGZyb20gJy4uLy4uLy4uL2FjY291bnRzL0dpZ3lhLkpTLlBsdWdpbi5zY3JlZW5TZXQyL2FwcC9Mb2dpbk1vZGVzJztcbmltcG9ydCB7IGV4dHJhY3RQcm92aWRlclNlc3Npb25zLCBnZXRQcm92aWRlclNlc3Npb25Gb3JMaW5rQWNjb3VudHNBZnRlclJlZGlyZWN0LCBoYXNQcm92aWRlclNlc3Npb25Gb3JMaW5rQWNjb3VudHNJblBhcmFtc0FmdGVyUmVkaXJlY3QsIElMaW5rQWNjb3VudHNBZnRlclJlZGlyZWN0UGFyYW1zIH0gZnJvbSAnLi4vLi4vR2lneWEuSnMuUGx1Z2luL2FwcC9VdGlscy9nZW5lcmFsL2xpbmtBY2NvdW50c0hlbHBlcic7XG5cbmltcG9ydCB7IFNlc3Npb25FeHBpcmF0aW9uIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL2NvbnN0cyc7XG5cbmlmICghZ2lneWEuaXNHaWd5YSkgZ2lneWEuaXNHaWd5YSA9IHRydWU7XG5leHBvcnQgbGV0IGFwaVNlcnZpY2U6IElBcGlTZXJ2aWNlO1xuZXhwb3J0IGNvbnN0IHdlYkFkYXB0ZXJOYW1lID0gJ1dlYic7XG5leHBvcnQgZnVuY3Rpb24gbmV3QXBpQWRhcHRlcihhZGFwdGVyU2V0dGluZ3M6IElBcGlBZGFwdGVySW5pdFNldHRpbmdzKTogSUFwaUFkYXB0ZXIge1xuICAgIHJldHVybiBuZXcgV2ViQWRhcHRlcihhZGFwdGVyU2V0dGluZ3MsIG5ldyBDb29raWVTdG9yYWdlQWRhcHRlcigpKTtcbn1cblxuaW50ZXJmYWNlIEdpZ3lhUmVzcG9uc2Uge1xuICAgIGVycm9yRGV0YWlscz86IHN0cmluZyxcbiAgICBlcnJvckNvZGU/OiBudW1iZXIsXG4gICAgZXJyb3JGbGFncz86IHN0cmluZ1xufVxuXG5leHBvcnQgY2xhc3MgV2ViQWRhcHRlciBpbXBsZW1lbnRzIElBcGlBZGFwdGVyIHtcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nID0gd2ViQWRhcHRlck5hbWU7XG4gICAgcHJpdmF0ZSBfYXBpU2VydmljZTogSUFwaVNlcnZpY2U7XG4gICAgcHJpdmF0ZSBfc3NvU2VydmljZTogSVNzb1NlcnZpY2U7XG4gICAgcHJpdmF0ZSBfZ21pZFRpY2tldDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIHByaXZhdGUgX3JlQm9vdHN0cmFwQ291bnQgPSAwO1xuICAgIHByaXZhdGUgc3RhdGljIHNlcnZlckdsdFRvZ2dsZU5hbWUgPSBgZW5hYmxlU2VydmVyR0xUYDtcbiAgICBwcml2YXRlIHN0YXRpYyBib290c3RyYXBJbmRpY2F0aW9uQ29va2llTmFtZSA9IChhcGlLZXkpID0+IGBnaWdfYm9vdHN0cmFwXyR7YXBpS2V5fWA7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFkYXB0ZXJTZXR0aW5ncz86IElBcGlBZGFwdGVySW5pdFNldHRpbmdzLCBwcml2YXRlIF9zdG9yYWdlPzogQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyKSB7fVxuXG4gICAgcHVibGljIGdldFN0b3JhZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBpbml0KGluaXRDYWxsYmFjazogKCkgPT4gdm9pZCwgcmV0cmllcyA9IDApOiBQcm9taXNlPHZvaWQ+IHtcblxuICAgICAgICAvLyBXcmFwcGVkIGluIGEgdHJ5L2NhdGNoIGJsb2NrIHNvIHRoYXQgd2UnbGwgY2F0Y2ggQU5ZIGVycm9yIHdoZW4gZmFpbGluZyB0byBib290c3RyYXAuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgYWN0dWFsSW5kaWNhdGlvbiA9IEdtaWRQcm92aWRlci5nZXRHbWlkQm9vdHN0cmFwSW5kaWNhdGlvblRva2VuKGdpZ3lhKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRpY2F0aW9uID0gdGhpcy5nZXRTdG9yYWdlKCkuZ2V0SXRlbShXZWJBZGFwdGVyLmJvb3RzdHJhcEluZGljYXRpb25Db29raWVOYW1lKGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KSk7XG4gICAgICAgICAgICBjb25zdCBoYXNCb290c3RyYXBwZWQgPSBjdXJyZW50SW5kaWNhdGlvbiA9PT0gYWN0dWFsSW5kaWNhdGlvbjtcblxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGhhcyBib290c3RyYXBwZWQ6ICR7aGFzQm9vdHN0cmFwcGVkfWApO1xuXG4gICAgICAgICAgICBsZXQgbG9nID0gZ2lneWEubG9nZ2VyLmdyb3VwKCdjcmVhdGUgYXBpIHNlcnZpY2UnKTtcblxuICAgICAgICAgICAgdGhpcy5fc3NvU2VydmljZSA9IGF3YWl0IFNzb1NlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcblxuICAgICAgICAgICAgZ2lneWEuXy5hcGlBZGFwdGVycy53ZWIuYXBpU2VydmljZSA9IHRoaXMuX2FwaVNlcnZpY2UgPSBhd2FpdCB0aGlzLmNyZWF0ZUFwaVNlcnZpY2UoaGFzQm9vdHN0cmFwcGVkKTtcbiAgICAgICAgICAgIGxvZy5lbmQoKTtcblxuICAgICAgICAgICAgY29uc3QgcmVnZW5lcmF0ZUdtaWQgPSBHbWlkUHJvdmlkZXIuc2hvdWxkUmVnZW5lcmF0ZUdtaWQoZ2lneWEsIHRoaXMuaGFzU2Vzc2lvblRva2VuKCkpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJvb3RzdHJhcEFwaVNlcnZpY2UocmVnZW5lcmF0ZUdtaWQpO1xuXG4gICAgICAgICAgICBnaWd5YS51dGlscy5mdW5jdGlvbnMuY3JlYXRlQWxpYXMoJ2dpZ3lhLmF1dGgubG9naW5Ub2tlbi5nZXQnLCB0b2tlblN0b3JlLmdldCk7IC8vIFRPRE8gY2FuIHRoaXMgYmUgcmVtb3ZlZD9cblxuICAgICAgICAgICAgaWYgKGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXkgJiYgZ2lneWEuY2FuYXJ5ICYmIGdpZ3lhLmNhbmFyeS5jb25maWcucHJvYmFiaWxpdHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmNDYW5hcnlXaXRoU1NPKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBpc1ZhbGlkU2Vzc2lvbjogYm9vbGVhbiA9IGF3YWl0IHRoaXMuZXN0YWJsaXNoU2Vzc2lvbigpO1xuXG4gICAgICAgICAgICBpZiAoaXNWYWxpZFNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5zZXJ2aWNlcy5hY2NvdW50U2VydmljZS52ZXJpZnlMb2dpbigpLnRoZW4obG9naW5WZXJpZmllZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbG9naW5WZXJpZmllZCkgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaCh7IGV2ZW50TmFtZTogJ2xvZ291dCxhY2NvdW50cy5sb2dvdXQnIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNoZWNrUmV0dXJuRnJvbVVSTCgpO1xuXG4gICAgICAgICAgICBpZiAoIWdpZ3lhLl8uaXNUcnVzdGVkRG9tYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXBpU2VydmljZS5zZW5kUmVwb3J0KCd1bnRydXN0ZWQgZG9tYWluJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBsb2NhdGlvbi5ob3N0bmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydXN0ZWREb21haW5zOiBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MuYmFzZURvbWFpbnNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHVzZXIgaXMgJHtpc1ZhbGlkU2Vzc2lvbiA/ICcnIDogJ25vdCAnfWxvZ2dlZC1pbmApO1xuXG4gICAgICAgICAgICBpZiAoIWdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXkpIHtcbiAgICAgICAgICAgICAgICBpbml0Q2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHNzbyBncm91cCBzeW5jIC0gJHtnaWd5YS5wYXJ0bmVyU2V0dGluZ3Muc3NvS2V5fWApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuU3RvcmUuc2V0RnJvbVNzb1Jlc3BvbnNlKGUpO1xuICAgICAgICAgICAgICAgICAgICBpbml0Q2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlc3Npb25EYXRhLmlzU2Vzc2lvblZlcmlmaWVkKHRva2VuU3RvcmUuZ2V0KCkpICYmIGlzVmFsaWRTZXNzaW9uICYmIEZsYWdTZXJ2aWNlLnVzZVNlc3Npb25WZXJpZnkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcHJvbWlzaWZ5KGdpZ3lhLmFjY291bnRzLnNlc3Npb24udmVyaWZ5LCB7IGlnbm9yZUFwaVF1ZXVlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkU2Vzc2lvbiA9IHJlcy5lcnJvckNvZGUgPT09IEdTRXJyb3JzLk9LO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuSW5mbyA9IGlzVmFsaWRTZXNzaW9uXG4gICAgICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5fc3NvU2VydmljZT8uY2hlY2tUb2tlblJlbmV3KHRva2VuU3RvcmUuZ2V0KCkpXG4gICAgICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5fc3NvU2VydmljZT8uZ2V0VG9rZW4oKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0b2tlbkluZm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuXG4gICAgICAgICAgICBpZiAocmV0cmllcyA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbml0KGluaXRDYWxsYmFjaywgcmV0cmllcyAtIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoYGVycm9yIGJvb3RzdHJhcHBpbmcgc2RrYCwge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdib290c3RyYXAgZmFpbGVkJyxcbiAgICAgICAgICAgICAgICBzY29wZTogJ1dlYkFkYXB0ZXIuaW5pdCcsXG4gICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZGVidWcoYHJlbW92aW5nIGJvb3RzdHJhcCBpbmRpY2F0aW9uYCk7XG4gICAgICAgICAgICB0aGlzLmdldFN0b3JhZ2UoKS5yZW1vdmVJdGVtKFdlYkFkYXB0ZXIuYm9vdHN0cmFwSW5kaWNhdGlvbkNvb2tpZU5hbWUoZ2lneWEudGhpc1NjcmlwdC5BUElLZXkpKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VFdmVudE9iamVjdCA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdGQUlMX1RPX0JPT1RTVFJBUCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzTWVzc2FnZTogJ1dlYiBTREsgZmFpbGVkIHRvIGJvb3RzdHJhcCcsXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5ORVRXT1JLX0VSUk9SLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogYFdlYiBTREsgZmFpbGVkIHRvIGJvb3RzdHJhcDogJHtlcnJvci5tZXNzYWdlIHx8IGVycm9yfWAsXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdpZ3lhLmV2ZW50cy5kaXNwYXRjaEVycm9yRnJvbVJlc3BvbnNlKHtldmVudE5hbWU6ICdpbml0J30sIHJlc3BvbnNlRXZlbnRPYmplY3QsKTtcbiAgICAgICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlcnNBZGRlZChbJ2FjY291bnRzLmVycm9yJywgJ3NvY2lhbGl6ZS5lcnJvciddLCByZXNwb25zZUV2ZW50T2JqZWN0KTtcbiAgICAgICAgICAgIGluaXRDYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIGFzeW5jIGJvb3RzdHJhcEFwaVNlcnZpY2UoZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuXG4gICAgICAgIGxldCBpbmZvOiBJQXBpU2VydmljZUJvb3RzdHJhcEluZm87XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpbmZvID0gYXdhaXQgdGhpcy5fYXBpU2VydmljZS5ib290c3RyYXAoZm9yY2UpO1xuICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuZXJyb3IoYGVycm9yIGJvb3RzdHJhcHBpbmcgc2RrYCwgeyB0eXBlOiAnd2ViU2RrQm9vdHN0cmFwIGZhaWxlZCcsIHNjb3BlOiAnQXBpU2VydmljZS5ib290c3RyYXAnLCBleCB9KTtcbiAgICAgICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlcnNBZGRlZChbJ2FjY291bnRzLmVycm9yJywgJ3NvY2lhbGl6ZS5lcnJvciddLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnRkFJTF9UT19CT09UU1RSQVAnLFxuICAgICAgICAgICAgICAgIHN0YXR1c01lc3NhZ2U6ICdXZWIgU0RLIGJvb3RzdHJhcCBmYWlsdXJlIC0gQVBJU2VydmljZSBib290c3RyYXAnLFxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuTkVUV09SS19FUlJPUixcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGBXZWIgU0RLIGJvb3RzdHJhcCBmYWlsdXJlOiAke2V4Lm1lc3NhZ2UgfHwgZXh9YH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmZvPy50aWNrZXRJbmZvKSB7XG4gICAgICAgICAgICB0aGlzLnNldEdtaWRUaWNrZXQoaW5mby50aWNrZXRJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbmZvPy5oYXNHbWlkKSB7XG4gICAgICAgICAgICB0aGlzLmJvb3RzdHJhcEluZGljYXRpb24gPSBpbmZvLmhhc0dtaWQ7XG4gICAgICAgICAgICBzaXRlRGF0YS5kaWRGb3JjZWRCb290c3RyYXAgPSBGbGFnU2VydmljZS5mb3JjZVdlYlNka0Jvb3RzdHJhcCA/IGluZm8uaGFzR21pZCA6IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHN5bmNDYW5hcnlXaXRoU1NPKCkge1xuICAgICAgICBjb25zdCBpc0NhbmFyeSA9IHRoaXMuZ2V0U3RvcmFnZSgpLmdldEl0ZW0oZ2lneWEuY2FuYXJ5LmNvbmZpZy5jb29raWVzTmFtZXMuaXNDYW5hcnkpO1xuICAgICAgICBjb25zdCBjYW5hcnlWZXJzaW9uID0gdGhpcy5nZXRTdG9yYWdlKCkuZ2V0SXRlbShnaWd5YS5jYW5hcnkuY29uZmlnLmNvb2tpZXNOYW1lcy52ZXJzaW9uKTtcbiAgICAgICAgY29uc3QgY2FuYXJ5SW5mbyA9IGF3YWl0IHRoaXMuX3Nzb1NlcnZpY2U/LnN5bmNDYW5hcnlJbmRpY2F0aW9uKGlzQ2FuYXJ5LCBjYW5hcnlWZXJzaW9uKTtcbiAgICAgICAgaWYgKGNhbmFyeUluZm8/LmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0spIHtcbiAgICAgICAgICAgIGlmIChjYW5hcnlJbmZvLmlzQ2FuYXJ5ICYmIGNhbmFyeUluZm8uaXNDYW5hcnkgIT09IGlzQ2FuYXJ5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRTdG9yYWdlKCkuc2V0SXRlbShnaWd5YS5jYW5hcnkuY29uZmlnLmNvb2tpZXNOYW1lcy5pc0NhbmFyeSwgY2FuYXJ5SW5mby5pc0NhbmFyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FuYXJ5SW5mby5jYW5hcnlWZXJzaW9uICYmIGNhbmFyeUluZm8uY2FuYXJ5VmVyc2lvbiAhPT0gY2FuYXJ5VmVyc2lvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3RvcmFnZSgpLnNldEl0ZW0oZ2lneWEuY2FuYXJ5LmNvbmZpZy5jb29raWVzTmFtZXMudmVyc2lvbiwgY2FuYXJ5SW5mby5jYW5hcnlWZXJzaW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlQXBpU2VydmljZShoYXNCb290c3RyYXBwZWQ6IGJvb2xlYW4pOiBQcm9taXNlPElBcGlTZXJ2aWNlPiB7XG5cbiAgICAgICAgY29uc3Qgc3RvcmFnZVByb3RvY29sID0gZ2lneWEudGhpc1NjcmlwdC5nbG9iYWxDb25mWydzdG9yYWdlUHJvdG9jb2xPdmVycmlkZSddIHx8IGBodHRwc2A7XG4gICAgICAgIGNvbnN0IGxvZ2dlckNvbmZpZyA9IGAke2dpZ3lhLmxvZ2dlci5jb25maWdLZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGdpZ3lhLmxvZ2dlci5nZXRDb25maWcoKSkpfWA7XG5cbiAgICAgICAgY29uc3QgYXBpU2VydmljZVVybCA9IGAke3N0b3JhZ2VQcm90b2NvbH06Ly8ke2dldFN0b3JhZ2VEb21haW4oKX0vZ3Mvd2ViU2RrL0FwaS5hc3B4P2FwaUtleT0ke2VuY29kZVVSSUNvbXBvbmVudChnaWd5YS50aGlzU2NyaXB0LkFQSUtleSl9JnZlcnNpb249JHtcbiAgICAgICAgICAgIGdpZ3lhLmJ1aWxkLnZlcnNpb25cbiAgICAgICAgfSZidWlsZD0ke2dpZ3lhLmJ1aWxkLm51bWJlcn0jb3JpZ2luPSR7ZG9jdW1lbnQubG9jYXRpb24uaHJlZn0mJHtsb2dnZXJDb25maWd9YDtcblxuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgb3BlbmluZyBhcGkgZnJhbWVgKTtcbiAgICAgICAgY29uc3QgYXBpU2VydmljZVByb3h5ID0gbmV3IFNlcnZpY2VQcm94eShhcGlTZXJ2aWNlVXJsKTtcblxuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgY3JlYXRpbmcgYXBpIHNlcnZpY2VgKTtcbiAgICAgICAgY29uc3QgaW5pdEluZm8gPSBhd2FpdCBhcGlTZXJ2aWNlUHJveHkuaW5pdDxJQXBpU2VydmljZUluaXRJbmZvPignQXBpIFNlcnZpY2UnKTtcblxuICAgICAgICBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MucGx1Z2lucy5hcGlEb21haW4gPSBpbml0SW5mby5hcGlEb21haW47XG4gICAgICAgIGdpZ3lhLl8uZ2V0QXBpRG9tYWluID0gZ2lneWEuXy5hcGlEb21haW5GYWN0b3J5KGluaXRJbmZvLmFwaURvbWFpbiwgZ2lneWEuZGVmYXVsdEFwaURvbWFpbik7XG5cbiAgICAgICAgY29uc3QgYXBpRG9tYWluID0gZ2lneWEuXy5VcmkucGFyc2UoaW5pdEluZm8uYXBpRG9tYWluKTtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGFwaSBkb21haW4gaXM6ICR7YXBpRG9tYWlufWApO1xuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgYXBpIGRvbWFpbiBpcyAke2luaXRJbmZvLmlzR3JvdXBBcGlEb21haW4gPyAnJyA6ICdub3QgJ31ncm91cCBkb21haW5gKTtcblxuICAgICAgICAvLyB3aGVuIGN1cnJlbnQgZG9tYWluIGlzIG9uIHRoZSBkZWZhdWx0LCB0aGVuIHdlIHdhbnQgdG8gc2tpcCBib290c3RyYXBwaW5nIChTU09HYXRld2F5LmFzcHgpXG4gICAgICAgIGNvbnN0IGZvcmNlU2tpcEJvb3RzdHJhcCA9IGdpZ3lhLnRoaXNTY3JpcHQuVVJMUGFyYW1zWydib290c3RyYXAnXSA9PT0gJ2ZhbHNlJztcblxuICAgICAgICAvLyBpbiBnaWd5YSdzIGRvbWFpblxuICAgICAgICBpZiAoYXBpRG9tYWluLmlzQmFzZU9mKGFwaVNlcnZpY2VVcmwpICYmICFmb3JjZVNraXBCb290c3RyYXAgJiYgIWdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZlsnc3RvcmFnZURvbWFpbk92ZXJyaWRlJ10pIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBhcGkgZG9tYWluIGlzIGdpZ3lhJ3Mgc28ga2VlcCB3b3JraW5nIHdpdGggZnJhbWVgKTtcbiAgICAgICAgICAgIHJldHVybiBhcGlTZXJ2aWNlUHJveHkud3JhcFdpdGg8SUFwaVNlcnZpY2U+KEFwaVNlcnZpY2UpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVpdGhlciBwcmVmaXhlZCBkb21haW4gb3IgZ3JvdXAgZG9tYWluXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGNsb3NpbmcgYXBpIGZyYW1lYCk7XG4gICAgICAgICAgICBhcGlTZXJ2aWNlUHJveHkuc3RvcDx2b2lkPih0cnVlKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IGdpZ3lhLmxvZ2dlci5pbmZvKCdhcGkgZnJhbWUgY2xvc2VkJykpOyAvLyBubyBuZWVkIHRvIHdhaXQgZm9yIHRoaXNcblxuICAgICAgICAgICAgaWYgKGZvcmNlU2tpcEJvb3RzdHJhcCkge1xuICAgICAgICAgICAgICAgIGhhc0Jvb3RzdHJhcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluaXRJbmZvLmhhc0dyb3VwQXBpRG9tYWluQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGdyb3VwIGFwaSBkb21haW4gY2hhbmdlZCwgd2UgbmVlZCB0byByZS1ib290c3RyYXBcbiAgICAgICAgICAgICAgICAvLyAoaXQgd29uJ3QgY2hhbmdlIGlmIHRoZSBzaXRlIGlzbid0IGluIHNzbyBncm91cClcbiAgICAgICAgICAgICAgICBoYXNCb290c3RyYXBwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGlzQXBpRG9tYWluRmlyc3RQYXJ0eSA9IHRydWU7XG4gICAgICAgICAgICBpZihGbGFnU2VydmljZS5hbHdheXNDaGVja0Nvb2tpZVNhdmUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpc0FwaURvbWFpbkZpcnN0UGFydHkgPSBnaWd5YS5fLlVyaS5wYXJzZShnaWd5YS5sb2NhbEluZm8uYmFzZURvbWFpbiB8fCAnJykuaXNCYXNlT2YoYXBpRG9tYWluLmRvbWFpbik7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIucmVwb3J0KGBFcnJvciBldmFsdWF0aW5nIGZpcnN0IHBhcnR5IGRvbWFpbmAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VEb21haW46IGdpZ3lhLmxvY2FsSW5mby5iYXNlRG9tYWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpRG9tYWluOiBhcGlEb21haW4uZG9tYWluXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgY3JlYXRlIGFuZCB3b3JrIHdpdGggYXBpIHNlcnZpY2UgZnJvbSB0b3AgZnJhbWVgKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXBpU2VydmljZShnaWd5YS50aGlzU2NyaXB0LkFQSUtleSwgaGFzQm9vdHN0cmFwcGVkLCB7XG4gICAgICAgICAgICAgICAgb3JpZ2luRG9tYWluOiBsb2NhdGlvbi5ocmVmLFxuICAgICAgICAgICAgICAgIGlzR3JvdXBBcGlEb21haW46IGluaXRJbmZvLmlzR3JvdXBBcGlEb21haW4sXG4gICAgICAgICAgICAgICAgZ2V0QXBpRG9tYWluOiBnaWd5YS5fLmdldEFwaURvbWFpbixcbiAgICAgICAgICAgICAgICBpc0FwaURvbWFpbkZpcnN0UGFydHksIC8vIGFsdGhvdWdoIGdyb3VwIGFwaSBkb21haW4gbWF5IG5vdFxuICAgICAgICAgICAgICAgIGhhc0dyb3VwQXBpRG9tYWluQ2hhbmdlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2FuU2F2ZUdtaWRBc0Nvb2tpZTogaW5pdEluZm8uY2FuU2F2ZUdtaWRBc0Nvb2tpZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc1Nlc3Npb25WYWxpZChwYXJhbXM6IE9iamVjdCA9IHt9LCBjYWxsYmFjaz86IChpc1ZhbGlkOiBib29sZWFuKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIHRva2VuU3RvcmUuc2V0RnJvbUdBQyhwYXJhbXMsICgpID0+IHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuaGFzU2Vzc2lvblRva2VuKHBhcmFtcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYXNTZXNzaW9uVG9rZW4ocGFyYW1zOiBPYmplY3QgPSB7fSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdG9rZW5TdG9yZS5nZXQocGFyYW1zWydBUElLZXknXSkgIT0gbnVsbCB8fCBwYXJhbXNbJ29hdXRoX3Rva2VuJ10gIT0gbnVsbDtcbiAgICB9XG5cbiAgICByZWdpc3RlckZvck5hbWVzcGFjZUV2ZW50cyhuYW1lc3BhY2U6IHN0cmluZyk6IHZvaWQge31cblxuICAgIG9uUGx1Z2luRXZlbnQoZXZlbnQ6IGFueSk6IHZvaWQge31cblxuICAgIG9uSlNMb2cobG9nVHlwZTogc3RyaW5nLCBsb2dJbmZvOiBzdHJpbmcpOiB2b2lkIHt9XG5cbiAgICBhc3luYyBzZW5kUmVxdWVzdChtZXRob2ROYW1lOiBzdHJpbmcsIHBhcmFtczogT2JqZWN0LCBjYWxsYmFjaz86IChyZXNwb25zZTogT2JqZWN0KSA9PiB2b2lkLCBzZXR0aW5nczogQXBpQWRhcHRlclNldHRpbmdzID0ge30pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5iZWZvcmVSZXF1ZXN0KG1ldGhvZE5hbWUsIHBhcmFtcywgc2V0dGluZ3MpO1xuXG4gICAgICAgIHZhciBmbkFmdGVyUmVzcG9uc2UgPSAocmVzcG9uc2UsIGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFmdGVyUmVzcG9uc2UocHJveHlSZXEsIHJlc3BvbnNlLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhnaWd5YS51dGlscy5vYmplY3QuY2xvbmUocmVzcG9uc2UsIHRydWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHByb3h5UmVxQ2FsbGJhY2sgPSByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBmbkFmdGVyUmVzcG9uc2UocmVzcG9uc2UsIGNhbGxiYWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHByb3h5UmVxID0gbmV3IEFwaVJlcXVlc3QobWV0aG9kTmFtZSwgcGFyYW1zLCBwcm94eVJlcUNhbGxiYWNrLCBzZXR0aW5ncyk7XG4gICAgICAgIHByb3h5UmVxLnNlbmQoKTtcblxuICAgICAgICBpZiAoZ2lneWEuXy5sb2dvdXRNZXRob2RzW21ldGhvZE5hbWVdICYmIGdpZ3lhLl8ubG9nb3V0QmVoYXZpb3VyLmxvZ291dEJlZm9yZVNlcnZlclJlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyU2Vzc2lvbihwYXJhbXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xlYXJTZXNzaW9uKHBhcmFtczogT2JqZWN0LCBjYWxsYmFjaz86IChyZXM/OiBhbnkpID0+IHZvaWQpIHtcbiAgICAgICAgdG9rZW5TdG9yZS5yZW1vdmUocGFyYW1zWydBUElLZXknXSk7XG5cbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNldEdsdGV4cEZyb21TU08oYXBpS2V5OiBzdHJpbmcgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBpZiAoZ2lneWEucGFydG5lclNldHRpbmdzLnNzb0tleSAmJiAhdG9rZW5TdG9yZS5pc1ZhbGlkR2x0RXhwKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuX3Nzb1NlcnZpY2U/LmdldFRva2VuRXhwaXJhdGlvbigpXG4gICAgICAgICAgICBpZiAocmVzPy5lcnJvckNvZGUgPT09IEdTRXJyb3JzLk9LICYmIHJlcy5nbHRleHAgJiYgdG9rZW5TdG9yZS5pc1ZhbGlkR2x0RXhwKHJlcy5nbHRleHApKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5TdG9yZS5zZXRHbHRleHAocmVzLmdsdGV4cCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHNlbmRPYXV0aFJlcXVlc3QobWV0aG9kTmFtZTogc3RyaW5nLCBwYXJhbXM6IE9iamVjdCwgY2FsbGJhY2s/OiAocmVzcG9uc2U6IE9iamVjdCkgPT4gdm9pZCwgc2V0dGluZ3M/OiBBcGlBZGFwdGVyU2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVSZXF1ZXN0KG1ldGhvZE5hbWUsIHBhcmFtcywgc2V0dGluZ3MpO1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gYGh0dHBzOi8vJHtnaWd5YS5fLmdldEFwaURvbWFpbignc29jaWFsaXplJyl9YDtcbiAgICAgICAgdmFyIHJlcTogT2F1dGhSZXF1ZXN0ID0gbmV3IE9hdXRoUmVxdWVzdChcbiAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgYmFzZVVybCxcbiAgICAgICAgICAgIG1ldGhvZE5hbWUsXG4gICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZnRlclJlc3BvbnNlKHJlcSwgcmVzcG9uc2UsIChyZXM6IHsgZXJyb3JDb2RlOiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmVycm9yQ29kZSAhPSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzb2NpYWwgbG9naW4gKG9hdXRoIHJlcXVlc3QpIG1ha2VzIGdpZ3lhJ3MgZG9tYWluIHZpc2l0ZWQgc28gd2UgcmUtYm9vdHN0cmFwLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib290c3RyYXBBcGlTZXJ2aWNlKCkudGhlbigoKSA9PiBjYWxsYmFjayhyZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldHRpbmdzLFxuICAgICAgICApO1xuICAgICAgICByZXEuc2VuZCgpO1xuICAgIH1cblxuICAgIGFzeW5jIGJlZm9yZVJlcXVlc3QobWV0aG9kTmFtZTogc3RyaW5nLCBwYXJhbXM6IE9iamVjdCwgc2V0dGluZ3M6IEFwaUFkYXB0ZXJTZXR0aW5ncyA9IHt9KSB7XG4gICAgICAgIGlmIChzZXR0aW5ncy5jbGVhclNlc3Npb24gfHwgKHNldHRpbmdzLmNsZWFyU2Vzc2lvbkNvbmRpdGlvbiAmJiBzZXR0aW5ncy5jbGVhclNlc3Npb25Db25kaXRpb24ocGFyYW1zKSkpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBjbGVhcmluZyBzZXNzaW9uIGJlZm9yZSByZXF1ZXN0IGZvciAke21ldGhvZE5hbWV9YCk7XG4gICAgICAgICAgICB0b2tlblN0b3JlLnJlbW92ZShwYXJhbXNbJ0FQSUtleSddKTtcbiAgICAgICAgfVxuICAgICAgICBpZihOdW1iZXIocGFyYW1zWydzZXNzaW9uRXhwaXJhdGlvbiddKSA9PT0gLTIgJiYgZ2lneWEudGhpc1NjcmlwdD8uZ2xvYmFsQ29uZj8uWydzdG9yYWdlRG9tYWluT3ZlcnJpZGUnXSkge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYHNlc3Npb24gZXhwaXJhdGlvbiAtMiB3YXMgY29udmVydGVkIHRvIDEgeWVhciBmaXhlZCBleHBpcmF0aW9uYCk7XG4gICAgICAgICAgICBwYXJhbXNbJ3Nlc3Npb25FeHBpcmF0aW9uJ10gPSBnaWd5YS51dGlscy5jb29raWUuZ2V0SW5maW5pdGVFeHBpcmF0aW9uVGltZUluU2Vjb25kcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBhZnRlclJlc3BvbnNlKHJlcTogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBHaWd5YVJlc3BvbnNlLCBjYWxsYmFjazogKHJlc3BvbnNlOiBPYmplY3QpID0+IHZvaWQpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yRGV0YWlscyA9PSAnTWlzc2luZyBjb29raWUnXG4gICAgICAgIHx8IHJlc3BvbnNlLmVycm9yRGV0YWlscyA9PSAnU2Vzc2lvbiBpcyBpbnZhbGlkIChNaXNzaW5nIERldmljZUlkKSdcbiAgICAgICAgfHwgcmVzcG9uc2UuZXJyb3JEZXRhaWxzID09ICdNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlcjogZ2NpZCBvciB1Y2lkIGNvb2tpZSdcbiAgICAgICAgfHwgKHJlc3BvbnNlLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuSU5WQUxJRF9QQVJBTUVURVJfVkFMVUUgICYmIHJlc3BvbnNlLmVycm9yRmxhZ3MgPT09ICdtaXNzaW5nS2V5JykpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBtaXNzaW5nIGNvb2tpZSBlcnJvciAtIGZvcmNpbmcgYm9vdHN0cmFwYCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVCb290c3RyYXBDb3VudCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLnJlcG9ydCgnbXVsdGlwbGUgcmVCb290c3RyYXAgZXJyb3InKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZUJvb3RzdHJhcENvdW50ID0gMDtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9yZUJvb3RzdHJhcENvdW50Kys7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJvb3RzdHJhcEFwaVNlcnZpY2UodHJ1ZSlcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGByZXNlbmRpbmcgcmVxdWVzdGApO1xuICAgICAgICAgICAgcmVxLnNlbmQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3JlQm9vdHN0cmFwQ291bnQgPSAwO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVUb2tlblJlc3BvbnNlKHJlcSwgcmVzcG9uc2UsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ291dFNzb0lmTmVlZGVkKHJlcSwgcmVzcG9uc2UsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblNES0V2ZW50KGV2ZW50T2JqZWN0OiBPYmplY3QpOiB2b2lkIHt9XG5cbiAgICBnZXRUb2tlblBhcmFtKEFQSUtleSwgcGFyYW1OYW1lKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRva2VuU3RvcmUuZ2V0VG9rZW5QYXJhbShBUElLZXksIHBhcmFtTmFtZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBlc3RhYmxpc2hTZXNzaW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBjb25zdCBvVVJMUGFyYW1zID0gZ2lneWEudXRpbHMuVVJMLmdldFBhcmFtc0Zyb21VUkwoZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XG5cbiAgICAgICAgaWYgKG9VUkxQYXJhbXNbJ2dpZ19hY3Rpb25zJ10gPT09ICdzc28ubG9naW4nICYmICF0aGlzLmhhc1Nlc3Npb25Ub2tlbigpICYmIG9VUkxQYXJhbXNbJ2F1dGhDb2RlJ10pIHtcbiAgICAgICAgICAgIGF3YWl0IHRva2VuU3RvcmUuc2V0RnJvbUF1dGhDb2RlKG9VUkxQYXJhbXNbJ2F1dGhDb2RlJ10pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFzU2Vzc2lvblRva2VuKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlPGJvb2xlYW4+KHJlc29sdmUgPT4gdGhpcy5pc1Nlc3Npb25WYWxpZCh1bmRlZmluZWQsIGlzVmFsaWQgPT4gcmVzb2x2ZShpc1ZhbGlkKSkpO1xuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrUmV0dXJuRnJvbVVSTCgpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgY29taW5nIGJhY2sgZnJvbSBhdXRoZmxvdyByZWRpcmVjdFxuICAgICAgICBjb25zdCBvVVJMUGFyYW1zID0gZ2lneWEudXRpbHMuVVJMLmdldFBhcmFtc0Zyb21VUkwoZG9jdW1lbnQubG9jYXRpb24uaHJlZik7XG5cbiAgICAgICAgLy8gT3JkZXIgaXMgaW1wb3J0YW50LiBEbyBub3QgY2hhbmdlLlxuICAgICAgICBjb25zdCBHSUdZQV9QUkVGSVhFUyA9IG5ldyBSZWdFeHAoYCR7R0lHWUFfSU5URVJOQUxfUEFSQU1fUFJFRklYfXwke0dJR1lBX1BBUkFNX1BSRUZJWH1gKVxuICAgICAgICBjb25zdCBwYXJhbXMgPSBnaWd5YS51dGlscy5vYmplY3QucmVtb3ZlUHJvcGVydGllc1ByZWZpeChvVVJMUGFyYW1zLCBHSUdZQV9QUkVGSVhFUyk7XG4gICAgICAgIGNvbnN0IGdpZ0FjdGlvbnMgPSBvVVJMUGFyYW1zWydnaWdfYWN0aW9ucyddO1xuXG4gICAgICAgIGlmIChnaWdBY3Rpb25zID09PSAnc3NvLmxvZ2luJyAmJiAhb1VSTFBhcmFtc1snYXV0aENvZGUnXSkge1xuICAgICAgICAgICAgdGhpcy5zeW5jU3NvTG9naW4ocGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnaWdBY3Rpb25zID09PSAnbWFnaWNMaW5rJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVNYWdpY0xpbmsocGFyYW1zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnaWdBY3Rpb25zID09PSAnY29uZmlybUludml0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrR3JvdXBJbnZpdGF0aW9uKHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnNob3VsZEZpbmFsaXplTGlua0FjY291bnRzVjIob1VSTFBhcmFtcyBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5hbGl6ZUxpbmtBY2NvdW50cyhvVVJMUGFyYW1zKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvVVJMUGFyYW1zWydnaWdfZXZlbnRzJ10pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKG9VUkxQYXJhbXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkFDQ09VTlRTX0xJTktFRCkge1xuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuZmluYWxpemVSZWdpc3RyYXRpb24oe1xuICAgICAgICAgICAgICAgIHJlZ1Rva2VuOiBvVVJMUGFyYW1zWydyZWdUb2tlbiddLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLl9zc29TZXJ2aWNlPy5zZXRUb2tlbih0b2tlblN0b3JlLmdldCgpLCBvVVJMUGFyYW1zWydleHBpcmVzX2luJ10gfHwgU2Vzc2lvbkV4cGlyYXRpb24uRm9yZXZlcilcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9VUkxQYXJhbXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLk9LICAmJiB0b2tlblN0b3JlLmdldCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGByZXR1cm5lZCBmcm9tIHJlZGlyZWN0aW9uIHdpdGggZXJyb3IgY29kZWApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zc29TZXJ2aWNlPy5zZXRUb2tlbih0b2tlblN0b3JlLmdldCgpLCBvVVJMUGFyYW1zWydleHBpcmVzX2luJ10gfHwgU2Vzc2lvbkV4cGlyYXRpb24uRm9yZXZlcik7XG4gICAgICAgICAgICBjb25zdCBldmVudHMgPSBvVVJMUGFyYW1zWydnaWdfZXZlbnRzJ10uc3BsaXQoJywnKTtcblxuICAgICAgICAgICAgLy8gQWNjb3VudHMgaXMgZW5hYmxlZFxuICAgICAgICAgICAgaWYgKGdpZ3lhLnV0aWxzLmFycmF5LmluZGV4T2YoZXZlbnRzLCAnYWNjb3VudHMubG9naW4nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5hY2NvdW50cy5nZXRBY2NvdW50SW5mbyh7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhUHJvZmlsZUZpZWxkczogJ3NhbWxEYXRhJyxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZTogZ2lneWEudXRpbHMuc3RyaW5nVXRpbHMubWVyZ2VDb21tYVNlcGFyYXRlZFZhbHVlcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdwcm9maWxlLGRhdGEsdXNlcmluZm8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEudGhpc1NjcmlwdC5nbG9iYWxDb25mWydpbmNsdWRlJ10pLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogYWNjb3VudEluZm9SZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudHNFdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnYWNjb3VudHMubG9naW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEudXRpbHMub2JqZWN0LmV4dHJhY3RQcm9wZXJ0aWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJbmZvUmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRzRXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpZ25hdHVyZXxVSURTaWd8dGltZXN0YW1wfFVJRFNpZ25hdHVyZXxzaWduYXR1cmVUaW1lc3RhbXB8VUlEfHByb2ZpbGV8ZGF0YXxpZF90b2tlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyQWRkZWQoYWNjb3VudHNFdmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnaWd5YS51dGlscy5hcnJheS5pbmRleE9mKGV2ZW50cywgJ3NvY2lhbGl6ZS5sb2dpbicpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvY2lhbGl6ZUV2ZW50ID0gZ2lneWEuXy5hZGRVc2VySW5mb1RvRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRJbmZvUmVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdzb2NpYWxpemUubG9naW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnaWd5YS5ldmVudHMuZ2xvYmFsLmRpc3BhdGNoV2hlbkhhbmRsZXJBZGRlZChzb2NpYWxpemVFdmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGdpZ3lhLnNvY2lhbGl6ZS5nZXRVc2VySW5mbyh7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25JRHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhRmllbGRzOiAnc2FtbERhdGEnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogdXNlckluZm9SZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvRXZlbnQgPSBnaWd5YS5fLmFkZFVzZXJJbmZvVG9FdmVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckluZm9SZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogZXZlbnRzW2ldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyQWRkZWQob0V2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlTWFnaWNMaW5rKG1hZ2ljTGlua1BhcmFtczogT2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgZ2lneWEuYWNjb3VudHMuYXV0aC5tYWdpY2xpbmsuZW1haWwubG9naW4oe1xuICAgICAgICAgICAgICAgIC4uLm1hZ2ljTGlua1BhcmFtcyxcbiAgICAgICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZT8uZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyc0FkZGVkKFsnYWNjb3VudHMuZXJyb3InLCAnc29jaWFsaXplLmVycm9yJ10sIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBmaW5hbGl6ZUxpbmtBY2NvdW50cyhwYXJhbXM6IElMaW5rQWNjb3VudHNBZnRlclJlZGlyZWN0UGFyYW1zKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwcm92aWRlclNlc3Npb24gPSBnZXRQcm92aWRlclNlc3Npb25Gb3JMaW5rQWNjb3VudHNBZnRlclJlZGlyZWN0KHBhcmFtcylcbiAgXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsXG4gICAgICAgICAgaWdub3JlSW50ZXJydXB0aW9uczogdHJ1ZSxcbiAgICAgICAgICBsb2dpbk1vZGU6IExvZ2luTW9kZXMuY29ubmVjdC5uYW1lLFxuICAgICAgICAgIHByb3ZpZGVyU2Vzc2lvbnM6IGV4dHJhY3RQcm92aWRlclNlc3Npb25zKHByb3ZpZGVyU2Vzc2lvbiksXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcHJvbWlzaWZ5KGdpZ3lhLmFjY291bnRzLm5vdGlmeVNvY2lhbExvZ2luLCBwYXlsb2FkKVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUgIT09IEdTRXJyb3JzLk9LKSB7XG4gICAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyc0FkZGVkKFsnYWNjb3VudHMuZXJyb3InLCAnc29jaWFsaXplLmVycm9yJ10sIHJlc3BvbnNlKTtcbiAgICAgICAgfSBcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGdpZ3lhLmV2ZW50cy5nbG9iYWwuZGlzcGF0Y2hXaGVuSGFuZGxlcnNBZGRlZChbJ2FjY291bnRzLmVycm9yJywgJ3NvY2lhbGl6ZS5lcnJvciddLCBlcnJvcilcbiAgICAgIH1cblxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvdWxkRmluYWxpemVMaW5rQWNjb3VudHNWMih1cmxQYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiBib29sZWFuIHtcbiAgICAgIHJldHVybiBOdW1iZXIodXJsUGFyYW1zLmVycm9yQ29kZSkgPT09IEdTRXJyb3JzLk9LICYmIGhhc1Byb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50c0luUGFyYW1zQWZ0ZXJSZWRpcmVjdCh1cmxQYXJhbXMpXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzZXROZXdMb2dpblRva2VuRnJvbVJlc3BvbnNlKHJlcTogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBPYmplY3QsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIHZhciBuZXdMb2dpblRva2VuOiBzdHJpbmcgPSByZXNwb25zZVsnc2Vzc2lvbkluZm8nXSA/IHJlc3BvbnNlWydzZXNzaW9uSW5mbyddWydsb2dpbl90b2tlbiddIDogcmVzcG9uc2VbJ2xvZ2luX3Rva2VuJ107XG4gICAgICAgIGlmIChuZXdMb2dpblRva2VuKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0Zha2VUb2tlbihuZXdMb2dpblRva2VuKSkge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBmYWtlIGxvZ2luIHRva2VuIHJldHVybmVkIChubyBnbWlkKSAtIGZvcmNpbmcgYm9vdHN0cmFwYCk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ib290c3RyYXBBcGlTZXJ2aWNlKHRydWUpO1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGByZXNlbmRpbmcgdGhlIGxvZ2luIHJlcXVlc3RgKTtcbiAgICAgICAgICAgICAgICByZXEuc2VuZCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGV4cGlyZXNJbiA9IHJlc3BvbnNlWydzZXNzaW9uSW5mbyddICE9IG51bGwgPyByZXNwb25zZVsnc2Vzc2lvbkluZm8nXVsnZXhwaXJlc19pbiddIDogcmVzcG9uc2VbJ2V4cGlyZXNfaW4nXTtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25FeHBpcmF0aW9uID0gcmVxLnBhcmFtc1snc2Vzc2lvbkV4cGlyYXRpb24nXTtcbiAgICAgICAgICAgIGlmICgoIWV4cGlyZXNJbiB8fCBleHBpcmVzSW4gPT0gMCkgJiYgc2Vzc2lvbkV4cGlyYXRpb24gPCAwKSB7XG4gICAgICAgICAgICAgICAgZXhwaXJlc0luID0gZ2lneWEudXRpbHMuY29va2llLmdldEluZmluaXRlRXhwaXJhdGlvblRpbWVJblNlY29uZHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGFwaUtleSA9IHJlcS5wYXJhbXNbJ0FQSUtleSddO1xuICAgICAgICAgICAgaWYoZ2lneWEudXRpbHMudG9nZ2xlcy5pc09uKFdlYkFkYXB0ZXIuc2VydmVyR2x0VG9nZ2xlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldExvZ2luVG9rZW5JZk5vdEV4aXN0KGFwaUtleSwgbmV3TG9naW5Ub2tlbiwgZXhwaXJlc0luLCBzZXNzaW9uRXhwaXJhdGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRva2VuU3RvcmUuc2V0KGFwaUtleSwgbmV3TG9naW5Ub2tlbiwgZXhwaXJlc0luLCBzZXNzaW9uRXhwaXJhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmdldFN0b3JhZ2UoKS5yZW1vdmVJdGVtKGBnbHRleHBfJHtyZXEucGFyYW1zWydBUElLZXknXX1gKTsgLy8gQ2xlYXIgY29va2llLCB3aWxsIHByb3BhZ2F0ZSBpbnRvIFNTTyBzdG9yZS5cbiAgICAgICAgICAgIGdpZ3lhLmxlZ2FjeVJlcG9ydHMudHJhY2tBZGRyZXNzQmFyU2hhcmVzKCk7XG4gICAgICAgICAgICBpZiAoZ2lneWEucGFydG5lclNldHRpbmdzLnNzb0tleSAmJiBGbGFnU2VydmljZS5zZXRHcm91cEFwaURvbWFpbkFmdGVyTG9naW4pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9zc29TZXJ2aWNlLnNldEdyb3VwQXBpRG9tYWluKGdpZ3lhLl8uZ2V0QXBpRG9tYWluKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc3NvU2VydmljZT8uc2V0VG9rZW4obmV3TG9naW5Ub2tlbiwgZXhwaXJlc0luKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjaygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0TG9naW5Ub2tlbklmTm90RXhpc3QoYXBpS2V5OiBzdHJpbmcsIGxvZ2luX3Rva2VuOiBzdHJpbmcsIGV4cGlyZXNJbjogc3RyaW5nLCBzZXNzaW9uRXhwaXJhdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIGlmKCF0b2tlblN0b3JlLmdldChhcGlLZXkpIHx8IHRva2VuU3RvcmUuZ2V0KGFwaUtleSkgIT09IGxvZ2luX3Rva2VuKSB7XG4gICAgICAgICAgICB0b2tlblN0b3JlLnNldChhcGlLZXksIGxvZ2luX3Rva2VuLCBleHBpcmVzSW4sIHNlc3Npb25FeHBpcmF0aW9uKTtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5pbmZvKGBnbHQgY29va2llIHdhcyBzZXQgYnkgamF2YXNjcmlwdGAsIHtsb2dpbl90b2tlbn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oYGdsdCBjb29raWUgd2FzIHNldCBieSBzZXJ2ZXJgLCB7bG9naW5fdG9rZW59KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaXNGYWtlVG9rZW4odG9rZW46IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdG9rZW4uc3BsaXQoJy4nKVsxXSA9PSAnZmZzJztcbiAgICB9XG5cbiAgICBhc3luYyBvbkludmFsaWRUb2tlblJlc3BvbnNlKHJlcTogQmFzZVJlcXVlc3QsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gICAgICAgIGlmIChyZXEucGFyYW1zTG9naW5Ub2tlbikge1xuICAgICAgICAgICAgLy8gRG8gbm90IGF0dGVtcHQgdG8gcmV0cnkgaWYgbG9naW5Ub2tlbiB3YXMgcHJvdmlkZWQgZnJvbSB0aGUgcGFyYW1ldGVyc1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFuIGludmFsaWQgbG9naW4gdG9rZW4gd2FzIHNlbnRcbiAgICAgICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IGF3YWl0IHRoaXMuX3Nzb1NlcnZpY2U/LmdldFRva2VuKCk7XG4gICAgICAgIC8vIEEgbmV3IHRva2VuIHdhcyByZWNlaXZlZCBmcm9tIFNTTyBodWIsIGxldCdzIHJldHJ5IHdpdGggaXQgYW5kIHRoZXJlIHdhcyBubyBzcGVjaWZpYyByZXF1ZXN0IHRvIGFuIGV4cGxpY2l0IGxvZ2luIHRva2VuLlxuICAgICAgICBpZiAodG9rZW5SZXNwb25zZSAmJiB0b2tlblJlc3BvbnNlLmxvZ2luX3Rva2VuICYmIHRva2VuUmVzcG9uc2UubG9naW5fdG9rZW4uc3BsaXQoJ3wnKVswXSAhPT0gcmVxLnNlbnRMb2dpblRva2VuICYmICFyZXEucGFyYW1zTG9naW5Ub2tlbikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ib290c3RyYXBBcGlTZXJ2aWNlKCk7XG4gICAgICAgICAgICB0b2tlblN0b3JlLnNldEZyb21Tc29SZXNwb25zZSh0b2tlblJlc3BvbnNlLCByZXEucGFyYW1zWydBUElLZXknXSk7XG4gICAgICAgICAgICByZXEucGFyYW1zWydsb2dpbl90b2tlbiddID0gdW5kZWZpbmVkOyAvLyByZW1vdmUgdGhlIGxvZ2luIHRva2VuIGZyb20gcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgcmVxLnNlbmQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRva2VuU3RvcmUucmVtb3ZlKHJlcS5wYXJhbXNbJ0FQSUtleSddKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBtZXRob2QgZG9lc24ndCByZXF1aXJlIGEgc2Vzc2lvbiwgdHJ5IGFnYWluIHdpdGhvdXQgYSBsb2dpbiB0b2tlbi5cbiAgICAgICAgICAgIGlmICghcmVxLnNldHRpbmdzLnJlcXVpcmVzU2Vzc2lvbigpKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlcS5wYXJhbXNbJ2xvZ2luX3Rva2VuJ107XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlcS5zZW50TG9naW5Ub2tlbjtcbiAgICAgICAgICAgICAgICByZXEuc2VuZChjYWxsYmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVUb2tlblJlc3BvbnNlKHJlcTogQmFzZVJlcXVlc3QsIHJlczogT2JqZWN0LCBjYWxsYmFjazogKCkgPT4gdm9pZCkge1xuICAgICAgICByZXMgPSBnaWd5YS51dGlscy5vYmplY3QuY2xvbmUocmVzKTtcblxuICAgICAgICBpZiAocmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5TRVNTSU9OX0VYUElSRURfUkVUUlkpIHtcbiAgICAgICAgICAgIC8vIFNlc3Npb25fZXhwaXJlZF9yZXRyeSAtIHdoZW4gYSBwcm92aWRlciBzZXNzaW9uIGV4cGlyZXMuXG4gICAgICAgICAgICAvLyBUaGUgbWV0aG9kIHNob3VsZCBkZWFsIHdpdGggcmV0cnkgd2hlbiBwcm92aWRlciBTREsgaXMgdXAuXG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRXYWl0Rm9yU2VydmljZShyZXEsIHJlcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5JTlZBTElEX0dNSURfVElDS0VUKSB7XG4gICAgICAgICAgICAvLyBJbnZhbGlkX2dtaWRfdGlja2V0XG4gICAgICAgICAgICB0aGlzLl9nbWlkVGlja2V0ID0gbnVsbDtcbiAgICAgICAgICAgIGdpZ3lhLnV0aWxzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdfZ2lnX2dtaWR0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVxLnNlbnRMb2dpblRva2VuICYmIGdpZ3lhLl8ubG9nb3V0TWV0aG9kc1tyZXEubWV0aG9kTmFtZV0gJiYgcmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5PSyAmJiByZXNbJ2xvZ291dEFjdGl2ZVNlc3Npb24nXSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclNlc3Npb24ocmVxLnBhcmFtcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQZXJzaXN0IGR5bmFtaWMgZXhwaXJhdGlvbiBzaWduYXR1cmUgdG8gU1NPIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgaWYgKGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXkgJiYgcmVxLnNlbnRMb2dpblRva2VuICYmIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuT0sgJiYgcmVxLnBhcmFtc1snbG9naW5Ub2tlbkV4cCddKSB7XG4gICAgICAgICAgICB0aGlzLl9zc29TZXJ2aWNlPy5zZXRUb2tlbkV4cGlyYXRpb24ocmVxLnBhcmFtc1snbG9naW5Ub2tlbkV4cCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhhbmRsaW5nIGF1dGggY29kZSBmbG93IGZvciBwb3B1cFxuICAgICAgICBpZighdGhpcy5oYXNTZXNzaW9uVG9rZW4oKSAmJiByZXNbJ2F1dGhDb2RlJ10pIHtcbiAgICAgICAgICAgIGF3YWl0IHRva2VuU3RvcmUuc2V0RnJvbUF1dGhDb2RlKHJlc1snYXV0aENvZGUnXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldE5ld0xvZ2luVG9rZW5Gcm9tUmVzcG9uc2UocmVxLCByZXMsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnNlbnRMb2dpblRva2VuICYmIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuVU5BVVRIT1JJWkVEX1VTRVIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkludmFsaWRUb2tlblJlc3BvbnNlKHJlcSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBsb2dvdXRTc29JZk5lZWRlZChyZXE6IEJhc2VSZXF1ZXN0LCByZXM6IE9iamVjdCwgY2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgaWYgKGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5zc29LZXkgJiYgZ2lneWEuXy5sb2dvdXRNZXRob2RzW3JlcS5tZXRob2ROYW1lXSAmJiByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLk9LICYmIHJlc1snbG9nb3V0QWN0aXZlU2Vzc2lvbiddKSB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGxvZ291dCBmcm9tIFNTTyBodWIgd2hlbiBsb2dnaW5nIG91dFxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgIT0gZ2lneWEucGFydG5lclNldHRpbmdzLnNzb0xvZ291dFVybCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvZ291dFJlcyA9IGF3YWl0IHRoaXMuX3Nzb1NlcnZpY2U/LmxvZ291dCgpO1xuICAgICAgICAgICAgICAgIGxldCByZW1vdmVBZnRlcjtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnBhcmFtc1snc3VzdGFpbkxvZ291dFVSTHMnXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUFmdGVyID0gIXJlcS5wYXJhbXNbJ3N1c3RhaW5Mb2dvdXRVUkxzJ107XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkTG9nb3V0VXJscyhcbiAgICAgICAgICAgICAgICAgICAgbG9nb3V0UmVzWydsb2dvdXRVUkxzJ10sXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBVSUQ6IHJlc1snVUlEJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBVSURTaWduYXR1cmU6IHJlc1snVUlEU2lnbmF0dXJlJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmVUaW1lc3RhbXA6IHJlc1snc2lnbmF0dXJlVGltZXN0YW1wJ10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUFmdGVyLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZExvZ291dFVybHMobG9nb3V0VXJsc0xpc3Q6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQsIHF1ZXJ5U3RyaW5nUGFyYW1zOiBPYmplY3QsIHJlbW92ZUFmdGVyPzogbnVtYmVyIHwgYm9vbGVhbikge1xuICAgICAgICBsZXQgbG9hZGVkTGVuZ3RoID0gMDtcbiAgICAgICAgY29uc3QgbG9nb3V0VXJscyA9IGxvZ291dFVybHNMaXN0ID8gbG9nb3V0VXJsc0xpc3Quc3BsaXQoJywnKSA6IFtdO1xuICAgICAgICBjb25zdCBmbkxvYWRlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIGxvYWRlZExlbmd0aCsrO1xuICAgICAgICAgICAgaWYgKGxvYWRlZExlbmd0aCA+IGxvZ291dFVybHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvZ291dFVybHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghbG9nb3V0VXJsc1tpXSkge1xuICAgICAgICAgICAgICAgIGZuTG9hZGVkKCk7IC8vIG1hcmsgc2l0ZSBhcyBsb2FkZWQgaWYgbm8gdXJsIHRvIGdvIHRvXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBnaWd5YS51dGlscy5VUkwuYWRkUGFyYW1zVG9VUkwobG9nb3V0VXJsc1tpXSwgcXVlcnlTdHJpbmdQYXJhbXMpO1xuICAgICAgICAgICAgdGhpcy5sb2FkTG9nb3V0VXJsKHVybCwgZm5Mb2FkZWQsIHJlbW92ZUFmdGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZuTG9hZGVkKCk7IC8vIG1ha2Ugc3VyZSBjYWxsIGlzIG1hZGUgYXQgbGVhc3Qgb25jZSBldmVuIGlmIGxvZ291dCBVUkxzIGxpc3QgaXMgZW1wdHlcbiAgICB9XG5cbiAgICBsb2FkTG9nb3V0VXJsKHVybDogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCwgcmVtb3ZlQWZ0ZXI6IG51bWJlciB8IGJvb2xlYW4gPSA1MDAwKSB7XG4gICAgICAgIHZhciBpZnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICAgICAgaWZyLnNyYyA9IHVybDtcbiAgICAgICAgaWZyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgaWZyLnN0eWxlLnRvcCA9ICctMTAwMHB4JztcbiAgICAgICAgaWZyLnN0eWxlLmxlZnQgPSAnLTEwMDBweCc7XG4gICAgICAgIHZhciBsb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIG9uSWZyTG9hZGVkID0gKCkgPT4ge1xuICAgICAgICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChyZW1vdmVBZnRlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBpZnIucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChpZnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfTtcblxuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICBvbklmckxvYWRlZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmVBZnRlciBhcyBhbnksXG4gICAgICAgICk7XG5cbiAgICAgICAgaWZyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgIG9uSWZyTG9hZGVkKCk7XG4gICAgICAgIH07XG4gICAgICAgIGdpZ3lhLnV0aWxzLkRPTS5wcmVwZW5kVG9Cb2R5KGlmcik7XG4gICAgfVxuXG4gICAgc2hvdWxkV2FpdEZvclNlcnZpY2UocmVxdWVzdDogQmFzZVJlcXVlc3QsIHJlc3BvbnNlOiBPYmplY3QpIHtcbiAgICAgICAgaWYgKHJlcXVlc3QucGFyYW1zWydyZXRyeVBvc3NpYmxlJ10pIHtcbiAgICAgICAgICAgIHJlcXVlc3QucGFyYW1zWydyZXRyeVBvc3NpYmxlJ10gPSBmYWxzZTtcbiAgICAgICAgICAgIGdpZ3lhLmV4dGVybmFsLmZhY2Vib29rLnJ1bldoZW5Mb2FkZWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3Quc2VuZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldEdtaWRUaWNrZXQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKHRoaXMuX2dtaWRUaWNrZXQpIHtcbiAgICAgICAgICAgIC8vIGlmIGl0IGV4aXN0cywgZWFjaCB0aW1lIHdlIHVzZSBnbWlkVGlja2V0IHdlIG5lZWQgdG8gcmVmcmVzaCBpdC5cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEdtaWRUaWNrZXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9nbWlkVGlja2V0O1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVmcmVzaEdtaWRUaWNrZXQoKSB7XG4gICAgICAgIHRoaXMuX2FwaVNlcnZpY2UuZ2V0R21pZFRpY2tldCh0cnVlKS50aGVuKGdtaWRUaWNrZXREYXRhID0+IHRoaXMuc2V0R21pZFRpY2tldChnbWlkVGlja2V0RGF0YSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0R21pZFRpY2tldChnbWlkVGlja2V0RGF0YT86IElHbWlkVGlja2V0UmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFnbWlkVGlja2V0RGF0YSB8fCAhZ21pZFRpY2tldERhdGEuZ21pZFRpY2tldCkge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oJ2NsZWFuIGdtaWRUaWNrZXQnKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9nbWlkVGlja2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2lneWEubG9nZ2VyLmluZm8oJ3NldCBnbWlkVGlja2V0IChzZXQgYXV0by1yZWZyZXNoKScpO1xuICAgICAgICAgICAgdGhpcy5fZ21pZFRpY2tldCA9IGdtaWRUaWNrZXREYXRhLmdtaWRUaWNrZXQ7XG5cbiAgICAgICAgICAgIGNvbnN0IG5leHRSdW50aW1lSW50ZXJ2YWwgPSB0aGlzLmNhbGN1bGF0ZUdtaWRUaWNrZXROZXh0UnVuKGdtaWRUaWNrZXREYXRhLmV4cGlyYXRpb25UaW1lKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZWZyZXNoR21pZFRpY2tldCgpLCBuZXh0UnVudGltZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0IGJvb3RzdHJhcEluZGljYXRpb24oaGFzR21pZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGNvb2tpZU5hbWUgPSBXZWJBZGFwdGVyLmJvb3RzdHJhcEluZGljYXRpb25Db29raWVOYW1lKGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KTtcbiAgICAgICAgY29uc3QgY29va2llVmFsdWUgPSBHbWlkUHJvdmlkZXIuY29udmVydEhhc0dtaWRUb0Jvb3RzdHJhcEluZGljYXRpb24oZ2lneWEsIGhhc0dtaWQpO1xuICAgICAgICB0aGlzLmdldFN0b3JhZ2UoKS5zZXRJdGVtKGNvb2tpZU5hbWUsIGNvb2tpZVZhbHVlKTtcbiAgICAgICAgZ2lneWEubG9nZ2VyLmRlYnVnKGBzZXQgYm9vdHN0cmFwIGluZGljYXRpb24gb24gdG9wIGZyYW1lOiAke2Nvb2tpZVZhbHVlfWApO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IGJvb3RzdHJhcEluZGljYXRpb24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RvcmFnZSgpLmdldEl0ZW0oV2ViQWRhcHRlci5ib290c3RyYXBJbmRpY2F0aW9uQ29va2llTmFtZShnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlR21pZFRpY2tldE5leHRSdW4oZXhwaXJhdGlvblRpbWU6IG51bWJlcikge1xuICAgICAgICBsZXQgZ21pZFRpY2tldEV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoZXhwaXJhdGlvblRpbWUpLmdldFRpbWUoKTtcbiAgICAgICAgcmV0dXJuIGdtaWRUaWNrZXRFeHBpcmF0aW9uVGltZSAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzeW5jU3NvTG9naW4oc3NvTG9naW5QYXJhbXM6IE9iamVjdCkge1xuICAgICAgICBsZXQgY29udGV4dDtcblxuICAgICAgICBmb3IgKGNvbnN0IGxvZ2luUGFyYW0gaW4gc3NvTG9naW5QYXJhbXMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGV4dCA9PT0gJ3VuZGVmaW5lZCcpIGNvbnRleHQgPSB7fTtcblxuICAgICAgICAgICAgY29udGV4dFtsb2dpblBhcmFtXSA9IHNzb0xvZ2luUGFyYW1zW2xvZ2luUGFyYW1dO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKEZsYWdTZXJ2aWNlLnZlcmlmeUxvZ2luT25seU9uY2UgJiYgc2Vzc2lvbkRhdGEuaXNTZXNzaW9uVmVyaWZpZWQodG9rZW5TdG9yZS5nZXQoKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2VuU3RvcmUuZGlzcGF0Y2hMb2dpbkV2ZW50KHtjb250ZXh0fSk7XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgU2VydmljZXNQcm94eUludGVyZmFjZXMgZnJvbSAnc3JjL2NvcmUvU2VydmljZVByb3h5L2ludGVyZmFjZXMnO1xuaW1wb3J0ICogYXMgUHJveHlMaXN0ZW5lciBmcm9tICdzcmMvY29yZS9TZXJ2aWNlUHJveHkvUHJveHlMaXN0ZW5lcic7XG5pbXBvcnQgKiBhcyBTZXJ2aWNlUHJveHkgZnJvbSAnc3JjL2NvcmUvU2VydmljZVByb3h5L1NlcnZpY2VQcm94eSc7XG5pbXBvcnQgKiBhcyBTZXJ2aWNlc1Byb3h5VXRpbHMgZnJvbSAnc3JjL2NvcmUvU2VydmljZVByb3h5L3V0aWxzJztcbmltcG9ydCAqIGFzIEFwaVNlcnZpY2UgZnJvbSAnc3JjL2NvcmUvQXBpU2VydmljZS9hcHAvQXBpU2VydmljZSc7XG5pbXBvcnQgKiBhcyBHcm91cEFwaURvbWFpblNlcnZpY2UgZnJvbSAnc3JjL2NvcmUvQXBpU2VydmljZS9hcHAvR3JvdXBBcGlEb21haW5TZXJ2aWNlJztcbmltcG9ydCAqIGFzIEFwaVNlcnZpY2VJbnRlcmZhY2VzIGZyb20gJ3NyYy9jb3JlL0FwaVNlcnZpY2UvYXBwL2ludGVyZmFjZXMnO1xuaW1wb3J0ICogYXMgWGhyUmVxdWVzdCBmcm9tICdzcmMvY29yZS9BcGlTZXJ2aWNlL2FwcC9YaHJSZXF1ZXN0JztcbmltcG9ydCAqIGFzIFJlcXVlc3QgZnJvbSAnc3JjL2NvcmUvQXBpU2VydmljZS9hcHAvUmVxdWVzdCc7XG5pbXBvcnQgKiBhcyBBcGlSZXF1ZXN0IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLkFkYXB0ZXJzLldlYi9hcHAvQXBpUmVxdWVzdCc7XG5pbXBvcnQgKiBhcyBCYXNlUmVxdWVzdCBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5BZGFwdGVycy5XZWIvYXBwL0Jhc2VSZXF1ZXN0JztcbmltcG9ydCAqIGFzIE9hdXRoUmVxdWVzdCBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5BZGFwdGVycy5XZWIvYXBwL09hdXRoUmVxdWVzdCc7XG5pbXBvcnQgKiBhcyBTU09CcmlkZ2UgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9Tc29TZXJ2aWNlJztcbmltcG9ydCAqIGFzIFRva2VuU3RvcmUgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9Ub2tlblN0b3JlJztcbmltcG9ydCAqIGFzIFdlYkFkYXB0ZXIgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9XZWJBZGFwdGVyJztcbmltcG9ydCAnc3JjL2NvcmUvR2lneWEuSnMuQWRhcHRlcnMuV2ViL2FwcC9FeHRlcm5hbE1ldGhvZHMnO1xuXG5kZWNsYXJlIGNvbnN0IGdpZ3lhOiBhbnk7XG5pZiAoIWdpZ3lhLnNlcnZpY2VzKSB7XG4gICAgZ2lneWEuc2VydmljZXMgPSB7fTtcbn1cbmlmICghZ2lneWEuc2VydmljZXMucHJveHkpIHtcbiAgICBnaWd5YS5zZXJ2aWNlcy5wcm94eSA9IHt9O1xufVxuaWYgKCFnaWd5YS5zZXJ2aWNlcy5wcm94eS51dGlscykge1xuICAgIGdpZ3lhLnNlcnZpY2VzLnByb3h5LnV0aWxzID0ge307XG59XG5pZiAoIWdpZ3lhLl8pIHtcbiAgICBnaWd5YS5fID0ge307XG59XG5pZiAoIWdpZ3lhLl8uYXBpQWRhcHRlcnMpIHtcbiAgICBnaWd5YS5fLmFwaUFkYXB0ZXJzID0ge307XG59XG5pZiAoIWdpZ3lhLl8uYXBpQWRhcHRlcnMud2ViKSB7XG4gICAgZ2lneWEuXy5hcGlBZGFwdGVycy53ZWIgPSB7fTtcbn1cbmlmICghZ2lneWEuXy5hcGlBZGFwdGVycy53ZWIuc3NvKSB7XG4gICAgZ2lneWEuXy5hcGlBZGFwdGVycy53ZWIuc3NvID0ge307XG59XG5pZiAoIWdpZ3lhLl8uYXBpQWRhcHRlcnMud2ViLnRva2VuU3RvcmUpIHtcbiAgICBnaWd5YS5fLmFwaUFkYXB0ZXJzLndlYi50b2tlblN0b3JlID0ge307XG59XG5cbk9iamVjdC5hc3NpZ24oZ2lneWEuc2VydmljZXMucHJveHksIFNlcnZpY2VzUHJveHlJbnRlcmZhY2VzLCBQcm94eUxpc3RlbmVyLCBTZXJ2aWNlUHJveHkpO1xuT2JqZWN0LmFzc2lnbihnaWd5YS5zZXJ2aWNlcy5wcm94eS51dGlscywgU2VydmljZXNQcm94eVV0aWxzKTtcbk9iamVjdC5hc3NpZ24oZ2lneWEuc2VydmljZXMsIEFwaVNlcnZpY2UsIEdyb3VwQXBpRG9tYWluU2VydmljZSwgQXBpU2VydmljZUludGVyZmFjZXMpO1xuT2JqZWN0LmFzc2lnbihnaWd5YSwgUmVxdWVzdCwgWGhyUmVxdWVzdCk7XG5PYmplY3QuYXNzaWduKGdpZ3lhLl8uYXBpQWRhcHRlcnMud2ViLCBBcGlSZXF1ZXN0LCBCYXNlUmVxdWVzdCwgT2F1dGhSZXF1ZXN0LCBXZWJBZGFwdGVyKTtcbk9iamVjdC5hc3NpZ24oZ2lneWEuXy5hcGlBZGFwdGVycy53ZWIuc3NvLCBTU09CcmlkZ2UpO1xuT2JqZWN0LmFzc2lnbihnaWd5YS5fLmFwaUFkYXB0ZXJzLndlYi50b2tlblN0b3JlLCBUb2tlblN0b3JlKTtcbiIsImltcG9ydCB7IEdpZ3lhUmVzcG9uc2UgfSBmcm9tICdnaWd5YSc7XG5pbXBvcnQgeyBHU0Vycm9ycyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5pbXBvcnQgeyBJUHJvdmlkZXJTZXNzaW9uSW5mbyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzLlBsdWdpbi9hcHAvaW50ZXJmYWNlcy9JUHJvdmlkZXJTZXNzaW9uSW5mbyc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvcHJvbWlzZSc7XG5pbXBvcnQgeyBmb3JtYXRPYmZ1c2NhdGVkUGhvbmVOdW1iZXIgfSBmcm9tICcuL3Bob25lTnVtYmVyVXRpbCc7XG5cbmV4cG9ydCBlbnVtIExpbmtBY2NvdW50c1dpdGhSZWRpcmVjdFBhcmFtIHtcbiAgUHJvdmlkZXIgPSAnZ2lnX3Byb3ZpZGVyJyxcbiAgQWNjZXNzVG9rZW4gPSAnZ2lnX2FjY2Vzc190b2tlbidcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTGlua0FjY291bnRzQWZ0ZXJSZWRpcmVjdFBhcmFtcyB7XG4gIFtMaW5rQWNjb3VudHNXaXRoUmVkaXJlY3RQYXJhbS5Qcm92aWRlcl0/OiBzdHJpbmc7XG4gIFtMaW5rQWNjb3VudHNXaXRoUmVkaXJlY3RQYXJhbS5BY2Nlc3NUb2tlbl0/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0QWNjb3VudHMocHJvdmlkZXJTZXNzaW9uSW5mbzogSVByb3ZpZGVyU2Vzc2lvbkluZm8sIHJlcXVlc3RQYXJhbXMgPSB7fSk6IFByb21pc2U8b2JqZWN0PiB7XG4gIGNvbnN0IHByb3ZpZGVyU2Vzc2lvbnMgPSBleHRyYWN0UHJvdmlkZXJTZXNzaW9ucyhwcm92aWRlclNlc3Npb25JbmZvKVxuXG4gIHJldHVybiBwcm9taXNpZnk8R2lneWFSZXNwb25zZT4oZ2lneWEuYWNjb3VudHMubm90aWZ5U29jaWFsTG9naW4sIHtcbiAgICAuLi5yZXF1ZXN0UGFyYW1zLFxuICAgIGxvZ2luTW9kZTogJ2Nvbm5lY3QnLFxuICAgIHByb3ZpZGVyU2Vzc2lvbnMsXG4gICAgaWdub3JlQXBpUXVldWU6IHRydWVcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0UHJvdmlkZXJTZXNzaW9ucyhwcm92aWRlclNlc3Npb25JbmZvOiBJUHJvdmlkZXJTZXNzaW9uSW5mbykge1xuICBjb25zdCB7IGlkVG9rZW4sIHByb3ZpZGVyLCBjb2RlLCBhY2Nlc3NfdG9rZW4sIGxhc3ROYW1lLCBmaXJzdE5hbWUgfSA9IHByb3ZpZGVyU2Vzc2lvbkluZm9cbiAgcmV0dXJuIHtcbiAgICBbcHJvdmlkZXJdOiB7IGF1dGhUb2tlbjogYWNjZXNzX3Rva2VuLCBpZFRva2VuLCBjb2RlLCBsYXN0TmFtZSwgZmlyc3ROYW1lIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RQcm92aWRlckluZm9Gcm9tUmVzcG9uc2UocmVzcG9uc2U6IEdpZ3lhUmVzcG9uc2UgJiBJUHJvdmlkZXJTZXNzaW9uSW5mbyAmIHsgaWRfdG9rZW46IHN0cmluZyB9KSB7XG4gIGlmIChyZXNwb25zZS5lcnJvckNvZGUgIT0gR1NFcnJvcnMuRk9SQ0VfTElOS19MT0dJTl9JREVOVElGSUVSX0VYSVNUUykge1xuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuXG4gIGNvbnN0IHByb3ZpZGVyU2Vzc2lvbkluZm86IElQcm92aWRlclNlc3Npb25JbmZvID0gZ2V0UHJvdmlkZXJTZXNzaW9uRnJvbVBhcmFtcyhyZXNwb25zZSBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4pXG5cbiAgcmV0dXJuIHtcbiAgICAuLi5yZXNwb25zZSwgcHJvdmlkZXJTZXNzaW9uSW5mb1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9naW5JZChjb25mbGljdGluZ0FjY291bnQpOiBzdHJpbmcge1xuICByZXR1cm4gY29uZmxpY3RpbmdBY2NvdW50Py5sb2dpbklEIHx8IGNvbmZsaWN0aW5nQWNjb3VudD8uZW1haWxzPy5bMF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPYmZ1c2NhdGVkUGhvbmUoY29uZmxpY3RpbmdBY2NvdW50KTogc3RyaW5nIHtcbiAgY29uc3QgcGhvbmUgPSBnZXRQaG9uZShjb25mbGljdGluZ0FjY291bnQpO1xuICByZXR1cm4gZm9ybWF0T2JmdXNjYXRlZFBob25lTnVtYmVyKHBob25lKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBob25lKGNvbmZsaWN0aW5nQWNjb3VudCk6IHsgbG9va3VwOiBzdHJpbmcsIG9iZnVzY2F0ZWQ6IHN0cmluZyB9IHtcbiAgcmV0dXJuIGNvbmZsaWN0aW5nQWNjb3VudD8ucGhvbmVzPy5bMF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xpbmtBY2NvdW50c1YySW50ZXJydXB0aW9uKGVycm9yQ29kZTogc3RyaW5nIHwgbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiBOdW1iZXIoZXJyb3JDb2RlKSA9PT0gR1NFcnJvcnMuRk9SQ0VfTElOS19MT0dJTl9JREVOVElGSUVSX0VYSVNUUztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1Byb3ZpZGVyU2Vzc2lvbkZvckxpbmtBY2NvdW50c0luUGFyYW1zQWZ0ZXJSZWRpcmVjdChwYXJhbXM6IElMaW5rQWNjb3VudHNBZnRlclJlZGlyZWN0UGFyYW1zKTogYm9vbGVhbiB7XG5cbiAgY29uc3QgcHJvdmlkZXJTZXNzaW9uID0gZ2V0UHJvdmlkZXJTZXNzaW9uRm9yTGlua0FjY291bnRzQWZ0ZXJSZWRpcmVjdChwYXJhbXMpO1xuXG4gIHJldHVybiBpc1Byb3ZpZGVyU2Vzc2lvblZhbGlkKHByb3ZpZGVyU2Vzc2lvbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm92aWRlclNlc3Npb25Gb3JMaW5rQWNjb3VudHNBZnRlclJlZGlyZWN0KHBhcmFtczogSUxpbmtBY2NvdW50c0FmdGVyUmVkaXJlY3RQYXJhbXMpOiBJUHJvdmlkZXJTZXNzaW9uSW5mbyB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBnaWdfcHJvdmlkZXIgfSA9IHBhcmFtc1xuXG4gICAgaWYgKCFnaWdfcHJvdmlkZXIpIHJldHVybiB7fTtcblxuICAgIGNvbnN0IHByb3ZpZGVyU2Vzc2lvbiA9IGdpZ3lhLnV0aWxzLkpTT04uZGVzZXJpYWxpemUoZ2lnX3Byb3ZpZGVyKSBhcyBJUHJvdmlkZXJTZXNzaW9uSW5mbztcblxuICAgIHJldHVybiBwcm92aWRlclNlc3Npb25cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBnaWd5YS5sb2dnZXIuZXJyb3IoJ0Vycm9yIHdoaWxlIGdldHRpbmcgcHJvdmlkZXIgc2Vzc2lvbiBmcm9tIHBhcmFtcyBhZnRlciByZWRpcmVjdCcsIGVycm9yKTtcbiAgICByZXR1cm4ge31cbiAgfVxuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm92aWRlclNlc3Npb25Gcm9tUGFyYW1zKHBhcmFtczogUmVjb3JkPHN0cmluZywgc3RyaW5nPik6IElQcm92aWRlclNlc3Npb25JbmZvIHtcblxuICBpZiAoIXBhcmFtcykgcmV0dXJuIG51bGw7XG5cbiAgY29uc3QgcHJvdmlkZXJTZXNzaW9uSW5mbzogSVByb3ZpZGVyU2Vzc2lvbkluZm8gPSB7XG4gICAgYWNjZXNzX3Rva2VuOiBwYXJhbXMuYWNjZXNzX3Rva2VuLFxuICAgIHByb3ZpZGVyOiBwYXJhbXMucHJvdmlkZXIsXG4gICAgcHJvdmlkZXJfdWlkOiBwYXJhbXMucHJvdmlkZXJfdWlkLFxuICAgIGlkVG9rZW46IHBhcmFtcy5pZF90b2tlbixcbiAgICBjb2RlOiBwYXJhbXMuY29kZSxcbiAgICBsYXN0TmFtZTogcGFyYW1zLmxhc3ROYW1lLFxuICAgIGZpcnN0TmFtZTogcGFyYW1zLmZpcnN0TmFtZSxcbiAgfTtcblxuICByZXR1cm4gcHJvdmlkZXJTZXNzaW9uSW5mb1xuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3ZpZGVyU2Vzc2lvblZhbGlkKHBhcmFtczogSVByb3ZpZGVyU2Vzc2lvbkluZm8pOiBib29sZWFuIHtcbiAgcmV0dXJuIEJvb2xlYW4ocGFyYW1zPy5wcm92aWRlciAmJiBwYXJhbXM/LmFjY2Vzc190b2tlbik7XG59XG5cblxuXG4iLCJleHBvcnQgZnVuY3Rpb24gZm9ybWF0T2JmdXNjYXRlZFBob25lTnVtYmVyKHBob25lRGF0YToge29iZnVzY2F0ZWQ6IHN0cmluZ30pOiBzdHJpbmcge1xuICBjb25zdCBwaG9uZSA9IHBob25lRGF0YT8ub2JmdXNjYXRlZDtcbiAgcmV0dXJuIHBob25lPy5yZXBsYWNlKC8jL2csICcqJykucmVwbGFjZSgvKFxcKispLywgJyAkMSAnKTtcbn1cbiIsImV4cG9ydCBjb25zdCBlbnVtIEdTRXJyb3JzIHtcbiAgICBPSyA9IDAsXG4gICAgRGF0YV9QZW5kaW5nID0gMTAwMDAxLCAvLyBEYXRhIGlzIHN0aWxsIGJlaW5nIHByb2Nlc3NlZCwgcXVlcnkgYWdhaW4gZm9yIHRoZSByZXNwb25zZVxuICAgIE5FVFdPUktfRVJST1IgPSA1MDAwMjYsXG4gICAgREFUQV9QRU5ESU5HID0gMTAwMDAxLCAvLyBEYXRhIGlzIHN0aWxsIGJlaW5nIHByb2Nlc3NlZCwgcXVlcnkgYWdhaW4gZm9yIHRoZSByZXNwb25zZVxuICAgIE9QRVJBVElPTl9DQU5DRUxFRCA9IDIwMDAwMSwgLy8gdXNlciBjYW5jZWxlZCwgaW4gbG9naW4gcHJvY2Vzc1xuICAgIFBFUk1JU1NJT05fR1JBTlRFRCA9IDIwMDAwMiwgLy8gSW5uZXIgY29kZVxuICAgIFBFUk1JU1NJT05fTk9UX0dSQU5URUQgPSAyMDAwMDMsIC8vIElubmVyIGNvZGVcbiAgICBSRURJUkVDVCA9IDIwMDAwNCwgLy8gSW5uZXIgY29kZVxuICAgIE5FV19VU0VSID0gMjAwMDA1LCAvLyBJbm5lciBjb2RlXG4gICAgT1BFUkFUSU9OX0RPTkUgPSAyMDAwMDYsIC8vIElubmVyIGNvZGVcbiAgICBVUERBVEVfVVNFUiA9IDIwMDAwNywgLy8gSW5uZXIgY29kZVxuICAgIE9LX1dJVEhfRVJST1JTID0gMjAwMDA4LCAvLyBGb3IgcmVwb3J0cyAtIHdoZW4gd2UgcmV0dXJuIG9rIHRvIGNsaWVudCBidXQgaGFkIGFjY2VwdGFibGUgZXJyb3JzICh0aGF0IHdlIHdhbnQgdG8ga25vdyBhYm91dCkgb24gdGhlIHdheVxuICAgIEFDQ09VTlRTX0xJTktFRCA9IDIwMDAwOSwgLy8gQWZ0ZXIgbGlua2lnbiBhY2NvdXRucyB2aWEgbG9naW4sIHJldHVybiB0aGlzIGVycm9yIGNvZGVcbiAgICBPS19XSVRIX0VSUk9SX0xPR0lOX0lERU5USUZJRVJfRVhJU1RTID0gMjAwMDEwLCAvLyBGb3Igc2V0QWNjb3VudEluZm8gdXNpbmcgdGhlIGNvbmZsaWN0SGFuZGxpbmcgcGFyYW0gLSBwcm9maWxlIHdhcyBzYXZlZCwgYnV0IHRoZSBlbWFpbCBjb25mbGljdHMgd2l0aCBhbm90aGVyIHVzZXJcbiAgICBBQ0NPVU5UX1BFTkRJTkdfUkVHSVNUUkFUSU9OID0gMjA2MDAxLCAvLyBGb3IgYWNjb3VudHMgQVBJLFxuICAgIEFDQ09VTlRfUEVORElOR19WRVJJRklDQVRJT04gPSAyMDYwMDIsIC8vIEZvciBhY2NvdW50cyBBUEk7IGNvbnNpZGVyIG1vdmluZyB0byA0MDN4eHggc2VjdGlvbiBpbiB0aGUgZnV0dXJlLlxuICAgIEFDQ09VTlRfTUlTU0lOR19MT0dJTklEID0gMjA2MDAzLCAvLyBGb3IgYWNjb3VudHMgQVBJXG4gICAgSURFTlRJVFlfQUxSRUFEWV9BU1NJR05FRCA9IDIwNjAwNCwgLy8gRm9yIGltcG9ydCBhY2NvdW50cyBBUElcbiAgICBBRlRFUl9FTUFJTF9WRVJJRklDQVRJT04gPSAyMDYwMDUsXG4gICAgUEVORElOR19DT0RFX1ZFUklGSUNBVElPTiA9IDIwNjAwNixcbiAgICBDTElFTlRfTE9HID0gMzAwMDAxLCAvLyBpbnRlcm5hbCwgZm9yIHJlcG9ydGluZyBlcm9ycnMgaW4gY2xpZW50IFNES1NcbiAgICBJTlZBTElEX0RBVEFfQ0VOVEVSID0gMzAxMDAxLCAvLyBcIkludmFsaWQgZGF0YS1jZW50ZXJcIi4gd2l0aCBlcnJvciBkZXRhaWxzIG9mOiBcIlRoaXMgQVBJIGtleSBpcyBzZXJ2ZWQgYnkgYW5vdGhlciBkYXRhIGNlbnRlclwiLlxuICAgIElOVkFMSURfUkVRVUVTVF9GT1JNQVQgPSA0MDAwMDEsIC8vIGNvdWxkIGJlIGFsbCBraW5kIG9mIGVycm9ycyB3aXRoIHdyb25nIHJlcXVlc3QgKG5vbiBzZWN1cmUgd2hlbiBzaG91bGQgYmUgc2VjdXJlLCB3cm9uZyBhdXRoZW50aWNhdGlvbiBoZWFkZXIpXG4gICAgTUlTU0lOR19SRVFVSVJFRF9QQVJBTUVURVIgPSA0MDAwMDIsXG4gICAgVU5JUVVFX0lERU5USUZJRVJfRVhJU1RTID0gNDAwMDAzLFxuICAgIElOVkFMSURfUEFSQU1FVEVSX0ZPUk1BVCA9IDQwMDAwNCxcbiAgICBJTlZBTElEX1BBUkFNRVRFUl9WQUxVRSA9IDQwMDAwNixcbiAgICBEVVBMSUNBVEVfVkFMVUUgPSA0MDAwMDcsXG4gICAgSU5WQUxJRF9BVVRIRU5USUNBVElPTl9IRUFERVIgPSA0MDAwMDgsIC8vIE9BdXRoMlxuICAgIFZBTElEQVRJT05fRVJST1IgPSA0MDAwMDksIC8vIEluIGFjY291bnRzLnJlZ2lzdGVyLCB3aGVuZXZlciB0aGVyZSBpcyBhIHZhbGlkYXRpb24gZXJyb3JcbiAgICBJTlZBTElEX1JFRElSRUNUX1VSSSA9IDQwMDAxMSwgLy8gT0F1dGgyXG4gICAgSU5WQUxJRF9SRVNQT05TRV9UWVBFID0gNDAwMDEyLCAvLyBPQXV0aDJcbiAgICBVTlNVUFBPUlRFRF9HUkFOVF9UWVBFID0gNDAwMDEzLCAvLyBPQXV0aDJcbiAgICBJTlZBTElEX0dSQU5UID0gNDAwMDE0LCAvLyBPQXV0aDJcbiAgICBDT0RFX0VYUElSRUQgPSA0MDAwMTUsIC8vIE9BdXRoMlxuICAgIFNDSEVNQV9WQUxJREFUSU9OX0ZBSUxFRCA9IDQwMDAyMCxcbiAgICBDQVBUQ0hBX1ZFUklGSUNBVElPTl9GQUlMRUQgPSA0MDAwMjEsXG4gICAgVU5JUVVFX0lOREVYX1ZBTElEQVRJT05fRVJST1IgPSA0MDAwMjIsXG4gICAgSU5WQUxJRF9UWVBFX1ZBTElEQVRJT05fRVJST1IgPSA0MDAwMjMsXG4gICAgRFlOQU1JQ19GSUVMRFNfVkFMSURBVElPTl9FUlJPUiA9IDQwMDAyNCxcbiAgICBXUklURV9BQ0NFU1NfVkFMSURBVElPTl9FUlJPUiA9IDQwMDAyNSxcbiAgICBJTlZBTElEX0ZPUk1BVF9WQUxJREFUSU9OX0VSUk9SID0gNDAwMDI2LFxuICAgIFJFUVVJUkVEX1ZBTFVFX1ZBTElEQVRJT05fRVJST1IgPSA0MDAwMjcsXG4gICAgRU1BSUxfTk9UX1ZFUklGSUVEID0gNDAwMDI4LFxuICAgIFNDSEVNQV9DT05GTElDVF9FUlJPUiA9IDQwMDAyOSwgLy8gVG8gaGFuZGxlIFVzZXIgc3RvcnkgMzQzMzAuIEltcHJvdmUgRWxhc3RpY1NlYXJjaE1hcHBpbmdFeGNlcHRpb24gaGFuZGxpbmcgaW4gRFMuSW5kZXhPYmplY3RcbiAgICBPUEVSQVRJT05fTk9UX0FMTE9XRUQgPSA0MDAwMzAsIC8vIFVzZXIgc3RvcnkgMzQzMTEgLSBJZiBhZGRDb25uZWN0aW9uIGlzIGNhbGxlZCByZXR1cm4gYW4gZXJyb3IgKFwib3BlcmF0aW9uIG5vdCBhbGxvd2VkIGZvciB0aGlzIGFjY291bnRcIiwgNDAwWFhYIGVycm9yKS5cbiAgICBTRUNVUklUWV9WRVJJRklDQVRJT05fRkFJTEVEID0gNDAwMDUwLFxuICAgIElOVkFMSURfQVBJS0VZX1BBUkFNRVRFUiA9IDQwMDA5MyxcbiAgICBOT1RfU1VQUE9SVEVEID0gNDAwMDk2LCAvLyB0aGUgZnVuY3Rpb24gaXMgbm90IHN1cHBvcnRlZCBieSBhbnkgb2YgdGhlIGN1cnJlbnRseSBjb25uZWN0ZWQgcHJvdmlkZXJzXG4gICAgVU5TVVBQT1JURURfVVNFUl9BR0VOVCA9IDQwMDA5NywgLy9cbiAgICBOT19QUk9WSURFUlMgPSA0MDAxMDAsIC8vIGNsaWVudD9cbiAgICBQT1BVUF9CTE9DS0VEID0gNDAwMTAxLCAvLyBjbGllbnRcbiAgICBJTlZBTElEX0VWRU5UX0hBTkRMRVIgPSA0MDAxMDIsIC8vIGNsaWVudFxuICAgIElOVkFMSURfQ09OVEFJTkVSSUQgPSA0MDAxMDMsIC8vIGNsaWVudFxuICAgIE5PVF9DT05ORUNURUQgPSA0MDAxMDYsIC8vIHVzZXIgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgcmVxdWlyZWQgbmV0d29yayBvciB0byBhbnkgbmV0d29ya1xuICAgIElOVkFMSURfU0lURV9ET01BSU4gPSA0MDAxMjAsIC8vIHRoZSBjdXJyZW50IGRvbWFpbiBkb2VzIG5vdCBtYXRjaCB0aGUgZG9tYWluIGNvbmZpZ3VyZWQgZm9yIHRoZSBhcGkga2V5XG4gICAgUFJPVklERVJfQ09ORklHVVJBVElPTl9FUlJPUiA9IDQwMDEyMiwgLy8gdGhlIGN1cnJlbnQgZG9tYWluIGRvZXMgbm90IG1hdGNoIHRoZSBkb21haW4gY29uZmlndXJlZCBmb3IgdGhlIGFwaSBrZXlcbiAgICBMSU1JVF9SRUFDSEVEID0gNDAwMTI0LCAvLyBHYW1lTWVjaGFuaWNzIC0gQ2FwIHdhcyByZWFjaGVkXG4gICAgRlJFUVVFTkNZX0xJTUlUX1JFQUNIRUQgPSA0MDAxMjUsIC8vIENvbW1lbnRzL0ZlZWQgLSBTcGFtIENhcHMgd2FzIHJlYWNoZWRcbiAgICBJTlZBTElEX0FDVElPTiA9IDQwMDEyNiwgLy8gR2FtZU1lY2hhbmljcyAtIEludmFsaWQgYWN0aW9uLiBUcmlnZ2VyZWQgYWN0aW9uIGNhbid0IGJlIGluaXRpYXRlZCBleHRlcm5hbGx5XG4gICAgSU5TVUZGSUNJRU5UX1BPSU5UU19UT19SRURFRU0gPSA0MDAxMjcsIC8vIEdhbWVNZWNoYW5pY3MgLSBJbnN1ZmZpY2llbnRfcG9pbnRzX3RvX3JlZGVlbVxuICAgIFNJR05BVFVSRV9USU1FU1RBTVBfRVhQSVJFRCA9IDQwMDEyOCwgLy8gdGhlIHRpbWVzdGFtcCBpbnNpZGUgdGhlIHNpZ25hdHVyZSBpcyBleHBpcmVkXG4gICAgRXJyb3JfRHVyaW5nX0V4dGVuc2lvbnNfT3BlcmF0aW9uID0gNDAwMzAyLFxuICAgIEV4dGVuc2lvbl9Qb2ludF9DdXN0b21fRXJyb3IgPSA0MDAzMDMsIC8vIEV4dGVuc2lvbiBwb2ludCByZXR1cm4gYSB1c2VyRmFjaW5nRXJyb3JNZXNzYWdlXG4gICAgSU5WQUxJRF9QT0xJQ1lfQ09ORklHVVJBVElPTiA9IDQwMTAwMCwgLy8gUG9saWN5IGNvbmZpZ3VyYXRpb24gaXMgaW52YWxpZCAoaS5lLiBwcmV2ZW50IHJlZ2l0cmF0aW9uKVxuICAgIFNVU1BFQ1RFRF9TUEFNID0gNDAxMDEwLCAvLyBTb21lb25lIGlzIHRyeWluZyB0byB1c2UgR2lneWEgdG8gc2VuZCBhIGVtYWlsIHdpdGggYSBVUkwgdGhhdCBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgdGhlIGNsaWVudCdzIGRvbWFpbnM7IHN1c3BlY3RlZCBzcGFtLlxuICAgIExPR0lOX0ZBSUxFRF9DQVBUQ0hBX1JFUVVJUkVEID0gNDAxMDIwLCAvLyBhY2NvdW50cy5sb2dpbiAtIGNhcHRjaGEgcmVxdWlyZWRcbiAgICBSRVFVRVNUX0ZBSUxFRF9DQVBUQ0hBX1JFUVVJUkVEID0gNDAxMDIzLCAvLyBhY2NvdW50cy5sb2dpbiAtIGNhcHRjaGEgcmVxdWlyZWRcbiAgICBMT0dJTl9GQUlMRURfV1JPTkdfQ0FQVENIQSA9IDQwMTAyMSwgLy8gYWNjb3VudHMubG9naW4gLSB3cm9uZyBjYXB0Y2hhIGNvZGVcbiAgICBPTERfUEFTU1dPUkRfVVNFRCA9IDQwMTAzMCwgLy8gVGhlIHVzZXIgcHJvdmlkZWQgaGlzIHByZXZpb3VzIHBhc3N3b3JkLCBub3QgdGhlIGN1cnJlbnQgb25lXG4gICAgRk9SQklEREVOID0gNDAzMDAwLFxuICAgIElOVkFMSURfU0VTU0lPTl9UT0tFTiA9IDQwMzAwMSwgLy8gaW50ZXJuYWxcbiAgICBSRVFVRVNUX0hBU19FWFBJUkVEID0gNDAzMDAyLCAvLyB0aGUgdGltZXN0YW1wIG9yIGV4cGlyYXRpb24gb2YgdGhlIHRva2VuIHVzZWQgZXhjZWVkZWQgdGhlIGFsbG93ZWQgdGltZSB3aW5kb3dcbiAgICBJTlZBTElEX1JFUVVFU1RfU0lHTkFUVVJFID0gNDAzMDAzLFxuICAgIERVUExJQ0FURV9OT05DRSA9IDQwMzAwNCxcbiAgICBVTkFVVEhPUklaRURfVVNFUiA9IDQwMzAwNSwgLy8gdGhlIHVzZXIgaWQgcGFzc2VkIGlzIG5vdCB2YWxpZCBmb3IgdGhpcyBzaXRlXG4gICAgU0VOU0lUSVZFX0RBVEFfU0VOVF9PVkVSX0hUVFAgPSA0MDMwMDYsIC8vIHdoZW4gc2VuZGluZyB0aGUgc2VjcmV0IGtleSBpbiBSRVNUIGl0IGhhcyB0byBiZSBvdmVyIEhUVFBTXG4gICAgUEVSTUlTU0lPTl9ERU5JRUQgPSA0MDMwMDcsIC8vIENvbW1lbnRzIHNlcnZlciAtIFBlcm1pc3Npb24gZGVuaWVkIChyZWFkT25seSxtb2RlcmF0aW9uIHNpdGUpLlxuICAgIElOVkFMSURfT1BFTklEX1VSTCA9IDQwMzAwOCwgLy8gY2Fubm90IGZpbmQgYW4gb3BlbklkIGVuZHBvaW50IG9uIHRoZSB1cmwgb3IgdXNlcm5hbWUgZ2l2ZW4gZm9yIG9wZW5JZCBsb2dpblxuICAgIFBST1ZJREVSX1NFU1NJT05fRVhQSVJFRCA9IDQwMzAwOSwgLy8gdGhlIHVzZXIgc2Vzc2lvbiBmb3IgdGhpcyBwcm92aWRlciBpcyBleHBpcmVkXG4gICAgSU5WQUxJRF9TRUNSRVQgPSA0MDMwMTAsIC8vIHRoZSByZXF1ZXN0IGhhcyBhbiBpbnZhbGlkIHNlY3JldCBrZXlcbiAgICBTRVNTSU9OX0hBU19FWFBJUkVEID0gNDAzMDExLCAvLyB0aGUgc2Vzc2lvbiBmb3IgdGhpcyB1c2VyIGhhcyBleHBpcmVkXG4gICAgTk9fVkFMSURfU0VTU0lPTiA9IDQwMzAxMiwgLy8gcmVxdWVzdGVkIHVzZXIgaGFzIG5vIHZhbGlkIHNlc3Npb25cbiAgICBVTlZFUklGSUVEX1VTRVIgPSA0MDMwMTMsIC8vIHRoZSB1c2VyIGlzIG5vdCB2ZXJpZmllZCBpbiBTU08gc2Vzc2lvblxuICAgIE1JU1NJTkdfUkVRVUVTVF9SRUZFUlJFUiA9IDQwMzAxNSwgLy8gd2UgY2FuJ3QgdmFsaWRhdGUgdGhlIHJlcXVlc3QgYmVjYXVzZSB0aGUgcmVmZXJyZXIgaGVhZGVyIGlzIG1pc3NpbmdcbiAgICBVTkVYUEVDVEVEX1BST1ZJREVSX1VTRVIgPSA0MDMwMTcsIC8vIHRoZSBsb2dnZWQgaW4gdXNlciBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgb25lIGV4cGVjdGVkXG4gICAgUEVSTUlTU0lPTl9OT1RfUkVRVUVTVEVEID0gNDAzMDIyLCAvLyB0aGUgYWN0aW9uIG5lZWRzIGEgdXNlciBwZXJtaXNzaW9uIGFuZCBpdCB3YXMgbm90IHJlcXVlc3RlZFxuICAgIE5PX1VTRVJfUEVSTUlTU0lPTiA9IDQwMzAyMywgLy8gdGhlIGFjdGlvbiBuZWVkcyBhIHVzZXIgcGVybWlzc2lvbiBhbmQgd2UgZG9uJ3QgaGF2ZSBvbmVcbiAgICBQUk9WSURFUl9MSU1JVF9SRUFDSEVEID0gNDAzMDI0LCAvLyB0aGUgcHJvdmlkZXIgbGltaXQgZm9yIHRoaXMgYWN0aW9uIHdhcyBleGNlZWRlZFxuICAgIElOVkFMSURfVE9LRU4gPSA0MDMwMjUsIC8vIE9BdXRoMlxuICAgIFVOQVVUSE9SSVpFRF9BQ0NFU1NfRVJST1IgPSA0MDMwMjYsIC8vIENhbGxzIHRvIGFjY291bnRzLmlzQXZhaWxhYmxlTG9naW5JRCBXaGVuIHByZXZlbnRMb2dpbklESGFydmVzdGluZyA9IHRydWUgc2hvdWxkIHJldHVybiBhbiBhcHByb3ByaWF0ZSA0MDN4eHggdW5hdXRob3JpemVkIGFjY2VzcyBlcnJvci5cbiAgICBESUZGRVJFTlRfVVNFUl9GT1JfUkVBVVRIID0gNDAzMDI3LCAvLyBEaWZmZXJlbnQgdXNlciB0cmllZCB0byByZS1hdXRob3JpemUuXG4gICAgU0VTU0lPTl9FWFBJUkVEX1JFVFJZID0gNDAzMDMwLCAvLyBJbm5lciBjb2RlIC0gd2hlbiB0aGUgZmFjZWJvb2sgc2Vzc2lvbiBpcyBleHBpcmVkIGFuZCB0aGUgY2xpZW50IHdhaXRzIGZvciBGQiBvbiBwYWdlIHRvIGxvYWRcbiAgICBBUFBST1ZFRF9CWV9NT0RFUkFUT1IgPSA0MDMwMzEsIC8vIGNvbW1lbnRzIC0gY2FudCBmbGFnIGNvbW1lbnQsIGl0IHdhcyBhcHByb3ZlZCBieSB0aGUgbW9kZXJhdG9yIGFscmVhZHkuXG4gICAgVE9LRU5fSEFTX1JFTkVXRUQgPSA0MDMwMzIsIC8vIHRoZSB0b2tlbiBpcyBubyBsb25nZXIgdmFsaWQsIGJ1dCB3ZSBoYXZlIG5ldyB0b2tlbiB0byBwcm92aWRlXG4gICAgTk9fVVNFUl9DT09LSUUgPSA0MDMwMzUsIC8vIG5vIHVzZXIgY29va2llXG4gICAgVU5BVVRIT1JJWkVEX1BBUlRORVIgPSA0MDMwMzYsIC8vIHBhcnRuZXIgaXMgZGlzYWJsZWRcbiAgICBQT1NUX0RFTklFRCA9IDQwMzAzNywgLy8gQ29tbWVudHMgc2VydmVyIC0gUG9zdCBkZW5pZWQgd2hlbiB0aGUgdXNlciB0cmllZCB0byByZXZpZXcgdHdpY2UuXG4gICAgTk9fTE9HSU5fVElDS0VUID0gNDAzMDQwLCAvLyBubyBsb2dpbiB0aWNrZXQgaW4gY2FsbGJhY2sgdXJsXG4gICAgQUNDT1VOVF9ESVNBQkxFRCA9IDQwMzA0MSwgLy8gRm9yIGFjY291bnRzIC0gd2hlbiBncy5hY2NvdW50cy5Jc0FjdGl2ZT1mYWxzZVxuICAgIElOVkFMSURfTE9HSU5JRCA9IDQwMzA0MiwgLy8gRm9yIGFjY291bnRzIC0gd2hlbiB0cnlpbmcgdG8gbG9naW4gd2l0aCBhIGxvZ2luSUQgdGhhdCBkbyBub3QgZXhpc3RzXG4gICAgTE9HSU5fSURFTlRJRklFUl9FWElTVFMgPSA0MDMwNDMsIC8vIEZvciBhY2NvdW50OiBJZiBwcm92aWRlckVtYWlsIGlzIGRlZmluZWQgYXMgYSBsb2dpbklkZW50aWZpZXIgaW4gdGhlIHBvbGljeSwgYW5kIHRoZSBlbWFpbCBhZGRyZXNzIHJlY2VpdmVkIGZyb20gdGhlIHByb3ZpZGVyIGV4aXN0cyBpbiB0aGUgZ3MubG9naW5JZGVudGlmaWVycyBjb2xsZWN0aW9uIGJ1dCBhc3NvY2lhdGVkIHdpdGggYSBkaWZmZXJlbnQgVVVJRCB0aGFuIHRoZSBjdXJyZW50IHVzZXIsIHRoZW4gcmV0dXJuIFwiTG9naW4gaWRlbnRpZmllciBleGlzdHNcIiBlcnJvciBjb2RlICg0MDN4eHgpLlxuICAgIFVOREVSQUdFX1VTRVIgPSA0MDMwNDQsIC8vIEZvciBDT1BQQSBjb21wbGlhbmNlIChDaGlsZHJlbidzIE9ubGluZSBQcml2YWN5IFByb3RlY3Rpb24gQWN0KVxuICAgIElOVkFMSURfU0lURV9DT05GSUdVUkFUSU9OX0VSUk9SID0gNDAzMDQ1LCAvLyBGb3IgYWNjb3VudHMgLSBzaXRlIERTIGlzIGVuYWJsZWQgdGhvdWdoIG5vIERTU2l6ZSB3YXMgY29uZmlndXJlZC5cbiAgICBMT0dJTklEX0RPRVNfTk9UX0VYSVNUID0gNDAzMDQ3LCAvLyBGb3IgYWNjb3VudHMgLSB3aGVuIHRyeWluZyB0byByZXNldCBwYXNzd29yZCB3aXRoIGEgbG9naW5JRCB0aGF0IGRvIG5vdCBleGlzdHNcbiAgICBBUElfUkFURV9MSU1JVF9FWENFRURFRCA9IDQwMzA0OCxcbiAgICBQRU5ESU5HX1BBU1NXT1JEX0NIQU5HRSA9IDQwMzEwMCwgLy8gVGhlIHVzZXIncyBwYXNzd29yZCBuZWVkcyB0byBiZSBjaGFuZ2VkXG4gICAgQUNDT1VOVF9QRU5ESU5HX1RGQV9WRVJJRklDQVRJT04gPSA0MDMxMDEsXG4gICAgQUNDT1VOVF9QRU5ESU5HX1RGQV9SRUdJU1RSQVRJT04gPSA0MDMxMDIsXG4gICAgQUNDT1VOVF9QRU5ESU5HX1JFQ0VOVF9MT0dJTiA9IDQwMzExMCxcbiAgICBBQ0NPVU5UX1RFTVBPUkFSSUxZX0xPQ0tFRF9PVVQgPSA0MDMxMjAsIC8vIFRvbyBtYW55IGxvZ2luIGF0dGVtcHRzOyBhY2NvdW50IGxvY2tlZC1vdXRcbiAgICBSRURVTkRBTlRfT1BFUkFUSU9OID0gNDAzMjAwLCAvLyBUaGUgY2xpZW50IHBlcmZvcm1lZCBhbiBvcGVyYXRpb24gdGhhdCBpcyByZWR1bmRhbnRcbiAgICBJTlZBTElEX0FQUExJQ0FUSU9OX0lEID0gNDAzMjAxLCAvLyBUaGUgYXBwIGlkIHByb3ZpZGVkIGlzIGRpZmZlcmVudCB0aGFuIHRoZSBvbmUgY29uZmlndXJlZCBmb3IgdGhlIHNpdGVcbiAgICBOT1RfRk9VTkQgPSA0MDQwMDAsIC8vIENvbW1lbnRzIHNlcnZlciAtIENhdGVnb3J5IG5vdCBmb3VuZC4gQWNjb3VudHMgLSBlbWFpbCB2ZXJpZmljYXRpb24gZmFpbGVkLCB1dWlkIG5vdCBmb3VuZC5cbiAgICBGUklFTkRfTk9UX0ZPVU5EID0gNDA0MDAxLCAvLyB0aGUgdXNlciBpZCBwcm92aWRlZCBhcyBhIHRhcmdldCBpcyBub3QgYSBmcmllbmQgZm9yIHRoZSBjdXJyZW50IHVzZXJcbiAgICBDQVRFR09SWV9OT1RfRk9VTkQgPSA0MDQwMDIsIC8vIENvbW1lbnRzIHNlcnZlciAtIENhdGVnb3J5IG5vdCBmb3VuZC5cbiAgICBVSURfTk9UX0ZPVU5EID0gNDA0MDAzLFxuICAgIFJFU09VUkNFX05PVF9GT1VORCA9IDQwNDAwNCwgLy8gQ2xpZW50IHNpZGUgLSBpbWFnZSBub3QgZm91bmQgYWZ0ZXIgdXBsb2FkXG4gICAgSU5WQUxJRF9BUElfTUVUSE9EID0gNDA1MDAxLCAvLyBpbnRlcm5hbCBmb3Igb3VyIEpTIEFQSVxuICAgIElERU5USVRZX0VYSVNUUyA9IDQwOTAwMSwgLy8gd2hlbiB0cnlpbmcgdG8gY29ubmVjdCB0byBhIHByb3ZpZGVyIHRoYXQgaXMgYWxyZWFkeSBjb25uZWN0ZWQgb3IgbGluayB0byBhbiBhbHJlYWR5IGxpbmtlZCBhY2NvdW50XG4gICAgR09ORSA9IDQxMDAwMCwgLy8gUmVzb3VyY2Ugbm8gbG9uZ2VyIGF2YWlsYWJsZS4gRGF0YSBLZXkgU2VydmVyIC0ga2V5IHJldm9rZWQvZXhwaXJlZC5cbiAgICBSRVFVRVNUX0VOVElUWV9UT09fTEFSR0UgPSA0MTMwMDEsIC8vIENvbW1lbnRzIHNlcnZlciAtIFJlcXVlc3QgdG8gbGFyZ2VcbiAgICBDT01NRU5UX1RFWFRfVE9PX0xBUkdFID0gNDEzMDAyLCAvLyBDb21tZW50cyBzZXJ2ZXIgLSBDb21tZW50IFRleHQgdG8gbGFyZ2UuXG4gICAgT0JKRUNUX1RPT19MQVJHRSA9IDQxMzAwMywgLy8gRGF0YVN0b3JlIG9iamVjdCBpcyB0b28gbGFyZ2VcbiAgICBQUk9GSUxFX1BIT1RPX1RPT19MQVJHRSA9IDQxMzAwNCwgLy8gUHJvZmlsZSBwaG90byBpcyB0b28gbGFyZ2UsIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkIGNvbnRlbnQgbGVuZ3RoXG4gICAgUkVRVUVTVF9VUklfVE9PX0xPTkcgPSA0MTQwMDAsIC8vVGhlIFVSSSBwcm92aWRlZCB3YXMgdG9vIGxvbmcgZm9yIHRoZSBzZXJ2ZXIgdG8gcHJvY2Vzcy5cbiAgICBNSVNTSU5HX1VTRVJfUEhPVE8gPSA0MDkwMTAsIC8vIEVycm9yIC0gbWlzc2luZyB1c2VyIHBob3RvXG4gICAgQ09VTlRFUl9OT1RfUkVHSVNURVJFRCA9IDQwOTAxMSwgLy8gQ291bnRlciBub3QgcmVnaXN0ZXJlZFxuICAgIElOVkFMSURfR01JRF9USUNLRVQgPSA0MDkwMTIsIC8vIGdtaWQgdGlja2V0IGlzIG5vdCB2YWxpZFxuICAgIFNBTUxfTUFQUEVEX0FUVFJJQlVURV9OT1RfRk9VTkQgPSA0MDkwMTMsIC8vIFVzZWQgd2hlbiBtYXBwZWQgYXR0cmlidXRlIHZhbHVlIGZvciBwcm92aWRlclVJRCBjYW5ub3QgYmUgcmV0cmVpdmVkXG4gICAgU0FNTF9DRVJUSUZJQ0FURV9OT1RfRk9VTkQgPSA0MDkwMTQsIC8vIFVzZWQgd2hlbiBTQU1MIGNlcnRpZmljYXRlIGNvdWxkIG5vdCBiZSByZXRyZWl2ZWQuXG4gICAgU0FNTF9NRVNTQUdFX05PVF9GT1VORCA9IDQwOTAxNSwgLy8gVXNlZCB3aGVuIGNhY2hlZCBTQU1MIG1lc3NhZ2UgY291bGQgbm90IGJlIHJldHJlaXZlZC5cbiAgICBHRU5FUkFMX1NFUlZFUl9FUlJPUiA9IDUwMDAwMSxcbiAgICBTRVJWRVJfTE9HSU5fRVJST1IgPSA1MDAwMDIsIC8vIGdlbmVyYWwgZXJyb3IgZHVyaW5nIHRoZSBsb2dpbiBwcm9jZXNzXG4gICAgREVGQVVMVF9BUFBMSUNBVElPTl9DT05GSUdVUkFUSU9OX0VSUk9SID0gNTAwMDAzLCAvLyBGb3IgbXVsdGlwbGUgREMgLSB3aGVuIG5vIGRlZmF1bHQgYXBwbGljYXRpb24gY2FuIGJlIGZvdW5kIGluIERlZmF1bHRBcHBsaWNhdGlvbnMuY29uZmlnLiBXaXRoIGVycm9yIGRldGFpbHMgb2Y6IFwiRGVmYXVsdCBhcHBsaWNhdGlvbiBpc24ndCBjb25maWd1cmVkIGZvciBkYXRhQ2VudGVyXCJcbiAgICBTRVNTSU9OX01JR1JBVElPTl9FUlJPUiA9IDUwMDAxNCwgLy8gZXJyb3IgaW4gbWlncmF0aW5nIG9sZCB0byBuZXcgZmFjZWJvb2sgc2Vzc2lvblxuICAgIFBST1ZJREVSX0VSUk9SID0gNTAwMDIzLCAvLyBnZW5lcmFsIGVycm9yIGZyb20gdGhlIHByb3ZpZGVyXG4gICAgREFUQUJBU0VfRVJST1IgPSA1MDAwMjgsXG4gICAgVVNFUk5BTUVfUkVRVUlSRUQgPSA1MDAwMjksIC8vIElubmVyIGNvZGVcbiAgICBOT19QUk9WSURFUl9BUFBMSUNBVElPTiA9IDUwMDAzMSwgLy8gdGhlIGFwcGxpY2F0aW9uIGZvciB0aGlzIHByb3ZpZGVyIGlzIG5vdCBkZWZpbmVkIGZvciB0aGlzIHNpdGVcbiAgICBMT0FEX0ZBSUxFRCA9IDUwMDAzMiwgLy8gY2xpZW50IGVycm9yXG4gICAgSU5WQUxJRF9FTlZJUk9OTUVOVF9DT05GSUcgPSA1MDAwMzMsIC8vIEluIGNhc2UgdGhlcmUgaXMgbm8gdGFyZ2V0IGVudmlyb25tZW50IGluIHRoZSBjb25maWcgZmlsZSB3ZSdkIHJldHVybiB3aXRoICBpbnZhbGlkX2Vudmlyb25tZW50X2NvbmZpZyBlcnJvci5cbiAgICBFUlJPUl9EVVJJTkdfQkFDS0VORF9PUEVSQVRJT04gPSA1MDAwMzQsXG4gICAgVElNRU9VVCA9IDUwNDAwMSwgLy8gb3V0Z29pbmcgcmVxdWVzdCBoYWQgdGltZWQgb3V0XG4gICAgQ0xJRU5UVElNRU9VVCA9IDUwNDAwMiwgLy8gRm9yIHNlcnZlciBTREtzIC0gYSBjbGllbnQgc2lkZSB0aW1lb3V0XG4gICAgSU5WQUxJRF9VUkwgPSA0MDQwMDQsIC8vIGVtYmVkLmx5IDQwNCBlcnJvciBtZXNzYWdlIC0gdXJsIGlzIG5vdCB2YWxpZFxuICAgIE1FRElBX0lURU1TX05PVF9TVVBQT1JURUQgPSA0MDEwMDEsIC8vIE1lZGlhIGl0ZW1zIGEgbm90IGFsbG93ZWQgZm9yIHRoaXMgY2F0ZWdvcnlcbiAgICBNSVNTSU5HX0VSUk9SX0NPREUgPSA1OTk5OTksXG4gICAgVEhJU19BVVRIRU5USUNBVElPTl9NRVRIT0RfSVNfQ1VSUkVOVExZX0RJU0FCTEVEICA9IDQwMzMwMCxcbiAgICBGT1JDRV9MSU5LX0xPR0lOX0lERU5USUZJRVJfRVhJU1RTID0gNDA5MDAzLFxuICAgIFBBU1NLRVlfQVVUSEVOVElDQVRPUl9SRUdJU1RFUkVEID0gNDAwMTMwLFxuICAgIFBBU1NLRVlfQUJPUlRFRCA9IDQwMDEzMSxcbiAgICBQQVNTS0VZX0VSUk9SID0gNTAwMTMxXG59XG5leHBvcnQgY29uc3QgZW51bSBHU0Vycm9yRGV0YWlscyB7XG4gICAgTm9uZSA9IDAsXG4gICAgU2FtZV9wYXNzd29yZCA9IDEwMDAwMSwgLy8gUmVzZXQgUGFzc3dvcmQgLSBcIidvbGRQYXNzd29yZCcgY2Fubm90IGJlIHRoZSBzYW1lIGFzICduZXdQYXNzd29yZCdcIlxuICAgIEludmFsaWRfcGFzc3dvcmQgPSAxMDAwMDIsIC8vIFJlc2V0IFBhc3N3b3JkIC0gY3VycmVudCBwYXNzd29yZCBpcyB3cm9uZy9pbnZhbGlkXG4gICAgSW52YWxpZF9jb3VudGVyc19xdWVyeV93aXRoX2N1cnNvciA9IDEwMDAwMyxcbn1cbiIsImltcG9ydCB7IEdTRXJyb3JzIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0dTRXJyb3JzJztcbmltcG9ydCB7IGxvY2FsSW5mbyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9Mb2NhbEluZm8nO1xuaW1wb3J0ICogYXMgdG9rZW5TdG9yZSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy5BZGFwdGVycy5XZWIvYXBwL1Rva2VuU3RvcmUnO1xuaW1wb3J0ICogYXMgbG9jYWxTdG9yYWdlVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2xvY2FsU3RvcmFnZSc7XG5pbXBvcnQgKiBhcyBKU09OVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL0pTT04nO1xuaW1wb3J0ICogYXMgb2JqZWN0VXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL29iamVjdCc7XG5pbXBvcnQgKiBhcyBVUkxVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvVVJMJztcblxuZXhwb3J0IGVudW0gTWVzc2FnaW5nTWV0aG9kIHtcbiAgICBMb2NhbFN0b3JhZ2VMaXN0ZW5lcixcbiAgICBQb3N0TWVzc2FnZSxcbiAgICBGbGFzaCxcbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvbXBsZXRlUmVnaXN0cmF0aW9uKFxuICAgIHJlczogT2JqZWN0LFxuICAgIHBhcmFtczogT2JqZWN0LFxuICAgIG1ldGhvZE5hbWU6IHN0cmluZyxcbiAgICBjYWxsYmFjazogKHJlc3BvbnNlLCBzdXBwcmVzc0V2ZW50cz86IGJvb2xlYW4sIHJldHJ5PzogYm9vbGVhbikgPT4gdm9pZCxcbikge1xuICAgIHZhciBzY3JlZW5TZXQ7XG4gICAgdmFyIHJldHJ5O1xuICAgIHZhciBwZW5kaW5nID0gZmFsc2U7XG4gICAgbGV0IHByb3ZpZGVyU2Vzc2lvbkluZm87XG4gICAgaWYgKHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuQUZURVJfRU1BSUxfVkVSSUZJQ0FUSU9OKSB7XG4gICAgICAgIC8vIEhhbmRsZSBhdXRvTG9naW4gZnJvbSByZWdpc3RyYXRpb24gbGlua1xuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbygnZmluYWxpemluZyByZWdpc3RyYXRpb24gYWZ0ZXIgZW1haWwgdmVyaWZpY2F0aW9uJyk7XG4gICAgICAgIHBlbmRpbmcgPSB0cnVlO1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5maW5hbGl6ZVJlZ2lzdHJhdGlvbih7XG4gICAgICAgICAgICByZWdUb2tlbjogcmVzWydyZWdUb2tlbiddLFxuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsIC8vIGJlY2F1c2UgYm9vdHN0cmFwIG1heSBub3QgaGF2ZSBmaW5pc2hlZCB5ZXRcbiAgICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgICAhcGFyYW1zWydpZ25vcmVJbnRlcnJ1cHRpb25zJ10gJiZcbiAgICAgICAgIXBhcmFtc1snZG9udEhhbmRsZVNjcmVlblNldCddICYmXG4gICAgICAgICgoKHJlc1sncmVnVG9rZW4nXSB8fCBwYXJhbXNbJ3JlZ1Rva2VuJ10pICYmIC8vIGhhcyByZWdUb2tlblxuICAgICAgICAgICAgKHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuT0tfV0lUSF9FUlJPUl9MT0dJTl9JREVOVElGSUVSX0VYSVNUUyB8fCAvLyBzb2NpYWxMb2dpbi9zZXRBY2NvdW50SW5mbyBzYXZlZCB3aXRoIGxvZ2luSUQgZXhpc3QgZXJyb3JcbiAgICAgICAgICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkZPUkNFX0xJTktfTE9HSU5fSURFTlRJRklFUl9FWElTVFMgfHwgLy9mb3JjZUxpbmtpbmcgbG9naW5JZCBleGlzdHNcbiAgICAgICAgICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkxPR0lOX0lERU5USUZJRVJfRVhJU1RTKSkgfHwgLy8gbG9naW5JRCBleGlzdHNcbiAgICAgICAgcmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5BQ0NPVU5UX1BFTkRJTkdfUkVHSVNUUkFUSU9OIHx8IC8vIHBlbmRpbmcgcmVnaXN0cmF0aW9uXG4gICAgICAgIHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuQUNDT1VOVF9QRU5ESU5HX1ZFUklGSUNBVElPTiB8fCAvLyBwZW5kaW5nIGVtYWlsIHZlcmlmaWNhdGlvblxuICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkFDQ09VTlRfTUlTU0lOR19MT0dJTklEIHx8IC8vIHBlbmRpbmcgTG9naW5JRFxuICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkFDQ09VTlRfUEVORElOR19URkFfVkVSSUZJQ0FUSU9OIHx8IC8vIHBlbmRpbmcgVEZBIHZlcmlmaWNhdGlvblxuICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkFDQ09VTlRfUEVORElOR19URkFfUkVHSVNUUkFUSU9OIHx8IC8vIHBlbmRpbmcgVEZBIHJlZ2lzdHJhdGlvblxuICAgICAgICByZXNbJ2Vycm9yQ29kZSddID09IEdTRXJyb3JzLkFDQ09VTlRfUEVORElOR19SRUNFTlRfTE9HSU4gfHwgLy8gcGVuZGluZyByZWNlbnQgbG9naW5cbiAgICAgICAgcmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5QRU5ESU5HX1BBU1NXT1JEX0NIQU5HRSB8fCAvLyBwZW5kaW5nIHBhc3N3b3JkIGNoYW5nZVxuICAgICAgICAgICAgcmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5QRU5ESU5HX0NPREVfVkVSSUZJQ0FUSU9OKSAvLyBwZW5kaW5nIGNvZGUgdmVyaWZpY2F0aW9uXG4gICAgKSB7XG4gICAgICAgIGlmKHJlc1snZXJyb3JDb2RlJ10gPT0gR1NFcnJvcnMuRk9SQ0VfTElOS19MT0dJTl9JREVOVElGSUVSX0VYSVNUUykge1xuICAgICAgICAgICAgcHJvdmlkZXJTZXNzaW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NfdG9rZW46IHJlc1snYWNjZXNzX3Rva2VuJ10sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IHJlc1sncHJvdmlkZXInXSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcl91aWQ6IHJlc1sncHJvdmlkZXJfdWlkJ10sXG4gICAgICAgICAgICAgICAgaWRUb2tlbjogcmVzWydpZF90b2tlbiddLFxuICAgICAgICAgICAgICAgIGNvZGU6cmVzWydjb2RlJ10sXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHJlc1snbGFzdE5hbWUnXSxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6IHJlc1snZmlyc3ROYW1lJ10sXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld01vZGFsO1xuICAgICAgICBpZiAocmVzWydlcnJvckNvZGUnXSA9PSBHU0Vycm9ycy5BQ0NPVU5UX1BFTkRJTkdfUkVDRU5UX0xPR0lOKSB7XG4gICAgICAgICAgICByZXRyeSA9IHRydWU7XG4gICAgICAgICAgICBuZXdNb2RhbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmFtc1snZGVmYXVsdE1vYmlsZVJlZ1NjcmVlblNldCddICYmIGxvY2FsSW5mby5pc01vYmlsZSkge1xuICAgICAgICAgICAgc2NyZWVuU2V0ID0gcGFyYW1zWydkZWZhdWx0TW9iaWxlUmVnU2NyZWVuU2V0J107XG4gICAgICAgIH0gZWxzZSBpZiAocGFyYW1zWydkZWZhdWx0UmVnU2NyZWVuU2V0J10pIHtcbiAgICAgICAgICAgIHNjcmVlblNldCA9IHBhcmFtc1snZGVmYXVsdFJlZ1NjcmVlblNldCddO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNjcmVlblNldCkge1xuICAgICAgICBnaWd5YS5sb2dnZXIuaW5mbyhgc2hvd2luZyBzY3JlZW5zZXQgJyR7c2NyZWVuU2V0fScgZm9yIGVycm9yQ29kZSAke3Jlc1snZXJyb3JDb2RlJ119YCk7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5ncm91cChzY3JlZW5TZXQpO1xuXG4gICAgICAgIGdpZ3lhLmFjY291bnRzLnNob3dTY3JlZW5TZXQoe1xuICAgICAgICAgICAgaWdub3JlQXBpUXVldWU6IHRydWUsIC8vIGJlY2F1c2UgYm9vdHN0cmFwIG1heSBub3QgaGF2ZSBmaW5pc2hlZCB5ZXRcbiAgICAgICAgICAgIG5ld01vZGFsLFxuICAgICAgICAgICAgc2NyZWVuU2V0LFxuICAgICAgICAgICAgaW5pdGlhbE1ldGhvZDogbWV0aG9kTmFtZSxcbiAgICAgICAgICAgIGluaXRpYWxSZXNwb25zZTogcmVzLFxuICAgICAgICAgICAgc3VwcHJlc3NMb2dpbkV2ZW50OiBwYXJhbXNbJ3N1cHByZXNzTG9naW5FdmVudCddLFxuICAgICAgICAgICAgcHJvdmlkZXJTZXNzaW9uSW5mbyxcbiAgICAgICAgICAgIG9uRXJyb3I6IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25IaWRlOiBlID0+IHtcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIuZ3JvdXBFbmQoc2NyZWVuU2V0KTtcbiAgICAgICAgICAgICAgICBpZiAoZS5yZWFzb24gPT09ICdmaW5pc2hlZCcgJiYgZS51c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VySW5mbzogZS51c2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBlLnNvdXJjZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhzdWNjZXNzUmVzcG9uc2UsIHRydWUsIHJldHJ5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoIXBlbmRpbmcpIHtcbiAgICAgICAgY2FsbGJhY2socmVzKTtcbiAgICB9XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tHcm91cEludml0YXRpb24ocGFyYW1zOiBhbnkpIHtcbiAgICBpZiAoIXBhcmFtcy5pbnZpdGF0aW9uSWQpIHtcbiAgICAgICAgZ2lneWEuZXZlbnRzLmdsb2JhbC5kaXNwYXRjaFdoZW5IYW5kbGVyc0FkZGVkKFsnYWNjb3VudHMuZXJyb3InLCAnc29jaWFsaXplLmVycm9yJ10sIHtcbiAgICAgICAgICAgIHN0YXR1czogJ01JU1NJTkdfUkVRVUlSRURfUEFSQU1FVEVSJyxcbiAgICAgICAgICAgIHN0YXR1c01lc3NhZ2U6ICdNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlcjogaW52aXRhdGlvbklkJyxcbiAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuTUlTU0lOR19SRVFVSVJFRF9QQVJBTUVURVIsXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6ICdNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlcjogaW52aXRhdGlvbklkJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY29uZmlybWF0aW9uID0gYXdhaXQgY29uZmlybUdyb3VwSW52aXRhdGlvbihwYXJhbXMuaW52aXRhdGlvbklkKTtcbiAgICBpZiAoIWNvbmZpcm1hdGlvbi50b2tlbikge1xuICAgICAgICBnaWd5YS5ldmVudHMuZ2xvYmFsLmRpc3BhdGNoV2hlbkhhbmRsZXJzQWRkZWQoWydhY2NvdW50cy5lcnJvcicsICdzb2NpYWxpemUuZXJyb3InXSwgY29uZmlybWF0aW9uKTtcbiAgICB9IGVsc2UgaWYgKHRva2VuU3RvcmUuZ2V0KCkgPT09IG51bGwpIHtcbiAgICAgICAgZ2lneWEuYWNjb3VudHMuYWRkRXZlbnRIYW5kbGVycyh7XG4gICAgICAgICAgICBvbkxvZ2luOiBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgIGF3YWl0IGZpbmFsaXplR3JvdXBJbnZpdGF0aW9uKGNvbmZpcm1hdGlvbi50b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBzY3JlZW5TZXQgPSBsb2NhbEluZm8uaXNNb2JpbGUgPyBnaWd5YS50aGlzU2NyaXB0Lmdsb2JhbENvbmYuZGVmYXVsdE1vYmlsZVJlZ1NjcmVlblNldCA6IGdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZi5kZWZhdWx0UmVnU2NyZWVuU2V0O1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5zaG93U2NyZWVuU2V0KHtcbiAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlLCAvLyBiZWNhdXNlIGJvb3RzdHJhcCBtYXkgbm90IGhhdmUgZmluaXNoZWQgeWV0XG4gICAgICAgICAgICBzY3JlZW5TZXRcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgZmluYWxpemVHcm91cEludml0YXRpb24oY29uZmlybWF0aW9uLnRva2VuKTtcbiAgICB9XG59XG5hc3luYyBmdW5jdGlvbiBjb25maXJtR3JvdXBJbnZpdGF0aW9uKGludml0YXRpb25JZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGdpZ3lhLmFjY291bnRzLmdyb3Vwcy5pbnZpdGF0aW9uQ29uZmlybSh7XG4gICAgICAgICAgICBpZ25vcmVBcGlRdWV1ZTogdHJ1ZSwgLy8gYmVjYXVzZSBib290c3RyYXAgbWF5IG5vdCBoYXZlIGZpbmlzaGVkIHlldFxuICAgICAgICAgICAgaW52aXRhdGlvbklkLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHJlc29sdmVcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5hc3luYyBmdW5jdGlvbiBmaW5hbGl6ZUdyb3VwSW52aXRhdGlvbih0b2tlbjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBnaWd5YS5hY2NvdW50cy5ncm91cHMuZmluYWxpemVJbnZpdGF0aW9uKHtcbiAgICAgICAgICAgIGlnbm9yZUFwaVF1ZXVlOiB0cnVlLCAvLyBiZWNhdXNlIGJvb3RzdHJhcCBtYXkgbm90IGhhdmUgZmluaXNoZWQgeWV0XG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIGNhbGxiYWNrOiByZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3JDb2RlICE9PSBHU0Vycm9ycy5PSykge1xuICAgICAgICAgICAgICAgICAgICBnaWd5YS5ldmVudHMuZ2xvYmFsLmRpc3BhdGNoV2hlbkhhbmRsZXJzQWRkZWQoWydhY2NvdW50cy5lcnJvcicsICdzb2NpYWxpemUuZXJyb3InXSwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBnaWd5YS5ldmVudHMuZ2xvYmFsLmRpc3BhdGNoV2hlbkhhbmRsZXJzQWRkZWQoXG4gICAgICAgICAgICAgICAgICAgICAgICBbJ2FjY291bnRzLmZpbmFsaXplR3JvdXBJbnZpdGF0aW9uJywgJ3NvY2lhbGl6ZS5maW5hbGl6ZUdyb3VwSW52aXRhdGlvbiddLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEdpZ3lhU2V0dGluZ3MoZ3JvdXA6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZ2lneWFTZXR0aW5ncyA9IGxvY2FsU3RvcmFnZVV0aWxzLmdldE9iamVjdCgnZ2lneWFTZXR0aW5ncycpO1xuICAgIHJldHVybiBKU09OVXRpbHMuc2VyaWFsaXplKGdpZ3lhU2V0dGluZ3NbZ3JvdXBdKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRHaWd5YVNldHRpbmdzKGdyb3VwOiBzdHJpbmcsIHNldHRpbmdzOiBPYmplY3QpOiB2b2lkIHtcbiAgICBjb25zdCBnaWd5YVNldHRpbmdzID0gbG9jYWxTdG9yYWdlVXRpbHMuZ2V0T2JqZWN0KCdnaWd5YVNldHRpbmdzJywgeyBbZ3JvdXBdOiB7fSB9KTtcbiAgICBmb3IgKHZhciBwIGluIHNldHRpbmdzKSB7XG4gICAgICAgIGdpZ3lhU2V0dGluZ3NbZ3JvdXBdW3BdID0gc2V0dGluZ3NbcF07XG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZVV0aWxzLnNldEl0ZW0oJ2dpZ3lhU2V0dGluZ3MnLCBKU09OVXRpbHMuc2VyaWFsaXplKGdpZ3lhU2V0dGluZ3MpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWxHaWd5YVNldHRpbmdzKGdyb3VwOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIWdyb3VwKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZVV0aWxzLnJlbW92ZUl0ZW0oJ2dpZ3lhU2V0dGluZ3MnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBnaWd5YVNldHRpbmdzID0gbG9jYWxTdG9yYWdlVXRpbHMuZ2V0T2JqZWN0KCdnaWd5YVNldHRpbmdzJyk7XG4gICAgICAgIGlmIChnaWd5YVNldHRpbmdzKSB7XG4gICAgICAgICAgICBkZWxldGUgZ2lneWFTZXR0aW5nc1tncm91cF07XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VVdGlscy5zZXRJdGVtKCdnaWd5YVNldHRpbmdzJywgSlNPTlV0aWxzLnNlcmlhbGl6ZShnaWd5YVNldHRpbmdzKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlU3BlY2lhbEZpZWxkcyhvKSB7XG4gICAgdmFyIGNvbGxlY3Rpb24gPSBnaWd5YS5zb2NpYWxpemUuQ29sbGVjdGlvbjtcbiAgICB2YXIgdG9UeXBlZCA9IGZ1bmN0aW9uKGFyciwgY3Rvcikge1xuICAgICAgICB2YXIgb2FyciA9IFtdO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciBlbCA9IGFycltpXTtcbiAgICAgICAgd2hpbGUgKGVsKSB7XG4gICAgICAgICAgICBvYXJyLnB1c2gobmV3IGN0b3IoZWwpKTtcbiAgICAgICAgICAgIGlmIChvYXJyW2ldLmlkZW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICBjb252ZXJ0SWRlbnRpdGllc0FycmF5VG9PYmplY3Qob2FycltpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbCA9IGFyclsrK2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYXJyO1xuICAgIH07XG5cbiAgICBpZiAoby5waG90b3MpIG8ucGhvdG9zID0gbmV3IGNvbGxlY3Rpb24oby5waG90b3MsICdwaG90b0lEJyk7XG4gICAgaWYgKG8uYWxidW1zKSBvLmFsYnVtcyA9IG5ldyBjb2xsZWN0aW9uKG8uYWxidW1zLCAnYWxidW1JRCcpO1xuICAgIGlmIChvLmNvbnRhY3RzKSBvLmNvbnRhY3RzID0gbmV3IGNvbGxlY3Rpb24odG9UeXBlZChvLmNvbnRhY3RzLCBnaWd5YS5zb2NpYWxpemUuQ29udGFjdCksICdlbWFpbCcpO1xuICAgIGlmIChvLmZyaWVuZCkgby5mcmllbmQgPSBuZXcgY29sbGVjdGlvbih0b1R5cGVkKG8uZnJpZW5kLCBnaWd5YS5zb2NpYWxpemUuRnJpZW5kKSwgJ1VJRCcpO1xuXG4gICAgaWYgKG8udXNlcikgby51c2VyID0gbmV3IGdpZ3lhLnNvY2lhbGl6ZS5Vc2VyKG8udXNlcik7XG5cbiAgICBpZiAoby5mcmllbmRzICYmIG8uZnJpZW5kcyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIHZhciBhclVJRHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvLmZyaWVuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyVUlEcy5wdXNoKG8uZnJpZW5kc1tpXS5VSUQpO1xuICAgICAgICB9XG4gICAgICAgIG8uVUlEcyA9IGFyVUlEcy5qb2luKCcsJyk7XG5cbiAgICAgICAgby5mcmllbmRzID0gbmV3IGNvbGxlY3Rpb24odG9UeXBlZChvLmZyaWVuZHMsIGdpZ3lhLnNvY2lhbGl6ZS5GcmllbmQpLCAnVUlEJyk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRJZGVudGl0aWVzQXJyYXlUb09iamVjdChvKSB7XG4gICAgaWYgKG8uaWRlbnRpdGllcyA9PSBudWxsKSB7XG4gICAgICAgIG8uaWRlbnRpdGllcyA9IHt9O1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmlkZW50aXRpZXMuY29uc3RydWN0b3IgIT0gQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaWRlbnRpdGllc0FycmF5ID0gby5pZGVudGl0aWVzO1xuICAgIG8uaWRlbnRpdGllcyA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaWRlbnRpdGllc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG8uaWRlbnRpdGllc1tpZGVudGl0aWVzQXJyYXlbaV0ucHJvdmlkZXJdID0gbmV3IGdpZ3lhLnNvY2lhbGl6ZS5JZGVudGl0eShpZGVudGl0aWVzQXJyYXlbaV0pO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRVc2VySW5mb1RvRXZlbnQocmVzcG9uc2U6IE9iamVjdCwgdGFyZ2V0T2JqZWN0OiBPYmplY3QsIGFkZExvZ2luUHJvcGVydGllcz86IGJvb2xlYW4sIHVzZUJhc2VQaG90b1VSTD86IHN0cmluZykge1xuICAgIHZhciBvVXNlciA9IHJlc3BvbnNlWyd1c2VyJ10gfHwgcmVzcG9uc2VbJ3VzZXJJbmZvJ107XG4gICAgaWYgKHRhcmdldE9iamVjdCA9PSBudWxsKSB0YXJnZXRPYmplY3QgPSB7fTtcbiAgICBpZiAob1VzZXIgIT0gbnVsbCkge1xuICAgICAgICB0YXJnZXRPYmplY3RbJ3VzZXInXSA9IG9iamVjdFV0aWxzLmNsb25lKG9Vc2VyKTtcbiAgICAgICAgaWYgKHJlc3BvbnNlWydpc0xvZ2dlZEluJ10gIT0gbnVsbCkgdGFyZ2V0T2JqZWN0Wyd1c2VyJ11bJ2lzTG9nZ2VkSW4nXSA9IHJlc3BvbnNlWydpc0xvZ2dlZEluJ107XG4gICAgICAgIGlmIChyZXNwb25zZVsnaXNTaXRlVUlEJ10gIT0gbnVsbCkgdGFyZ2V0T2JqZWN0Wyd1c2VyJ11bJ2lzU2l0ZVVJRCddID0gcmVzcG9uc2VbJ2lzU2l0ZVVJRCddO1xuICAgICAgICBpZiAocmVzcG9uc2VbJ2lSYW5rJ10gIT0gbnVsbCkgdGFyZ2V0T2JqZWN0Wyd1c2VyJ11bJ2lSYW5rJ10gPSByZXNwb25zZVsnaVJhbmsnXTtcbiAgICB9XG5cbiAgICBpZiAoYWRkTG9naW5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgIG9iamVjdFV0aWxzLmV4dHJhY3RQcm9wZXJ0aWVzKHJlc3BvbnNlLCB0YXJnZXRPYmplY3QsICdzaWduYXR1cmV8VUlEU2lnfHRpbWVzdGFtcHxVSURTaWduYXR1cmV8c2lnbmF0dXJlVGltZXN0YW1wfFVJRHxzaWduS2V5c1VJRFNpZ25hdHVyZXxkYXRhQ2VudGVyfGlkX3Rva2VufGdyb3VwcycpO1xuICAgICAgICBpZiAodGFyZ2V0T2JqZWN0Wyd1c2VyJ10gIT0gbnVsbCkge1xuICAgICAgICAgICAgdGFyZ2V0T2JqZWN0WydVSUQnXSA9IG9Vc2VyLlVJRDtcbiAgICAgICAgICAgIHRhcmdldE9iamVjdFsnaXNTaXRlVUlEJ10gPSBvVXNlci5pc1NpdGVVSUQ7XG4gICAgICAgICAgICAvLyBpc1NpdGVVSUQgaXMgdGVtcG9yYXJ5IGZvciBodHRwczovL2dpZ3lhLm15LnNhbGVzZm9yY2UuY29tLzUwMDQwMDAwMDBUM3FjWlxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXRPYmplY3Q7XG59XG5leHBvcnQgZnVuY3Rpb24gc2VuZEVtYWlsTmF0aXZlKHBhcmFtczogT2JqZWN0KSB7XG4gICAgdmFyIHVzZXJBY3Rpb24gPSBwYXJhbXNbJ3VzZXJBY3Rpb24nXSB8fCB7fTtcbiAgICB2YXIgc3ViamVjdCA9IHVzZXJBY3Rpb25bJ3RpdGxlJ10gfHwgJyc7XG4gICAgdmFyIGJvZHkgPSB1c2VyQWN0aW9uWydsaW5rQmFjayddIHx8ICcnO1xuICAgIGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSAnbWFpbHRvOj90bz0mc3ViamVjdD0nICsgVVJMVXRpbHMuVVJMRW5jb2RlKHN1YmplY3QpICsgJyZib2R5PScgKyBVUkxVdGlscy5VUkxFbmNvZGUoYm9keSk7XG4gICAgZ2lneWEuc29jaWFsaXplLnNlbmRFbWFpbChwYXJhbXMsIHsgZG9udFNlbmRFbWFpbDogdHJ1ZSB9KTsgLy8gVG8gcmVwb3J0IHRoYXQgc2VuZCB3aXRob3V0IHNlbmRpbmcgaXRcbn1cbiIsIi8vIExvY2FsIGVudmlyb25tZW50IGluZm8gKGJyb3dzZXIsIGNhcGFiaWxpdGllcywgaG9zdGluZyBkb21haW4pXG5cbmRlY2xhcmUgY29uc3QgQWN0aXZlWE9iamVjdDogYW55O1xuXG52YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuZXhwb3J0IHZhciBsb2NhbEluZm8gPSB7XG4gICAgYmFzZURvbWFpbjogJycsIC8vIGNhbGN1bGF0ZWQgbGF0ZXIgb25cbiAgICBpc0Jyb3dzZXJTdXBwb3J0c0ZpbGVzQVBJOiAoKCkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIEZpbGVSZWFkZXIgPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIEZpbGVSZWFkZXIgPT09ICdvYmplY3QnO1xuICAgIH0pKCksXG4gICAgaW5pdFRpbWU6IG5ldyBEYXRlKCksXG4gICAgdmVyc2lvbjogMCwgLy9UT0RPXG4gICAgcGFnZURvbWFpbjogZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWUsXG4gICAgcHJvdG9jb2w6IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID09ICdodHRwOicgPyAnaHR0cCcgOiAnaHR0cHMnLFxuICAgIHVzZXJBZ2VudDogdXNlckFnZW50LFxuICAgIGlzV2luOiB1c2VyQWdlbnQuaW5kZXhPZignd2luJykgIT0gLTEsXG4gICAgaXNJRTogdXNlckFnZW50LmluZGV4T2YoJ21zaWUnKSAhPSAtMSB8fCAodXNlckFnZW50LmluZGV4T2YoJ21vemlsbGEnKSAhPSAtMSAmJiB1c2VyQWdlbnQuaW5kZXhPZigndHJpZGVudCcpICE9IC0xKSxcbiAgICBpc0lFNjogdXNlckFnZW50LmluZGV4T2YoJ21zaWUgNi4nKSAhPSAtMSxcbiAgICBpc0lFNzogdXNlckFnZW50LmluZGV4T2YoJ21zaWUgNy4nKSAhPSAtMSxcbiAgICBpc0lFODogdXNlckFnZW50LmluZGV4T2YoJ21zaWUgOC4nKSAhPSAtMSxcbiAgICBpc0lFOTogdXNlckFnZW50LmluZGV4T2YoJ21zaWUgOS4nKSAhPSAtMSxcbiAgICBpc0lFMTA6IHVzZXJBZ2VudC5pbmRleE9mKCdtc2llIDEwLicpICE9IC0xLFxuICAgIGlzSUUxMTogdXNlckFnZW50LmluZGV4T2YoJ21vemlsbGEnKSAhPSAtMSAmJiB1c2VyQWdlbnQuaW5kZXhPZigndHJpZGVudC83LjAnKSAhPSAtMSxcbiAgICBpc0VkZ2VMZWdhY3k6IHVzZXJBZ2VudC5pbmRleE9mKCdlZGdlJykgIT0gLTEsXG4gICAgaXNFZGdlOiBSZWdFeHAoL2VkZyg/IWUpLykudGVzdCh1c2VyQWdlbnQpLFxuICAgIGlzSU9TOiB1c2VyQWdlbnQuaW5kZXhPZignaXBob25lJykgIT0gLTEgfHwgdXNlckFnZW50LmluZGV4T2YoJ2lwYWQnKSAhPSAtMSB8fCB1c2VyQWdlbnQuaW5kZXhPZignaXBvZCcpICE9IC0xLFxuICAgIGlzU2FmYXJpNTM0OiB1c2VyQWdlbnQuaW5kZXhPZignc2FmYXJpLzUzNCcpICE9IC0xLFxuICAgIGlzV2VDaGF0OiB1c2VyQWdlbnQuaW5kZXhPZignbWljcm9tZXNzZW5nZXInKSAhPSAtMSxcbiAgICBpb3NWZXJzaW9uOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignYXBwbGV3ZWJraXQnKSAhPSAtMSAmJiB1c2VyQWdlbnQuaW5kZXhPZigndmVyc2lvbi8nKSAhPSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHVzZXJBZ2VudC5zcGxpdCgndmVyc2lvbi8nKVsxXS5zcGxpdCgnICcpWzBdKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiAwO1xuICAgIH0pKCksXG4gICAgaXNBbmRyb2lkOiB1c2VyQWdlbnQuaW5kZXhPZignYW5kcm9pZCcpICE9IC0xLFxuICAgIGlzQW5kcm9pZEJyb3dzZXI6ICh1c2VyQWdlbnQgPT4ge1xuICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ21vemlsbGEvNS4wJykgPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignYW5kcm9pZCA0JykgPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICh1c2VyQWdlbnQuaW5kZXhPZignYXBwbGV3ZWJraXQnKSA9PT0gLTEpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ3dpbmRvd3MgcGhvbmUnKSAhPT0gLTEpIHJldHVybiBmYWxzZTtcblxuICAgICAgICAvLyBTcGVjaWFsIHVzZXIgYWdlbnRzIGZvdW5kIHNvIGZhciB0aGF0IHZpb2xhdGUgdGhlIGV4aXN0YW5jZSBvZiBjaHJvbWUgcnVsZVxuICAgICAgICAvLyBCdWcgMzgzNjcgQW5kcm9pZCBCcm93c2VyOiBNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNC4yLjI7IGVuLXVzOyBTQU1TVU5HIEdULUk5NTAwIEJ1aWxkL0pEUTM5KSBBcHBsZVdlYktpdC81MzUuMTkgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzEuMCBDaHJvbWUvMTguMC4xMDI1LjMwOCBNb2JpbGUgU2FmYXJpLzUzNS4xOVxuICAgICAgICAvLyBCdWcgNDAyMDkgQ2hyb21lIEJyb3dzZXI6IE1vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA0LjIuMjsgU0FNU1VORyBTR1QtSTc0NyBCdWlsZC9LT1Q0OUgpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuOTMgTW9iaWxlIFNhZmFyaS81MzcuMzZcbiAgICAgICAgLy8gV2luZG93cyBQaG9uZSBCcm93c2VyOiBNb3ppbGxhLzUuMCAoTW9iaWxlOyBXaW5kb3dzIFBob25lIDguMTsgQW5kcm9pZCA0LjA7IEFSTTsgVHJpZGVudC83LjA7IFRvdWNoOyBydjoxMS4wOyBJRU1vYmlsZS8xMS4wOyBOT0tJQTsgTHVtaWEgOTIwKSBsaWtlIGlQaG9uZSBPUyA3XzBfMyBNYWMgT1MgWCBBcHBsZVdlYktpdC81MzcgKEtIVE1MLCBsaWtlIEdlY2tvKSBNb2JpbGUgU2FmYXJpLzUzN1xuICAgICAgICAvLyBDaHJvbWUgQnJvd3NlcjogTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDQuMi4yOyBlbi1nYjsgU0FNU1VORyBHVC1JOTUwMCBCdWlsZC9LT1Q0OUgpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vMS41IENocm9tZS8yOC4wLjE1MDAuOTQgTW9iaWxlIFNhZmFyaS81MzcuMzZcblxuICAgICAgICB2YXIgY2hyb21lSW5mbyA9IC9jaHJvbWVcXC8oXFxkKykvLmV4ZWModXNlckFnZW50KTtcblxuICAgICAgICBpZiAoIWNocm9tZUluZm8pIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHZhciBjaHJvbWVWZXJzaW9uID0gcGFyc2VJbnQoY2hyb21lSW5mb1sxXSk7XG5cbiAgICAgICAgcmV0dXJuIGNocm9tZVZlcnNpb24gPCAyMDtcbiAgICB9KSh1c2VyQWdlbnQpLFxuICAgIGN1cnJlbnRCcm93c2VyOiAnJyxcbiAgICBhbmRyb2lkVmVyc2lvbjogKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ2FuZHJvaWQnKSAhPSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodXNlckFnZW50LnNsaWNlKHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgKyA4KSk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gMDtcbiAgICB9KSgpLFxuICAgIGlzQ2hyb21lOiB1c2VyQWdlbnQuaW5kZXhPZignY2hyb21lJykgIT0gLTEgJiYgdXNlckFnZW50LmluZGV4T2YoJ2VkZycpID09IC0xLCAvLyBlZGdlIGJyb3dzZXIgYWxzbyB1c2VzIENocm9tZSBpbiBpdHMgVUEgc3RyaW5nLlxuICAgIGlzR29vZ2xlQm90OiB1c2VyQWdlbnQuaW5kZXhPZignZ29vZ2xlYm90JykgIT0gLTEsXG4gICAgaXNGRjogdXNlckFnZW50LmluZGV4T2YoJ2ZpcmVmb3gnKSAhPSAtMSxcbiAgICBpc09wZXJhOiB1c2VyQWdlbnQuaW5kZXhPZignb3BlcmEnKSAhPSAtMSxcbiAgICBpc1NhZmFyaTpcbiAgICAgICAgbmF2aWdhdG9yLmFwcFZlcnNpb24gJiZcbiAgICAgICAgbmF2aWdhdG9yLmFwcFZlcnNpb24udG9Mb3dlckNhc2UoKS5pbmRleE9mKCdzYWZhcmknKSAhPSAtMSAmJlxuICAgICAgICBuYXZpZ2F0b3IuYXBwVmVyc2lvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2Nocm9tZScpID09IC0xICYmXG4gICAgICAgIHVzZXJBZ2VudC5pbmRleE9mKCdhbmRyb2lkJykgPT0gLTEsXG4gICAgaXNJT1NXZWJWaWV3OiAvKGlQaG9uZXxpUG9kfGlQYWQpLipBcHBsZVdlYktpdCg/IS4qU2FmYXJpKS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksXG4gICAgaXNJT1NDaHJvbWU6IHVzZXJBZ2VudC5pbmRleE9mKCdjcmlvcycpICE9IC0xLFxuICAgIGlzTUFDOiBuYXZpZ2F0b3IuYXBwVmVyc2lvbiAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ21hYycpICE9IC0xLFxuICAgIGlzV2luZG93c1Bob25lOiB1c2VyQWdlbnQuaW5kZXhPZignd2luZG93cyBwaG9uZScpICE9IC0xLFxuICAgIGlzRmFjZWJvb2tCcm93c2VyOiB1c2VyQWdlbnQuaW5kZXhPZignZmJhbicpICE9IC0xIHx8IHVzZXJBZ2VudC5pbmRleE9mKCdmYmF2JykgIT0gLTEsXG4gICAgc3VwcG9ydHNQb3N0TWVzc2FnZTogd2luZG93LnBvc3RNZXNzYWdlICE9IG51bGwgJiYgKHVzZXJBZ2VudC5pbmRleE9mKCdtc2llJykgPT0gLTEgfHwgdXNlckFnZW50LmluZGV4T2YoJ2llbW9iaWxlJykgIT0gLTEpLFxuICAgIHN1cHBvcnRzTG9jYWxTdG9yYWdlOiBmYWxzZSxcbiAgICBzdXBwb3J0c1Nlc3Npb25TdG9yYWdlOiBmYWxzZSxcbiAgICBzdXBwb3J0c0ZsYXNoOiAoKCkgPT4ge1xuICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzk5ODI0NS9ob3ctY2FuLWktZGV0ZWN0LWlmLWZsYXNoLWlzLWluc3RhbGxlZC1hbmQtaWYtbm90LWRpc3BsYXktYS1oaWRkZW4tZGl2LXRoYXQtaW5mXG4gICAgICAgIGxldCBzdXBwb3J0c0ZsYXNoID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1pbWVUeXBlcyAmJlxuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5taW1lVHlwZXNbJ2FwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoJ10gIT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1pbWVUeXBlc1snYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2gnXS5lbmFibGVkUGx1Z2luXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0c0ZsYXNoID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm8gPSBuZXcgQWN0aXZlWE9iamVjdCgnU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2gnKTtcbiAgICAgICAgICAgICAgICBpZiAoZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydHNGbGFzaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICByZXR1cm4gc3VwcG9ydHNGbGFzaDtcbiAgICB9KSgpLFxuICAgIHF1aXJrc01vZGU6IGRvY3VtZW50LmNvbXBhdE1vZGUgPT0gJ0JhY2tDb21wYXQnICYmIHVzZXJBZ2VudC5pbmRleE9mKCdtc2llJykgIT0gLTEsXG4gICAgYmFja0NvbXBhdDogZG9jdW1lbnQuY29tcGF0TW9kZSA9PSAnQmFja0NvbXBhdCcsXG4gICAgLy8gVE9ETzogQWRkIGlzVGFibGV0IGZ1bmN0aW9uIGZvciBkZXZpY2VzIG5vbi1Nb2JpbGVcbiAgICBpc01vYmlsZTogKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbW9iaWxlQ2xpZW50cyA9IFtcbiAgICAgICAgICAgICdpcGhvbmUnLFxuICAgICAgICAgICAgJ2lwb2QnLFxuICAgICAgICAgICAgJ2FuZHJvaWQnLFxuICAgICAgICAgICAgJ21pZHAnLFxuICAgICAgICAgICAgJzI0MHgzMjAnLFxuICAgICAgICAgICAgJ2JsYWNrYmVycnknLFxuICAgICAgICAgICAgJ25ldGZyb250JyxcbiAgICAgICAgICAgICdub2tpYScsXG4gICAgICAgICAgICAncGFuYXNvbmljJyxcbiAgICAgICAgICAgICdwb3J0YWxtbW0nLFxuICAgICAgICAgICAgJ3NoYXJwJyxcbiAgICAgICAgICAgICdzaWUtJyxcbiAgICAgICAgICAgICdzb255ZXJpY3Nzb24nLFxuICAgICAgICAgICAgJ3N5bWJpYW4nLFxuICAgICAgICAgICAgJ3dpbmRvd3MgY2UnLFxuICAgICAgICAgICAgJ2JlbnEnLFxuICAgICAgICAgICAgJ21kYScsXG4gICAgICAgICAgICAnbW90LScsXG4gICAgICAgICAgICAnb3BlcmEgbWluaScsXG4gICAgICAgICAgICAncGhpbGlwcycsXG4gICAgICAgICAgICAncG9ja2V0IHBjJyxcbiAgICAgICAgICAgICdzYWdlbScsXG4gICAgICAgICAgICAnc2Ftc3VuZycsXG4gICAgICAgICAgICAnaHRjJyxcbiAgICAgICAgXTtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBtb2JpbGVDbGllbnRzKSB7XG4gICAgICAgICAgICBpZiAodXNlckFnZW50LmluZGV4T2YobW9iaWxlQ2xpZW50c1tpXSkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkoKSxcbiAgICBpc01vYmlsZUFwcDogKCgpID0+IHtcbiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSlcbiAgICAgICAgICAgIC8vIGZvciBvbGQgSUVcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICB2YXIgbWV0YVRhZ3M6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKSBhcyBhbnk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhVGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKG1ldGFUYWdzW2ldLmdldEF0dHJpYnV0ZSgnbmFtZScpID09ICd2aWV3cG9ydCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGVudCA9IG1ldGFUYWdzW2ldLmdldEF0dHJpYnV0ZSgnY29udGVudCcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC5pbmRleE9mKCd3aWR0aD1kZXZpY2Utd2lkdGgnKSAhPT0gLTEpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pKCksXG4gICAgaXNOYXRpdmVNb2JpbGVBcHA6IGZhbHNlLCAvLyB3aWxsIGNoYW5nZSBpZiBtb2JpbGUgYWRhcHRlciB3aWxsIGxvYWQgW2luIGl0cyAnaW5pdCcgbWV0aG9kXS5cbiAgICBpc1RvdWNoOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpXG4gICAgICAgICAgICAvLyB3b3JrcyBvbiBtb3N0IGJyb3dzZXJzXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICBpZiAoJ29ubXNnZXN0dXJlY2hhbmdlJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICAgIC8vIHdvcmtzIG9uIGllMTBcbiAgICAgICAgICAgIC8vIFRyeSB0byBkZXRlcm1pbmUgaWYgSUUgaXMgb3BlbiBpbiBtZXRybyBtb2RlLiBNZXRybyBkb2Vzbid0IGFsbG93IGFjdGl2ZVgsIHRoYXQncyB0aGUgYmVzdCB0ZXN0IGF2YWlsYWJsZSBhcyBvZiBJRTExLlxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXcgQWN0aXZlWE9iamVjdCgnaHRtbGZpbGUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkoKSxcbiAgICBpc09uTGluZTogKCkgPT4gbmF2aWdhdG9yLm9uTGluZSxcbiAgICBtZXNzYWdpbmdNZXRob2Q6IDFcbn07XG5jb25zdCBpc1N0b3JhZ2VFbmFibGVkID0gKHN0b3JhZ2VOYW1lOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzdG9yYWdlID0gd2luZG93W3N0b3JhZ2VOYW1lXTtcbiAgICAgICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0ZXN0TmFtZSA9ICdfZ2lnX2xvY2FsU3RvcmFnZV90ZXN0JztcbiAgICAgICAgY29uc3QgdGVzdFZhbHVlID0gJ2p1c3QgY2hlY2tpbmcgZm9yIGxvY2FsU3RvcmFnZSc7XG4gICAgICAgIHN0b3JhZ2Uuc2V0SXRlbSh0ZXN0TmFtZSwgdGVzdFZhbHVlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gc3RvcmFnZS5nZXRJdGVtKHRlc3ROYW1lKSA9PT0gdGVzdFZhbHVlO1xuICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0odGVzdE5hbWUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIC8vIFJlYXNvbnM6XG4gICAgICAgIC8vIC0gSW5zaWRlIDNyZCBwYXJ0eSBBUEkgcHJveHkgaUZyYW1lLlxuICAgICAgICAvLyAtIFNhZmFyaSBpbiBpbmNvZ25pdG8gbW9kZSB3aWxsIGVycm9yIHdpdGggXCJxdW90YSBleGNlZWRlZFwiLlxuICAgICAgICAvLyAtIENocm9tZSB3aXRoIDNyZCBwYXJ0eSBjb29raWVzIGRpc2FibGVkIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWYgeW91IGFjY2VzcyB0aGUgd2luZG93LmxvY2FsU3RvcmFnZSBvYmplY3QgaW4gQU5ZIHdheS5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5sb2NhbEluZm8uc3VwcG9ydHNMb2NhbFN0b3JhZ2UgPSBpc1N0b3JhZ2VFbmFibGVkKCdsb2NhbFN0b3JhZ2UnKTtcbmxvY2FsSW5mby5zdXBwb3J0c1Nlc3Npb25TdG9yYWdlID0gaXNTdG9yYWdlRW5hYmxlZCgnc2Vzc2lvblN0b3JhZ2UnKTtcbmxvY2FsSW5mby5pc01BQyA9IGxvY2FsSW5mby5pc01BQyAmJiAhbG9jYWxJbmZvLmlzSU9TO1xudmFyIG9zID0gbG9jYWxJbmZvLmlzV2luXG4gICAgPyAnd2luZG93cydcbiAgICA6IGxvY2FsSW5mby5pc1dpbmRvd3NQaG9uZVxuICAgICAgICA/ICd3aW5waG9uZSdcbiAgICAgICAgOiBsb2NhbEluZm8uaXNJT1NcbiAgICAgICAgICAgID8gJ2lvcy12JyArIGxvY2FsSW5mby5pb3NWZXJzaW9uXG4gICAgICAgICAgICA6IGxvY2FsSW5mby5pc01BQ1xuICAgICAgICAgICAgICAgID8gJ21hYydcbiAgICAgICAgICAgICAgICA6IGxvY2FsSW5mby5pc0FuZHJvaWRcbiAgICAgICAgICAgICAgICAgICAgPyAnYW5kcm9pZCdcbiAgICAgICAgICAgICAgICAgICAgOiAnJztcbmlmIChvcykgb3MgKz0gJyAnO1xudmFyIGJyb3dzZXIgPSBsb2NhbEluZm8uaXNDaHJvbWVcbiAgICA/ICdjaHJvbWUnXG4gICAgOiBsb2NhbEluZm8uaXNGRlxuICAgICAgICA/ICdmaXJlZm94J1xuICAgICAgICA6IGxvY2FsSW5mby5pc1NhZmFyaVxuICAgICAgICAgICAgPyAnc2FmYXJpJ1xuICAgICAgICAgICAgOiBsb2NhbEluZm8uaXNFZGdlXG4gICAgICAgICAgICAgICAgPyAnZWRnZSdcbiAgICAgICAgICAgIDogbG9jYWxJbmZvLmlzRWRnZUxlZ2FjeVxuICAgICAgICAgICAgICAgID8gJ2VkZ2UgbGVnYWN5J1xuICAgICAgICAgICAgICAgIDogbG9jYWxJbmZvLmlzSUUxMVxuICAgICAgICAgICAgICAgICAgICA/ICdpZTExJ1xuICAgICAgICAgICAgICAgICAgICA6IGxvY2FsSW5mby5pc0lFMTBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2llMTAnXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGxvY2FsSW5mby5pc0lFOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2llOSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGxvY2FsSW5mby5pc0lFOFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdpZTgnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyc7XG5sb2NhbEluZm8uY3VycmVudEJyb3dzZXIgPSBvcyArIGJyb3dzZXI7XG5cbnR5cGUgQmF0dGVyeUluZm8gPSB7XG4gICAgY2hhcmdpbmc6IGJvb2xlYW47XG4gICAgY2hhcmdpbmdUaW1lOiBudW1iZXI7XG4gICAgZGlzY2hhcmdpbmdUaW1lOiBudW1iZXI7XG4gICAgbGV2ZWw6IG51bWJlcjtcbn07XG50eXBlIFBsdWdpbiA9IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZmlsZW5hbWU6IHN0cmluZztcbiAgICBsZW5ndGg6IG51bWJlcjtcbn07XG5leHBvcnQgY2xhc3MgQ2xpZW50RmVhdHVyZSB7XG4gICAgcHVibGljIHVzZXJBZ2VudD86IHN0cmluZztcbiAgICBwdWJsaWMgcGx1Z2lucz86IFBsdWdpbltdO1xuICAgIHB1YmxpYyBsb2NhbFRpbWU/OiBzdHJpbmc7XG4gICAgcHVibGljIHRpbWV6b25lT2Zmc2V0PzogbnVtYmVyO1xuICAgIHB1YmxpYyBwZXJtaXNzaW9uU3RhdHVzPzogeyBzdGF0ZTogc3RyaW5nIH07XG4gICAgcHVibGljIHdlYmRyaXZlcj86IGJvb2xlYW47XG4gICAgcHVibGljIGJhdHRlcnlJbmZvPzogQmF0dGVyeUluZm87XG4gICAgcHVibGljIGZlYXR1cmVzPzogW251bWJlciwgc3RyaW5nLCBib29sZWFuLCBib29sZWFuXTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbmF2aWdhdG9yOiBOYXZpZ2F0b3IgPSBnaWd5YS5fLldpbmRvd1Byb3ZpZGVyLm5hdmlnYXRvcigpLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgc2NyZWVuOiBTY3JlZW4gPSBnaWd5YS5fLldpbmRvd1Byb3ZpZGVyLnNjcmVlbigpKSB7XG4gICAgICAgIHRoaXMuY29sbGVjdERhdGEoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNvbGxlY3REYXRhKCkge1xuICAgICAgICB0aGlzLnVzZXJBZ2VudCA9IHRoaXMubmF2aWdhdG9yPy51c2VyQWdlbnQ7XG4gICAgICAgIHRoaXMucGx1Z2lucyA9IEFycmF5LmZyb20odGhpcy5uYXZpZ2F0b3I/LnBsdWdpbnMgfHwgW10pLm1hcCgoe25hbWUsIGZpbGVuYW1lLCBsZW5ndGh9KSA9PiAoeyBuYW1lLCBmaWxlbmFtZSwgbGVuZ3RoIH0pKTtcbiAgICAgICAgdGhpcy5sb2NhbFRpbWUgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpO1xuICAgICAgICB0aGlzLnRpbWV6b25lT2Zmc2V0ID0gbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICAgICAgICBjb25zdCBwZXJtaXNzaW9uU3RhdHVzID0gYXdhaXQgdGhpcy5uYXZpZ2F0b3I/LnBlcm1pc3Npb25zPy5xdWVyeSh7IG5hbWU6J25vdGlmaWNhdGlvbnMnIH0pO1xuICAgICAgICBpZiAocGVybWlzc2lvblN0YXR1cykge1xuICAgICAgICAgICAgY29uc3Qge3N0YXRlfSA9IHBlcm1pc3Npb25TdGF0dXM7XG4gICAgICAgICAgICB0aGlzLnBlcm1pc3Npb25TdGF0dXMgPSB7c3RhdGV9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2ViZHJpdmVyID0gdGhpcy5uYXZpZ2F0b3I/LndlYmRyaXZlcjtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBiYXR0ZXJ5SW5mbyA9IHRoaXMubmF2aWdhdG9yLmdldEJhdHRlcnkgJiYgYXdhaXQgdGhpcy5uYXZpZ2F0b3IuZ2V0QmF0dGVyeSgpO1xuICAgICAgICBpZiAoYmF0dGVyeUluZm8pIHtcbiAgICAgICAgICAgIGNvbnN0IHtjaGFyZ2luZywgY2hhcmdpbmdUaW1lLCBkaXNjaGFyZ2luZ1RpbWUsIGxldmVsfSA9IGJhdHRlcnlJbmZvO1xuICAgICAgICAgICAgdGhpcy5iYXR0ZXJ5SW5mbyA9IHtjaGFyZ2luZywgY2hhcmdpbmdUaW1lLCBkaXNjaGFyZ2luZ1RpbWUsIGxldmVsfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZlYXR1cmVzID0gW1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0b3I/Lm1heFRvdWNoUG9pbnRzIHx8IHRoaXMubmF2aWdhdG9yPy5tc01heFRvdWNoUG9pbnRzLFxuICAgICAgICAgICAgYCR7dGhpcy5zY3JlZW4ud2lkdGh9fCR7dGhpcy5zY3JlZW4uaGVpZ2h0fXwke3RoaXMuc2NyZWVuLmNvbG9yRGVwdGh9YCxcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdG9yLmphdmFFbmFibGVkKCksXG4gICAgICAgICAgICAnc2VuZEJlYWNvbicgaW4gdGhpcy5uYXZpZ2F0b3JcbiAgICAgICAgXTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRmxhZ1NlcnZpY2Uge1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGZvcmNlV2ViU2RrQm9vdHN0cmFwKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2ZvcmNlV2ViU2RrQm9vdHN0cmFwJyk7XG4gICAgfVxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHVzZUdpZ3lhSnNCYXNlRG9tYWluKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3VzZUdpZ3lhSnNCYXNlRG9tYWluJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgaGlkZVNTT0ZyYW1lKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2hpZGVTU09GcmFtZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHdjYWdDb250cmFzdEZpeCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd3Y2FnQ29udHJhc3RGaXgnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBuZXdGb3JtTGlua0luc3RhbmNlRWxlbWVudCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCduZXdGb3JtTGlua0luc3RhbmNlRWxlbWVudCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHN0b3BTZW5kaW5nUmVwb3J0cygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdzdG9wU2VuZGluZ1JlcG9ydHMnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBzZXRHcm91cEFwaURvbWFpbkFmdGVyTG9naW4oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnc2V0R3JvdXBBcGlEb21haW5BZnRlckxvZ2luJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdXNlSHR0cFN0YXR1c0NvZGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgndXNlSHR0cFN0YXR1c0NvZGUnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBhbHdheXNDaGVja0Nvb2tpZVNhdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnYWx3YXlzQ2hlY2tDb29raWVTYXZlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZml4UGhvbmVURkFUcmFuc2xhdGlvbnMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnZml4UGhvbmVURkFUcmFuc2xhdGlvbnMnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBsb2FkU3NvRnJhbWVPbmx5T25jZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdsb2FkU3NvRnJhbWVPbmx5T25jZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHZlcmlmeUxvZ2luT25seU9uY2UoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgndmVyaWZ5TG9naW5Pbmx5T25jZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHNlbmRMYW5nRm9yRW1haWxPVFAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnc2VuZExhbmdGb3JFbWFpbE9UUCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHNldFByb3ZpZGVyRnJvbVJlc3BvbnNlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3NldFByb3ZpZGVyRnJvbVJlc3BvbnNlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2V0Q29va2llU2FtZVNpdGVMYXhTZXNzaW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3NldENvb2tpZVNhbWVTaXRlTGF4U2Vzc2lvbicpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHNldENvb2tpZVNhbWVTaXRlTGF4U29jaWFsKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3NldENvb2tpZVNhbWVTaXRlTGF4U29jaWFsJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2V0Q29va2llU2FtZVNpdGVMYXhMb3dQcmlvcml0eSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdzZXRDb29raWVTYW1lU2l0ZUxheExvd1ByaW9yaXR5Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgZm9yY2VFcnJvclJlcG9ydCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdmb3JjZUVycm9yUmVwb3J0Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2tpcFNhbWVTY3JlZW5DaGVja09uU3dpdGNoKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3NraXBTYW1lU2NyZWVuQ2hlY2tPblN3aXRjaCcpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGdldE9ubHlWaXNpYmxlRmllbGQgKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2dldE9ubHlWaXNpYmxlRmllbGQnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCB1cGRhdGVBY2NvdW50SW5mb0FzeW5jICgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd1cGRhdGVBY2NvdW50SW5mb0FzeW5jJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2FuaXRpemVFdmFsdWF0ZWRWYWx1ZSAoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5nZXQoJ3Nhbml0aXplRXZhbHVhdGVkVmFsdWUnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCB1c2VTZXNzaW9uVmVyaWZ5ICgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd1c2VTZXNzaW9uVmVyaWZ5Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdXNlRXh0ZW5kZWRQaG9uZU51bWJlclJlZ2V4ICgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCd1c2VFeHRlbmRlZFBob25lTnVtYmVyUmVnZXgnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBnZW5lcmF0ZU5ld0NvZGVXY2FnQ29tcGxpYW5jZSAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnZ2VuZXJhdGVOZXdDb2RlV2NhZ0NvbXBsaWFuY2UnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBlbmZvcmNlQXV0aEZsb3dSZWRpcmVjdEZvclNvY2lhbCAoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnZW5mb3JjZUF1dGhGbG93UmVkaXJlY3RGb3JTb2NpYWwnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCB1c2VEZWNvZGVVUklDb21wb25lbnQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgndXNlRGVjb2RlVVJJQ29tcG9uZW50Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgdXNlT2lkY0dldFBhcmFtSGFzaE9sZFN0eWxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3VzZU9pZGNHZXRQYXJhbUhhc2hPbGRTdHlsZScpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IHVzZVZpZXdwb3J0UG9sbGVyQWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ3VzZVZpZXdwb3J0UG9sbGVyQWN0aW9uJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgaWdub3JlSW50ZXJydXB0aW9uc0luT2lkY1Bhc3NpdmVMb2dpbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdpZ25vcmVJbnRlcnJ1cHRpb25zSW5PaWRjUGFzc2l2ZUxvZ2luJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXQgb3ZlcnJpZGVBbGxDaGlsZENvbnRleHQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCgnb3ZlcnJpZGVBbGxDaGlsZENvbnRleHQnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldCBkaXNwYXRjaExvZ2luRXZlbnRXaGVuSGFuZGxlckFkZGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2Rpc3BhdGNoTG9naW5FdmVudFdoZW5IYW5kbGVyQWRkZWQnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldChuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIChnaWd5YS5fLmNvbmZpZz8uZmxhZ3MgJiYgZ2lneWEuXy5jb25maWc/LmZsYWdzW25hbWVdKSB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBFdmVyeSBmbGFnIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIGRhdGEgbW9kaWZpY2F0aW9uIHJlbGF0ZWQgdG8gdGhlIGFwaSBsYXllclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGFwaUZsYWdzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Z2V0LCBzZXR9IGZyb20gJy4uL1V0aWxzL3Nlc3Npb25DYWNoZSc7XG5pbXBvcnQge2dldE11cm11ckhhc2h9IGZyb20gXCIuLi9VdGlscy9vYmplY3RcIjtcblxuaW50ZXJmYWNlIElTZXNzaW9uU2VydmljZSB7XG4gICAgaXNTZXNzaW9uVmVyaWZpZWQoZ2x0OiBzdHJpbmcpOiBib29sZWFuO1xuICAgIHNldElzU2Vzc2lvblZlcmlmaWVkKGdsdDogc3RyaW5nLCB2ZXJpZnk6IGJvb2xlYW4pO1xufVxuXG5jbGFzcyBTZXNzaW9uU2VydmljZSBpbXBsZW1lbnRzIElTZXNzaW9uU2VydmljZSB7XG4gICAgcHVibGljIGlzU2Vzc2lvblZlcmlmaWVkKGdsdDogc3RyaW5nLCBhcGlLZXk6IHN0cmluZyA9IGdpZ3lhLnRoaXNTY3JpcHQuQVBJS2V5KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY3JlYXRlS2V5KGdsdCwgYXBpS2V5KTtcbiAgICAgICAgcmV0dXJuIGdldChrZXkpID09PSAndHJ1ZSc7XG4gICAgfVxuXG4gICAgcHVibGljIHNldElzU2Vzc2lvblZlcmlmaWVkKGdsdDogc3RyaW5nLCB2ZXJpZmllZDogYm9vbGVhbiwgYXBpS2V5OiBzdHJpbmcgPSBnaWd5YS50aGlzU2NyaXB0LkFQSUtleSkge1xuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNyZWF0ZUtleShnbHQsIGFwaUtleSk7XG4gICAgICAgIHNldChrZXksIGAke3ZlcmlmaWVkfWApO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlS2V5KGdsdCwgYXBpS2V5KXtcbiAgICAgICAgbGV0IGtleSA9IGdldE11cm11ckhhc2goYCR7Z2x0fV8ke2FwaUtleX1gLCAxNSkudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIGJ0b2Eoa2V5KTtcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBzZXNzaW9uRGF0YSA9IG5ldyBTZXNzaW9uU2VydmljZSgpO1xuIiwiaW1wb3J0IHsgZ2V0T2JqZWN0LCBzZXRPYmplY3QgfSBmcm9tIFwiLi4vVXRpbHMvbG9jYWxTdG9yYWdlXCI7XG5pbXBvcnQgeyByZW1vdmVVbmRlZmluZWQgfSBmcm9tICcuLi9VdGlscy9vYmplY3QnO1xuaW1wb3J0ICogYXMgX21lcmdlIGZyb20gJ2xvZGFzaC5tZXJnZSc7XG5cbmludGVyZmFjZSBJU2l0ZURhdGFTZXJ2aWNlIHtcbiAgZ2V0UHJlZmVycmVkTG9naW5NZXRob2QoaWRlbnRpZmllcjogc3RyaW5nKTogc3RyaW5nIHwgJydcbiAgc2V0UHJlZmVycmVkTG9naW5NZXRob2QobWV0aG9kOiBzdHJpbmcsIGlkZW50aWZpZXI6IHN0cmluZyk6IHZvaWRcbiAgZGlkRm9yY2VkQm9vdHN0cmFwOiBzdHJpbmc7XG4gIGdldFNjcmVlblZhcmlhbnQoc2NyZWVuU2V0SWQ6IHN0cmluZywgc2NyZWVuSWQ6IHN0cmluZywgdGVzdElkOiBzdHJpbmcsKTogc3RyaW5nO1xuICBzZXRTY3JlZW5WYXJpYW50KHNjcmVlblNldElkOiBzdHJpbmcsIHNjcmVlbklkOiBzdHJpbmcsIHRlc3RJZDogc3RyaW5nLCB2YXJpYW50SWQ6IHN0cmluZyk6IHZvaWQ7XG59XG5cblxuXG5leHBvcnQgaW50ZXJmYWNlIElVc2VyUHJlZmVycmVkTG9naW5NZXRob2Qge1xuICBpZGVudGlmaWVyOiBzdHJpbmc7XG4gIHByZWZlcnJlZExvZ2luTWV0aG9kOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVVzZXJQcmVmZXJlbmNlcyB7XG4gIGF1dGhlbnRpY2F0aW9uPzoge1xuICAgIHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzOiBJVXNlclByZWZlcnJlZExvZ2luTWV0aG9kW10gfCB1bmRlZmluZWRcbiAgICB0ZmFQcmVmZXJyZWRNZXRob2Q6IGFueVxuICB9LFxuICBzY3JlZW5TZXRQcm9wZXJ0aWVzPzoge1xuICAgIFtzY3JlZW5TZXRJZDogc3RyaW5nXToge1xuICAgICAgc2NyZWVuczoge1xuICAgICAgICBbc2NyZWVuSWQ6IHN0cmluZ106IHtcbiAgICAgICAgICBbdGVzdElkOiBzdHJpbmddOiBzdHJpbmdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBNQVhfTElNSVRfT0ZfVVNFUlNfUFJFRkVSUkVEX0xPR0lOX01FVEhPRFNfUEVSX1NJVEUgPSAxMDtcblxuaW50ZXJmYWNlIElHaWdEYXRhIHtcbiAgZGlkRm9yY2VkQm9vdHN0cmFwPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgU2l0ZURhdGFTZXJ2aWNlIGltcGxlbWVudHMgSVNpdGVEYXRhU2VydmljZSB7XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0IFNJVEVfUFJFRkVSRU5DRVNfS0VZKCkge1xuICAgIHJldHVybiBgJHtnaWd5YS5hcGlLZXl9X3ByZWZlcmVuY2VzYDtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIGdldCBTSVRFX0dJR19LRVkoKSB7XG4gICAgcmV0dXJuIGAke2dpZ3lhLmFwaUtleX1fZ2lnYFxuICB9XG5cbiAgcHVibGljIGdldCBkaWRGb3JjZWRCb290c3RyYXAoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5nZXREYXRhQnlLZXk8SUdpZ0RhdGE+KFNpdGVEYXRhU2VydmljZS5TSVRFX0dJR19LRVkpLmRpZEZvcmNlZEJvb3RzdHJhcCB8fCBudWxsO1xuICB9XG5cbiAgcHVibGljIHNldCBkaWRGb3JjZWRCb290c3RyYXAoZGlkRm9yY2VkQm9vdHN0cmFwOiBzdHJpbmcpIHtcbiAgICB0aGlzLnNldERhdGFCeUtleTxJR2lnRGF0YT4oU2l0ZURhdGFTZXJ2aWNlLlNJVEVfR0lHX0tFWSwgeyBkaWRGb3JjZWRCb290c3RyYXAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJlZmVycmVkTG9naW5NZXRob2QoaWRlbnRpZmllcjogc3RyaW5nKTogc3RyaW5nIHwgJycge1xuXG4gICAgaWYgKCFpZGVudGlmaWVyKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlclByZWZlcmVuY2VzID0gdGhpcy5nZXREYXRhQnlLZXk8SVVzZXJQcmVmZXJlbmNlcz4oU2l0ZURhdGFTZXJ2aWNlLlNJVEVfUFJFRkVSRU5DRVNfS0VZKTtcblxuICAgIGNvbnN0IHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzID0gdXNlclByZWZlcmVuY2VzPy5hdXRoZW50aWNhdGlvbj8udXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHMgPz8gW11cblxuICAgIHJldHVybiB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcy5maW5kKHVzZXIgPT4gdXNlci5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKT8ucHJlZmVycmVkTG9naW5NZXRob2QgPz8gJydcblxuICB9XG5cbiAgcHVibGljIHNldFByZWZlcnJlZExvZ2luTWV0aG9kKGF1dGhNZXRob2Q6IHN0cmluZywgaWRlbnRpZmllcjogc3RyaW5nKTogdm9pZCB7XG5cbiAgICBpZiAoIWlkZW50aWZpZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyUHJlZmVyZW5jZXMgPSB0aGlzLmdldERhdGFCeUtleTxJVXNlclByZWZlcmVuY2VzPihTaXRlRGF0YVNlcnZpY2UuU0lURV9QUkVGRVJFTkNFU19LRVkpO1xuXG4gICAgbGV0IHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzID0gWy4uLnVzZXJQcmVmZXJlbmNlcz8uYXV0aGVudGljYXRpb24/LnVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzID8/IFtdXVxuXG4gICAgbGV0IHRmYVByZWZlcnJlZE1ldGhvZCA9IHVzZXJQcmVmZXJlbmNlcz8uYXV0aGVudGljYXRpb24/LnRmYVByZWZlcnJlZE1ldGhvZCA/PyAnJztcblxuICAgIGNvbnN0IGlzVXNlckV4aXN0cyA9IHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLnNvbWUodXNlciA9PiB1c2VyLmlkZW50aWZpZXIgPT09IGlkZW50aWZpZXIpXG5cbiAgICBpZiAodGhpcy5pc01heExpbWl0VXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHNSZWFjaGVkKHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzKSAmJiAhaXNVc2VyRXhpc3RzKSB7XG4gICAgICB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcyA9IHRoaXMucmVtb3ZlT2xkZXN0VXNlclByZWZlcnJlZExvZ2luTWV0aG9kKHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzKVxuICAgIH1cblxuICAgIGlmICghaXNVc2VyRXhpc3RzKSB7XG4gICAgICB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcyA9IHRoaXMuYWRkVXNlclByZWZlcnJlZExvZ2luTWV0aG9kKHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLCB7IGlkZW50aWZpZXIsIHByZWZlcnJlZExvZ2luTWV0aG9kOiBhdXRoTWV0aG9kIH0pO1xuICAgIH1cblxuICAgIGlmIChpc1VzZXJFeGlzdHMpIHtcbiAgICAgIHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzID0gdGhpcy5yZWZyZXNoRXhpc3RpbmdVc2VyUHJlZmVycmVkTG9naW5NZXRob2QoeyBhdXRoTWV0aG9kLCBpZGVudGlmaWVyLCB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcyB9KVxuICAgIH1cblxuICAgIHRoaXMuc2V0RGF0YUJ5S2V5PElVc2VyUHJlZmVyZW5jZXM+KFxuICAgICAgU2l0ZURhdGFTZXJ2aWNlLlNJVEVfUFJFRkVSRU5DRVNfS0VZLFxuICAgICAgeyBhdXRoZW50aWNhdGlvbjogeyB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcywgdGZhUHJlZmVycmVkTWV0aG9kIH19XG4gICAgKTtcblxuICB9XG5cbiAgcHVibGljIHNldFNjcmVlblZhcmlhbnQoc2NyZWVuU2V0SWQ6IHN0cmluZywgc2NyZWVuSWQ6IHN0cmluZywgdGVzdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5zZXREYXRhQnlLZXk8SVVzZXJQcmVmZXJlbmNlcz4oXG4gICAgICBTaXRlRGF0YVNlcnZpY2UuU0lURV9QUkVGRVJFTkNFU19LRVksXG4gICAgICB7XG4gICAgICAgIFtzY3JlZW5TZXRJZF06IHtcbiAgICAgICAgICBzY3JlZW5zOiB7XG4gICAgICAgICAgICBbc2NyZWVuSWRdOiB7IFt0ZXN0SWRdOiB7IHZhcmlhbnQ6IHZhcmlhbnRJZCB9IH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGdldFNjcmVlblZhcmlhbnQoc2NyZWVuU2V0SWQ6IHN0cmluZywgc2NyZWVuSWQ6IHN0cmluZywgdGVzdElkOiBzdHJpbmcsKTogc3RyaW5nIHtcbiAgICBjb25zdCBwcmVmZXJlbmNlcyA9IHRoaXMuZ2V0RGF0YUJ5S2V5PElVc2VyUHJlZmVyZW5jZXM+KFNpdGVEYXRhU2VydmljZS5TSVRFX1BSRUZFUkVOQ0VTX0tFWSk7XG4gICAgcmV0dXJuIHByZWZlcmVuY2VzPy5bc2NyZWVuU2V0SWRdPy5zY3JlZW5zPy5bc2NyZWVuSWRdPy5bdGVzdElkXT8udmFyaWFudDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGF0YUJ5S2V5PFQ+KGtleTogc3RyaW5nKTogVCB7XG4gICAgcmV0dXJuIGdldE9iamVjdChrZXksIHt9KSBhcyBUO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXREYXRhQnlLZXk8VD4oa2V5OiBzdHJpbmcsIG5ld0RhdGE/OiBUKSB7XG4gICAgY29uc3Qgb2xkRGF0YSA9IHRoaXMuZ2V0RGF0YUJ5S2V5PFQ+KGtleSk7XG4gICAgdHJ5IHtcbiAgICAgIHNldE9iamVjdChrZXksIHJlbW92ZVVuZGVmaW5lZChfbWVyZ2Uob2xkRGF0YSwgbmV3RGF0YSkpKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBnaWd5YS5sb2dnZXIucmVwb3J0KCdGYWlsZWQgdG8gc2F2ZSBsb2NhbCBzaXRlIGRhdGEnLCB7IGVycm9yLCBrZXkgfSk7XG5cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJlZnJlc2hFeGlzdGluZ1VzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZCh7IHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLCBpZGVudGlmaWVyLCBhdXRoTWV0aG9kIH06IHsgdXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHM6IElVc2VyUHJlZmVycmVkTG9naW5NZXRob2RbXSwgaWRlbnRpZmllcjogc3RyaW5nLCBhdXRoTWV0aG9kOiBzdHJpbmcgfSk6IElVc2VyUHJlZmVycmVkTG9naW5NZXRob2RbXSB7XG4gICAgY29uc3QgcmVtYWluaW5nTWV0aG9kcyA9IHRoaXMucmVtb3ZlVXNlclByZWZlcnJlZExvZ2luTWV0aG9kKHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLCBpZGVudGlmaWVyKTtcblxuICAgIHJldHVybiB0aGlzLmFkZFVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZChyZW1haW5pbmdNZXRob2RzLCB7IGlkZW50aWZpZXIsIHByZWZlcnJlZExvZ2luTWV0aG9kOiBhdXRoTWV0aG9kIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVVc2VyUHJlZmVycmVkTG9naW5NZXRob2QodXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHM6IElVc2VyUHJlZmVycmVkTG9naW5NZXRob2RbXSwgaWRlbnRpZmllcjogc3RyaW5nKTogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdIHtcbiAgICByZXR1cm4gdXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHMuZmlsdGVyKHVzZXJMb2dpbk1ldGhvZCA9PiB1c2VyTG9naW5NZXRob2QuaWRlbnRpZmllciAhPT0gaWRlbnRpZmllcilcbiAgfVxuXG4gIHByaXZhdGUgaXNNYXhMaW1pdFVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzUmVhY2hlZCh1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kczogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLmxlbmd0aCA9PT0gTUFYX0xJTUlUX09GX1VTRVJTX1BSRUZFUlJFRF9MT0dJTl9NRVRIT0RTX1BFUl9TSVRFXG4gIH1cblxuICBwcml2YXRlIHJlbW92ZU9sZGVzdFVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZCh1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kczogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdKTogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdIHtcbiAgICBjb25zdCBvbGRlc3RNZXRob2QgPSB1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kc1swXTtcblxuICAgIHJldHVybiB0aGlzLnJlbW92ZVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZCh1c2Vyc1ByZWZlcnJlZExvZ2luTWV0aG9kcywgb2xkZXN0TWV0aG9kPy5pZGVudGlmaWVyKVxuICB9XG5cbiAgcHJpdmF0ZSBhZGRVc2VyUHJlZmVycmVkTG9naW5NZXRob2QodXNlcnNQcmVmZXJyZWRMb2dpbk1ldGhvZHM6IElVc2VyUHJlZmVycmVkTG9naW5NZXRob2RbXSwgdXNlclByZWZlcnJlZExvZ2luOiBJVXNlclByZWZlcnJlZExvZ2luTWV0aG9kKTogSVVzZXJQcmVmZXJyZWRMb2dpbk1ldGhvZFtdIHtcbiAgICByZXR1cm4gWy4uLnVzZXJzUHJlZmVycmVkTG9naW5NZXRob2RzLCB1c2VyUHJlZmVycmVkTG9naW5dXG4gIH1cbn1cblxuXG5leHBvcnQgY29uc3Qgc2l0ZURhdGE6IElTaXRlRGF0YVNlcnZpY2UgPSBuZXcgU2l0ZURhdGFTZXJ2aWNlKCk7XG5cbiIsImltcG9ydCB7IGxvY2FsSW5mbyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9Mb2NhbEluZm8nO1xuaW1wb3J0ICogYXMgdmlld3BvcnRVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvdmlld3BvcnQnO1xuaW1wb3J0ICogYXMgZnVuY3Rpb25zVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2Z1bmN0aW9ucyc7XG5cbmV4cG9ydCB2YXIgX3BvcHVwQ29udGFpbmVycyA9IFtdO1xuZXhwb3J0IHZhciBfcHNldWRvQ29udGFpbmVycyA9IFtdO1xubGV0IF9uZXh0WkluZGV4ID0gOTk5OTk5OTk5O1xudmFyIGJhY2tMaXN0ZW5lciA9IG51bGw7XG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV4dFpJbmRleCgpIHtcbiAgICBfbmV4dFpJbmRleCsrO1xuICAgIHJldHVybiBfbmV4dFpJbmRleDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRHaWd5YVNjcmlwdEVsZW1lbnQoZmlsZU5hbWVzOiBzdHJpbmdbXSk6IEhUTUxTY3JpcHRFbGVtZW50IHtcbiAgICB2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICB2YXIgc2NyaXB0RWxlbWVudDogSFRNTFNjcmlwdEVsZW1lbnQ7XG4gICAgdmFyIGdpZ3lhQ2RuUmVnZXggPSAvXFwvXFwvY2RuKHMpP1xcLihydTFcXC4pP2dpZ3lhLmNvbS87XG4gICAgZm9yICh2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIHNjcmlwdCA9IHNjcmlwdHNbaV07XG4gICAgICAgIHZhciBzcmMgPSBzY3JpcHQuc3JjLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChzcmMgIT09ICcnKSB7XG4gICAgICAgICAgICBpZiAoZ2lneWFDZG5SZWdleC50ZXN0KHNyYykgfHwgc3JjLmluZGV4T2YoJz9hcGlrZXk9JykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHZhciBpc0ZpbGVOYW1lRXhpc3RJblNyYyA9IGZpbGVOYW1lcy5sZW5ndGggPT09IDAgfHwgZmlsZU5hbWVzLnNvbWUoZmlsZU5hbWUgPT4gc3JjLmluZGV4T2YoZmlsZU5hbWUpID4gLTEpO1xuICAgICAgICAgICAgICAgIGlmIChpc0ZpbGVOYW1lRXhpc3RJblNyYykge1xuICAgICAgICAgICAgICAgICAgICBzY3JpcHRFbGVtZW50ID0gc2NyaXB0O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNjcmlwdEVsZW1lbnQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2goZWw6IEhUTUxFbGVtZW50LCBldmVudE5hbWU6IHN0cmluZykge1xuICAgIHZhciBldmVudDtcblxuICAgIHRyeSB7XG4gICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50KGV2ZW50TmFtZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJRTEwIGFuZCBiZWxvdyBzdXBwb3J0XG4gICAgICAgIGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgICAgIGV2ZW50LmluaXRDdXN0b21FdmVudChldmVudE5hbWUsIHRydWUsIHRydWUsIHt9KTtcbiAgICB9XG5cbiAgICBlbC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGRCdXR0b25TdWJtaXRMaXN0ZW5lcihlbDogSFRNTEVsZW1lbnQsIGhhbmRsZXI6IEZ1bmN0aW9uLCBldmVudDogJ2NsaWNrJyB8ICd0b3VjaGVuZCcgPSAnY2xpY2snLCBkZWJ1Z05hbWU/OiBzdHJpbmcpIHtcbiAgICAvLyBKdXN0IGluIGNhc2UgdGhlIGVsZW1lbnQgZG9lcyBub3QgZXhpc3QuXG4gICAgaWYgKCFlbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWwuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xuICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykgIT0gJy0xJykge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgJzAnKTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnQsIChlOiBNb3VzZUV2ZW50KSA9PiBoYW5kbGVyKGUpKTtcbiAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAna2V5ZG93bicsIChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgIGlmICgoZS53aGljaCB8fCBlLmtleUNvZGUpID09IDEzKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBoYW5kbGVyKGUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIoZWw6IGFueSwgZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgaWYgKCFlbCB8fCAhaGFuZGxlcikgcmV0dXJuO1xuXG4gICAgaWYgKGVsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEFjdGl2YXRpb25IYW5kbGVyKGVsOkhUTUxFbGVtZW50LCBoYW5kbGVyOkZ1bmN0aW9uKTogdm9pZHtcbiAgICBpZiAoIWVsIHx8ICFoYW5kbGVyKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGVsLCAna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09ICdTcGFjZScgfHwgZXZlbnQuY29kZSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NsaWNrJywgaGFuZGxlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKGVsOiBhbnksIGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIGlmICghZWwgfHwgIWhhbmRsZXIpIHJldHVybjtcbiAgICBpZiAoZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWwuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVEZWZhdWx0RXZlbnRIYW5kbGluZyhldmVudCkge1xuICAgIGlmIChldmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gZWxzZSBpZiAod2luZG93LmV2ZW50KSB7XG4gICAgICAgIHdpbmRvdy5ldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhZGREaWFsb2dCYWNrTGlzdGVuZXIoaGFuZGxlcjogKGU6IEV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgX3JlbW92ZURpYWxvZ0JhY2tMaXN0ZW5lcigpO1xuXG4gICAgLy8gVGhpcyBzaG91bGQgZmlyZSB3aGVuIGJhY2sgaXMgY2xpY2tlZFxuICAgIGJhY2tMaXN0ZW5lciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUgJiYgZS5uZXdVUkwgJiYgZS5uZXdVUkwuaW5kZXhPZignfGdpZ3lhTW9iaWxlRGlhbG9nJykgPT0gLTEpIHtcbiAgICAgICAgICAgIGhhbmRsZXIoZSk7XG4gICAgICAgICAgICBfcmVtb3ZlRGlhbG9nQmFja0xpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gaGFzaCBjb3VsZCBjaGFuZ2UgcmlnaHQgYWZ0ZXIgdGhlIGNhbGwgaWYgaXQgd2FzIGluaXRpYXRlZCBmcm9tIGEgbGluayB0aGF0IGRpZG4ndCByZXR1cm4gZmFsc2VcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoLmluZGV4T2YoJ3xnaWd5YU1vYmlsZURpYWxvZycpID09IC0xKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoICsgJ3xnaWd5YU1vYmlsZURpYWxvZyc7XG4gICAgICAgIH1cbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csICdoYXNoY2hhbmdlJywgYmFja0xpc3RlbmVyKTtcbiAgICB9LCA1MCk7XG59XG5leHBvcnQgZnVuY3Rpb24gX3JlbW92ZURpYWxvZ0JhY2tMaXN0ZW5lcigpIHtcbiAgICBpZiAoIWJhY2tMaXN0ZW5lcikgcmV0dXJuO1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIod2luZG93LCAnaGFzaGNoYW5nZScsIGJhY2tMaXN0ZW5lcik7XG4gICAgYmFja0xpc3RlbmVyID0gbnVsbDtcbiAgICAvL3Jlc3RvcmUgcHJldmlvdXMgaGFzaFxuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gd2luZG93LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgnfGdpZ3lhTW9iaWxlRGlhbG9nJywgJycpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHByZXBlbmRUb0JvZHkoZWw6IEhUTUxFbGVtZW50LCBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCk6IHZvaWQge1xuICAgIGlmICghZG9jdW1lbnQuYm9keSkgcmV0dXJuO1xuICAgIGlmIChkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZSAmJiBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoZWwsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kVG9Cb2R5KGVsOiBIVE1MRWxlbWVudCwgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIWRvY3VtZW50LmJvZHkpIHJldHVybjtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFbGVtZW50KGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGlmIChlbCAmJiBlbC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGVsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWwpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0NoaWxkT2YoY2hpbGQ6IE5vZGUsIHBhcmVudDogTm9kZSkge1xuICAgIHZhciBkaXJlY3RQYXJlbnQgPSBjaGlsZC5wYXJlbnROb2RlO1xuXG4gICAgd2hpbGUgKGRpcmVjdFBhcmVudCkge1xuICAgICAgICBpZiAocGFyZW50ID09IGRpcmVjdFBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBkaXJlY3RQYXJlbnQgPSBkaXJlY3RQYXJlbnQucGFyZW50Tm9kZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNWaXNpYmxlKGVsOiBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xuICAgIHdoaWxlIChlbCkge1xuICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWwpO1xuICAgICAgICBpZiAoY29tcHV0ZWRTdHlsZS5kaXNwbGF5ID09PSAnbm9uZScgfHwgY29tcHV0ZWRTdHlsZS52aXNpYmlsaXR5ID09PSAnaGlkZGVuJykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlcmVkRGl2SUQobmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuICdnaWdfJyArIGxvY2FsSW5mby5pbml0VGltZS5nZXRUaW1lKCkudG9TdHJpbmcoKSArICdfJyArIG5hbWU7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGVzKGRvbUVsZW1OYW1lOiBzdHJpbmcsIGRvbUVsZW1BdHRycz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgbmV3RG9tRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZG9tRWxlbU5hbWUpO1xuXG4gICAgaWYgKGRvbUVsZW1BdHRycykge1xuICAgICAgICBmb3IgKGxldCBlbGVtQXR0ciBpbiBkb21FbGVtQXR0cnMpIHtcbiAgICAgICAgICAgIG5ld0RvbUVsZW1bZWxlbUF0dHJdID0gZG9tRWxlbUF0dHJzW2VsZW1BdHRyXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXdEb21FbGVtO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRvcExldmVsRGl2KGlkPzogc3RyaW5nKTogSFRNTERpdkVsZW1lbnQge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgaWYgKGVsLnN0eWxlLnpJbmRleCAhPSBudWxsKSB7XG4gICAgICAgIGVsLnN0eWxlLnpJbmRleCA9ICcnICsgZ2V0TmV4dFpJbmRleCgpO1xuICAgIH1cblxuICAgIGVsLmlubmVySFRNTCA9ICcnO1xuICAgIGlmIChpZCkge1xuICAgICAgICBlbC5pZCA9IGlkO1xuICAgIH1cblxuICAgIGlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZSAmJiBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGVsLCBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoaWRlQnlJRChpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGlmIChlbCkge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG93QnlJRChpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIGlmIChlbCkge1xuICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gbG9jYWxJbmZvLmlzSUU2ID8gKGVsLnRhZ05hbWUgPT0gJ1REJyA/ICd0YWJsZS1jZWxsJyA6IGVsLnRhZ05hbWUgPT0gJ1RSJyA/ICcnIDogZWwudGFnTmFtZSA9PSAnVEFCTEUnID8gJycgOiAnYmxvY2snKSA6ICcnO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckJ5SUQoaWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAoYyAhPSBudWxsKSB7XG4gICAgICAgICAgICBjLmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRIVE1MU2l6ZShodG1sOiBzdHJpbmcsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB7IHc6IG51bWJlcjsgaDogbnVtYmVyIH0ge1xuICAgIHZhciBkaXZNZWFzdXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGl2TWVhc3VyZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgZGl2TWVhc3VyZS5zdHlsZS5sZWZ0ID0gJy0xMDAwcHgnO1xuICAgIGRpdk1lYXN1cmUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2TWVhc3VyZSk7XG4gICAgdmFyIHcgPSBkaXZNZWFzdXJlLm9mZnNldFdpZHRoO1xuICAgIHZhciBoID0gZGl2TWVhc3VyZS5vZmZzZXRIZWlnaHQ7XG4gICAgZGl2TWVhc3VyZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGRpdk1lYXN1cmUpO1xuICAgIHJldHVybiB7IHc6IHcsIGg6IGggfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50c0J5Q2xhc3MocGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nLCBpbmNsdWRlUGFyZW50PzogYm9vbGVhbik6IEhUTUxFbGVtZW50W10ge1xuICAgIGlmICghcGFyZW50RWxlbWVudCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIHZhciBhckVscyA9IFtdO1xuXG4gICAgaWYgKGluY2x1ZGVQYXJlbnQgJiYgaXNFbGVtZW50Q2xhc3MocGFyZW50RWxlbWVudCwgY2xhc3NOYW1lKSkge1xuICAgICAgICBhckVscy5wdXNoKHBhcmVudEVsZW1lbnQpO1xuICAgIH1cblxuICAgIHZhciBlbHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+ID0gcGFyZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpIGFzIGFueTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXNFbGVtZW50Q2xhc3MoZWxzW2ldLCBjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICBhckVscy5wdXNoKGVsc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyRWxzIHx8IFtdO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRzQnlBdHRyaWJ1dGUocGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsIHRhZ05hbWU6IHN0cmluZywgYXR0cmlidXRlTmFtZTogc3RyaW5nLCBhdHRyaWJ1dGVWYWx1ZTogc3RyaW5nKTogSFRNTEVsZW1lbnRbXSB7XG4gICAgdmFyIGFyRWxzID0gW107XG4gICAgdmFyIGVsczogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD4gPSBwYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpIGFzIGFueTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZWxzW2ldLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSA9PSBhdHRyaWJ1dGVWYWx1ZSkge1xuICAgICAgICAgICAgYXJFbHMucHVzaChlbHNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhckVscztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50UG9zaXRpb24oZWw6IEhUTUxFbGVtZW50KTogeyBsZWZ0OiBudW1iZXI7IHRvcDogbnVtYmVyOyByaWdodDogbnVtYmVyOyBib3R0b206IG51bWJlciB9IHtcbiAgICBpZiAoIWVsKSB7XG4gICAgICAgIHJldHVybiB7IGxlZnQ6IDAsIHRvcDogMCwgYm90dG9tOiAwLCByaWdodDogMCB9O1xuICAgIH1cblxuICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHNjcm9sbCA9IHZpZXdwb3J0VXRpbHMuZ2V0U2Nyb2xsKCk7XG4gICAgdmFyIGxlZnQgPSByZWN0LmxlZnQgKyBzY3JvbGwubGVmdDtcbiAgICB2YXIgdG9wID0gcmVjdC50b3AgKyBzY3JvbGwudG9wO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgIHJpZ2h0OiBsZWZ0ICsgcmVjdC53aWR0aCxcbiAgICAgICAgYm90dG9tOiB0b3AgKyByZWN0LmhlaWdodCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZENsYXNzVG9FbGVtZW50KGVsOiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIWVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZXhpc3RpbmdDbGFzc2VzID0gZWwuY2xhc3NOYW1lID8gZ2V0Q2xhc3NOYW1lcyhlbCkgOiBbXTtcbiAgICB2YXIgZXhpc3RpbmdPcmlnaW5hbExlbmd0aCA9IGV4aXN0aW5nQ2xhc3Nlcy5sZW5ndGg7XG4gICAgdmFyIG5ld0NsYXNzZXMgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcblxuICAgIGZvciAodmFyIGogaW4gbmV3Q2xhc3Nlcykge1xuICAgICAgICB2YXIgZXhpc3RzID0gZmFsc2U7XG4gICAgICAgIGlmICghbmV3Q2xhc3Nlc1tqXSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gZXhpc3RpbmdDbGFzc2VzKSB7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdDbGFzc2VzW2ldID09PSBuZXdDbGFzc2VzW2pdKSB7XG4gICAgICAgICAgICAgICAgZXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICBleGlzdGluZ0NsYXNzZXMucHVzaChuZXdDbGFzc2VzW2pdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChleGlzdGluZ0NsYXNzZXMubGVuZ3RoICE9PSBleGlzdGluZ09yaWdpbmFsTGVuZ3RoKSB7XG4gICAgICAgIGVsLmNsYXNzTmFtZSA9IGV4aXN0aW5nQ2xhc3Nlcy5qb2luKCcgJyk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNsYXNzRnJvbUVsZW1lbnQoZWw6IEhUTUxFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZywgc3Vic3RyaW5nOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAoIWVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGFyQ2xhc3MgPSBnZXRDbGFzc05hbWVzKGVsKTtcbiAgICBmb3IgKHZhciBpID0gYXJDbGFzcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAoYXJDbGFzc1tpXSA9PT0gY2xhc3NOYW1lIHx8IChzdWJzdHJpbmcgJiYgYXJDbGFzc1tpXS5pbmRleE9mKGNsYXNzTmFtZSkgIT09IC0xKSkge1xuICAgICAgICAgICAgYXJDbGFzcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWwuY2xhc3NOYW1lID0gYXJDbGFzcy5qb2luKCcgJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xhc3NOYW1lcyhlbDogSFRNTEVsZW1lbnQpOiBBcnJheTxzdHJpbmc+IHtcbiAgICB2YXIgY2xhc3NlczogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICAgIGlmICh0eXBlb2YgZWwuY2xhc3NOYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICBjbGFzc2VzID0gZWwuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XG4gICAgfVxuICAgIHJldHVybiBjbGFzc2VzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzRWxlbWVudENsYXNzKGVsOiBIVE1MRWxlbWVudCwgY2xhc3NOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWVsKSByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSBpZiAoIWNsYXNzTmFtZSkgcmV0dXJuIHRydWU7XG4gICAgZWxzZSBpZiAoIWVsLmNsYXNzTmFtZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgdmFyIGV4aXN0cyA9IGZhbHNlO1xuICAgIHZhciBhckNsYXNzID0gZ2V0Q2xhc3NOYW1lcyhlbCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhckNsYXNzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhckNsYXNzW2ldID09PSBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGV4aXN0cyA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXhpc3RzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNhbmNlbEV2ZW50KGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICBpZiAoIWV2ZW50KSByZXR1cm47XG4gICAgaWYgKCdjYW5jZWxhYmxlJyBpbiBldmVudClcbiAgICAgICAgLy8gQWxsIGJyb3dzZXJzIGV4Y2VwdCA8SUU5XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZWxzZSBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodHlwZTogc3RyaW5nLCBuYW1lOiBzdHJpbmcpIHtcbiAgICB2YXIgZGl2Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbmFtZSA9IG5hbWUgfHwgJyc7XG4gICAgZGl2Q29udGFpbmVyLmlubmVySFRNTCA9ICc8JyArIHR5cGUgKyAnIG5hbWU9XCInICsgbmFtZSArICdcIiBpZD1cIicgKyBuYW1lICsgJ1wiPjwvJyArIHR5cGUgKyAnPic7XG4gICAgcmV0dXJuIGRpdkNvbnRhaW5lci5maXJzdENoaWxkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldFNpemUoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdzogYW55LCBoOiBhbnksIGNlbnRlcj86IGJvb2xlYW4pIHtcbiAgICBpZiAoY29udGFpbmVyID09IG51bGwgfHwgY29udGFpbmVyLnN0eWxlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh3KSB7XG4gICAgICAgIHcgPSAnJyArIHc7XG4gICAgICAgIHZhciBpc1dpZHRoUHJlY2VudGFnZSA9IHcuaW5kZXhPZignJScpID4gMDtcblxuICAgICAgICBpZiAoIWlzTmFOKHcpIHx8IGlzV2lkdGhQcmVjZW50YWdlKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGhWYWx1ZTogc3RyaW5nID0gJycgKyAoaXNXaWR0aFByZWNlbnRhZ2UgPyB3IDogdyArICdweCcpO1xuXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLnN0eWxlLndpZHRoICE9IHdpZHRoVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSB3aWR0aFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGgpIHtcbiAgICAgICAgaCA9ICcnICsgaDtcbiAgICAgICAgdmFyIGlzSGVpZ2h0UHJlY2VudGFnZSA9IGguaW5kZXhPZignJScpID4gMDtcblxuICAgICAgICBpZiAoIWlzTmFOKHcpIHx8IGlzSGVpZ2h0UHJlY2VudGFnZSkge1xuICAgICAgICAgICAgdmFyIGhlaWdodFZhbHVlOiBzdHJpbmcgPSAnJyArIChpc0hlaWdodFByZWNlbnRhZ2UgPyBoIDogaCArICdweCcpO1xuXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLnN0eWxlLmhlaWdodCAhPT0gaGVpZ2h0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2VudGVyICYmIHcgJiYgaCkge1xuICAgICAgICBpZiAoY29udGFpbmVyLnN0eWxlLnpJbmRleCA9PSBudWxsIHx8IGNlbnRlcikge1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcnICsgZ2V0TmV4dFpJbmRleCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHZwID0gdmlld3BvcnRVdGlscy5nZXRJbm5lclNpemUoKTtcbiAgICAgICAgdmFyIHNjcmwgPSB2aWV3cG9ydFV0aWxzLmdldFNjcm9sbCgpO1xuXG4gICAgICAgIHZhciB2cHQgPSBzY3JsLnRvcDtcbiAgICAgICAgdmFyIHZwbCA9IHNjcmwubGVmdDtcblxuICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gJycgKyBNYXRoLm1heCgwLCB2cHQgKyBNYXRoLmZsb29yKCh2cC5oIC0gaCkgLyAyKSkgKyAncHgnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUubGVmdCA9ICcnICsgTWF0aC5tYXgoMCwgdnBsICsgTWF0aC5mbG9vcigodnAudyAtIHcpIC8gMikpICsgJ3B4JztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnJztcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGlkZGVuSWZyYW1lKHNyYzogc3RyaW5nKTogSFRNTElGcmFtZUVsZW1lbnQge1xuICAgIHZhciBpZnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnIuc3JjID0gc3JjO1xuICAgIGlmci5zdHlsZS53aWR0aCA9ICczMHB4JztcbiAgICBpZnIuc3R5bGUuaGVpZ2h0ID0gJzEwcHgnO1xuICAgIGlmci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgaWZyLnN0eWxlLnRvcCA9ICctMTAwMHB4JztcbiAgICBpZnIuc3R5bGUubGVmdCA9ICctMTAwMHB4JztcblxuICAgIGlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIGFwcGVuZFRvQm9keShpZnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bmN0aW9uc1V0aWxzLmludm9rZU9uUGFnZUxvYWQoKCkgPT4ge1xuICAgICAgICAgICAgYXBwZW5kVG9Cb2R5KGlmcik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBpZnI7XG59XG5leHBvcnQgZnVuY3Rpb24gYXR0cmlidXRlRW5jb2RlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpXG4gICAgICAgIC5yZXBsYWNlKC9cXFwiL2csICcmcXVvdDsnKVxuICAgICAgICAucmVwbGFjZSgvXFwnL2csICcmIzM5OycpOyAvLyBJRTggZG9lc24ndCBzdXBwb3J0ICZhcG9zO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1hbmlwdWxhdGVBdHRyaWJ1dGVzKFxuICAgIGVsZW1lbnRzOiBFbGVtZW50W10sXG4gICAgbWF0Y2hlcjogUmVnRXhwLFxuICAgIHJlcGxhY2VQcmVkaWNhdGU6IChtYXRjaDogc3RyaW5nKSA9PiB2b2lkLFxuICAgIGNyaXRlcmlhOiAoYXR0cj86IEF0dHIpID0+IGJvb2xlYW4gPSAoKSA9PiB0cnVlLFxuKTogdm9pZCB7XG4gICAgZWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgIGlmICghZWwuYXR0cmlidXRlcykgcmV0dXJuO1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlbC5hdHRyaWJ1dGVzKS5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICAgICAgaWYgKGNyaXRlcmlhKGF0dHIpKSB7XG4gICAgICAgICAgICAgICAgYXR0ci52YWx1ZSA9IGF0dHIudmFsdWUucmVwbGFjZShtYXRjaGVyLCByZXBsYWNlUHJlZGljYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdGV4dE5vZGVzVW5kZXIoZWw6IEhUTUxFbGVtZW50KSB7XG4gICAgbGV0IG47XG4gICAgY29uc3QgdGV4dE5vZGVzOiBUZXh0W10gPSBbXTtcbiAgICBjb25zdCB0cmVlV2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihlbCwgTm9kZUZpbHRlci5TSE9XX1RFWFQsIG51bGwsIGZhbHNlKTtcbiAgICB3aGlsZSAoKG4gPSB0cmVlV2Fsa2VyLm5leHROb2RlKCkgYXMgVGV4dCkpIHtcbiAgICAgICAgdGV4dE5vZGVzLnB1c2gobik7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0Tm9kZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNIVE1MQm9vbGVhbkF0dHJpYnV0ZShhdHRyTmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFsnYXV0b2NvbXBsZXRlJywgJ2F1dG9mb2N1cycsICdjaGVja2VkJywgJ2Rpc2FibGVkJywgJ2hpZGRlbicsICdyZWFkb25seScsICdyZXF1aXJlZCcsICdzZWxlY3RlZCddLmluZGV4T2YoYXR0ck5hbWUpID4gLTE7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCZWxvbmdUb0dpZ3lhRmllbGRzZXQoZWw6IEVsZW1lbnQpOiBib29sZWFuIHtcblxuICAgIGlmICghZWwgfHwgZWwgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBlbmQgb2YgcmVjdXJzaW9uIC0gZWxlbWVudCBpcyBub3QgYSBjaGlsZCBvZiBhIGZpZWxkc2V0XG4gICAgfVxuXG4gICAgaWYgKGlzRWxlbWVudENsYXNzKGVsLnBhcmVudEVsZW1lbnQsICdnaWd5YS1maWVsZHNldCcpKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzQmVsb25nVG9HaWd5YUZpZWxkc2V0KGVsLnBhcmVudEVsZW1lbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldENsb3Nlc3RFbGVtZW50KGVsZW0sIHNlbGVjdG9yLCBwYXJlbnQgPSBkb2N1bWVudCkge1xuICAgIHNldE1hdGNoZXNQb2x5ZmlsbCgpO1xuXG4gICAgLy8gR2V0IHRoZSBjbG9zZXN0IG1hdGNoaW5nIGVsZW1lbnRcbiAgICBmb3IgKCA7IGVsZW0gJiYgZWxlbSAhPT0gcGFyZW50OyBlbGVtID0gZWxlbS5wYXJlbnROb2RlICkge1xuICAgICAgICBpZiAoZWxlbT8ubWF0Y2hlcyhzZWxlY3RvcikpIHJldHVybiBlbGVtO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRGcm9tVGVtcGxhdGUodGVtcGxhdGU6IHN0cmluZyA9ICcnKTogQ2hpbGROb2RlIHtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXYuaW5uZXJIVE1MID0gdGVtcGxhdGU/LnRyaW0oKTtcbiAgICByZXR1cm4gZGl2LmZpcnN0Q2hpbGQgPz8gZGl2O1xufVxuZnVuY3Rpb24gc2V0TWF0Y2hlc1BvbHlmaWxsKCkge1xuICAgIGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1BhcmVudEhhc0NsYXNzKG5hdGl2ZUVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjbGFzc05hbWUgOnN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmIChuYXRpdmVFbGVtZW50Py5jbGFzc0xpc3Q/LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghbmF0aXZlRWxlbWVudD8ucGFyZW50RWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBpc1BhcmVudEhhc0NsYXNzKG5hdGl2ZUVsZW1lbnQ/LnBhcmVudEVsZW1lbnQsIGNsYXNzTmFtZSk7XG59XG4iLCJpbXBvcnQgKiBhcyBvYmplY3RVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvb2JqZWN0JztcbmltcG9ydCAqIGFzIERPTVV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9ET00nO1xuaW1wb3J0IHsgVXJpIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL1VyaSc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWRpcmVjdCh1cmw6IHN0cmluZywgYXJQYXJhbXM6IGFueVtdLCBtZXRob2Q/OiBzdHJpbmcsIHRhcmdldD86IHN0cmluZywgd29ya0RvY3VtZW50ID0gd2luZG93LmRvY3VtZW50KSB7XG4gICAgaWYgKG1ldGhvZCAmJiBtZXRob2QudG9Mb3dlckNhc2UoKSA9PSAncG9zdCcpIHtcbiAgICAgICAgdmFyIGZvcm0gPSB3b3JrRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgICB2YXIgYXJGaWVsZHNIVE1MID0gW107XG4gICAgICAgIGZvcm0uc2V0QXR0cmlidXRlKCdhY2NlcHQtY2hhcnNldCcsICdVVEYtOCcpO1xuICAgICAgICBmb3JtLnNldEF0dHJpYnV0ZSgnbWV0aG9kJywgJ1BPU1QnKTtcbiAgICAgICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ2FjdGlvbicsIHVybCk7XG4gICAgICAgIGlmICh0YXJnZXQpIGZvcm0uc2V0QXR0cmlidXRlKCd0YXJnZXQnLCB0YXJnZXQpO1xuICAgICAgICB2YXIgcGFyYW1zID0gb2JqZWN0VXRpbHMubWVyZ2UoYXJQYXJhbXMpO1xuICAgICAgICBmb3IgKHZhciBwIGluIHBhcmFtcykge1xuICAgICAgICAgICAgaWYgKCh0eXBlb2YgcGFyYW1zW3BdID09ICdudW1iZXInIHx8IHR5cGVvZiBwYXJhbXNbcF0gPT0gJ2Jvb2xlYW4nIHx8IHR5cGVvZiBwYXJhbXNbcF0gPT0gJ3N0cmluZycpICYmIHAgIT0gJ2V2ZW50TmFtZScpIHtcbiAgICAgICAgICAgICAgICBhckZpZWxkc0hUTUwucHVzaCgnPHRleHRhcmVhIG5hbWU9XCInICsgZW5jb2RlVVJJQ29tcG9uZW50KHApICsgJ1wiPicgKyBwYXJhbXNbcF0udG9TdHJpbmcoKS5yZXBsYWNlKC9cXCYvZywgJyZhbXA7JykgKyAnPC90ZXh0YXJlYT4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3JtLmlubmVySFRNTCA9IGFyRmllbGRzSFRNTC5qb2luKCcnKTtcbiAgICAgICAgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBET01VdGlscy5hcHBlbmRUb0JvZHkoZm9ybSwgd29ya0RvY3VtZW50KTtcbiAgICAgICAgZm9ybS5zdWJtaXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1cmkgPSBuZXcgVXJpKHVybCk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJQYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwYXJhbXMgPSBhclBhcmFtc1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBwYXJhbXNbbmFtZV07XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5W25hbWVdID0gdmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cmkuYWRkVG9TZWFyY2gocXVlcnkpO1xuICAgICAgICB3b3JrRG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IHVyaS50b1N0cmluZygpO1xuICAgIH1cbn1cbiIsIlxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZShvYmo6IGFueSwgaW5jbHVkZUZ1bmN0aW9ucyA9IGZhbHNlLCBwcmV0dHlQcmludCA9IGZhbHNlLCBsID0gMCwgbWF4TGV2ZWwgPSAyMCk6IHN0cmluZyB7XG4gICAgaWYgKCFnaWd5YS5sb2NhbEluZm8uaXNJRTgpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvd1snSlNPTiddLnN0cmluZ2lmeShvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghbCkgbCA9IDA7XG5cbiAgICAgICAgaWYgKGwgPiBtYXhMZXZlbCkgcmV0dXJuICdbVG9vIGRlZXBdJztcblxuICAgICAgICB2YXIgcHJlZml4ID0gJyc7XG4gICAgICAgIHZhciBuZXdsaW5lID0gJyc7XG4gICAgICAgIHZhciB0YWIgPSAnJztcbiAgICAgICAgaWYgKHByZXR0eVByaW50KSB7XG4gICAgICAgICAgICB0YWIgPSAnXFx0JztcbiAgICAgICAgICAgIG5ld2xpbmUgPSAnXFxuJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbCArIDE7IGkrKykge1xuICAgICAgICAgICAgICAgIHByZWZpeCArPSB0YWI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHQgPSB0eXBlb2Ygb2JqO1xuICAgICAgICBpZiAodCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ICE9ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gc2ltcGxlIGRhdGEgdHlwZVxuXG4gICAgICAgICAgICBpZiAodCA9PSAnc3RyaW5nJykgb2JqID0gJ1wiJyArIG9iai5yZXBsYWNlKC8oXFxcInxcXFxcKS9nLCAnXFxcXCQxJykucmVwbGFjZSgvXFxyXFxufFxccnxcXG4vZywgJ1xcXFxuJykgKyAnXCInO1xuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhvYmopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIG4sXG4gICAgICAgICAgICAgICAgdixcbiAgICAgICAgICAgICAgICBqc29uID0gW10sXG4gICAgICAgICAgICAgICAgYXJyID0gb2JqICYmIG9iai5jb25zdHJ1Y3RvciA9PSBBcnJheTtcbiAgICAgICAgICAgIGlmIChhcnIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2ID0gb2JqW2ldO1xuICAgICAgICAgICAgICAgICAgICB0ID0gdHlwZW9mIHY7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID09IG51bGwgfHwgdCA9PSAndW5kZWZpbmVkJykgdiA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09ICdzdHJpbmcnKSB2ID0gJ1wiJyArIHYucmVwbGFjZSgvKFxcXCJ8XFxcXCkvZywgJ1xcXFwkMScpLnJlcGxhY2UoL1xcclxcbnxcXHJ8XFxuL2csICdcXFxcbicpICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZUZ1bmN0aW9ucykgdiA9ICdGdW5jdGlvbic7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHYgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2LnBhcmVudE5vZGUgJiYgdi5pbm5lckhUTUwpIHYgPSAnSFRNTEVsZW1lbnQnO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2LmNvbnN0cnVjdG9yID09IERhdGUpIHYgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PSAnb2JqZWN0JyAmJiB2ICE9PSBudWxsKSB2ID0gc2VyaWFsaXplKHYsIGluY2x1ZGVGdW5jdGlvbnMsIHByZXR0eVByaW50LCBsICsgMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKFN0cmluZyh2KSAhPSAnJykganNvbi5wdXNoKHByZWZpeCArIHRhYiArIFN0cmluZyh2KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKG4gaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHYgPSBvYmpbbl07XG4gICAgICAgICAgICAgICAgICAgIHQgPSB0eXBlb2YgdjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPT0gbnVsbCB8fCB0ID09ICd1bmRlZmluZWQnKSB2ID0gU3RyaW5nKHYpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09ICdzdHJpbmcnKSB2ID0gJ1wiJyArIHYucmVwbGFjZSgvKFxcXCJ8XFxcXCkvZywgJ1xcXFwkMScpLnJlcGxhY2UoL1xcclxcbnxcXHJ8XFxuL2csICdcXFxcbicpICsgJ1wiJztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodCA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZUZ1bmN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAnRnVuY3Rpb24nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodi5wYXJlbnROb2RlICYmIHYuaW5uZXJIVE1MKSB2ID0gJ0hUTUxFbGVtZW50JztcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodi5jb25zdHJ1Y3RvciA9PSBEYXRlKSB2ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHQgPT0gJ29iamVjdCcgJiYgdiAhPT0gbnVsbCkgdiA9IG5ld2xpbmUgKyBzZXJpYWxpemUodiwgaW5jbHVkZUZ1bmN0aW9ucywgcHJldHR5UHJpbnQsIGwgKyAxKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoU3RyaW5nKHYpICE9ICcnKSBqc29uLnB1c2gocHJlZml4ICsgdGFiICsgJ1wiJyArIG4ucmVwbGFjZSgvKFxcXCJ8XFxcXCkvZywgJ1xcXFwkMScpLnJlcGxhY2UoL1xcclxcbnxcXHJ8XFxuL2csICdcXFxcbicpICsgJ1wiOicgKyBTdHJpbmcodikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdsaW5lICsgcHJlZml4ICsgKGFyciA/ICdbJyA6ICd7JykgKyBuZXdsaW5lICsganNvbi5qb2luKCcsJyArIG5ld2xpbmUpICsgbmV3bGluZSArIHByZWZpeCArIChhcnIgPyAnXScgOiAnfScpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplPFQ+KGpzb246IHN0cmluZywgZGVmYXVsdFZhbHVlPzogVCwgc2NvcGU/OiBhbnkpOiBUIHtcbiAgICAvLyBSZXR1cm4gZGVmYXVsdCB2YWx1ZSBpZiBpcyBlbXB0eSBzdHJpbmcgKG9yIHNpbWlsYXIpLlxuICAgIGlmICghanNvbiB8fCAhanNvbi5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSB8fCAoe30gYXMgVCk7XG4gICAgfVxuXG4gICAgLy8gQXR0ZW1wdCB0byBwYXJzZS4gT24gZXJyb3IsIHdhcm4gaW4gY29uc29sZSBhbmQgcmV0dXJuIGRlZmF1bHQgdmFsdWUuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgICAgaWYgKHNjb3BlKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY29wZSkge1xuICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHNjb3BlW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm46IEZ1bmN0aW9uID0gZXZhbChgKGZ1bmN0aW9uKCR7a2V5cy5qb2luKCcsJyl9KSB7IHJldHVybiAke2pzb24udHJpbSgpfTsgfSlgKTtcbiAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHVuZGVmaW5lZCwgdmFsdWVzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZGVzZXJpYWxpemluZyBKYXZhU2NyaXB0JywgZSk7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgKHt9IGFzIFQpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZTxUPihqc29uOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZT86IFQpOiBUIHtcbiAgICBpZiAoZ2lneWEubG9jYWxJbmZvLmlzSUU4KSB7XG4gICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZTxUPihqc29uLCBkZWZhdWx0VmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93WydKU09OJ10ucGFyc2UoanNvbik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgKHt9IGFzIFQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgR0lHWUFfUEFSQU1fUFJFRklYIH0gZnJvbSAnLi8uLi8uLi8uLi8uLi9hY2NvdW50cy9jb25zdGFudHMnO1xuaW1wb3J0ICogYXMga2V5VmFsdWVVdGlscyBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMva2V5VmFsdWUnO1xuaW1wb3J0ICogYXMgb2JqZWN0VXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL29iamVjdCc7XG5cbnR5cGUgSUdldEdpZ1BhcmFtc0Zyb21VcmxDb25maWcgPSBnaWd5YS51dGlscy5VUkwuSUdldEdpZ1BhcmFtc0Zyb21VcmxDb25maWc7XG50eXBlIElHZXRDb250ZXh0UGFyYW1zRnJvbVVybENvbmZpZyA9IGdpZ3lhLnV0aWxzLlVSTC5JR2V0Q29udGV4dFBhcmFtc0Zyb21VcmxDb25maWdcblxuZXhwb3J0IGZ1bmN0aW9uIFVSTEVuY29kZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBVUkxEZWNvZGUodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gVVJMRGVjb2RlUmVjdXJzaXZlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCBwcmV2RGVjb2RpbmdSZXMgPSAnJztcbiAgICBsZXQgY3VyckRlY29kaW5nUmVzID0gdmFsdWU7XG5cbiAgICAvLyBrZWVwIGRlY29kaW5nIHVudGlsIHdlIGNhbid0IGRlY29kZSBhbnltb3JlXG4gICAgd2hpbGUgKGN1cnJEZWNvZGluZ1JlcyAhPSBwcmV2RGVjb2RpbmdSZXMpIHtcbiAgICAgICAgLy8gc3RvcmUgdGhlIGxhc3QgZGVjb2RpbmcgcmVzdWx0XG4gICAgICAgIHByZXZEZWNvZGluZ1JlcyA9IGN1cnJEZWNvZGluZ1JlcztcblxuICAgICAgICAvLyBkZWNvZGUgdGhlIHN0cmluZyBvbmNlIGFnYWluXG4gICAgICAgIGN1cnJEZWNvZGluZ1JlcyA9IFVSTERlY29kZShwcmV2RGVjb2RpbmdSZXMpO1xuICAgIH1cblxuICAgIHJldHVybiBjdXJyRGVjb2RpbmdSZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJhbXNGcm9tVVJMKHVybDogc3RyaW5nLCBrZXlzVG9Mb3dlcj86IGJvb2xlYW4pOiBPYmplY3Qge1xuICAgIGlmICghdXJsIHx8IHVybC5pbmRleE9mKCc/JykgPT09IC0xKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgcmV0dXJuIGtleVZhbHVlVXRpbHMuZGVzZXJpYWxpemUodXJsLnNwbGl0KCcjJylbMF0uc3BsaXQoJz8nKVsxXSwgJyYnLCBrZXlzVG9Mb3dlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHaWdQYXJhbXNGcm9tVVJMKGNvbmZpZzogSUdldEdpZ1BhcmFtc0Zyb21VcmxDb25maWcpIHtcblxuICAgIGNvbnN0IHsgdXJsLCBwYXJhbVByZWZpeCwga2V5c1RvTG93ZXIsIHJlbW92ZVByZWZpeCB9ID0gY29uZmlnIHx8IHt9XG5cbiAgICBjb25zdCBwcmVmaXggPSBwYXJhbVByZWZpeCB8fCBHSUdZQV9QQVJBTV9QUkVGSVg7XG4gICAgY29uc3QgdXJsUGFyYW1zID0gZ2V0UGFyYW1zRnJvbVVSTCh1cmwsIGtleXNUb0xvd2VyKTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModXJsUGFyYW1zKVxuICAgICAgICAuZmlsdGVyKGtleSA9PiBrZXkuaW5kZXhPZihwcmVmaXgpID09PSAwICYmIGtleSAhPT0gcHJlZml4KVxuICAgICAgICAucmVkdWNlPGFueT4oKG9iaiwga2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdLZXkgPSByZW1vdmVQcmVmaXggPyBrZXkuc2xpY2UoNCkgOiBrZXk7XG4gICAgICAgICAgICBvYmpbbmV3S2V5XSA9IHVybFBhcmFtc1trZXldO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfSwge30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyYW1WYWx1ZUZyb21VUkwocGFyYW06IHN0cmluZywgdXJsOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAobnVsbCA9PSB1cmwgfHwgJycgPT0gdXJsKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgfVxuXG4gICAgY29uc3QgaXFtID0gdXJsLmluZGV4T2YoJz8nKTtcbiAgICBpZiAoaXFtID09PSAtMSkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgIH1cblxuICAgIGNvbnN0IHFzID0gJyYnICsgdXJsLnN1YnN0cihpcW0gKyAxKTtcblxuICAgIGxldCBpZHggPSBxcy50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJyYnICsgcGFyYW0udG9Mb3dlckNhc2UoKSArICc9Jyk7XG4gICAgaWYgKGlkeCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9XG5cbiAgICBjb25zdCB2YWxBbmRNb3JlID0gcXMuc3Vic3RyKGlkeCArICgxICsgcGFyYW0ubGVuZ3RoICsgMSkpICsgJyYnO1xuICAgIGlkeCA9IHZhbEFuZE1vcmUuaW5kZXhPZignJicpO1xuXG4gICAgcmV0dXJuIHZhbEFuZE1vcmUuc3Vic3RyKDAsIGlkeCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkUGFyYW1zVG9VUkwodXJsOiBzdHJpbmcsIG9QYXJhbXM6IE9iamVjdCk6IHN0cmluZyB7XG4gICAgY29uc3QgcGFyYW1zID0gZ2V0UGFyYW1zRnJvbVVSTCh1cmwpO1xuICAgIG9iamVjdFV0aWxzLmFkZChwYXJhbXMsIG9QYXJhbXMpO1xuICAgIGNvbnN0IHVybEhhc2hTcGxpdCA9IHVybC5zcGxpdCgnIycpO1xuICAgIGxldCBmaW5hbFVybCA9IHVybEhhc2hTcGxpdFswXS5zcGxpdCgnPycpWzBdICsgJz8nICsga2V5VmFsdWVVdGlscy5zZXJpYWxpemUocGFyYW1zLCAnJicpO1xuICAgIGlmICh1cmxIYXNoU3BsaXQubGVuZ3RoID4gMSkge1xuICAgICAgICBmaW5hbFVybCArPSAnIycgKyB1cmxIYXNoU3BsaXRbMV07XG4gICAgfVxuICAgIHJldHVybiBmaW5hbFVybDtcbn1cblxuXG5jb25zdCByZW1vdmVVbmFjY2VwdGFibGVQYXJhbXMgPSA8VD4ocGFyYW1zOiBULCB1bmFjY2VwdGFibGVQYXJhbXM6IFJlZ0V4cCk6IFBhcnRpYWw8VD4gPT4ge1xuXG4gICAgaWYgKCF1bmFjY2VwdGFibGVQYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG5cbiAgICBjb25zdCB2YWxpZFBhcmFtczogUGFydGlhbDxUPiA9IHt9O1xuXG4gICAgT2JqZWN0LmVudHJpZXMocGFyYW1zIHx8IHt9KVxuICAgICAgICAuZmlsdGVyKChbcGFyYW1OYW1lXSkgPT4gIXVuYWNjZXB0YWJsZVBhcmFtcy50ZXN0KHBhcmFtTmFtZSkpXG4gICAgICAgIC5mb3JFYWNoKChbcGFyYW1OYW1lLCBwYXJhbVZhbHVlXTogW3N0cmluZywgc3RyaW5nXSkgPT4gdmFsaWRQYXJhbXNbcGFyYW1OYW1lXSA9IHBhcmFtVmFsdWUpXG5cbiAgICByZXR1cm4gdmFsaWRQYXJhbXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0UGFyYW1zRnJvbVVybDxUID0geyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfT4oY29uZmlnOiBJR2V0Q29udGV4dFBhcmFtc0Zyb21VcmxDb25maWcpOiBQYXJ0aWFsPFQ+IHtcblxuICAgIGNvbnN0IHsgdXJsLCBwYXJhbVByZWZpeCwgdW5hY2NlcHRhYmxlUGFyYW1zIH0gPSBjb25maWcgfHwge31cblxuICAgIGlmKCF1cmwpIHtcbiAgICAgIHJldHVybiB7fVxuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtcyA9IGdpZ3lhLnV0aWxzLlVSTC5nZXRHaWdQYXJhbXNGcm9tVVJMKHsgdXJsLCBwYXJhbVByZWZpeCB9KSBhcyBUO1xuXG4gICAgcmV0dXJuIHJlbW92ZVVuYWNjZXB0YWJsZVBhcmFtcyhwYXJhbXMsIHVuYWNjZXB0YWJsZVBhcmFtcyk7XG59XG4iLCJpbXBvcnQgKiBhcyBzdHJpbmdVdGlsc1V0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9zdHJpbmdVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBVcmkge1xuICAgIHByaXZhdGUgX2FuY2hvcjogSFRNTEFuY2hvckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaXNBYnNvbHV0ZSA9IHRydWUpIHtcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA9PSAnaHR0cDonID8gJ2h0dHAnIDogJ2h0dHBzJztcbiAgICAgICAgaWYgKGlzQWJzb2x1dGUgJiYgdXJsLmluZGV4T2YoJzovLycpID09PSAtMSAmJiB1cmwuY2hhckF0KDApICE9PSAnLycpIHVybCA9IGAke3Byb3RvY29sfTovLyR7dXJsfWA7XG4gICAgICAgIHRoaXMuX2FuY2hvci5ocmVmID0gdXJsO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgZG9tYWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yLmhvc3RuYW1lO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvci5wYXRobmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGhyZWYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbmNob3IuaHJlZjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IHNlYXJjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FuY2hvci5zZWFyY2guc2xpY2UoMSk7XG4gICAgfSAvLyBkcm9wcGluZyAnPydcbiAgICBwdWJsaWMgZ2V0IGhhc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbmNob3IuaGFzaC5zbGljZSgxKTtcbiAgICB9IC8vIGRyb3BwaW5nICcjJ1xuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fYW5jaG9yLmhyZWY7XG4gICAgfVxuXG4gICAgcHVibGljIGFkZFRvU2VhcmNoKHBhcmFtczogT2JqZWN0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gcGFyYW1zKSB7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSBwYXJhbXNbbmFtZV07XG4gICAgICAgICAgICBpZiAoKHR5cGVvZiB2YWwgPT0gJ2Jvb2xlYW4nIHx8IHR5cGVvZiB2YWwgPT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbCA9PSAnc3RyaW5nJykgJiYgbmFtZSAhPSAnZXZlbnROYW1lJykge1xuICAgICAgICAgICAgICAgIGxldCBhZGRpdGlvbiA9IHRoaXMuX2FuY2hvci5zZWFyY2ggPyAnJicgOiAnJztcbiAgICAgICAgICAgICAgICB0aGlzLl9hbmNob3Iuc2VhcmNoICs9IGAke2FkZGl0aW9ufSR7bmFtZX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW25hbWVdKX1gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBmZXRjaDxUPihyZXRyaWVzID0gMCk6IFByb21pc2U8VD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5mZXRjaCA/IGF3YWl0IHRoaXMuYnJvd3NlckZldGNoPFQ+KCkgOiBhd2FpdCB0aGlzLnhocjxUPigpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAocmV0cmllcyA8PSAwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZmV0Y2ggZmFpbGVkOiAke2V9YCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2gocmV0cmllcyAtIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGlzQmFzZU9mKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBVcmkucGFyc2UodXJsKS5pc0luKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0luKGJhc2U6IHN0cmluZyk6IGJvb2xlYW47XG4gICAgcHVibGljIGlzSW4oYmFzZTogVXJpKTogYm9vbGVhbjtcbiAgICBwdWJsaWMgaXNJbihiYXNlOiBVcmkgfCBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiYXNlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYmFzZSA9IFVyaS5wYXJzZShiYXNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAodGhpcy5kb21haW4gPT0gYmFzZS5kb21haW4gfHwgLy8gcGFnZSBpcyB0aGUgYmFzZSBkb21haW5cbiAgICAgICAgICAgICAgICB0aGlzLmlzU3ViRG9tYWluT2YoYmFzZSkpICYmIC8vIG9yIHN1Yi1kb21haW4gb2YgaXRcbiAgICAgICAgICAgICghYmFzZS5wYXRoIHx8IHRoaXMucGF0aC5pbmRleE9mKGJhc2UucGF0aCkgPT0gMClcbiAgICAgICAgKTsgLy8gcGFnZSBpcyBhbHNvIGluIGJhc2UncyBkZWZpbmVkIHBhdGg7XG4gICAgfVxuXG4gICAgcHVibGljIGlzRm9yU3ViRG9tYWlucygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9tYWluLmluZGV4T2YoJy4nKSA9PSAwO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc1N1YkRvbWFpbk9mKGJhc2U6IFVyaSk6IGJvb2xlYW4ge1xuICAgICAgICB2YXIgZG9tYWluID0gJyc7XG5cbiAgICAgICAgaWYgKCFiYXNlLmlzRm9yU3ViRG9tYWlucygpKSBkb21haW4gPSAnLic7XG5cbiAgICAgICAgZG9tYWluICs9IGJhc2UuZG9tYWluO1xuXG4gICAgICAgIHJldHVybiBzdHJpbmdVdGlsc1V0aWxzLmVuZHNXaXRoKHRoaXMuZG9tYWluLCBkb21haW4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgcGFyc2UodXJsOiBzdHJpbmcsIGlzQWJzb2x1dGUgPSB0cnVlKSB7XG4gICAgICAgIGlmICghdXJsKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiBuZXcgVXJpKHVybCwgaXNBYnNvbHV0ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBicm93c2VyRmV0Y2g8VD4oKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB3aW5kb3cuZmV0Y2godXJsKTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZmV0Y2ggZmFpbGVkYCk7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB4aHI8VD4oKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgICAgICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gNCB8fCB4aHIuc3RhdHVzICE9PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGB4aHIgZmFpbGVkIC0gJHt4aHIuc3RhdHVzfSAtICR7eGhyLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25SZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGpzb25SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIG1zKSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtHSUdZQV9QQVJBTV9QUkVGSVh9IGZyb20gXCIuLi8uLi8uLi8uLi9hY2NvdW50cy9jb25zdGFudHNcIjtcbmltcG9ydCAqIGFzIF9zZXQgZnJvbSAnbG9kYXNoLnNldCc7XG5pbXBvcnQge1VSTERlY29kZX0gZnJvbSBcIi4vVVJMXCI7XG5cbnR5cGUgVXJsUGFyYW1UeXBlID0ge1xuICAgIGtleTogc3RyaW5nXG4gICAgdmFsdWU6IHN0cmluZ1xufVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXJsUGFyYW1zSGVscGVyIHtcbiAgICBwcml2YXRlIGN1cnJlbnRQYXJhbXM6IEFycmF5PFVybFBhcmFtVHlwZT47XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSBfd2luID0gZ2lneWEuXy5XaW5kb3dQcm92aWRlcikge1xuICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSBbXTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhfd2luLmxvY2F0aW9uKCkuc2VhcmNoKTtcbiAgICAgICAgcGFyYW1zLmZvckVhY2goKHZhbHVlLGtleSkgPT4ge1xuICAgICAgICAgICAgbGV0IHVybFBhcmFtOiBVcmxQYXJhbVR5cGVcbiAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWNvZGVkS2V5ID0gVVJMRGVjb2RlKGtleSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjb2RlZFZhbHVlID0gVVJMRGVjb2RlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB1cmxQYXJhbSA9IHsga2V5OiBkZWNvZGVkS2V5LCB2YWx1ZTogZGVjb2RlZFZhbHVlfVxuICAgICAgICAgICAgfWNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdXJsUGFyYW0gPSB7a2V5LCB2YWx1ZX1cbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIucmVwb3J0KCdmYWlsZWQgdG8gZGVjb2RlIHVybCBwYXJhbScsIHt1cmxQYXJhbX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zLnB1c2godXJsUGFyYW0pO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRHaWdQYXJhbXNGcm9tVVJMKHBhcmFtUHJlZml4ID0gR0lHWUFfUEFSQU1fUFJFRklYKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9IHRoaXMuY3VycmVudFBhcmFtc1xuICAgICAgICAgICAgLmZpbHRlcihwYXJhbSA9PiBwYXJhbS5rZXkuaW5kZXhPZihwYXJhbVByZWZpeCkgPT09IDAgJiYgcGFyYW0ua2V5ICE9PSBwYXJhbVByZWZpeCk7XG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVByZWZpeChwcmVmaXggPSBHSUdZQV9QQVJBTV9QUkVGSVgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50UGFyYW1zLmZvckVhY2gocGFyYW0gPT4ge1xuICAgICAgICAgICAgaWYgKHBhcmFtLmtleS5zdGFydHNXaXRoKHByZWZpeCkpIHtcbiAgICAgICAgICAgICAgICBwYXJhbS5rZXkgPSBwYXJhbS5rZXkuc2xpY2UocHJlZml4Lmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIHB1YmxpYyBrZXlzVG9Mb3dlcigpe1xuICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMuZm9yRWFjaChwYXJhbSA9PiB7XG4gICAgICAgICAgICBwYXJhbS5rZXkgPSBwYXJhbS5rZXkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZVVuYWNjZXB0YWJsZVBhcmFtcyh1bmFjY2VwdGFibGVQYXJhbXM6IFJlZ0V4cCl7XG4gICAgICAgIGlmICghdW5hY2NlcHRhYmxlUGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSB0aGlzLmN1cnJlbnRQYXJhbXMuZmlsdGVyKHBhcmFtID0+ICF1bmFjY2VwdGFibGVQYXJhbXMudGVzdChwYXJhbS5rZXkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIHRvT2JqZWN0KCl7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMuZm9yRWFjaChwYXJhbSA9PiB7XG4gICAgICAgICAgICBfc2V0KHJlc3VsdCxwYXJhbS5rZXkscGFyYW0udmFsdWUpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHsgbG9jYWxJbmZvIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mbyc7XG5pbXBvcnQge0Nvb2tpZVN0b3JlfSBmcm9tIFwiLi9nbG9iYWxcIjtcblxuZXhwb3J0IHR5cGUgU2FtZVNpdGUgPSAnTm9uZScgfCAnU3RyaWN0JyB8ICdMYXgnO1xuXG5leHBvcnQgY2xhc3MgQ29va2llVXRpbHMge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdGVzdENvb2tpZU5hbWUgPSAnZ2lnM3BjdGVzdCc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jb29raWVTdG9yZTogQ29va2llU3RvcmUgPSBuZXcgQ29va2llU3RvcmUoKSkgeyB9XG5cbiAgICBwdWJsaWMgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZXhwaXJlc19pbj86IGFueSwgY29va2llRG9tYWluPzogc3RyaW5nLCBkb250VXNlUm9vdFBhdGg/OiBib29sZWFuLCBzYW1lU2l0ZT86IFNhbWVTaXRlKTogYm9vbGVhbiB7XG5cbiAgICAgICAgaWYgKGNvb2tpZURvbWFpbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBjb29raWVEb21haW4gPSB0aGlzLmdldERlZmF1bHREb21haW4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhdGggPSBkb250VXNlUm9vdFBhdGggPyAnJyA6ICcvJztcblxuICAgICAgICBjb25zdCBleHBpcmVNcyA9IHRoaXMuX2dldEV4cGlyYXRpb25Jbk1zKGV4cGlyZXNfaW4pO1xuXG4gICAgICAgIGxldCBleHBpcmVzID0gbnVsbDtcbiAgICAgICAgaWYoZXhwaXJlTXMgIT0gbnVsbCkge1xuICAgICAgICAgICAgZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICBleHBpcmVzLnNldFRpbWUoZXhwaXJlcy5nZXRUaW1lKCkgKyBleHBpcmVNcyk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29va2llRXhpc3QgPSB0aGlzLl9zZXRDb29raWVJbnRlcm5hbChuYW1lLCB2YWx1ZSwgcGF0aCwgZXhwaXJlcywgY29va2llRG9tYWluLCBzYW1lU2l0ZSk7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkQ29va2llRXhpc3QgPSAhZXhwaXJlTXMgfHwgZXhwaXJlTXMgPiAwO1xuXG4gICAgICAgIGlmIChzaG91bGRDb29raWVFeGlzdCA9PT0gY29va2llRXhpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgZmFpbGVkIHRvIHNldCBjb29raWUsIHJldHJ5O1xuICAgICAgICAvLyBpdCBtaWdodCBiZSBiZWNhdXNlIHRoZSBkb21haW4gaXMgbGlzdGVkIGFzIFRMRCBodHRwczovL2RhdGEuaWFuYS5vcmcvVExEL3RsZHMtYWxwaGEtYnktZG9tYWluLnR4dFxuICAgICAgICBjb25zdCBwYWdlRG9tYWluID0gbG9jYWxJbmZvLnBhZ2VEb21haW47XG4gICAgICAgIGNvb2tpZUV4aXN0ID0gdGhpcy5fc2V0Q29va2llSW50ZXJuYWwobmFtZSwgdmFsdWUsIHBhdGgsIGV4cGlyZXMsIHBhZ2VEb21haW4sIHNhbWVTaXRlKTtcblxuICAgICAgICByZXR1cm4gY29va2llRXhpc3QgPT09IHNob3VsZENvb2tpZUV4aXN0O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nvb2tpZVN0b3JlLmdldENvb2tpZShuYW1lKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlKG5hbWU6IHN0cmluZywgZG9tYWluID0gbG9jYWxJbmZvLnBhZ2VEb21haW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRnJvbUJhc2VEb21haW5zKG5hbWUsIGRvbWFpbik7XG4gICAgICAgIHRoaXMuc2V0KG5hbWUsICcnLCAtMSwgJycsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5zZXQobmFtZSwgJycsIC0xLCAnJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEluZmluaXRlRXhwaXJhdGlvblRpbWVJblNlY29uZHMoKSB7XG4gICAgICAgIC8vIFNldCBleHBpcmF0aW9uIHRpbWUgdG8gMSB5ZWFyc1xuICAgICAgICByZXR1cm4gNjAgKiA2MCAqIDI0ICogMzY1O1xuICAgIH1cblxuICAgIHB1YmxpYyBjYW5TYXZlQ29va2llKGNvb2tpZURvbWFpbiA9IG51bGwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldChDb29raWVVdGlscy50ZXN0Q29va2llTmFtZSwgJ3RydWUnLCAxLCBjb29raWVEb21haW4sIG51bGwpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBpT1MgMTAgd2VidmlldyB0aHJvd3MgaW4gc29tZSBzY2VuYXJpb3NcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXREZWZhdWx0RG9tYWluKHBhZ2VEb21haW4gPSBsb2NhbEluZm8ucGFnZURvbWFpbiwgYmFzZURvbWFpbiA9IGxvY2FsSW5mby5iYXNlRG9tYWluIHx8ICcnKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGJhc2VEb21haW4ubGVuZ3RoID4gMCAmJiBwYWdlRG9tYWluLmxlbmd0aCA+PSBiYXNlRG9tYWluLmxlbmd0aCAmJiBwYWdlRG9tYWluLmxhc3RJbmRleE9mKGJhc2VEb21haW4pID09PSBwYWdlRG9tYWluLmxlbmd0aCAtIGJhc2VEb21haW4ubGVuZ3RoXG4gICAgICAgICAgICA/IGJhc2VEb21haW5cbiAgICAgICAgICAgIDogcGFnZURvbWFpbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRFeHBpcmF0aW9uSW5NcyhleHBpcmVzSW46IGFueSkge1xuXG4gICAgICAgIGxldCBleHBpcmVNczogbnVtYmVyO1xuICAgICAgICBpZiAoZXhwaXJlc0luID09IG51bGwgfHwgZXhwaXJlc0luID09PSAnJyB8fCBpc05hTihleHBpcmVzSW4pKSB7XG4gICAgICAgICAgICBleHBpcmVNcyA9IDEwMDAgKiB0aGlzLmdldEluZmluaXRlRXhwaXJhdGlvblRpbWVJblNlY29uZHMoKTtcbiAgICAgICAgfSBlbHNlIGlmIChleHBpcmVzSW4gPT0gMCkge1xuICAgICAgICAgICAgLy8gMCBtZWFucyBTZXNzaW9uXG4gICAgICAgICAgICBleHBpcmVNcyA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBBbnkgb3RoZXIgdmFsdWUgaXMgbnVtYmVyIG9mIHNlY29uZHMgKEEgbmVnYXRpdmUgdmFsdWUgd291bGQgbWVhbiBleHBpcmUgbm93ISlcbiAgICAgICAgICAgIGV4cGlyZU1zID0gZXhwaXJlc0luICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBleHBpcmVNcztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9zZXRDb29raWVJbnRlcm5hbChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIHBhdGg6IHN0cmluZywgZXhwaXJlczogRGF0ZSwgY29va2llRG9tYWluOiBzdHJpbmcsIHNhbWVTaXRlTW9kZSA9IENvb2tpZVV0aWxzLl9nZXRTYW1lU2l0ZU1vZGUoKSkge1xuICAgICAgICBjb25zdCBwcm90b2NvbCA9IGxvY2FsSW5mbz8ucHJvdG9jb2wgPz8gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICAgIGNvbnN0IGlzU2VjdXJlZCA9IHByb3RvY29sLmluZGV4T2YoJ2h0dHBzJykgPT09IDA7XG5cbiAgICAgICAgdGhpcy5fY29va2llU3RvcmUuc2V0Q29va2llKG5hbWUsIHZhbHVlLCB7XG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgICAgIGRvbWFpbjogY29va2llRG9tYWluLFxuICAgICAgICAgICAgc2FtZVNpdGU6IHNhbWVTaXRlTW9kZSxcbiAgICAgICAgICAgIHNlY3VyZTogaXNTZWN1cmVkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmdldChuYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNhbWVTaXRlTW9kZSkge1xuICAgICAgICAgICAgLy9pZiBmYWlsZWQgdG8gd3JpdGUgY29va2llIHdpdGhvdXQgc2FtZVNpdGUgbW9kZSwgdGhlbiBzdG9wIGhlcmVcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzYW1lU2l0ZU1vZGUgIT09ICdOb25lJykge1xuICAgICAgICAgICAgdGhpcy5fZmFsbGJhY2tUb1NhbWVTaXRlTm9uZShuYW1lLCB2YWx1ZSwgcGF0aCwgZXhwaXJlcywgY29va2llRG9tYWluLCBpc1NlY3VyZWQpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5nZXQobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlcG9ydEZhbGxiYWNrKCdTZXR0aW5nIFNhbWVTaXRlPU5vbmUnLCB7bmFtZSwgdmFsdWUsIHNhbWVTaXRlTW9kZX0pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBmYWlsZWQgdG8gd3JpdGUgY29va2llIHdpdGggc2FtZVNpdGUgbW9kZSwgcmV0cnkgd2l0aG91dDtcbiAgICAgICAgdGhpcy5fY29va2llU3RvcmUuc2V0Q29va2llKG5hbWUsIHZhbHVlLCB7XG4gICAgICAgICAgICBwYXRoLFxuICAgICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgICAgIGRvbWFpbjogY29va2llRG9tYWluLFxuICAgICAgICAgICAgc2VjdXJlOiBpc1NlY3VyZWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuZ2V0KG5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXBvcnRGYWxsYmFjaygnQ29va2llIGVzdGFibGlzaGVkIG9ubHkgd2l0aG91dCBzYW1lU2l0ZSBtb2RlJywge25hbWUsIHZhbHVlLCBzYW1lU2l0ZU1vZGV9KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3JlbW92ZUZyb21CYXNlRG9tYWlucyhuYW1lOiBzdHJpbmcsIGRvbWFpbjogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGRvbWFpblBhcnRzID0gZG9tYWluLnNwbGl0KCcuJyk7XG5cbiAgICAgICAgLy8gd2hlbiBjbGVhcmluZyBmcm9tIGEuYi5jLmQuY29tIC0tPiBjbGVhciBmcm9tIGEuYi5jLmQuY29tLCBiLmMuZC5jb20sIGMuZC5jb20sIGQuY29tXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9tYWluUGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBkb21haW4gPSBkb21haW5QYXJ0cy5zbGljZShpKS5qb2luKCcuJyk7XG4gICAgICAgICAgICB0aGlzLnNldChuYW1lLCAnJywgLTEsIGRvbWFpbiwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zZXQobmFtZSwgJycsIC0xLCBkb21haW4sIHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgX2dldFNhbWVTaXRlTW9kZSgpIDogU2FtZVNpdGUge1xuICAgICAgICBpZiAoIUNvb2tpZVV0aWxzLl9kaXNhbGxvd1NhbWVTaXRlTW9kZSgpKSByZXR1cm4gJ05vbmUnO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIF9kaXNhbGxvd1NhbWVTaXRlTW9kZSgpIHtcbiAgICAgICAgY29uc3QgcHJvdG9jb2wgPSBsb2NhbEluZm8/LnByb3RvY29sID8/IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICBjb25zdCB1YSA9IGxvY2FsSW5mbz8udXNlckFnZW50ID8/IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgaXNTZWN1cmVkID0gcHJvdG9jb2wuaW5kZXhPZignaHR0cHMnKSA9PT0gMDtcblxuICAgICAgICByZXR1cm4gIWlzU2VjdXJlZCB8fCAhdWEgfHxcbiAgICAgICAgICAgIC8vIENvdmVyIGFsbCBpT1MgYmFzZWQgYnJvd3NlcnMgaGVyZS4gVGhpcyBpbmNsdWRlczpcbiAgICAgICAgICAgIC8vIC0gU2FmYXJpIG9uIGlPUyAxMiBmb3IgaVBob25lLCBpUG9kIFRvdWNoLCBpUGFkXG4gICAgICAgICAgICAvLyAtIFdrV2VidmlldyBvbiBpT1MgMTIgZm9yIGlQaG9uZSwgaVBvZCBUb3VjaCwgaVBhZFxuICAgICAgICAgICAgLy8gLSBDaHJvbWUgb24gaU9TIDEyIGZvciBpUGhvbmUsIGlQb2QgVG91Y2gsIGlQYWRcbiAgICAgICAgICAgIC8vIEFsbCBvZiB3aGljaCBhcmUgYnJva2VuIGJ5IFNhbWVTaXRlPU5vbmUsIGJlY2F1c2UgdGhleSB1c2UgdGhlIGlPUyBuZXR3b3JraW5nIHN0YWNrXG4gICAgICAgICAgICAoKHVhLmluZGV4T2YoJ0NQVSBpUGhvbmUgT1MgMTInKSA+IC0xIHx8IHVhLmluZGV4T2YoJ2lQYWQ7IENQVSBPUyAxMicpID4gLTEpIHx8XG4gICAgICAgICAgICAgICAgLy8gQ292ZXIgTWFjIE9TIFggYmFzZWQgYnJvd3NlcnMgdGhhdCB1c2UgdGhlIE1hYyBPUyBuZXR3b3JraW5nIHN0YWNrLiBUaGlzIGluY2x1ZGVzOlxuICAgICAgICAgICAgICAgIC8vIC0gU2FmYXJpIG9uIE1hYyBPUyBYLlxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9lcyBub3QgaW5jbHVkZTpcbiAgICAgICAgICAgICAgICAvLyAtIENocm9tZSBvbiBNYWMgT1MgWFxuICAgICAgICAgICAgICAgIC8vIEJlY2F1c2UgdGhleSBkbyBub3QgdXNlIHRoZSBNYWMgT1MgbmV0d29ya2luZyBzdGFjay5cbiAgICAgICAgICAgICAgICAodWEuaW5kZXhPZignTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF8xNCcpID4gLTEgJiYgdWEuaW5kZXhPZignVmVyc2lvbi8nKSA+IC0xICYmIHVhLmluZGV4T2YoJ1NhZmFyaScpID4gLTEpIHx8XG4gICAgICAgICAgICAgICAgLy8gQ292ZXIgQ2hyb21lIDUwLTY5LCBiZWNhdXNlIHNvbWUgdmVyc2lvbnMgYXJlIGJyb2tlbiBieSBTYW1lU2l0ZT1Ob25lLFxuICAgICAgICAgICAgICAgIC8vIGFuZCBub25lIGluIHRoaXMgcmFuZ2UgcmVxdWlyZSBpdC5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGNvdmVycyBzb21lIHByZS1DaHJvbWl1bSBFZGdlIHZlcnNpb25zLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBwcmUtQ2hyb21pdW0gRWRnZSBkb2VzIG5vdCByZXF1aXJlIFNhbWVTaXRlPU5vbmUuXG4gICAgICAgICAgICAgICAgKHVhLmluZGV4T2YoJ0Nocm9tZS81JykgPiAtMSAmJiB1YS5pbmRleE9mKCdDaHJvbWUvNicpID4gLTEpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9mYWxsYmFja1RvU2FtZVNpdGVOb25lKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgcGF0aDogc3RyaW5nLCBleHBpcmVzOiBEYXRlLCBjb29raWVEb21haW46IHN0cmluZywgc2VjdXJlOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2Nvb2tpZVN0b3JlLnNldENvb2tpZShuYW1lLCB2YWx1ZSwge1xuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIGV4cGlyZXMsXG4gICAgICAgICAgICBkb21haW46IGNvb2tpZURvbWFpbixcbiAgICAgICAgICAgIHNhbWVTaXRlOiAnTm9uZScsXG4gICAgICAgICAgICBzZWN1cmVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcmVwb3J0RmFsbGJhY2sobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzOiB7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICAgICAgc2FtZVNpdGVNb2RlOiBzdHJpbmc7XG4gICAgICAgIGlzU3VjY2Vzc2Z1bD86IGJvb2xlYW47XG4gICAgICAgIGlzSWZyYW1lPzogYm9vbGVhbjtcbiAgICB9KSB7XG4gICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoYENvb2tpZSBQb2xpY3kgRmFsbGJhY2s6ICR7bWVzc2FnZX1gLCB7Li4uZGV0YWlscywgaXNJZnJhbWU6IHRoaXMuX2lzSUZyYW1lKCl9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSAgX2lzSUZyYW1lKCk6IGJvb2xlYW4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdz8ubG9jYXRpb24gIT09IHdpbmRvdz8ucGFyZW50Py5sb2NhdGlvbjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IENvb2tpZVV0aWxzKCk7XG4iLCJpbXBvcnQgeyBVcmkgfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvVXJpJztcbmltcG9ydCAqIGFzIHN0cmluZ1V0aWxzVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3N0cmluZ1V0aWxzJztcbmltcG9ydCB7IGxvY2FsSW5mbyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9Mb2NhbEluZm8nO1xuaW1wb3J0IHtGbGFnU2VydmljZX0gZnJvbSAnLi4vU2VydmljZXMvRmxhZ1NlcnZpY2UnO1xuaW1wb3J0IGNvb2tpZSBmcm9tICcuL2Nvb2tpZSc7XG5cbi8vIFRPRE86IG1vdmUgdG8gY29uZmlnXG5sZXQgYmFzZURvbWFpbnM6IHN0cmluZ1tdfHN0cmluZztcbmlmIChnaWd5YS5wYXJ0bmVyU2V0dGluZ3M/LmJhc2VEb21haW5zPy5sZW5ndGgpIHtcbiAgICBiYXNlRG9tYWlucyA9IGdpZ3lhLnBhcnRuZXJTZXR0aW5ncy5iYXNlRG9tYWlucyBhcyBzdHJpbmdbXXxzdHJpbmc7XG59IGVsc2Uge1xuICAgIGlmICh3aW5kb3cuc2VsZiA9PT0gd2luZG93LnRvcCkge1xuICAgICAgICAvLyBvbmx5IGluIHRoZSB0b3AgZnJhbWVcbiAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oJ2dpZ3lhOiBtaXNzaW5nIGJhc2UgZG9tYWlucyBmb3Igc2l0ZScpO1xuICAgIH1cbiAgICBiYXNlRG9tYWlucyA9IFtkb2N1bWVudC5sb2NhdGlvbi5ob3N0bmFtZV07XG59XG5sb2NhbEluZm8uYmFzZURvbWFpbiA9IGdldEJhc2VEb21haW4oYmFzZURvbWFpbnMpO1xuZXhwb3J0IGRlY2xhcmUgdmFyIGdldEFwaURvbWFpbjogKG5hbWVzcGFjZT86IHN0cmluZykgPT4gc3RyaW5nO1xuY29uc3QgZ2lneWFEb21haW5OYW1lc3BhY2VzID0gWydzb2NpYWxpemUnLCAnYWNjb3VudHMnLCAnZmlkbScsICdnbScsICdjb21tZW50cycsICdnY3MnLCAnaWRzJywgJ2RzJywgJ2dzY291bnRlcnMnLCAncmVwb3J0cyddO1xuZXhwb3J0IGZ1bmN0aW9uIGFwaURvbWFpbkZhY3RvcnkoYXBpRG9tYWluID0gcmVzb2x2ZUFwaURvbWFpbigpLCBkZWZhdWx0QXBpRG9tYWluID0gZ2lneWEuZGVmYXVsdEFwaURvbWFpbik6IChuYW1lc3BhY2U/OiBzdHJpbmcpID0+IHN0cmluZyB7XG5cbiAgICBjb25zdCBzaG91bGRBZGROYW1lc3BhY2UgPSBVcmkucGFyc2UoYXBpRG9tYWluKS5pc0luKFVyaS5wYXJzZShkZWZhdWx0QXBpRG9tYWluKSk7XG5cbiAgICByZXR1cm4gKG5hbWVzcGFjZT86IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAobmFtZXNwYWNlICYmIHNob3VsZEFkZE5hbWVzcGFjZSkge1xuICAgICAgICAgICAgbGV0IHN1YkRvbWFpbiA9IG5hbWVzcGFjZS5zcGxpdCgnLicpWzBdO1xuICAgICAgICAgICAgaWYgKHN1YkRvbWFpbiA9PT0gJ3NkaycgfHwgc3ViRG9tYWluID09PSAnb2F1dGgnKSB7XG4gICAgICAgICAgICAgICAgc3ViRG9tYWluID0gJ2FjY291bnRzJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2lneWFEb21haW5OYW1lc3BhY2VzLmluZGV4T2Yoc3ViRG9tYWluKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5lcnJvcihgdHJ5aW5nIHRvIHNlbmQgcmVxdWVzdCB0byBhbiBpbnZhbGlkIGRvbWFpbmApO1xuICAgICAgICAgICAgICAgIHN1YkRvbWFpbiA9IGdpZ3lhRG9tYWluTmFtZXNwYWNlc1swXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGAke3N1YkRvbWFpbn0uJHthcGlEb21haW59YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcGlEb21haW47XG4gICAgICAgIH1cbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEdpZ3lhRG9tYWluKG5hbWVzcGFjZT86IHN0cmluZywgZGF0YUNlbnRlciA9IGdpZ3lhLmRhdGFDZW50ZXIsIGRlZmF1bHREb21haW4gPSBnaWd5YS5kZWZhdWx0QXBpRG9tYWluKSB7XG4gICAgaWYoZGVmYXVsdERvbWFpbiA9PT0gJ3NhcGNkbS5jbicgJiYgZGF0YUNlbnRlciAhPT0gJ2NuMScpIHtcbiAgICAgICAgZGVmYXVsdERvbWFpbiA9IGBjbjEuJHtkZWZhdWx0RG9tYWlufWA7IC8vRml4IGZvciBjbjEtc3QxLiBpdCBzaG91bGQgYmUgY24xLXN0MS5jbjEuc2FwY2RtLmNuIGFuZCBub3QgY24xLXN0MS5zYXBjZG0uY25cbiAgICB9XG4gICAgY29uc3QgZG9tYWluID0gYCR7ZGF0YUNlbnRlcn0uJHtkZWZhdWx0RG9tYWlufWA7XG5cbiAgICBpZiAobmFtZXNwYWNlKSByZXR1cm4gYCR7bmFtZXNwYWNlfS4ke2RvbWFpbn1gO1xuICAgIGVsc2UgcmV0dXJuIGRvbWFpbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYXNlRG9tYWluKFxuICAgIGJhc2VEb21haW5zOiBzdHJpbmdbXXxzdHJpbmcgPSBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MuYmFzZURvbWFpbnMsXG4gICAgY3VycmVudERvbWFpbiA9IGxvY2F0aW9uLmhvc3RuYW1lLFxuICAgIGRlZmF1bHREb21haW5zID0gWydnaWd5YS5jb20nLCAnY24xLnNhcGNkbS5jbicsICdsb2NhbGhvc3QnLCBnaWd5YS5kZWZhdWx0QXBpRG9tYWluXSxcbik6IHN0cmluZyB7XG4gICAgLy8gIzQ5Nzg2IC0gU3VwcG9ydCB3ZWJ2aWV3IHdpdGhvdXQgaG9zdG5hbWUuXG4gICAgaWYgKCFjdXJyZW50RG9tYWluKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGJhc2VEb21haW5zID09ICdzdHJpbmcnKSB7XG4gICAgICAgIGJhc2VEb21haW5zID0gYmFzZURvbWFpbnMuc3BsaXQoJywnKTtcbiAgICB9XG5cbiAgICBsZXQgb3JpZ2luVVJJID0gVXJpLnBhcnNlKGN1cnJlbnREb21haW4pO1xuXG4gICAgaWYgKGRlZmF1bHREb21haW5zKSB7XG4gICAgICAgIGJhc2VEb21haW5zID0gYmFzZURvbWFpbnMuY29uY2F0KGRlZmF1bHREb21haW5zKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCByYXdEb21haW4gb2YgYmFzZURvbWFpbnMpIHtcbiAgICAgICAgLy8gVGhpcyBkb2VzIG5vdCB0YWtlIGNhcmUgb2Ygd2lsZGNhcmRzIGluIHRoZSBtaWRkbGUgb2Ygc3RyaW5nLlxuICAgICAgICBjb25zdCBiYXNlRG9tYWluID0gc3RyaW5nVXRpbHNVdGlscy5yZXBsYWNlQWxsKHJhd0RvbWFpbiwgJyonLCAnJyk7XG4gICAgICAgIGNvbnN0IGJhc2VVcmkgPSBVcmkucGFyc2UoYmFzZURvbWFpbik7XG4gICAgICAgIGlmIChiYXNlVXJpICYmIG9yaWdpblVSSS5pc0luKGJhc2VVcmkpKSB7XG4gICAgICAgICAgICBpZiAoIWdpZ3lhLl8pIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5fID0ge30gYXMgYW55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2lneWEuXy5pc1RydXN0ZWREb21haW49IHRydWU7XG4gICAgICAgICAgICBpZiAoYmFzZVVyaS5pc0ZvclN1YkRvbWFpbnMoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5VUkkuZG9tYWluO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZVVyaS5kb21haW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmYWxsYmFjayB0byB0aGUgcGFyZW50J3Mgd2luZG93IGRvbWFpbiAoZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpLlxuICAgIHJldHVybiBvcmlnaW5VUkkuZG9tYWluO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUFwaURvbWFpbihcbiAgICBjdXN0b21BcGlEb21haW5QcmVmaXggPSBnaWd5YS5wYXJ0bmVyU2V0dGluZ3MgJiYgZ2lneWEucGFydG5lclNldHRpbmdzLmN1c3RvbUFQSURvbWFpblByZWZpeCxcbiAgICBiYXNlRG9tYWluID0gbG9jYWxJbmZvLmJhc2VEb21haW4sXG4gICAgZGF0YUNlbnRlciA9IGdpZ3lhLmRhdGFDZW50ZXIsXG4gICAgZGVmYXVsdEFwaURvbWFpbiA9IGdpZ3lhLmRlZmF1bHRBcGlEb21haW4sXG4pIHtcbiAgICBjb25zdCBhcGlEb21haW4gPSBnZXRIb3N0ZWRQYWdlc0FwaURvbWFpbkNvb2tpZSgpO1xuICAgIGlmIChhcGlEb21haW4pIHtcbiAgICAgICAgcmV0dXJuIGFwaURvbWFpbjtcbiAgICB9XG4gICAgLy8gVE9ETzogcmVtb3ZlIG9uY2UgYSBzb2x1dGlvbiB3aWxsIGJlIGZvdW5kIGZvciBob3N0ZWQgcGFnZXNcbiAgICBpZiAoYmFzZURvbWFpbi5lbmRzV2l0aChnaWd5YS5fLmNvbmZpZz8uaG9zdGVkUGFnZXNEb21haW4gfHwgJ215LmdpZ3lhLWV4dC5jb20nKSkge1xuICAgICAgICByZXR1cm4gYmFzZURvbWFpbjtcbiAgICB9XG4gICAgaWYgKGN1c3RvbUFwaURvbWFpblByZWZpeCAmJiBiYXNlRG9tYWluICYmIGJhc2VEb21haW4gIT09IGRlZmF1bHRBcGlEb21haW4pIHtcbiAgICAgICAgcmV0dXJuIGAke2N1c3RvbUFwaURvbWFpblByZWZpeH0uJHtiYXNlRG9tYWlufWA7XG4gICAgfVxuICAgIHJldHVybiBnZXRHaWd5YURvbWFpbih1bmRlZmluZWQsIGRhdGFDZW50ZXIsIGRlZmF1bHRBcGlEb21haW4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmFnZURvbWFpbigpIHtcbiAgICBjb25zdCBhcGlEb21haW4gPSBnZXRIb3N0ZWRQYWdlc0FwaURvbWFpbkNvb2tpZSgpO1xuICAgIGlmIChhcGlEb21haW4pIHtcbiAgICAgICAgcmV0dXJuIGFwaURvbWFpbjtcbiAgICB9XG4gICAgaWYgKGdpZ3lhLnRoaXNTY3JpcHQ/Lmdsb2JhbENvbmY/Llsnc3RvcmFnZURvbWFpbk92ZXJyaWRlJ10pIHtcbiAgICAgICAgcmV0dXJuIGdpZ3lhLnRoaXNTY3JpcHQuZ2xvYmFsQ29uZlsnc3RvcmFnZURvbWFpbk92ZXJyaWRlJ107XG4gICAgfVxuICAgIGlmIChnaWd5YS50aGlzU2NyaXB0Py5iYXNlRG9tYWluICYmIEZsYWdTZXJ2aWNlLnVzZUdpZ3lhSnNCYXNlRG9tYWluKSB7XG4gICAgICAgIHJldHVybiBnaWd5YS50aGlzU2NyaXB0LmJhc2VEb21haW47XG4gICAgfVxuICAgIGxldCBkb21haW4gPSBnaWd5YS5kZWZhdWx0QXBpRG9tYWluXG4gICAgaWYgKGdpZ3lhLnV0aWxzLnN0cmluZ1V0aWxzLmVuZHNXaXRoKGRvbWFpbiwgJ3NhcGNkbS5jbicpICYmIGdpZ3lhLmRhdGFDZW50ZXIgIT09ICdjbjEnKSB7IC8vIHNwZWNpYWwgY2FzZSB3aXRoIGNoaW5hIGRvbWFpbiBzdGFnaW5nXG4gICAgICAgIGRvbWFpbiA9IGBjbjEuc2FwY2RtLmNuYDtcbiAgICB9XG4gICAgY29uc3QgcHJlZml4ID0gZ2lneWEuZGF0YUNlbnRlciAhPT0gJ2dsb2JhbCcgPyBgY2Rucy4ke2dpZ3lhLmRhdGFDZW50ZXJ9YCA6IGBjZG5zYDtcbiAgICByZXR1cm4gYCR7cHJlZml4fS4ke2RvbWFpbn1gO1xufVxuXG5mdW5jdGlvbiBnZXRIb3N0ZWRQYWdlc0FwaURvbWFpbkNvb2tpZSgpIHtcbiAgICByZXR1cm4gY29va2llLmdldChgcGFnZXNfYXBpRG9tYWluXyR7Z2lneWEuYXBpS2V5fWApO1xufVxuIiwiaW1wb3J0ICogYXMgRE9NVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL0RPTSc7XG5pbXBvcnQgeyBnZXRDZG5SZXNvdXJjZSB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9jZG4nO1xuaW1wb3J0IHsgbG9jYWxJbmZvIH0gZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL0xvY2FsSW5mbyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxsQXN5bmM8VD4obWV0aG9kTmFtZTogc3RyaW5nLCBwYXJhbXMgPSB7fSk6IFByb21pc2U8VD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPihyZXNvbHZlID0+IHtcbiAgICAgICAgY2FsbEZ1bmN0aW9uKGBnaWd5YS4ke21ldGhvZE5hbWV9YCwgW3suLi5wYXJhbXMsIGNhbGxiYWNrOiByZXNvbHZlfV0pO1xuICAgIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxsRnVuY3Rpb24obmFtZTogc3RyaW5nLCBhclBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICB2YXIgZm4gPSBldmFsKG5hbWUpO1xuICAgIHZhciBhclBhcnRzID0gbmFtZS5zcGxpdCgnLicpO1xuICAgIGFyUGFydHMuc3BsaWNlKGFyUGFydHMubGVuZ3RoIC0gMSwgMSk7XG4gICAgdmFyIHNjb3BlID0gZXZhbChhclBhcnRzLmpvaW4oJy4nKSk7XG4gICAgZm4uYXBwbHkoc2NvcGUsIGFyUGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZU9uUGFnZUxvYWQoZnVuYzogRnVuY3Rpb24sIGNvbXBsZXRlT25seT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICAgICghZG9jdW1lbnQucmVhZHlTdGF0ZSAmJiBkb2N1bWVudC5ib2R5KSB8fFxuICAgICAgICBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnIHx8XG4gICAgICAgICghY29tcGxldGVPbmx5ICYmIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScgJiYgZG9jdW1lbnQuYm9keSlcbiAgICApIHtcbiAgICAgICAgZnVuYygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZm5PbkxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmdW5jKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZm5PbkxvYWQsIDIwMDAwKTsgLy8gZmFsbGJhY2sgLSBzb21ldGltZXMgcmVhZHlzdGF0ZSBzdGF5cyBzdHVjayBvbiBpbnRlcmFjdGl2ZVxuXG4gICAgICAgIERPTVV0aWxzLmFkZEV2ZW50TGlzdGVuZXIod2luZG93LCAnbG9hZCcsIGZuT25Mb2FkKTtcbiAgICAgICAgRE9NVXRpbHMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ0RPTUNvbnRlbnRMb2FkZWQnLCBmbk9uTG9hZCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFsaWFzKHB1YmxpY05hbWU6IHN0cmluZywgZm5jOiBGdW5jdGlvbiB8IHsgW2tleTogc3RyaW5nXTogYW55IH0pOiB2b2lkIHtcbiAgICBjb25zdCBhck5hbWVTZWdtZW50cyA9IHB1YmxpY05hbWUuc3BsaXQoJy4nKTtcbiAgICBsZXQgb0N1cnJlbnRTZWdtZW50ID0gd2luZG93O1xuICAgIGZvciAobGV0IGlTZWdtZW50ID0gMDsgaVNlZ21lbnQgPCBhck5hbWVTZWdtZW50cy5sZW5ndGggLSAxOyBpU2VnbWVudCsrKSB7XG4gICAgICAgIGNvbnN0IHNTZWdtZW50ID0gYXJOYW1lU2VnbWVudHNbaVNlZ21lbnRdO1xuICAgICAgICBpZiAoIW9DdXJyZW50U2VnbWVudFtzU2VnbWVudF0pIHtcbiAgICAgICAgICAgIG9DdXJyZW50U2VnbWVudFtzU2VnbWVudF0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBvQ3VycmVudFNlZ21lbnQgPSBvQ3VycmVudFNlZ21lbnRbc1NlZ21lbnRdO1xuICAgIH1cbiAgICBvQ3VycmVudFNlZ21lbnRbYXJOYW1lU2VnbWVudHNbYXJOYW1lU2VnbWVudHMubGVuZ3RoIC0gMV1dID0gZm5jO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlKGZuOiAoKSA9PiB2b2lkLCBkZWxheU1pbGxpc2Vjb25kczogbnVtYmVyKTogKCkgPT4gdm9pZCB7XG4gICAgbGV0IHRpbWVyOiBudW1iZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGltZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICB9LCBkZWxheU1pbGxpc2Vjb25kcykgYXMgYW55O1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkU3JjVG9JRnJhbWVJZk5lZWRlZChpZnJhbWU6IEhUTUxJRnJhbWVFbGVtZW50LCBzcmM6IHN0cmluZyA9IGdldENkblJlc291cmNlKCcvJykpIHtcbiAgICBpZiAobG9jYWxJbmZvLmlzSU9TV2ViVmlldyB8fCAobG9jYWxJbmZvLmlzSU9TICYmIGxvY2FsSW5mby5pc1dlQ2hhdCkpIHtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTtcbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIElDb29raWVPcHRpb25zIHtcbiAgICBwYXRoPzogc3RyaW5nO1xuICAgIGRvbWFpbj86IHN0cmluZztcbiAgICBleHBpcmVzPzogRGF0ZTtcbiAgICBzYW1lU2l0ZT86ICdOb25lJyB8ICdTdHJpY3QnIHwgJ0xheCc7XG4gICAgc2VjdXJlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIENvb2tpZVN0b3JlIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3dpbjogV2luZG93ID0gd2luZG93KSB7IH1cblxuICAgIHNldENvb2tpZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IElDb29raWVPcHRpb25zKSB7XG4gICAgICAgIGxldCBjb29raWVTdHJpbmcgPSBgJHtuYW1lfT0ke2VzY2FwZSh2YWx1ZSl9YDtcbiAgICAgICAgaWYob3B0aW9ucy5wYXRoKSBjb29raWVTdHJpbmcgKz0gYDsgcGF0aD0ke29wdGlvbnMucGF0aH1gO1xuICAgICAgICBpZihvcHRpb25zLmV4cGlyZXMpIGNvb2tpZVN0cmluZyArPSBgOyBleHBpcmVzPSR7b3B0aW9ucy5leHBpcmVzLnRvVVRDU3RyaW5nKCl9YDtcbiAgICAgICAgaWYob3B0aW9ucy5kb21haW4gJiYgb3B0aW9ucy5kb21haW4uaW5kZXhPZignLicpICE9IC0xKSBjb29raWVTdHJpbmcgKz0gYDsgZG9tYWluPSR7b3B0aW9ucy5kb21haW59YDtcbiAgICAgICAgaWYob3B0aW9ucy5zYW1lU2l0ZSkgY29va2llU3RyaW5nICs9IGA7IHNhbWVTaXRlPSR7b3B0aW9ucy5zYW1lU2l0ZX1gO1xuICAgICAgICBpZihvcHRpb25zLnNlY3VyZSkgY29va2llU3RyaW5nICs9IGA7IHNlY3VyZWA7XG4gICAgICAgIHRoaXMuX3dpbi5kb2N1bWVudC5jb29raWUgPSBjb29raWVTdHJpbmc7XG4gICAgfVxuXG4gICAgZ2V0Q29va2llKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLyhbLiorP149IToke30oKXxbXFxdXFwvXFxcXF0pL2csICdcXFxcJDEnKS5yZXBsYWNlKC9eWyBcXHRdK3xbIFxcdF0rJC9nLCAnJyk7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgnKD86Xnw7KVxcXFxzPycgKyBuYW1lICsgJz0oLio/KSg/Ojt8JCknKTtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLl93aW4uZG9jdW1lbnQuY29va2llLm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgcmV0dXJuIG1hdGNoICYmIHVuZXNjYXBlKG1hdGNoWzFdKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gaXNWYWxpZChnbHRleHA6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBnZXRNaWxsaXMoZ2x0ZXhwKSA+IERhdGUubm93KCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4KC4uLmdsdGV4cHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICBpZiAoIWdsdGV4cHMgfHwgIWdsdGV4cHMubGVuZ3RoKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgIHJldHVybiBnbHRleHBzLnNvcnQoKGdsdGV4cEEsIGdsdGV4cEIpID0+IGdldE1pbGxpcyhnbHRleHBCKSAtIGdldE1pbGxpcyhnbHRleHBBKSlbMF07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWlsbGlzKGdsdEV4cDogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICFnbHRFeHAgPyAwIDogTnVtYmVyKGdsdEV4cC5zdWJzdHIoMCwgZ2x0RXhwLmluZGV4T2YoJ18nKSkpICogMTAwMDtcbn1cbiIsImltcG9ydCAqIGFzIFVSTFV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9VUkwnO1xuaW1wb3J0ICogYXMgSlNPTlV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9KU09OJztcbmltcG9ydCB7RmxhZ1NlcnZpY2V9IGZyb20gXCIuLi9TZXJ2aWNlcy9GbGFnU2VydmljZVwiO1xuZGVjbGFyZSBmdW5jdGlvbiB1bmVzY2FwZShlc2NhcGVkU3RyOiBzdHJpbmcpOiBzdHJpbmc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemUob0tleVZhbHVlOiBPYmplY3QsIGRlbGltaXRlcj86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYSA9IFtdO1xuICAgIGlmICghZGVsaW1pdGVyKSB7XG4gICAgICAgIGRlbGltaXRlciA9ICcmJztcbiAgICB9XG4gICAgZm9yIChjb25zdCBwIGluIG9LZXlWYWx1ZSkge1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBvS2V5VmFsdWVbcF0pIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAob0tleVZhbHVlW3BdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5wdXNoKHAgKyAnPScgKyBVUkxVdGlscy5VUkxFbmNvZGUoSlNPTlV0aWxzLnNlcmlhbGl6ZShvS2V5VmFsdWVbcF0pKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGEucHVzaChwICsgJz0nICsgVVJMVXRpbHMuVVJMRW5jb2RlKG9LZXlWYWx1ZVtwXSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHMgPSBhLmpvaW4oZGVsaW1pdGVyKTtcbiAgICByZXR1cm4gcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZSh1cmxFbmNvZGVkU3RyaW5nOiBzdHJpbmcsIGRlbGltaXRlcj86IHN0cmluZywga2V5c1RvTG93ZXI/OiBib29sZWFuLCB1c2VVbmVzY2FwZT86IGJvb2xlYW4pOiBhbnkge1xuICAgIGNvbnN0IG8gPSB7fTtcbiAgICBpZiAoIXVybEVuY29kZWRTdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgfVxuICAgIGlmICghZGVsaW1pdGVyKSB7XG4gICAgICAgIGRlbGltaXRlciA9ICcmJztcbiAgICB9XG4gICAgY29uc3QgcGFpcnMgPSB1cmxFbmNvZGVkU3RyaW5nLnNwbGl0KGRlbGltaXRlcik7XG4gICAgZm9yIChsZXQgaVBhaXIgPSAwOyBpUGFpciA8IHBhaXJzLmxlbmd0aDsgaVBhaXIrKykge1xuICAgICAgICBjb25zdCBwYWlyID0gcGFpcnNbaVBhaXJdO1xuICAgICAgICBjb25zdCBlcVBvcyA9IHBhaXIuaW5kZXhPZignPScpO1xuICAgICAgICBpZiAoZXFQb3MgPT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzVG9Mb3dlciA/IHBhaXIudG9Mb3dlckNhc2UoKSA6IHBhaXI7XG4gICAgICAgICAgICBvW2tleV0gPSAnMSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQga2V5ID0gcGFpci5zdWJzdHIoMCwgZXFQb3MpO1xuICAgICAgICAgICAgaWYgKGtleXNUb0xvd2VyKSB7XG4gICAgICAgICAgICAgICAga2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkVmFsdWUgPSBwYWlyLnN1YnN0cihlcVBvcyArIDEpLnJlcGxhY2UoL1xcKy9nLCAnICcpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAodXNlVW5lc2NhcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgb1trZXldID0gRmxhZ1NlcnZpY2UudXNlRGVjb2RlVVJJQ29tcG9uZW50ID8gY29tcGFyZVJlc3VsdHNBbmRSZXR1cm5VUkxEZWNvZGUoc2VyaWFsaXplZFZhbHVlKSA6IHVuZXNjYXBlKHNlcmlhbGl6ZWRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb1trZXldID0gVVJMVXRpbHMuVVJMRGVjb2RlKHNlcmlhbGl6ZWRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIG9ba2V5XSA9IEZsYWdTZXJ2aWNlLnVzZURlY29kZVVSSUNvbXBvbmVudCA/IFVSTFV0aWxzLlVSTERlY29kZShzZXJpYWxpemVkVmFsdWUpIDogdW5lc2NhcGUoc2VyaWFsaXplZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbztcbn1cblxuZnVuY3Rpb24gY29tcGFyZVJlc3VsdHNBbmRSZXR1cm5VUkxEZWNvZGUoc2VyaWFsaXplZFZhbHVlKXtcbiAgICBjb25zdCB1bmVzY2FwZWRSZXN1bHQgPSB1bmVzY2FwZShzZXJpYWxpemVkVmFsdWUpO1xuICAgIGNvbnN0IHVybERlY29kZVJlc3VsdCA9IFVSTFV0aWxzLlVSTERlY29kZShzZXJpYWxpemVkVmFsdWUpO1xuICAgIHVuZXNjYXBlZFJlc3VsdC5sb2NhbGVDb21wYXJlKHVybERlY29kZVJlc3VsdCkgIT09IDAgJiYgZ2lneWEubG9nZ2VyLnJlcG9ydCgndXJsRGVjb2RlciBhbmQgdW5lc2NhcGVkIGhhdmUgZGlmZmVyZW50IHZhbHVlcycsIHtcbiAgICAgICAgdW5lc2NhcGVkUmVzdWx0LFxuICAgICAgICB1cmxEZWNvZGVSZXN1bHRcbiAgICB9KTtcbiAgICByZXR1cm4gdXJsRGVjb2RlUmVzdWx0O1xufVxuIiwiaW1wb3J0ICogYXMgSlNPTlV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9KU09OJztcbmltcG9ydCB7IGxvY2FsSW5mbyB9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9Mb2NhbEluZm8nO1xuaW1wb3J0IGNvb2tpZVV0aWxzLCB7U2FtZVNpdGV9IGZyb20gJy4vY29va2llJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0TG9jYWxTdG9yYWdlQWRhcHRlciB7XG4gICAgcHVibGljIHN0YXRpYyBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gJ0Fic3RyYWN0QWRhcHRlcic7XG4gICAgfVxuXG4gICAgcHVibGljIGFic3RyYWN0IGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmc7XG5cbiAgICBwdWJsaWMgYWJzdHJhY3Qgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZXhwaXJlc0luPzogbnVtYmVyLCBkb21haW4/OiBzdHJpbmcpOiB2b2lkO1xuXG4gICAgcHVibGljIGFic3RyYWN0IHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpO1xuXG4gICAgLyoqXG4gICAgICogU2V0IG9iamVjdCB0byBzdG9yYWdlLlxuICAgICAqL1xuICAgIHB1YmxpYyBzZXRPYmplY3Qoa2V5OiBzdHJpbmcsIG86IE9iamVjdCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldEl0ZW0oa2V5LCBKU09OVXRpbHMuc2VyaWFsaXplKG8pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgb2JqZWN0IGZyb20gbG9jYWwgc3RvcmFnZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0T2JqZWN0KGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBhbnkpOiBPYmplY3Qge1xuICAgICAgICByZXR1cm4gSlNPTlV0aWxzLmRlc2VyaWFsaXplKHRoaXMuZ2V0SXRlbShrZXkpLCBkZWZhdWx0VmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElzIHBlcnNpc3RlbnQgc3RvcmFnZS4gUmV0dXJucyBmYWxzZSB3aGVuIGRhdGEgaXMgbm90IHBlcnNpc3RlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgaXNQZXJzaXN0ZW50KCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RBc3luY0xvY2FsU3RvcmFnZUFkYXB0ZXIgZXh0ZW5kcyBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIge1xuICAgIHByb3RlY3RlZCBpc0xvYWRlZDogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzTG9hZGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGlzUmVhZHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzTG9hZGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVzZWQgd2hlbiB0aGVyZSBpcyBpbml0aWFsaXphdGlvbiB0aW1lIG9uIHRoZSBsb2NhbCBzdG9yYWdlIGFkYXB0ZXIuXG4gICAgICovXG4gICAgcHVibGljIHdhaXRGb3JTZXJ2aWNlKGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVhZHkoKSkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy53YWl0Rm9yU2VydmljZShjYWxsYmFjayksIDUwKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmFic3RyYWN0IGNsYXNzIFN0b3JhZ2VBZGFwdGVyIGV4dGVuZHMgQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyIHtcbiAgICBwcm90ZWN0ZWQgc3RvcmFnZTogYW55O1xuXG4gICAgcHVibGljIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlW2tleV07XG4gICAgfVxuXG4gICAgcHVibGljIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGV4cGlyZXNJbj86IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zdG9yYWdlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG59XG5jbGFzcyBMb2NhbFN0b3JhZ2VBZGFwdGVyIGV4dGVuZHMgU3RvcmFnZUFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdMb2NhbFN0b3JhZ2VBZGFwdGVyJztcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gbG9jYWxJbmZvLnN1cHBvcnRzTG9jYWxTdG9yYWdlO1xuICAgIH1cbn1cbmNsYXNzIFNlc3Npb25TdG9yYWdlQWRhcHRlciBleHRlbmRzIFN0b3JhZ2VBZGFwdGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gd2luZG93LnNlc3Npb25TdG9yYWdlO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdTZXNzaW9uU3RvcmFnZUFkYXB0ZXInO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBsb2NhbEluZm8uc3VwcG9ydHNTZXNzaW9uU3RvcmFnZTtcbiAgICB9XG59XG5jbGFzcyBGaXJlZm94U3RvcmFnZUFkYXB0ZXIgZXh0ZW5kcyBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBsb2NhbEluZm8uaXNGRiAmJiB3aW5kb3dbJ2dsb2JhbFN0b3JhZ2UnXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnRmlyZWZveFN0b3JhZ2VBZGFwdGVyJztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SXRlbShrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB3aW5kb3dbJ2dsb2JhbFN0b3JhZ2UnXVtsb2NhdGlvbi5ob3N0bmFtZV1ba2V5XTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZXhwaXJlc0luPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aW5kb3dbJ2dsb2JhbFN0b3JhZ2UnXVtsb2NhdGlvbi5ob3N0bmFtZV1ba2V5XSA9IHZhbHVlO1xuICAgICAgICB9IGNhdGNoIChleCkge31cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSXRlbShrZXk6IHN0cmluZykge1xuICAgICAgICBkZWxldGUgd2luZG93WydnbG9iYWxTdG9yYWdlJ11bbG9jYXRpb24uaG9zdG5hbWVdW2tleV07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENvb2tpZVN0b3JhZ2VBZGFwdGVyIGV4dGVuZHMgQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIGlzQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29va2llVXRpbHMuY2FuU2F2ZUNvb2tpZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdDb29raWVTdG9yYWdlQWRhcHRlcic7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gY29va2llVXRpbHMuZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGV4cGlyZXNJbj86IG51bWJlciwgZG9tYWluPzogc3RyaW5nLCBhZGRpdGlvbmFsUGFyYW1zOiB7ZG9udFVzZVJvb3RQYXRoPzogYm9vbGVhbiwgc2FtZVNpdGU/OiBTYW1lU2l0ZX0gPSB7fSk6IHZvaWQge1xuICAgICAgICBjb29raWVVdGlscy5zZXQoa2V5LCB2YWx1ZSwgZXhwaXJlc0luLCBkb21haW4sIGFkZGl0aW9uYWxQYXJhbXMuZG9udFVzZVJvb3RQYXRoLCBhZGRpdGlvbmFsUGFyYW1zLnNhbWVTaXRlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlSXRlbShrZXk6IHN0cmluZykge1xuICAgICAgICBjb29raWVVdGlscy5yZW1vdmUoa2V5KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTWVtb3J5U3RvcmFnZUFkYXB0ZXIgZXh0ZW5kcyBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIge1xuICAgIHB1YmxpYyBzdGF0aWMgaXNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBtZW1vcnk6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tZW1vcnkgPSB7fTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTWVtb3J5U3RvcmFnZUFkYXB0ZXInO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJdGVtKGtleTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVtb3J5W2tleV07XG4gICAgfVxuXG4gICAgcHVibGljIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGV4cGlyZXNJbj86IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLm1lbW9yeVtrZXldID0gdmFsdWU7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubWVtb3J5W2tleV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSXMgcGVyc2lzdGVudCBzdG9yYWdlLiBSZXR1cm5zIGZhbHNlIHdoZW4gZGF0YSBpcyBub3QgcGVyc2lzdGVkLlxuICAgICAqL1xuICAgIHB1YmxpYyBpc1BlcnNpc3RlbnQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgYWRhcHRlcnM6IEFycmF5PGFueT4gPSBbXG4gICAgTG9jYWxTdG9yYWdlQWRhcHRlcixcbiAgICBTZXNzaW9uU3RvcmFnZUFkYXB0ZXIsXG4gICAgRmlyZWZveFN0b3JhZ2VBZGFwdGVyLFxuICAgIENvb2tpZVN0b3JhZ2VBZGFwdGVyLFxuICAgIE1lbW9yeVN0b3JhZ2VBZGFwdGVyLFxuXTtcbmV4cG9ydCBjb25zdCBpbnN0YW5jZXM6IHsgW2tleTogc3RyaW5nXTogQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyIH0gPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplQWRhcHRlcihhZGFwdGVyOiB7IG5hbWU/OiBzdHJpbmc7IGdldE5hbWU6ICgpID0+IHN0cmluZyB9ICYgKG5ldyAoKSA9PiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIpKSB7XG4gICAgY29uc3QgYWRhcHRlck5hbWUgPSBhZGFwdGVyLmdldE5hbWUoKSB8fCBhZGFwdGVyLm5hbWU7XG4gICAgaWYgKCFpbnN0YW5jZXNbYWRhcHRlck5hbWVdKSB7XG4gICAgICAgIGluc3RhbmNlc1thZGFwdGVyTmFtZV0gPSBuZXcgYWRhcHRlcigpO1xuICAgIH1cbiAgICByZXR1cm4gaW5zdGFuY2VzW2FkYXB0ZXJOYW1lXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yU2VydmljZSgpOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXI7XG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvclNlcnZpY2UoY2FsbGJhY2s6IChzdG9yYWdlOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXIpID0+IHZvaWQpOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXI7XG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvclNlcnZpY2UoY2FsbGJhY2s/OiAoc3RvcmFnZTogQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyKSA9PiB2b2lkKTogQWJzdHJhY3RMb2NhbFN0b3JhZ2VBZGFwdGVyIHtcbiAgICAvLyBTZWxlY3QgY29tcGF0aWJsZSBhZGFwdGVyLlxuICAgIGxldCBzdG9yYWdlOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXI7XG4gICAgZm9yIChjb25zdCBhZGFwdGVyIG9mIGFkYXB0ZXJzKSB7XG4gICAgICAgIGlmIChhZGFwdGVyLmlzQXZhaWxhYmxlKCkpIHtcbiAgICAgICAgICAgIC8vIERvbid0IHNlbGVjdCBhZGFwdGVyIGlmIGl0J3MgYXN5bmMgYW5kIGEgY2FsbGJhY2sgd2Fzbid0IHByb3ZpZGVkLlxuICAgICAgICAgICAgaWYgKGFkYXB0ZXIucHJvdG90eXBlIGluc3RhbmNlb2YgQWJzdHJhY3RBc3luY0xvY2FsU3RvcmFnZUFkYXB0ZXIgJiYgIWNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0b3JhZ2UgPSBpbml0aWFsaXplQWRhcHRlcihhZGFwdGVyKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2sgdG8gbWVtb3J5LWJhc2VkIG5vbi1wZXJzaXN0ZW50IHN0b3JhZ2UuXG4gICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICAgIHN0b3JhZ2UgPSBpbml0aWFsaXplQWRhcHRlcihNZW1vcnlTdG9yYWdlQWRhcHRlcik7XG4gICAgfVxuXG4gICAgLy8gVHJpZ2dlciBjYWxsYmFjayB3aGVuIGFkYXB0ZXIgZmluaXNoZXMgbG9hZGluZyAob3IgaW5zdGFudGx5LCBpZiBub3QgcmVxdWlyZWQgdG8gd2FpdCkuXG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChzdG9yYWdlIGluc3RhbmNlb2YgQWJzdHJhY3RBc3luY0xvY2FsU3RvcmFnZUFkYXB0ZXIpIHtcbiAgICAgICAgICAgIHN0b3JhZ2Uud2FpdEZvclNlcnZpY2UoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHN0b3JhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjayhzdG9yYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RvcmFnZTtcbn1cbmNvbnN0IGFkYXB0ZXIgPSB3YWl0Rm9yU2VydmljZSgpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEl0ZW0oa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBhZGFwdGVyLmdldEl0ZW0oa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBleHBpcmVzSW4/OiBudW1iZXIpOiB2b2lkIHtcbiAgICByZXR1cm4gYWRhcHRlci5zZXRJdGVtKGtleSwgdmFsdWUsIGV4cGlyZXNJbik7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIHJldHVybiBhZGFwdGVyLnJlbW92ZUl0ZW0oa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRPYmplY3Qoa2V5OiBzdHJpbmcsIG86IE9iamVjdCk6IHZvaWQge1xuICAgIHJldHVybiBhZGFwdGVyLnNldE9iamVjdChrZXksIG8pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE9iamVjdChrZXk6IHN0cmluZywgZGVmYXVsdFZhbHVlPzogYW55KTogT2JqZWN0IHtcbiAgICByZXR1cm4gYWRhcHRlci5nZXRPYmplY3Qoa2V5LCBkZWZhdWx0VmFsdWUpO1xufVxuIiwiaW1wb3J0ICogYXMgSlNPTlV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9KU09OJztcbmltcG9ydCBXZWJTREtUb2dnbGVzIGZyb20gXCIuL3RvZ2dsZXNcIjtcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVVbmRlZmluZWQobzogT2JqZWN0KTogT2JqZWN0IHtcbiAgICB2YXIgbzIgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIG8pIHtcbiAgICAgICAgaWYgKG9bcF0gIT0gbnVsbCAmJiBvW3BdICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbzJbcF0gPSBvW3BdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHByZXNzaW9uSGVscGVyKGNvbnRleHQpIHtcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRGaWVsZDogZnVuY3Rpb24ocGF0aCkge1xuICAgICAgICAgICAgaWYgKCFwYXRoKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIHBhdGhzID0gcGF0aC5zcGxpdCgnLicpLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjb250ZXh0LFxuICAgICAgICAgICAgICAgIGk7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXRocy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50W3BhdGhzW2ldXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudFtwYXRoc1tpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUobzogT2JqZWN0LCBuYW1lOiBzdHJpbmcsIGNyZWF0ZU1pc3NpbmdPYmplY3RzOiBib29sZWFuKTogYW55IHtcbiAgICBpZiAoIW5hbWUpIHJldHVybiBvO1xuICAgIHZhciBvUmVzdWx0ID0gbztcbiAgICB2YXIgYXJOYW1lU2VnbWVudHMgPSBuYW1lLnNwbGl0KCcuJyk7XG4gICAgZm9yICh2YXIgaVNlZ21lbnQgPSAwOyBpU2VnbWVudCA8IGFyTmFtZVNlZ21lbnRzLmxlbmd0aDsgaVNlZ21lbnQrKykge1xuICAgICAgICB2YXIgc1NlZ21lbnQgPSBhck5hbWVTZWdtZW50c1tpU2VnbWVudF07XG4gICAgICAgIHZhciBzSW5kZXggPSBudWxsO1xuICAgICAgICAvL1N1cHBvcnQgZm9yIGFycmF5IGFjY2Vzcy4gaS5lLiBcIm9iai5wcm9wMVswXS5wcm9wMlwiXG4gICAgICAgIGlmIChzU2VnbWVudC5tYXRjaCgvXFxbWzAtOV0rXS8pKSB7XG4gICAgICAgICAgICBzSW5kZXggPSBOdW1iZXIoc1NlZ21lbnQubWF0Y2goL1xcW1swLTldK10vKVswXS5yZXBsYWNlKC9bXFxbXFxdXS9nLCAnJykpO1xuICAgICAgICB9XG4gICAgICAgIHNTZWdtZW50ID0gc1NlZ21lbnQuc3BsaXQoL1xcW1swLTldK10vKS5qb2luKCcnKTtcbiAgICAgICAgdmFyIHJlcyA9IChzSW5kZXggfHwgc0luZGV4ID09PSAwKSAmJiBvUmVzdWx0W3NTZWdtZW50XSA/IG9SZXN1bHRbc1NlZ21lbnRdW3NJbmRleF0gOiBvUmVzdWx0W3NTZWdtZW50XTtcbiAgICAgICAgaWYgKGNyZWF0ZU1pc3NpbmdPYmplY3RzICYmICFvUmVzdWx0W3NTZWdtZW50XSkge1xuICAgICAgICAgICAgb1Jlc3VsdFtzU2VnbWVudF0gPSB7fTtcbiAgICAgICAgfSBlbHNlIGlmIChjcmVhdGVNaXNzaW5nT2JqZWN0cyAmJiAhcmVzICYmIHJlcyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIG9SZXN1bHRbc1NlZ21lbnRdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlcyB8fCByZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBvUmVzdWx0ID0gcmVzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9SZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UHJvcGVydHlCeVNlcmlhbGl6ZWROYW1lKG86IE9iamVjdCwgbmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgdmFyIGFyTmFtZVNlZ21lbnRzID0gbmFtZS5zcGxpdCgnLicpO1xuICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBhck5hbWVTZWdtZW50cy5wb3AoKTtcbiAgICBnZXRQcm9wZXJ0eUJ5U2VyaWFsaXplZE5hbWUobywgYXJOYW1lU2VnbWVudHMuam9pbignLicpLCB0cnVlKVtwcm9wZXJ0eU5hbWVdID0gdmFsdWU7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkKG9UYXJnZXQ6IE9iamVjdCwgbzogT2JqZWN0LCBkb250T3ZlcnJpZGU/OiBib29sZWFuKTogdm9pZCB7XG4gICAgZm9yICh2YXIgcCBpbiBvKSB7XG4gICAgICAgIGlmICghZG9udE92ZXJyaWRlIHx8IHR5cGVvZiBvVGFyZ2V0W3BdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgb1RhcmdldFtwXSA9IG9bcF07XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0SGFzaChvOiBhbnkpOiBzdHJpbmcge1xuICAgIHZhciBhciA9IFtdO1xuICAgIGZvciAodmFyIHAgaW4gbykge1xuICAgICAgICB2YXIgcztcblxuICAgICAgICBpZiAodHlwZW9mIG9bcF0gPT0gJ29iamVjdCcpIHMgPSBKU09OVXRpbHMuc2VyaWFsaXplKG9bcF0sIGZhbHNlKTtcbiAgICAgICAgZWxzZSBpZiAob1twXSkgcyA9IG9bcF0udG9TdHJpbmcoKTtcblxuICAgICAgICBhci5wdXNoKHAgKyAnPScgKyBzKTtcbiAgICB9XG4gICAgcmV0dXJuIGFyLnNvcnQoKS5qb2luKCcmJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0TXVybXVySGFzaChrZXk6IHN0cmluZywgc2VlZD86IG51bWJlcikge1xuICAgIGlmICghc2VlZCkgc2VlZCA9IDA7XG4gICAgdmFyIHJlbWFpbmRlciwgYnl0ZXMsIGgxLCBoMWIsIGMxLCBjMWIsIGMyLCBjMmIsIGsxLCBpO1xuXG4gICAgcmVtYWluZGVyID0ga2V5Lmxlbmd0aCAmIDM7IC8vIGtleS5sZW5ndGggJSA0XG4gICAgYnl0ZXMgPSBrZXkubGVuZ3RoIC0gcmVtYWluZGVyO1xuICAgIGgxID0gc2VlZDtcbiAgICBjMSA9IDB4Y2M5ZTJkNTE7XG4gICAgYzIgPSAweDFiODczNTkzO1xuICAgIGkgPSAwO1xuXG4gICAgd2hpbGUgKGkgPCBieXRlcykge1xuICAgICAgICBrMSA9IChrZXkuY2hhckNvZGVBdChpKSAmIDB4ZmYpIHwgKChrZXkuY2hhckNvZGVBdCgrK2kpICYgMHhmZikgPDwgOCkgfCAoKGtleS5jaGFyQ29kZUF0KCsraSkgJiAweGZmKSA8PCAxNikgfCAoKGtleS5jaGFyQ29kZUF0KCsraSkgJiAweGZmKSA8PCAyNCk7XG4gICAgICAgICsraTtcblxuICAgICAgICBrMSA9ICgoazEgJiAweGZmZmYpICogYzEgKyAoKCgoazEgPj4+IDE2KSAqIGMxKSAmIDB4ZmZmZikgPDwgMTYpKSAmIDB4ZmZmZmZmZmY7XG4gICAgICAgIGsxID0gKGsxIDw8IDE1KSB8IChrMSA+Pj4gMTcpO1xuICAgICAgICBrMSA9ICgoazEgJiAweGZmZmYpICogYzIgKyAoKCgoazEgPj4+IDE2KSAqIGMyKSAmIDB4ZmZmZikgPDwgMTYpKSAmIDB4ZmZmZmZmZmY7XG5cbiAgICAgICAgaDEgXj0gazE7XG4gICAgICAgIGgxID0gKGgxIDw8IDEzKSB8IChoMSA+Pj4gMTkpO1xuICAgICAgICBoMWIgPSAoKGgxICYgMHhmZmZmKSAqIDUgKyAoKCgoaDEgPj4+IDE2KSAqIDUpICYgMHhmZmZmKSA8PCAxNikpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgaDEgPSAoaDFiICYgMHhmZmZmKSArIDB4NmI2NCArICgoKChoMWIgPj4+IDE2KSArIDB4ZTY1NCkgJiAweGZmZmYpIDw8IDE2KTtcbiAgICB9XG5cbiAgICBrMSA9IDA7XG5cbiAgICBzd2l0Y2ggKHJlbWFpbmRlcikge1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBrMSBePSAoa2V5LmNoYXJDb2RlQXQoaSArIDIpICYgMHhmZikgPDwgMTY7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGsxIF49IChrZXkuY2hhckNvZGVBdChpICsgMSkgJiAweGZmKSA8PCA4O1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBrMSBePSBrZXkuY2hhckNvZGVBdChpKSAmIDB4ZmY7XG5cbiAgICAgICAgICAgIGsxID0gKChrMSAmIDB4ZmZmZikgKiBjMSArICgoKChrMSA+Pj4gMTYpICogYzEpICYgMHhmZmZmKSA8PCAxNikpICYgMHhmZmZmZmZmZjtcbiAgICAgICAgICAgIGsxID0gKGsxIDw8IDE1KSB8IChrMSA+Pj4gMTcpO1xuICAgICAgICAgICAgazEgPSAoKGsxICYgMHhmZmZmKSAqIGMyICsgKCgoKGsxID4+PiAxNikgKiBjMikgJiAweGZmZmYpIDw8IDE2KSkgJiAweGZmZmZmZmZmO1xuICAgICAgICAgICAgaDEgXj0gazE7XG4gICAgfVxuXG4gICAgaDEgXj0ga2V5Lmxlbmd0aDtcblxuICAgIGgxIF49IGgxID4+PiAxNjtcbiAgICBoMSA9ICgoaDEgJiAweGZmZmYpICogMHg4NWViY2E2YiArICgoKChoMSA+Pj4gMTYpICogMHg4NWViY2E2YikgJiAweGZmZmYpIDw8IDE2KSkgJiAweGZmZmZmZmZmO1xuICAgIGgxIF49IGgxID4+PiAxMztcbiAgICBoMSA9ICgoaDEgJiAweGZmZmYpICogMHhjMmIyYWUzNSArICgoKChoMSA+Pj4gMTYpICogMHhjMmIyYWUzNSkgJiAweGZmZmYpIDw8IDE2KSkgJiAweGZmZmZmZmZmO1xuICAgIGgxIF49IGgxID4+PiAxNjtcblxuICAgIHJldHVybiBoMSA+Pj4gMDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShvYmo6IGFueSwgZGVlcENvcHk/OiBib29sZWFuLCBpZ25vcmVGdW5jdGlvbnM/OiBib29sZWFuLCBtYXhMZXZlbDogbnVtYmVyID0gMjAsIGxldmVsOiBudW1iZXIgPSAwLCBpZ25vcmVDb250ZXh0PzogYm9vbGVhbik6IGFueSB7XG4gICAgaWYgKG9iaiA9PT0gd2luZG93KSByZXR1cm4gd2luZG93OyAvLyBkbyBub3QgY2xvbmUgdGhlIHdpbmRvdyBvYmplY3RcbiAgICBpZiAobGV2ZWwgPiBtYXhMZXZlbCkgcmV0dXJuIG51bGw7IC8vIFRvbyBkZWVwXG4gICAgaWYgKHR5cGVvZiBvYmogPT0gJ3VuZGVmaW5lZCcgfHwgb2JqID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFdlYlNES1RvZ2dsZXMuaXNPbigncmVtb3ZlVW5kZWZpbmVkUHJvcGVydGllcycpID8gb2JqIDogbnVsbDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyAmJiBpZ25vcmVGdW5jdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIGlmIChvYmouY29uc3RydWN0b3IgPT0gQXJyYXkpIHtcbiAgICAgICAgdmFyIGFyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIWlnbm9yZUZ1bmN0aW9ucyB8fCB0eXBlb2Ygb2JqW2ldICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVlcENvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJbaV0gPSBjbG9uZShvYmpbaV0sIGRlZXBDb3B5LCBpZ25vcmVGdW5jdGlvbnMsIG1heExldmVsLCBsZXZlbCArIDEsIGlnbm9yZUNvbnRleHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFyW2ldID0gb2JqW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXI7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09ICdvYmplY3QnKSB7XG4gICAgICAgIHZhciBvID0ge307XG4gICAgICAgIGZvciAodmFyIHAgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoaWdub3JlQ29udGV4dCAmJiBwID09ICdjb250ZXh0JykgY29udGludWU7XG4gICAgICAgICAgICBpZiAoIWlnbm9yZUZ1bmN0aW9ucyB8fCB0eXBlb2Ygb2JqW3BdICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVlcENvcHkpIHtcbiAgICAgICAgICAgICAgICAgICAgb1twXSA9IGNsb25lKG9ialtwXSwgZGVlcENvcHksIGlnbm9yZUZ1bmN0aW9ucywgbWF4TGV2ZWwsIGxldmVsICsgMSwgaWdub3JlQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb1twXSA9IG9ialtwXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG87XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2UoYXJnczogT2JqZWN0W10sIGlzRGVlcE1lcmdlPzogYm9vbGVhbik6IE9iamVjdDtcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZShhcmdzOiBhbnlbXSwgaXNEZWVwTWVyZ2U/OiBib29sZWFuKTogT2JqZWN0IHtcbiAgICB2YXIgbyA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoYXJnc1tpXSAmJiBhcmdzW2ldLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCBhcmdzW2ldLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBhcmdzW2ldW3VdKSB7XG4gICAgICAgICAgICAgICAgICAgIG9bcF0gPSBhcmdzW2ldW3VdW3BdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE1lcmdlIG9iamVjdHMuXG4gICAgICAgICAgICBpZiAoIWlzRGVlcE1lcmdlKSB7XG4gICAgICAgICAgICAgICAgLy8gRmxhdCBtZXJnZS5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBwIGluIGFyZ3NbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgb1twXSA9IGFyZ3NbaV1bcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBEZWVwIG1lcmdlLlxuICAgICAgICAgICAgICAgIGZvciAodmFyIHAgaW4gYXJnc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICAvL3dlIG92ZXJyaWRlIHByaW1pdGl2ZSAvIGFycmF5XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb1twXSAhPT0gJ29iamVjdCcgfHwgb1twXSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvW3BdID0gYXJnc1tpXVtwXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9bcF0gPSBtZXJnZShbb1twXSwgYXJnc1tpXVtwXV0sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHVuZmxhdHRlbihkYXRhOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IGJvb2xlYW4gfSk6IE9iamVjdCB7XG4gICAgaWYgKE9iamVjdChkYXRhKSAhPT0gZGF0YSB8fCBBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGxldCBwIGluIGRhdGEpIHtcbiAgICAgICAgbGV0IGN1ciA9IHJlc3VsdDtcbiAgICAgICAgbGV0IHByb3AgPSAnJztcbiAgICAgICAgY29uc3QgcGFydHMgPSBwLnJlcGxhY2UoL1xcWyhbMC05XSldLywgJy4kMScpLnNwbGl0KCcuJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGlkeCA9ICFpc05hTihOdW1iZXIocGFydHNbaV0pKTtcbiAgICAgICAgICAgIGN1ciA9IGN1cltwcm9wXSB8fCAoY3VyW3Byb3BdID0gaWR4ID8gW10gOiB7fSk7XG4gICAgICAgICAgICBwcm9wID0gcGFydHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgY3VyW3Byb3BdID0gZGF0YVtwXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFsnJ10gfHwge307XG59XG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbihkYXRhOiBhbnksIHdpdGhCcmFja2V0ID0gZmFsc2UpOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IGJvb2xlYW4gfSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZnVuY3Rpb24gcmVjdXJzZShjdXI6IGFueSwgcHJvcDogc3RyaW5nKSB7XG4gICAgICAgIGlmIChPYmplY3QoY3VyKSAhPT0gY3VyKSB7XG4gICAgICAgICAgICByZXN1bHRbcHJvcF0gPSBjdXI7XG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShjdXIpKSB7XG4gICAgICAgICAgICBjb25zdCBsID0gY3VyLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5lc3RlZFByb3BlcnR5ID0gd2l0aEJyYWNrZXQgPyBgJHtwcm9wfVske2l9XWAgOiBgJHtwcm9wfS4ke2l9YDtcbiAgICAgICAgICAgICAgICByZWN1cnNlKGN1cltpXSwgcHJvcCA/IG5lc3RlZFByb3BlcnR5IDogU3RyaW5nKGkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Byb3BdID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgaXNFbXB0eSA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgaW4gY3VyKSB7XG4gICAgICAgICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHJlY3Vyc2UoY3VyW3BdLCBwcm9wID8gYCR7cHJvcH0uJHtwfWAgOiBwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0VtcHR5ICYmIHByb3AgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Byb3BdID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVjdXJzZShkYXRhLCAnJyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0UHJvcGVydGllcyhzcmM6IGFueSwgZGVzdD86IGFueSwgc2NoZW1hPzogU3RyaW5nKTogT2JqZWN0IHtcbiAgICBpZiAoc3JjID09IG51bGwpIHJldHVybjtcbiAgICBpZiAoZGVzdCA9PSBudWxsKSBkZXN0ID0ge307XG4gICAgaWYgKHNyYy5jb25zdHJ1Y3RvciA9PSBBcnJheSkge1xuICAgICAgICBmb3IgKHZhciBpU3JjID0gMDsgaVNyYyA8IHNyYy5sZW5ndGg7IGlTcmMrKykge1xuICAgICAgICAgICAgZXh0cmFjdFByb3BlcnRpZXMoc3JjW2lTcmNdLCBkZXN0LCBzY2hlbWEpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChzY2hlbWEpIHtcbiAgICAgICAgdmFyIGFyU2NoZW1hID0gc2NoZW1hLnNwbGl0KCd8Jyk7XG4gICAgICAgIHZhciBzcmNMQ2FzZSA9IHt9O1xuICAgICAgICBmb3IgKHZhciBmaWVsZE5hbWUgaW4gc3JjKSB7XG4gICAgICAgICAgICBzcmNMQ2FzZVtmaWVsZE5hbWUudG9Mb3dlckNhc2UoKV0gPSAxO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJTY2hlbWEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBmaWVsZE5hbWUyID0gYXJTY2hlbWFbaV07XG4gICAgICAgICAgICBpZiAoc3JjTENhc2VbZmllbGROYW1lMi50b0xvd2VyQ2FzZSgpXSkgZGVzdFtmaWVsZE5hbWUyXSA9IHNyY1tmaWVsZE5hbWUyXTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGRlc3QgPSBjbG9uZShzcmMsIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59XG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdFByb3BlcnR5KHNyYzogYW55LCBwYXJhbU5hbWU6IHN0cmluZyk6IGFueSB7XG4gICAgdmFyIHBhcmFtcztcbiAgICByZXR1cm4gZXh0cmFjdFByb3BlcnRpZXMoc3JjLCBwYXJhbXMsIHBhcmFtTmFtZSlbcGFyYW1OYW1lXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVRvT2JqZWN0KHN0cjogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFyc2VkVmFsID0gd2luZG93WydKU09OJ10ucGFyc2Uoc3RyKTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJzZWRWYWwgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWRWYWw7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcm9wZXJ0aWVzUHJlZml4KG9iajogT2JqZWN0ID0ge30sIHByZWZpeDogc3RyaW5nIHwgUmVnRXhwID0gJycpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoKGFjYywgY3VycikgPT4gKE9iamVjdC5hc3NpZ24oYWNjLCB7W2N1cnIucmVwbGFjZShwcmVmaXgsJycpXTogb2JqW2N1cnJdfSkpLHt9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJlZml4VG9Qcm9wZXJ0aWVzKG9iajogT2JqZWN0ID0ge30sIHByZWZpeDogc3RyaW5nID0gJycpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG4gICAgICAgIGlmIChrZXkuaW5kZXhPZihwcmVmaXgpICE9PSAwKSB7XG4gICAgICAgICAgICBhY2NbYCR7cHJlZml4fSR7a2V5fWBdID0gb2JqW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IG9ialtrZXldO1xuICAgICAgICB9XG4gICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVPYmplY3RLZXlzVG9Mb3dlckNhc2Uob2JqZWN0OiBPYmplY3QpOiBPYmplY3Qge1xuICAgIC8vIE5vcm1hbGl6ZSBhbGwga2V5cyB0byBsb3dlcmNhc2UgaW4gYWRkaXRpb24gdG8gdGhlaXIgb3JpZ2luYWwgY2FzaW5nLlxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICBvYmplY3Rba2V5LnRvTG93ZXJDYXNlKCldID0gb2JqZWN0W2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZU9iamVjdEtleXMob2JqOiBPYmplY3QpOiBPYmplY3Qge1xuICAgIGxldCBkZWNvZGVPYmplY3RLZXlzID0ge307XG4gICAgZm9yIChsZXQga2V5IGluIG9iaikge1xuICAgICAgICBsZXQgZGVjb2RlZEtleSA9IGtleTtcbiAgICAgICAgd2hpbGUgKGRlY29kZWRLZXkuaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgICAgICAgICAgZGVjb2RlZEtleSA9IGRlY29kZVVSSUNvbXBvbmVudChkZWNvZGVkS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBkZWNvZGVPYmplY3RLZXlzW2RlY29kZWRLZXldID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiBkZWNvZGVPYmplY3RLZXlzO1xufVxuIiwiaW1wb3J0IHtHaWd5YVJlc3BvbnNlfSBmcm9tICdnaWd5YSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9taXNpZnk8VCBleHRlbmRzIEdpZ3lhUmVzcG9uc2U+KG1ldGhvZDogRnVuY3Rpb24sIHBhcmFtczogYW55ID0ge30pOiBQcm9taXNlPFQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VD4oKHJlc29sdmUpID0+IHtcbiAgICAgICBtZXRob2Qoe1xuICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgIGNhbGxiYWNrOiByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgfVxuICAgICAgIH0pXG4gICAgfSk7XG59IiwiXG52YXIgX3EgPSB7fTtcbmV4cG9ydCBmdW5jdGlvbiBfc2VydmljZXNTdGF0dXMoKSB7XG4gICAgdmFyIHNlcnZpY2VzID0ge307XG5cbiAgICBmb3IgKHZhciBzZXJ2aWNlIGluIF9xKSB7XG4gICAgICAgIHZhciBhY3RpdmUgPSBpc0FjdGl2ZShzZXJ2aWNlKTtcblxuICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICBzZXJ2aWNlc1tzZXJ2aWNlXSA9IHtcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgd2FpdGluZ0ZvcjogX3Fbc2VydmljZV0uaWRzLFxuICAgICAgICAgICAgICAgIHF1ZXVlZENvdW50OiBfcVtzZXJ2aWNlXS5xLmxlbmd0aCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXJ2aWNlc1tzZXJ2aWNlXSA9IHtcbiAgICAgICAgICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZXJ2aWNlcztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0FjdGl2ZShzZXJ2aWNlOiBzdHJpbmcpIHtcbiAgICBpZiAoIV9xW3NlcnZpY2VdKSByZXR1cm4gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpZCBpbiBfcVtzZXJ2aWNlXS5pZHMpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWxlYXNlKGlkOiBzdHJpbmcsIHNlcnZpY2U6IHN0cmluZyk6IHZvaWQge1xuICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgcmVsZWFzaW5nICR7c2VydmljZX0gcXVldWUgYnkgJHtpZH1gKTtcbiAgICBpZiAoIV9xW3NlcnZpY2VdKSByZXR1cm47XG4gICAgZGVsZXRlIF9xW3NlcnZpY2VdLmlkc1tpZF07XG4gICAgaWYgKCFpc0FjdGl2ZShzZXJ2aWNlKSkge1xuICAgICAgICB2YXIgcSA9IF9xW3NlcnZpY2VdLnE7XG4gICAgICAgIF9xW3NlcnZpY2VdLnEgPSBbXTtcbiAgICAgICAgd2hpbGUgKHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIG8gPSBxLnNwbGljZSgwLCAxKVswXTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgby5mdW5jLmFwcGx5KHRoaXMsIG8uYXJncyk7XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSA9PSAnb2JqZWN0JyAmJiBjb25zb2xlLmxvZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2lneWE6IEV4Y2VwdGlvbiB3aGlsZSBpbnZva2luZyBxdWV1ZWQgbWV0aG9kICgnICsgc2VydmljZSArICc6ICcgKyBpZCArICcpJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQWN0aXZlKHNlcnZpY2UpKSB7XG4gICAgICAgICAgICAgICAgLy9xdWV1ZSBiZWNhbWUgaW5hY3RpdmVcbiAgICAgICAgICAgICAgICBfcVtzZXJ2aWNlXS5xID0gcTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBob2xkKGlkOiBzdHJpbmcsIHNlcnZpY2U6IHN0cmluZyk6IHZvaWQge1xuICAgIGdpZ3lhLmxvZ2dlci5kZWJ1ZyhgbG9ja2luZyBxdWV1ZSAke3NlcnZpY2V9IGJ5ICR7aWR9YCk7XG5cbiAgICBpZiAoIV9xW3NlcnZpY2VdKSBfcVtzZXJ2aWNlXSA9IHsgcTogW10sIGlkczoge30gfTtcbiAgICBfcVtzZXJ2aWNlXS5pZHNbaWRdID0gdHJ1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yKHNlcnZpY2U6IHN0cmluZywgZm5jOiBGdW5jdGlvbiwgYXJnczogYW55W10pOiB2b2lkO1xuZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3Ioc2VydmljZTogc3RyaW5nLCBmbmM6IEZ1bmN0aW9uLCBhcmdzOiBJQXJndW1lbnRzKTogdm9pZDtcbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yKHNlcnZpY2U6IHN0cmluZywgZm5jOiBGdW5jdGlvbiwgYXJnczogYW55KTogdm9pZCB7XG4gICAgaWYgKCFfcVtzZXJ2aWNlXSkgX3Fbc2VydmljZV0gPSB7IHE6IFtdLCBpZHM6IHt9IH07XG4gICAgX3Fbc2VydmljZV0ucS5wdXNoKHsgZnVuYzogZm5jLCBhcmdzOiBhcmdzIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXVlRm9yRXhlY3V0aW9uKHNlcnZpY2U6IHN0cmluZywgZnVuYzogRnVuY3Rpb24sIGFyZ3M/OiBhbnlbXSkge1xuICAgIGFyZ3MgPSBhcmdzIHx8IFtdO1xuICAgIGlmIChpc0FjdGl2ZShzZXJ2aWNlKSkge1xuICAgICAgICB3YWl0Rm9yKHNlcnZpY2UsIGZ1bmMsIGFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgSlNPTlV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9KU09OJztcbmltcG9ydCAqIGFzIHF1ZXVlVXRpbHMgZnJvbSAnc3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL3F1ZXVlJztcbmltcG9ydCB7RmxhZ1NlcnZpY2V9IGZyb20gJy4uL1NlcnZpY2VzL0ZsYWdTZXJ2aWNlJztcbnZhciBzZXNzaW9uU3RvcmFnZUVuYWJsZWQ7XG50cnkge1xuICAgIHNlc3Npb25TdG9yYWdlRW5hYmxlZCA9IEJvb2xlYW4od2luZG93LnNlc3Npb25TdG9yYWdlKTsgLy8gd2hlbiAzcGMgYmxvY2tlZCwgY2hyb21lIHRocm93cyB3aGVuIHRyeWluZyB0byBhY2Nlc3Mgc2Vzc2lvbiBzdG9yYWdlLlxufSBjYXRjaCAoZXgpIHtcbiAgICBzZXNzaW9uU3RvcmFnZUVuYWJsZWQgPSBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXQoa2V5OiBzdHJpbmcsIHJlc3BvbnNlOiBPYmplY3QpIHtcbiAgICBpZiAoIXNlc3Npb25TdG9yYWdlRW5hYmxlZCkgcmV0dXJuO1xuICAgIHZhciBvR2lneWE7XG4gICAgdHJ5IHtcbiAgICAgICAgb0dpZ3lhID0gSlNPTlV0aWxzLmRlc2VyaWFsaXplKHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdnaWd5YUNhY2hlJykpO1xuXG4gICAgICAgIGlmIChyZXNwb25zZSA9PSBudWxsICYmIG9HaWd5YVtrZXldKSB7XG4gICAgICAgICAgICBkZWxldGUgb0dpZ3lhW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICBvR2lneWFba2V5XSA9IHsgcmVzcG9uc2UsIHRpbWUgfTtcbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZignZ2lnX29pZGNDb250ZXh0XycpID49IDApIHtcbiAgICAgICAgICAgICAgICBnaWd5YS5sb2dnZXIucmVwb3J0KCdvaWRjIHN0b3JhZ2UgbG9ncyAtIHNldCcsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb0dpZ3lhW2tleV1cbiAgICAgICAgICAgICAgICB9LCBmYWxzZSwgRmxhZ1NlcnZpY2UuZm9yY2VFcnJvclJlcG9ydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZ2lneWFDYWNoZScsIEpTT05VdGlscy5zZXJpYWxpemUob0dpZ3lhKSk7XG4gICAgfSBjYXRjaCAoZXgpIHt9XG5cbiAgICBxdWV1ZVV0aWxzLnJlbGVhc2UoJ2NhY2hlJywgJ2NhY2hlXycgKyBrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldChrZXk6IHN0cmluZywgY2FjaGVUaW1lb3V0OiBudW1iZXIgPSAtMSk6IE9iamVjdCB7XG4gICAgaWYgKCFzZXNzaW9uU3RvcmFnZUVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFxdWV1ZVV0aWxzLmlzQWN0aXZlKCdjYWNoZV8nICsga2V5KSkge1xuICAgICAgICAgICAgY29uc3Qgc0dpZ3lhQ2FjaGUgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZ2lneWFDYWNoZScpO1xuICAgICAgICAgICAgY29uc3Qgb0dpZ3lhID0gSlNPTlV0aWxzLmRlc2VyaWFsaXplKHNHaWd5YUNhY2hlKTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IG9HaWd5YVtrZXldO1xuICAgICAgICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlVGltZW91dCA8IDAgfHwgY2FjaGVUaW1lb3V0ICsgY2FjaGVkLnRpbWUgPiBjdXJyZW50VGltZSkge1xuICAgICAgICAgICAgICAgICAgICAvL2NhY2hlZFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkLnJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZignZ2lnX29pZGNDb250ZXh0XycpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci5yZXBvcnQoJ29pZGMgc3RvcmFnZSBsb2dzIC0gZ2V0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb0dpZ3lhW2tleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVUaW1lOiBjYWNoZWQudGltZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZmFsc2UsIEZsYWdTZXJ2aWNlLmZvcmNlRXJyb3JSZXBvcnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vZXhwaXJlZFxuICAgICAgICAgICAgICAgICAgICByZW1vdmUoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWNhY2hlZCkge1xuICAgICAgICAgICAgICAgIC8vbm90IGNhY2hlZCAoZmlyc3QgdGltZSlcbiAgICAgICAgICAgICAgICBxdWV1ZVV0aWxzLmhvbGQoJ2NhY2hlJywgJ2NhY2hlXycgKyBrZXkpOyAvL3NvIHRoYXQgZnV0dXJlIHJlcXVlc3RzIHdpbGwgd2FpdCBmb3IgdGhlIGZpcnN0IG9uZSdzIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy93YWl0IGZvciBmaXJzdCByZXNwb25zZVxuICAgICAgICAgICAgcXVldWVVdGlscy53YWl0Rm9yKCdjYWNoZV8nICsga2V5LCBnZXQsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGV4KSB7fVxuICAgIHJldHVybiBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIHNldChrZXksIG51bGwpO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIHRyaW0oczogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcy5yZXBsYWNlKC9eXFxzKihcXFMqKC4qXFxTKT8pXFxzKiQvLCAnJDEnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoczogc3RyaW5nLCAuLi5yZXN0OiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHNbaSArIDFdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHMgPSBzLnNwbGl0KCd7JyArIGkgKyAnfScpLmpvaW4oYXJndW1lbnRzW2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5leHBvcnQgZnVuY3Rpb24gY2FwaXRhbGl6ZShzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBzLnN1YnN0cmluZygwLCAxKS50b1VwcGVyQ2FzZSgpICsgcy5zdWJzdHJpbmcoMSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZW5kc1dpdGgoczogc3RyaW5nLCBzdWZmaXg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzLmluZGV4T2Yoc3VmZml4LCBzLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGgpICE9PSAtMTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFxcW1xcXVxcL1xcXFxdKS9nLCAnXFxcXCQxJyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUFsbChzdHI6IHN0cmluZywgZmluZDogc3RyaW5nLCByZXBsYWNlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghZmluZCkgcmV0dXJuIHN0cjtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UobmV3IFJlZ0V4cChlc2NhcGVSZWdFeHAoZmluZCksICdnJyksIHJlcGxhY2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VDb21tYVNlcGFyYXRlZFZhbHVlcyhzdHIxOiBzdHJpbmcgPSAnJywgc3RyMjogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIGNvbnN0IGFyciA9IHN0cjEuY29uY2F0KCcsJywgc3RyMikuc3BsaXQoJywnKTtcbiAgICByZXR1cm4gZ2lneWEudXRpbHMuYXJyYXkuZ2V0VW5pcXVlVmFsdWVzKGFycikuZmlsdGVyKHggPT4geCkuam9pbignLCcpO1xufVxuIiwiaW1wb3J0ICogYXMgb2JqZWN0VXRpbHMgZnJvbSAnLi9vYmplY3QnO1xuXG5jbGFzcyBXZWJTREtUb2dnbGVzIHtcbiAgICBoYXMoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLl90b2dnbGVzW2tleV0gIT0gJ3VuZGVmaW5lZCc7XG4gICAgfVxuXG4gICAgZ2V0PFQgPSBhbnk+KGtleTogc3RyaW5nKTogVCB7XG4gICAgICAgIHJldHVybiB0aGlzLl90b2dnbGVzW2tleV0gYXMgVDtcbiAgICB9XG5cbiAgICBpc09uKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhcyhrZXkpICYmIHRoaXMuZ2V0KGtleSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgX3RvZ2dsZXMoKSB7XG4gICAgICAgIHJldHVybiBvYmplY3RVdGlscy5tZXJnZShbXG4gICAgICAgICAgICB0aGlzLl9nbG9iYWxDb25mVG9nZ2xlcyxcbiAgICAgICAgICAgIHRoaXMuX3dlYlNka0NvbmZpZ1RvZ2dsZXNcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXQgX2dsb2JhbENvbmZUb2dnbGVzKCkge1xuICAgICAgICByZXR1cm4gZ2lneWEudGhpc1NjcmlwdD8uZ2xvYmFsQ29uZj8udG9nZ2xlcyB8fCB7fTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBfd2ViU2RrQ29uZmlnVG9nZ2xlcygpIHtcbiAgICAgICAgY29uc3QgdG9nZ2xlcyA9IGdpZ3lhLl8/LmNvbmZpZz8udG9nZ2xlcyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRvZ2dsZXMpLnJlZHVjZSgobmV3VG9nZ2xlcywga2V5KSA9PiB7XG4gICAgICAgICAgICBuZXdUb2dnbGVzW2tleV0gPSB0b2dnbGVzW2tleV0gPT09ICdvbic7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXdUb2dnbGVzO1xuICAgICAgICB9LCB7fSk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgbmV3IFdlYlNES1RvZ2dsZXMoKTtcbiIsImV4cG9ydCBmdW5jdGlvbiBpc0V4cGxpY2l0VHJ1ZSh2YWw6IGFueSk6IGJvb2xlYW4ge1xuICAgIHZhciBsYyA9ICgnJyArIHZhbCkudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbGMgPT0gJ3RydWUnIHx8IGxjID09ICcxJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0V4cGxpY2l0RmFsc2UodmFsOiBhbnkpOiBib29sZWFuIHtcbiAgICB2YXIgbGMgPSAoJycgKyB2YWwpLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGxjID09ICdmYWxzZScgfHwgbGMgPT0gJzAnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTGF0ZXJUaGFuTm93KGV4cGlyYXRpb25UaW1lOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZXhwaXJhdGlvblRpbWUgPiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhbGxEZWZpbmVkT3JBbGxVbmRlZmluZWQoLi4uYXJncykge1xuICAgIGNvbnN0IGFueVVuZGVmaW5lZCA9IGFyZ3Muc29tZSh4ID0+IHR5cGVvZiB4ID09PSAndW5kZWZpbmVkJyk7XG4gICAgY29uc3QgYW55RGVmaW5lZCA9IGFyZ3Muc29tZSh4ID0+IHR5cGVvZiB4ICE9PSAndW5kZWZpbmVkJyk7XG4gICAgcmV0dXJuIChhbnlEZWZpbmVkICYmICFhbnlVbmRlZmluZWQpIHx8ICghYW55RGVmaW5lZCAmJiBhbnlVbmRlZmluZWQpO1xufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGdldFNjcm9sbCgpOiB7IHRvcDogbnVtYmVyOyBsZWZ0OiBudW1iZXIgfSB7XG4gICAgdmFyIHNjck9mWCA9IDAsXG4gICAgICAgIHNjck9mWSA9IDA7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cucGFnZVlPZmZzZXQgPT0gJ251bWJlcicpIHtcbiAgICAgICAgc2NyT2ZZID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgICAgICBzY3JPZlggPSB3aW5kb3cucGFnZVhPZmZzZXQ7XG4gICAgfSBlbHNlIGlmIChkb2N1bWVudC5ib2R5ICYmIChkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApKSB7XG4gICAgICAgIHNjck9mWSA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgICAgICBzY3JPZlggPSBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XG4gICAgfSBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApKSB7XG4gICAgICAgIHNjck9mWSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICAgIHNjck9mWCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgIH1cbiAgICByZXR1cm4geyBsZWZ0OiBzY3JPZlgsIHRvcDogc2NyT2ZZIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNpemUoKTogeyB3OiBudW1iZXI7IGg6IG51bWJlciB9IHtcbiAgICB2YXIgZGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgdmFyIGRiID0gZG9jdW1lbnQuYm9keTtcblxuICAgIHZhciBoID0gZGUuY2xpZW50SGVpZ2h0O1xuICAgIGlmIChoID09IDApIGggPSBkYi5jbGllbnRIZWlnaHQ7XG4gICAgdmFyIHcgPSBkZS5jbGllbnRXaWR0aDtcbiAgICBpZiAodyA9PSAwKSB3ID0gZGIuY2xpZW50V2lkdGg7XG4gICAgcmV0dXJuIHsgdzogdywgaDogaCB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE9yaWVudGF0aW9uKCk6IG51bWJlciB7XG4gICAgdmFyIG9yaWVudGF0aW9uID0gcGFyc2VJbnQoKHdpbmRvd1snb3JpZW50YXRpb24nXSBhcyBzdHJpbmcpIHx8ICcwJyk7XG4gICAgaWYgKG9yaWVudGF0aW9uIDwgMCkgb3JpZW50YXRpb24gKz0gMzYwO1xuXG4gICAgcmV0dXJuIG9yaWVudGF0aW9uO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE91dGVyU2l6ZSgpOiB7IHc6IG51bWJlcjsgaDogbnVtYmVyIH0ge1xuICAgIHZhciBoO1xuICAgIHZhciB3O1xuXG4gICAgdmFyIGRlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIHZhciBkYiA9IGRvY3VtZW50LmJvZHk7XG5cbiAgICBpZiAod2luZG93Lm91dGVySGVpZ2h0KSB7XG4gICAgICAgIGggPSB3aW5kb3cub3V0ZXJIZWlnaHQ7XG4gICAgICAgIHcgPSB3aW5kb3cub3V0ZXJXaWR0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBoID0gZGUuY2xpZW50SGVpZ2h0O1xuICAgICAgICBpZiAoaCA9PSAwKSBoID0gZGIuY2xpZW50SGVpZ2h0O1xuICAgICAgICB3ID0gZGUuY2xpZW50V2lkdGg7XG4gICAgICAgIGlmICh3ID09IDApIHcgPSBkYi5jbGllbnRXaWR0aDtcbiAgICB9XG4gICAgcmV0dXJuIHsgdzogdywgaDogaCB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldElubmVyU2l6ZSgpOiB7IHc6IG51bWJlcjsgaDogbnVtYmVyIH0ge1xuICAgIHZhciBoO1xuICAgIHZhciB3O1xuXG4gICAgdmFyIGRlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIHZhciBkYiA9IGRvY3VtZW50LmJvZHk7XG5cbiAgICBpZiAod2luZG93LmlubmVySGVpZ2h0KSB7XG4gICAgICAgIGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHcgPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBoID0gZGUuY2xpZW50SGVpZ2h0O1xuICAgICAgICBpZiAoaCA9PSAwKSBoID0gZGIuY2xpZW50SGVpZ2h0O1xuICAgICAgICB3ID0gZGUuY2xpZW50V2lkdGg7XG4gICAgICAgIGlmICh3ID09IDApIHcgPSBkYi5jbGllbnRXaWR0aDtcbiAgICB9XG4gICAgcmV0dXJuIHsgdzogdywgaDogaCB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE1pZGRsZUNlbnRlcigpOiB7IHRvcDogbnVtYmVyOyBsZWZ0OiBudW1iZXIgfSB7XG4gICAgdmFyIHNjcm9sbCA9IGdldFNjcm9sbCgpO1xuICAgIHZhciBzaXplID0gZ2V0SW5uZXJTaXplKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiBzY3JvbGwudG9wICsgTWF0aC5mbG9vcihzaXplLmggLyAyKSxcbiAgICAgICAgbGVmdDogc2Nyb2xsLmxlZnQgKyBNYXRoLmZsb29yKHNpemUudyAvIDIpLFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaXNSZWN0SG9yaXpvbnRhbGx5VmlzaWJsZShyZWN0OiB7IHRvcDogbnVtYmVyOyBib3R0b206IG51bWJlcjsgbGVmdDogbnVtYmVyOyByaWdodDogbnVtYmVyIH0pIHtcbiAgICB2YXIgc2Nyb2xsID0gZ2V0U2Nyb2xsKCk7XG4gICAgdmFyIHNpemUgPSBnZXRJbm5lclNpemUoKTtcbiAgICByZXR1cm4gcmVjdC5sZWZ0ID49IHNjcm9sbC5sZWZ0ICYmIHJlY3QucmlnaHQgPD0gc2Nyb2xsLmxlZnQgKyBzaXplLnc7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNSZWN0RnVsbHlWaXNpYmxlKHJlY3Q6IHsgdG9wOiBudW1iZXI7IGJvdHRvbTogbnVtYmVyOyBsZWZ0OiBudW1iZXI7IHJpZ2h0OiBudW1iZXIgfSkge1xuICAgIHZhciBzY3JvbGwgPSBnZXRTY3JvbGwoKTtcbiAgICB2YXIgc2l6ZSA9IGdldElubmVyU2l6ZSgpO1xuICAgIHJldHVybiByZWN0LnRvcCA+PSBzY3JvbGwudG9wICYmIHJlY3QuYm90dG9tIDw9IHNjcm9sbC50b3AgKyBzaXplLmggJiYgcmVjdC5sZWZ0ID49IHNjcm9sbC5sZWZ0ICYmIHJlY3QucmlnaHQgPD0gc2Nyb2xsLmxlZnQgKyBzaXplLnc7XG59XG5leHBvcnQgZnVuY3Rpb24gc2Nyb2xsSW50b1ZpZXcoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnNjcm9sbEludG9WaWV3KSB7XG4gICAgICAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICB9XG59XG4iLCJcbmxldCBzZWxlY3RlZENkbkhvc3RzSW5kZXggPSAwO1xuZXhwb3J0IGNvbnN0IENETl9IT1NUUyA9IHtcbiAgICBodHRwOiBbJ2Nkbi5naWd5YS5jb20nLCAnY2RuMS5naWd5YS5jb20nLCAnY2RuMi5naWd5YS5jb20nLCAnY2RuMy5naWd5YS5jb20nXSxcbiAgICBodHRwczogWydjZG5zLmdpZ3lhLmNvbScsICdjZG5zMS5naWd5YS5jb20nLCAnY2RuczIuZ2lneWEuY29tJywgJ2NkbnMzLmdpZ3lhLmNvbSddLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRDZG5SZXNvdXJjZShwYXRoPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBnaWd5YS50aGlzU2NyaXB0IG1heSBub3QgZXhpc3QgaWYgbG9hZGVkIGZvciBzc29PcmlnLlxuICAgIGxldCBiYXNlRG9tYWluID0gZ2lneWEudGhpc1NjcmlwdD8uYmFzZURvbWFpbiA/PyAnJztcbiAgICBjb25zdCBwcm90b2NvbCA9IGdpZ3lhLnRoaXNTY3JpcHQ/LnByb3RvY29sID8/ICdodHRwcyc7XG5cbiAgICAvLyBJZiBubyBiYXNlIGRvbWFpbiBvciBpZiBiYXNlIGRvbWFpbiBlbmRzIHdpdGggLmdpZ3lhLmNvbSwgdXNlIEdpZ3lhIENETi5cbiAgICAvLyBPdGhlcndpc2UgdXNlIHRoZSBiYXNlIGRvbWFpbi5cbiAgICBpZiAoIWJhc2VEb21haW4gfHwgL2NkbnM/XFwuZ2lneWFcXC5jb20kLy50ZXN0KGJhc2VEb21haW4pKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkU2NoZW1hUmVwb3NpdG9yeSA9IENETl9IT1NUU1twcm90b2NvbF07XG4gICAgICAgIGlmIChzZWxlY3RlZFNjaGVtYVJlcG9zaXRvcnkubGVuZ3RoIDw9IHNlbGVjdGVkQ2RuSG9zdHNJbmRleCkge1xuICAgICAgICAgICAgc2VsZWN0ZWRDZG5Ib3N0c0luZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBiYXNlRG9tYWluID0gc2VsZWN0ZWRTY2hlbWFSZXBvc2l0b3J5W3NlbGVjdGVkQ2RuSG9zdHNJbmRleCsrXTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgdGhlIHBhdGggc3RhcnRzIHdpdGggXCIvXCIuXG4gICAgaWYgKHBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGguaW5kZXhPZignLycpICE9PSAwKSB7XG4gICAgICAgICAgICBwYXRoID0gJy8nICsgcGF0aDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwcm90b2NvbCArICc6Ly8nICsgYmFzZURvbWFpbiArIChwYXRoIHx8ICcnKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbWdDZG5SZXNvdXJjZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBnZXRDZG5SZXNvdXJjZSgnL2dzL2kvJyk7XG59XG4iLCJleHBvcnQgZW51bSBTZXNzaW9uRXhwaXJhdGlvbiB7XG4gICAgU2Vzc2lvbiA9IDAsXG4gICAgRHluYW1pYyA9IC0xLFxuICAgIEZvcmV2ZXIgPSAtMiAvLyBvbmUgeWVhclxufVxuIiwiaW1wb3J0IHtBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXJ9IGZyb20gXCIuLi9hcHAvVXRpbHMvbG9jYWxTdG9yYWdlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUdtaWRUaWNrZXRSZXNwb25zZSB7XG4gICAgZ21pZFRpY2tldDogc3RyaW5nO1xuICAgIGV4cGlyYXRpb25UaW1lOiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIEFwaUFkYXB0ZXJTZXR0aW5ncyB7XG4gICAgZm9yY2VIdHRwcz86IGJvb2xlYW47IC8vIHJlcXVpcmVkIGZvciBvbGQgbW9iaWxlIHNka3NcbiAgICBmb3JjZVBvc3Q/OiBib29sZWFuO1xuICAgIGZvcmNlR2lneWFEb21haW4/OiBib29sZWFuOyAvLyBmb3IgYW5vbnltb3VzIHVzZXJzXG4gICAgZGlzYWJsZUNhY2hlPzogYm9vbGVhbjtcbiAgICByZXF1aXJlc1Nlc3Npb24/OiAoKSA9PiBib29sZWFuO1xuICAgIGNsZWFyU2Vzc2lvbj86IGJvb2xlYW47XG4gICAgY2xlYXJTZXNzaW9uQ29uZGl0aW9uPzogKHBhcmFtczogYW55KSA9PiBib29sZWFuO1xuICAgIGNhY2hlVGltZW91dD86IG51bWJlcjtcbiAgICBqc1Nka1JlcXVlc3RJZD86IHN0cmluZztcbiAgICBwcmVwcm9jZXNzb3I/OiAocGFyYW1zLCBjYWxsYmFjazogKCkgPT4gdm9pZCkgPT4gdm9pZDtcbiAgICBvYXV0aE1vZGU/OiBPQXV0aE1vZGU7XG4gICAgaXNYaHJTdXBwb3J0ZWQ/OiBib29sZWFuO1xuICAgIHVzZUh0dHBTdGF0dXNDb2Rlcz86IGJvb2xlYW47XG4gICAgbmFtZXNwYWNlPzogc3RyaW5nO1xuICAgIHVzZUJlYXJlclRva2VuPzogYm9vbGVhbjtcbn1cbmV4cG9ydCBlbnVtIE9BdXRoTW9kZSB7XG4gICAgU29jaWFsLFxuICAgIFNzb1xufVxuZXhwb3J0IGludGVyZmFjZSBJQXBpQWRhcHRlckluaXRTZXR0aW5ncyB7XG4gICAgZ2V0QWRhcHRlck5hbWU/OiAoKSA9PiBzdHJpbmc7XG4gICAgZ2V0QVBJS2V5PzogKCkgPT4gc3RyaW5nO1xuICAgIGdldEZlYXR1cmVzPzogKCkgPT4gc3RyaW5nO1xuICAgIGdldFNldHRpbmdzPzogKCkgPT4gc3RyaW5nO1xufVxuZXhwb3J0IGludGVyZmFjZSBJQXBpQWRhcHRlciB7XG4gICAgaW5pdChjYWxsYmFjazogKCkgPT4gdm9pZCk6IFByb21pc2U8dm9pZD47XG4gICAgaXNTZXNzaW9uVmFsaWQocGFyYW1zOiBPYmplY3QsIGNhbGxiYWNrOiAoaXNWYWxpZDogYm9vbGVhbikgPT4gdm9pZCk6IHZvaWQ7XG4gICAgZ2V0U3RvcmFnZSgpOiBBYnN0cmFjdExvY2FsU3RvcmFnZUFkYXB0ZXI7XG4gICAgc2VuZFJlcXVlc3QobWV0aG9kTmFtZTogc3RyaW5nLCBwYXJhbXM6IE9iamVjdCwgY2FsbGJhY2s/OiAocmVzcG9uc2U6IE9iamVjdCkgPT4gdm9pZCwgc2V0dGluZ3M/OiBBcGlBZGFwdGVyU2V0dGluZ3MpOiB2b2lkO1xuICAgIHNlbmRPYXV0aFJlcXVlc3QobWV0aG9kTmFtZTogc3RyaW5nLCBwYXJhbXM6IE9iamVjdCwgY2FsbGJhY2s/OiAocmVzcG9uc2U6IE9iamVjdCkgPT4gdm9pZCwgc2V0dGluZ3M/OiBBcGlBZGFwdGVyU2V0dGluZ3MpOiB2b2lkO1xuICAgIGdldFRva2VuUGFyYW0oQVBJS2V5OiBzdHJpbmcsIHBhcmFtTmFtZTogc3RyaW5nKTogc3RyaW5nOyAvLyBtb3N0bHkgZm9yIFVVSURcbiAgICBvblBsdWdpbkV2ZW50KGV2ZW50OiBhbnkpOiB2b2lkO1xuICAgIHNldEdsdGV4cEZyb21TU08oYXBpS2V5Pzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPjtcbiAgICByZWdpc3RlckZvck5hbWVzcGFjZUV2ZW50cyhuYW1lc3BhY2U6IHN0cmluZyk6IHZvaWQ7XG4gICAgb25TREtFdmVudChldmVudE9iamVjdDogT2JqZWN0KTogdm9pZDtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgY2xlYXJTZXNzaW9uKHBhcmFtczogT2JqZWN0LCBjYWxsYmFjaz86IChyZXM/OiBhbnkpID0+IHZvaWQpOiB2b2lkO1xuICAgIG9uSlNMb2cobG9nVHlwZTogc3RyaW5nLCBsb2dJbmZvOiBzdHJpbmcpOiB2b2lkO1xuICAgIGdldEdtaWRUaWNrZXQoKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+O1xufVxuIiwiaW1wb3J0ICogYXMgdXRpbHMgZnJvbSAnc3JjL2NvcmUvU2VydmljZVByb3h5L3V0aWxzJztcbmltcG9ydCB7IElQcm94eVJlc3BvbnNlLCBJUHJveHlSZXF1ZXN0LCBpc1NpZ25hbFJlcXVlc3QsIElQcm94eVNpZ25hbFJlcXVlc3QgfSBmcm9tICdzcmMvY29yZS9TZXJ2aWNlUHJveHkvaW50ZXJmYWNlcyc7XG5cbmV4cG9ydCB0eXBlIE1heWJlUHJvbWlzZUFueSA9IGFueSB8IFByb21pc2U8YW55PjtcbmV4cG9ydCB0eXBlIFN0b3BDYW5jZWxsZXJzID0gKCkgPT4gTWF5YmVQcm9taXNlQW55O1xuZXhwb3J0IGNsYXNzIFByb3h5TGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3NlcnZpY2U6IE9iamVjdCxcbiAgICAgICAgICAgICAgICBwdWJsaWMgb3JpZ2luID0gdXRpbHMuZ2V0UGFyZW50VXJsKCksXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBfYWxsb3dlZE1ldGhvZHMgPSB1dGlscy5nZXRBbGxDbGFzc01ldGhvZHNOYW1lcyhfc2VydmljZSksXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBfdGFyZ2V0ID0gd2luZG93LnBhcmVudCxcbiAgICAgICAgICAgICAgICBwcml2YXRlIF93aW4gPSB3aW5kb3cpIHt9XG5cbiAgICBwdWJsaWMgc3RvcENhbmNlbGxlcnM6IFN0b3BDYW5jZWxsZXJzW10gPSBbXTtcbiAgICBwdWJsaWMgb25TdG9wOiAoKSA9PiBNYXliZVByb21pc2VBbnk7XG5cbiAgICBwcml2YXRlIF9saXN0ZW5pbmcgPSBmYWxzZTtcblxuICAgIHB1YmxpYyBnZXQgaXNMaXN0ZW5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saXN0ZW5pbmc7XG4gICAgfVxuXG4gICAgcHVibGljIGxpc3RlbihwYXlsb2FkPzogYW55KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0xpc3RlbmluZykge1xuICAgICAgICAgICAgdGhpcy5fd2luLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHNldFRpbWVvdXQgd29ya2Fyb3VuZCBmb3IgSUU5LiBlbHNlIHdlJ2xsIGdldCBKU09OIGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHRoaXMuX3dpbi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vblJlcXVlc3QsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBpZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBzaWduYWw6ICdsaXN0ZW5pbmcnLFxuICAgICAgICAgICAgICAgICAgICByZXM6IHBheWxvYWQsXG4gICAgICAgICAgICAgICAgfSBhcyBJUHJveHlSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHBvc3RFcnJvcihyZXM6IElQcm94eVJlc3BvbnNlKSB7XG4gICAgICAgIHJlcy5zaWduYWwgPSAnZXJyb3InO1xuICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHJlcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdG9wTGlzdGVuKCkge1xuICAgICAgICBpZiAodGhpcy5pc0xpc3RlbmluZykge1xuICAgICAgICAgICAgdGhpcy5fd2luLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm9uUmVxdWVzdCwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5pbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgb25SZXF1ZXN0ID0gYXN5bmMgKGU6IE1lc3NhZ2VFdmVudCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgICAvLyB0byBwcmVzZXJ2ZSBjb250ZXh0XG4gICAgICAgIGlmICh1dGlscy52YWxpZGF0ZU9yaWdpbih0aGlzLm9yaWdpbiwgZS5vcmlnaW4pKSB7XG4gICAgICAgICAgICBjb25zdCByZXEgPSBKU09OLnBhcnNlKGUuZGF0YSkgYXMgSVByb3h5UmVxdWVzdDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTaWduYWxSZXF1ZXN0KHJlcSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVTaWduYWxSZXF1ZXN0KHJlcSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVQcm94eVJlcXVlc3QocmVxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3N0RXJyb3IoeyByZXM6IGUubWVzc2FnZSB8fCBlLCBpZDogcmVxLmlkIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlU2lnbmFsUmVxdWVzdChyZXE6IElQcm94eVNpZ25hbFJlcXVlc3QpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgc3dpdGNoIChyZXEuc2lnbmFsKSB7XG4gICAgICAgICAgICBjYXNlICdzdG9wJzpcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWwgPSBhd2FpdCB0aGlzLmdldENhbmNlbFJlc3VsdCgpO1xuICAgICAgICAgICAgICAgIGxldCByZXM6IElQcm94eVJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIGlmICghY2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcExpc3RlbigpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGF5bG9hZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub25TdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gdGhpcy5vblN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXlsb2FkLnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0gYXdhaXQgcGF5bG9hZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcmVxLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiAnc3RvcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXM6IHBheWxvYWQsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHJlcS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlczogY2FuY2VsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHJlcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRDYW5jZWxSZXN1bHQoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgZm9yIChjb25zdCBzaG91bGRDYW5jZWxTdG9wIG9mIHRoaXMuc3RvcENhbmNlbGxlcnMpIHtcbiAgICAgICAgICAgIGxldCByZXMgPSBzaG91bGRDYW5jZWxTdG9wKCkgYXMgTWF5YmVQcm9taXNlQW55O1xuICAgICAgICAgICAgaWYgKHJlcy50aGVuKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gYXdhaXQgcmVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVzKSByZXR1cm4gcmVzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVByb3h5UmVxdWVzdChyZXE6IElQcm94eVJlcXVlc3QpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZVJlcXVlc3QocmVxKTtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5mb3J3YXJkVG9TZXJ2aWNlKHJlcSk7XG5cbiAgICAgICAgdGhpcy5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICBpZDogcmVxLmlkLFxuICAgICAgICAgICAgcmVzLFxuICAgICAgICB9IGFzIElQcm94eVJlc3BvbnNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHZhbGlkYXRlUmVxdWVzdChyZXE6IElQcm94eVJlcXVlc3QpIHtcbiAgICAgICAgaWYgKCFyZXEuaWQgfHwgIXJlcS5tZXRob2ROYW1lIHx8IHRoaXMuX2FsbG93ZWRNZXRob2RzLmluZGV4T2YocmVxLm1ldGhvZE5hbWUpIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgJ3Byb3h5IHJlcXVlc3QgaW4gaW52YWxpZCBmb3JtYXQnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBmb3J3YXJkVG9TZXJ2aWNlKHJlcTogSVByb3h5UmVxdWVzdCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMuX3NlcnZpY2VbcmVxLm1ldGhvZE5hbWVdIGFzIEZ1bmN0aW9uO1xuICAgICAgICBsZXQgcmVzdWx0ID0gbWV0aG9kLmFwcGx5KHRoaXMuX3NlcnZpY2UsIHJlcS5wYXJhbXMpIGFzIE1heWJlUHJvbWlzZUFueTtcbiAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbikge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHBvc3RNZXNzYWdlKG1zZzogYW55KSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IHN0cmluZyA9IHR5cGVvZiBtc2cgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkobXNnKSA6IG1zZztcbiAgICAgICAgdGhpcy5fdGFyZ2V0LnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRoaXMub3JpZ2luKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJUHJveHlSZXNwb25zZSwgSVByb3h5TWVzc2FnZSwgSVByb3h5UmVxdWVzdCwgSVByb3h5U2lnbmFsUmVxdWVzdCB9IGZyb20gJ3NyYy9jb3JlL1NlcnZpY2VQcm94eS9pbnRlcmZhY2VzJztcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJ3NyYy9jb3JlL1NlcnZpY2VQcm94eS91dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlUHJveHkge1xuICAgIHByaXZhdGUgX2lmcmFtZTogSFRNTElGcmFtZUVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfcGVuZGluZ1JlcXM6ICgoZTogTWVzc2FnZUV2ZW50ICYgeyBkYXRhOiBJUHJveHlSZXNwb25zZSB9KSA9PiB2b2lkKVtdID0gW107XG4gICAgcHJpdmF0ZSBfaWZyYW1lSG9zdDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfbXV0YXRpb25PYnNlcnZlcnM6IE11dGF0aW9uT2JzZXJ2ZXJbXSA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyB1cmw6IHN0cmluZyxcbiAgICAgICAgcHVibGljIHRpbWVvdXQgPSA2MDAwMCxcbiAgICAgICAgcHJpdmF0ZSBfaWRDcmVhdG9yID0gdXRpbHMuZ2VuZXJhdGVJZCxcbiAgICAgICAgcHJpdmF0ZSBfaWZyYW1lQ3JlYXRvciA9IHV0aWxzLmNyZWF0ZUlmcmFtZSxcbiAgICAgICAgcHJpdmF0ZSBnZXRJZnJhbWVIb3N0ID0gKCkgPT5cbiAgICAgICAgICAgIG5ldyBQcm9taXNlPEhUTUxFbGVtZW50PihyZXNvbHZlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keSkgcmVzb2x2ZShkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgICAgICAgICBlbHNlIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiByZXNvbHZlKGRvY3VtZW50LmJvZHkpKTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICBwcml2YXRlIF93aW4gPSB3aW5kb3csXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGdldCBpc0luaXQoKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuX2lmcmFtZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGluaXQ8VD4odGl0bGU6IHN0cmluZyk6IFByb21pc2U8VD4ge1xuICAgICAgICBpZiAodGhpcy5pc0luaXQpIHJldHVybiBQcm9taXNlLnJlamVjdCgncHJveHkgYWxyZWFkeSBpbml0aWFsaXplZCcpIGFzIGFueTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pZnJhbWUgPSB0aGlzLl9pZnJhbWVDcmVhdG9yKHRpdGxlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pZnJhbWUuc3JjID0gdGhpcy51cmw7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJZnJhbWVIb3N0KCkudGhlbihob3N0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faWZyYW1lSG9zdCA9IGhvc3Q7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lmcmFtZUhvc3QuYXBwZW5kQ2hpbGQodGhpcy5faWZyYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZ2lneWEubG9nZ2VyLmlzRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2JzZXJ2ZSBpZnJhbWUgcmVtb3ZhbCBvbmx5IGlmIGdpZ3lhLmxvZ2dlciBpcyBleHBsaWNpdGx5IGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRPYnNlcnZpbmdJRnJhbWVSZW1vdmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSB0aGlzLl93aW4uc2V0VGltZW91dCgoKSA9PiByZWplY3QoJ3Byb3h5IGluaXQgdGltZW91dCcpLCB0aGlzLnRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbkluaXRSZXNwb25zZSA9IChlOiBNZXNzYWdlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlT3JpZ2luKGUub3JpZ2luKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5fdHJ5UGFyc2VSZXNwb25zZShlLmRhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlPy5zaWduYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2luLmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl93aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uSW5pdFJlc3BvbnNlLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlLnNpZ25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGlzdGVuaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl93aW4uYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25SZXNwb25zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5yZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3RvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlLnJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgndW5zdXBwb3J0ZWQgcmVzcG9uc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93aW4uYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uSW5pdFJlc3BvbnNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdmFsaWRhdGVPcmlnaW4oY2hlY2tlZDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB1dGlscy52YWxpZGF0ZU9yaWdpbih0aGlzLl9pZnJhbWUuc3JjLCBjaGVja2VkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uUmVzcG9uc2UgPSAoZTogTWVzc2FnZUV2ZW50KSA9PiB7XG4gICAgICAgIC8vIGFycm93IGZ1bmN0aW9uIHRvIHByZXNlcnZlIGNvbnRleHRcbiAgICAgICAgY29uc3QgbXNnID0gZ2lneWEudXRpbHMuSlNPTi5wYXJzZShlLmRhdGEpIGFzIElQcm94eVJlc3BvbnNlO1xuICAgICAgICBpZiAobXNnICYmIHRoaXMuX3BlbmRpbmdSZXFzW21zZy5pZF0gJiYgdGhpcy52YWxpZGF0ZU9yaWdpbihlLm9yaWdpbikpIHtcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdSZXFzW21zZy5pZF0obXNnKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9wZW5kaW5nUmVxc1ttc2cuaWRdO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByaXZhdGUgcG9zdFRvSUZyYW1lPFQ+KHJlcTogSVByb3h5TWVzc2FnZSkge1xuICAgICAgICBjb25zdCBvbk1zZ1Jlc3BvbnNlID0gdGhpcy5yZWdpc3Rlck1lc3NhZ2U8VD4ocmVxKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZTogc3RyaW5nID0gdHlwZW9mIHJlcSA9PT0gJ29iamVjdCcgPyBKU09OLnN0cmluZ2lmeShyZXEpIDogcmVxO1xuICAgICAgICB0aGlzLl9pZnJhbWUuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZShtZXNzYWdlLCB0aGlzLl9pZnJhbWUuc3JjKTtcbiAgICAgICAgcmV0dXJuIG9uTXNnUmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWdpc3Rlck1lc3NhZ2U8VD4ocmVxOiBJUHJveHlNZXNzYWdlLCB0aW1lb3V0ID0gdGhpcy50aW1lb3V0KTogUHJvbWlzZTxUPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSB0aGlzLl93aW4uc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCdwcm94eSByZXF1ZXN0IHRpbWVvdXQnKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuXG4gICAgICAgICAgICB0aGlzLl9wZW5kaW5nUmVxc1tyZXEuaWRdID0gKGU6IElQcm94eVJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2luLmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgICAgICAgIGlmIChlLnNpZ25hbCA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZS5yZXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZS5yZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZW5kUmVxdWVzdDxUPihtZXRob2ROYW1lOiBzdHJpbmcsIHBhcmFtcz86IGFueVtdKTogUHJvbWlzZTxUPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RUb0lGcmFtZTxUPih7XG4gICAgICAgICAgICBpZDogdGhpcy5faWRDcmVhdG9yKCksXG4gICAgICAgICAgICBtZXRob2ROYW1lLFxuICAgICAgICAgICAgcGFyYW1zLFxuICAgICAgICB9IGFzIElQcm94eVJlcXVlc3QpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzdG9wPFQ+KGZvcmNlQ2xvc2UgPSBmYWxzZSk6IFByb21pc2U8VD4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNJbml0KSB7XG4gICAgICAgICAgICB0aHJvdyAncHJveHkgaXMgbm90IGFjdGl2ZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgZXJyb3I7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucG9zdFRvSUZyYW1lPFQ+KHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuX2lkQ3JlYXRvcigpLFxuICAgICAgICAgICAgICAgICAgICBzaWduYWw6ICdzdG9wJyxcbiAgICAgICAgICAgICAgICB9IGFzIElQcm94eVNpZ25hbFJlcXVlc3QpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGVycm9yID0gZTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yIHx8IGZvcmNlQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX211dGF0aW9uT2JzZXJ2ZXJzICYmIHRoaXMuX211dGF0aW9uT2JzZXJ2ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzY29ubmVjdCBtdXRhdGlvbiBvYnNlcnZlcnMsIGlmIGFueS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcE9ic2VydmluZ0lGcmFtZVJlbW92YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93aW4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMub25SZXNwb25zZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lmcmFtZUhvc3QucmVtb3ZlQ2hpbGQodGhpcy5faWZyYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2lmcmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgd3JhcFdpdGg8VD4odHlwZTogbmV3ICgpID0+IFQpOiBUO1xuICAgIHB1YmxpYyB3cmFwV2l0aDxUPih0eXBlOiBPYmplY3QpOiBUO1xuICAgIHB1YmxpYyB3cmFwV2l0aDxUPihrZXlzOiBzdHJpbmdbXSk6IFQ7XG4gICAgcHVibGljIHdyYXBXaXRoPFQ+KHR5cGU6IChuZXcgKCkgPT4gVCkgfCBPYmplY3QgfCBzdHJpbmdbXSk6IFQge1xuICAgICAgICBsZXQga2V5czogc3RyaW5nW107XG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykga2V5cyA9IHV0aWxzLmdldEFsbENsYXNzTWV0aG9kc05hbWVzKHR5cGUgYXMgYW55KTtcbiAgICAgICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIEFycmF5KSBrZXlzID0gdHlwZTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnKSBrZXlzID0gT2JqZWN0LmtleXModHlwZSk7XG4gICAgICAgIC8vLmNvbmNhdChnZXRBbGxDbGFzc01ldGhvZHNOYW1lcyhPYmplY3QuZ2V0UHJvdG90eXBlT2YodHlwZSkpKTtcbiAgICAgICAgZWxzZSB0aHJvdyAndW5zdXBwb3J0ZWQgdHlwZSBmb3Igd3JhcHBlcic7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucHJveHlGcm9tS2V5czxUPihrZXlzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByb3h5RnJvbUtleXM8VD4oa2V5czogc3RyaW5nW10pOiBUIHtcbiAgICAgICAgY29uc3QgcHJveHkgPSB7fTtcbiAgICAgICAga2V5cy5mb3JFYWNoKGtleSA9PiAocHJveHlba2V5XSA9ICguLi5hcmdzKSA9PiB0aGlzLnNlbmRSZXF1ZXN0KGtleSwgYXJncykpKTtcbiAgICAgICAgcmV0dXJuIHByb3h5IGFzIFQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydE9ic2VydmluZ0lGcmFtZVJlbW92YWwoKSB7XG4gICAgICAgIGxldCB0YXJnZXROb2RlID0gdGhpcy5faWZyYW1lIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICB3aGlsZSAodGFyZ2V0Tm9kZS5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBvYnNlcnZlIHRoZSBpZnJhbWUgYW5kIGl0cyBwYXJlbnRzIChpZnJhbWUsYm9keSlcbiAgICAgICAgICAgIHRoaXMuYWRkTXV0YXRpb25PYnNlcnZlcih0YXJnZXROb2RlKTtcbiAgICAgICAgICAgIHRhcmdldE5vZGUgPSB0YXJnZXROb2RlLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0b3BPYnNlcnZpbmdJRnJhbWVSZW1vdmFsKCkge1xuICAgICAgICB0aGlzLl9tdXRhdGlvbk9ic2VydmVycy5mb3JFYWNoKG9ic2VydmVyID0+IHtcbiAgICAgICAgICAgIGlmIChvYnNlcnZlciAmJiBvYnNlcnZlci5kaXNjb25uZWN0KSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbXV0YXRpb25PYnNlcnZlcnMgPSBbXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkZE11dGF0aW9uT2JzZXJ2ZXIodGFyZ2V0Tm9kZTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgbXV0YXRpb25DYWxsYmFjazogTXV0YXRpb25DYWxsYmFjayA9IG11dGF0aW9uc0xpc3QgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgbXV0YXRpb24gb2YgbXV0YXRpb25zTGlzdCkge1xuICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09ICdjaGlsZExpc3QnICYmIG11dGF0aW9uLnJlbW92ZWROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBjaGlsZCBub2RlIGhhcyBiZWVuIHJlbW92ZWQuXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXV0YXRpb24ucmVtb3ZlZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVkTm9kZSA9IG11dGF0aW9uLnJlbW92ZWROb2Rlcy5pdGVtKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92ZWROb2RlID09PSB0YXJnZXROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2lneWEubG9nZ2VyLndhcm4oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIyMjIEdpZ3lhJ3Mgc2VydmljZSBwcm94eSBoYXMgYmVlbiB1bmV4cGVjdGVkbHkgZGV0YWNoZWQgZnJvbSB0aGUgRE9NLiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVGhpcyBtYXkgY2F1c2UgdW5leHBlY3RlZCBiZWhhdmlvciBpbmNsdWRpbmcgYSBjb21wbGV0ZSBsb3NzIG9mIHNlcnZpY2UuICMjIycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BPYnNlcnZpbmdJRnJhbWVSZW1vdmFsKCk7IC8vIGNhbiBzdG9wIG9ic2VydmluZyBmb3IgaWZyYW1lIHJlbW92YWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIHN0b3AgdGhlIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBDcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgbGlua2VkIHRvIHRoZSBjYWxsYmFjayBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gbXV0YXRpb25zIGFyZSBvYnNlcnZlZFxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9uQ2FsbGJhY2spO1xuXG4gICAgICAgIC8vIFN0YXJ0IG9ic2VydmluZyB0aGUgdGhlIHRhcmdldC1ub2RlJ3MgcGFyZW50IGVsZW1lbnQgZm9yIGNvbmZpZ3VyZWQgbXV0YXRpb25zXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodGFyZ2V0Tm9kZS5wYXJlbnRFbGVtZW50LCB7XG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsIC8vIG1vbml0b3JzIHRoZSB0YXJnZXQgbm9kZSBmb3IgdGhlIGFkZGl0aW9uIG9yIHJlbW92YWwgb2YgbmV3IGNoaWxkIG5vZGVzXG4gICAgICAgICAgICBzdWJ0cmVlOiBmYWxzZSwgLy8gZG8gbm90IGV4dGVuZCBtb25pdG9yaW5nIHRvIHRoZSBlbnRpcmUgc3VidHJlZSBvZiBub2RlcyByb290ZWQgYXQgdGhlIHBhcmVudCBlbGVtZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX211dGF0aW9uT2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3RyeVBhcnNlUmVzcG9uc2UoZGF0YVN0cjogc3RyaW5nKTogSVByb3h5UmVzcG9uc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YVN0cik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGdpZ3lhLmxvZ2dlci53YXJuKGByZWNlaXZlZCBtZXNzYWdlIHdpdGggaW52YWxpZCBmb3JtYXRgLCB7XG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YVN0clxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIElQcm94eU1lc3NhZ2Uge1xuICAgIGlkOiBzdHJpbmc7XG59XG5leHBvcnQgaW50ZXJmYWNlIElQcm94eVJlcXVlc3QgZXh0ZW5kcyBJUHJveHlNZXNzYWdlIHtcbiAgICBtZXRob2ROYW1lOiBzdHJpbmc7XG4gICAgcGFyYW1zPzogYW55W107XG4gICAgaGVhZGVycz86IHtba2V5OiBzdHJpbmddOiBzdHJpbmd9XG59XG5leHBvcnQgdHlwZSBQcm94eVNpZ25hbCA9ICdsaXN0ZW5pbmcnIHwgJ3N0b3AnIHwgJ2Vycm9yJztcbmV4cG9ydCBpbnRlcmZhY2UgSVByb3h5U2lnbmFsUmVxdWVzdCBleHRlbmRzIElQcm94eU1lc3NhZ2Uge1xuICAgIHNpZ25hbDogUHJveHlTaWduYWw7XG59XG5leHBvcnQgaW50ZXJmYWNlIElQcm94eVJlc3BvbnNlIGV4dGVuZHMgSVByb3h5TWVzc2FnZSB7XG4gICAgcmVzOiBhbnk7XG4gICAgc2lnbmFsPzogUHJveHlTaWduYWw7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNTaWduYWxSZXF1ZXN0KHJlcTogSVByb3h5TWVzc2FnZSk6IHJlcSBpcyBJUHJveHlTaWduYWxSZXF1ZXN0IHtcbiAgICByZXR1cm4gQm9vbGVhbigocmVxIGFzIElQcm94eVNpZ25hbFJlcXVlc3QpLnNpZ25hbCk7XG59XG4iLCJleHBvcnQgY29uc3QgZ2V0UGFyZW50VXJsID0gKHdpbiA9IHdpbmRvdywgZG9jID0gZG9jdW1lbnQpID0+ICh3aW4ubG9jYXRpb24gIT0gd2luLnBhcmVudC5sb2NhdGlvbiA/IGRvYy5yZWZlcnJlciA6IGRvYy5sb2NhdGlvbi5ocmVmKTtcbmV4cG9ydCBjb25zdCBnZXRCb2R5RWxlbWVudCA9IChkb2MgPSBkb2N1bWVudCkgPT5cbiAgICBuZXcgUHJvbWlzZTxIVE1MRWxlbWVudD4ocmVzb2x2ZSA9PiB7XG4gICAgICAgIGlmIChkb2MuYm9keSkgcmVzb2x2ZShkb2MuYm9keSk7XG4gICAgICAgIGVsc2UgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiByZXNvbHZlKGRvYy5ib2R5KSk7XG4gICAgfSk7XG5leHBvcnQgY29uc3QgdmFsaWRhdGVPcmlnaW4gPSAob3JpZ2luOiBzdHJpbmcsIGNoZWNrZWQ6IHN0cmluZykgPT4gb3JpZ2luPy50b0xvd2VyQ2FzZSgpPy5pbmRleE9mKGNoZWNrZWQ/LnRvTG93ZXJDYXNlKCkpID09PSAwO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUlmcmFtZSA9ICh0aXRsZTogc3RyaW5nID0gJ0dpZ3lhIEZyYW1lJywgZG9jID0gZG9jdW1lbnQpID0+IHtcbiAgICBjb25zdCBpZnJhbWUgPSBkb2MuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgaWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBpZnJhbWUuc3R5bGUuaGVpZ2h0ID0gJzBweCc7XG4gICAgaWZyYW1lLnN0eWxlLndpZHRoID0gJzBweCc7XG4gICAgaWZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgaWZyYW1lLnRpdGxlID0gdGl0bGU7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIHJldHVybiBpZnJhbWU7XG59O1xubGV0IF9jb3VudGVyID0gMTtcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUlkID0gKCkgPT4ge1xuICAgIHJldHVybiBTdHJpbmcoX2NvdW50ZXIrKyk7XG59O1xuZnVuY3Rpb24gaXNDbGFzcyh0eXBlOiBhbnl8KG5ldyAoKSA9PiBhbnkpKTogdHlwZSBpcyBuZXcgKCkgPT4gYW55IHtcbiAgICByZXR1cm4gISF0eXBlLnByb3RvdHlwZTtcbn1cbmV4cG9ydCBjb25zdCBnZXRBbGxDbGFzc01ldGhvZHNOYW1lcyA9ICh0eXBlOiBPYmplY3R8KG5ldyAoKSA9PiBhbnkpKTogc3RyaW5nW10gPT4ge1xuICAgIGxldCBwcm9wczogc3RyaW5nW10gPSBbXTtcblxuICAgIGxldCBwcm90byA9IGlzQ2xhc3ModHlwZSkgPyB0eXBlLnByb3RvdHlwZSA6IHR5cGU7XG4gICAgZG8ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLyoqIGluaXRpYWwgaW1wbGVtZW50YXRpb24gLSB1c2luZyBmaWx0ZXIgKiovXG4gICAgICAgICAgICBjb25zdCBsID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvdG8pXG4gICAgICAgICAgICAgICAgLy8gLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHByb3RvKS5tYXAocyA9PiBzLnRvU3RyaW5nKCkpKVxuICAgICAgICAgICAgICAgIC5tYXAocyA9PiBzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnNvcnQoKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAgICAgICAgIChwLCBpLCBhcnIpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcHJvdG9bcF0gPT09ICdmdW5jdGlvbicgJiYgLy9vbmx5IHRoZSBtZXRob2RzXG4gICAgICAgICAgICAgICAgICAgICAgICBwICE9PSAnY29uc3RydWN0b3InICYmIC8vbm90IHRoZSBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgICAgICAgICAgICAgKGkgPT0gMCB8fCBwICE9PSBhcnJbaSAtIDFdKSAmJiAvL25vdCBvdmVycmlkaW5nIGluIHRoaXMgcHJvdG90eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5pbmRleE9mKHApID09PSAtMSwgLy9ub3Qgb3ZlcnJpZGRlbiBpbiBhIGNoaWxkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHByb3BzID0gcHJvcHMuY29uY2F0KGwpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvKiogYnVnIGZpeCBpbXBsZW1lbnRhdGlvbiAtIHVzaW5nIGN1c3RvbSBvdXIgb3duIGZpbHRlciBsb2dpY1xuICAgICAgICAgICAgIGNhc2Ugb2YgQXJyYXkuZmlsdGVyIHBvbHlmaWxsIGNhdXNpbmcgXCJjYW4gbm90IHJlYWQgcHJvcGVydHkgJzAnIG9mIHVuZGVmaW5lZFwiICoqL1xuICAgICAgICAgICAgY29uc3QgYXJyID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvdG8pXG4gICAgICAgICAgICAgICAgLy8gLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHByb3RvKS5tYXAocyA9PiBzLnRvU3RyaW5nKCkpKVxuICAgICAgICAgICAgICAgIC5tYXAocyA9PiBzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnNvcnQoKTtcblxuICAgICAgICAgICAgY29uc3QgbCA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gYXJyW2ldO1xuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcHJvdG9bcF0gPT09ICdmdW5jdGlvbicgJiYgLy9vbmx5IHRoZSBtZXRob2RzXG4gICAgICAgICAgICAgICAgICAgIHAgIT09ICdjb25zdHJ1Y3RvcicgJiYgLy9ub3QgdGhlIGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICAgIChpID09IDAgfHwgcCAhPT0gYXJyW2kgLSAxXSkgJiYgLy9ub3Qgb3ZlcnJpZGluZyBpbiB0aGlzIHByb3RvdHlwZVxuICAgICAgICAgICAgICAgICAgICBwcm9wcy5pbmRleE9mKHApID09PSAtMVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAvL25vdCBvdmVycmlkZGVuIGluIGEgY2hpbGRcblxuICAgICAgICAgICAgICAgICAgICBsLnB1c2gocCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvcHMgPSBwcm9wcy5jb25jYXQobCk7XG4gICAgICAgIH1cbiAgICB9IHdoaWxlIChcbiAgICAgICAgKHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSkgJiYgLy93YWxrLXVwIHRoZSBwcm90b3R5cGUgY2hhaW5cbiAgICAgICAgT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSAvL25vdCB0aGUgdGhlIE9iamVjdCBwcm90b3R5cGUgbWV0aG9kcyAoaGFzT3duUHJvcGVydHksIGV0Yy4uLilcbiAgICApO1xuXG4gICAgcmV0dXJuIHByb3BzO1xufTtcbiIsImV4cG9ydCBjbGFzcyBHbG9iYWxQcm92aWRlciB7XG4gICAgcHVibGljIGRvY3VtZW50TG9jYXRpb24oKTogTG9jYXRpb24ge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb247XG4gICAgfVxuICAgIHB1YmxpYyBwb3N0TWVzc2FnZVRvUGFyZW50KG1lc3NhZ2U6IGFueSwgdGFyZ2V0T3JpZ2luOiBzdHJpbmcsIHRyYW5zZmVyPzogVHJhbnNmZXJhYmxlW10pOiB2b2lkIHtcbiAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShtZXNzYWdlLCB0YXJnZXRPcmlnaW4sIHRyYW5zZmVyKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBHbG9iYWxQcm92aWRlcigpXG4iLCJpbXBvcnQge1xuICAgIEdldEdyb3VwVG9rZW5SZXNwb25zZSxcbiAgICBDYW5hcnlJbmRpY2F0aW9uUmVzcG9uc2UsXG4gICAgR2V0TG9naW5Ub2tlbkV4cFJlc3BvbnNlLFxuICAgIEZyYW1lU2V0R3JvdXBUb2tlblBhcmFtcyxcbiAgICBGcmFtZUxvZ291dFBhcmFtcyxcbiAgICBGcmFtZVJlbW92ZVRva2VuUGFyYW1zLFxuICAgIEZyYW1lR2V0R3JvdXBUb2tlblBhcmFtcyxcbiAgICBGcmFtZVNldExvZ2luVG9rZW5FeHBQYXJhbXMsXG4gICAgRnJhbWVHZXRMb2dpblRva2VuRXhwUGFyYW1zLFxuICAgIEZyYW1lQ2hlY2tUb2tlblJlbmV3UGFyYW1zLFxuICAgIEZyYW1lU3luY0NhbmFyeUluZGljYXRpb24sXG4gICAgQ2FuYXJ5VmVyc2lvbixcbiAgICBGcmFtZVNldEdyb3VwQ29udGV4dCxcbiAgICBJU3NvU2VydmljZSxcbiAgICBTZXRMb2dpblRva2VuRXhwUmVzcG9uc2UsXG4gICAgR2V0R3JvdXBBcGlEb21haW5SZXNwb25zZSxcbiAgICBGcmFtZVNldEdyb3VwQXBpRG9tYWluLFxuICAgIEZyYW1lR2V0R3JvdXBBcGlEb21haW4sXG4gICAgU0RLTG9nb3V0UmVzcG9uc2Vcbn0gZnJvbSAnc3JjL2ZpZG0vR2lneWEuSlMuU1NPL2FwcC9pbnRlcmZhY2VzJztcbmltcG9ydCB7R1NFcnJvcnN9IGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9HU0Vycm9ycyc7XG5pbXBvcnQge1Nzb1V0aWxzfSBmcm9tIFwic3JjL2ZpZG0vR2lneWEuSlMuU1NPL2FwcC9zc29VdGlsc1wiO1xuaW1wb3J0IHtJU3NvQ29uZmlnfSBmcm9tICdzcmMvY29yZS9HaWd5YS5Kcy9pbnRlcmZhY2VzL0lXZWJTZGtDb25maWcnO1xuXG5leHBvcnQgY2xhc3MgU3NvIGltcGxlbWVudHMgSVNzb1NlcnZpY2Uge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3N0b3JhZ2VLZXk6IHN0cmluZztcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jYW5hcnlLZXk6IHN0cmluZztcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jYW5hcnlWZXJLZXk6IHN0cmluZztcbiAgICBwcml2YXRlIF9jdXJyZW50RnJhZ21lbnQ6IHN0cmluZztcbiAgICBwcml2YXRlIF9tb2RlOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfcmVxdWVzdERvbWFpbjogc3RyaW5nO1xuICAgIHByaXZhdGUgX2xpZDogc3RyaW5nO1xuICAgIHByaXZhdGUgX2NhbGxiYWNrSUQ6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2FwaUtleTogc3RyaW5nLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgX3NpdGVBcGlLZXk6IHN0cmluZyxcbiAgICAgICAgICAgICAgICBwcml2YXRlIF9zc29TZWdtZW50OiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBfc3NvQ29uZmlnOiBJU3NvQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWxpZERvbWFpbnM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBsb2dvdXRVUkxzOiB7fSxcbiAgICAgICAgICAgICAgICAgICAgY2FuYXJ5Q29va2llc05hbWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0NhbmFyeTogJ2dpZ19pc0NhbmFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnZ2lnX2NhbmFyeV92ZXInXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByaXZhdGUgX3V0aWxzID0gbmV3IFNzb1V0aWxzKCksXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBfc3RvcmFnZSA9IF91dGlscy5nZXRDb29raWVzU3RvcmFnZSgpKSB7XG5cbiAgICAgICAgdGhpcy5fc3RvcmFnZUtleSA9IHRoaXMuX2NyZWF0ZUtleSgnZ2lnX2xvZ2luVG9rZW4nKTtcbiAgICAgICAgY29uc3QgY2FuYXJ5Q29va2llc05hbWVzID0gdGhpcy5fc3NvQ29uZmlnLmNhbmFyeUNvb2tpZXNOYW1lcztcbiAgICAgICAgaWYgKHR5cGVvZiBjYW5hcnlDb29raWVzTmFtZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW5hcnlLZXkgPSB0aGlzLl9jcmVhdGVLZXkoY2FuYXJ5Q29va2llc05hbWVzLmlzQ2FuYXJ5KTtcbiAgICAgICAgICAgIHRoaXMuX2NhbmFyeVZlcktleSA9IHRoaXMuX2NyZWF0ZUtleShjYW5hcnlDb29raWVzTmFtZXMudmVyc2lvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaW5pdCgpIHtcbiAgICAgICAgLy8gU3RhcnQgcmVwZWF0ZWRseSBjaGVja2luZyBmcmFnbWVudCBmb3IgYSBuZXcgY2FsbC5cbiAgICAgICAgdGhpcy5fY2hlY2tGcmFnbWVudCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NoZWNrRnJhZ21lbnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50OiBzdHJpbmcgPSB0aGlzLl91dGlscy5nZXRGcmFnbWVudCgpO1xuICAgICAgICBpZiAoZnJhZ21lbnQgJiYgZnJhZ21lbnQgIT09IHRoaXMuX2N1cnJlbnRGcmFnbWVudCkge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudEZyYWdtZW50ID0gZnJhZ21lbnQ7XG4gICAgICAgICAgICB0aGlzLl9zdGFydCh0aGlzLl91dGlscy5kZXNlcmlhbGl6ZShmcmFnbWVudCkpO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuX2NoZWNrRnJhZ21lbnQsIDIwMCk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgYXN5bmMgX3N0YXJ0KFxuICAgICAgICBwYXJhbXM6XG4gICAgICAgICAgICB8IEZyYW1lU2V0R3JvdXBUb2tlblBhcmFtc1xuICAgICAgICAgICAgfCBGcmFtZUxvZ291dFBhcmFtc1xuICAgICAgICAgICAgfCBGcmFtZVJlbW92ZVRva2VuUGFyYW1zXG4gICAgICAgICAgICB8IEZyYW1lR2V0R3JvdXBUb2tlblBhcmFtc1xuICAgICAgICAgICAgfCBGcmFtZVNldExvZ2luVG9rZW5FeHBQYXJhbXNcbiAgICAgICAgICAgIHwgRnJhbWVHZXRMb2dpblRva2VuRXhwUGFyYW1zXG4gICAgICAgICAgICB8IEZyYW1lQ2hlY2tUb2tlblJlbmV3UGFyYW1zXG4gICAgICAgICAgICB8IEZyYW1lU3luY0NhbmFyeUluZGljYXRpb25cbiAgICAgICAgICAgIHwgRnJhbWVTZXRHcm91cENvbnRleHRcbiAgICAgICAgICAgIHwgRnJhbWVTZXRHcm91cEFwaURvbWFpblxuICAgICAgICAgICAgfCBGcmFtZUdldEdyb3VwQXBpRG9tYWluXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX21vZGUgPSBwYXJhbXMubTtcbiAgICAgICAgdGhpcy5fcmVxdWVzdERvbWFpbiA9IHBhcmFtcy5kOyAvLyBSZWNlaXZpbmcgZG9tYWluLlxuICAgICAgICB0aGlzLl9saWQgPSBwYXJhbXMubGlkO1xuICAgICAgICB0aGlzLl9jYWxsYmFja0lEID0gcGFyYW1zLmNhbGxiYWNrSUQ7XG4gICAgICAgIHRoaXMuX3NpdGVBcGlLZXkgPSBwYXJhbXMuc0FQSUtleTtcblxuICAgICAgICAvLyBBYm9ydCBpZiBub3QgaW4gaUZyYW1lXG4gICAgICAgIGlmICghd2luZG93LnBhcmVudCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYGdpZ3lhIHNzbzogaW52YWxpZCB1c2VgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5fdXRpbHMuaXNWYWxpZERvbWFpbih0aGlzLl9zc29Db25maWcudmFsaWREb21haW5zLCB0aGlzLl9yZXF1ZXN0RG9tYWluKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYGdpZ3lhIHNzbzogJHt0aGlzLl9yZXF1ZXN0RG9tYWlufSBpcyBub3QgaW4gdmFsaWQgZG9tYWluOiAke3RoaXMuX3Nzb0NvbmZpZy52YWxpZERvbWFpbnMuam9pbignLCcpfWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3BvbnNlOiBhbnk7XG4gICAgICAgIHN3aXRjaCAocGFyYW1zLm0pIHtcbiAgICAgICAgICAgIGNhc2UgJ2xvZ291dCc6XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmxvZ291dCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdyZW1vdmVUb2tlbic6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW1vdmVUb2tlbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdnZXRUb2tlbic6XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldFRva2VuKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NldFRva2VuJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldFRva2VuKHBhcmFtcy5sdCwgU3RyaW5nKHBhcmFtcy5leHBpcmF0aW9uKSwgcGFyYW1zLmdsdGV4cCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NldEdyb3VwQ29udGV4dCc6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRHcm91cENvbnRleHQocGFyYW1zLmdyb3VwQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NldExvZ2luVG9rZW5FeHAnOlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgdGhpcy5zZXRUb2tlbkV4cGlyYXRpb24ocGFyYW1zLmxvZ2luVG9rZW5FeHApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdnZXRMb2dpblRva2VuRXhwJzpcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0VG9rZW5FeHBpcmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ2NoZWNrVG9rZW5SZW5ldyc6XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNoZWNrVG9rZW5SZW5ldyhwYXJhbXMubG9naW5Ub2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3N5bmNDYW5hcnlJbmRpY2F0aW9uJzpcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMuc3luY0NhbmFyeUluZGljYXRpb24ocGFyYW1zLmlzQ2FuYXJ5LCBwYXJhbXMuY2FuYXJ5VmVyc2lvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NldEdyb3VwQXBpRG9tYWluJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldEdyb3VwQXBpRG9tYWluKHBhcmFtcy5kb21haW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdnZXRHcm91cEFwaURvbWFpbic6XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldEdyb3VwQXBpRG9tYWluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuSU5WQUxJRF9BUElfTUVUSE9ELFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl91dGlscy5zZW5kTWVzc2FnZShyZXNwb25zZSwgdGhpcy5fY2FsbGJhY2tJRCwgdGhpcy5fcmVxdWVzdERvbWFpbik7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldEdyb3VwQXBpRG9tYWluKCk6IFByb21pc2U8R2V0R3JvdXBBcGlEb21haW5SZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBkb21haW4gPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0oYGFwaURvbWFpbl8ke3RoaXMuX2FwaUtleX1gKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5PSyxcbiAgICAgICAgICAgIGRvbWFpblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzZXRHcm91cEFwaURvbWFpbihkb21haW46IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0oYGFwaURvbWFpbl8ke3RoaXMuX2FwaUtleX1gLCBkb21haW4pO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBsb2dvdXQoKTogUHJvbWlzZTxTREtMb2dvdXRSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBsb2dvdXRVUkxzID0gdGhpcy5fZ2V0TG9nb3V0VVJMcygpO1xuICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZVRva2VuKCk7XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UucmVtb3ZlSXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV92aXNpdGVkYCk7XG4gICAgICAgIHJldHVybiB7IGxvZ291dFVSTHMgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgcmVtb3ZlVG9rZW4oKSB7XG4gICAgICAgIGxldCBsb2dpblRva2VuID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHRoaXMuX3N0b3JhZ2VLZXkpO1xuICAgICAgICBpZiAobG9naW5Ub2tlbikge1xuICAgICAgICAgICAgdGhpcy5fbWFya1Jldm9rZWRMb2dpblRva2VuKGxvZ2luVG9rZW4pO1xuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMuX3N0b3JhZ2VLZXkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N0b3JhZ2UucmVtb3ZlSXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9leHBgKTtcbiAgICAgICAgdGhpcy5fc3RvcmFnZS5yZW1vdmVJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2dsdGV4cGApO1xuICAgICAgICB0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fc2Vzc2lvbmApO1xuICAgICAgICB0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fY29udGV4dGApO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRUb2tlbigpOiBQcm9taXNlPEdldEdyb3VwVG9rZW5SZXNwb25zZT4ge1xuICAgICAgICBsZXQgZXJyb3JDb2RlID0gMDtcbiAgICAgICAgbGV0IGx0ID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHRoaXMuX3N0b3JhZ2VLZXkpO1xuICAgICAgICBjb25zdCBzdG9yYWdlRXhwID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2V4cGApO1xuICAgICAgICBsZXQgZXhwO1xuICAgICAgICBpZiAoc3RvcmFnZUV4cCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGV4cCA9IERhdGUubm93KCkgLSAxMDAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXhwID0gTnVtYmVyKHN0b3JhZ2VFeHApO1xuICAgICAgICAgICAgY29uc3QgdHdvWWVhckZyb21Ob3cgPSBEYXRlLm5vdygpICsgKDEwMDAgKiA2MCAqIDYwICogMjQgKiAzNjUgKiAyKTtcbiAgICAgICAgICAgIGlmIChleHAgPiB0d29ZZWFyRnJvbU5vdykge1xuICAgICAgICAgICAgICAgIGV4cCA9IERhdGUubm93KCkgLSAxMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdsdGV4cCA9IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9nbHRleHBgKTtcbiAgICAgICAgY29uc3QgZ3JvdXBDb250ZXh0ID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2NvbnRleHRgKTtcbiAgICAgICAgY29uc3QgaW5TZXNzaW9uID0gZ2x0ZXhwIHx8IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9zZXNzaW9uYCkgPT09ICcxJztcbiAgICAgICAgaWYgKCFpc05hTihleHApICYmICgoZXhwID09PSAwICYmICFpblNlc3Npb24pIHx8IChleHAgPiAwICYmIG5ldyBEYXRlKCkuZ2V0VGltZSgpID4gZXhwKSkpIHtcbiAgICAgICAgICAgIC8vIGV4cGlyZWQhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZVRva2VuKCk7XG4gICAgICAgICAgICBsdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWx0KSB7XG4gICAgICAgICAgICAvLyBubyB1c2VyXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuVU5BVVRIT1JJWkVEX1VTRVIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbWFya1NpdGVWaXNpdGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZTogR2V0R3JvdXBUb2tlblJlc3BvbnNlID0ge1xuICAgICAgICAgICAgZXJyb3JDb2RlOiBlcnJvckNvZGUsXG4gICAgICAgICAgICBsb2dpbl90b2tlbjogbHQsXG4gICAgICAgICAgICBleHBpcmVzX2luOiBleHAgPT09IDAgPyAwIDogTWF0aC5yb3VuZCgoZXhwIC0gbmV3IERhdGUoKS5nZXRUaW1lKCkpIC8gMTAwMCksXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYoZ3JvdXBDb250ZXh0KXtcbiAgICAgICAgICAgIHJlc3BvbnNlLmdyb3VwQ29udGV4dCA9IGdyb3VwQ29udGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChleHAgPT09IDAgJiYgZ2x0ZXhwKSB7XG4gICAgICAgICAgICByZXNwb25zZS5nbHRleHAgPSBnbHRleHA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzZXRUb2tlbihsdDogc3RyaW5nLCBleHBpcmF0aW9uPzogc3RyaW5nIHwgbnVtYmVyLCBnbHRleHA/OiBzdHJpbmcpIHtcbiAgICAgICAgbHQgPSBsdC5zcGxpdCgnfCcpWzBdO1xuICAgICAgICBjb25zdCBvbGRUb2tlbiA9IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9zdG9yYWdlS2V5KT8uc3BsaXQoJ3wnKVswXTtcbiAgICAgICAgaWYgKGx0ICE9PSBvbGRUb2tlbikge1xuICAgICAgICAgICAgdGhpcy5fbWFya1Jldm9rZWRMb2dpblRva2VuKG9sZFRva2VuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsdCkge1xuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5zZXRJdGVtKHRoaXMuX3N0b3JhZ2VLZXksIGx0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwaXJhdGlvbikge1xuICAgICAgICAgICAgbGV0IGV4cGlyZXNJbiA9IHR5cGVvZiBleHBpcmF0aW9uID09PSAnc3RyaW5nJyAmJiBleHBpcmF0aW9uID8gTnVtYmVyKGV4cGlyYXRpb24pIDogZXhwaXJhdGlvbjtcblxuICAgICAgICAgICAgaWYgKGV4cGlyZXNJbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIFNlc3Npb24gY29va2llIG9yIGR5bmFtaWMgc2Vzc2lvbiBjb29raWUuXG4gICAgICAgICAgICAgICAgLy8gRWl0aGVyIHdheSwgZmxhZyB0aGUgZXhwaXJhdGlvbiBhcyAwLlxuICAgICAgICAgICAgICAgIGV4cGlyYXRpb24gPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgZnJvbSBub3cgd2hlbiB0aGUgY29va2llIHNob3VsZCBleHBpcmUuXG4gICAgICAgICAgICAgICAgbGV0IGV4cGlyZXNJbk1zOiBudW1iZXI7XG4gICAgICAgICAgICAgICAgaWYgKCFleHBpcmVzSW4gfHwgZXhwaXJlc0luID09PSAtMikge1xuICAgICAgICAgICAgICAgICAgICBleHBpcmVzSW5NcyA9IDEwMDAgKiA2MCAqIDYwICogMjQgKiAzNjU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0luTXMgPSBOdW1iZXIoZXhwaXJlc0luKSAqIDEwMDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBleHBpcmVzIGluIG1pbGxpc2Vjb25kcyB0byBhbiBhIHRpbWVzdGFtcCAoYWxzbyBtaWxsaXNlY29uZHMpLlxuICAgICAgICAgICAgICAgIGV4cGlyZXNJbiA9IERhdGUubm93KCkgKyBleHBpcmVzSW5NcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9leHBgLCBgJHtleHBpcmVzSW59YCk7XG4gICAgICAgICAgICBpZiAoZXhwaXJhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9zZXNzaW9uYCwgJzEnLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2x0ZXhwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0VG9rZW5FeHBpcmF0aW9uKGdsdGV4cCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobHQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX21hcmtTaXRlVmlzaXRlZCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHNldEdyb3VwQ29udGV4dChncm91cENvbnRleHQ6IGFueSkge1xuICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fY29udGV4dGAsIEpTT04uc3RyaW5naWZ5KGdyb3VwQ29udGV4dCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBzZXRUb2tlbkV4cGlyYXRpb24oZ2x0ZXhwOiBzdHJpbmcpOiBQcm9taXNlPFNldExvZ2luVG9rZW5FeHBSZXNwb25zZT4ge1xuICAgICAgICBpZiAoIXRoaXMuX3V0aWxzLmlzVmFsaWRHbHRFeHAoZ2x0ZXhwKSkge1xuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5yZW1vdmVJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2dsdGV4cGApO1xuICAgICAgICAgICAgZ2x0ZXhwID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsdGV4cCA9IHRoaXMuX3V0aWxzLmdldE1heEdsdEV4cChnbHRleHAsIChhd2FpdCB0aGlzLmdldFRva2VuRXhwaXJhdGlvbigpKS5nbHRleHApO1xuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZS5zZXRJdGVtKGAke3RoaXMuX3N0b3JhZ2VLZXl9X2dsdGV4cGAsIGdsdGV4cCk7XG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnJlbW92ZUl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fZXhwYCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5PSyxcbiAgICAgICAgICAgIGdsdGV4cCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0VG9rZW5FeHBpcmF0aW9uKCk6IFByb21pc2U8R2V0TG9naW5Ub2tlbkV4cFJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGx0ID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHRoaXMuX3N0b3JhZ2VLZXkpO1xuICAgICAgICBpZiAoIWx0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuVU5BVVRIT1JJWkVEX1VTRVIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVycm9yQ29kZTogR1NFcnJvcnMuT0ssXG4gICAgICAgICAgICBnbHRleHA6IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV9nbHRleHBgKSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgY2hlY2tUb2tlblJlbmV3KGxvZ2luVG9rZW46IHN0cmluZyk6IFByb21pc2U8R2V0R3JvdXBUb2tlblJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGdyb3VwVG9rZW4gPSBhd2FpdCB0aGlzLmdldFRva2VuKCk7XG4gICAgICAgIGNvbnN0IGludmFsaWRUb2tlbnMgPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0oYCR7dGhpcy5fc3RvcmFnZUtleX1fcmV2b2tlZF90b2tlbnNgKSB8fCAnJztcbiAgICAgICAgY29uc3QgaXNJbnZhbGlkID0gaW52YWxpZFRva2Vucy5pbmRleE9mKGxvZ2luVG9rZW4pID49IDA7XG4gICAgICAgIGlmICghaXNJbnZhbGlkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldFRva2VuKGxvZ2luVG9rZW4pO1xuICAgICAgICAgICAgcmV0dXJuIHtlcnJvckNvZGU6IEdTRXJyb3JzLk9LfTtcbiAgICAgICAgfSBlbHNlIGlmIChncm91cFRva2VuLmVycm9yQ29kZSA9PT0gR1NFcnJvcnMuT0sgJiYgaW52YWxpZFRva2Vucy5pbmRleE9mKGdyb3VwVG9rZW4ubG9naW5fdG9rZW4pIDwgMCkge1xuICAgICAgICAgICAgLy8ganVzdCBjaGFuZ2luZyB0aGUgZXJyb3IgY29kZSAtIGJ1dCByZXR1cm5pbmcgdGhlIHNhbWUgc2Vzc2lvbiBpbmZvIG9mIHRoZSBncm91cFxuICAgICAgICAgICAgZ3JvdXBUb2tlbi5lcnJvckNvZGUgPSBHU0Vycm9ycy5UT0tFTl9IQVNfUkVORVdFRDtcbiAgICAgICAgICAgIHJldHVybiBncm91cFRva2VuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtlcnJvckNvZGU6IEdTRXJyb3JzLklOVkFMSURfVE9LRU59O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIHN5bmNDYW5hcnlJbmRpY2F0aW9uKGlzQ2FuYXJ5OiBzdHJpbmcsIHZlcnNpb25TaWduYXR1cmU6IHN0cmluZyk6IFByb21pc2U8Q2FuYXJ5SW5kaWNhdGlvblJlc3BvbnNlPiB7XG4gICAgICAgIGlmICghdGhpcy5fY2FuYXJ5S2V5IHx8ICF0aGlzLl9jYW5hcnlWZXJLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiB7ZXJyb3JDb2RlOiBHU0Vycm9ycy5JTlZBTElEX0VOVklST05NRU5UX0NPTkZJR30gYXMgQ2FuYXJ5SW5kaWNhdGlvblJlc3BvbnNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgU1NPSXNDYW5hcnkgPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0odGhpcy5fY2FuYXJ5S2V5KTtcbiAgICAgICAgY29uc3QgU1NPVmVyc2lvblNpZ25hdHVyZSA9IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9jYW5hcnlWZXJLZXkpO1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlOiBDYW5hcnlJbmRpY2F0aW9uUmVzcG9uc2UgPSB7XG4gICAgICAgICAgICBlcnJvckNvZGU6IEdTRXJyb3JzLk9LLFxuICAgICAgICAgICAgaXNDYW5hcnksXG4gICAgICAgICAgICBjYW5hcnlWZXJzaW9uOiB2ZXJzaW9uU2lnbmF0dXJlLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXMuX3V0aWxzLnZhbGlkYXRpb25zKCkuYWxsRGVmaW5lZE9yQWxsVW5kZWZpbmVkKFNTT0lzQ2FuYXJ5LCBTU09WZXJzaW9uU2lnbmF0dXJlKSkge1xuICAgICAgICAgICAgLy8gbm90IGxlZ2FsXG4gICAgICAgICAgICByZXNwb25zZS5lcnJvckNvZGUgPSBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fdXRpbHMudmFsaWRhdGlvbnMoKS5hbGxEZWZpbmVkT3JBbGxVbmRlZmluZWQoaXNDYW5hcnksIHZlcnNpb25TaWduYXR1cmUpKSB7XG4gICAgICAgICAgICAvLyBub3QgbGVnYWxcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlOiBHU0Vycm9ycy5JTlZBTElEX1BBUkFNRVRFUl9WQUxVRSxcbiAgICAgICAgICAgICAgICBpc0NhbmFyeTogU1NPSXNDYW5hcnksXG4gICAgICAgICAgICAgICAgY2FuYXJ5VmVyc2lvbjogU1NPVmVyc2lvblNpZ25hdHVyZSxcbiAgICAgICAgICAgIH0gYXMgQ2FuYXJ5SW5kaWNhdGlvblJlc3BvbnNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2l0ZUNhbmFyeVZlcnNpb24gPSB0aGlzLl9wYXJzZUNhbmFyeVZlcnNpb25TaWduYXR1cmUodmVyc2lvblNpZ25hdHVyZSk7XG4gICAgICAgIGNvbnN0IFNTT0NhbmFyeVZlcnNpb24gPSB0aGlzLl9wYXJzZUNhbmFyeVZlcnNpb25TaWduYXR1cmUoU1NPVmVyc2lvblNpZ25hdHVyZSk7XG5cbiAgICAgICAgaWYgKHNpdGVDYW5hcnlWZXJzaW9uLnRpbWVzdGFtcCA+IFNTT0NhbmFyeVZlcnNpb24udGltZXN0YW1wKSB7XG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0odGhpcy5fY2FuYXJ5S2V5LCBpc0NhbmFyeSk7XG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0odGhpcy5fY2FuYXJ5VmVyS2V5LCB2ZXJzaW9uU2lnbmF0dXJlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmlzQ2FuYXJ5ID0gU1NPSXNDYW5hcnk7XG4gICAgICAgICAgICByZXNwb25zZS5jYW5hcnlWZXJzaW9uID0gU1NPVmVyc2lvblNpZ25hdHVyZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXJrU2l0ZVZpc2l0ZWQoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHZpc2l0ZWRTdG9yYWdlS2V5ID0gYCR7dGhpcy5fc3RvcmFnZUtleX1fdmlzaXRlZGA7XG4gICAgICAgIGxldCB2aXNpdGVkID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHZpc2l0ZWRTdG9yYWdlS2V5KSB8fCAnJztcbiAgICAgICAgaWYgKHZpc2l0ZWQuaW5kZXhPZih0aGlzLl9zaXRlQXBpS2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHZpc2l0ZWQgKz0gJywnICsgdGhpcy5fc2l0ZUFwaUtleTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0odmlzaXRlZFN0b3JhZ2VLZXksIHZpc2l0ZWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcmtSZXZva2VkTG9naW5Ub2tlbihsb2dpblRva2VuOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFsb2dpblRva2VuKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGludmFsaWRUb2tlbnNTdG9yYWdlS2V5ID0gYCR7dGhpcy5fc3RvcmFnZUtleX1fcmV2b2tlZF90b2tlbnNgO1xuICAgICAgICBsZXQgaW52YWxpZFRva2VucyA9IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShpbnZhbGlkVG9rZW5zU3RvcmFnZUtleSkgfHwgJyc7XG4gICAgICAgIGxldCBhcnJJbnZhbGlkVG9rZW5zID0gaW52YWxpZFRva2Vucy5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAoYXJySW52YWxpZFRva2Vucy5sZW5ndGggPiAzKSB7XG4gICAgICAgICAgICAvL2RlbGV0ZSBvbmUgb2xkIHJldm9rZWQgdG9rZW5cbiAgICAgICAgICAgIGFyckludmFsaWRUb2tlbnMuc3BsaWNlKDEsIDEpOyAvLyBmaXJzdCBlbGVtZW50IGlzIGFsd2F5cyBlbXB0eVxuICAgICAgICB9XG4gICAgICAgIGludmFsaWRUb2tlbnMgPSBhcnJJbnZhbGlkVG9rZW5zLmpvaW4oJywnKTtcbiAgICAgICAgaWYgKGludmFsaWRUb2tlbnMuaW5kZXhPZihsb2dpblRva2VuKSA8IDApIHtcbiAgICAgICAgICAgIGludmFsaWRUb2tlbnMgKz0gJywnICsgbG9naW5Ub2tlbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0oaW52YWxpZFRva2Vuc1N0b3JhZ2VLZXksIGludmFsaWRUb2tlbnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldExvZ291dFVSTHMoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgdmlzaXRlZCA9IHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbShgJHt0aGlzLl9zdG9yYWdlS2V5fV92aXNpdGVkYCk7XG4gICAgICAgIGlmICghdmlzaXRlZCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFyTG9nb3V0VVJMcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHNpdGVLZXkgaW4gdGhpcy5fc3NvQ29uZmlnLmxvZ291dFVSTHMpIHtcbiAgICAgICAgICAgIGlmICh2aXNpdGVkLmluZGV4T2YoJywnICsgc2l0ZUtleSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgYXJMb2dvdXRVUkxzLnB1c2godGhpcy5fc3NvQ29uZmlnLmxvZ291dFVSTHNbc2l0ZUtleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhckxvZ291dFVSTHMuam9pbignLCcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NyZWF0ZUtleShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7bmFtZX1fJHt0aGlzLl9hcGlLZXl9JHt0aGlzLl9zc29TZWdtZW50ID8gYF8ke3RoaXMuX3Nzb1NlZ21lbnR9YCA6ICcnfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfcGFyc2VDYW5hcnlWZXJzaW9uU2lnbmF0dXJlKGNhbmFyeVZlcnNpb25TaWc6IHN0cmluZyk6IENhbmFyeVZlcnNpb24ge1xuICAgICAgICBjb25zdCBkZWZhdWx0RGF0YSA9IHtidWlsZDogMCwgcHJvYmFiaWxpdHk6IDAsIHRpbWVzdGFtcDogLTF9IGFzIENhbmFyeVZlcnNpb247XG4gICAgICAgIGlmICghY2FuYXJ5VmVyc2lvblNpZykgcmV0dXJuIGRlZmF1bHREYXRhO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IGNhbmFyeVZlcnNpb25TaWcuc3BsaXQoJy0nKTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYnVpbGQ6IE51bWJlcihwYXJ0c1swXSksXG4gICAgICAgICAgICBwcm9iYWJpbGl0eTogTnVtYmVyKHBhcnRzWzFdKSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogTnVtYmVyKHBhcnRzWzJdKSxcbiAgICAgICAgfSBhcyBDYW5hcnlWZXJzaW9uO1xuICAgIH1cbn1cbiIsImltcG9ydCB7VXJpfSBmcm9tIFwic3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL1VyaVwiO1xuaW1wb3J0ICogYXMgdmFsaWRhdGlvblV0aWxzIGZyb20gJ3NyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy92YWxpZGF0aW9uJztcbmltcG9ydCBHbG9iYWxQcm92aWRlciBmcm9tIFwiLi9nbG9iYWxQcm92aWRlclwiO1xuaW1wb3J0IHtDb29raWVTdG9yYWdlQWRhcHRlciwgaW5pdGlhbGl6ZUFkYXB0ZXJ9IGZyb20gXCJzcmMvY29yZS9HaWd5YS5Kcy9hcHAvVXRpbHMvbG9jYWxTdG9yYWdlXCI7XG5pbXBvcnQge2Rlc2VyaWFsaXplfSBmcm9tIFwic3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL2tleVZhbHVlXCI7XG5pbXBvcnQge2dldE1heCBhcyBnZXRNYXhHbHRFeHAsIGlzVmFsaWQgYXMgaXNWYWxpZEdsdEV4cH0gZnJvbSBcInNyYy9jb3JlL0dpZ3lhLkpzL2FwcC9VdGlscy9nbHRleHBcIjtcbmltcG9ydCB7VVJMRGVjb2RlUmVjdXJzaXZlfSBmcm9tIFwic3JjL2NvcmUvR2lneWEuSnMvYXBwL1V0aWxzL1VSTFwiO1xuXG5jb25zdCBkZWZhdWx0VmFsaWREb21haW5zID0gWydnaWd5YS1hcGkuY29tJywgJ2dpZ3lhLWFwaS5jbicsICdnaWd5YS5jb20nLCAnbXkuZ2lneWEtZXh0LmNvbScsICdsb2NhbGhvc3QnXTtcblxuZXhwb3J0IGNsYXNzIFNzb1V0aWxzIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2dsb2JhbCA9IEdsb2JhbFByb3ZpZGVyLCBwcml2YXRlIF9kZWZhdWx0VmFsaWREb21haW5zID0gZGVmYXVsdFZhbGlkRG9tYWlucykge31cblxuICAgIGdldFBhZ2VVcmwoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsb2JhbC5kb2N1bWVudExvY2F0aW9uKCkudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNWYWxpZERvbWFpbih2YWxpZERvbWFpbnM6IHN0cmluZ1tdLCBjYW5kaWRhdGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBkb21haW4gPSBVcmkucGFyc2UoY2FuZGlkYXRlKS5kb21haW47XG4gICAgICAgIGNvbnN0IGFyVmFsaWREb21haW5zID0gdmFsaWREb21haW5zLmNvbmNhdCh0aGlzLl9kZWZhdWx0VmFsaWREb21haW5zKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhclZhbGlkRG9tYWlucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgdmFsaWREb21haW4gPSBhclZhbGlkRG9tYWluc1tpXS5yZXBsYWNlKCcqJywgJycpLnNwbGl0KCc6JylbMF07XG4gICAgICAgICAgICBjb25zdCBpbmRleE9mVmFsaWREb21haW4gPSBkb21haW4uaW5kZXhPZih2YWxpZERvbWFpbik7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaW5kZXhPZlZhbGlkRG9tYWluID49IDAgJiZcbiAgICAgICAgICAgICAgICBpbmRleE9mVmFsaWREb21haW4gPT09IGRvbWFpbi5sZW5ndGggLSB2YWxpZERvbWFpbi5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICAoaW5kZXhPZlZhbGlkRG9tYWluID09PSAwIHx8IGRvbWFpbi5jaGFyQXQoaW5kZXhPZlZhbGlkRG9tYWluIC0gMSkgPT09ICcuJyB8fCBkb21haW4uY2hhckF0KGluZGV4T2ZWYWxpZERvbWFpbiAtIDEpID09PSAnLycpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIHNlbmRNZXNzYWdlKHJlczogT2JqZWN0LCBjYWxsYmFja0lEOiBzdHJpbmcsIHJlcXVlc3REb21haW46IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBsZXQgc3RyTWVzc2FnZSA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHAgaW4gcmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzW3BdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdHJNZXNzYWdlICs9IGVzY2FwZShwICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlc1twXSkgKyAnJicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2dsb2JhbC5wb3N0TWVzc2FnZVRvUGFyZW50KGNhbGxiYWNrSUQgKyAnPScgKyBzdHJNZXNzYWdlLCByZXF1ZXN0RG9tYWluKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNWYWxpZEdsdEV4cChnbHRFeHA6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gaXNWYWxpZEdsdEV4cChnbHRFeHApO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYXhHbHRFeHAoZ2x0RXhwMTogc3RyaW5nLCBnbHRFeHAyOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGdldE1heEdsdEV4cChnbHRFeHAxLCBnbHRFeHAyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVjb2RlVXJsKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gVVJMRGVjb2RlUmVjdXJzaXZlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVzZXJpYWxpemUodmFsdWU6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldENvb2tpZXNTdG9yYWdlKCkge1xuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFkYXB0ZXIoQ29va2llU3RvcmFnZUFkYXB0ZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2YWxpZGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRpb25VdGlscztcbiAgICB9XG5cbiAgICBwdWJsaWMgVXJpRmFjdG9yeSh1cmw6IHN0cmluZywgaXNBYnNvbHV0ZSA9IHRydWUpOiBVcmkge1xuICAgICAgICByZXR1cm4gbmV3IFVyaSh1cmwsIGlzQWJzb2x1dGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRGcmFnbWVudCgpIHtcbiAgICAgICAgY29uc3QgcGFnZVVSTCA9IHRoaXMuZ2V0UGFnZVVybCgpO1xuXG4gICAgICAgIGlmIChwYWdlVVJMLmluZGV4T2YoJyMnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBwYWdlVVJMLnNwbGl0KCcjJylbMV07XG4gICAgICAgIH1cblxuICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=
